import{_ as o,j as a}from"./vendor-tTApdY0Y.bundle.js";class r extends BaseViewController{constructor(t={}){o.defaults(t,{el:"#recurring_holiday_view_container",special_day_array:null,type_array:null,day_of_month_array:null,day_of_week_array:null,month_of_year_array:null,always_week_day_array:null,week_interval_array:null,pivot_day_direction_array:null,date_api:null}),super(t)}init(t){this.edit_view_tpl="RecurringHolidayEditView.html",this.permission_id="holiday_policy",this.viewId="RecurringHoliday",this.script_name="RecurringHolidayView",this.table_name_key="recurring_holiday",this.context_menu_name=a.i18n._("Recurring Holiday"),this.navigation_label=a.i18n._("Recurring Holiday"),this.api=TTAPI.APIRecurringHoliday,this.date_api=TTAPI.APITTDate,this.render(),this.buildContextMenu(),this.initData()}initOptions(){var t=this,l=[{option_name:"special_day",field_name:"special_day",api:this.api},{option_name:"week_interval",field_name:"week_interval",api:this.api},{option_name:"type",api:this.api},{option_name:"pivot_day_direction",api:this.api},{option_name:"always_week_day",field_name:"always_week_day",api:this.api}];this.initDropDownOptions(l),this.date_api.getDayOfMonthArray({onResult:function(i){i=i.getResult(),t.day_of_month_array=i}}),this.date_api.getMonthOfYearArray({onResult:function(i){i=i.getResult(),t.month_of_year_array=i}}),this.date_api.getDayOfWeekArray({onResult:function(i){i=i.getResult(),t.day_of_week_array=i}})}buildEditViewUI(){super.buildEditViewUI();var t=this,l={tab_recurring_holiday:{label:a.i18n._("Recurring Holiday")},tab_audit:!0};this.setTabModel(l),this.navigation.AComboBox({api_class:TTAPI.APIRecurringHoliday,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_recurring_holiday",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var i=this.edit_view_tab.find("#tab_recurring_holiday"),_=i.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(_);var e=Global.loadWidgetByName(FormItemType.TEXT_INPUT);e.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn(a.i18n._("Name"),e,_,""),e.parent().width("45%"),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"special_day"}),e.setSourceData(t.special_day_array),this.addEditFieldToColumn(a.i18n._("Special Day"),e,_),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"type_id",set_empty:!1}),e.setSourceData(t.type_array),this.addEditFieldToColumn(a.i18n._("Type"),e,_,"",null,!0),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"week_interval"}),e.setSourceData(t.week_interval_array),this.addEditFieldToColumn(a.i18n._("Week Interval"),e,_,"",null,!0),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"day_of_week"}),e.setSourceData(a.extend({},t.day_of_week_array)),this.addEditFieldToColumn(a.i18n._("Day of the week"),e,_,"",null,!0),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"pivot_day_direction_id"}),e.setSourceData(t.pivot_day_direction_array),this.addEditFieldToColumn(a.i18n._("Pivot Day Direction"),e,_,"",null,!0),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"day_of_month"}),e.setSourceData(t.day_of_month_array),this.addEditFieldToColumn(a.i18n._("Day of the Month"),e,_,"",null,!0),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"month_int"}),e.setSourceData(t.month_of_year_array),this.addEditFieldToColumn(a.i18n._("Month"),e,_,"",null,!0),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"always_week_day_id"}),e.setSourceData(t.always_week_day_array),this.addEditFieldToColumn(a.i18n._("Always On Week Day"),e,_,"")}onFormItemChange(t,l){this.setIsChanged(t),this.setMassEditingFieldsWhenFormChange(t);var i=t.getField(),_=t.getValue();this.current_edit_record[i]=_,i==="special_day"&&this.onSpecialDayChange(),i==="type_id"&&this.onTypeChange(),l||this.validate()}setEditViewDataDone(){super.setEditViewDataDone(),this.onSpecialDayChange(),this.onTypeChange()}onSpecialDayChange(){this.detachElement("type_id"),this.detachElement("week_interval"),this.detachElement("day_of_week"),this.detachElement("pivot_day_direction_id"),this.detachElement("day_of_month"),this.detachElement("month_int"),Global.isFalseOrNull(this.current_edit_record.special_day)&&(this.current_edit_record.special_day=0),parseInt(this.current_edit_record.special_day)===0&&(this.attachElement("type_id"),this.detachElement("week_interval"),this.detachElement("day_of_week"),this.detachElement("pivot_day_direction_id"),this.attachElement("day_of_month"),this.attachElement("month_int")),this.editFieldResize()}onTypeChange(){parseInt(this.current_edit_record.special_day)===0&&(this.current_edit_record.type_id==10?(this.detachElement("week_interval"),this.detachElement("day_of_week"),this.detachElement("pivot_day_direction_id"),this.attachElement("day_of_month"),this.attachElement("month_int")):this.current_edit_record.type_id==20?(this.attachElement("week_interval"),this.attachElement("day_of_week"),this.detachElement("pivot_day_direction_id"),this.detachElement("day_of_month"),this.attachElement("month_int")):this.current_edit_record.type_id==30&&(this.detachElement("week_interval"),this.attachElement("day_of_week"),this.attachElement("pivot_day_direction_id"),this.attachElement("day_of_month"),this.attachElement("month_int"))),this.editFieldResize()}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:a.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:a.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:a.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX})]}}export{r as RecurringHolidayViewController};
//# sourceMappingURL=RecurringHolidayViewController-hOxZSHrq.bundle.js.map
