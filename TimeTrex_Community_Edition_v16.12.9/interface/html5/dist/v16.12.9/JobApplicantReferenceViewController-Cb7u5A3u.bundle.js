import{_ as r,j as a}from"./vendor-tTApdY0Y.bundle.js";class d extends BaseViewController{constructor(t={}){r.defaults(t,{el:"#job_applicant_reference_view_container",type_array:null,country_array:null,province_array:null,e_province_array:null,company_api:null,sub_view_grid_autosize:!0}),super(t)}init(t){this.edit_view_tpl="JobApplicantReferenceEditView.html",this.permission_id="job_applicant",this.viewId="JobApplicantReference",this.script_name="JobApplicantReferenceView",this.table_name_key="job_applicant_reference",this.context_menu_name=a.i18n._("Reference"),this.navigation_label=a.i18n._("Job Applicant Reference"),this.api=TTAPI.APIJobApplicantReference,this.company_api=TTAPI.APICompany,this.render(),this.sub_view_mode||this.initData()}showNoResultCover(t){super.showNoResultCover(!!this.sub_view_mode)}onAddClick(){this.sub_view_mode&&this.buildContextMenu(!0),super.onAddClick()}initOptions(){this.initDropDownOption("type"),this.initDropDownOption("country","country",this.company_api)}buildEditViewUI(){super.buildEditViewUI();var t=this,n={tab_job_applicant_reference:{label:a.i18n._("Job Applicant Reference")},tab_audit:!0};this.setTabModel(n),this.navigation.AComboBox({api_class:TTAPI.APIJobApplicantReference,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_job_applicant_reference",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var o=this.edit_view_tab.find("#tab_job_applicant_reference"),i=o.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(i);var e;e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"type_id"}),e.setSourceData(t.type_array),this.addEditFieldToColumn(a.i18n._("Type"),e,i,""),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"first_name",width:200}),this.addEditFieldToColumn(a.i18n._("First Name"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"last_name",width:200}),this.addEditFieldToColumn(a.i18n._("Last Name"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"title",width:200}),this.addEditFieldToColumn(a.i18n._("Title"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"address1",width:200}),this.addEditFieldToColumn(a.i18n._("Address (Line 1)"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"address2",width:200}),this.addEditFieldToColumn(a.i18n._("Address (Line 2)"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"city",width:200}),this.addEditFieldToColumn(a.i18n._("City"),e,i),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"country",set_empty:!0}),e.setSourceData(t.country_array),this.addEditFieldToColumn(a.i18n._("Country"),e,i),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"province"}),e.setSourceData([]),this.addEditFieldToColumn(a.i18n._("Province/State"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"postal_code",width:90}),this.addEditFieldToColumn(a.i18n._("Postal/ZIP Code"),e,i),e=Global.loadWidgetByName(FormItemType.DATE_PICKER),e.TDatePicker({field:"start_date"}),this.addEditFieldToColumn(a.i18n._("Known Since"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"work_phone",width:200}),this.addEditFieldToColumn(a.i18n._("Work Phone"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"home_phone",width:200}),this.addEditFieldToColumn(a.i18n._("Home Phone"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"mobile_phone",width:200}),this.addEditFieldToColumn(a.i18n._("Mobile Phone"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"work_email",width:200}),this.addEditFieldToColumn(a.i18n._("Work Email"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"home_email",width:200}),this.addEditFieldToColumn(a.i18n._("Home Email"),e,i),e=Global.loadWidgetByName(FormItemType.TAG_INPUT),e.TTagInput({field:"tag",object_type_id:390}),this.addEditFieldToColumn(a.i18n._("Tags"),e,i,"",null,null,!0)}onFormItemChange(t,n){this.setIsChanged(t),this.setMassEditingFieldsWhenFormChange(t);var o=t.getField();switch(this.current_edit_record[o]=t.getValue(),o){case"country":var i=this.edit_view_ui_dic.province;i.setValue(null);break}if(o==="country"){this.onCountryChange();return}n||this.validate()}setCurrentEditRecordData(){for(var t in this.current_edit_record){var n=this.edit_view_ui_dic[t];if(Global.isSet(n))switch(t){case"country":this.setCountryValue(n,t);break;default:n.setValue(this.current_edit_record[t]);break}}this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}setProvince(t,n){var o=this;!t||t==="-1"||t==="0"?(o.province_array=[],this.adv_search_field_ui_dic.province.setSourceData([])):this.company_api.getOptions("province",t,{onResult:function(i){i=i.getResult(),i||(i=[]),o.province_array=Global.buildRecordArray(i),o.adv_search_field_ui_dic.province.setSourceData(o.province_array)}})}eSetProvince(t,n){var o=this,i=o.edit_view_ui_dic.province;!t||t==="-1"||t==="0"?(o.e_province_array=[],i.setSourceData([])):this.company_api.getOptions("province",t,{onResult:function(e){e=e.getResult(),e||(e=[]),o.e_province_array=Global.buildRecordArray(e),n&&o.e_province_array.length>0&&(o.current_edit_record.province=o.e_province_array[0].value,i.setValue(o.current_edit_record.province)),i.setSourceData(o.e_province_array)}})}onGridSelectRow(){this.sub_view_mode?this.buildContextMenu(!0):this.buildContextMenu(),this.setDefaultMenu()}searchDone(){super.searchDone(),TTPromise.resolve("JobApplicant_History_Tab","JobApplicantReferenceViewController")}}d.loadSubView=function(l,t,n){Global.loadViewSource("JobApplicantReference","SubJobApplicantReferenceView.html",function(o){var i={},e=r.template(o);Global.isSet(t)&&t(),Global.isSet(l)&&(l.html(e(i)),Global.isSet(n)&&n(sub_job_applicant_reference_view_controller))})};export{d as JobApplicantReferenceViewController};
//# sourceMappingURL=JobApplicantReferenceViewController-Cb7u5A3u.bundle.js.map
