import{j as m}from"./vendor-tTApdY0Y.bundle.js";(function(i){i.fn.FormulaBuilder=function(d){var f=i.extend({},i.fn.FormulaBuilder.defaults,d),r=this,c,p=i.i18n._("Formula Builder"),a="",l,h=!1,o=null,u=!0,t=null;return this.getEnabled=function(){return u},this.setEnabled=function(e){u=e,e===!1||e===""?(t.children().attr("disabled","true"),t.addClass("t-text-area-readonly")):(t.children().removeAttr("disabled"),t.removeClass("t-text-area-readonly"))},this.setCheckBox=function(e){o&&(o.children().eq(0)[0].checked=e)},this.isChecked=function(){return!!(o&&o.children().eq(0)[0].checked===!0)},this.setMassEditMode=function(e){h=e,h?(o=i(' <div class="mass-edit-checkbox-wrapper"><input type="checkbox" class="mass-edit-checkbox"></input><label for="checkbox-input-1" class="input-helper input-helper--checkbox"></label></div>'),o.insertBefore(t),o.change(function(){r.trigger("formItemChange",[r])})):o&&(o.remove(),o=null)},this.setValue=function(e){e||(e=""),t.val(e)},this.setErrorStyle=function(e,n,s){s?t.addClass("warning-tip"):t.addClass("error-tip"),a=e,n&&this.showErrorTip()},this.showErrorTip=function(e){Global.isSet(e)||(e=2),l||(l=Global.loadWidgetByName(WidgetNamesDic.ERROR_TOOLTIP),l=l.ErrorTipBox()),t.hasClass("warning-tip")?l.show(this,a,e,!0):l.show(this,a,e)},this.hideErrorTip=function(){Global.isSet(l)&&l.remove()},this.clearErrorStyle=function(){t.removeClass("error-tip"),t.removeClass("warning-tip"),this.hideErrorTip(),a=""},this.setField=function(e){c=e},this.getField=function(){return c},this.getValue=function(){return t.val()},this.setValue=function(e){e||(e=""),t.val(e)},this.each(function(){var e=i.meta?i.extend({},f,i(this).data()):f,n=!0;e.field_type&&e.field_type==="text_input"&&(i(this).html(i.fn.FormulaBuilder.html_template_text_input),n=!1),c=e.field,t=i(this).find(".formula-input");var s=i(this).find("button");n||s.css("float","right"),s.text(e.text_label?e.text_label:p),s.unbind("click").bind("click",Global.debounce(function(b){e.onFormulaBtnClick&&e.onFormulaBtnClick()},Global.calcDebounceWaitTimeBasedOnNetwork(),!0)),e.width&&(e.width>0||e.width.indexOf("%")>0)?e.width.indexOf("%")>0&&n?(r.width(e.width),t.css("width","calc( 100% - 115px )")):t.width(e.width):t.width(300),e.height>0&&t.height(e.height),e.rows>0?t.attr("rows",e.rows):t.attr("rows",5),e.style&&r.css(e.style),t.change(function(){o&&r.setCheckBox(!0),r.trigger("formItemChange",[r])}),t.mouseover(function(){u&&a&&a.length>0&&r.showErrorTip(20)}),t.mouseout(function(){i(r).is(":focus")||r.hideErrorTip()}),t.focusin(function(){u?a&&a.length>0&&r.showErrorTip(20):o||(LocalCacheData.current_open_sub_controller&&LocalCacheData.current_open_sub_controller.edit_view&&LocalCacheData.current_open_sub_controller.is_viewing?(a=LocalCacheData.current_open_sub_controller.getViewModeErrorMessage(),r.showErrorTip(10)):LocalCacheData.current_open_primary_controller&&LocalCacheData.current_open_primary_controller.edit_view&&LocalCacheData.current_open_primary_controller.is_viewing&&(a=LocalCacheData.current_open_primary_controller.getViewModeErrorMessage(),r.showErrorTip(10)))}),t.focusout(function(){r.hideErrorTip()}),TTPromise.wait(null,null,function(){t.parents(".formula-builder").css("opacity",1)})}),this},i.fn.FormulaBuilder.defaults={},i.fn.FormulaBuilder.html_template=`
	<div class="formula-builder">
		<textarea type="text" class="t-text-area formula-input formula-textarea"></textarea>
		<button class="t-button formula-btn"></button>
	</div>
	`,i.fn.FormulaBuilder.html_template_text_input=`
	<div class="formula-builder">
		<input type="text" class="t-text-input formula-input" autocomplete="timetrex-no-auto-fill">
		<button class="t-button formula-btn" style="margin-left: 5px; margin-top: -1px;"></button>
	</div>
	`})(m);
//# sourceMappingURL=FormulaBuilder-C7dDDUu-.bundle.js.map
