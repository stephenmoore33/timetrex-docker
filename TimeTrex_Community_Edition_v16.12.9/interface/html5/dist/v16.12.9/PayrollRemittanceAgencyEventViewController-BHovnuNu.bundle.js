import{_ as r,j as a}from"./vendor-tTApdY0Y.bundle.js";class _ extends BaseViewController{constructor(t={}){r.defaults(t,{el:"#payroll_remittance_agency_event_view_container",user_api:null,status_array:null,action_array:null,agency_array:null,payment_frequency_array:null,report_frequency_array:null,country_array:null,province_array:null,district_array:null,month_of_year_array:null,month_of_quarter_array:null,week_interval_array:null,day_of_month_array:null,day_of_week_array:null,remittance_source_account_array:null,sub_event_view_controller:null}),super(t)}init(t){this.edit_view_tpl="PayrollRemittanceAgencyEventEditView.html",this.permission_id="payroll_remittance_agency",this.script_name="PayrollRemittanceAgencyEventView",this.table_name_key="payroll_remittance_agency_event",this.viewId="PayrollRemittanceAgencyEvent",this.context_menu_name=a.i18n._("Remittance Agency Event"),this.navigation_label=a.i18n._("Remittance Agency Event"),this.api=TTAPI.APIPayrollRemittanceAgencyEvent,this.user_group_api=TTAPI.APIUserGroup,this.company_api=TTAPI.APICompany,this.date_api=TTAPI.APITTDate,this.api_user_report=TTAPI.APIUserReportData,this.month_of_quarter_array=Global.buildRecordArray({1:1,2:2,3:3}),this.render(),this.sub_view_mode?this.buildContextMenu(!0):this.buildContextMenu(),this.sub_view_mode||this.initData()}_setGridSizeGridWidthOfSubViewMode(){this.grid.setGridWidth(a(this.el).parents(".edit-view-tab").parent().parent().width()-10)}initOptions(){var t=this;this.initDropDownOption("status"),this.initDropDownOption("frequency"),this.api.getOptions("week_interval",{onResult:function(e){e=e.getResult(),t.week_interval_array=e}}),this.date_api.getMonthOfYearArray({onResult:function(e){e=e.getResult(),t.month_of_year_array=e}}),this.date_api.getDayOfMonthArray({onResult:function(e){e=e.getResult(),t.day_of_month_array=Global.buildRecordArray(e)}}),this.date_api.getDayOfWeekArray({onResult:function(e){e=e.getResult(),t.day_of_week_array=e}})}getTypeOptions(){var t=this,e={payroll_remittance_agency_id:this.edit_view_ui_dic.payroll_remittance_agency_id.getValue()};this.api.getOptions("type",e,{onResult:function(d){d=d.getResult(),t.edit_view_ui_dic.type_id.setSourceData(Global.buildRecordArray(d)),t.edit_view_ui_dic.type_id.setSourceData(Global.buildRecordArray(d)),t.current_edit_record.type_id=t.edit_view_ui_dic.type_id.getValue(),TTPromise.resolve("PayrollRemittanceAgencyEvent","updateUI")}})}getReportOptions(){var t=this;this.api_user_report.getUserReportData({filter_data:{include_user_report_id:this.current_edit_record.user_report_data_id}},{onResult:function(e){t.edit_view_ui_dic.user_report_data_id.setSourceData(e.getResult())}})}setEditViewDataDone(){super.setEditViewDataDone(),this.onFrequencyChange(),typeof this.current_edit_record.id>"u"&&this.detachElement("enable_recalculate_dates"),this.getTypeOptions(),this.getReportOptions(),this.confirm_on_exit=!1}onFormItemChange(t,e){this.setIsChanged(t),this.setMassEditingFieldsWhenFormChange(t);var d=t.getField(),l=t.getValue();switch(Debug.Text("key: "+d+" value: "+l,"PayrollRemittanceAgencyEventViewController.js","PayrollRemittanceAgencyEventViewController","onFormItemChange",10),TTPromise.add("PayrollRemittanceAgencyEvent","updateUI"),d){case"payroll_remittance_agency_id":this.getTypeOptions();break;case"frequency_id":this.onFrequencyChange(l),this.current_edit_record[d]=l,this.validate(),this.updateFutureDates(),TTPromise.reject("PayrollRemittanceAgencyEvent","updateUI");break;default:TTPromise.resolve("PayrollRemittanceAgencyEvent","updateUI");break}var i=this;TTPromise.wait("PayrollRemittanceAgencyEvent","updateUI",function(){i.onFrequencyChange(),i.current_edit_record[d]=l,i.validate(),i.updateFutureDates()})}updateFutureDates(){Debug.Text("Updating remittance agency event dates.",null,null,null,10);var t=this;this.api.calculateNextRunDate(this.current_edit_record,{onResult:function(e){e=e.getResult(),t.edit_view_ui_dic.start_date.setValue(e.start_date),t.edit_view_ui_dic.end_date.setValue(e.end_date),t.edit_view_ui_dic.due_date.setValue(e.due_date),t.edit_view_ui_dic.next_reminder_date.setValue(e.next_reminder_date)}})}onFrequencyChange(t){Global.isSet(t)||(Global.isSet(this.current_edit_record.frequency_id)||(this.current_edit_record.frequency_id=10),t=this.current_edit_record.frequency_id),Debug.Text("Selected Frequency: "+t,null,null,null,10),this.detachElement("week"),this.detachElement("primary_month"),this.detachElement("primary_day_of_month"),this.detachElement("secondary_month"),this.detachElement("secondary_day_of_month"),this.detachElement("day_of_week"),this.detachElement("due_date_delay_days"),this.detachElement("quarter_month"),this.detachElement("pay_period_schedule_id"),t==1e3?(this.attachElement("pay_period_schedule_id"),this.attachElement("due_date_delay_days")):t==2e3?(this.attachElement("primary_month"),this.edit_view_ui_dic.primary_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Month"),this.attachElement("primary_day_of_month"),this.edit_view_ui_dic.primary_day_of_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Day Of Month")):t==2100?(this.attachElement("primary_day_of_month"),this.edit_view_ui_dic.primary_day_of_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Day Of Month"),this.attachElement("primary_month"),this.edit_view_ui_dic.primary_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Month"),this.attachElement("due_date_delay_days")):t==2200?(this.attachElement("primary_day_of_month"),this.edit_view_ui_dic.primary_day_of_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Primary Day Of Month"),this.attachElement("primary_month"),this.edit_view_ui_dic.primary_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Primary Month"),this.attachElement("secondary_month"),this.attachElement("secondary_day_of_month"),this.attachElement("due_date_delay_days")):t==3e3?(this.attachElement("primary_day_of_month"),this.edit_view_ui_dic.primary_day_of_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Day Of Month"),this.attachElement("quarter_month")):t==4100?(this.attachElement("primary_day_of_month"),this.edit_view_ui_dic.primary_day_of_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Day Of Month")):t==4200?(this.attachElement("primary_day_of_month"),this.edit_view_ui_dic.primary_day_of_month.parents(".edit-view-form-item-div").find(".edit-view-form-item-label").html("Primary Day Of Month"),this.attachElement("secondary_day_of_month"),this.attachElement("due_date_delay_days")):t==5100?this.attachElement("day_of_week"):t==90100||t==90200?this.attachElement("due_date_delay_days"):t==90310&&(this.attachElement("pay_period_schedule_id"),this.attachElement("due_date_delay_days")),this.editFieldResize()}setDefaultMenuMassEditIcon(t,e){ContextMenuManager.hideMenuItem(this.determineContextMenuMountAttributes().id,t.id,!1)}setDefaultMenuSaveAndCopyIcon(t,e){ContextMenuManager.hideMenuItem(this.determineContextMenuMountAttributes().id,t.id,!1)}setDefaultMenuImportIcon(t,e,d){}copyAsNewResetIds(t){return t.id="",t.start_date="",t.end_date="",t.due_date="",t.last_due_date="",t.next_reminder_date="",t.last_reminder_date="",t}onCustomContextClick(t){switch(t){case"import_icon":this.onImportClick();break}}setEditMenuSaveAndContinueIcon(t,e){this.saveAndContinueValidate(t),(!this.current_edit_record||!this.current_edit_record.id)&&ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,t.id,!1)}setEditMenuSaveAndAddIcon(t,e){this.saveAndNewValidate(t),(!this.current_edit_record||!this.current_edit_record.id)&&ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,t.id,!1)}setEditMenuSaveAndCopyIcon(t,e){this.saveAndContinueValidate(t),(!this.current_edit_record||!this.current_edit_record.id)&&ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,t.id,!1)}buildEditViewUI(){super.buildEditViewUI();var t=this,e,d={tab_payroll_remittance_agency_event:{label:a.i18n._("Remittance Agency Event")},tab_audit:!0};this.setTabModel(d),this.navigation.AComboBox({api_class:TTAPI.APIPayrollRemittanceAgencyEvent,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_payroll_remittance_agency",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var l=this.edit_view_tab.find("#tab_payroll_remittance_agency_event");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(l);var i=l.find(".first-column");e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIPayrollRemittanceAgency,allow_multiple_selection:!1,layout_name:"global_payroll_remittance_agency",show_search_inputs:!0,set_empty:!1,field:"payroll_remittance_agency_id"}),this.addEditFieldToColumn(a.i18n._("Remittance Agency"),e,i),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"status_id"}),e.setSourceData(t.status_array),this.addEditFieldToColumn(a.i18n._("Status"),e,i),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"type_id"}),this.addEditFieldToColumn(a.i18n._("Type"),e,i),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"frequency_id"}),e.setSourceData(t.frequency_array),this.addEditFieldToColumn(a.i18n._("Frequency"),e,i),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"primary_month"}),e.setSourceData(Global.buildRecordArray(t.month_of_year_array)),this.addEditFieldToColumn(a.i18n._("Primary Month"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"primary_day_of_month"});var o=Global.addLastItemToArray(t.day_of_month_array,-1,a.i18n._("- Last Day Of Month -"));e.setSourceData(o),this.addEditFieldToColumn(a.i18n._("Primary Day of Month"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"secondary_month"}),e.setSourceData(Global.buildRecordArray(t.month_of_year_array)),this.addEditFieldToColumn(a.i18n._("Secondary Month"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"secondary_day_of_month"}),e.setSourceData(o),this.addEditFieldToColumn(a.i18n._("Secondary Day of Month"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"week"}),e.setSourceData(Global.buildRecordArray(t.week_interval_array)),this.addEditFieldToColumn(a.i18n._("Week"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"quarter_month"}),e.setSourceData(t.month_of_quarter_array),this.addEditFieldToColumn(a.i18n._("Month of Quarter"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"day_of_week"}),e.setSourceData(Global.buildRecordArray(t.day_of_week_array)),this.addEditFieldToColumn(a.i18n._("Day of week"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIPayPeriodSchedule,allow_multiple_selection:!0,layout_name:"global_pay_period_schedule",show_search_inputs:!0,set_special_empty:!0,set_any:!0,field:"pay_period_schedule_id"}),e.setSourceData(t.saved_report_array),this.addEditFieldToColumn(a.i18n._("Pay Period Schedule"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"due_date_delay_days",width:50}),this.addEditFieldToColumn(a.i18n._("Due Date Delay Days"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.DATE_PICKER),e.TDatePicker({field:"effective_date"}),this.addEditFieldToColumn(a.i18n._("Effective Date"),e,i),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIUser,allow_multiple_selection:!1,layout_name:"global_user",show_search_inputs:!0,set_empty:!0,field:"reminder_user_id"}),this.addEditFieldToColumn(a.i18n._("Send Reminder To"),e,i),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({allow_multiple_selection:!1,layout_name:"global_user_report_data",show_search_inputs:!0,set_default:!0,field:"user_report_data_id"}),this.addEditFieldToColumn(a.i18n._("Saved Report"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"reminder_days",width:50}),this.addEditFieldToColumn(a.i18n._("Reminder Days"),e,i,""),e=Global.loadWidgetByName(FormItemType.TEXT_AREA),e.TTextArea({field:"note",width:"100%",rows:5}),this.addEditFieldToColumn(a.i18n._("Notes"),e,i,"",null,!0,!0),e.parent().width("50%"),e=Global.loadWidgetByName(FormItemType.CHECKBOX),e.TCheckbox({field:"enable_recalculate_dates"}),this.addEditFieldToColumn(a.i18n._("Recalculate Dates"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.DATE_PICKER),e.TDatePicker({field:"recalculate_date"}),this.addEditFieldToColumn(a.i18n._("Recalculate Dates From"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT),e.TText({field:"start_date"}),this.addEditFieldToColumn(a.i18n._("Start Date"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.TEXT),e.TText({field:"end_date"}),this.addEditFieldToColumn(a.i18n._("End Date"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.TEXT),e.TText({field:"due_date"}),this.addEditFieldToColumn(a.i18n._("Due Date"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.TEXT),e.TText({field:"next_reminder_date"}),this.addEditFieldToColumn(a.i18n._("Reminder Date"),e,i,"",null,!0)}}_.loadSubView=function(n,t,e){Global.loadViewSource("PayrollRemittanceAgencyEvent","SubPayrollRemittanceAgencyEventView.html",function(d){var l={},i=r.template(d);Global.isSet(t)&&t(),Global.isSet(n)&&(n.html(i(l)),Global.isSet(e)&&e(sub_payroll_remittance_agency_event_view_controller))})};export{_ as PayrollRemittanceAgencyEventViewController};
//# sourceMappingURL=PayrollRemittanceAgencyEventViewController-BHovnuNu.bundle.js.map
