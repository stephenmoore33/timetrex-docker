{"version":3,"file":"PayPeriodsViewController-C2-4eYhX.bundle.js","sources":["../../views/payroll/pay_periods/PayPeriodsViewController.js"],"sourcesContent":["export class PayPeriodsViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#pay_periods_view_container',\n\n\t\t\tstatus_array: null,\n\t\t\ttype_array: null,\n\t\t\tpay_period_schedule_api: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'PayPeriodsEditView.html';\n\t\tthis.permission_id = 'pay_period_schedule';\n\t\tthis.script_name = 'PayPeriodsView';\n\t\tthis.viewId = 'PayPeriods';\n\t\tthis.table_name_key = 'pay_period';\n\t\tthis.context_menu_name = $.i18n._( 'Pay Period' );\n\t\tthis.navigation_label = $.i18n._( 'Pay Period' );\n\t\tthis.api = TTAPI.APIPayPeriod;\n\t\tthis.pay_period_schedule_api = TTAPI.APIPayPeriodSchedule;\n\n\t\tthis.render();\n\n\t\tif ( this.sub_view_mode ) {\n\t\t\tthis.buildContextMenu( true );\n\t\t} else {\n\t\t\tthis.buildContextMenu();\n\t\t}\n\n\t\t//call init data in parent view\n\n\t\tif ( !this.sub_view_mode ) {\n\t\t\tthis.initData();\n\t\t}\n\t}\n\n\tremoveEditView( is_cancel ) {\n\n\t\tsuper.removeEditView();\n\n\t\tif ( this.parent_view_controller &&\n\t\t\t( this.parent_view_controller.viewId === 'TimeSheet' || this.parent_view_controller.viewId === 'PayStub' ) ) {\n\t\t\tthis.parent_view_controller.onSubViewRemoved( is_cancel );\n\t\t}\n\t}\n\n\tinitOptions( callBack ) {\n\t\tvar $this = this;\n\n\t\tvar options = [\n\t\t\t{ option_name: 'status', field_name: null, api: null },\n\t\t\t{ option_name: 'type', field_name: 'type_id', api: this.pay_period_schedule_api }\n\t\t];\n\n\t\tthis.initDropDownOptions( options, function( result ) {\n\n\t\t\tif ( callBack ) {\n\t\t\t\tcallBack( result ); // First to initialize drop down options, and then to initialize edit view UI.\n\t\t\t}\n\n\t\t} );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: ['copy'],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: '', //Empty label. vue_icon is displayed instead of text.\n\t\t\t\t\tid: 'other_header',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'other',\n\t\t\t\t\taction_group_header: true,\n\t\t\t\t\tvue_icon: 'tticon tticon-more_vert_black_24dp',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Delete Data' ),\n\t\t\t\t\tid: 'delete_data',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'other'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Import Data' ),\n\t\t\t\t\tid: 'import_icon',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'other'\n\t\t\t\t},\n\t\t\t]\n\t\t};\n\n\t\tif ( this.edit_only_mode ) {\n\t\t\tcontext_menu_model.exclude.push( 'import_icon', 'delete_data' );\n\t\t}\n\n\t\treturn context_menu_model;\n\t}\n\n\tonEditClick( record_id, noRefreshUI ) {\n\t\t//If a dynamic future pay period is selected (zero id) do not allow it to be interacted with.\n\t\tif ( this.getGridSelectIdArray().includes( TTUUID.zero_id ) ) {\n\t\t\tProgressBar.closeOverlay();\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.onEditClick( record_id, noRefreshUI );\n\t}\n\n\topenEditView( id ) {\n\n\t\tvar $this = this;\n\n\t\tif ( $this.edit_only_mode ) {\n\n\t\t\t$this.initOptions( function( result ) {\n\n\t\t\t\tif ( !$this.edit_view ) {\n\t\t\t\t\t$this.initEditViewUI( $this.viewId, $this.edit_view_tpl );\n\t\t\t\t}\n\n\t\t\t\t$this.getPayPeriodData( id, function( result ) {\n\t\t\t\t\t// Waiting for the TTAPI.API returns data to set the current edit record.\n\t\t\t\t\t$this.current_edit_record = result;\n\n\t\t\t\t\t$this.initEditView();\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t} else {\n\t\t\tif ( !this.edit_view ) {\n\t\t\t\tthis.initEditViewUI( $this.viewId, $this.edit_view_tpl );\n\t\t\t}\n\n\t\t}\n\t}\n\n\tsetCustomDefaultMenuIcon( id, context_btn, grid_selected_length ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'login':\n\t\t\t\tthis.setDefaultMenuLoginIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t\tcase 'cancel':\n\t\t\t\tthis.setDefaultMenuCancelIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t\tcase 'import_icon':\n\t\t\t\tthis.setDefaultMenuImportIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t\tcase 'delete_data':\n\t\t\t\tthis.setDefaultMenuDeleteDataIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetDefaultMenu( doNotSetFocus ) {\n\n\t\t//Overloads setDefaultMenu due to custom logic where if a dynamic future pay period is selected do not allow it to be interacted with.\n\t\t//Still calls super below if did not click a dynamic future pay period.\n\t\tvar context_menu_array = ContextMenuManager.getMenuModelByMenuId( this.determineContextMenuMountAttributes().id );\n\t\tif ( this.getSelectedItems().some( select_item => select_item && select_item.status_id == 50 ) ) {\n\t\t\tfor ( var i = 0; i < context_menu_array.length; i++ ) {\n\t\t\t\tlet context_btn = context_menu_array[i];\n\t\t\t\tlet id = context_menu_array[i].id;\n\n\t\t\t\tif ( id === 'add' ) {\n\t\t\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t\t\t} else {\n\t\t\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.setTotalDisplaySpan(); //Still update total selected items so its easy to count future pay periods.\n\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.setDefaultMenu( doNotSetFocus );\n\t}\n\n\t/* jshint ignore:end */\n\tsetDefaultMenuImportIcon( context_btn, grid_selected_length ) {\n\n\t\tif ( !this.importValidate() ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\n\t\tif ( grid_selected_length >= 1 ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\timportValidate( selected_item ) {\n\t\tvar p_id = this.permission_id;\n\n\t\tif ( !Global.isSet( selected_item ) ) {\n\t\t\tselected_item = this.getSelectedItem();\n\t\t}\n\n\t\tif ( p_id === 'report' ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( this.editPermissionValidate( p_id, selected_item ) || this.addPermissionValidate( p_id, selected_item ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tsetDefaultMenuDeleteDataIcon( context_btn, grid_selected_length ) {\n\n\t\tif ( !this.importValidate() ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\n\t\tif ( grid_selected_length >= 1 ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsetCustomEditMenuIcon( id, context_btn ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'delete_data':\n\t\t\t\tthis.setEditMenuImportIcon( context_btn );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetEditMenuImportIcon( context_btn, pId ) {\n\t\tif ( !this.importValidate() || this.is_viewing || this.is_edit || this.is_add ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tonCustomContextClick( context_btn ) {\n\t\tvar $this = this;\n\n\t\tvar grid_selected_id_array;\n\n\t\tvar ids = [];\n\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\tids.push( $this.current_edit_record.id );\n\t\t} else {\n\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\tids.push( grid_selected_row.id );\n\t\t\t} );\n\t\t}\n\n\t\tif ( ids.length > 0 ) {\n\n\t\t\tswitch ( context_btn ) {\n\n\t\t\t\tcase 'import_icon':\n\t\t\t\t\tTAlertManager.showConfirmAlert( $.i18n._( 'This will import employee attendance data from other pay periods into this pay period.Are you sure you wish to continue?' ), null, function( result ) {\n\n\t\t\t\t\t\tif ( result ) {\n\t\t\t\t\t\t\tProgressBar.showOverlay();\n\t\t\t\t\t\t\t$this.api.importData( ids, {\n\t\t\t\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\t\t\t\t\tif ( res && res.isValid() ) {\n\t\t\t\t\t\t\t\t\t\t$this.search( false );\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tTAlertManager.showErrorAlert( res );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'delete_data':\n\n\t\t\t\t\tTAlertManager.showConfirmAlert( $.i18n._( 'This will delete all attendance data assigned to this pay period. Are you sure you wish to continue?' ), null, function( result ) {\n\n\t\t\t\t\t\tif ( result ) {\n\t\t\t\t\t\t\tProgressBar.showOverlay();\n\t\t\t\t\t\t\t$this.api.deleteData( ids, {\n\t\t\t\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\t\t\t\t\tif ( res && res.isValid() ) {\n\t\t\t\t\t\t\t\t\t\t$this.search( false );\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tTAlertManager.showErrorAlert( res );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'export_excel':\n\t\t\t\t\tthis.onExportClick( 'export' + this.api.key_name );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\t}\n\n\tgetPayPeriodData( id, callBack ) {\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = [id];\n\n\t\tthis.api['get' + this.api.key_name]( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\tif ( !result_data ) {\n\t\t\t\t\tresult_data = [];\n\t\t\t\t}\n\t\t\t\tresult_data = result_data[0];\n\n\t\t\t\tcallBack( result_data );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tbuildSearchFields() {\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Period Schedule' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_period_schedule_id',\n\t\t\t\tlayout_name: 'global_pay_period_schedule',\n\t\t\t\tapi_class: TTAPI.APIPayPeriodSchedule,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tscript_name: 'PayPeriodScheduleView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Start Date' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'start_date',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.DATE_PICKER\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'End Date' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'end_date',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.DATE_PICKER\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Transaction Start Date' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'transaction_start_date',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.DATE_PICKER\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Transaction End Date' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'transaction_end_date',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.DATE_PICKER\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Show Future Pay Periods' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'show_future_pay_periods',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.CHECKBOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tscript_name: 'EmployeeView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tscript_name: 'EmployeeView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\n\t\t];\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_pay_period': { 'label': $.i18n._( 'Pay Period' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tif ( !this.edit_only_mode ) {\n\t\t\tthis.navigation.AComboBox( {\n\t\t\t\tid: this.script_name + '_navigation',\n\t\t\t\tapi_class: TTAPI.APIPayPeriod,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_Pay_period',\n\t\t\t\tnavigation_mode: true,\n\t\t\t\tshow_search_inputs: true\n\t\t\t} );\n\n\t\t\tthis.setNavigation();\n\t\t}\n\n\t\t//Tab 0 start\n\n\t\tvar tab_pay_period = this.edit_view_tab.find( '#tab_pay_period' );\n\n\t\tvar tab_pay_period_column1 = tab_pay_period.find( '.first-column' );\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_pay_period_column1 );\n\n\t\t// Status\n\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'status_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_pay_period_column1, '' );\n\n\t\t// Pay Period Schedule\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'pay_period_schedule' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Period Schedule' ), form_item_input, tab_pay_period_column1, '', null, true );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayPeriodSchedule,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_pay_period_schedule',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'pay_period_schedule_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Period Schedule' ), form_item_input, tab_pay_period_column1, '', null, true );\n\n\t\t// Start date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'start_date', mode: 'date_time' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Start Date' ), form_item_input, tab_pay_period_column1, '', null, true );\n\n\t\t// End date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'end_date', mode: 'date_time' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'End Date' ), form_item_input, tab_pay_period_column1, '', null, true );\n\n\t\t// Transaction date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'transaction_date', mode: 'date_time' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Transaction Date' ), form_item_input, tab_pay_period_column1, '', null, true );\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\n\t\tif ( !this.current_edit_record ) {\n\t\t\tthis.current_edit_record = {};\n\t\t}\n\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tif ( key === 'status_id' ) {\n\t\t\tthis.onStatusChange();\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tsetDateColumnStatus( value, disabled ) {\n\t\tif ( this.edit_view_ui_dic[value] ) {\n\t\t\tif ( disabled ) {\n\t\t\t\tthis.edit_view_ui_dic[value].find( 'input' ).attr( 'disabled', 'disabled' );\n\t\t\t\tthis.edit_view_ui_dic[value].find( 'img' ).unbind( 'click' );\n\t\t\t} else {\n\t\t\t\tthis.edit_view_ui_dic[value].find( 'input' ).removeAttr( 'disabled' );\n\t\t\t\tthis.edit_view_ui_dic[value].find( 'img' ).bind( 'click' );\n\t\t\t}\n\t\t}\n\t}\n\n\tonStatusChange() {\n\t\t//TypeError: Cannot read property 'status_id' of undefined\n\t\tif ( this.current_edit_record && this.current_edit_record['status_id'] == 20 ) {\n\t\t\tthis.setDateColumnStatus( 'start_date', true );\n\t\t\tthis.setDateColumnStatus( 'end_date', true );\n\t\t\tthis.setDateColumnStatus( 'transaction_date', true );\n\t\t} else {\n\t\t\tthis.setDateColumnStatus( 'start_date', false );\n\t\t\tthis.setDateColumnStatus( 'end_date', false );\n\t\t\tthis.setDateColumnStatus( 'transaction_date', false );\n\t\t}\n\t}\n\n\tisEditChange() {\n\t\tif ( this.current_edit_record && this.current_edit_record.id ) {\n\t\t\tthis.attachElement( 'pay_period_schedule' );\n\t\t\tthis.detachElement( 'pay_period_schedule_id' );\n\t\t} else if ( this.is_mass_editing ) {\n\t\t\tthis.detachElement( 'pay_period_schedule' );\n\t\t\tthis.detachElement( 'pay_period_schedule_id' );\n\t\t} else {\n\t\t\tthis.detachElement( 'pay_period_schedule' );\n\t\t\tthis.attachElement( 'pay_period_schedule_id' );\n\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\t\tthis.onStatusChange();\n\t\tthis.isEditChange();\n\t}\n\n\tgetValidSearchFilter() {\n\t\tvar validFilterData = super.getValidSearchFilter();\n\n\t\tif ( Global.isSet( validFilterData.show_future_pay_periods ) && validFilterData.show_future_pay_periods.value === false ) {\n\t\t\tdelete validFilterData.show_future_pay_periods;\n\t\t}\n\n\t\treturn validFilterData;\n\t}\n\n}\n\nPayPeriodsViewController.loadSubView = function( container, beforeViewLoadedFun, afterViewLoadedFun ) {\n\n\tGlobal.loadViewSource( 'PayPeriods', 'SubPayPeriodsView.html', function( result ) {\n\n\t\tvar args = {};\n\t\tvar template = _.template( result );\n\n\t\tif ( Global.isSet( beforeViewLoadedFun ) ) {\n\t\t\tbeforeViewLoadedFun();\n\t\t}\n\n\t\tif ( Global.isSet( container ) ) {\n\t\t\tcontainer.html( template( args ) );\n\n\t\t\tif ( Global.isSet( afterViewLoadedFun ) ) {\n\t\t\t\tTTPromise.wait( 'BaseViewController', 'initialize', function() {\n\t\t\t\t\tafterViewLoadedFun( sub_pay_periods_view_controller );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n};"],"names":["PayPeriodsViewController","options","_","$","is_cancel","callBack","result","context_menu_model","record_id","noRefreshUI","id","$this","context_btn","grid_selected_length","doNotSetFocus","context_menu_array","select_item","i","selected_item","p_id","pId","grid_selected_id_array","ids","index","value","grid_selected_row","res","filter","result_data","tab_model","tab_pay_period","tab_pay_period_column1","form_item_input","target","doNotValidate","key","c_value","disabled","validFilterData","container","beforeViewLoadedFun","afterViewLoadedFun","args","template"],"mappings":"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"}