import{j as H}from"./vendor-tTApdY0Y.bundle.js";(function(e){e.fn.TRangePicker=function(V){var x=e.extend({},e.fn.TRangePicker.defaults,V),a=this,E,C,i,m,p="",h,I=!1,d=null,b=!0,y=!1,k=!1,n,D,R,s,_,T=!1,g,G;this.getEnabled=function(){return b},this.setEnabled=function(t){b=t,t===!1||t===""?(a.attr("disabled","true"),i.addClass("t-date-picker-readonly"),m.css("display","none")):(a.removeAttr("disabled"),i.removeClass("t-date-picker-readonly"),m.css("display","inline"))},this.setCheckBox=function(t){d&&(d.children().eq(0)[0].checked=t)},this.isChecked=function(){return!!(d&&d.children().eq(0)[0].checked===!0)},this.setMassEditMode=function(t){I=t,I?(d=e(' <div class="mass-edit-checkbox-wrapper"><input type="checkbox" class="mass-edit-checkbox"></input><label for="checkbox-input-1" class="input-helper input-helper--checkbox"></label></div>'),d.insertBefore(e(this)),d.change(function(){a.trigger("formItemChange",[a])})):d&&(d.remove(),d=null)},this.setErrorStyle=function(t,r,l){l?i.addClass("warning-tip"):i.addClass("error-tip"),p=t,r&&this.showErrorTip()},this.showErrorTip=function(t){Global.isSet(t)||(t=2),h||(h=Global.loadWidgetByName(WidgetNamesDic.ERROR_TOOLTIP),h=h.ErrorTipBox()),i.hasClass("warning-tip")?h.show(this,p,t,!0):h.show(this,p,t)},this.hideErrorTip=function(){Global.isSet(h)&&h.remove()},this.clearErrorStyle=function(){i.removeClass("error-tip"),i.removeClass("warning-tip"),this.hideErrorTip(),p=""},this.getField=function(){return E},this.getValidationField=function(){return C},this.getDefaultFormatValue=function(){var t=i.val();return t=Global.strToDate(t).format("YYYY-MM-DD"),t},this.getValue=function(){return s},this.setValue=function(t){t||(t=""),e.type(t)!=="array"?(s=[t],i.val(t),i.removeAttr("readonly")):(s=t,t.length==1?(i.val(t[0]),i.removeAttr("readonly")):(i.val(t.length+" "+e.i18n._("dates selected")),i.attr("readonly","readonly"))),this.autoResize()},this.autoResize=function(){var t,r;r=Global.calculateTextWidth(LocalCacheData.getLoginUserPreference().date_format_display),t=Global.calculateTextWidth(i.val(),{min_width:r,max_width:r*2+100,padding:28}),G.width(t+"px")},this.close=function(){if(!T){var t=g.tabs("option","active");n.remove(),y=!1,LocalCacheData.openRangerPicker=null,k=!1,t==0?(s=D.val()+" - "+R.val(),i.val(s),i.attr("readonly","readonly")):(s=_.getValue(),s.length>1?(i.val(s.length+" "+e.i18n._("dates selected")),i.attr("readonly","readonly")):(i.val(s[0]),i.removeAttr("readonly"))),this.autoResize(),setTimeout(function(){a.trigger("formItemChange",[a])},100)}},this.getIsMouseOver=function(){return k};var A=function(t){var r=t?t.length:0;if(this.removeAllRows(),r>0){for(var l=0;l<t.length;l++)if(Global.isSet(t[l])){var c=t[l];this.addRow(c)}}else this.addRow("")},F=function(t){var r=t[0].rowIndex-1;t.remove(),this.rows_widgets_array.splice(r,1),this.removeLastRowLine()},O=function(t){if(t||(t=""),this.rows_widgets_array.length>0&&!t){var r=this.rows_widgets_array[this.rows_widgets_array.length-1].start_date_stamp.getValue();r?r=Global.strToDate(r):r=new Date,r=new Date(new Date(r.getTime()).setDate(r.getDate()+1)),t=r.format()}else this.rows_widgets_array.length===0&&!t&&(t=new Date().format());var l=this.getRowRender(),c=this.getRender(),f={},u=Global.loadWidgetByName(FormItemType.DATE_PICKER);u.TDatePicker({field:"start_date_stamp",beforeShow:function(){T=!0},onClose:function(){T=!1}}),e(".ranger-picker-dates-width-tr").width(u.width()+80),u.setValue(t),f[u.getField()]=u,l.children().eq(0).append(u),e(c).append(l),this.rows_widgets_array.push(f),this.addIconsEvent(l),this.removeLastRowLine()},L=function(t){for(var r=this.rows_widgets_array.length,l=[],c=0;c<r;c++){var f=this.rows_widgets_array[c];f.start_date_stamp.getValue()&&l.push(f.start_date_stamp.getValue())}return l},Y=function(){n=e(Global.loadWidget("global/widgets/datepicker/TRangePicker.html"));var t=n.find("a[ref=tab_range]"),r=n.find("a[ref=tab_date]");t.text(e.i18n._("Range")),r.text(e.i18n._("Dates")),D=n.find("#tab_range_content_div").find(".start-picker"),R=n.find("#tab_range_content_div").find(".end-picker");var l=n.find("#tab_range_content_div").find(".start-picker-label"),c=n.find("#tab_range_content_div").find(".end-picker-label");l.text(e.i18n._("Start")),c.text(e.i18n._("End"));var f=LocalCacheData.getLoginUserPreference().date_format_1;e.datepicker._gotoToday=function(M){var v=e(M),o=this._getInst(v[0]);if(this._get(o,"gotoCurrent")&&o.currentDay)o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear;else{var w=new Date;o.selectedDay=w.getDate(),o.drawMonth=o.selectedMonth=w.getMonth(),o.drawYear=o.selectedYear=w.getFullYear(),this._setDateDatepicker(v,w),this._selectDate(M,this._getDateDatepicker(v)),e(v).datepicker("setDate",w)}this._notifyChange(o),this._adjustDate(v)},D.datepicker({showOtherMonths:!0,selectOtherMonths:!0,showTime:!1,dateFormat:f,showHour:!1,showMinute:!1,changeMonth:!0,changeYear:!0,showButtonPanel:!0,duration:"",showAnim:"",yearRange:"-100:+10",showOn:"",dayNamesMin:[e.i18n._("Sun"),e.i18n._("Mon"),e.i18n._("Tue"),e.i18n._("Wed"),e.i18n._("Thu"),e.i18n._("Fri"),e.i18n._("Sat")],currentText:e.i18n._("Today"),monthNamesShort:[e.i18n._("Jan"),e.i18n._("Feb"),e.i18n._("Mar"),e.i18n._("Apr"),e.i18n._("May"),e.i18n._("Jun"),e.i18n._("Jul"),e.i18n._("Aug"),e.i18n._("Sep"),e.i18n._("Oct"),e.i18n._("Nov"),e.i18n._("Dec")]}),R.datepicker({showOtherMonths:!0,selectOtherMonths:!0,showTime:!1,dateFormat:f,showHour:!1,showMinute:!1,changeMonth:!0,changeYear:!0,showButtonPanel:!0,duration:"",showAnim:"",yearRange:"-100:+10",showOn:"",dayNamesMin:[e.i18n._("Sun"),e.i18n._("Mon"),e.i18n._("Tue"),e.i18n._("Wed"),e.i18n._("Thu"),e.i18n._("Fri"),e.i18n._("Sat")],currentText:e.i18n._("Today"),monthNamesShort:[e.i18n._("Jan"),e.i18n._("Feb"),e.i18n._("Mar"),e.i18n._("Apr"),e.i18n._("May"),e.i18n._("Jun"),e.i18n._("Jul"),e.i18n._("Aug"),e.i18n._("Sep"),e.i18n._("Oct"),e.i18n._("Nov"),e.i18n._("Dec")]});var u=n.find(".close-icon");u.click(function(){a.close()});var N=n.find("#tab_date"),W=N.find(".inside-editor-div"),B={start_date_stamp:e.i18n._("Date")};_=Global.loadWidgetByName(FormItemType.INSIDE_EDITOR),_=_.InsideEditor({title:"",addRow:O,getValue:L,setValue:A,removeRow:F,parent_controller:a,render:"global/widgets/datepicker/TRangeInsideEditorRender.html",render_args:B,api:null,row_render:"global/widgets/datepicker/TRangeInsideEditorRow.html"}),W.append(_),_.setValue(),e("body").append(n),g=e(n.find(".edit-view-tab-bar")),g=g.tabs({activate:function(M,v){!g||g.is(":visible")}}),n.mouseenter(function(){k=!0}),n.mouseleave(function(){k=!1});var P=n.width();if(P+e(a).offset().left+50>Global.bodyWidth()?n.css("left",Global.bodyWidth()-P-50):n.css("left",e(a).offset().left),e(a).offset().top+25+300<Global.bodyHeight()?n.css("top",e(a).offset().top+25):n.css("top",Global.bodyHeight()-300),LocalCacheData.openRangerPicker=a,s&&typeof s=="string"){var S=s.split(" - ");D.datepicker("setDate",S[0]),R.datepicker("setDate",S[1])}else s&&e.type(s)==="array"&&(g.tabs("option","active",1),_.setValue(s))};return this.setPlaceHolder=function(t){i.attr("placeholder",t)},this.each(function(){var t=e.meta?e.extend({},x,e(this).data()):x;G=e(this),E=t.field,t.validation_field&&(C=t.validation_field),m=e(this).find(".t-date-picker-icon"),i=e(this).find(".t-date-picker"),m.attr("src",Global.getRealImagePath("images/cal.png")),a.setPlaceHolder(LocalCacheData.loginUserPreference.date_format_display),i.change(function(){return d&&a.setCheckBox(!0),s=[i.val()],a.trigger("formItemChange",[a]),a.autoResize(),!0}),m.bind("mouseup",function(){b&&(y?(a.close(),y=!1):(Y(),y=!0))}),i.mouseover(function(){b&&p&&p.length>0&&a.showErrorTip(20)}),i.mouseout(function(){e(a).is(":focus")||a.hideErrorTip()}),a.autoResize()}),this},e.fn.TRangePicker.defaults={}})(H);
//# sourceMappingURL=TRangePicker-C6rhJuX3.bundle.js.map
