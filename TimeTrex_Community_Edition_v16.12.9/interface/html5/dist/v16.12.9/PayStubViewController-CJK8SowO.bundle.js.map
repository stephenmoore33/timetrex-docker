{"version":3,"file":"PayStubViewController-CJK8SowO.bundle.js","sources":["../../views/payroll/pay_stub/PayStubViewController.js"],"sourcesContent":["import { Decimal } from 'decimal.js';\n\nexport class PayStubViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#pay_stub_view_container',\n\n\t\t\tfiltered_status_array: null,\n\t\t\tuser_status_array: null,\n\t\t\tuser_group_array: null,\n\t\t\tuser_destination_account_array: null,\n\t\t\tcurrency_array: null,\n\t\t\ttype_array: null,\n\n\t\t\tcountry_array: null,\n\t\t\tprovince_array: null,\n\n\t\t\te_province_array: null,\n\n\t\t\tuser_api: null,\n\t\t\tuser_group_api: null,\n\t\t\tcompany_api: null,\n\n\t\t\tpay_stub_entry_api: null,\n\n\t\t\tinclude_pay_stub_accounts: true,\n\t\t\ttransaction_status_array: false,\n\n\t\t\tnet_pay_amount: false,\n\n\t\t\tpseal_link: false,\n\n\t\t\toriginal_status_id: 10\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'PayStubEditView.html';\n\t\tthis.permission_id = 'pay_stub';\n\t\tthis.viewId = 'PayStub';\n\t\tthis.script_name = 'PayStubView';\n\t\tthis.table_name_key = 'pay_stub';\n\t\tthis.context_menu_name = $.i18n._( 'Pay Stub' );\n\t\tthis.navigation_label = $.i18n._( 'Pay Stubs' );\n\t\tthis.api = TTAPI.APIPayStub;\n\t\tthis.user_api = TTAPI.APIUser;\n\t\tthis.pay_stub_entry_api = TTAPI.APIPayStubEntry;\n\t\tthis.pay_stub_entry_account_link_api = TTAPI.APIPayStubEntryAccountLink;\n\t\tthis.user_group_api = TTAPI.APIUserGroup;\n\t\tthis.company_api = TTAPI.APICompany;\n\t\tthis.pay_period_api = TTAPI.APIPayPeriod;\n\t\tthis.pay_stub_transaction_api = TTAPI.APIPayStubTransaction;\n\t\tthis.remittance_destination_account_api = TTAPI.APIRemittanceDestinationAccount;\n\n\t\tvar $this = this;\n\t\t$.when(\n\t\t\tthis.preloadTransactionOptions( new $.Deferred() ),\n\t\t\tthis.preloadPayStubAccountLinks( new $.Deferred() )\n\t\t).done( function() {\n\t\t\t$this.completeInit();\n\t\t} );\n\t}\n\n\tisEditMode() {\n\t\tif ( this.is_add || ( this.is_edit && this.original_status_id == 25 ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpreloadTransactionOptions( dfd ) {\n\t\tvar $this = this;\n\t\tthis.pay_stub_transaction_api.getOptions( 'status', false, false, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.transaction_status_array = result.getResult();\n\t\t\t\tdfd.resolve( true );\n\t\t\t}\n\t\t} );\n\n\t\treturn dfd.promise();\n\t}\n\n\tpreloadPayStubAccountLinks( dfd ) {\n\t\tvar $this = this;\n\t\tthis.pay_stub_entry_account_link_api.getPayStubEntryAccountLink( '', false, false, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar data = result.getResult()[0];\n\t\t\t\tif ( data ) {\n\t\t\t\t\t$this.pseal_link = {\n\t\t\t\t\t\ttotal_gross_entry_account_id: false,\n\t\t\t\t\t\ttotal_deductions_entry_account_id: false,\n\t\t\t\t\t\tnet_pay_entry_account_id: false,\n\t\t\t\t\t\tcontributions_entry_account_id: false\n\t\t\t\t\t};\n\n\t\t\t\t\t$this.pseal_link.total_gross_entry_account_id = data.total_gross;\n\t\t\t\t\t$this.pseal_link.total_deductions_entry_account_id = data.total_employee_deduction;\n\t\t\t\t\t$this.pseal_link.net_pay_entry_account_id = data.total_net_pay;\n\t\t\t\t\t$this.pseal_link.contributions_entry_account_id = data.total_employer_deduction;\n\t\t\t\t}\n\t\t\t\tdfd.resolve( true );\n\t\t\t}\n\t\t} );\n\n\t\treturn dfd.promise();\n\t}\n\n\tcompleteInit() {\n\t\tthis.initPermission();\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t}\n\n\tinitPermission() {\n\n\t\tsuper.initPermission();\n\n\t\tif ( PermissionManager.validate( this.permission_id, 'view' ) || PermissionManager.validate( this.permission_id, 'view_child' ) ) {\n\t\t\tthis.show_search_tab = true;\n\t\t} else {\n\t\t\tthis.show_search_tab = false;\n\t\t}\n\t\treturn {};\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tvar options = [\n\t\t\t{ option_name: 'filtered_status', field_name: 'status_id', api: this.api },\n\t\t\t{ option_name: 'type', field_name: 'type_id', api: this.api },\n\t\t\t{ option_name: 'status', field_name: 'user_status_id', api: this.user_api },\n\t\t\t{ option_name: 'country', field_name: 'country', api: this.company_api },\n\t\t];\n\n\t\tthis.initDropDownOptions( options );\n\n\t\tvar result = {};\n\t\tfor ( var i = 1; i <= 128; i++ ) {\n\t\t\tresult[i] = i;\n\t\t}\n\t\t$this.basic_search_field_ui_dic['run_id'].setSourceData( Global.buildRecordArray( result ) );\n\t\t$this.adv_search_field_ui_dic['run_id'].setSourceData( Global.buildRecordArray( result ) );\n\t\tthis.user_group_api.getUserGroup( '', false, false, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = res.getResult();\n\n\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t$this.user_group_array = res;\n\n\t\t\t\tif ( !$this.sub_view_mode && $this.basic_search_field_ui_dic['group_id'] ) {\n\t\t\t\t\t$this.basic_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\tgroups: {\n\t\t\t\tpay_stubs: {\n\t\t\t\t\tlabel: $.i18n._( 'Pay Stubs' ),\n\t\t\t\t\tid: this.script_name + 'Pay Stubs'\n\t\t\t\t}\n\t\t\t},\n\t\t\texclude: [\n\t\t\t\t'copy',\n\t\t\t\t'save_and_new',\n\t\t\t\t'save_and_copy',\n\t\t\t],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Jump To' ),\n\t\t\t\t\tid: 'jump_to_header',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\taction_group_header: true,\n\t\t\t\t\tpermission_result: false // to hide it in legacy context menu and avoid errors in legacy parsers.\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'TimeSheet' ),\n\t\t\t\t\tid: 'timesheet',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Schedule' ),\n\t\t\t\t\tid: 'schedule',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Pay Stub Amendments' ),\n\t\t\t\t\tid: 'pay_stub_amendment',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Pay Stub Transactions' ),\n\t\t\t\t\tid: 'pay_stub_transaction',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\titems: [], // TODO: Is this still needed? It interferes with PrimeVue as it thinks its a submenu but wrong format, but I cant see anywhere this code is used, other than for Print menu.\n\t\t\t\t\tpermission_result: true,\n\t\t\t\t\tpermission: true,\n\t\t\t\t\tsort_order: null\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit Employee' ),\n\t\t\t\t\tid: 'edit_employee',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit Pay Period' ),\n\t\t\t\t\tid: 'edit_pay_period',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: '', //Empty label. vue_icon is displayed instead of text.\n\t\t\t\t\tid: 'other_header',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'other',\n\t\t\t\t\taction_group_header: true,\n\t\t\t\t\tvue_icon: 'tticon tticon-more_vert_black_24dp',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'View: Employee Pay Stubs' ),\n\t\t\t\t\tid: 'employee_pay_stubs',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'other',\n\t\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'View: Employer Pay Stubs' ),\n\t\t\t\t\tid: 'employer_pay_stubs',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'other',\n\t\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Generate Pay Stub' ),\n\t\t\t\t\tid: 'generate_pay_stub',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'other',\n\t\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Process Transactions' ),\n\t\t\t\t\tid: 'direct_deposit',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'other',\n\t\t\t\t\ticon: 'direct_deposit-35x35.png',\n\t\t\t\t\titems: [],\n\t\t\t\t\tpermission_result: true,\n\t\t\t\t\tpermission: true\n\t\t\t\t},\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tsetCustomDefaultMenuIcon( id, context_btn, grid_selected_length ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'timesheet':\n\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'punch' );\n\t\t\t\tbreak;\n\t\t\tcase 'schedule':\n\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'schedule' );\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub_amendment':\n\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'pay_stub_amendment' );\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub_transaction':\n\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'pay_stub_transaction' );\n\t\t\t\tbreak;\n\t\t\tcase 'edit_employee':\n\t\t\t\tthis.setDefaultMenuEditEmployeeIcon( context_btn, grid_selected_length, 'user' );\n\t\t\t\tbreak;\n\t\t\tcase 'edit_pay_period':\n\t\t\t\tthis.setDefaultMenuEditPayPeriodIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t\tcase 'employee_pay_stubs':\n\t\t\tcase 'employer_pay_stubs':\n\t\t\tcase 'print_checks':\n\t\t\tcase 'direct_deposit':\n\t\t\t\tthis.setDefaultMenuReportRelatedIcons( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t\tcase 'generate_pay_stub':\n\t\t\t\tthis.setDefaultMenuGeneratePayStubIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetDefaultMenuEditPayPeriodIcon( context_btn, grid_selected_length, pId ) {\n\t\tif ( !this.editPermissionValidate( 'pay_period_schedule' ) ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsetDefaultMenuEditEmployeeIcon( context_btn, grid_selected_length ) {\n\t\tif ( !this.editChildPermissionValidate( 'user' ) ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsetDefaultMenuViewIcon( context_btn, grid_selected_length, pId ) {\n\t\tif ( pId === 'punch' || pId === 'schedule' || pId === 'pay_stub_amendment' ) {\n\t\t\tsuper.setDefaultMenuViewIcon( context_btn, grid_selected_length, pId );\n\t\t} else if ( pId === 'pay_stub_transaction' ) {\n\t\t\tif ( PermissionManager.validate( 'pay_stub', 'enabled' )\n\t\t\t\t&& ( PermissionManager.validate( 'pay_stub', 'view' ) || PermissionManager.validate( 'pay_stub', 'view_child' ) ) ) {\n\t\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t\t} else {\n\t\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t\t}\n\t\t} else {\n\t\t\tif ( !this.viewPermissionValidate( pId ) || this.edit_only_mode ) {\n\t\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t\t}\n\n\t\t\tif ( grid_selected_length > 0 && this.viewOwnerOrChildPermissionValidate() ) {\n\t\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t\t} else {\n\t\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t\t}\n\t\t}\n\t}\n\n\tsetCustomEditMenuIcon( id, context_btn ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'timesheet':\n\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'punch' );\n\t\t\t\tbreak;\n\t\t\tcase 'schedule':\n\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'schedule' );\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub_amendment':\n\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'pay_stub_amendment' );\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub_transaction':\n\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'pay_stub_transaction' );\n\t\t\t\tbreak;\n\t\t\tcase 'edit_employee':\n\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'user' );\n\t\t\t\tbreak;\n\t\t\tcase 'edit_pay_period':\n\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'pay_period_schedule' );\n\t\t\t\tbreak;\n\t\t\tcase 'view':\n\t\t\tcase 'employer_pay_stubs':\n\t\t\tcase 'employee_pay_stubs':\n\t\t\tcase 'print_checks':\n\t\t\tcase 'direct_deposit':\n\t\t\t\t//this.setEditMenuReportRelatedIcons( context_btn );\n\t\t\t\tthis.setEditMenuEditIcon( context_btn );\n\t\t\t\tbreak;\n\t\t\tcase 'generate_pay_stub':\n\t\t\t\tthis.setEditMenuGeneratePayStubIcon( context_btn );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpayStubReportIconsValidate() {\n\t\tif ( !PermissionManager.validate( 'pay_stub', 'enabled' ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar selected_item = this.getSelectedItem();\n\n\t\tif ( PermissionManager.validate( 'pay_stub', 'view' ) || this.ownerOrChildPermissionValidate( 'pay_stub', 'view_child', selected_item ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tsetDefaultMenuReportRelatedIcons( context_btn, grid_selected_length, pId ) {\n\t\tif ( !this.payStubReportIconsValidate() ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\n\t\tif ( grid_selected_length > 0 && this.viewOwnerOrChildPermissionValidate() ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsetEditMenuReportRelatedIcons( context_btn, grid_selected_length, pId ) {\n\t\tif ( !this.payStubReportIconsValidate() ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\n\t\tif ( this.current_edit_record.id && this.viewOwnerOrChildPermissionValidate() ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsetEditMenuGeneratePayStubIcon( context_btn, grid_selected_length, pId ) {\n\t\tif ( !PermissionManager.checkTopLevelPermission( 'GeneratePayStubs' ) ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\t}\n\n\tsetDefaultMenuGeneratePayStubIcon( context_btn, grid_selected_length, pId ) {\n\t\tif ( !PermissionManager.checkTopLevelPermission( 'GeneratePayStubs' ) ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\t}\n\n\tremoveEntryInsideEditorCover() {\n\t\tif ( this.cover && this.cover.length > 0 ) {\n\t\t\tthis.cover.remove();\n\t\t}\n\t\tthis.cover = null;\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tthis.include_pay_stub_accounts = true;\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'country':\n\t\t\t\t\t\tthis.setCountryValue( widget, key );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'status_id':\n\t\t\t\t\t\tif ( this.current_edit_record[key] == 40 || this.current_edit_record[key] == 100 ) {\n\t\t\t\t\t\t\tthis.include_pay_stub_accounts = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\n\t\tif ( this.is_add ) {\n\t\t\tthis.edit_view_ui_dic.user_id.setEnabled( true );\n\t\t} else {\n\t\t\tthis.edit_view_ui_dic.user_id.setEnabled( false );\n\t\t}\n\n\t\tif ( !this.is_mass_editing ) {\n\t\t\tthis.initInsideEntryEditorData();\n\t\t\tthis.attachElement( 'user_id' );\n\t\t} else {\n\t\t\tthis.detachElement( 'user_id' );\n\t\t}\n\t}\n\n\tgetPayStubTransactionDefaultData( callback, index ) {\n\t\tthis.pay_stub_transaction_api['get' + this.pay_stub_transaction_api.key_name + 'DefaultData']( {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar data = [];\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tresult_data.id = false;\n\n\t\t\t\tdata.push( result_data );\n\n\t\t\t\tcallback( data, index );\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetPayStubTransaction( callback ) {\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\targs.filter_data = {};\n\t\targs.filter_data.pay_stub_id = TTUUID.isUUID( this.current_edit_record.id ) ? this.current_edit_record.id : ( TTUUID.isUUID( this.copied_record_id ) ? this.copied_record_id : '' );\n\t\tthis.pay_stub_transaction_api['getPayStubTransaction']( args, true, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tif ( !$this.edit_view ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar result_data = res.getResult();\n\t\t\t\tif ( _.size( result_data ) == 0 ) {\n\t\t\t\t\tresult_data = [];\n\t\t\t\t}\n\n\t\t\t\tcallback( result_data );\n\t\t\t}\n\t\t} );\n\t}\n\n\tinitInsideTransactionEditorData() {\n\t\tvar $this = this;\n\n\t\tif ( ( !this.current_edit_record || TTUUID.isUUID( this.current_edit_record.id ) == false ) && !this.copied_record_id ) {\n\t\t\tthis.getPayStubTransactionDefaultData( function( data ) {\n\t\t\t\tif ( $this.isEditMode() == true || data.length > 0 ) {\n\t\t\t\t\t$this.editor.transaction_data = data;\n\t\t\t\t} else {\n\t\t\t\t\t$this.editor.transaction_data = false;\n\t\t\t\t}\n\t\t\t\t//Issue #2890 - Having a promise resolve after the API call for getting transaction data and storing that data\n\t\t\t\t//to be used later while building the HTML. This stops this API call from being delayed and causing unintended issues\n\t\t\t\t//with duplicating transactions, overlays and data sync issues.\n\t\t\t\tTTPromise.resolve( 'PayStubViewController', 'insideEditorDataLoaded' );\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.getPayStubTransaction( function( data ) {\n\t\t\t\tif ( $this.isEditMode() == true || data.length > 0 ) {\n\t\t\t\t\t$this.editor.transaction_data = data;\n\t\t\t\t} else {\n\t\t\t\t\t$this.editor.transaction_data = false;\n\t\t\t\t}\n\t\t\t\t//Issue #2890 - Having a promise resolve after the API call for getting transaction data and storing that data\n\t\t\t\t//to be used later while building the HTML. This stops this API call from being delayed and causing unintended issues\n\t\t\t\t//with duplicating transactions, overlays and data sync issues.\n\t\t\t\tTTPromise.resolve( 'PayStubViewController', 'insideEditorDataLoaded' );\n\t\t\t} );\n\t\t}\n\t}\n\n\tinitInsideEntryEditorData() {\n\t\tTTPromise.add( 'PayStubViewController', 'insideEditorDataLoaded' );\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\targs.filter_data = {};\n\n\t\tif ( this.copied_record_id || ( this.current_edit_record && this.current_edit_record.id ) ) {\n\t\t\targs.filter_data.pay_stub_id = TTUUID.isUUID( this.current_edit_record.id ) ? this.current_edit_record.id : this.copied_record_id;\n\t\t\tthis.pay_stub_entry_api['get' + this.pay_stub_entry_api.key_name]( args, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tif ( !$this.edit_view ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar data = $this.handlePayStubEntryData( res.getResult() );\n\t\t\t\t\tTTPromise.wait( 'PayStubViewController', 'insideEditorDataLoaded', function() {\n\t\t\t\t\t\t$this.editor.setValue( data );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\tvar data = $this.handlePayStubEntryData();\n\t\t\tTTPromise.wait( 'PayStubViewController', 'insideEditorDataLoaded', function() {\n\t\t\t\t$this.editor.setValue( data );\n\t\t\t} );\n\t\t}\n\n\t\tthis.initInsideTransactionEditorData();\n\t}\n\n\thandlePayStubEntryData( data ) {\n\n\t\tvar total_rows = {};\n\t\tvar retval = {};\n\t\tif ( data ) {\n\t\t\tfor ( var n in data ) {\n\t\t\t\tvar type_id = data[n].type_id;\n\t\t\t\tif ( type_id == 40 ) {\n\t\t\t\t\tif ( data[n].pay_stub_entry_account_id ) {\n\t\t\t\t\t\tvar newrow = data[n];\n\t\t\t\t\t\tnewrow.total_row = true;\n\t\t\t\t\t\ttotal_rows[data[n].pay_stub_entry_account_id] = newrow[n];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( typeof retval[type_id] == 'undefined' ) {\n\t\t\t\t\t\tretval[type_id] = [];\n\t\t\t\t\t}\n\t\t\t\t\tretval[type_id].push( data[n] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//set blanks where there are no records in any given sections\n\t\tvar type_ids = [10, 20, 30, 50, 80]; //no net pay default row\n\t\tfor ( var t = 0; t < type_ids.length; t++ ) {\n\t\t\tif ( typeof retval[type_ids[t]] == 'undefined' || retval[type_ids[t]].length == 0 ) {\n\t\t\t\tretval[type_ids[t]] = [];\n\t\t\t\tretval[type_ids[t]].push( { type_id: type_ids[t] } );\n\t\t\t}\n\t\t}\n\n\t\t//Fill up the missing total rows.\n\t\tvar gross_total = {};\n\t\tif ( total_rows[this.pseal_link.total_gross_entry_account_id] ) {\n\t\t\tgross_total = total_rows[this.pseal_link.total_gross_entry_account_id];\n\t\t} else {\n\t\t\tgross_total = {\n\t\t\t\ttotal_row: true,\n\t\t\t\ttype_id: 40,\n\t\t\t\tname: $.i18n._( 'Total Gross' ),\n\t\t\t\tpay_stub_entry_account_id: this.pseal_link.total_gross_entry_account_id\n\t\t\t};\n\t\t}\n\t\tretval[10].push( gross_total );\n\n\t\tvar employee_deduction_total = {};\n\t\tif ( total_rows[this.pseal_link.total_deductions_entry_account_id] ) {\n\t\t\temployee_deduction_total = total_rows[this.pseal_link.total_deductions_entry_account_id];\n\t\t} else {\n\t\t\temployee_deduction_total = {\n\t\t\t\ttotal_row: true,\n\t\t\t\ttype_id: 40,\n\t\t\t\tname: $.i18n._( 'Total Deductions' ),\n\t\t\t\tpay_stub_entry_account_id: this.pseal_link.total_deductions_entry_account_id\n\t\t\t};\n\t\t}\n\t\tretval[20].push( employee_deduction_total );\n\n\t\tvar net_pay_total = {};\n\t\tif ( total_rows[this.pseal_link.net_pay_entry_account_id] ) {\n\t\t\tnet_pay_total = total_rows[this.pseal_link.net_pay_entry_account_id];\n\t\t} else {\n\t\t\tnet_pay_total = {\n\t\t\t\t//total_row: true,\n\t\t\t\ttype_id: 40,\n\t\t\t\tname: $.i18n._( 'Net Pay' ),\n\t\t\t\tpay_stub_entry_account_id: this.pseal_link.net_pay_entry_account_id\n\t\t\t};\n\t\t}\n\t\t//Because we don't add empty rows to retval[40], and there should only ever be one row in net pay, we will need to initialize retval[40] here.\n\t\tretval[40] = net_pay_total;\n\n\t\tvar employer_deduction_total = {};\n\t\tif ( total_rows[this.pseal_link.contributions_entry_account_id] ) {\n\t\t\temployer_deduction_total = total_rows[this.pseal_link.contributions_entry_account_id];\n\t\t} else {\n\t\t\temployer_deduction_total = {\n\t\t\t\ttotal_row: true,\n\t\t\t\ttype_id: 40,\n\t\t\t\tname: $.i18n._( 'Employer Total Contributions' ),\n\t\t\t\tpay_stub_entry_account_id: this.pseal_link.contributions_entry_account_id\n\t\t\t};\n\t\t}\n\t\tretval[30].push( employer_deduction_total );\n\n\t\treturn retval;\n\t}\n\n\tinsideEntryEditorSetValue( val ) {\n\t\tvar $this = this;\n\t\tthis.removeAllRows( true );\n\t\tthis.removeCover();\n\n\t\tfunction setEarnings( data ) {\n\t\t\tvar render = $this.getRender(); //get render, should be a table\n\t\t\tvar headerRow = `\n\t\t\t<tr class=\"tblHeader\">\n\t\t\t\t<td align=\"left\" colspan=\"2\"><%= col1 %></td>\n\t\t\t\t<td> <%= col2 %></td>\n\t\t\t\t<td> <%= col3 %></td>\n\t\t\t\t<td> <%= col4 %></td>\n\t\t\t\t<td> <%= col5 %></td>\n\t\t\t\t<td> <%= col6 %></td>\n\t\t\t\t<td colspan=\"\" style=\"width:60px\"></td>\n\t\t\t</tr>`;\n\t\t\tvar args = {\n\t\t\t\tcol1: $.i18n._( 'Earnings' ),\n\t\t\t\tcol2: $.i18n._( 'Note' ),\n\t\t\t\tcol3: $.i18n._( 'Rate' ),\n\t\t\t\tcol4: $.i18n._( 'Hrs/Units' ),\n\t\t\t\tcol5: $.i18n._( 'Amount' ),\n\t\t\t\tcol6: $.i18n._( 'YTD Amount' )\n\t\t\t};\n\n\t\t\tvar template = _.template( headerRow );\n\t\t\t$( render ).append( template( args ) );\n\n\t\t\t$this.rows_widgets_array.push( true );\n\t\t\tfor ( var i = 0; i < _.size( data ); i++ ) {\n\t\t\t\tif ( Global.isSet( data[i] ) ) {\n\t\t\t\t\tvar row = data[i];\n\t\t\t\t\trow.type_id = 10;\n\t\t\t\t\t$this.addRow( row );\n\t\t\t\t}\n\t\t\t}\n\t\t\t$( render ).append( '<tr><td colspan=\"8\"><br></td></tr>' );\n\t\t\t$this.rows_widgets_array.push( true );\n\t\t}\n\n\t\tfunction getHeaderThreeColumn() {\n\t\t\treturn `\n\t\t\t<tr class=\"tblHeader\">\n\t\t\t\t<td align=\"left\" colspan=\"2\"><%= col1 %></td>\n\t\t\t\t<td colspan=\"3\"> <%= col2 %></td>\n\t\t\t\t<td> <%= col3 %></td>\n\t\t\t\t<td> <%= col4 %></td>\n\t\t\t\t<td colspan=\"\" style=\"width: 30px\"></td>\n\t\t\t</tr>`;\n\t\t}\n\t\tfunction setDeductions( data ) {\n\t\t\tvar render = $this.getRender(); //get render, should be a table\n\t\t\tvar headerRow = getHeaderThreeColumn();\n\t\t\tvar args = {\n\t\t\t\tcol1: $.i18n._( 'Deductions' ),\n\t\t\t\tcol2: $.i18n._( 'Note' ),\n\t\t\t\tcol3: $.i18n._( 'Amount' ),\n\t\t\t\tcol4: $.i18n._( 'YTD Amount' )\n\t\t\t};\n\n\t\t\tvar template = _.template( headerRow );\n\t\t\t$( render ).append( template( args ) );\n\n\t\t\t$this.rows_widgets_array.push( true );\n\t\t\tfor ( var i = 0; i < _.size( data ); i++ ) {\n\t\t\t\tif ( Global.isSet( data[i] ) ) {\n\t\t\t\t\tvar row = data[i];\n\t\t\t\t\trow.type_id = 20;\n\t\t\t\t\t$this.addRow( row );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$( render ).append( '<tr><td colspan=\"8\"><br></td></tr>' );\n\t\t\t$this.rows_widgets_array.push( true );\n\n\t\t}\n\n\t\tfunction setNetPay( data ) {\n\t\t\tvar render = $this.getRender(); //get render, should be a table\n\t\t\tif ( data ) {\n\t\t\t\t// data.type_id = 40;\n\t\t\t\t$this.addRow( data );\n\t\t\t}\n\n\t\t\t$( render ).append( '<tr><td colspan=\"8\"><br></td></tr>' );\n\t\t\t$this.rows_widgets_array.push( true );\n\n\t\t}\n\n\t\tfunction setMiscellaneous( data ) {\n\t\t\tvar render = $this.getRender(); //get render, should be a table\n\t\t\tvar headerRow = getHeaderThreeColumn();\n\t\t\tvar args = {\n\t\t\t\tcol1: $.i18n._( 'Miscellaneous' ),\n\t\t\t\tcol2: $.i18n._( 'Note' ),\n\t\t\t\tcol3: $.i18n._( 'Amount' ),\n\t\t\t\tcol4: $.i18n._( 'YTD Amount' )\n\t\t\t};\n\n\t\t\tvar template = _.template( headerRow );\n\t\t\t$( render ).append( template( args ) );\n\n\t\t\t$this.rows_widgets_array.push( true );\n\t\t\tfor ( var i in data ) {\n\t\t\t\t$this.addRow( data[i] );\n\t\t\t}\n\t\t\t$( render ).append( '<tr><td colspan=\"8\"><br></td></tr>' );\n\t\t\t$this.rows_widgets_array.push( true );\n\t\t}\n\n\t\tfunction setEmployerContributions( data ) {\n\t\t\tvar render = $this.getRender(); //get render, should be a table\n\t\t\tvar headerRow = getHeaderThreeColumn();\n\t\t\tvar args = {\n\t\t\t\tcol1: $.i18n._( 'Employer Contributions' ),\n\t\t\t\tcol2: $.i18n._( 'Note' ),\n\t\t\t\tcol3: $.i18n._( 'Amount' ),\n\t\t\t\tcol4: $.i18n._( 'YTD Amount' )\n\t\t\t};\n\n\t\t\tvar template = _.template( headerRow );\n\t\t\t$( render ).append( template( args ) );\n\n\t\t\t$this.rows_widgets_array.push( true );\n\t\t\tfor ( var i = 0; i < _.size( data ); i++ ) {\n\t\t\t\tif ( Global.isSet( data[i] ) ) {\n\t\t\t\t\tvar row = data[i];\n\t\t\t\t\trow.type_id = 30;\n\t\t\t\t\t$this.addRow( row );\n\t\t\t\t}\n\t\t\t}\n\t\t\t$( render ).append( '<tr><td colspan=\"8\"><br></td></tr>' );\n\t\t\t$this.rows_widgets_array.push( true );\n\t\t}\n\n\t\tfunction setAccrual( data ) {\n\t\t\tvar render = $this.getRender(); //get render, should be a table\n\t\t\tvar headerRow = getHeaderThreeColumn();\n\t\t\tvar args = {\n\t\t\t\tcol1: $.i18n._( 'Accrual' ),\n\t\t\t\tcol2: $.i18n._( 'Note' ),\n\t\t\t\tcol3: $.i18n._( 'Amount' ),\n\t\t\t\tcol4: $.i18n._( 'Balance' )\n\t\t\t};\n\n\t\t\tvar template = _.template( headerRow );\n\t\t\t$( render ).append( template( args ) );\n\n\t\t\t$this.rows_widgets_array.push( true );\n\t\t\tfor ( var i = 0; i < _.size( data ); i++ ) {\n\t\t\t\tif ( Global.isSet( data[i] ) ) {\n\t\t\t\t\tvar row = data[i];\n\t\t\t\t\trow.type_id = 50;\n\t\t\t\t\t$this.addRow( row );\n\t\t\t\t}\n\t\t\t}\n\t\t\t$( render ).append( '<tr><td colspan=\"8\"><br></td></tr>' );\n\t\t\t$this.rows_widgets_array.push( true );\n\t\t}\n\n\t\tif ( this.parent_controller.isEditMode() == true || this.parent_controller.checkForNonHeaderData( val[10] ) ) {\n\t\t\tsetEarnings( val[10] );\n\t\t}\n\n\t\tif ( this.parent_controller.isEditMode() == true || this.parent_controller.checkForNonHeaderData( val[20] ) ) {\n\t\t\tsetDeductions( val[20] );\n\t\t}\n\n\t\tsetNetPay( val[40] );\n\n\t\tif ( this.parent_controller.isEditMode() == true || this.parent_controller.checkForNonHeaderData( val[80] ) ) {\n\t\t\tsetMiscellaneous( val[80] );\n\t\t}\n\n\t\tif ( this.parent_controller.isEditMode() == true || this.parent_controller.checkForNonHeaderData( val[30] ) ) {\n\t\t\tsetEmployerContributions( val[30] );\n\t\t}\n\n\t\tif ( this.parent_controller.isEditMode() == true || this.parent_controller.checkForNonHeaderData( val[50] ) ) {\n\t\t\tsetAccrual( val[50] );\n\t\t}\n\n\t\tif ( this.parent_controller.editor.transaction_data ) {\n\t\t\tthis.parent_controller.editor.insideTransactionEditorSetValue( this.parent_controller.editor.transaction_data );\n\t\t}\n\n\t\tif ( this.parent_controller.copied_record_id && TTUUID.isUUID( this.parent_controller.copied_record_id ) ) {\n\t\t\tthis.parent_controller.copied_record_id = '';\n\t\t}\n\n\t\tthis.calcTotal();\n\t}\n\n\tcheckForNonHeaderData( data ) {\n\t\tfor ( var n in data ) {\n\t\t\tif ( TTUUID.isUUID( data[n].id ) == true ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tinsideEntryEditorAddRow( data, index ) {\n\t\tvar $this = this;\n\t\tif ( !data ) {\n\t\t\t$this.addRow( {}, index );\n\t\t} else {\n\t\t\tif ( typeof index != 'undefined' && typeof this.rows_widgets_array[index].ytd_amount != 'undefined' && !data['type_id'] ) {\n\t\t\t\tdata['type_id'] = this.rows_widgets_array[index].ytd_amount.attr( 'type_id' );\n\t\t\t}\n\n\t\t\tfunction renderColumns( data, type, index ) {\n\t\t\t\tvar render = $this.getRender(); //get render, should be a table\n\t\t\t\tvar widgets = {}; //Save each row's widgets\n\t\t\t\tvar row; //Get Row render\n\t\t\t\tvar widgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\t\t\tvar right_label;\n\t\t\t\tvar args = { filter_data: {} };\n\t\t\t\tvar pay_stub_amendment_id = '', user_expense_id = '';\n\t\t\t\tvar pay_stub_status_id = $this.parent_controller['current_edit_record']['status_id'];\n\n\t\t\t\tvar is_add = false;\n\n\t\t\t\tif ( ( !$this.parent_controller['current_edit_record']['id'] && !$this.parent_controller.copied_record_id ) || ( !data.id ) ) {\n\t\t\t\t\tis_add = true;\n\t\t\t\t}\n\n\t\t\t\tif ( pay_stub_status_id == 40 || pay_stub_status_id == 100 ) {\n\t\t\t\t\tis_add = false;\n\t\t\t\t}\n\n\t\t\t\tif ( TTUUID.isUUID( data['pay_stub_amendment_id'] ) && data['pay_stub_amendment_id'] != TTUUID.zero_id ) {\n\t\t\t\t\tpay_stub_amendment_id = data['pay_stub_amendment_id'];\n\t\t\t\t}\n\t\t\t\tif ( TTUUID.isUUID( data['user_expense_id'] ) && data['user_expense_id'] != TTUUID.zero_id ) {\n\t\t\t\t\tuser_expense_id = data['user_expense_id'];\n\t\t\t\t}\n\n\t\t\t\tif ( $this.parent_controller.copied_record_id ) {\n\t\t\t\t\tpay_stub_amendment_id = '';\n\t\t\t\t\tuser_expense_id = '';\n\t\t\t\t}\n\n\t\t\t\tvar row_enabled = true;\n\t\t\t\t// if the pay_stub_amendment_id and user_expense_id all >0 how to display the right label?\n\t\t\t\tif ( TTUUID.isUUID( pay_stub_amendment_id ) && pay_stub_amendment_id != TTUUID.zero_id ) {\n\t\t\t\t\tright_label = $( '<span class=\\'widget-right-label\\'> (' + $.i18n._( 'Amendment' ) + ')</span>' );\n\t\t\t\t\trow_enabled = false;\n\t\t\t\t} else if ( TTUUID.isUUID( user_expense_id ) && user_expense_id != TTUUID.zero_id ) {\n\t\t\t\t\tright_label = $( '<span class=\\'widget-right-label\\'> (' + $.i18n._( 'Expense' ) + ')</span>' );\n\t\t\t\t\trow_enabled = false;\n\t\t\t\t}\n\n\t\t\t\tif ( type == 10 ) {\n\t\t\t\t\trow = $( `<tr class=\"tblDataWhite\" align=\"right\">\n\t\t\t\t\t\t\t\t<td align=\"left\" colspan=\"2\"></td>\n\t\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t\t<td colspan=\"2\" class=\"cell control-icon\">\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<button class=\"plus-icon\" onclick=\"\"></button>\n\t\t\t\t\t\t\t\t\t\t<button class=\"minus-icon \" onclick=\"\"></button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>` );\n\t\t\t\t} else {\n\t\t\t\t\trow = $( `<tr class=\"tblDataWhite\" align=\"right\">\n\t\t\t\t\t\t<td align=\"left\" colspan=\"2\"></td>\n\t\t\t\t\t\t<td class=\"\" colspan=\"3\"></td>\n\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t<td colspan=\"2\" class=\"cell control-icon\" style=\"width: 30px\">\n\t\t\t\t\t\t\t<button class=\"plus-icon\" onclick=\"\"></button>\n\t\t\t\t\t\t\t<button class=\"minus-icon \" onclick=\"\"></button>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>` );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t// Pay Stub Account\n\t\t\t\tvar form_item_name_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\t\t\tform_item_name_input.AComboBox( {\n\t\t\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\t\t\twidth: 132,\n\t\t\t\t\tis_static_width: 132,\n\t\t\t\t\tallow_multiple_selection: false,\n\t\t\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\t\t\tshow_search_inputs: true,\n\t\t\t\t\tset_empty: true,\n\t\t\t\t\tfield: 'pay_stub_entry_name_id'\n\t\t\t\t} );\n\t\t\t\tform_item_name_input.setValue( data.pay_stub_entry_name_id );\n\t\t\t\tform_item_name_input.setEnabled( row_enabled );\n\n\t\t\t\tform_item_name_input.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t$this.onFormItemChange( target );\n\t\t\t\t} );\n\n\t\t\t\tvar form_item_name_text = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\t\tform_item_name_text.TText( { field: 'name' } );\n\t\t\t\tform_item_name_text.setValue( data.name ? ( ( data['type_id'] != 40 ) ? '  ' + data.name : data.name ) : '' );\n\n\t\t\t\t// Note(description)\n\t\t\t\tvar form_item_note_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\t\tform_item_note_input.TTextInput( { field: 'description', width: 300 } );\n\t\t\t\tform_item_note_input.setValue( data.description );\n\t\t\t\tform_item_note_input.attr( 'editable', true );\n\n\t\t\t\tvar form_item_note_text = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\t\tform_item_note_text.TText( { field: 'description' } );\n\t\t\t\tform_item_note_text.setValue( data.description ? data.description : ' ' );\n\n\t\t\t\t// Rate\n\t\t\t\tvar form_item_rate_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\t\tform_item_rate_input.TTextInput( { field: 'rate', width: 60, hasKeyEvent: true } );\n\t\t\t\tform_item_rate_input.setValue( Global.removeTrailingZeros( data.rate ) );\n\t\t\t\tform_item_rate_input.attr( 'editable', true );\n\t\t\t\tform_item_rate_input.unbind( 'formItemKeyUp' ).bind( 'formItemKeyUp', function( e, target ) {\n\t\t\t\t\t$this.onFormItemKeyUp( target );\n\t\t\t\t} );\n\n\t\t\t\tform_item_rate_input.unbind( 'formItemKeyDown' ).bind( 'formItemKeyDown', function( e, target ) {\n\t\t\t\t\t$this.onFormItemKeyDown( target );\n\t\t\t\t} );\n\n\t\t\t\tform_item_rate_input.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t$this.onFormItemChange( target );\n\t\t\t\t} );\n\n\t\t\t\tvar form_item_rate_text = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\t\tform_item_rate_text.TText( { field: 'rate' } );\n\t\t\t\tform_item_rate_text.setValue( Global.removeTrailingZeros( data.rate ) );\n\n\t\t\t\t// Hrs/Units\n\t\t\t\tvar form_item_units_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\t\tform_item_units_input.TTextInput( { field: 'units', width: 60, hasKeyEvent: true } );\n\t\t\t\tform_item_units_input.setValue( Global.removeTrailingZeros( data.units ) );\n\t\t\t\tform_item_units_input.attr( 'editable', true );\n\t\t\t\tform_item_units_input.unbind( 'formItemKeyUp' ).bind( 'formItemKeyUp', function( e, target ) {\n\t\t\t\t\t$this.onFormItemKeyUp( target );\n\t\t\t\t} );\n\n\t\t\t\tform_item_units_input.unbind( 'formItemKeyDown' ).bind( 'formItemKeyDown', function( e, target ) {\n\t\t\t\t\t$this.onFormItemKeyDown( target );\n\t\t\t\t} );\n\t\t\t\tform_item_units_input.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t$this.onFormItemChange( target );\n\t\t\t\t} );\n\n\t\t\t\tvar form_item_units_text = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\t\tform_item_units_text.TText( { field: 'units' } );\n\t\t\t\tform_item_units_text.setValue( Global.removeTrailingZeros( data.units ) );\n\n\t\t\t\t// Amount\n\t\t\t\tvar form_item_amount_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\t\tform_item_amount_input.TTextInput( { field: 'amount', width: 60 } );\n\t\t\t\tform_item_amount_input.setValue( Global.removeTrailingZeros( data.amount ) );\n\n\t\t\t\tform_item_amount_input.unbind( 'formItemKeyUp' ).bind( 'formItemKeyUp', function( e, target ) {\n\t\t\t\t\t$this.onFormItemKeyUp( target );\n\t\t\t\t} );\n\n\t\t\t\tform_item_amount_input.unbind( 'formItemKeyDown' ).bind( 'formItemKeyDown', function( e, target ) {\n\t\t\t\t\t$this.onFormItemKeyDown( target );\n\t\t\t\t} );\n\n\t\t\t\tform_item_amount_input.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t$this.onFormItemChange( target );\n\t\t\t\t} );\n\n\t\t\t\tvar form_item_amount_text = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\t\tform_item_amount_text.TText( { field: 'amount' } );\n\t\t\t\tform_item_amount_text.setValue( Global.removeTrailingZeros( data.amount ) );\n\n\t\t\t\t// YTD Amount\n\t\t\t\tvar form_item_ytd_amount_text = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\t\tform_item_ytd_amount_text.TText( { field: 'ytd_amount' } );\n\t\t\t\tform_item_ytd_amount_text.setValue( Global.removeTrailingZeros( data.ytd_amount ) );\n\t\t\t\tform_item_ytd_amount_text.attr( {\n\t\t\t\t\t'pay_stub_entry_id': ( data.id && $this.parent_controller.current_edit_record.id ) ? data.id : '',\n\t\t\t\t\t'type_id': data['type_id'],\n\t\t\t\t\t'original_amount': data['amount'] ? data['amount'] : '0.00',\n\t\t\t\t\t'original_ytd_amount': data['ytd_amount'] ? data['ytd_amount'] : '0.00',\n\t\t\t\t\t'pay_stub_entry_name_id': data['pay_stub_entry_name_id'] ? data['pay_stub_entry_name_id'] : null\n\t\t\t\t} );\n\n//\t\t\t\tif ( !$this.parent_controller.copied_record_id ) {\n\t\t\t\tform_item_ytd_amount_text.attr( 'pay_stub_amendment_id', pay_stub_amendment_id );\n\t\t\t\tform_item_ytd_amount_text.attr( 'user_expense_id', user_expense_id );\n//\t\t\t\t}\n\n\t\t\t\tif ( parseFloat( data['ytd_amount'] ) != 0 ) {\n\n\t\t\t\t} else if ( pay_stub_status_id == 40 || pay_stub_status_id == 100 || data.total_row === true ) {\n\t\t\t\t\tform_item_ytd_amount_text.text( '-' );\n\t\t\t\t}\n\n\t\t\t\tif ( data.rate && parseFloat( data.rate ) != 0 && !$this.parent_controller.copied_record_id ) {\n\t\t\t\t\tform_item_amount_input.setReadOnly( true );\n\t\t\t\t} else if ( pay_stub_status_id == 40 || pay_stub_status_id == 100 || data.total_row === true ) {\n\t\t\t\t\tform_item_rate_text.text( '-' );\n\t\t\t\t}\n\n\t\t\t\tif ( data.units && parseFloat( data.units ) != 0 && !$this.parent_controller.copied_record_id ) {\n\t\t\t\t\tform_item_amount_input.setReadOnly( true );\n\t\t\t\t} else if ( pay_stub_status_id == 40 || pay_stub_status_id == 100 || data.total_row === true ) {\n\t\t\t\t\tform_item_units_text.text( '-' );\n\t\t\t\t}\n\n\t\t\t\t// name\n\t\t\t\tif ( type == 40 || data.total_row === true ) {\n\t\t\t\t\tif ( data['type_id'] == 40 || data.total_row === true ) {\n\t\t\t\t\t\tform_item_name_text.css( 'font-weight', 'bold' );\n\t\t\t\t\t}\n\t\t\t\t\twidgets[form_item_name_text.getField()] = form_item_name_text;\n\t\t\t\t\twidgetContainer.append( form_item_name_text );\n\t\t\t\t\twidgetContainer.append( right_label );\n\t\t\t\t\trow.children().eq( 0 ).append( widgetContainer );\n\n\t\t\t\t} else {\n\t\t\t\t\tif ( $this.parent_controller.isEditMode() == true || index ) {\n\n\t\t\t\t\t\tif ( data['type_id'] == 40 || data.total_row === true ) {\n\t\t\t\t\t\t\tform_item_name_text.css( 'font-weight', 'bold' );\n\t\t\t\t\t\t\twidgets[form_item_name_text.getField()] = form_item_name_text;\n\t\t\t\t\t\t\twidgetContainer.append( form_item_name_text );\n\t\t\t\t\t\t\twidgetContainer.append( right_label );\n\t\t\t\t\t\t\trow.children().eq( 0 ).append( widgetContainer );\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\targs['filter_data']['type_id'] = [type];\n\t\t\t\t\t\t\tform_item_name_input.setDefaultArgs( args );\n\t\t\t\t\t\t\twidgets[form_item_name_input.getField()] = form_item_name_input;\n\t\t\t\t\t\t\twidgetContainer.append( form_item_name_input );\n\t\t\t\t\t\t\twidgetContainer.append( right_label );\n\t\t\t\t\t\t\trow.children().eq( 0 ).append( widgetContainer );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( data['type_id'] == 40 || data.total_row === true ) {\n\t\t\t\t\t\t\tform_item_name_text.css( 'font-weight', 'bold' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\twidgets[form_item_name_text.getField()] = form_item_name_text;\n\t\t\t\t\t\twidgetContainer.append( form_item_name_text );\n\t\t\t\t\t\twidgetContainer.append( right_label );\n\t\t\t\t\t\trow.children().eq( 0 ).append( widgetContainer );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Note\n\t\t\t\tif ( ( data['type_id'] == type.toString() || data['type_id'] === type ) && type != 40 && !data.total_row ) {\n\t\t\t\t\tif ( $this.parent_controller.isEditMode() == true ) {\n\t\t\t\t\t\tif ( ( ( TTUUID.isUUID( pay_stub_amendment_id ) && pay_stub_amendment_id != TTUUID.zero_id ) || ( TTUUID.isUUID( user_expense_id ) && user_expense_id != TTUUID.zero_id ) ) ) {\n\t\t\t\t\t\t\tform_item_note_input.setReadOnly( true );\n\t\t\t\t\t\t}\n\t\t\t\t\t\twidgets[form_item_note_input.getField()] = form_item_note_input;\n\t\t\t\t\t\trow.children().eq( 1 ).append( form_item_note_input );\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\twidgets[form_item_note_text.getField()] = form_item_note_text;\n\t\t\t\t\t\trow.children().eq( 1 ).append( form_item_note_text );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( Global.isSet( index ) || is_add || ( _.size( data ) === 1 && ( $this.parent_controller.isEditMode() == true ) ) ) {\n\t\t\t\t\t\tif ( ( data['type_id'] == 40 || data.total_row === true ) ) {\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twidgets[form_item_note_input.getField()] = form_item_note_input;\n\t\t\t\t\t\t\trow.children().eq( 1 ).append( form_item_note_input );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( type == 20 || type == 30 || type == 50 || type == 80 ) {\n\t\t\t\t\t\twidgets[form_item_note_text.getField()] = form_item_note_text;\n\t\t\t\t\t\trow.children().eq( 1 ).append( form_item_note_text );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// amount\n\t\t\t\tif ( ( data['type_id'] === type.toString() || data['type_id'] === type ) && type != 40 && !data.total_row ) {\n\t\t\t\t\tif ( $this.parent_controller.isEditMode() == true ) {\n\t\t\t\t\t\tif ( ( TTUUID.isUUID( pay_stub_amendment_id ) && pay_stub_amendment_id != TTUUID.zero_id ) || ( TTUUID.isUUID( user_expense_id ) && user_expense_id != TTUUID.zero_id ) ) {\n\t\t\t\t\t\t\tform_item_amount_input.setReadOnly( true );\n\t\t\t\t\t\t}\n\t\t\t\t\t\twidgets[form_item_amount_input.getField()] = form_item_amount_input;\n\t\t\t\t\t\tif ( type == 10 ) {\n\t\t\t\t\t\t\trow.children().eq( 4 ).append( form_item_amount_input );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trow.children().eq( 2 ).append( form_item_amount_input );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\twidgets[form_item_amount_text.getField()] = form_item_amount_text;\n\t\t\t\t\t\tif ( type == 10 ) {\n\t\t\t\t\t\t\trow.children().eq( 4 ).append( form_item_amount_text );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trow.children().eq( 2 ).append( form_item_amount_text );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( ( Global.isSet( index ) || is_add || ( _.size( data ) === 1 && ( $this.parent_controller.isEditMode() == true ) ) ) && type != 40 && !data.total_row ) {\n\n\t\t\t\t\t\tif ( data['type_id'] == 40 ) {\n\t\t\t\t\t\t\tform_item_amount_text.css( 'font-weight', 'bold' );\n\t\t\t\t\t\t\twidgets[form_item_amount_text.getField()] = form_item_amount_text;\n\t\t\t\t\t\t\tif ( type == 10 ) {\n\t\t\t\t\t\t\t\trow.children().eq( 4 ).append( form_item_amount_text );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\trow.children().eq( 2 ).append( form_item_amount_text );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twidgets[form_item_amount_input.getField()] = form_item_amount_input;\n\t\t\t\t\t\t\tif ( type == 10 ) {\n\t\t\t\t\t\t\t\trow.children().eq( 4 ).append( form_item_amount_input );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\trow.children().eq( 2 ).append( form_item_amount_input );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( ( data['type_id'] == 40 || data.total_row ) && type == 30 ) {\n\t\t\t\t\t\t\tform_item_amount_text.css( 'font-weight', 'bold' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tform_item_amount_text.css( 'font-weight', 'bold' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\twidgets[form_item_amount_text.getField()] = form_item_amount_text;\n\t\t\t\t\t\tif ( type == 10 ) {\n\t\t\t\t\t\t\trow.children().eq( 4 ).append( form_item_amount_text );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trow.children().eq( 2 ).append( form_item_amount_text );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Ytd amount\n\t\t\t\tif ( data['type_id'] == 40 || data.total_row ) {\n\t\t\t\t\tform_item_ytd_amount_text.css( 'font-weight', 'bold' );\n\t\t\t\t}\n\t\t\t\tif ( ( Global.isSet( index ) || is_add || _.size( data ) === 1 ) && type != 40 ) {\n\t\t\t\t\tform_item_ytd_amount_text.text( '-' );\n\t\t\t\t}\n\t\t\t\twidgets[form_item_ytd_amount_text.getField()] = form_item_ytd_amount_text;\n\t\t\t\tif ( type == 10 ) {\n\t\t\t\t\trow.children().eq( 5 ).append( form_item_ytd_amount_text );\n\t\t\t\t} else {\n\t\t\t\t\trow.children().eq( 3 ).append( form_item_ytd_amount_text );\n\t\t\t\t}\n\n\t\t\t\tif ( type == 10 ) { // && !data.total_row ) {\n\n\t\t\t\t\t// rate\n\t\t\t\t\tif ( data['type_id'] == 10 && !data.total_row ) {\n\t\t\t\t\t\tif ( $this.parent_controller.isEditMode() == true ) {\n\t\t\t\t\t\t\tif ( ( TTUUID.isUUID( pay_stub_amendment_id ) && pay_stub_amendment_id != TTUUID.zero_id ) || ( TTUUID.isUUID( user_expense_id ) && user_expense_id != TTUUID.zero_id ) ) {\n\t\t\t\t\t\t\t\tform_item_rate_input.setReadOnly( true );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twidgets[form_item_rate_input.getField()] = form_item_rate_input;\n\t\t\t\t\t\t\trow.children().eq( 2 ).append( form_item_rate_input );\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twidgets[form_item_rate_text.getField()] = form_item_rate_text;\n\t\t\t\t\t\t\trow.children().eq( 2 ).append( form_item_rate_text );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( Global.isSet( index ) || is_add ) {\n\t\t\t\t\t\t\tif ( data['type_id'] == 40 || data.total_row ) {\n\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twidgets[form_item_rate_input.getField()] = form_item_rate_input;\n\t\t\t\t\t\t\t\trow.children().eq( 2 ).append( form_item_rate_input );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// units\n\t\t\t\t\tif ( data['type_id'] == 10 && !data.total_row ) {\n\t\t\t\t\t\tif ( $this.parent_controller.isEditMode() == true ) {\n\t\t\t\t\t\t\tif ( ( TTUUID.isUUID( pay_stub_amendment_id ) && pay_stub_amendment_id != TTUUID.zero_id ) || ( TTUUID.isUUID( user_expense_id ) && user_expense_id != TTUUID.zero_id ) ) {\n\t\t\t\t\t\t\t\tform_item_units_input.setReadOnly( true );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twidgets[form_item_units_input.getField()] = form_item_units_input;\n\t\t\t\t\t\t\trow.children().eq( 3 ).append( form_item_units_input );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twidgets[form_item_units_text.getField()] = form_item_units_text;\n\t\t\t\t\t\t\trow.children().eq( 3 ).append( form_item_units_text );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( Global.isSet( index ) || is_add ) {\n\n\t\t\t\t\t\t\tif ( data['type_id'] == 40 || data.total_row ) {\n\t\t\t\t\t\t\t\tform_item_units_text.css( 'font-weight', 'bold' );\n\t\t\t\t\t\t\t\twidgets[form_item_units_text.getField()] = form_item_units_text;\n\t\t\t\t\t\t\t\trow.children().eq( 3 ).append( form_item_units_text );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twidgets[form_item_units_input.getField()] = form_item_units_input;\n\t\t\t\t\t\t\t\trow.children().eq( 3 ).append( form_item_units_input );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tform_item_units_text.css( 'font-weight', 'bold' );\n\t\t\t\t\t\t\twidgets[form_item_units_text.getField()] = form_item_units_text;\n\t\t\t\t\t\t\trow.children().eq( 3 ).append( form_item_units_text );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//Build row widgets\n\t\t\t\tif ( ( TTUUID.isUUID( pay_stub_amendment_id ) && pay_stub_amendment_id != TTUUID.zero_id ) || ( TTUUID.isUUID( user_expense_id ) && user_expense_id != TTUUID.zero_id ) ) {\n\t\t\t\t\trow.children().last().find( '.minus-icon ' ).hide();\n\t\t\t\t}\n\n\t\t\t\tif ( data['total_row'] == true ) {\n\t\t\t\t\twidgets['total_row'] = true;\n\t\t\t\t}\n\n\t\t\t\tif ( typeof data['type_id'] != 'undefined' ) {\n\t\t\t\t\twidgets['type_id'] = data['type_id'];\n\t\t\t\t}\n\n\t\t\t\tif ( data['pay_stub_entry_account_id'] == $this.parent_controller.pseal_link.net_pay_entry_account_id ) {\n\t\t\t\t\twidgets['pay_stub_entry_account_id'] = $this.parent_controller.pseal_link.net_pay_entry_account_id;\n\t\t\t\t}\n\n\t\t\t\tif ( typeof index !== 'undefined' ) {\n\t\t\t\t\trow.insertAfter( $( render ).find( 'tr' ).eq( index ) );\n\t\t\t\t\t$this.rows_widgets_array.splice( ( index + 1 ), 0, widgets );\n\n\t\t\t\t} else {\n\t\t\t\t\t$( render ).append( row );\n\t\t\t\t\t$this.rows_widgets_array.push( widgets );\n\t\t\t\t}\n\n\t\t\t\tif ( $this.parent_controller.isEditMode() == true ) {\n\t\t\t\t\t$this.addIconsEvent( row ); //Bind event to add and minus icon\n\t\t\t\t} else {\n\t\t\t\t\trow.children().last().empty();\n\t\t\t\t}\n\n\t\t\t\tif ( data.total_row || data.type_id == 40 ) {\n\t\t\t\t\trow.find( '.plus-icon' ).remove();\n\t\t\t\t\trow.find( '.minus-icon' ).remove();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( data['type_id'] == 10 ) {\n\t\t\t\trenderColumns( data, 10, index );\n\t\t\t} else if ( data['type_id'] == 20 ) {\n\t\t\t\trenderColumns( data, 20, index );\n\t\t\t} else if ( data['type_id'] == 30 ) {\n\t\t\t\trenderColumns( data, 30, index );\n\t\t\t} else if ( data['type_id'] == 40 ) {\n\t\t\t\trenderColumns( data, 40, index );\n\t\t\t} else if ( data['type_id'] == 50 ) {\n\t\t\t\trenderColumns( data, 50, index );\n\t\t\t} else if ( data['type_id'] == 80 ) {\n\t\t\t\trenderColumns( data, 80, index );\n\t\t\t}\n\n\t\t}\n\t}\n\n\tinsideEntryEditorRemoveRow( row ) {\n\t\tvar index = row[0].rowIndex;\n\t\tif ( this.rows_widgets_array[index].ytd_amount ) {\n\t\t\tvar remove_id = this.rows_widgets_array[index].ytd_amount.attr( 'pay_stub_entry_id' );\n\t\t\tvar type_id = this.rows_widgets_array[index].ytd_amount.attr( 'type_id' );\n\t\t\tif ( TTUUID.isUUID( remove_id ) ) {\n\t\t\t\tthis.delete_ids.push( remove_id );\n\t\t\t}\n\t\t\trow.remove();\n\t\t\tif ( this.rows_widgets_array[index - 1] === true && ( this.rows_widgets_array[index + 1]['total_row'] === true || this.rows_widgets_array[index + 1] === true ) ) {\n\t\t\t\tthis.addRow( { id: '', type_id: type_id }, index - 1 );\n\t\t\t\tthis.rows_widgets_array.splice( index + 1, 1 ); //Remove from the array used in calcTotal()\n\t\t\t} else {\n\t\t\t\tthis.rows_widgets_array.splice( index, 1 ); //Remove from the array used in calcTotal()\n\t\t\t}\n\n\t\t}\n\t\tthis.calcTotal();\n\t}\n\n\tsavePayStub( record, callbackFunction ) {\n\t\t// when the user create a new pay stub record have them can send entries to api.\n\t\tif ( this.include_pay_stub_accounts ) {\n\t\t\tvar entries = this.saveInsideEntryEditorData();\n\t\t\tvar transactions = this.saveInsideTransactionEditorData();\n\t\t\tif ( entries.length > 0 ) {\n\t\t\t\trecord['entries'] = entries;\n\t\t\t}\n\t\t\tif ( transactions.length > 0 ) {\n\t\t\t\trecord['transactions'] = transactions;\n\t\t\t}\n\t\t}\n\t\tcallbackFunction();\n\t}\n\n\tonSaveClick( ignoreWarning ) {\n\t\tif ( this.is_mass_editing ) {\n\t\t\tthis.include_pay_stub_accounts = false;\n\t\t}\n\t\tsuper.onSaveClick( ignoreWarning );\n\t}\n\n\tdoSaveAPICall( record, ignoreWarning, callback ) {\n\t\tthis.savePayStub( record, () => {\n\t\t\tsuper.doSaveAPICall( record, true, callback );\n\t\t} );\n\t}\n\n\tonSaveDone( result ) {\n\t\tthis.current_edit_record = null;\n\t\treturn true;\n\t}\n\n\tsaveInsideTransactionEditorData( callBack ) {\n\t\t//called by validation function\n\t\tvar $this = this;\n\t\tvar data = this.editor.insideTransactionEditorGetValue( $this.current_edit_record.id ? $this.current_edit_record.id : '' );\n\n\t\tif ( this.editor.delete_transaction_ids.length > 0 ) {\n\t\t\tfor ( var i = 0; i < this.editor.delete_transaction_ids.length; i++ ) {\n\t\t\t\tfor ( var n = 0; n < data.length; n++ ) {\n\t\t\t\t\tif ( this.editor.delete_transaction_ids[i] == data[n].id ) {\n\t\t\t\t\t\tdata[n].deleted = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn data;\n\t}\n\n\tonCopyAsNewClick() {\n\t\tvar $this = this;\n\t\tvar reload_entries = false;\n\t\tthis.setCurrentEditViewState( 'new' );\n\t\tLocalCacheData.current_doing_context_action = 'copy_as_new';\n\t\tif ( Global.isSet( this.edit_view ) ) {\n//\t\t\tfor ( var i = 0; i < this.editor.rows_widgets_array.length; i++ ) {\n//\t\t\t\tif ( this.editor.rows_widgets_array[i] === true ) {\n//\t\t\t\t\tcontinue;\n//\t\t\t\t}\n//\t\t\t\tthis.editor.rows_widgets_array[i].ytd_amount.attr( 'pay_stub_entry_id', '' );\n//\t\t\t\tthis.editor.rows_widgets_array[i].ytd_amount.removeAttr( 'pay_stub_amendment_id' );\n//\t\t\t\tthis.editor.rows_widgets_array[i].ytd_amount.removeAttr( 'user_expense_id' );\n//\t\t\t}\n\t\t\tthis.copied_record_id = this.current_edit_record.id;\n\t\t\tthis.current_edit_record.id = '';\n\n\t\t\tthis.edit_view_ui_dic.user_id.setEnabled( true );\n\t\t\tif ( this.current_edit_record.status_id != 25 ) {\n\t\t\t\tthis.current_edit_record.status_id = 25;\n\t\t\t\tthis.edit_view_ui_dic.status_id.setValue( 25 );\n//\t\t\t\tthis.editor.show_cover = false;\n//\t\t\t\tthis.include_pay_stub_accounts = true;\n//\t\t\t\treload_entries = true;\n\t\t\t}\n\t\t\tthis.editor.show_cover = false;\n//\t\t\tthis.editor.removeCover();\n\n\t\t\tvar navigation_div = this.edit_view.find( '.navigation-div' );\n\t\t\tnavigation_div.css( 'display', 'none' );\n\t\t\tthis.setEditMenu();\n\t\t\tthis.setTabStatus();\n\t\t\tthis.is_changed = false;\n\t\t\t// reset the entries data.\n//\t\t\tif ( reload_entries ) {\n\t\t\tthis.editor.removeAllRows( true );\n\t\t\tthis.initInsideEntryEditorData();\n//\t\t\t}\n\n\t\t\tProgressBar.closeOverlay();\n\n\t\t} else {\n\n\t\t\tvar filter = {};\n\t\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\t\tvar selectedId;\n\n\t\t\tif ( grid_selected_length > 0 ) {\n\t\t\t\tselectedId = grid_selected_id_array[0];\n\n\t\t\t\tfilter.filter_data = {};\n\t\t\t\tfilter.filter_data.id = [selectedId];\n\n\t\t\t\tthis.api['get' + this.api.key_name]( filter, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t$this.onCopyAsNewResult( result );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tTAlertManager.showAlert( $.i18n._( 'No selected record' ) );\n\t\t\t}\n\n\t\t}\n\t}\n\n\tinitEditView() {\n\t\tthis.original_status_id = this.current_edit_record.status_id;\n\t\tsuper.initEditView();\n\t}\n\n\tonSubViewRemoved() {\n\t\tthis.search();\n\n\t\tif ( !this.edit_view ) {\n\t\t\tthis.setDefaultMenu();\n\t\t} else {\n\t\t\tthis.setEditMenu();\n\t\t}\n\t}\n\n\tonCopyAsNewResult( result ) {\n\t\tvar $this = this;\n\t\tvar result_data = result.getResult();\n\n\t\tif ( !result_data ) {\n\t\t\tTAlertManager.showAlert( $.i18n._( 'Record does not exist' ) );\n\t\t\t$this.onCancelClick();\n\t\t\treturn;\n\t\t}\n\n\t\t$this.openEditView(); // Put it here is to avoid if the selected one is not existed in data or have deleted by other pragram. in this case, the edit view should not be opend.\n\n\t\tresult_data = result_data[0];\n\t\tthis.copied_record_id = result_data.id;\n\t\tresult_data.id = '';\n\t\tif ( $this.sub_view_mode && $this.parent_key ) {\n\t\t\tresult_data[$this.parent_key] = $this.parent_value;\n\t\t}\n\t\tif ( result_data.status_id != 25 ) {\n\t\t\tresult_data.status_id = 25; // If its status is not open then set it to open status.\n\t\t}\n\n\t\t$this.current_edit_record = result_data;\n\t\t$this.editor.show_cover = false;\n\t\t$this.initEditView();\n\t}\n\n\tonSaveAndContinue( ignoreWarning ) {\n\t\tvar $this = this;\n\t\tif ( !Global.isSet( ignoreWarning ) ) {\n\t\t\tignoreWarning = false;\n\t\t}\n\t\tthis.is_changed = false;\n\t\tthis.is_add = false;\n\t\tLocalCacheData.current_doing_context_action = 'save_and_continue';\n\t\tvar record = this.current_edit_record;\n\t\tthis.original_status_id = record.status_id;\n\n\t\trecord = this.uniformVariable( record );\n\n\t\tthis.savePayStub( record, function() {\n\t\t\t$this.api['set' + $this.api.key_name]( record, false, ignoreWarning, {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t$this.onSaveAndContinueResult( result );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\tonCancelClick() {\n\t\tTTPromise.reject( 'PayStubViewController', 'insideEditorDataLoaded' );\n\t\tsuper.onCancelClick();\n\t}\n\n\topenEditView() {\n\t\tif ( this.editor ) {\n\t\t\tthis.editor.transaction_data = false;\n\t\t}\n\t\tTTPromise.reject( 'PayStubViewController', 'insideEditorDataLoaded' );\n\t\tsuper.openEditView();\n\t}\n\n\tonMassEditClick() {\n\t\tvar $this = this;\n\t\t$this.is_add = false;\n\t\t$this.is_viewing = false;\n\t\t$this.is_mass_editing = true;\n\t\tLocalCacheData.current_doing_context_action = 'mass_edit';\n\t\t$this.openEditView();\n\t\tvar filter = {};\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\tthis.mass_edit_record_ids = [];\n\n\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t$this.mass_edit_record_ids.push( value );\n\t\t} );\n\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.mass_edit_record_ids;\n\n\t\tthis.api['getCommon' + this.api.key_name + 'Data']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\tif ( !result_data ) {\n\t\t\t\t\tresult_data = [];\n\t\t\t\t}\n\n\t\t\t\t$this.api['getOptions']( 'unique_columns', {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t$this.unique_columns = result.getResult();\n\t\t\t\t\t\t$this.api['getOptions']( 'linked_columns', {\n\t\t\t\t\t\t\tonResult: function( result1 ) {\n\t\t\t\t\t\t\t\t$this.linked_columns = result1.getResult();\n\t\t\t\t\t\t\t\tif ( $this.sub_view_mode && $this.parent_key ) {\n\t\t\t\t\t\t\t\t\tresult_data[$this.parent_key] = $this.parent_value;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t$this.current_edit_record = result_data;\n\t\t\t\t\t\t\t\t$this.initEditView();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSaveAndContinueResult( result ) {\n\t\tvar $this = this;\n\t\tif ( result && result.isValid() ) {\n\t\t\tvar result_data = result.getResult();\n\t\t\tif ( result_data === true ) {\n\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\n\t\t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t$this.refresh_id = result_data;\n\t\t\t}\n\t\t\t$this.search( false );\n\t\t\t$this.editor.show_cover = false;\n\t\t\t$this.onEditClick( $this.refresh_id, true );\n\n\t\t\t$this.onSaveAndContinueDone( result );\n\t\t} else {\n\t\t\t$this.setErrorTips( result );\n\t\t\t$this.setErrorMenu();\n\t\t}\n\t}\n\n\t// onSaveAndNextResult( result ) {\n\t// \tvar $this = this;\n\t// \tif ( result.isValid() ) {\n\t// \t\tvar result_data = result.getResult();\n\t// \t\tif ( result_data === true ) {\n\t// \t\t\t$this.refresh_id = $this.current_edit_record.id;\n\t// \t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t// \t\t\t$this.refresh_id = result_data;\n\t// \t\t}\n\t// \t\t$this.editor.show_cover = true;\n\t// \t\t$this.onRightArrowClick();\n\t// \t\t$this.search( false );\n\t// \t\t$this.onSaveAndNextDone( result );\n\t//\n\t// \t} else {\n\t// \t\t$this.setErrorTips( result );\n\t// \t\t$this.setErrorMenu();\n\t// \t}\n\t// },\n\n\tsaveInsideEntryEditorData( callBack ) {\n\t\t//called by validation function\n\t\tvar $this = this;\n\t\tvar data = this.editor.getValue( $this.current_edit_record.id ? $this.current_edit_record.id : '' );\n\n\t\tif ( this.editor.delete_ids.length > 0 ) {\n\t\t\tfor ( var i = 0; i < this.editor.delete_ids.length; i++ ) {\n\t\t\t\tfor ( var n = 0; n < data.length; n++ ) {\n\t\t\t\t\tif ( this.editor.delete_ids[i] == data[n].id ) {\n\t\t\t\t\t\tdata[n].deleted = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif ( callBack && typeof callBack == 'function' ) {\n\t\t\tcallBack();\n\t\t}\n\t\treturn data;\n\t}\n\n\tinsideEntryEditorGetValue( current_edit_item_id ) {\n\t\tvar len = this.rows_widgets_array.length;\n\t\tvar result = [];\n\n\t\tif ( this.cover && this.cover.length > 0 ) {\n\t\t\treturn result;\n\t\t}\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar row = this.rows_widgets_array[i];\n\t\t\tvar data = {};\n\n\t\t\tif ( row === true || _.isArray( row ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n//\t\t\tvar pay_stub_amendment_id = row['ytd_amount'].attr( 'pay_stub_amendment_id' );\n//\t\t\tvar user_expense_id = row['ytd_amount'].attr( 'user_expense_id' );\n//\n//\t\t\tif (  pay_stub_amendment_id > 0 || user_expense_id > 0  ) {\n//\t\t\t\tcontinue;\n//\t\t\t}\n\n\t\t\tdata['id'] = row['ytd_amount'].attr( 'pay_stub_entry_id' );\n\n\t\t\tif ( row['ytd_amount'].attr( 'type_id' ) ) {\n\t\t\t\tdata['type'] = row['ytd_amount'].attr( 'type_id' );\n\t\t\t}\n\n\t\t\tdata['rate'] = row['rate'] ? row['rate'].getValue() : '';\n\t\t\tdata['units'] = row['units'] ? row['units'].getValue() : '';\n\t\t\tdata['amount'] = row['amount'] ? row['amount'].getValue() : '';\n\n\t\t\tif ( Global.isSet( row['ytd_amount'] ) ) {\n\t\t\t\tdata['ytd_amount'] = row['ytd_amount'].getValue();\n\t\t\t}\n\n\t\t\tdata['description'] = row['description'] ? row['description'].getValue() : '';\n\n\t\t\tif ( Global.isSet( row['pay_stub_entry_name_id'] ) ) {\n\t\t\t\tdata['pay_stub_entry_name_id'] = row['pay_stub_entry_name_id'].getValue();\n\t\t\t} else {\n\t\t\t\tdata['pay_stub_entry_name_id'] = row['ytd_amount'].attr( 'pay_stub_entry_name_id' );\n\t\t\t}\n\n\t\t\t// return back to the server with the same data get from API.\n\t\t\tdata['pay_stub_amendment_id'] = row['ytd_amount'].attr( 'pay_stub_amendment_id' );\n\t\t\tdata['user_expense_id'] = row['ytd_amount'].attr( 'user_expense_id' );\n\n\t\t\tdata['pay_stub_id'] = current_edit_item_id;\n\t\t\tif ( row['total_row'] != true && TTUUID.isUUID( data['pay_stub_entry_name_id'] )\n\t\t\t\t&& ( data['pay_stub_entry_name_id'] != TTUUID.zero_id\n\t\t\t\t\t|| ( data['description'] != undefined && data['description'].length > 0 )\n\t\t\t\t\t|| ( data['rate'] != undefined && data['rate'].length > 0 && parseFloat( data['rate'] ) != 0 )\n\t\t\t\t\t|| ( data['units'] != undefined && data['units'].length > 0 && parseFloat( data['units'] ) != 0 )\n\t\t\t\t\t|| ( data['amount'] != undefined && data['amount'].length > 0 && parseFloat( data['amount'] ) != 0 )\n\t\t\t\t) ) {\n\t\t\t\tresult.push( data );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\n\t\tvar column_filter = {};\n\t\tcolumn_filter.is_owner = true;\n\t\tcolumn_filter.id = true;\n\t\tcolumn_filter.user_id = true;\n\t\tcolumn_filter.is_child = true;\n\t\tcolumn_filter.in_use = true;\n\t\tcolumn_filter.first_name = true;\n\t\tcolumn_filter.last_name = true;\n\t\tcolumn_filter.start_date = true;\n\t\tcolumn_filter.end_date = true;\n\t\tcolumn_filter.pay_period_id = true;\n\n\t\t// Error: Unable to get property 'getGridParam' of undefined or null reference\n\t\tvar display_columns = [];\n\t\tif ( this.grid ) {\n\t\t\tdisplay_columns = this.grid.getGridParam( 'colModel' );\n\t\t}\n\n\t\tif ( display_columns ) {\n\t\t\tvar len = display_columns.length;\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar column_info = display_columns[i];\n\t\t\t\tcolumn_filter[column_info.name] = true;\n\t\t\t}\n\t\t}\n\n\t\treturn column_filter;\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tvar $this = this;\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\n\t\tthis.current_edit_record[key] = c_value;\n\t\tswitch ( key ) {\n//\t\t\tcase 'status_id':\n//\t\t\t\tif ( c_value == 40 || c_value == 100 ) {\n//\t\t\t\t\tthis.include_pay_stub_accounts = false;\n//\t\t\t\t}\n//\t\t\t\tbreak;\n\t\t\tcase 'user_id':\n\t\t\t\tif ( this.is_add ) {\n\t\t\t\t\tvar transaction_rows = $this.editor.rows_widgets_array[$this.editor.rows_widgets_array.length - 2];\n\t\t\t\t\tvar user_id = $this.edit_view_ui_dic.user_id.getValue();\n\t\t\t\t\tfor ( var t in transaction_rows ) {\n\t\t\t\t\t\tif ( Global.isArray( transaction_rows ) && transaction_rows[t].remittance_destination_account_id ) {\n\t\t\t\t\t\t\ttransaction_rows[t].remittance_destination_account_id.setDefaultArgs( { filter_data: { user_id: user_id } } );\n\t\t\t\t\t\t\ttransaction_rows[t].remittance_destination_account_id.setValue( TTUUID.zero_id );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'country':\n\t\t\t\tvar widget = this.edit_view_ui_dic['province'];\n\t\t\t\twidget.setValue( null );\n\t\t\t\tbreak;\n\t\t\tcase 'pay_period_id':\n\t\t\t\tvar filter = {};\n\t\t\t\tfilter.filter_data = {};\n\t\t\t\tfilter.filter_data.id = c_value;\n\t\t\t\tthis.pay_period_api['get' + this.pay_period_api.key_name]( filter, {\n\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\t//Error: Uncaught TypeError: Cannot read property 'start_date' of undefined in interface/html5/#!m=PayStub&a=new&tab=PayStub line 1836\n\t\t\t\t\t\tif ( res && res.isValid() && res.getResult()[0] ) {\n\t\t\t\t\t\t\tvar result = res.getResult()[0];\n\t\t\t\t\t\t\tvar start_date = Global.strToDate( result.start_date ).format();\n\t\t\t\t\t\t\tvar end_date = Global.strToDate( result.end_date ).format();\n\t\t\t\t\t\t\tvar transaction_date = Global.strToDate( result.transaction_date ).format();\n\n\t\t\t\t\t\t\t$this.current_edit_record['start_date'] = start_date;\n\t\t\t\t\t\t\t$this.current_edit_record['end_date'] = end_date;\n\t\t\t\t\t\t\t$this.current_edit_record['transaction_date'] = transaction_date;\n\n\t\t\t\t\t\t\t$this.edit_view_ui_dic['start_date'].setValue( start_date );\n\t\t\t\t\t\t\t$this.edit_view_ui_dic['end_date'].setValue( end_date );\n\t\t\t\t\t\t\t$this.edit_view_ui_dic['transaction_date'].setValue( transaction_date );\n\n\t\t\t\t\t\t\tif ( !doNotValidate ) {\n\t\t\t\t\t\t\t\t$this.validate();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif ( !doNotValidate ) {\n\t\t\t\t\t$this.validate();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( key === 'country' || key === 'pay_period_id' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\n\t\t}\n\t}\n\n\tonSetSearchFilterFinished() {\n\n\t\tif ( this.search_panel.getSelectTabIndex() === 1 ) {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar select_value = combo.getValue();\n\t\t\tthis.setProvince( select_value );\n\t\t}\n\t}\n\n\tonBuildAdvUIFinished() {\n\n\t\tthis.adv_search_field_ui_dic['country'].change( $.proxy( function() {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar selectVal = combo.getValue();\n\n\t\t\tthis.setProvince( selectVal );\n\n\t\t\tthis.adv_search_field_ui_dic['province'].setValue( null );\n\n\t\t}, this ) );\n\t}\n\n\tsetProvince( val, m ) {\n\t\tvar $this = this;\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.province_array = [];\n\t\t\tthis.adv_search_field_ui_dic['province'].setSourceData( [] );\n\t\t} else {\n\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.province_array = Global.buildRecordArray( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\teSetProvince( val, refresh ) {\n\t\tvar $this = this;\n\t\tvar province_widget = $this.edit_view_ui_dic['province'];\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\tprovince_widget.setSourceData( [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\t\t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.current_edit_record.province = $this.e_province_array[0].value;\n\t\t\t\t\t\tprovince_widget.setValue( $this.current_edit_record.province );\n\t\t\t\t\t}\n\t\t\t\t\tprovince_widget.setSourceData( $this.e_province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tvalidate() {\n\t\tvar $this = this;\n\n\t\tvar record = {};\n\t\tvar transaction_record = {};\n\n\t\tif ( this.is_mass_editing ) {\n\t\t\tfor ( var key in this.edit_view_ui_dic ) {\n\n\t\t\t\tif ( !this.edit_view_ui_dic.hasOwnProperty( key ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar widget = this.edit_view_ui_dic[key];\n\n\t\t\t\tif ( Global.isSet( widget.isChecked ) ) {\n\t\t\t\t\tif ( widget.isChecked() && widget.getEnabled() ) {\n\t\t\t\t\t\trecord[key] = widget.getValue();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\t\t\trecord = this.current_edit_record;\n\t\t}\n\n\t\trecord = this.uniformVariable( record );\n\n\t\tif ( this.include_pay_stub_accounts ) {\n\t\t\tvar entries = $this.saveInsideEntryEditorData();\n\t\t\tvar transactions = $this.saveInsideTransactionEditorData();\n\t\t\tif ( typeof entries == 'object' ) {\n\t\t\t\trecord['entries'] = entries;\n\t\t\t}\n\t\t\tif ( typeof transactions == 'object' ) {\n\t\t\t\trecord['transactions'] = transactions;\n\t\t\t}\n\t\t}\n\n\t\tthis.api['validate' + this.api.key_name]( record, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.validateResult( result );\n\t\t\t}\n\t\t} );\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_pay_stub': {\n\t\t\t\t'label': $.i18n._( 'Pay Stub' ), 'is_multi_column': true,\n\t\t\t\t'html_template': this.getPayStubTabHtml()\n\t\t\t},\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStub,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_pay_stub',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_pay_stub = this.edit_view_tab.find( '#tab_pay_stub' );\n\n\t\tvar tab_pay_stub_column1 = tab_pay_stub.find( '.first-column' );\n\t\tvar tab_pay_stub_column2 = tab_pay_stub.find( '.second-column' );\n//\t\tvar tab_pay_stub_column3 = tab_pay_stub.find( '.third-column' );\n\n\t\tvar form_item_input;\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_pay_stub_column1 );\n\n\t\t// Employee\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: false,\n\t\t\tfield: 'user_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee' ), form_item_input, tab_pay_stub_column1, '', null, true );\n\n\t\t// Status\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'status_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.filtered_status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_pay_stub_column1 );\n\n\t\t// Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'type_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab_pay_stub_column1 );\n\n\t\t// Currency\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APICurrency,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_currency',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'currency_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Currency' ), form_item_input, tab_pay_stub_column1 );\n\n\t\t// Pay Period\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayPeriod,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_Pay_period',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'pay_period_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Period' ), form_item_input, tab_pay_stub_column2 );\n\n\t\t// Payroll Run\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'run_id', width: 20 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Payroll Run' ), form_item_input, tab_pay_stub_column2 );\n\n\t\t// Pay Start Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'start_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Start Date' ), form_item_input, tab_pay_stub_column2 );\n\n\t\t// Pay End Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'end_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay End Date' ), form_item_input, tab_pay_stub_column2 );\n\n\t\t// Payment Date\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'transaction_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Payment Date' ), form_item_input, tab_pay_stub_column2, '' );\n\n\t\t//Inside pay stub entries editor\n\n\t\tvar inside_pay_stub_entry_editor_div = tab_pay_stub.find( '.inside-pay-stub-entry-editor-div' );\n\n\t\tthis.editor = Global.loadWidgetByName( FormItemType.INSIDE_EDITOR );\n\n\t\tthis.editor.InsideEditor( {\n\t\t\taddRow: this.insideEntryEditorAddRow,\n\t\t\tremoveRow: this.insideEntryEditorRemoveRow,\n\t\t\tgetValue: this.insideEntryEditorGetValue,\n\t\t\tsetValue: this.insideEntryEditorSetValue,\n\t\t\tparent_controller: this,\n\t\t\tapi: this.pay_stub_entry_api,\n\t\t\trender: getRender(),\n\t\t\trender_args: {},\n\t\t\trender_inline_html: true,\n\t\t\trow_render: getRowRender()\n\n\t\t} );\n\n\t\tfunction getRender() {\n\t\t\treturn `\n\t\t\t<table class=\"inside-editor-render tblList\">\n\t\t\t</table>`;\n\t\t}\n\n\t\tfunction getRowRender() {\n\t\t\treturn `<div></div>`;\n\t\t}\n\n\t\tthis.editor.show_cover = true;\n\t\tthis.editor.delete_transaction_ids = [];\n\t\tthis.editor.removeCover = this.removeEntryInsideEditorCover;\n\t\tthis.editor.onEditClick = this.removeEntryInsideEditorCover;\n\t\tthis.editor.onFormItemKeyUp = function( target ) {\n\t\t\tvar index = target.parent().parent().index();\n\t\t\tvar $this = this;\n\t\t\tvar widget_rate = $this.rows_widgets_array[index]['rate'];\n\t\t\tvar widget_units = $this.rows_widgets_array[index]['units'];\n\t\t\tvar widget_amount = $this.rows_widgets_array[index]['amount'];\n\n\t\t\tif ( target.getValue().length === 0 ) {\n\t\t\t\twidget_amount.setReadOnly( false );\n\t\t\t}\n\t\t\tif ( widget_rate.getValue().length > 0 || widget_units.getValue().length > 0 ) {\n\t\t\t\twidget_amount.setReadOnly( true );\n\t\t\t}\n\n\t\t\tif ( widget_rate.getValue().length > 0 && widget_units.getValue().length > 0 ) {\n\t\t\t\t//widget_amount.setValue( ( parseFloat( widget_rate.getValue() ) * parseFloat( widget_units.getValue() ) ).toFixed( 2 ) );\n\t\t\t\t//var amount_value = Global.MoneyRound( parseFloat( widget_rate.getValue() ) * parseFloat( widget_units.getValue() ) );\n\t\t\t\tvar amount_value = Global.MoneyRound( Decimal( parseFloat( widget_rate.getValue() ) ).mul( parseFloat( widget_units.getValue() ) ).toFixed( 4 ) );\n\t\t\t\tif ( amount_value == 'NaN' || amount_value == 0 || amount_value == '' ) {\n\t\t\t\t\tamount_value = '0.00';\n\t\t\t\t}\n\t\t\t\twidget_amount.setValue( amount_value );\n\t\t\t\tthis.onFormItemChange( widget_amount, true );\n\t\t\t} else {\n\t\t\t\twidget_amount.setValue( '0.00' );\n\t\t\t\tthis.onFormItemChange( widget_amount, true );\n\t\t\t}\n\t\t};\n\t\tthis.editor.onFormItemKeyDown = function( target ) {\n\t\t\tvar index = target.parent().parent().index();\n\t\t\tvar $this = this;\n\t\t\tvar widget = $this.rows_widgets_array[index]['amount'];\n\t\t\tvar widget_rate = $this.rows_widgets_array[index]['rate'];\n\t\t\tvar widget_units = $this.rows_widgets_array[index]['units'];\n\t\t\tif ( widget_rate.getValue().length > 0 && widget_units.getValue().length > 0 ) {\n\n\t\t\t} else {\n\t\t\t\twidget.setValue( '0.00' );\n\t\t\t\tthis.onFormItemChange( widget, true );\n\t\t\t}\n\n\t\t\twidget.setReadOnly( true );\n\t\t};\n\t\tthis.editor.onFormItemChange = function( target, doNotValidate ) {\n\t\t\tvar key = target.getField();\n\t\t\tvar c_value = parseFloat( target.getValue() ? target.getValue() : 0 ); // new value\n\t\t\tvar index = target.parent().parent().index();\n\n\t\t\tif ( key === 'amount' ) {\n\t\t\t\tvar original_ytd_amount = parseFloat( this.rows_widgets_array[index]['ytd_amount'].attr( 'original_ytd_amount' ) );\n\t\t\t\tif ( isNaN( original_ytd_amount ) ) {\n\t\t\t\t\toriginal_ytd_amount = 0.00;\n\t\t\t\t}\n\n\t\t\t\tvar original_amount = parseFloat( this.rows_widgets_array[index]['ytd_amount'].attr( 'original_amount' ) );\n\t\t\t\tif ( isNaN( original_amount ) ) {\n\t\t\t\t\toriginal_amount = 0.00;\n\t\t\t\t}\n\n\t\t\t\tvar new_ytd_amount = Global.removeTrailingZeros( Decimal( original_ytd_amount ).sub( original_amount ).add( c_value ).toFixed( 4 ) );\n\t\t\t\tif ( isNaN( new_ytd_amount ) ) {\n\t\t\t\t\tnew_ytd_amount = 0.00;\n\t\t\t\t}\n\n\t\t\t\tthis.rows_widgets_array[index]['ytd_amount'].setValue( new_ytd_amount != 0 ? new_ytd_amount : '-' );\n\t\t\t\tthis.rows_widgets_array[index]['ytd_amount'].attr( 'original_ytd_amount', new_ytd_amount );\n\t\t\t\tthis.rows_widgets_array[index]['ytd_amount'].attr( 'original_amount', c_value );\n\t\t\t}\n\n\t\t\tif ( doNotValidate ) {\n\n\t\t\t} else {\n\t\t\t\tthis.parent_controller.validate();\n\t\t\t}\n\n\t\t\tthis.calcTotal();\n\t\t};\n\n\t\tthis.editor.calcTotal = function() {\n\t\t\tvar total_units = 0;\n\t\t\tvar total_amount = 0;\n\t\t\tvar total_ytd_amount = 0;\n\t\t\tvar net_pay_amount = 0;\n\t\t\tvar net_pay_ytd_amount = 0;\n\t\t\tvar total_units_blank = true;\n\n\t\t\tfor ( var i = 0; i < this.rows_widgets_array.length; i++ ) {\n\t\t\t\tvar row = this.rows_widgets_array[i];\n\t\t\t\tif ( row === true || _.isArray( row ) ) {\n\t\t\t\t\ttotal_units = 0;\n\t\t\t\t\ttotal_amount = 0;\n\t\t\t\t\ttotal_ytd_amount = 0;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif ( row['total_row'] === true ) {\n\t\t\t\t\tif ( !Global.isNumeric( total_amount ) ) {\n\t\t\t\t\t\ttotal_amount = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( Global.isSet( row['units'] ) ) {\n\t\t\t\t\t\tif ( total_units_blank == false ) {\n\t\t\t\t\t\t\trow['units'].setValue( Global.MoneyRound( total_units ) );\n\t\t\t\t\t\t} else if ( total_units_blank ) {\n\t\t\t\t\t\t\trow['units'].setValue( '-' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\trow['amount'].setValue( Global.MoneyRound( parseFloat( total_amount ) ) );\n\t\t\t\t\trow['ytd_amount'].setValue( Global.MoneyRound( parseFloat( total_ytd_amount ) ) );\n\n\t\t\t\t\tif ( row.type_id == 10 ) { // Start with total gross value\n\t\t\t\t\t\tnet_pay_amount = total_amount;\n\t\t\t\t\t\tnet_pay_ytd_amount = total_ytd_amount;\n\t\t\t\t\t} else if ( row.type_id == 20 ) { // Subtract deductions (only)\n\t\t\t\t\t\t//net_pay_amount = net_pay_amount - total_amount;\n\t\t\t\t\t\tnet_pay_amount = Decimal( net_pay_amount ).sub( total_amount ).toFixed( 4 );\n\n\t\t\t\t\t\t//net_pay_ytd_amount = net_pay_ytd_amount - total_ytd_amount;\n\t\t\t\t\t\tnet_pay_ytd_amount = Decimal( net_pay_ytd_amount ).sub( total_ytd_amount ).toFixed( 4 );\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.parent_controller.net_pay_amount = net_pay_amount;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif ( row['pay_stub_entry_account_id'] && row['pay_stub_entry_account_id'] == this.parent_controller.pseal_link.net_pay_entry_account_id ) {\n\t\t\t\t\trow['amount'].setValue( Global.MoneyRound( net_pay_amount ) );\n\t\t\t\t\trow['ytd_amount'].setValue( Global.MoneyRound( net_pay_ytd_amount ) );\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar current_units = 0;\n\t\t\t\tif ( Global.isSet( row['units'] ) && Global.isNumeric( row['units'].getValue() ) ) {\n\t\t\t\t\tcurrent_units = Global.MoneyRound( parseFloat( row['units'].getValue() ) );\n\t\t\t\t\ttotal_units_blank = false;\n\t\t\t\t}\n\n\t\t\t\tvar current_total_amount = 0;\n\t\t\t\tif ( Global.isSet( row['amount'] ) && Global.isNumeric( row['amount'].getValue() ) ) {\n\t\t\t\t\tcurrent_total_amount = parseFloat( row['amount'].getValue() );\n\t\t\t\t\ttotal_units_blank = false;\n\t\t\t\t}\n\n\t\t\t\tvar current_ytd_total = 0;\n\t\t\t\tif ( Global.isSet( row['ytd_amount'] ) && Global.isNumeric( row['ytd_amount'].getValue() ) ) {\n\t\t\t\t\tcurrent_ytd_total = parseFloat( row['ytd_amount'].getValue() );\n\t\t\t\t}\n\n\t\t\t\tif ( total_units_blank == false ) {\n\t\t\t\t\t// total_units = parseFloat( total_units ) + parseFloat( current_units );\n\t\t\t\t\ttotal_units = Decimal( parseFloat( total_units ) ).add( parseFloat( current_units ) ).toFixed( 4 );\n\t\t\t\t} else {\n\t\t\t\t\ttotal_units = '';\n\t\t\t\t}\n\n\t\t\t\tif ( Global.isNumeric( current_total_amount ) ) {\n\t\t\t\t\t// total_amount = total_amount + current_total_amount;\n\t\t\t\t\ttotal_amount = Decimal( total_amount ).add( current_total_amount ).toFixed( 4 );\n\t\t\t\t}\n\n\t\t\t\tif ( Global.isNumeric( current_ytd_total ) ) {\n\t\t\t\t\t// total_ytd_amount = total_ytd_amount + current_ytd_total;\n\t\t\t\t\ttotal_ytd_amount = Decimal( total_ytd_amount ).add( current_ytd_total ).toFixed( 4 );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.calcTransactionTotals();\n\n\t\t};\n\n\t\tthis.editor.insideTransactionEditorSetValue = function( data ) {\n\t\t\t$this = this;\n\t\t\tif ( !this.parent_controller.current_edit_record ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar pay_stub_status_id = this.parent_controller['current_edit_record']['status_id'];\n\t\t\tvar is_add = false;\n\t\t\tif ( !this.parent_controller['current_edit_record']['id'] && !this.parent_controller.copied_record_id ) {\n\t\t\t\tis_add = true;\n\t\t\t}\n\t\t\tif ( !is_add && ( pay_stub_status_id == 25 ) && this.show_cover ) {\n\t\t\t\tthis.cover = Global.loadWidgetByName( WidgetNamesDic.NO_RESULT_BOX );\n\t\t\t\tthis.cover.NoResultBox( {\n\t\t\t\t\trelated_view_controller: this,\n\t\t\t\t\tmessage: $.i18n._( 'Click the Edit icon below to override pay stub amounts' ),\n\t\t\t\t\tis_edit: true\n\t\t\t\t} );\n\t\t\t}\n\t\t\tvar render = this.getRender(); //get render, should be a table\n\t\t\tvar headerRow = `\n\t\t\t<tr class=\"tblHeader\">\n\t\t\t\t<td align=\"left\" colspan=\"2\"><%= col1 %></td>\n\t\t\t\t<td colspan=\"2\"> <%= col2 %></td>\n\t\t\t\t<td colspan=\"1\"> <%= col3 %></td>\n\t\t\t\t<td colspan=\"1\"> <%= col4 %></td>\n\t\t\t\t<td colspan=\"1\" style=\"width: 30px\"><%= col5 %></td>\n\t\t\t\t<td colspan=\"2\" style=\"width:60px\"></td>\n\t\t\t</tr>`;\n\t\t\tvar args = {\n\t\t\t\tcol1: $.i18n._( 'Payment Method' ),\n\t\t\t\tcol2: $.i18n._( 'Note' ),\n\t\t\t\tcol3: $.i18n._( 'Status' ),\n\t\t\t\tcol4: $.i18n._( 'Payment Date' ),\n\t\t\t\tcol5: $.i18n._( 'Amount' )\n\t\t\t};\n\t\t\t$( render ).append( '<tr class=\"tblSepHeader\"><td colspan=\"8\">' + $.i18n._( 'Transactions' ) + '</td></tr>' );\n\n\t\t\tvar template = _.template( headerRow );\n\t\t\t$( render ).append( template( args ) );\n\n\t\t\tthis.rows_widgets_array.push( true );\n\t\t\tif ( _.size( data ) > 0 ) {\n\t\t\t\tfor ( var i = 0; i < _.size( data ); i++ ) {\n\t\t\t\t\tif ( Global.isSet( data[i] ) ) {\n\t\t\t\t\t\tvar row = data[i];\n\t\t\t\t\t\tthis.insideTransactionEditorAddRow( row );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//$( render ).append( '<tr><td colspan=\"8\"><br></td></tr>' );\n\t\t\t\tthis.rows_widgets_array.push( true );\n\t\t\t\tif ( this.cover && this.cover.length > 0 ) {\n\t\t\t\t\tthis.cover.css( { width: this.width(), height: this.height() + 30 } );\n\t\t\t\t\tthis.parent().append( this.cover );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.parent_controller.getPayStubTransactionDefaultData( function( data ) {\n\t\t\t\t\t$this.insideTransactionEditorAddRow( data );\n\t\t\t\t\t//$( render ).append( '<tr><td colspan=\"8\"><br></td></tr>' );\n\t\t\t\t\t$this.rows_widgets_array.push( true );\n\t\t\t\t\tif ( $this.cover && $this.cover.length > 0 ) {\n\t\t\t\t\t\t$this.cover.css( { width: $this.width(), height: $this.height() } );\n\t\t\t\t\t\t$this.parent().append( $this.cover );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tthis.calcTransactionTotals();\n\t\t};\n\n\t\tthis.editor.insideTransactionEditorGetValue = function( parent_id ) {\n\t\t\tvar len = this.rows_widgets_array.length;\n\t\t\tvar result = [];\n\n\t\t\tif ( this.cover && this.cover.length > 0 ) {\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar data = {};\n\t\t\t\tif ( _.isArray( this.rows_widgets_array[i] ) ) {\n\t\t\t\t\tvar row = this.rows_widgets_array[i][0];\n\n\t\t\t\t\tif ( !Global.isSet( row['remittance_destination_account_id'] ) || !row['remittance_destination_account_id'].getValue() ) {\n\t\t\t\t\t\tcontinue; //row is not editable but is among those that are.\n\t\t\t\t\t}\n\t\t\t\t\tdata['id'] = row['form_item_record']['id'];\n\t\t\t\t\tdata['remittance_destination_account_id'] = row['remittance_destination_account_id'] ? row['remittance_destination_account_id'].getValue() : TTUUID.zero_id;\n\n\t\t\t\t\tif ( Global.isSet( row['status_id'] ) ) {\n\t\t\t\t\t\tdata['status_id'] = row['status_id'].getValue();\n\t\t\t\t\t}\n\n\t\t\t\t\tdata['transaction_date'] = row['transaction_date'] ? row['transaction_date'].getValue() : '';\n\n\t\t\t\t\tif ( Global.isSet( row['currency_id'] ) ) {\n\t\t\t\t\t\tdata['currency_id'] = row['currency_id'].getValue();\n\t\t\t\t\t}\n\n\t\t\t\t\tdata['note'] = row['note'] ? row['note'].getValue() : '';\n\n\t\t\t\t\tdata['amount'] = row['amount'] ? row['amount'].getValue() : '';\n\n\t\t\t\t\tif ( Global.isSet( row['deleted'] ) && row['deleted'] == 1 ) {\n\t\t\t\t\t\tdata['deleted'] = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdata['deleted'] = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tdata['pay_stub_id'] = parent_id;\n\n\t\t\t\t\tif ( row['total_row'] != true && TTUUID.isUUID( data['remittance_destination_account_id'] )\n\t\t\t\t\t\t&& ( data['remittance_destination_account_id'] != TTUUID.zero_id\n\t\t\t\t\t\t\t|| ( data['note'] != undefined && data['note'].length > 0 )\n\t\t\t\t\t\t\t|| ( data['amount'] != undefined && data['amount'].length > 0 && parseFloat( data['amount'] ) != 0 )\n\t\t\t\t\t\t) ) {\n\t\t\t\t\t\tresult.push( data );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\n\t\tthis.editor.insideTransactionEditorRemoveRow = function( row ) {\n\t\t\tvar index = row[0].rowIndex - 1;\n\n\t\t\tif ( this.rows_widgets_array[index][0] ) {\n\t\t\t\tthis.rows_widgets_array[index][0]['form_item_record']['deleted'] = 1;\n\t\t\t\tvar remove_id = this.rows_widgets_array[index][0]['form_item_record']['id'];\n\t\t\t}\n\n\t\t\tif ( TTUUID.isUUID( remove_id ) ) {\n\t\t\t\tthis.delete_transaction_ids.push( remove_id );\n\t\t\t} else {\n\t\t\t\t// only remove the row if it was a new row, existing rows (in db) must only be hidden, not removed.\n\t\t\t\tthis.rows_widgets_array.splice( index, 1 );\n\t\t\t}\n\n\t\t\t// hide the row from user view, so we can still query the data during the save operation (api still needs it to know what to delete).\n\t\t\trow.hide();\n\n\t\t\t//count transaction rows.\n\t\t\tvar trows = $( '.paystub_transaction_row:visible' ).length;\n\n\t\t\tif ( trows == 0 ) {\n\t\t\t\t// if all rows removed, make sure we add a blank row in again.\n\t\t\t\tthis.insideTransactionEditorAddRow( {}, index );\n\t\t\t}\n\n\t\t\tthis.parent_controller.validate();\n\t\t\t$this.calcTransactionTotals();\n\n\t\t};\n\n\t\tthis.editor.calcTransactionTotals = function() {\n\t\t\tvar total_amount = 0;\n\n\t\t\tfor ( var i = 0; i < this.rows_widgets_array.length; i++ ) {\n\t\t\t\tvar row = this.rows_widgets_array[i];\n\t\t\t\t//use transaction_date column existence as is transaction flag.\n\t\t\t\tif ( _.isObject( row ) //row is object\n\t\t\t\t\t&& Global.isSet( row[0] )\t//row's object is set.\n\t\t\t\t\t&& Global.isSet( row[0].remittance_destination_account_id ) //row is a pay stub transaction\n\t\t\t\t\t&& Global.isSet( row[0].form_item_record.deleted ) == false //row is not removed\n\t\t\t\t\t&& Global.isSet( row[0].status_id ) //row is not removed\n\t\t\t\t\t&& ( row[0].status_id.getValue() == 10 || row[0].status_id.getValue() == 20 ) //status is valid\n\t\t\t\t) {\n\t\t\t\t\tvar current = parseFloat( row[0].amount.getValue() );\n\t\t\t\t\tif ( isNaN( current ) ) {\n\t\t\t\t\t\tcurrent = 0;\n\t\t\t\t\t}\n\t\t\t\t\ttotal_amount += current;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttotal_amount = Global.MoneyRound( total_amount );\n\n\t\t\t//total_amount = Global.removeTrailingZeros(total_amount);\n\t\t\tvar render = this.getRender();\n\t\t\t$( '.transaction_total_rows' ).remove();\n\n\t\t\tif ( total_amount > 0 ) {\n\t\t\t\t// var difference = Global.removeTrailingZeros( parseFloat( total_amount ) - parseFloat( this.parent_controller.net_pay_amount ) );\n\t\t\t\tvar difference = Global.removeTrailingZeros( Decimal( parseFloat( total_amount ) ).sub( parseFloat( this.parent_controller.net_pay_amount ) ).toFixed( 4 ) );\n\n\t\t\t\tif ( isNaN( difference ) ) {\n\t\t\t\t\tdifference = 0;\n\t\t\t\t}\n\n\t\t\t\tvar color = 'green';\n\t\t\t\tif ( difference != 0 ) {\n\t\t\t\t\tcolor = 'red';\n\t\t\t\t}\n\n\t\t\t\tif ( difference != 0 ) {\n\t\t\t\t\tdifference = Global.MoneyRound( difference );\n\t\t\t\t\t$( render ).append( '<tr class=\"tblDataWhite transaction_total_rows\"><td colspan=\"2\" style=\"text-align:left\"><b>Transaction Total</b></td><td colspan=\"3\"><br></td><td style=\"text-align:right;\"><span>Difference: <i  style=\"color:red;\">' + difference + '</i></b></td><td><b style=\"color:' + color + '\">' + Global.MoneyRound( total_amount ) + '</b></td><td></td></td></tr>' );\n\t\t\t\t} else {\n\t\t\t\t\t$( render ).append( '<tr class=\"tblDataWhite transaction_total_rows\"><td colspan=\"2\" style=\"text-align:left\"><b>Transaction Total</b></td><td colspan=\"4\"><br></td><td><b style=\"color:' + color + '\">' + total_amount + '</b></td><td></td></td></tr>' );\n\t\t\t\t}\n\n\t\t\t\tthis.rows_widgets_array.push( true );\n\t\t\t}\n\t\t};\n\n\t\tthis.editor.insideTransactionEditorAddRow = function( data, index ) {\n\t\t\tvar $this = this;\n\n\t\t\tif ( !$this.parent_controller || !$this.parent_controller.current_edit_record ) {\n\t\t\t\treturn false; //View has likely been closed before API call finished.\n\t\t\t}\n\n\t\t\tif ( _.size( data ) == 0 ) {\n\t\t\t\tthis.parent_controller.getPayStubTransactionDefaultData( function( data ) {\n\t\t\t\t\t$this.insideTransactionEditorAddRow( data, index );\n\t\t\t\t}, index );\n\t\t\t} else {\n\t\t\t\tvar render = $this.getRender();\n\t\t\t\tvar widgets = [];\n\t\t\t\tvar transaction = {};\n\t\t\t\ttransaction.form_item_record = {};\n\t\t\t\tvar row = $( `<tr class=\"tblDataWhite paystub_transaction_row\" align=\"right\">\n\t\t\t\t\t\t\t\t<td align=\"left\" colspan=\"2\"></td>\n\t\t\t\t\t\t\t\t<td colspan=\"2\" class=\"\"></td>\n\t\t\t\t\t\t\t\t<td colspan=\"1\" class=\"\"></td>\n\t\t\t\t\t\t\t\t<td colspan=\"1\" class=\"\"></td>\n\t\t\t\t\t\t\t\t<td colspan=\"1\" class=\"cell control-icon\" style=\"width: 30px\"></td>\n\t\t\t\t\t\t\t\t<td colspan=\"1\" class=\"cell control-icon\">\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<button class=\"plus-icon\" onclick=\"\"></button>\n\t\t\t\t\t\t\t\t\t\t<button class=\"minus-icon \" onclick=\"\"></button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>` );\n\t\t\t\tdata = _.isArray( data ) ? data[0] : data;\n\t\t\t\ttransaction.form_item_record.id = ( data.id && $this.parent_controller.current_edit_record.id ) ? data.id : '';\n\t\t\t\tvar pay_stub_status_id = $this.parent_controller.current_edit_record.status_id;\n\t\t\t\tvar is_add = false;\n\t\t\t\tif ( !$this.parent_controller.current_edit_record.id && !$this.parent_controller.copied_record_id ) {\n\t\t\t\t\tis_add = true;\n\t\t\t\t\tdata.status_id = 10; //10=Pending == When using Copy as New force transaction statuses to pending.\n\t\t\t\t}\n\n\t\t\t\t// Destination Account - writable\n\t\t\t\tvar allowed_statuses = [10];\n\t\t\t\tif ( $this.parent_controller.is_add == false ) {\n\t\t\t\t\tallowed_statuses.push( 20 );\n\t\t\t\t}\n\t\t\t\tvar form_item_remittance_destination_account_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\t\t\tform_item_remittance_destination_account_input.AComboBox( {\n\t\t\t\t\tapi_class: TTAPI.APIRemittanceDestinationAccount,\n\t\t\t\t\tallow_multiple_selection: false,\n\t\t\t\t\tlayout_name: 'global_remittance_destination_account',\n\t\t\t\t\tshow_search_inputs: true,\n\t\t\t\t\tset_empty: true,\n\t\t\t\t\tfield: 'remittance_destination_account_id',\n\t\t\t\t\tdefault_args: {\n\t\t\t\t\t\tfilter_data: {\n\t\t\t\t\t\t\tuser_id: $this.parent_controller.current_edit_record.user_id,\n\t\t\t\t\t\t\tstatus_id: allowed_statuses\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tform_item_remittance_destination_account_input.setValue( data.remittance_destination_account_id ? data.remittance_destination_account_id : '' );\n\t\t\t\tform_item_remittance_destination_account_input.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t$this.parent_controller.validate();\n\t\t\t\t} );\n\n\t\t\t\t// readable\n\t\t\t\tvar form_item_remittance_destination_account_text = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\t\tform_item_remittance_destination_account_text.TText( { field: 'remittance_destination_account' } );\n\t\t\t\tform_item_remittance_destination_account_text.setValue( data.remittance_destination_account ? data.remittance_destination_account : '' );\n\n\t\t\t\t// Note - writable\n\t\t\t\tvar form_item_note_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\t\tform_item_note_input.TTextInput( { field: 'note', width: 300 } );\n\t\t\t\tform_item_note_input.setValue( data.note );\n\t\t\t\tform_item_note_input.attr( 'editable', true );\n\t\t\t\t//readable\n\t\t\t\tvar form_item_note_text = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\t\tform_item_note_text.TText( { field: 'description' } );\n\t\t\t\tform_item_note_text.setValue( data.description );\n\n\t\t\t\t// Transaction Status - writable\n\t\t\t\tvar form_item_status_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\t\t\tform_item_status_input.TComboBox( { field: 'status_id', set_empty: false } );\n\t\t\t\tform_item_status_input.setSourceData( $this.parent_controller.transaction_status_array );\n\t\t\t\tform_item_status_input.setValue( data.status_id ? data.status_id : '' );\n\t\t\t\tform_item_status_input.setEnabled( ( LocalCacheData.current_doing_context_action == 'copy_as_new' ) );\n\t\t\t\tform_item_status_input.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t$this.parent_controller.validate();\n\t\t\t\t} );\n\t\t\t\t// readable\n\t\t\t\tvar form_item_status_text = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\t\tform_item_status_text.TText( { field: 'status' } );\n\t\t\t\tform_item_status_text.setValue( data.status ? data.status : '' );\n\n\t\t\t\t// Transaction Date - writable\n\t\t\t\tvar form_item_transaction_date_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\t\t\tform_item_transaction_date_input.TDatePicker( { field: 'transaction_date' } );\n\t\t\t\tform_item_transaction_date_input.setValue( data.transaction_date ? data.transaction_date : '' );\n\t\t\t\tform_item_transaction_date_input.attr( 'editable', true );\n\n\t\t\t\tif ( !data['transaction_date'] ) {\n\t\t\t\t\tform_item_transaction_date_input.setValue( $this.parent_controller.edit_view_ui_dic.transaction_date.getValue() );\n\t\t\t\t}\n\n\t\t\t\tform_item_transaction_date_input.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t$this.parent_controller.validate();\n\t\t\t\t} );\n\t\t\t\t// readable\n\t\t\t\tvar form_item_confirmation_number_text = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\t\tform_item_confirmation_number_text.TText( { field: 'transaction_date' } );\n\t\t\t\tform_item_confirmation_number_text.setValue( data.transaction_date ? data.transaction_date : '' );\n\n\t\t\t\t// Amount - writable\n\t\t\t\tvar form_item_amount_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\t\tform_item_amount_input.TTextInput( { field: 'amount', width: 60 } );\n\t\t\t\tform_item_amount_input.setValue( data.amount ? Global.removeTrailingZeros( data.amount ) : '' );\n\t\t\t\tform_item_amount_input.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t$this.parent_controller.validate();\n\t\t\t\t\t$this.calcTransactionTotals();\n\t\t\t\t} );\n\t\t\t\tform_item_amount_input.attr( 'editable', true );\n\t\t\t\t// readable\n\t\t\t\tvar form_item_amount_text = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\t\tform_item_amount_text.TText( { field: 'amount' } );\n\t\t\t\tform_item_amount_text.setValue( data.amount ? Global.removeTrailingZeros( data.amount ) : '' );\n\n\t\t\t\tif ( !data.status_id ) {\n\t\t\t\t\tdata.status_id = 10;\n\t\t\t\t}\n\n\t\t\t\tif ( $this.parent_controller.isEditMode() ) {\n\t\t\t\t\tform_item_remittance_destination_account_input.setEnabled( data.status_id == 10 );\n\t\t\t\t\tform_item_transaction_date_input.setEnabled( data.status_id == 10 );\n\t\t\t\t\tform_item_amount_input.setReadOnly( data.status_id != 10 );\n\t\t\t\t\tform_item_note_input.setReadOnly( data.status_id != 10 );\n\t\t\t\t\t//form_item_status_input.setValue( 10 ); //set to pending\n\t\t\t\t\tform_item_status_input.setEnabled( false );\n\t\t\t\t} else {\n\t\t\t\t\t//status is not pending. disable editing the row.\n\t\t\t\t\tform_item_remittance_destination_account_input.setEnabled( false );\n\t\t\t\t\tform_item_transaction_date_input.setEnabled( false );\n\t\t\t\t\tform_item_amount_input.setEnabled( false );\n\t\t\t\t\tform_item_note_input.setEnabled( false );\n\t\t\t\t\tform_item_status_input.setEnabled( false );\n\t\t\t\t\tform_item_input = form_item_note_text; //only way to hide the N/A is to swap in a Text Field in view mode.\n\t\t\t\t}\n\n\t\t\t\t//actually append the row to the DOM\n\t\t\t\ttransaction[form_item_remittance_destination_account_input.getField()] = form_item_remittance_destination_account_input;\n\t\t\t\trow.children().eq( 0 ).append( form_item_remittance_destination_account_input );\n\n\t\t\t\ttransaction[form_item_note_input.getField()] = form_item_note_input;\n\t\t\t\trow.children().eq( 1 ).append( form_item_note_input );\n\n\t\t\t\ttransaction[form_item_status_input.getField()] = form_item_status_input;\n\t\t\t\trow.children().eq( 2 ).append( form_item_status_input );\n\n\t\t\t\ttransaction[form_item_transaction_date_input.getField()] = form_item_transaction_date_input;\n\t\t\t\trow.children().eq( 3 ).append( form_item_transaction_date_input );\n\n\t\t\t\ttransaction[form_item_amount_input.getField()] = form_item_amount_input;\n\t\t\t\trow.children().eq( 4 ).append( form_item_amount_input );\n\n\t\t\t\twidgets.push( transaction );\n\t\t\t\tif ( typeof index !== 'undefined' ) {\n\t\t\t\t\trow.insertAfter( $( render ).find( 'tr' ).eq( index ) );\n\t\t\t\t\t$this.rows_widgets_array.splice( ( index ), 0, widgets );\n\t\t\t\t} else {\n\t\t\t\t\t$( render ).append( row );\n\t\t\t\t\t$this.rows_widgets_array.push( widgets );\n\t\t\t\t}\n\n\t\t\t\tif ( $this.parent_controller.isEditMode() == true ) {\n\t\t\t\t\tvar minus_icon = row.find( '.minus-icon' );\n\t\t\t\t\tif ( data.status_id != 10 ) {\n\t\t\t\t\t\tminus_icon.remove();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tminus_icon.click( function() {\n\t\t\t\t\t\t\t$this.insideTransactionEditorRemoveRow( row );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t\tvar plus_icon = row.find( '.plus-icon' );\n\t\t\t\t\tplus_icon.click( function() {\n\t\t\t\t\t\t$this.insideTransactionEditorAddRow( {}, $( this ).parents( 'tr' ).index() );\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\t//#2548 - Do not show plus button in view mode (when paystub is marked paid)\n\t\t\t\t\trow.children().last().find( '.minus-icon' ).remove();\n\t\t\t\t\t//if ( data.status_id != 20 ) {\n\t\t\t\t\trow.children().last().find( '.plus-icon' ).remove();\n\t\t\t\t\t//}\n\t\t\t\t}\n\n\t\t\t}\n\t\t};\n\t\tinside_pay_stub_entry_editor_div.append( this.editor );\n\t}\n\n\tbuildSearchFields() {\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Stub Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Stub Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Period' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_period_id',\n\t\t\t\tlayout_name: 'global_Pay_period',\n\t\t\t\tapi_class: TTAPI.APIPayPeriod,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Payroll Run' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'run_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Title' ),\n\t\t\t\tfield: 'title_id',\n\t\t\t\tin_column: 1,\n\t\t\t\tlayout_name: 'global_job_title',\n\t\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Currency' ),\n\t\t\t\tfield: 'currency_id',\n\t\t\t\tin_column: 1,\n\t\t\t\tlayout_name: 'global_currency',\n\t\t\t\tapi_class: TTAPI.APICurrency,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Branch' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'default_branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Department' ),\n\t\t\t\tfield: 'default_department_id',\n\t\t\t\tin_column: 2,\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Country' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'country',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.COMBO_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Province/State' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'province',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'City' ),\n\t\t\t\tfield: 'city',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'timesheet':\n\t\t\tcase 'schedule':\n\t\t\tcase 'pay_stub_amendment':\n\t\t\tcase 'edit_employee':\n\t\t\tcase 'employee_pay_stubs':\n\t\t\tcase 'employer_pay_stubs':\n\t\t\tcase 'generate_pay_stub':\n\t\t\tcase 'edit_pay_period':\n\t\t\tcase 'export_excel':\n\t\t\tcase 'pay_stub_transaction':\n\t\t\tdefault:\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonViewClick( edit_record, noRefreshUI ) {\n\t\tthis.onNavigationClick( 'view' );\n\t}\n\n\tonReportPrintClick( key ) {\n\t\tvar $this = this;\n\n\t\tvar grid_selected_id_array;\n\n\t\tvar filter = {};\n\n\t\tvar ids = [];\n\n\t\tvar user_ids = [];\n\n\t\tvar base_date;\n\n\t\tvar pay_period_ids = [];\n\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\tids.push( $this.current_edit_record.id );\n\t\t\tuser_ids.push( $this.current_edit_record.user_id );\n\t\t\tpay_period_ids.push( $this.current_edit_record.pay_period_id );\n\t\t\tbase_date = $this.current_edit_record.start_date;\n\t\t} else {\n\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\tids.push( grid_selected_row.id );\n\t\t\t\tuser_ids.push( grid_selected_row.user_id );\n\t\t\t\tpay_period_ids.push( grid_selected_row.pay_period_id );\n\t\t\t\tbase_date = grid_selected_row.start_date;\n\t\t\t} );\n\t\t}\n\n\t\tvar args = { filter_data: { id: ids } };\n\t\tvar post_data = { 0: args, 1: true, 2: key };\n\n\t\tthis.doFormIFrameCall( post_data );\n\t}\n\n\tonNavigationClick( iconName ) {\n\n\t\tvar $this = this;\n\n\t\tvar grid_selected_id_array;\n\n\t\tvar filter = {};\n\n\t\tvar ids = [];\n\n\t\tvar user_ids = [];\n\n\t\tvar base_date;\n\n\t\tvar pay_period_ids = [];\n\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\tids.push( $this.current_edit_record.id );\n\t\t\tuser_ids.push( $this.current_edit_record.user_id );\n\t\t\tpay_period_ids.push( $this.current_edit_record.pay_period_id );\n\t\t\tbase_date = $this.current_edit_record.start_date;\n\t\t} else {\n\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\tids.push( grid_selected_row.id );\n\t\t\t\tuser_ids.push( grid_selected_row.user_id );\n\t\t\t\tpay_period_ids.push( grid_selected_row.pay_period_id );\n\t\t\t\tbase_date = grid_selected_row.start_date;\n\t\t\t} );\n\t\t}\n\n\t\tvar args = { filter_data: { id: ids } };\n\n\t\tvar post_data;\n\n\t\tswitch ( iconName ) {\n\t\t\tcase 'edit_employee':\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tIndexViewController.openEditView( this, 'Employee', user_ids[0] );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'edit_pay_period':\n\t\t\t\tif ( pay_period_ids.length > 0 ) {\n\t\t\t\t\tIndexViewController.openEditView( this, 'PayPeriods', pay_period_ids[0] );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'timesheet':\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tfilter.user_id = user_ids[0];\n\t\t\t\t\tfilter.base_date = base_date;\n\t\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Pay Stubs' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'TimeSheet', filter );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'schedule':\n\t\t\t\tfilter.filter_data = {};\n\t\t\t\tvar include_users = { value: user_ids };\n\t\t\t\tfilter.filter_data.include_user_ids = include_users;\n\t\t\t\tfilter.select_date = base_date;\n\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Pay Stubs' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'Schedule', filter );\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub_amendment':\n\t\t\t\tfilter.filter_data = {};\n\t\t\t\tfilter.filter_data.user_id = user_ids[0];\n\t\t\t\tfilter.filter_data.pay_period_id = pay_period_ids[0];\n\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Pay Stubs' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'PayStubAmendment', filter );\n\t\t\t\tbreak;\n\t\t\tcase 'generate_pay_stub':\n\n\t\t\t\tif ( user_ids.length === 1 ) {\n\t\t\t\t\tfilter.user_id = user_ids[0];\n\t\t\t\t} else if ( user_ids.length > 1 ) {\n\t\t\t\t\tfilter.user_id = user_ids;\n\t\t\t\t}\n\n\t\t\t\tif ( pay_period_ids.length === 1 ) {\n\t\t\t\t\tfilter.pay_period_id = [pay_period_ids[0]];\n\t\t\t\t} else if ( pay_period_ids.length > 1 ) {\n\t\t\t\t\tfilter.pay_period_id = pay_period_ids;\n\t\t\t\t} else {\n\t\t\t\t\tfilter.pay_period_id = [];\n\t\t\t\t}\n\n\t\t\t\tIndexViewController.openWizard( 'GeneratePayStubWizard', filter, function() {\n\t\t\t\t\t$this.search();\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'view':\n\t\t\t\t//If its a payroll admin or higher, by default make the View button show employer pay stub.\n\t\t\t\tif ( ( PermissionManager.validate( 'pay_stub', 'view' ) || PermissionManager.validate( 'pay_stub', 'view_child' ) ) ) {\n\t\t\t\t\tpost_data = { 0: args, 1: false, 2: 'pdf', 3: false };\n\t\t\t\t} else {\n\t\t\t\t\tpost_data = { 0: args, 1: false, 2: 'pdf', 3: true };\n\t\t\t\t}\n\t\t\t\tthis.doFormIFrameCall( post_data );\n\t\t\t\t$().TFeedback( {\n\t\t\t\t\tsource: 'View', // viewId GovernmentDocument will be prepended in TFeedback functions.\n\t\t\t\t\tdelay: 5000\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'employee_pay_stubs':\n\t\t\t\tpost_data = { 0: args, 1: false, 2: 'pdf', 3: true };\n\t\t\t\tthis.doFormIFrameCall( post_data );\n\t\t\t\tbreak;\n\t\t\tcase 'employer_pay_stubs':\n\t\t\t\tpost_data = { 0: args, 1: false, 2: 'pdf', 3: false };\n\t\t\t\tthis.doFormIFrameCall( post_data );\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub_transaction':\n\t\t\t\tfilter = {};\n\t\t\t\tfilter.filter_data = {};\n\n\t\t\t\tfilter.filter_data.user_id = { value: user_ids };\n\t\t\t\tfilter.filter_data.pay_period_id = { value: pay_period_ids };\n\n\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Pay Stubs' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'PayStubTransaction', filter );\n\t\t\t\tbreak;\n\t\t\tcase 'export_excel':\n\t\t\t\tthis.onExportClick( 'export' + this.api.key_name );\n\t\t\t\tbreak;\n\t\t\tcase 'direct_deposit':\n\t\t\t\tvar data = {\n\t\t\t\t\tfilter_data: {\n\t\t\t\t\t\tpay_stub_id: this.getGridSelectIdArray()\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tIndexViewController.openWizardController( 'ProcessTransactionsWizardController', data );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonReportMenuClick( id ) {\n\t\tthis.onReportPrintClick( id );\n\t}\n\n\tdoFormIFrameCall( postData ) {\n\t\tGlobal.APIFileDownload( this.api.className, 'get' + this.api.key_name, postData );\n\t}\n\n\tgetPayStubTabHtml() {\n\t\treturn `<div id=\"tab_pay_stub\" class=\"edit-view-tab-outside\">\n\t\t\t\t\t<div class=\"edit-view-tab\" id=\"tab_pay_stub_content_div\">\n\t\t\t\t\t\t<div class=\"first-column\"></div>\n\t\t\t\t\t\t<div class=\"second-column\"></div>\n\t\t\t\t\t\t<div class=\"inside-pay-stub-entry-editor-div full-width-column\" style=\"float: left; position: relative\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t}\n\n}\n"],"names":["PayStubViewController","options","_","$","$this","dfd","result","data","i","res","context_menu_model","id","context_btn","grid_selected_length","pId","selected_item","key","widget","callback","index","result_data","args","total_rows","retval","n","type_id","newrow","type_ids","t","gross_total","employee_deduction_total","net_pay_total","employer_deduction_total","val","setEarnings","render","headerRow","template","row","getHeaderThreeColumn","setDeductions","setNetPay","setMiscellaneous","setEmployerContributions","setAccrual","renderColumns","type","widgets","widgetContainer","right_label","pay_stub_amendment_id","user_expense_id","pay_stub_status_id","is_add","row_enabled","form_item_name_input","e","target","form_item_name_text","form_item_note_input","form_item_note_text","form_item_rate_input","form_item_rate_text","form_item_units_input","form_item_units_text","form_item_amount_input","form_item_amount_text","form_item_ytd_amount_text","remove_id","record","callbackFunction","entries","transactions","ignoreWarning","callBack","navigation_div","filter","grid_selected_id_array","selectedId","value","result1","current_edit_item_id","len","column_filter","display_columns","column_info","doNotValidate","c_value","transaction_rows","user_id","start_date","end_date","transaction_date","combo","select_value","selectVal","m","refresh","province_widget","tab_model","tab_pay_stub","tab_pay_stub_column1","tab_pay_stub_column2","form_item_input","inside_pay_stub_entry_editor_div","getRender","getRowRender","widget_rate","widget_units","widget_amount","amount_value","Decimal","original_ytd_amount","original_amount","new_ytd_amount","total_units","total_amount","total_ytd_amount","net_pay_amount","net_pay_ytd_amount","total_units_blank","current_units","current_total_amount","current_ytd_total","parent_id","trows","current","difference","color","transaction","allowed_statuses","form_item_remittance_destination_account_input","form_item_remittance_destination_account_text","form_item_status_input","form_item_status_text","form_item_transaction_date_input","form_item_confirmation_number_text","minus_icon","plus_icon","edit_record","noRefreshUI","ids","user_ids","pay_period_ids","grid_selected_row","post_data","iconName","base_date","include_users","postData"],"mappings":"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"}