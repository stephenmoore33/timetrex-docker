import{_,j as t}from"./vendor-tTApdY0Y.bundle.js";class m extends BaseViewController{constructor(i={}){_.defaults(i,{el:"#report_schedule_view_container",status_array:null,priority_array:null,minute_array:null,hour_array:null,day_of_month_array:null,month_array:null,day_of_week_array:null}),super(i)}init(i){this.edit_view_tpl="ReportScheduleEditView.html",this.permission_id="report",this.viewId="ReportSchedule",this.script_name="ReportScheduleView",this.table_name_key="report_schedule",this.context_menu_name=t.i18n._("Report Schedule"),this.navigation_label=t.i18n._("Report Schedule"),this.api=TTAPI.APIReportSchedule,this.render(),this.sub_view_mode?this.buildContextMenu(!0):(this.buildContextMenu(),this.sub_view_mode||this.initData())}onAddResult(i){var a=this,l=i.getResult();l||(l=[]),l.company=LocalCacheData.current_company.name,a.sub_view_mode&&a.parent_key&&(l[a.parent_key]=a.parent_value),a.current_edit_record=l,a.current_edit_record[this.parent_key]=this.parent_value,a.initEditView()}initOptions(){var i=[{option_name:"status",api:this.api},{option_name:"priority",api:this.api},{option_name:"minute",api:this.api},{option_name:"hour",api:this.api},{option_name:"day_of_month",api:this.api},{option_name:"month",api:this.api},{option_name:"day_of_week",api:this.api}];this.initDropDownOptions(i)}buildEditViewUI(){super.buildEditViewUI();var i=this,a={tab_report_schedule:{label:t.i18n._("Report Schedule")},tab_audit:!0};this.setTabModel(a),this.navigation.AComboBox({api_class:TTAPI.APIUserReportData,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_branch",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var l=this.edit_view_tab.find("#tab_report_schedule"),o=l.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(o);var e=Global.loadWidgetByName(FormItemType.COMBO_BOX);e.TComboBox({field:"status_id",set_empty:!1}),e.setSourceData(i.status_array),this.addEditFieldToColumn(t.i18n._("Status"),e,o,""),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn(t.i18n._("Name"),e,o),e.parent().width("45%"),e=Global.loadWidgetByName(FormItemType.TEXT_AREA),e.TTextInput({field:"description",width:"100%"}),this.addEditFieldToColumn(t.i18n._("Description"),e,o,"",null,null,!0),e.parent().width("45%");var d=Global.loadWidgetByName(FormItemType.COMBO_BOX);d.TComboBox({field:"output_format",set_empty:!1}),this.api.getReportOutputFormatOptions(this.parent_edit_record.id,{onResult:function(n){d.setSourceData(Global.buildRecordArray(n.getResult()))}}),this.addEditFieldToColumn(t.i18n._("Format"),d,o),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"priority_id",set_empty:!1}),e.setSourceData(i.priority_array),this.addEditFieldToColumn(t.i18n._("Priority"),e,o),e=Global.loadWidgetByName(FormItemType.DATE_PICKER),e.TDatePicker({field:"start_date"}),this.addEditFieldToColumn(t.i18n._("Start Date"),e,o),e=Global.loadWidgetByName(FormItemType.DATE_PICKER),e.TDatePicker({field:"end_date"}),this.addEditFieldToColumn(t.i18n._("End Date"),e,o),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e=e.AComboBox({field:"minute",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"}),e.setSourceData(i.minute_array),this.addEditFieldToColumn(t.i18n._("Minute"),e,o),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e=e.AComboBox({field:"hour",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"}),e.setSourceData(i.hour_array),this.addEditFieldToColumn(t.i18n._("Hour"),e,o),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e=e.AComboBox({field:"day_of_month",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"}),e.setSourceData(i.day_of_month_array),this.addEditFieldToColumn(t.i18n._("Day of Month"),e,o),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e=e.AComboBox({field:"month",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"}),e.setSourceData(i.month_array),this.addEditFieldToColumn(t.i18n._("Month"),e,o),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e=e.AComboBox({field:"day_of_week",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"}),e.setSourceData(i.day_of_week_array),this.addEditFieldToColumn(t.i18n._("Day of Week"),e,o),e=Global.loadWidgetByName(FormItemType.CHECKBOX),e.TCheckbox({field:"email_blank_report"}),this.addEditFieldToColumn(t.i18n._("Email Even If Blank"),e,o),e=Global.loadWidgetByName(FormItemType.CHECKBOX),e.TCheckbox({field:"home_email_cc"}),this.addEditFieldToColumn(t.i18n._("Send Report to Home Email"),e,o),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"other_email",width:300}),this.addEditFieldToColumn(t.i18n._("Send Report to Other Email"),e,o)}searchDone(){t("window").trigger("resize"),this.sub_view_mode&&TTPromise.resolve("initSubReportScheduleView","init"),super.searchDone()}}m.loadSubView=function(r,i,a){Global.loadViewSource("ReportSchedule","SubReportScheduleView.html",function(l){var o={},e=_.template(l);Global.isSet(i)&&i(),Global.isSet(r)&&(r.html(e(o)),Global.isSet(a)&&TTPromise.wait("BaseViewController","initialize",function(){a(sub_report_schedule_view_controller)}))})};export{m as ReportScheduleViewController};
//# sourceMappingURL=ReportScheduleViewController-CaZaGaZv.bundle.js.map
