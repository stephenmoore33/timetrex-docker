{"version":3,"file":"ADropDown-CVN1D3YO.bundle.js","sources":["../../global/widgets/awesomebox/ADropDown.js"],"sourcesContent":["( function( $ ) {\n\n\t$.fn.ADropDown = function( options ) {\n\t\tvar opts = $.extend( {}, $.fn.ADropDown.defaults, options );\n\n\t\tvar unselect_grid = null;\n\n\t\tvar select_grid = null;\n\n\t\tvar total_display_span = null;\n\n\t\tvar static_source_data = null; //Always use this to help to set Select data\n\n\t\tvar id = null;\n\n\t\tvar key = 'id';\n\n\t\tvar parent_a_combo_box = null;\n\n\t\tvar a_dropdown_this = this;\n\n\t\tvar unselect_grid_header_array = [];\n\n\t\tvar select_grid_header_array = [];\n\n\t\tvar show_search_inputs = true;\n\n\t\tvar local_search_mode = false;\n\n\t\tvar local_search_optional_filter = [];\n\n\t\tvar unselect_grid_search_map = null;\n\n\t\tvar select_grid_search_map = null;\n\n\t\tvar unselect_grid_sort_map = null;\n\n\t\tvar select_grid_sort_map = null;\n\n\t\tvar select_item = null;\n\n\t\tvar tree_mode = false;\n\n\t\tvar on_tree_grid_row_select = false; //#2566 - added select row callback so that trees can be used for edit-view navigation\n\n\t\tvar unselect_grid_last_row = '';\n\n\t\tvar select_grid_last_row = '';\n\n\t\tvar allow_multiple_selection = true;\n\n\t\tvar allow_drag_to_order = false;\n\n\t\tvar pager_data = null;\n\n\t\tvar paging_widget = null;\n\n\t\tvar real_selected_items = null; //Set this after search in select grid;\n\n\t\tvar start;\n\n\t\tvar last;\n\n\t\tvar next;\n\n\t\tvar end;\n\n\t\tvar paging_selector;\n\n\t\tvar left_buttons_div;\n\n\t\tvar right_buttons_div;\n\n\t\tvar left_buttons_enable;\n\n\t\tvar right_buttons_enable;\n\n\t\tvar field;\n\n\t\tvar error_tip_box;\n\n\t\tvar error_string = '';\n\n\t\tvar default_height = 150;\n\n\t\tvar unselect_grid_no_result_box = null;\n\n\t\tvar select_grid_no_result_box = null;\n\n\t\tvar box_width;\n\n\t\tvar focus_in_select_grid = false;\n\n\t\tvar auto_sort = false;\n\n\t\tvar isChanged = false;\n\n\t\tvar api = null; //Pass from owner\n\n\t\tvar column_editor = null;\n\n\t\tvar column_option_key = null;\n\n\t\tvar display_column_settings = true;\n\n\t\tvar quick_search_timer;\n\n\t\tvar quick_search_typed_keys = '';\n\n\t\tvar quick_search_dic = {};\n\n\t\tvar max_height = false;\n\t\tvar static_height = false;\n\n\t\tvar resize_grids = false;\n\n\t\t//Select all records in target grid\n\t\tvar selectAllInGrid = function( target, deSelect ) {\n\t\t\ttarget.resetSelection();\n\t\t\tif ( !deSelect ) {\n\t\t\t\tvar source_data = target.getGridParam( 'data' );\n\t\t\t\tvar len = source_data.length;\n\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\tvar item = source_data[i];\n\t\t\t\t\tif ( item.hidden ) {\n                        continue;\n                    }\n\t\t\t\t\tif ( Global.isSet( item.id ) ) {\n\t\t\t\t\t\ttarget.grid.jqGrid( 'setSelection', item.id, false );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget.grid.jqGrid( 'setSelection', i + 1, false );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttarget.grid.parents( '.cbox-header' ).prop( 'checked', true );\n\t\t\t}\n\t\t};\n\n\t\tGlobal.addCss( 'global/widgets/awesomebox/ADropDown.css' );\n\n\t\tthis.isLocalSearchMode = function() {\n            return local_search_mode;\n        };\n\n\t\tthis.setLocalSearchMode = function( value ) {\n            local_search_mode = value;\n        };\n\n\t\tthis.isChanged = function() {\n\t\t\treturn isChanged;\n\t\t};\n\n\t\tthis.setIsChanged = function( val ) {\n\t\t\tisChanged = val;\n\t\t};\n\n\t\tthis.unSelectAll = function( target ) {\n\t\t\tselectAllInGrid( target, true );\n\t\t};\n\n\t\tthis.getFocusInSeletGrid = function() {\n\t\t\treturn focus_in_select_grid;\n\t\t};\n\n\t\tthis.selectAll = function() {\n\n\t\t\tif ( focus_in_select_grid ) {\n\t\t\t\tselectAllInGrid( select_grid );\n\t\t\t} else {\n\t\t\t\tselectAllInGrid( unselect_grid );\n\t\t\t}\n\n\t\t};\n\n\t\tthis.gridScrollTop = function() {\n\n\t\t\tunselect_grid.grid.parent().parent().scrollTop( 0 );\n\t\t};\n\n\t\tthis.gridScrollDown = function() {\n\n\t\t\tunselect_grid.grid.parent().parent().scrollTop( 10000 );\n\t\t};\n\n\t\tthis.getBoxWidth = function() {\n\t\t\treturn box_width;\n\t\t};\n\n\t\tthis.setErrorStyle = function( errStr, show, isWarning ) {\n\t\t\tif ( isWarning ) {\n\t\t\t\t$( this ).addClass( 'warning-tip' );\n\t\t\t} else {\n\t\t\t\t$( this ).addClass( 'error-tip' );\n\t\t\t}\n\t\t\terror_string = errStr;\n\n\t\t\tif ( show ) {\n\t\t\t\tthis.showErrorTip();\n\t\t\t}\n\t\t};\n\n\t\tthis.showErrorTip = function( sec ) {\n\n\t\t\tif ( !Global.isSet( sec ) ) {\n\t\t\t\tsec = 2;\n\t\t\t}\n\n\t\t\tif ( !error_tip_box ) {\n\t\t\t\terror_tip_box = Global.loadWidgetByName( WidgetNamesDic.ERROR_TOOLTIP );\n\t\t\t\terror_tip_box = error_tip_box.ErrorTipBox();\n\t\t\t}\n\t\t\tif ( $( this ).hasClass( 'warning-tip' ) ) {\n\t\t\t\terror_tip_box.show( this, error_string, sec, true );\n\t\t\t} else {\n\t\t\t\terror_tip_box.show( this, error_string, sec );\n\t\t\t}\n\t\t};\n\n\t\tthis.hideErrorTip = function() {\n\n\t\t\tif ( Global.isSet( error_tip_box ) ) {\n\t\t\t\terror_tip_box.remove();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.clearErrorStyle = function() {\n\t\t\t$( this ).removeClass( 'error-tip' );\n\t\t\t$( this ).removeClass( 'warning-tip' );\n\t\t\tthis.hideErrorTip();\n\t\t\terror_string = '';\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\t// Must call after setUnSelectGridData\n\t\tthis.setValue = function( val ) {\n\t\t\tthis.setSelectGridData( val );\n\t\t};\n\n\t\tthis.getValue = function() {\n\t\t\treturn this.getSelectItems();\n\t\t};\n\n\t\tthis.getSelectGridSortMap = function() {\n\t\t\treturn select_grid_sort_map;\n\t\t};\n\n\t\tthis.getUnSelectGridSortMap = function() {\n\t\t\treturn unselect_grid_sort_map;\n\t\t};\n\n\t\tthis.getUnSelectGridMap = function() {\n\n\t\t\tif ( !unselect_grid_search_map ) {\n\t\t\t\tunselect_grid_search_map = {};\n\t\t\t}\n\n\t\t\treturn unselect_grid_search_map;\n\t\t};\n\n\t\tthis.getUnSelectGrid = function() {\n\t\t\treturn unselect_grid;\n\t\t};\n\n\t\tthis.getSelectGrid = function() {\n\t\t\treturn select_grid;\n\t\t};\n\n\t\tthis.getSelectGridMap = function() {\n\n\t\t\tif ( !select_grid_search_map ) {\n\t\t\t\tselect_grid_search_map = {};\n\t\t\t}\n\n\t\t\tvar ids = [];\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tvar select_items = a_dropdown_this.getSelectItems();\n\t\t\t\tfor ( var i = 0; i < select_items.length; i++ ) {\n\t\t\t\t\tids.push( select_items[i][key] );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ids.length > 0 ) {\n\t\t\t\tselect_grid_search_map.id = ids;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn select_grid_search_map;\n\t\t};\n\n\t\tthis.collectUnselectGridColumns = function() {\n\t\t\tvar columns = unselect_grid.getGridParam( 'colModel' );\n\n\t\t\tvar len = ( ( columns ) ? columns.length : 0 );\n\n\t\t\tunselect_grid_header_array = [];\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar column_info = columns[i];\n\n\t\t\t\t//Issue #3331 - Tree mode dropdowns would show an extra search input for the id column.\n\t\t\t\t//Do not show hidden columns in the search inputs such as the id column.\n\t\t\t\tif ( tree_mode && column_info.hidden === true ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar column_header = $( this ).find( 'div #jqgh_unselect_grid_' + id + '_' + column_info.name );\n\n\t\t\t\tunselect_grid_header_array.push( column_header.TGridHeader( { column_model: column_info } ) );\n\n\t\t\t\tcolumn_header.bind( 'headerClick', onUnSelectColumnHeaderClick );\n\t\t\t}\n\n\t\t\ta_dropdown_this.setGridHeaderStyle( 'unselect_grid' );\n\n\t\t\tfunction onUnSelectColumnHeaderClick( e, headerE, column_model ) {\n\n\t\t\t\t//Error: Uncaught TypeError: Cannot read property 'setCachedSortFilter' of null in /interface/html5/global/widgets/awesomebox/ADropDown.js?v=7.4.6-20141027-072624 line 286\n\t\t\t\tif ( !parent_a_combo_box || !parent_a_combo_box.getAPI() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar field = column_model.name;\n\n\t\t\t\tif ( field === 'cb' ) { //first column, check box column.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( headerE.metaKey || headerE.ctrlKey ) {\n\t\t\t\t\ta_dropdown_this.buildSortCondition( false, field, 'unselect_grid' );\n\t\t\t\t} else {\n\t\t\t\t\ta_dropdown_this.buildSortCondition( true, field, 'unselect_grid' );\n\n\t\t\t\t}\n\n\t\t\t\tparent_a_combo_box.setCachedSortFilter( unselect_grid_sort_map );\n\t\t\t\ta_dropdown_this.setGridHeaderStyle( 'unselect_grid' );\n\t\t\t\tparent_a_combo_box.onADropDownSearch( 'unselect_grid' );\n\n\t\t\t}\n\t\t};\n\n\t\tthis.buildSortCondition = function( reset, field, targetName ) {\n\n\t\t\tvar sort_map = null;\n\t\t\tvar nextSort = 'desc';\n\n\t\t\tif ( targetName === 'unselect_grid' ) {\n\t\t\t\tsort_map = unselect_grid_sort_map;\n\t\t\t} else {\n\t\t\t\tsort_map = select_grid_sort_map;\n\t\t\t}\n\n\t\t\tif ( reset ) {\n\n\t\t\t\tif ( sort_map && sort_map.length > 0 ) {\n\t\t\t\t\tvar len = sort_map.length;\n\t\t\t\t\tvar found = false;\n\t\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\t\tvar sortItem = sort_map[i];\n\t\t\t\t\t\tfor ( var key in sortItem ) {\n\t\t\t\t\t\t\tif ( key === field ) {\n\t\t\t\t\t\t\t\tif ( sortItem[key] === 'asc' ) {\n\t\t\t\t\t\t\t\t\tnextSort = 'desc';\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnextSort = 'asc';\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( found ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tsort_map = [\n\t\t\t\t\t{}\n\t\t\t\t];\n\t\t\t\tsort_map[0][field] = nextSort;\n\n\t\t\t} else {\n\t\t\t\tif ( !sort_map ) {\n\t\t\t\t\tsort_map = [\n\t\t\t\t\t\t{}\n\t\t\t\t\t];\n\t\t\t\t\tsort_map[0][field] = 'desc';\n\t\t\t\t} else {\n\t\t\t\t\tlen = sort_map.length;\n\t\t\t\t\tfound = false;\n\t\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\t\tsortItem = sort_map[i];\n\t\t\t\t\t\tfor ( var key in sortItem ) {\n\t\t\t\t\t\t\tif ( key === field ) {\n\t\t\t\t\t\t\t\tif ( sortItem[key] === 'asc' ) {\n\t\t\t\t\t\t\t\t\tsortItem[key] = 'desc';\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsortItem[key] = 'asc';\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( found ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !found ) {\n\t\t\t\t\t\tsort_map.push( {} );\n\t\t\t\t\t\tsort_map[len][field] = 'desc';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( targetName === 'unselect_grid' ) {\n\t\t\t\tunselect_grid_sort_map = sort_map;\n\t\t\t} else {\n\t\t\t\tselect_grid_sort_map = sort_map;\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setGridHeaderStyle = function( targetName ) {\n\n\t\t\tvar headerArray = [];\n\t\t\tvar sort_map = [];\n\n\t\t\tif ( targetName === 'unselect_grid' ) {\n\t\t\t\theaderArray = unselect_grid_header_array;\n\t\t\t\tsort_map = unselect_grid_sort_map;\n\t\t\t} else {\n\t\t\t\theaderArray = select_grid_header_array;\n\t\t\t\tsort_map = select_grid_sort_map;\n\t\t\t}\n\n\t\t\tvar len = headerArray.length;\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar tGridHeader = headerArray[i];\n\t\t\t\tvar field = tGridHeader.getColumnModel()?.name;\n\n\t\t\t\ttGridHeader.cleanSortStyle();\n\n\t\t\t\tif ( sort_map ) {\n\t\t\t\t\tvar sortArrayLen = sort_map.length;\n\n\t\t\t\t\tfor ( var j = 0; j < sortArrayLen; j++ ) {\n\t\t\t\t\t\tvar sortItem = sort_map[j];\n\t\t\t\t\t\tvar sortField = Global.getFirstKeyFromObject( sortItem );\n\t\t\t\t\t\tif ( sortField === field ) {\n\n\t\t\t\t\t\t\tif ( sortArrayLen > 1 ) {\n\t\t\t\t\t\t\t\ttGridHeader.setSortStyle( sortItem[sortField], j + 1 );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttGridHeader.setSortStyle( sortItem[sortField], 0 );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.collectSelectGridColumns = function() {\n\t\t\tvar columns = select_grid.getGridParam( 'colModel' );\n\n\t\t\tvar len = ( ( columns ) ? columns.length : 0 );\n\n\t\t\tselect_grid_header_array = [];\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar column_info = columns[i];\n\t\t\t\tvar column_header = $( this ).find( 'div #jqgh_select_grid_' + id + '_' + column_info.name );\n\n\t\t\t\tselect_grid_header_array.push( column_header.TGridHeader( { column_model: column_info } ) );\n\n\t\t\t\tcolumn_header.bind( 'headerClick', onSelectColumnHeaderClick );\n\n\t\t\t}\n\t\t\ta_dropdown_this.setGridHeaderStyle( 'select_grid' );\n\n\t\t\tfunction onSelectColumnHeaderClick( e, headerE, column_model ) {\n\n\t\t\t\tif ( !parent_a_combo_box || !parent_a_combo_box.getAPI() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar field = column_model.name;\n\n\t\t\t\tif ( field === 'cb' ) { //first column, check box column.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( headerE.metaKey || headerE.ctrlKey ) {\n\t\t\t\t\ta_dropdown_this.buildSortCondition( false, field, 'select_grid' );\n\t\t\t\t} else {\n\t\t\t\t\ta_dropdown_this.buildSortCondition( true, field, 'select_grid' );\n\n\t\t\t\t}\n\t\t\t\tparent_a_combo_box.setCachedSelectedGridSortFilter( select_grid_sort_map );\n\t\t\t\ta_dropdown_this.setGridHeaderStyle( 'select_grid' );\n\t\t\t\tparent_a_combo_box.onADropDownSearch( 'select_grid' );\n\n\t\t\t}\n\n\t\t};\n\n\t\t//HightLight select item in UnSelect grid when !allow_multiple_selection\n\t\tthis.setSelectItem = function( val, target_grid ) {\n\t\t\tif ( !target_grid ) {\n\t\t\t\ttarget_grid = unselect_grid;\n\t\t\t}\n\t\t\tvar source_data = target_grid.getGridParam( 'data' );\n\t\t\tval && ( select_item = val );\n\t\t\tif ( source_data && source_data.length > 0 ) {\n\t\t\t\tfor ( var i = 0; i < source_data.length; i++ ) {\n\t\t\t\t\tvar content = source_data[i];\n\t\t\t\t\tvar temp_val = val;\n\t\t\t\t\t!val && ( temp_val = source_data[0] );\n\n\t\t\t\t\tvar content_key = key;\n\t\t\t\t\tif ( tree_mode && key == 'id' ) {\n\t\t\t\t\t\tcontent_key = '_id_';\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( content[content_key] == temp_val[key] ) {  //Some times 0, sometimes '0'\n\n\t\t\t\t\t\tvar content_id_key = 'id';\n\t\t\t\t\t\tif ( tree_mode ) {\n\t\t\t\t\t\t\tcontent_id_key = '_id_';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//Always use id to set select row, all record array should have id\n\t\t\t\t\t\ttarget_grid.grid.find( 'tr[id=\"' + content[content_id_key] + '\"]' ).focus();\n\t\t\t\t\t\tif ( target_grid.grid.hasClass( 'unselect-grid' ) ) {\n\t\t\t\t\t\t\tif ( unselect_grid_last_row ) {\n\t\t\t\t\t\t\t\ttarget_grid.grid.jqGrid( 'saveRow', unselect_grid_last_row );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tunselect_grid_last_row = content[content_id_key];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif ( select_grid_last_row ) {\n\t\t\t\t\t\t\t\ttarget_grid.grid.jqGrid( 'saveRow', select_grid_last_row );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tselect_grid_last_row = content[content_id_key];\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget_grid.grid.jqGrid( 'setSelection', content[content_id_key], false );\n\t\t\t\t\t\ttarget_grid.grid.jqGrid( 'editRow', content[content_id_key], true );\n\t\t\t\t\t\tval && ( select_item = content );\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.setTotalDisplaySpan();\n\t\t\t}\n\t\t};\n\n\t\tthis.getUnSelectGridData = function() {\n\t\t\treturn unselect_grid.getGridParam( 'data' );\n\t\t};\n\n\t\tthis.getSelectItem = function() {\n\t\t\treturn select_item;\n\t\t};\n\n\t\tthis.getSelectItems = function() {\n\t\t\t//Save last edit row if there is editable row in grid cell;\n\t\t\tif ( unselect_grid_last_row.length > 0 ) {\n\t\t\t\tunselect_grid.grid.jqGrid( 'saveRow', unselect_grid_last_row );\n\t\t\t\tunselect_grid_last_row = '';\n\t\t\t}\n\n\t\t\tif ( select_grid_last_row.length > 0 ) {\n\t\t\t\tselect_grid.grid.jqGrid( 'saveRow', select_grid_last_row );\n\t\t\t\tselect_grid_last_row = '';\n\t\t\t}\n\n\t\t\tvar retval = null;\n\t\t\tif ( show_search_inputs && real_selected_items && real_selected_items.length > 0 ) {\n\t\t\t\tretval = real_selected_items;\n\t\t\t} else {\n\t\t\t\tretval = select_grid.getGridParam( 'data' ); //Set this when setSelectGridItems\n\t\t\t}\n\n\t\t\t//Make sure we never return null, and always at least an empty array. This helps prevent JS excptions when we run .length on the return value.\n\t\t\tif ( Global.isArray( retval ) == false ) {\n\t\t\t\treturn Array();\n\t\t\t}\n\n\t\t\treturn retval;\n\t\t};\n\n\t\tthis.setRealSelectItems = function( all_records, selected_ids ) {\n\t\t\treal_selected_items = [];\n\t\t\tif ( selected_ids != TTUUID.zero_id && selected_ids.length > 0 ) {\n\t\t\t\tfor ( var n = 0; n < all_records.length; n++ ) {\n\t\t\t\t\tif ( selected_ids.indexOf( all_records[n].id ) != -1 ) {\n\t\t\t\t\t\treal_selected_items.push( all_records[n] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn real_selected_items;\n\t\t};\n\n\t\tthis.getAllowMultipleSelection = function() {\n\t\t\treturn allow_multiple_selection;\n\t\t};\n\n\t\tthis.getResizeGrids = function() {\n\t\t\treturn resize_grids;\n\t\t};\n\n\t\tthis.setResizeGrids = function( val ) {\n\t\t\tresize_grids = val;\n\t\t\tif ( val ) {\n\t\t\t\tthis.setGridColumnsWidths();\n\t\t\t}\n\t\t};\n\n\t\tthis.getTreeMode = function() {\n\t\t\treturn tree_mode;\n\t\t};\n\n\t\t//Must Set this after set Columns\n\t\tthis.setUnselectedGridData = function( val ) {\n\t\t\tstatic_source_data = val;\n\n\t\t\tif ( !tree_mode ) {\n\t\t\t\tunselect_grid.setData( val );\n\n\t\t\t\tthis.setTotalDisplaySpan();\n\n\t\t\t} else {\n\t\t\t\tthis.reSetUnSelectGridTreeData( val );\n\n\t\t\t}\n\n\t\t\tthis.setUnSelectGridDragAble();\n\n\t\t\tthis.setGridsHeight();\n\t\t};\n\n\t\t/**\n\t\t * This function calculates the optimal widths for awesomebox columns\n\t\t * and whether they should overflow or shrink to fit\n\t\t */\n\t\tthis.setGridColumnsWidths = function() {\n\t\t\tvar primary_grid = unselect_grid;\n\t\t\tvar secondary_grid = select_grid;\n\n\t\t\t//don't swap the grids. always size on left grid.\n\t\t\tvar p_data = primary_grid.getData();\n\t\t\tvar s_data = secondary_grid.getData();\n\t\t\tif ( s_data && s_data.length != 0 && p_data && p_data.length == 0 ) {\n\t\t\t\t//swap grids if no data in primary.\n\t\t\t\tvar temp = primary_grid;\n\t\t\t\tprimary_grid = secondary_grid;\n\t\t\t\tsecondary_grid = temp;\n\t\t\t}\n\n\t\t\tvar offset;\n\t\t\tif ( tree_mode ) {\n\t\t\t\toffset = 26;\n\t\t\t} else {\n\t\t\t\toffset = 22;\n\t\t\t}\n\n\t\t\t//Make sure what dropdown is expanded, we do not spill over the right edge of the browser causing scrollbars to appear.\n\t\t\tvar min_grid_width = ( primary_grid.grid.parents( '.unselect-grid-div, .select-grid-div' ).width() - offset );\n\t\t\tvar max_grid_width = ( Global.bodyWidth() - 100 ); //document.querySelector( '.layout-content' ).offsetWidth\n\t\t\tif ( this.getAllowMultipleSelection() == true ) {\n\t\t\t\tmax_grid_width = ( max_grid_width / 2 ); //Needs to show two grids, unselected and selected, so reduce max size by half.\n\t\t\t}\n\n\t\t\t//Resize each grid separately in the case where unselected items might have no data in one column, but selected items have a lot of data in that column.\n\t\t\tvar primary_grid_width = primary_grid.setGridColumnsWidth( null, { min_grid_width: min_grid_width, max_grid_width: max_grid_width } );\n\t\t\tprimary_grid.setGridWidth( primary_grid_width );\n\n\t\t\tvar secondary_grid_width = secondary_grid.setGridColumnsWidth( null, { min_grid_width: min_grid_width, max_grid_width: max_grid_width } );\n\t\t\tsecondary_grid.setGridWidth( secondary_grid_width );\n\n\t\t\tthis.resizeUnSelectSearchInputs();\n\t\t\tthis.resizeSelectSearchInputs();\n\t\t};\n\n\t\tthis.getPagerData = function() {\n\t\t\treturn pager_data;\n\t\t};\n\n\t\t//Always setPager data no matter static options or api.\n\t\tthis.setPagerData = function( value ) {\n\n\t\t\tpager_data = value;\n\n\t\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\t\tif ( paging_widget.parent().length > 0 ) {\n\t\t\t\t\tpaging_widget.remove();\n\t\t\t\t}\n\n\t\t\t\tpaging_widget.css( 'width', unselect_grid.width() );\n\t\t\t\tunselect_grid.append( paging_widget );\n\n\t\t\t\tpaging_widget.click( function() {\n\t\t\t\t\t$this.onPaging();\n\t\t\t\t} );\n\n\t\t\t\tif ( !pager_data || pager_data.is_last_page || pager_data.last_page_number < 0 ) {\n\t\t\t\t\tpaging_widget.css( 'display', 'none' );\n\t\t\t\t} else {\n\t\t\t\t\tpaging_widget.css( 'display', 'inline-block' );\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( !pager_data || pager_data.last_page_number < 0 ) {\n\t\t\t\t\tleft_buttons_div.css( 'display', 'none' );\n\t\t\t\t\tright_buttons_div.css( 'display', 'none' );\n\n\t\t\t\t} else {\n\t\t\t\t\tleft_buttons_div.css( 'display', 'inline-block' );\n\t\t\t\t\tright_buttons_div.css( 'display', 'inline-block' );\n\n\t\t\t\t\tif ( pager_data.is_last_page === true ) {\n\t\t\t\t\t\tright_buttons_div.addClass( 'disabled' );\n\t\t\t\t\t\tright_buttons_div.addClass( 'disabled-image' );\n\t\t\t\t\t\tright_buttons_enable = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tright_buttons_div.removeClass( 'disabled' );\n\t\t\t\t\t\tright_buttons_div.removeClass( 'disabled-image' );\n\t\t\t\t\t\tright_buttons_enable = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( pager_data.is_first_page ) {\n\t\t\t\t\t\tleft_buttons_div.addClass( 'disabled' );\n\t\t\t\t\t\tleft_buttons_div.addClass( 'disabled-image' );\n\t\t\t\t\t\tleft_buttons_enable = false;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tleft_buttons_div.removeClass( 'disabled' );\n\t\t\t\t\t\tleft_buttons_div.removeClass( 'disabled-image' );\n\t\t\t\t\t\tleft_buttons_enable = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ta_dropdown_this.setTotalDisplaySpan();\n\t\t};\n\n\t\tthis.onPaging = function() {\n\t\t\tparent_a_combo_box.onADropDownSearch( 'unselect_grid', 'next' );\n\t\t};\n\n\t\tthis.reSetUnSelectGridTreeData = function( val ) {\n\t\t\tvar scroll_position = unselect_grid.grid.parent().parent().scrollTop();\n\t\t\tvar grid_data = unselect_grid.getData();\n\t\t\tif ( grid_data && grid_data.length > 0 && val && val.length > 0 ) {\n\t\t\t\t//If in tree_mode, don't clear the unselected grid, since we just bold/unbold the selected items otherwise the \"tree\" layout would be lost.\n\t\t\t\tunselect_grid.setData( val, !tree_mode );\n\t\t\t} else {\n\t\t\t\tvar col_model = unselect_grid.getGridParam( 'colModel' );\n\n\t\t\t\tif ( !unselect_grid.grid.is( ':visible' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tunselect_grid.grid.jqGrid( 'GridUnload' );\n\t\t\t\tunselect_grid = $( this ).find( '.unselect-grid' );\n\t\t\t\tunselect_grid = unselect_grid.grid = new TTGrid( $( this ).find( '.unselect-grid' ).attr( 'id' ), {\n\t\t\t\t\tcontainer_selector: '.unselect-grid-div',\n\t\t\t\t\taltRows: true,\n\t\t\t\t\tdatastr: val,\n\t\t\t\t\tdatatype: 'jsonstring',\n\t\t\t\t\tsortable: false,\n\t\t\t\t\twidth: 440,\n\t\t\t\t\tonResizeGrid: resize_grids,\n\t\t\t\t\t//maxHeight: default_height,\n\t\t\t\t\tcolNames: [],\n\t\t\t\t\trowNum: 10000,\n\t\t\t\t\tcolModel: col_model,\n\t\t\t\t\tondblClickRow: a_dropdown_this.onUnSelectGridDoubleClick,\n\t\t\t\t\tgridview: true,\n\t\t\t\t\ttreeGrid: true,\n\t\t\t\t\ttreeGridModel: 'adjacency',\n\t\t\t\t\ttreedatatype: 'local',\n\t\t\t\t\tExpandColumn: 'name',\n\t\t\t\t\tmultiselect: allow_multiple_selection,\n\t\t\t\t\tmultiselectPosition: 'none',\n\t\t\t\t\twinMultiSelect: allow_multiple_selection,\n\t\t\t\t\tonCellSelect: function( id, k, el, e ) {\n\t\t\t\t\t\tif ( $( e.target ).prop( 'class' ).indexOf( 'ui-icon-triangle' ) != -1 ) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tid = Global.convertToNumberIfPossible( id );\n\n\t\t\t\t\t\tif ( !allow_multiple_selection ) {\n\t\t\t\t\t\t\tvar source_data = unselect_grid.getGridParam( 'data' );\n\t\t\t\t\t\t\t$.each( source_data, function( index, content ) {\n\t\t\t\t\t\t\t\tif ( tree_mode && key == 'id' ) {\n\t\t\t\t\t\t\t\t\tkey = '_id_';\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( content[key] == id ) {\n\t\t\t\t\t\t\t\t\tselect_item = content;\n\t\t\t\t\t\t\t\t\tisChanged = true;\n\t\t\t\t\t\t\t\t\tif ( !LocalCacheData.currently_collapsing_navigation_tree_element ) { //#2583 - must allow null or false\n\t\t\t\t\t\t\t\t\t\ta_dropdown_this.trigger( 'close', [a_dropdown_this] );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( on_tree_grid_row_select ) {\n\t\t\t\t\t\t\ton_tree_grid_row_select( id, LocalCacheData.currently_collapsing_navigation_tree_element );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tbeforeSelectRow: function( iRow, e ) {\n\t\t\t\t\t\tvar $td = $( e.target ).closest( 'tr.jqgrow>td' ),\n\t\t\t\t\t\t\tiCol = $td.length > 0 ? $td[0].cellIndex : -1,\n\t\t\t\t\t\t\tp = $( this ).jqGrid( 'getGridParam' ),\n\t\t\t\t\t\t\tcm = iCol >= 0 ? p.colModel[iCol] : null;\n\n\t\t\t\t\t\tif ( cm != null && cm.name === p.ExpandColumn &&\n\t\t\t\t\t\t\t$( e.target ).closest( '.tree-wrap' ).length > 0 ) {\n\n\t\t\t\t\t\t\treturn false; // prevent row selection\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t\tjsonReader: {\n\t\t\t\t\t\trepeatitems: false,\n\t\t\t\t\t\troot: function( obj ) {\n\t\t\t\t\t\t\treturn obj;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpage: function( obj ) {\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttotal: function( obj ) {\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\trecords: function( obj ) {\n\t\t\t\t\t\t\treturn obj.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonResizeGrid: resize_grids\n\t\t\t\t}, col_model );\n\t\t\t}\n\t\t\tscroll_position > 0 && unselect_grid.grid.parent().parent().scrollTop( scroll_position );\n\t\t\tthis.setGridsHeight();\n\n\t\t\tvar select_items = this.getSelectItems();\n\t\t\t$( this ).find( 'tr' ).removeClass( 'selected-tree-cell' );\n\t\t\tfor ( var i = ( select_items.length - 1 ); i >= 0; i-- ) {\n\t\t\t\t$( this ).find( '.unselect-grid-div' ).find( 'tr#' + select_items[i].id ).addClass( 'selected-tree-cell' );\n\t\t\t}\n\t\t};\n\n\t\tthis.setGridsHeight = function() {\n\t\t\t//Calculate the max possible size of awesomebox.\n\n\t\t\tif ( static_height ) {\n\t\t\t\tunselect_grid.grid.setGridHeight( static_height );\n\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\tselect_grid.grid.setGridHeight( static_height );\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( !parent_a_combo_box ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar top_offset = parent_a_combo_box.offset().top;\n\t\t\tvar bottom_offset = Global.bodyHeight() - top_offset - 30;\n\t\t\tvar new_height = top_offset > bottom_offset ? top_offset : bottom_offset;\n\n\t\t\tnew_height = new_height - 130;\n\n\t\t\tvar source_data = parent_a_combo_box.getStaticSourceData();\n\n\t\t\tif ( !source_data ) {\n\t\t\t\tnew_height = default_height;\n\t\t\t} else {\n\t\t\t\tvar source_height = source_data.length * 23;\n\n\t\t\t\tif ( source_height < default_height ) {\n\t\t\t\t\tnew_height = default_height;\n\t\t\t\t} else if ( source_height > default_height && source_height < new_height ) {\n\t\t\t\t\tnew_height = source_height;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( max_height && max_height < new_height ) {\n\t\t\t\tnew_height = max_height;\n\t\t\t}\n\n\t\t\tunselect_grid.grid.setGridHeight( new_height );\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tselect_grid.grid.setGridHeight( new_height );\n\t\t\t}\n\n\t\t\tthis.setPosition( top_offset, new_height );\n\n\t\t};\n\n\t\tthis.setPosition = function( top_offset, new_height ) {\n\n\t\t\tif ( top_offset + new_height + 130 < Global.bodyHeight() ) {\n\t\t\t\ta_dropdown_this.parent().css( 'top', top_offset + 25 );\n\t\t\t} else {\n\n\t\t\t\tif ( new_height != default_height ) {\n\t\t\t\t\ta_dropdown_this.parent().css( 'top', ( top_offset - new_height - 125 ) );\n\t\t\t\t} else {\n\t\t\t\t\ta_dropdown_this.parent().css( 'top', ( top_offset - new_height - 125 ) );\n\t\t\t\t}\n\n\t\t\t}\n\t\t};\n\n\t\tthis.onTreeCellFormat = function( cell_value, related_data, row ) {\n\t\t\tvar selected_items = a_dropdown_this.getSelectItems();\n\t\t\tfor ( var i = 0, m = selected_items.length; i < m; i++ ) {\n\t\t\t\tvar item = selected_items[i];\n\t\t\t\tif ( item.name === cell_value ) {\n\t\t\t\t\treturn '<span class=\"selected-tree-cell\">' + cell_value + '</span>';\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn cell_value;\n\t\t};\n\n\t\t//Do this before set data\n\t\tthis.setColumns = function( val ) {\n\n\t\t\tfor ( var a = 0; a < val.length; a++ ) {\n\t\t\t\tval[a].resizable = false;\n\t\t\t}\n\n\t\t\tunselect_grid.grid.jqGrid( 'GridUnload' );\n\t\t\tunselect_grid = $( this ).find( '.unselect-grid' );\n\t\t\tunselect_grid.getGridParam();\n\t\t\tvar unselect_grid_search_div = $( this ).find( '.unselect-grid-search-div' );\n\t\t\tvar select_grid_search_div = $( this ).find( '.select-grid-search-div' );\n\n\t\t\tvar grid_width = ( $( '.unselect-grid-border-div' ).width() - 2 ); // single-column width\n\t\t\tif ( show_search_inputs ) {\n\t\t\t\tgrid_width -= 15;\n\t\t\t}\n\n\t\t\tgrid_width = ( val.length * 125 );\n\t\t\tif ( grid_width < 438 ) {\n\t\t\t\tbox_width = grid_width = 438;\n\t\t\t}\n\t\t\tif ( val.length > 1 ) {\n\t\t\t\tbox_width = grid_width;\n\t\t\t\tif ( allow_multiple_selection && grid_width > ( ( Global.bodyWidth() / 2 ) - 30 - 15 ) ) {\n\t\t\t\t\tbox_width = ( ( Global.bodyWidth() / 2 ) - 30 - 15 );\n\t\t\t\t} else if ( !allow_multiple_selection && grid_width > ( Global.bodyWidth() - 30 - 15 ) ) {\n\t\t\t\t\tbox_width = ( Global.bodyWidth() - 30 - 15 );\n\t\t\t\t}\n\n\t\t\t\tthis.find( '.unselect-grid-div' ).width( null );\n\t\t\t\tthis.find( '.unselect-grid-border-div' ).width( null );\n\n\t\t\t\tthis.find( '.select-grid-div' ).width( null );\n\t\t\t\tthis.find( '.select-grid-border-div' ).width( null );\n\n\t\t\t\tif ( show_search_inputs ) {\n\t\t\t\t\tunselect_grid_search_div.css( 'width', null );\n\t\t\t\t\tselect_grid_search_div.css( 'width', null );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbox_width = grid_width;\n\t\t\t}\n\n\t\t\tif ( !tree_mode ) {\n\t\t\t\tunselect_grid = new TTGrid( $( unselect_grid ).attr( 'id' ), {\n\t\t\t\t\tcontainer_selector: '.unselect-grid-div',\n\t\t\t\t\taltRows: true,\n\t\t\t\t\tdata: [],\n\t\t\t\t\tdatatype: 'local',\n\t\t\t\t\tsortable: false,\n\t\t\t\t\twidth: grid_width,\n\t\t\t\t\t//maxHeight: default_height,\n\t\t\t\t\tcolNames: [],\n\t\t\t\t\trowNum: 10000,\n\t\t\t\t\tkeep_scroll_place: true,\n\t\t\t\t\tondblClickRow: a_dropdown_this.onUnSelectGridDoubleClick,\n\t\t\t\t\tcolModel: val,\n\t\t\t\t\tmultiselect: allow_multiple_selection,\n\t\t\t\t\tmultiboxonly: allow_multiple_selection,\n\t\t\t\t\tviewrecords: true,\n\t\t\t\t\tediturl: 'clientArray',\n\t\t\t\t\tresizeStop: function() {\n\t\t\t\t\t\ta_dropdown_this.resizeUnSelectSearchInputs();\n\t\t\t\t\t},\n\t\t\t\t\tonCellSelect: function( id ) {\n\t\t\t\t\t\tid = Global.convertToNumberIfPossible( id );\n\n\t\t\t\t\t\tif ( !allow_multiple_selection ) {\n\n\t\t\t\t\t\t\tvar source_data = unselect_grid.getGridParam( 'data' );\n\n\t\t\t\t\t\t\t$.each( source_data, function( index, content ) {\n\n\t\t\t\t\t\t\t\tif ( key !== 'id' ) {\n\t\t\t\t\t\t\t\t\tif ( content['id'] == id ) {\n\t\t\t\t\t\t\t\t\t\tselect_item = content;\n\t\t\t\t\t\t\t\t\t\tisChanged = true;\n\t\t\t\t\t\t\t\t\t\ta_dropdown_this.trigger( 'close', [a_dropdown_this] );\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif ( content[key] == id ) {\n\t\t\t\t\t\t\t\t\t\tselect_item = content;\n\t\t\t\t\t\t\t\t\t\tisChanged = true;\n\t\t\t\t\t\t\t\t\t\ta_dropdown_this.trigger( 'close', [a_dropdown_this] );\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( unselect_grid_last_row ) {\n\t\t\t\t\t\t\tunselect_grid.grid.jqGrid( 'saveRow', unselect_grid_last_row );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tunselect_grid.grid.jqGrid( 'editRow', id, true );\n\t\t\t\t\t\tunselect_grid_last_row = id;\n\n\t\t\t\t\t\ta_dropdown_this.setTotalDisplaySpan();\n\n\t\t\t\t\t\tfunction getSelectValue() {\n\t\t\t\t\t\t\tvar len = source_data.length;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonResizeGrid: resize_grids\n\t\t\t\t}, val );\n\n\t\t\t} else {\n\t\t\t\tif ( tree_mode ) {\n\t\t\t\t\tvar tree_columns = _.map( val, _.clone );\n\t\t\t\t\t_.map( tree_columns, function( item ) {\n\t\t\t\t\t\titem.formatter = a_dropdown_this.onTreeCellFormat;\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\tunselect_grid = new TTGrid( $( unselect_grid ).attr( 'id' ), {\n\t\t\t\t\tcontainer_selector: '.unselect-grid-div',\n\t\t\t\t\taltRows: true,\n\t\t\t\t\tdatastr: [],\n\t\t\t\t\tdatatype: 'jsonstring',\n\t\t\t\t\tsortable: false,\n\t\t\t\t\twidth: grid_width,\n\t\t\t\t\tmaxHeight: default_height,\n\t\t\t\t\tcolNames: [],\n\t\t\t\t\trowNum: 10000,\n\t\t\t\t\tcolModel: tree_columns,\n\t\t\t\t\tondblClickRow: a_dropdown_this.onUnSelectGridDoubleClick,\n\t\t\t\t\tonCellSelect: function() {\n\t\t\t\t\t\ta_dropdown_this.onUnSelectGridSelectRow();\n\t\t\t\t\t},\n\t\t\t\t\tgridview: true,\n\t\t\t\t\ttreeGrid: true,\n\t\t\t\t\ttreeGridModel: 'adjacency',\n\t\t\t\t\ttreedatatype: 'local',\n\t\t\t\t\tExpandColumn: 'name',\n\t\t\t\t\tmultiselect: false, //allow_multiple_selection,\n\n\t\t\t\t\tjsonReader: {\n\t\t\t\t\t\trepeatitems: false,\n\t\t\t\t\t\troot: function( obj ) {\n\t\t\t\t\t\t\treturn obj;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpage: function( obj ) {\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttotal: function( obj ) {\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\trecords: function( obj ) {\n\t\t\t\t\t\t\treturn obj.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\tonSelectRow: function( id ) {\n\t\t\t\t\t\tif ( on_tree_grid_row_select ) {\n\t\t\t\t\t\t\ton_tree_grid_row_select( id );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tid = Global.convertToNumberIfPossible( id );\n\n\t\t\t\t\t},\n\n\t\t\t\t\tonResizeGrid: resize_grids\n\t\t\t\t}, tree_columns );\n\t\t\t}\n\n\t\t\tthis.collectUnselectGridColumns(); //Make each column as THeader plugin and save them\n\n\t\t\tif ( show_search_inputs ) {\n\t\t\t\tif ( !parent_a_combo_box || !parent_a_combo_box.getAPI() ) {\n\t\t\t\t\tthis.setLocalSearchMode( true ); //If no API allow local searching of the dropdown items.\n\t\t\t\t}\n\t\t\t\tthis.buildUnSelectSearchInputs(); //Build search input above columns\n\t\t\t}\n\n\t\t\tselect_grid.grid.jqGrid( 'GridUnload' );\n\t\t\tselect_grid = $( this ).find( '.select-grid' );\n\t\t\tselect_grid = new TTGrid( $( select_grid ).attr( 'id' ), {\n\t\t\t\tcontainer_selector: '.select-grid-div',\n\t\t\t\taltRows: true,\n\t\t\t\tdata: [],\n\t\t\t\tdatatype: 'local',\n\t\t\t\tsortable: false,\n\t\t\t\twidth: grid_width,\n\t\t\t\t//maxHeight: default_height,\n\t\t\t\tcolNames: [],\n\t\t\t\trowNum: 10000,\n\t\t\t\tondblClickRow: this.onSelectGridDoubleClick,\n\t\t\t\tcolModel: val,\n\t\t\t\tmultiselect: allow_multiple_selection,\n\t\t\t\tmultiboxonly: allow_multiple_selection,\n\t\t\t\tviewrecords: true,\n\t\t\t\tkeep_scroll_place: true,\n\t\t\t\tresizeStop: function() {\n\t\t\t\t\ta_dropdown_this.resizeSelectSearchInputs();\n\t\t\t\t},\n\t\t\t\tonCellSelect: function( id ) {\n\t\t\t\t\tif ( id ) {\n\n\t\t\t\t\t\tif ( select_grid_last_row ) {\n\t\t\t\t\t\t\tselect_grid.grid.jqGrid( 'saveRow', select_grid_last_row );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tselect_grid.grid.jqGrid( 'editRow', id, true );\n\t\t\t\t\t\tselect_grid_last_row = id;\n\t\t\t\t\t}\n\n\t\t\t\t},\n\t\t\t\tonResizeGrid: resize_grids\n\t\t\t}, val );\n\n\t\t\tthis.collectSelectGridColumns(); //Make each column as THeader plugin and save them\n\t\t\tif ( show_search_inputs ) {\n\t\t\t\tif ( !parent_a_combo_box || !parent_a_combo_box.getAPI() ) {\n\t\t\t\t\tthis.setLocalSearchMode( true ); //If no API allow local searching of the dropdown items.\n\t\t\t\t}\n\t\t\t\tthis.buildSelectSearchInputs(); //Build search input above columns\n\t\t\t}\n\n\t\t};\n\n\t\tthis.buildSelectSearchInputs = function() {\n\t\t\tvar len = select_grid_header_array.length;\n\n\t\t\tvar search_div = $( this ).find( '.select-grid-search-div' );\n\t\t\tvar first_column_width = 0;\n\t\t\tvar search_input_array = [];\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar header = select_grid_header_array[i];\n\n\t\t\t\tif ( i === 0 ) {\n\t\t\t\t\tfirst_column_width = header.getWidth();\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if ( allow_multiple_selection && i === 1 ) {\n\t\t\t\t\tvar search_input = $( '<input type=\\'text\\' class=\\'search-input\\'>' );\n\t\t\t\t\tsearch_input.css( 'width', ( header.getWidth() + first_column_width ) );\n\t\t\t\t} else {\n\t\t\t\t\tsearch_input = $( '<input type=\\'text\\' class=\\'search-input\\'>' );\n\t\t\t\t\tsearch_input.css( 'width', header.getWidth() );\n\t\t\t\t}\n\n\t\t\t\tsearch_input.on( 'drop', function( e ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t} );\n\n\t\t\t\tsearch_input.ASearchInput( { column_model: header.getColumnModel() } ); //Make it as ASearchInout Widget;\n\n\t\t\t\tsearch_div.append( search_input );\n\t\t\t\tsearch_input_array.push( search_input );\n\t\t\t\t//Set cached seach_input data back, usually in navigation_mode\n\t\t\t\tif ( select_grid_search_map ) {\n\t\t\t\t\tsearch_input.setFilter( select_grid_search_map );\n\n\t\t\t\t}\n\n\t\t\t\tsearch_input.bind( 'searchEnter', function( e, searchVal, field ) {\n\n\t\t\t\t\tif ( a_dropdown_this.getValue().length < 1 ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !select_grid_search_map ) {\n\t\t\t\t\t\tselect_grid_search_map = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete select_grid_search_map.id;\n\n\t\t\t\t\tif ( !searchVal ) {\n\t\t\t\t\t\tdelete select_grid_search_map[field];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselect_grid_search_map[field] = searchVal;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( a_dropdown_this.isLocalSearchMode() ) {\n\t\t\t\t\t\ta_dropdown_this.localSearch( 'select', select_grid_search_map );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparent_a_combo_box.setCachedSelectGridSearchInputsFilter( Global.clone( select_grid_search_map ) );\n\t\t\t\t\t\tparent_a_combo_box.onADropDownSearch();\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tvar close_btn = $( '<button class=\"close-btn\"><img src=\"' + Global.getRealImagePath( 'images/close.png' ) + '\"></img></button>' );\n\n\t\t\t//close_btn.width( unselect_grid_header_array[0].getWidth() + 2 );\n\t\t\t//close_btn.width( 22 );\n\t\t\tsearch_div.prepend( close_btn );\n\t\t\tvar $this = this;\n\t\t\tclose_btn.click( function() { //clear search inputs for select box\n\t\t\t\tselect_grid_search_map = {};\n\t\t\t\tif ( a_dropdown_this.isLocalSearchMode() ) {\n\t\t\t\t\ta_dropdown_this.localSearch( 'select', select_grid_search_map );\n\t\t\t\t} else {\n\t\t\t\t\tparent_a_combo_box.setCachedSelectGridSearchInputsFilter( select_grid_search_map );\n\t\t\t\t\tparent_a_combo_box.onADropDownSearch();\n                }\n\t\t\t\tfor ( var i = 0; i < search_input_array.length; i++ ) {\n\t\t\t\t\tvar s_i = search_input_array[i];\n\t\t\t\t\ts_i.clearValue();\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\tthis.localSearch = function( grid_type, grid_search_map, optional_filter ) {\n\t\t\tif ( !optional_filter ) {\n\t\t\t\t//Replicates API Search functionality where newly added records are shown even if they don't match the search criteria.\n\t\t\t\toptional_filter = [];\n\t\t\t\tlocal_search_optional_filter = [];\n\t\t\t}\n\n\t\t\t//Merge in repeated optional search, so that user adding 1 by 1 will continue to see all new items.\n\t\t\tlocal_search_optional_filter = local_search_optional_filter.concat( optional_filter );\n\n\t\t\tlet search_grid = null;\n\t\t\tlet search_items = [];\n\n\t\t\tif ( grid_type === 'select' ) {\n\t\t\t\tsearch_grid = select_grid;\n\t\t\t} else {\n\t\t\t\tsearch_grid = unselect_grid;\n\t\t\t}\n\n\t\t\tsearch_grid.resetSelection(); //Reset all checked items to replicate behavior of API search.\n\n\t\t\tsearch_items = search_grid.getData();\n\n\t\t\t//Need to search against multiple terms and columns.\n\t\t\tlet meetAllSearchCriteria = ( item, grid_search_map ) => {\n\t\t\t\tfor ( let key in grid_search_map ) {\n\t\t\t\t\tif ( grid_search_map.hasOwnProperty( key ) ) {\n\t\t\t\t\t\tlet value = grid_search_map[key].trim();\n\t\t\t\t\t\tif ( !item[key] || wildcardSearch( item[key], value ) === false ) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\t//Allow client side wildcard searching with *.\n\t\t\t// \"john*smith\" => everything that starts with \"john\" and ends with \"smith\"\n\t\t\t// \"john*\" => everything that starts with \"john\"\n\t\t\t// \"*smith\" => everything that ends with \"smith\"\n\t\t\t// \"*john*\" => everything that has \"john\" in it\n\t\t\t// \"*john*smith*\"=> everything that has \"john\" in it, followed by anything, followed by \"smith\", followed by anything\n\t\t\tlet wildcardSearch = ( item, search_term ) => {\n\t\t\t\titem = item.toLowerCase();\n\t\t\t\tsearch_term = search_term.toLowerCase();\n\n\t\t\t\t//If search starts with single or double quotes, do exact match.\n\t\t\t\tif ( ( search_term.startsWith( '\"' ) && search_term.endsWith( '\"' ) ) || ( search_term.startsWith( \"'\" ) && search_term.endsWith( \"'\" ) ) ) {\n\t\t\t\t\tsearch_term = search_term.substring( 1, search_term.length - 1 );\n\t\t\t\t} else if ( search_term.endsWith( '*' ) === false ) {\n\t\t\t\t\tsearch_term = search_term + '*';\n\t\t\t\t}\n\n\t\t\t\tconsole.log( 'search_term', search_term );\n\n\t\t\t\tlet search_regex = ( str ) => str.replace( /([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\" );\n\n\t\t\t\treturn new RegExp( \"^\" + search_term.split( \"*\" ).map( search_regex ).join( \".*\" ) + \"$\" ).test( item );\n\t\t\t};\n\n\t\t\tfor ( let i = 0; i < search_items.length; i++ ) {\n\t\t\t\tif ( _.isEmpty( grid_search_map ) || local_search_optional_filter.some( item => item.id === search_items[i].id ) || meetAllSearchCriteria( search_items[i], grid_search_map ) ) {\n\t\t\t\t\t$( search_grid.grid ).find( '[id=\"' + search_items[i].id + '\"]' ).show();\n\t\t\t\t\tsearch_items[i].hidden = false;\n\t\t\t\t} else {\n\t\t\t\t\t$( search_grid.grid ).find( '[id=\"' + search_items[i].id + '\"]' ).hide();\n\t\t\t\t\tsearch_items[i].hidden = true; //Hidden items are not selectable even with \"Select all\"\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.resizeUnSelectSearchInputs = function() {\n\t\t\tvar search_div = $( this ).find( '.unselect-grid-search-div' );\n\n\t\t\tvar search_inputs = search_div.find( '.search-input' );\n\t\t\tvar first_column_width;\n\t\t\tvar unselect_grid_search_div = $( this ).find( '.unselect-grid-search-div' );\n\n\t\t\tvar len = search_inputs.length;\n\t\t\tvar header;\n\t\t\tvar search_input;\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tfirst_column_width = unselect_grid_header_array[0].width();\n\n\t\t\t\tif ( len == 1 ) {\n\t\t\t\t\theader = unselect_grid_header_array[1];\n\t\t\t\t\tsearch_input = $( search_inputs[0] );\n\t\t\t\t\tsearch_input.css( 'width', ( header.getWidth() + 2 ) );\n\t\t\t\t} else {\n\t\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\t\theader = unselect_grid_header_array[i + 1];\n\t\t\t\t\t\tsearch_input = $( search_inputs[i] );\n\t\t\t\t\t\tif ( i == ( len - 1 ) ) {\n\t\t\t\t\t\t\tsearch_input.css( 'width', ( header.getWidth() + 2 ) );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsearch_input.css( 'width', ( header.getWidth() + 1 ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\theader = unselect_grid_header_array[i];\n\t\t\t\t\tsearch_input = $( search_inputs[i] );\n\t\t\t\t\tif ( i === 0 ) {\n\t\t\t\t\t\tsearch_input.css( 'width', ( header.getWidth() - 20 ) );\n\t\t\t\t\t} else if ( i == ( len - 1 ) ) {\n\t\t\t\t\t\tsearch_input.css( 'width', ( header.getWidth() + 2 ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsearch_input.css( 'width', ( header.getWidth() + 1 ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar unselect_grid_width = unselect_grid.grid.parents( '.ui-jqgrid-jquery-ui' ).width() ? unselect_grid.grid.parent().parent().width() : 100;\n\t\t\tunselect_grid.setGridWidth( unselect_grid_width );\n\n\t\t\tvar unselect_grid_search_div_width = unselect_grid_width;\n\t\t\tif ( tree_mode ) {\n\t\t\t\tunselect_grid_width = unselect_grid.getWidth();\n\t\t\t}\n\n\t\t\tvar outer_box_width = unselect_grid_width + 22;\n\t\t\tvar inner_box_width = unselect_grid_width + 4;\n\t\t\tvar max_width = ( $( 'body' ).width() - 30 );\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tmax_width = ( ( $( 'body' ).width() / 2 ) - 30 );\n\t\t\t}\n\n\t\t\tif ( outer_box_width > max_width ) {\n\t\t\t\touter_box_width = max_width;\n\t\t\t\tinner_box_width = max_width - 17;\n\t\t\t}\n\n\t\t\tunselect_grid.grid.parents( '.unselect-grid-div' ).css( 'width', outer_box_width ); //outer blue box width\n\t\t\tunselect_grid.grid.parents( '.unselect-grid-border-div' ).css( 'width', inner_box_width ); //red border div.\n\t\t\tunselect_grid_search_div.css( 'width', unselect_grid_search_div_width );\n\t\t};\n\n\t\tthis.resizeSelectSearchInputs = function() {\n\t\t\tvar search_div = $( this ).find( '.select-grid-search-div' );\n\n\t\t\tvar search_inputs = search_div.find( '.search-input' );\n\t\t\tvar first_column_width;\n\t\t\tvar select_grid_search_div = $( this ).find( '.select-grid-search-div' );\n\n\t\t\tvar len = search_inputs.length;\n\n\t\t\tfirst_column_width = select_grid_header_array[0].width() + 5;\n\t\t\tif ( len == 1 ) {\n\t\t\t\t//Issue #3331 - Tree mode dropdowns would show an extra search input for the id column\n\t\t\t\tif ( tree_mode ) {\n\t\t\t\t\theader = select_grid_header_array[0];\n\t\t\t\t} else {\n\t\t\t\t\theader = select_grid_header_array[1];\n\t\t\t\t}\n\t\t\t\tsearch_input = $( search_inputs[0] );\n\t\t\t\tsearch_input.css( 'width', ( header.getWidth() + 2 ) );\n\t\t\t} else {\n\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\tvar header = select_grid_header_array[i + 1];\n\t\t\t\t\tvar search_input = $( search_inputs[i] );\n\t\t\t\t\tif ( i == ( len - 1 ) ) {\n\t\t\t\t\t\tsearch_input.css( 'width', ( header.getWidth() + 2 ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsearch_input.css( 'width', ( header.getWidth() + 1 ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar newWidth = select_grid.grid.parents( '.ui-jqgrid-jquery-ui' ).width() ? select_grid.grid.parent().parent().width() : 100;\n\t\t\tselect_grid.setGridWidth( newWidth );\n\n\t\t\tvar outer_box_width = newWidth + 22;\n\t\t\tvar inner_box_width = newWidth + 4;\n\n\t\t\tvar max_width = ( ( $( 'body' ).width() / 2 ) - 30 );\n\n\t\t\tif ( outer_box_width > max_width ) {\n\t\t\t\touter_box_width = max_width;\n\t\t\t\tinner_box_width = max_width - 17;\n\t\t\t}\n\n\t\t\tselect_grid.grid.parents( '.select-grid-div' ).css( 'width', outer_box_width ); //outer blue box width\n\t\t\tselect_grid.grid.parents( '.select-grid-border-div' ).css( 'width', inner_box_width ); //red border div.\n\t\t\tselect_grid_search_div.css( 'width', newWidth );\n\t\t};\n\n\t\tthis.buildUnSelectSearchInputs = function() {\n\t\t\tvar len = unselect_grid_header_array.length;\n\n\t\t\tvar search_div = $( this ).find( '.unselect-grid-search-div' );\n\t\t\tvar first_column_width = 0;\n\t\t\tvar search_input_array = [];\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar header = unselect_grid_header_array[i];\n\n\t\t\t\tif ( allow_multiple_selection && i === 0 ) {\n\t\t\t\t\tfirst_column_width = header.getWidth();\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if ( allow_multiple_selection && i === 1 ) {\n\t\t\t\t\tvar search_input = $( '<input type=\\'text\\' class=\\'search-input unselect-grid-search-input\\'>' );\n\t\t\t\t\tvar width = ( header.getWidth() + first_column_width - 2 );\n\t\t\t\t\tsearch_input.css( 'width', width );\n\t\t\t\t} else {\n\t\t\t\t\tsearch_input = $( '<input type=\\'text\\' class=\\'search-input\\'>' );\n\t\t\t\t\tif ( i == ( len - 1 ) ) {\n\t\t\t\t\t\tsearch_input.css( 'width', ( header.getWidth() + 2 ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsearch_input.css( 'width', ( header.getWidth() + 1 ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsearch_input.on( 'drop', function( e ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t} );\n\n\t\t\t\tsearch_input.ASearchInput( { column_model: header.getColumnModel() } ); //Make it as ASearchInout Widget;\n\n\t\t\t\tsearch_div.append( search_input );\n\t\t\t\tsearch_input_array.push( search_input );\n\n\t\t\t\t//Set cached seach_input data back, unsualy in navigation_mode\n\t\t\t\tif ( unselect_grid_search_map ) {\n\t\t\t\t\tsearch_input.setFilter( unselect_grid_search_map );\n\n\t\t\t\t}\n\n\t\t\t\t//Do Column Search\n\t\t\t\tsearch_input.bind( 'searchEnter', function( e, searchVal, field ) {\n\n\t\t\t\t\tif ( !unselect_grid_search_map ) {\n\t\t\t\t\t\tunselect_grid_search_map = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !searchVal ) {\n\t\t\t\t\t\tdelete unselect_grid_search_map[field];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tunselect_grid_search_map[field] = searchVal;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( a_dropdown_this.isLocalSearchMode() ) {\n\t\t\t\t\t\t//Search in local data may not always have a parent_a_combo_box such as in the case of Permission Groups.\n\t\t\t\t\t\ta_dropdown_this.localSearch( 'unselect', unselect_grid_search_map );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparent_a_combo_box.setCachedSearchInputsFilter( unselect_grid_search_map );\n\t\t\t\t\t\tparent_a_combo_box.onADropDownSearch( 'unselect_grid' );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tvar close_btn = $( '<button class=\"close-btn\"><img src=\"' + Global.getRealImagePath( 'images/close.png' ) + '\"></img></button>' );\n\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t//close_btn.width( 22 )\n\t\t\t} else {\n\t\t\t\t//close_btn.width( 14 );\n\t\t\t}\n\n\t\t\tsearch_div.prepend( close_btn );\n\t\t\tclose_btn.click( function() {\n\t\t\t\tunselect_grid_search_map = {};\n\t\t\t\tif ( a_dropdown_this.isLocalSearchMode() ) {\n\t\t\t\t\ta_dropdown_this.localSearch( 'unselect', unselect_grid_search_map );\n\t\t\t\t} else {\n\t\t\t\t\tparent_a_combo_box.setCachedSearchInputsFilter( unselect_grid_search_map );\n\t\t\t\t\tparent_a_combo_box.onADropDownSearch( 'unselect_grid' );\n\t\t\t\t}\n\t\t\t\tfor ( var i = 0; i < search_input_array.length; i++ ) {\n\n\t\t\t\t\tvar s_i = search_input_array[i];\n\t\t\t\t\ts_i.clearValue();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t};\n\n\t\t//Set select item when not allow multiple selection\n\t\tthis.setSelectItem = function( val ) {\n\t\t\tselect_item = val;\n\t\t};\n\n\t\t//Search Reesult in select grid. it's not effect the selectitems when getSelectItems\n\t\tthis.setSelectGridSearchResult = function( val ) {\n\n\t\t\tif ( !real_selected_items || real_selected_items.length == 0 ) {\n\t\t\t\t//Clone the array with .slice(), this fixes the bug where you have an empty dropdown (no selected items)\n\t\t\t\t//You move 5 items to the right side, then search within those items to show only 1, then clear the search, and only 1 item would still be shown.\n\t\t\t\treal_selected_items = this.getSelectItems().slice();\n\t\t\t}\n\t\t\tselect_grid.setData( val );\n\t\t};\n\n\t\t//Must Set this after setUnselectedGridData for now\n\t\t//Remove select items form allColumn array\n\t\tthis.setSelectGridData = function( val, searchResult ) {\n\t\t\tif ( parent_a_combo_box && parent_a_combo_box.getAPI() ) {\n\t\t\t\tval = Global.formatGridData( val, parent_a_combo_box.getAPI().key_name );\n\t\t\t}\n\t\t\tif ( Object.prototype.toString.call( static_source_data ) !== '[object Array]' || static_source_data.length < 1 ) {\n\t\t\t\tstatic_source_data = [];\n\t\t\t}\n\t\t\t//Uncaught TypeError: Cannot read property 'length' of undefined\n\t\t\tif ( !val ) {\n\t\t\t\tval = [];\n\t\t\t}\n\t\t\tvar all_columns = static_source_data.slice(); //Copy from Static data\n\t\t\tvar i;\n\t\t\tvar j;\n\t\t\tvar select_item;\n\t\t\tvar tmp_select_items;\n\t\t\tvar all_columns_len;\n\t\t\tif ( all_columns && all_columns.length > 0 ) {\n\t\t\t\tvar selectItemLen = val.length;\n\t\t\t\tif ( !auto_sort ) {\n\n\t\t\t\t\tfor ( i = 0; i < selectItemLen; i++ ) {\n\t\t\t\t\t\tselect_item = val[i];\n\t\t\t\t\t\tif ( !Global.isSet( select_item[key] ) ) {\n\t\t\t\t\t\t\tselect_item = [];\n\t\t\t\t\t\t\tselect_item[key] = val[i];\n\t\t\t\t\t\t\tif ( !Global.isSet( tmp_select_items ) ) {\n\t\t\t\t\t\t\t\ttmp_select_items = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tall_columns_len = all_columns.length;\n\t\t\t\t\t\tfor ( j = 0; j < all_columns_len; j++ ) {\n\t\t\t\t\t\t\tvar fromAllColumn = all_columns[j];\n\t\t\t\t\t\t\tif ( fromAllColumn[key] == select_item[key] ) {\n\t\t\t\t\t\t\t\t//saved search select items may don't have ids if it's saved from flex, so set it back\n\t\t\t\t\t\t\t\tif ( !select_item.hasOwnProperty( 'id' ) && fromAllColumn.hasOwnProperty( 'id' ) ) {\n\t\t\t\t\t\t\t\t\tselect_item.id = fromAllColumn.id;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( Global.isSet( tmp_select_items ) ) {\n\t\t\t\t\t\t\t\t\ttmp_select_items.push( fromAllColumn );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( !tree_mode ) {\n\t\t\t\t\t\t\t\t\tall_columns.splice( j, 1 );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tall_columns_len = all_columns.length;\n\t\t\t\t\tfor ( j = 0; j < all_columns_len; j++ ) {\n\t\t\t\t\t\tfromAllColumn = all_columns[j];\n\t\t\t\t\t\tfor ( i = 0; i < selectItemLen; i++ ) {\n\t\t\t\t\t\t\tselect_item = val[i];\n\t\t\t\t\t\t\tif ( !Global.isSet( select_item[key] ) ) {\n\t\t\t\t\t\t\t\tselect_item = [];\n\t\t\t\t\t\t\t\tselect_item[key] = val[i];\n\t\t\t\t\t\t\t\tif ( !Global.isSet( tmp_select_items ) ) {\n\t\t\t\t\t\t\t\t\ttmp_select_items = [];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// we have both string case and number case. sometimes number will be 'xx'. So use == make sure all match\n\t\t\t\t\t\t\tif ( fromAllColumn[key] == select_item[key] ) {\n\t\t\t\t\t\t\t\t//saved search select items may don't have ids if it's saved from flex, so set it back\n\t\t\t\t\t\t\t\tif ( !select_item.hasOwnProperty( 'id' ) && fromAllColumn.hasOwnProperty( 'id' ) ) {\n\t\t\t\t\t\t\t\t\tselect_item.id = fromAllColumn.id;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( Global.isSet( tmp_select_items ) ) {\n\t\t\t\t\t\t\t\t\ttmp_select_items.push( fromAllColumn );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( !tree_mode ) {\n\t\t\t\t\t\t\t\t\tall_columns.splice( j, 1 );\n\t\t\t\t\t\t\t\t\tall_columns_len = all_columns_len - 1;\n\t\t\t\t\t\t\t\t\tj = j - 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// for all static options, that don't need get reald data, the length should always be match, use temp array because val don't\n\t\t\t//contains full info.\n\t\t\tif ( tmp_select_items && tmp_select_items.length === val.length ||\n\t\t\t\t( val.length > 0 && !val[0].hasOwnProperty( key ) ) ) {\n\t\t\t\tval = tmp_select_items;\n\t\t\t}\n//\t\t\tval = ( Global.isSet( tmp_select_items ) ) ? tmp_select_items : val;\n\n\t\t\t//don't refresh select grid if it's calling from onDropDownsearch whcih doing search in search input\n\t\t\tif ( !searchResult ) {\n\t\t\t\t//select_grid.clearGridData();\n\t\t\t\t//FIXES BUG #1998: The api call returns true when the data it's looking for is deleted. This causes the grid to add a blank row to the unselected side when clear is clicked.\n\t\t\t\tif ( typeof val === 'object' ) {\n\t\t\t\t\tselect_grid.setData( val );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !tree_mode ) {\n\t\t\t\tunselect_grid.setData( all_columns );\n\t\t\t\tthis.setTotalDisplaySpan();\n\t\t\t} else {\n\t\t\t\ta_dropdown_this.reSetUnSelectGridTreeData( all_columns );\n\t\t\t}\n\t\t\ta_dropdown_this.setSelectGridDragAble();\n\t\t\ta_dropdown_this.setUnSelectGridDragAble();\n\n\t\t};\n\n\t\tthis.setUnSelectGridHighlight = function( array ) {\n\t\t\tunselect_grid.resetSelection();\n\t\t\t$.each( array, function( index, content ) {\n\t\t\t\tunselect_grid.grid.jqGrid( 'setSelection', content, false );\n\t\t\t} );\n\n\t\t};\n\n\t\tthis.showNoResultCover = function( target_grid ) {\n\n\t\t\tthis.removeNoResultCover( target_grid );\n\n\t\t\tvar no_result_box = Global.loadWidgetByName( WidgetNamesDic.NO_RESULT_BOX );\n\t\t\tno_result_box.NoResultBox( { related_view_controller: this } );\n\t\t\tvar grid_div;\n\n\t\t\tif ( target_grid === 'unselect_grid' ) {\n\t\t\t\tno_result_box.attr( 'id', id + target_grid + '_no_result_box' );\n\n\t\t\t\tgrid_div = $( this ).find( '#gbox_unselect_grid_' + id );\n\n\t\t\t\tunselect_grid_no_result_box = no_result_box;\n\n\t\t\t} else {\n\t\t\t\tno_result_box.attr( 'id', id + target_grid + '_no_result_box' );\n\n\t\t\t\tgrid_div = $( this ).find( '#gbox_select_grid_' + id );\n\n\t\t\t\tselect_grid_no_result_box = no_result_box;\n\n\t\t\t}\n\n\t\t\tgrid_div.append( no_result_box );\n\n\t\t};\n\n\t\tthis.removeNoResultCover = function( target_grid ) {\n\t\t\tif ( target_grid === 'unselect_grid' ) {\n\n\t\t\t\tif ( unselect_grid_no_result_box ) {\n\t\t\t\t\tunselect_grid_no_result_box.remove();\n\t\t\t\t\tunselect_grid_no_result_box = null;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( select_grid_no_result_box ) {\n\t\t\t\t\tselect_grid_no_result_box.remove();\n\t\t\t\t\tselect_grid_no_result_box = null;\n\t\t\t\t}\n\n\t\t\t}\n\t\t};\n\n\t\tthis.setSelectGridHighlight = function( array ) {\n\t\t\tselect_grid.resetSelection();\n\t\t\t$.each( array, function( index, content ) {\n\t\t\t\tselect_grid.grid.jqGrid( 'setSelection', content, false );\n\t\t\t} );\n\n\t\t};\n\n\t\tthis.setUnSelectGridDragAble = function() {\n\n\t\t\tvar highlight_Rows = null;\n\n\t\t\tvar trs = unselect_grid.grid.find( 'tr.ui-widget-content' ).attr( 'draggable', 'true' );\n\n\t\t\ttrs.unbind( 'dragstart' ).bind( 'dragstart', function( event ) {\n\t\t\t\tvar target = $( event.target );\n\n\t\t\t\tvar container = $( '<table class=\\'drag-holder-table\\'></table>' );\n\t\t\t\thighlight_Rows = unselect_grid.grid.find( 'tr.ui-state-highlight' );\n\t\t\t\tvar cloneRows = [];\n\t\t\t\tvar len = highlight_Rows.length;\n\t\t\t\tif ( len === 0 ) {\n\t\t\t\t\tlen = 1;\n\t\t\t\t\tunselect_grid.grid.jqGrid( 'setSelection', target.attr( 'id' ), false );\n\t\t\t\t} else if ( !target.hasClass( 'ui-state-highlight' ) ) {\n\t\t\t\t\tselectAllInGrid( unselect_grid, true );\n\t\t\t\t\tunselect_grid.grid.jqGrid( 'setSelection', target.attr( 'id' ), false );\n\t\t\t\t\tlen = 1;\n\t\t\t\t}\n\n\t\t\t\tif ( len === 1 ) {\n\t\t\t\t\thighlight_Rows = unselect_grid.grid.find( 'tr.ui-state-highlight' );\n\t\t\t\t\tvar clone_row = $( highlight_Rows[0] ).clone();\n\n\t\t\t\t\tclone_row.children().eq( 0 ).remove();\n\t\t\t\t\tclone_row.find( 'td' ).css( 'padding-right', 10 );\n\t\t\t\t\tclone_row.find( 'td' ).css( 'padding-left', 10 );\n\n\t\t\t\t\tcontainer.append( clone_row );\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.append( len + ' ' + $.i18n._( 'item(s) selected' ) );\n\t\t\t\t}\n\n\t\t\t\t$( 'body' ).find( '.drag-holder-table' ).remove();\n\n\t\t\t\t$( 'body' ).append( container );\n\n\t\t\t\tevent.originalEvent.dataTransfer.setData( 'Text', 'un_select_grid' );//JUST ELEMENT references is ok here NO ID\n\n\t\t\t\tif ( event.originalEvent.dataTransfer.setDragImage ) {\n\t\t\t\t\tevent.originalEvent.dataTransfer.setDragImage( container[0], -10, 0 );\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t} );\n\n\t\t\tunselect_grid.grid.parent().parent().unbind( 'dragover' ).bind( 'dragover', function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t} );\n\n\t\t\tunselect_grid.grid.parent().parent().unbind( 'drop' ).bind( 'drop', function( event ) {\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif ( event.stopPropagation ) {\n\t\t\t\t\tevent.stopPropagation(); // stops the browser from redirecting.\n\t\t\t\t}\n\t\t\t\t$( '.drag-holder-table' ).remove();\n\t\t\t\t//drag from left to right\n\t\t\t\tif ( event.originalEvent.dataTransfer.getData( 'Text' ) === 'select_grid' ) {\n\t\t\t\t\tvar grid_selected_id_array = select_grid.grid.jqGrid( 'getGridParam', 'selarrrow' );\n\t\t\t\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\t\t\t\tif ( grid_selected_length > 0 ) {\n\t\t\t\t\t\ta_dropdown_this.moveItems( false, grid_selected_id_array );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\ttrs.unbind( 'dragend' ).bind( 'dragend', function( event ) {\n\t\t\t\t$( '.drag-holder-table' ).remove();\n\t\t\t} );\n\n\t\t\tunselect_grid.grid.parent().parent().unbind( 'dragend' ).bind( 'dragend', function( event ) {\n\t\t\t\t$( '.drag-holder-table' ).remove();\n\t\t\t} );\n\n\t\t};\n\n\t\t//Start Drag\n\t\tthis.setSelectGridDragAble = function() {\n\n\t\t\tvar highlight_Rows = null;\n\t\t\tvar $$this = this;\n\n\t\t\tvar trs = select_grid.grid.find( 'tr.ui-widget-content' ).attr( 'draggable', 'true' );\n\n\t\t\ttrs.attr( 'draggable', true );\n\n\t\t\ttrs.unbind( 'dragstart' ).bind( 'dragstart', function( event ) {\n\t\t\t\tvar target = $( event.target );\n\t\t\t\tvar container = $( '<table class=\\'drag-holder-table\\' from=\\'select_grid\\'></table>' );\n\t\t\t\thighlight_Rows = select_grid.grid.find( 'tr.ui-state-highlight' );\n\t\t\t\tvar cloneRows = [];\n\t\t\t\tvar len = highlight_Rows.length;\n\n\t\t\t\tif ( len === 0 ) {\n\t\t\t\t\tlen = 1;\n\t\t\t\t\tselect_grid.grid.jqGrid( 'setSelection', target.attr( 'id' ), false );\n\t\t\t\t} else if ( !target.hasClass( 'ui-state-highlight' ) ) {\n\t\t\t\t\tselectAllInGrid( select_grid, true );\n\t\t\t\t\tselect_grid.grid.jqGrid( 'setSelection', target.attr( 'id' ), false );\n\t\t\t\t\tlen = 1;\n\t\t\t\t}\n\n\t\t\t\tif ( len === 1 ) {\n\t\t\t\t\thighlight_Rows = select_grid.grid.find( 'tr.ui-state-highlight' );\n\n\t\t\t\t\tvar clone_row = $( highlight_Rows[0] ).clone();\n\n\t\t\t\t\tclone_row.children().eq( 0 ).remove();\n\t\t\t\t\tclone_row.find( 'td' ).css( 'padding-right', 10 );\n\t\t\t\t\tclone_row.find( 'td' ).css( 'padding-left', 10 );\n\n\t\t\t\t\tcontainer.append( clone_row );\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.append( len + ' ' + $.i18n._( 'item(s) selected' ) );\n\t\t\t\t}\n\n\t\t\t\t$( '.drag-holder-table' ).remove();\n\n\t\t\t\t$( 'body' ).append( container );\n\n\t\t\t\tevent.originalEvent.dataTransfer.setData( 'Text', 'select_grid' );//JUST ELEMENT references is ok here NO ID\n\n\t\t\t\tif ( event.originalEvent.dataTransfer.setDragImage ) {\n\t\t\t\t\tevent.originalEvent.dataTransfer.setDragImage( container[0], -10, 0 );\n\t\t\t\t}\n\t\t\t\treturn true;\n\n\t\t\t} );\n\n\t\t\tselect_grid.grid.parent().parent().unbind( 'dragover' ).bind( 'dragover', function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t} );\n\n\t\t\tselect_grid.grid.parent().parent().unbind( 'drop' ).bind( 'drop', function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif ( event.stopPropagation ) {\n\t\t\t\t\tevent.stopPropagation(); // stops the browser from redirecting.\n\t\t\t\t}\n\t\t\t\t$( '.drag-holder-table' ).remove();\n\t\t\t\t//drag from left to right\n\t\t\t\tif ( event.originalEvent.dataTransfer.getData( 'Text' ) === 'un_select_grid' ) {\n\t\t\t\t\tif ( !tree_mode ) {\n\t\t\t\t\t\tvar grid_selected_id_array = unselect_grid.grid.jqGrid( 'getGridParam', 'selarrrow' );\n\t\t\t\t\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\t\t\t\t\tif ( grid_selected_length > 0 ) {\n\t\t\t\t\t\t\ta_dropdown_this.moveItems( true, grid_selected_id_array );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar selectRow = unselect_grid.grid.jqGrid( 'getGridParam', 'selrow' );\n\t\t\t\t\t\ta_dropdown_this.moveItems( true, [selectRow] );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t//when drag item to the header row, put them as first row\n\t\t\tvar parent_grid_container = select_grid.grid.parent().parent().parent();\n\t\t\tparent_grid_container = parent_grid_container.find( '.ui-jqgrid-labels' );\n\n\t\t\tparent_grid_container.unbind( 'dragover' ).bind( 'dragover', function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t$( this ).addClass( 'drag-over-bottom' );\n\t\t\t} );\n\n\t\t\tparent_grid_container.unbind( 'dragleave' ).bind( 'dragleave', function( event ) {\n\t\t\t\t$( this ).removeClass( 'drag-over-bottom' );\n\n\t\t\t} );\n\n\t\t\ttrs.unbind( 'dragend' ).bind( 'dragend', function( event ) {\n\t\t\t\t$( '.drag-holder-table' ).remove();\n\t\t\t} );\n\n\t\t\tselect_grid.grid.parent().parent().unbind( 'dragend' ).bind( 'dragend', function( event ) {\n\t\t\t\t$( '.drag-holder-table' ).remove();\n\t\t\t} );\n\n\t\t\tparent_grid_container.unbind( 'dragend' ).bind( 'dragend', function( event ) {\n\t\t\t\t$( '.drag-holder-table' ).remove();\n\t\t\t} );\n\n\t\t\t//when dropping on th/divs at top of grid.\n\t\t\tparent_grid_container.unbind( 'drop' ).bind( 'drop', function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif ( event.stopPropagation ) {\n\t\t\t\t\tevent.stopPropagation(); // stops the browser from redirecting.\n\t\t\t\t}\n\n\t\t\t\t$( '.drag-holder-table' ).remove();\n\t\t\t\t$( this ).removeClass( 'drag-over-bottom' );\n\t\t\t\tif ( event.originalEvent.dataTransfer.getData( 'Text' ) === 'select_grid' ) {\n\n\t\t\t\t\tvar firstTr = select_grid.grid.find( 'tr.ui-widget-content' )[0];\n\t\t\t\t\tif ( !firstTr ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar rows = select_grid.grid.find( 'tr.ui-state-highlight' );\n\n\t\t\t\t\tvar len = rows.length;\n\n\t\t\t\t\tfor ( var i = len - 1; i >= 0; i-- ) {\n\n\t\t\t\t\t\tvar value = rows[i];\n\t\t\t\t\t\tvar row = $( value );\n\n\t\t\t\t\t\tvar target_row_index = 0;\n\t\t\t\t\t\tvar select_items = a_dropdown_this.getSelectItems();\n\t\t\t\t\t\tvar drag_item_index = value.rowIndex - 1;\n\n\t\t\t\t\t\tselect_items.splice( target_row_index, 0, select_items.splice( drag_item_index, 1 )[0] );\n\n\t\t\t\t\t\t$( row ).insertAfter( firstTr ); // insert after sizerow.\n\t\t\t\t\t}\n\n\t\t\t\t\tvar scroll_position = select_grid.grid.parents( '.ui-jqgrid-bdiv' ).scrollTop();\n\t\t\t\t\tisChanged = true;\n\t\t\t\t\tselect_grid.grid.trigger( 'reloadGrid' );\n\n\t\t\t\t\t$$this.setSelectGridDragAble();\n\n\t\t\t\t\trows = select_grid.grid.find( 'tr.ui-widget-content' );\n\n\t\t\t\t\t$.each( highlight_Rows, function( index, value ) {\n\n\t\t\t\t\t\tvar item = value;\n\t\t\t\t\t\tvar itemLabel = $( item ).find( 'td' )[1].innerHTML;\n\n\t\t\t\t\t\t$.each( rows, function( index1, value1 ) {\n\t\t\t\t\t\t\tvar row = value1;\n\n\t\t\t\t\t\t\tvar rowLabel = $( row ).find( 'td' )[1].innerHTML;\n\t\t\t\t\t\t\tif ( itemLabel === rowLabel ) {\n\t\t\t\t\t\t\t\tselect_grid.grid.jqGrid( 'setSelection', $( row ).attr( 'id' ), false );\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tselect_grid.grid.parents( '.ui-jqgrid-bdiv' ).scrollTop( scroll_position );\n\t\t\t\t} else if ( event.originalEvent.dataTransfer.getData( 'Text' ) === 'un_select_grid' ) {\n\t\t\t\t\ttarget_row_index = -1;\n\t\t\t\t\tvar grid_selected_id_array = unselect_grid.grid.jqGrid( 'getGridParam', 'selarrrow' );\n\t\t\t\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\t\t\t\tif ( grid_selected_length > 0 ) {\n\t\t\t\t\t\ta_dropdown_this.moveItems( true, grid_selected_id_array, target_row_index );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ta_dropdown_this.trigger( 'formItemChange', [a_dropdown_this] );\n\n\t\t\t} );\n\n\t\t\ttrs.unbind( 'dragover' ).bind( 'dragover', function( event ) {\n\t\t\t\t$( this ).addClass( 'drag-over-bottom' );\n\t\t\t} );\n\n\t\t\ttrs.unbind( 'dragleave' ).bind( 'dragleave', function( event ) {\n\t\t\t\t$( this ).removeClass( 'drag-over-bottom' );\n\t\t\t} );\n\n\t\t\ttrs.unbind( 'drop' ).bind( 'drop', function( event ) {\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif ( event.stopPropagation ) {\n\t\t\t\t\tevent.stopPropagation(); // stops the browser from redirecting.\n\t\t\t\t}\n\n\t\t\t\t$( this ).removeClass( 'drag-over-bottom' );\n\n\t\t\t\tvar $this = this;\n\t\t\t\t// Dont do drag to order\n\t\t\t\tif ( event.originalEvent.dataTransfer.getData( 'Text' ) === 'select_grid' ) {\n\t\t\t\t\tvar rows = select_grid.grid.find( 'tr.ui-state-highlight' );\n\n\t\t\t\t\tvar len = rows.length;\n\n\t\t\t\t\tfor ( var i = len - 1; i >= 0; i-- ) {\n\n\t\t\t\t\t\tvar value = rows[i];\n\t\t\t\t\t\tvar row = $( value );\n\n\t\t\t\t\t\tif ( value === this ) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar target_row_index = $this.rowIndex - 1;\n\t\t\t\t\t\tvar select_items = a_dropdown_this.getSelectItems();\n\t\t\t\t\t\tvar drag_item_index = value.rowIndex - 1;\n\n\t\t\t\t\t\tif ( target_row_index >= drag_item_index ) {\n\t\t\t\t\t\t\tselect_items.splice( target_row_index, 0, select_items.splice( drag_item_index, 1 )[0] );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tselect_items.splice( target_row_index + 1, 0, select_items.splice( drag_item_index, 1 )[0] );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$( row ).insertAfter( $this );\n\t\t\t\t\t}\n\t\t\t\t\tisChanged = true;\n\t\t\t\t\tvar scroll_position = select_grid.grid.closest( '.ui-jqgrid-bdiv' ).scrollTop();\n\t\t\t\t\tselect_grid.grid.trigger( 'reloadGrid' );\n\n\t\t\t\t\t$$this.setSelectGridDragAble();\n\n\t\t\t\t\trows = select_grid.grid.find( 'tr.ui-widget-content' );\n\n\t\t\t\t\t$.each( highlight_Rows, function( index, value ) {\n\n\t\t\t\t\t\tvar item = value;\n\t\t\t\t\t\tvar itemLabel = $( item ).find( 'td' )[1].innerHTML;\n\n\t\t\t\t\t\t$.each( rows, function( index1, value1 ) {\n\t\t\t\t\t\t\trow = value1;\n\n\t\t\t\t\t\t\tvar rowLabel = $( row ).find( 'td' )[1].innerHTML;\n\t\t\t\t\t\t\tif ( itemLabel === rowLabel ) {\n\t\t\t\t\t\t\t\tselect_grid.grid.jqGrid( 'setSelection', $( row ).attr( 'id' ), false );\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tselect_grid.grid.closest( '.ui-jqgrid-bdiv' ).scrollTop( scroll_position );\n\t\t\t\t} else if ( event.originalEvent.dataTransfer.getData( 'Text' ) === 'un_select_grid' ) {\n\n\t\t\t\t\tif ( !tree_mode ) {\n\t\t\t\t\t\ttarget_row_index = $this.rowIndex - 1;\n\t\t\t\t\t\tvar grid_selected_id_array = unselect_grid.grid.jqGrid( 'getGridParam', 'selarrrow' );\n\t\t\t\t\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\t\t\t\t\tif ( grid_selected_length > 0 ) {\n\t\t\t\t\t\t\ta_dropdown_this.moveItems( true, grid_selected_id_array, target_row_index, $( $this ).attr( 'id' ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar selectRow = unselect_grid.grid.jqGrid( 'getGridParam', 'selrow' );\n\t\t\t\t\t\ta_dropdown_this.moveItems( true, [selectRow] );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//Need to dirty the form when changing order of selected items\n\t\t\t\ta_dropdown_this.trigger( 'formItemChange', [a_dropdown_this] );\n\t\t\t} );\n\t\t};\n\n\t\tthis.setTotalDisplaySpan = function() {\n\t\t\tvar grid_selected_id_array;\n\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tgrid_selected_id_array = unselect_grid.grid.jqGrid( 'getGridParam', 'selarrrow' );\n\t\t\t} else {\n\t\t\t\tgrid_selected_id_array = unselect_grid.grid.jqGrid( 'getGridParam', 'selrow' ) ? [unselect_grid.grid.jqGrid( 'getGridParam', 'selrow' )] : [];\n\t\t\t}\n\n\t\t\tvar grid_selected_length = 0;\n\t\t\t//Uncaught TypeError: Cannot read property 'length' of undefined\n\t\t\tif ( grid_selected_id_array ) {\n\t\t\t\tgrid_selected_length = grid_selected_id_array.length;\n\t\t\t}\n\n\t\t\tvar totalRows = 0;\n\t\t\tvar start = 0;\n\t\t\tvar end = 0;\n\t\t\tvar unselect_grid_length = ( ( unselect_grid && Global.isArray( unselect_grid.getGridParam( 'data' ) ) ) ? unselect_grid.getGridParam( 'data' ).length : 0 );\n\n\t\t\t// CLICK TO SHOW MORE MODE OR SHOW ALL\n\t\t\tif ( LocalCacheData.paging_type === 0 || !pager_data || ( pager_data && pager_data.last_page_number < 0 ) ) {\n\t\t\t\tif ( pager_data ) {\n\t\t\t\t\ttotalRows = pager_data.total_rows;\n\t\t\t\t\tstart = 1;\n\t\t\t\t\tend = unselect_grid_length;\n\t\t\t\t} else {\n\t\t\t\t\ttotalRows = unselect_grid_length;\n\t\t\t\t\tstart = 1;\n\t\t\t\t\tend = unselect_grid_length;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( pager_data ) {\n\t\t\t\t\ttotalRows = pager_data.total_rows;\n\t\t\t\t\tstart = 0;\n\t\t\t\t\tend = 0;\n\n\t\t\t\t\tif ( pager_data.last_page_number > 1 ) {\n\t\t\t\t\t\tif ( !pager_data.is_last_page ) {\n\t\t\t\t\t\t\tstart = ( pager_data.current_page - 1 ) * pager_data.rows_per_page + 1;\n\t\t\t\t\t\t\tend = start + pager_data.rows_per_page - 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstart = totalRows - unselect_grid_length + 1;\n\t\t\t\t\t\t\tend = totalRows;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstart = 1;\n\t\t\t\t\t\tend = totalRows;\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\ttotalRows = 0;\n\t\t\t\t\tstart = 0;\n\t\t\t\t\tend = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar totalInfo;\n\t\t\tif ( allow_multiple_selection ) {\n\n\t\t\t\tvar selected_count = this.getSelectItems().length;\n\n\t\t\t\tvar remain_count = unselect_grid_length;\n\n\t\t\t\tif ( remain_count === 0 ) {\n\t\t\t\t\tend = 0;\n\t\t\t\t\tstart = 0;\n\t\t\t\t} else {\n\t\t\t\t\tend = ( remain_count + start );\n\t\t\t\t\tif ( start === 1 ) {\n\t\t\t\t\t\tend = end - 1;\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( totalRows ) {\n\n\t\t\t\t\t//If there is manually added item\n\t\t\t\t\tif ( end > totalRows ) {\n\t\t\t\t\t\ttotalRows = end;\n\t\t\t\t\t}\n\n\t\t\t\t\ttotalInfo = start + ' - ' + end + ' ' + $.i18n._( 'of' ) + ' ' + totalRows + ' ' + $.i18n._( 'total' ) + '. ';\n\n\t\t\t\t} else {\n\t\t\t\t\ttotalInfo = start + ' - ' + end + '.';\n\t\t\t\t}\n\n\t\t\t\ttotal_display_span.text( $.i18n._( 'Displaying' ) + ' ' + totalInfo + ' ' + $.i18n._( 'Selected' ) + ': ' + selected_count );\n\n\t\t\t} else {\n\n\t\t\t\tif ( end === 0 ) {\n\t\t\t\t\tstart = 0;\n\t\t\t\t}\n\t\t\t\tif ( totalRows ) {\n\n\t\t\t\t\t//If there is manually added item\n\t\t\t\t\tif ( end > totalRows ) {\n\t\t\t\t\t\ttotalRows = end;\n\t\t\t\t\t}\n\n\t\t\t\t\ttotalInfo = start + ' - ' + end + ' ' + $.i18n._( 'of' ) + ' ' + totalRows + ' ' + $.i18n._( 'total' ) + '. ';\n\t\t\t\t} else {\n\t\t\t\t\ttotalInfo = start + ' - ' + end + '.';\n\t\t\t\t}\n\n\t\t\t\ttotal_display_span.text( $.i18n._( 'Displaying' ) + ' ' + totalInfo );\n\t\t\t}\n\n\t\t};\n\n\t\tthis.onUnSelectGridSelectRow = function() {\n\t\t\tthis.setTotalDisplaySpan();\n\t\t};\n\n\t\tthis.onUnSelectGridDoubleClick = function() {\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tif ( !tree_mode ) {\n\t\t\t\t\tvar grid_selected_id_array = unselect_grid.grid.jqGrid( 'getGridParam', 'selarrrow' );\n\t\t\t\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\t\t\t\tif ( grid_selected_length > 0 ) {\n\t\t\t\t\t\ta_dropdown_this.moveItems( true, grid_selected_id_array );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar selectRow = unselect_grid.grid.jqGrid( 'getGridParam', 'selrow' );\n\t\t\t\t\ta_dropdown_this.moveItems( true, [selectRow] );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.onSelectGridDoubleClick = function() {\n\t\t\tvar grid_selected_id_array = select_grid.grid.jqGrid( 'getGridParam', 'selarrrow' );\n\t\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\t\tif ( grid_selected_length > 0 ) {\n\t\t\t\ta_dropdown_this.moveItems( false, grid_selected_id_array );\n\t\t\t}\n\n\t\t};\n\n\t\t//Move items between 2 grids\n\t\tthis.moveItems = function( left_to_right, array, index, target_row_id ) {\n\t\t\tthis.removeNoResultCover( 'unselect_grid' );\n\t\t\tthis.removeNoResultCover( 'select_grid' );\n\t\t\tvar added_items = [];\n\t\t\tvar removed_items = [];\n\t\t\tisChanged = true;\n\n\t\t\tvar editable_unselect_items = $( unselect_grid.grid ).find( '.editable' );\n\t\t\tfor ( var i = 0; i < editable_unselect_items.length; i++ ) {\n\t\t\t\tvar $el = $( editable_unselect_items[i] );\n\t\t\t\tvar tr_id = $el.parents( 'tr' ).prop( 'id' );\n\t\t\t\tunselect_grid.grid.saveRow( tr_id );\n\t\t\t}\n\n\t\t\tvar editable_select_items = $( select_grid.grid ).find( '.editable' );\n\t\t\tfor ( var i = 0; i < editable_select_items.length; i++ ) {\n\t\t\t\tvar $el = $( editable_select_items[i] );\n\t\t\t\tvar tr_id = $el.parents( 'tr' ).prop( 'id' );\n\t\t\t\tselect_grid.grid.saveRow( tr_id );\n\t\t\t}\n\n\t\t\tvar moved_items_array = array.slice();\n\n\t\t\tif ( left_to_right ) {\n\t\t\t\tvar source_grid = unselect_grid;\n\t\t\t\tvar target_grid = select_grid;\n\t\t\t\tvar source_data = unselect_grid.getGridParam( 'data' );\n\t\t\t\tvar target_data = select_grid.getGridParam( 'data' );\n\t\t\t} else {\n\t\t\t\tsource_grid = select_grid;\n\t\t\t\ttarget_grid = unselect_grid;\n\t\t\t\tsource_data = select_grid.getGridParam( 'data' );\n\t\t\t\ttarget_data = unselect_grid.getGridParam( 'data' );\n\t\t\t}\n\n\t\t\tif ( !Global.isArray( target_data ) ) {\n\t\t\t\ttarget_data = [];\n\t\t\t}\n\n\t\t\tif ( source_data[0] && source_data[0].hasOwnProperty( 'id' ) ) {\n\t\t\t\tif ( !Global.isSet( index ) ) {\n\t\t\t\t\tarray = array.reverse();\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = array.length - 1; i >= 0; i-- ) {\n\t\t\t\t\tvar selected_item_id = array[i];\n\n\t\t\t\t\tfor ( var j = 0; j < source_data.length; j++ ) {\n\t\t\t\t\t\tvar from_all_columns_item = source_data[j];\n\t\t\t\t\t\tif ( from_all_columns_item.hidden ) {\n\t\t\t\t\t\t\tcontinue; //Do not move hidden iteme\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( from_all_columns_item.id == selected_item_id ) {  //html number is string, compare string numbers with number number\n\t\t\t\t\t\t\tvar select_item = from_all_columns_item;\n\n\t\t\t\t\t\t\tif ( !tree_mode || !left_to_right ) { //Don't remove item from list if tree mode\n\t\t\t\t\t\t\t\tsource_grid.grid.jqGrid( 'delRowData', selected_item_id );\n\t\t\t\t\t\t\t\ti = i + 1;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( !tree_mode || left_to_right ) {\n\t\t\t\t\t\t\t\tif ( tree_mode ) {\n\t\t\t\t\t\t\t\t\t//Make sure only one item can be add to right when tree mode\n\t\t\t\t\t\t\t\t\tvar target_data_len = target_data.length;\n\t\t\t\t\t\t\t\t\tvar find = false;\n\t\t\t\t\t\t\t\t\tfor ( var y = 0; y < target_data_len; y++ ) {\n\t\t\t\t\t\t\t\t\t\tvar existed_item = target_data[y];\n\t\t\t\t\t\t\t\t\t\tif ( existed_item[key] === select_item[key] ) {\n\t\t\t\t\t\t\t\t\t\t\tfind = true;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ( !find ) {\n\n\t\t\t\t\t\t\t\t\t\tif ( index >= 0 ) {\n\t\t\t\t\t\t\t\t\t\t\ttarget_grid.grid.addRowData( selected_item_id, select_item, 'after', target_row_id );\n\t\t\t\t\t\t\t\t\t\t\ttarget_data.splice( target_data.length - 1, 1 );\n\t\t\t\t\t\t\t\t\t\t\ttarget_data.splice( index + 1, 0, select_item );\n\n\t\t\t\t\t\t\t\t\t\t} else if ( index === -1 ) { // add to first row\n\t\t\t\t\t\t\t\t\t\t\ttarget_grid.grid.addRowData( selected_item_id, select_item, 'first' );\n\t\t\t\t\t\t\t\t\t\t\ttarget_data.splice( target_data.length - 1, 1 );\n\t\t\t\t\t\t\t\t\t\t\ttarget_data.unshift( select_item );\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\ttarget_grid.grid.addRowData( selected_item_id, select_item );\n\t\t\t\t\t\t\t\t\t\t\ttarget_data[target_data.length - 1] = select_item; //need this since we need full data, addRowData only keep data which shown on UI\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tif ( index >= 0 ) {\n\t\t\t\t\t\t\t\t\t\ttarget_grid.grid.addRowData( selected_item_id, select_item, 'after', target_row_id );\n\t\t\t\t\t\t\t\t\t\ttarget_data.splice( target_data.length - 1, 1 );\n\t\t\t\t\t\t\t\t\t\ttarget_data.splice( index + 1, 0, select_item );\n\n\t\t\t\t\t\t\t\t\t} else if ( index === -1 ) { // add to first row\n\t\t\t\t\t\t\t\t\t\ttarget_grid.grid.addRowData( selected_item_id, select_item, 'first' );\n\t\t\t\t\t\t\t\t\t\ttarget_data.splice( target_data.length - 1, 1 );\n\t\t\t\t\t\t\t\t\t\ttarget_data.unshift( select_item );\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\ttarget_grid.grid.addRowData( selected_item_id, select_item );\n\t\t\t\t\t\t\t\t\t\ttarget_data[target_data.length - 1] = select_item; //\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tadded_items.push( select_item );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !tree_mode ) {\n\t\t\t\ttarget_grid.grid.trigger( 'reloadGrid' );\n\t\t\t\t// if ( left_to_right ) {\n\t\t\t\t// \ta_dropdown_this.resizeSelectSearchInputs();\n\t\t\t\t// }\n\t\t\t} else {\n\t\t\t\tif ( left_to_right ) {\n\t\t\t\t\ta_dropdown_this.reSetUnSelectGridTreeData( source_data );\n\t\t\t\t} else {\n\t\t\t\t\ta_dropdown_this.reSetUnSelectGridTreeData( target_data );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ta_dropdown_this.setSelectGridDragAble();\n\t\t\ta_dropdown_this.setUnSelectGridDragAble();\n\t\t\ta_dropdown_this.updateRealSelectItemsIfNecessary( left_to_right, moved_items_array );\n\t\t\ta_dropdown_this.setTotalDisplaySpan();\n\n\t\t\tif ( !parent_a_combo_box ) {\n\t\t\t\ta_dropdown_this.trigger( 'formItemChange', [a_dropdown_this] );\n\t\t\t}\n\n\t\t\tif ( a_dropdown_this.isLocalSearchMode() ) {\n\t\t\t\ta_dropdown_this.localSearch( 'unselect', unselect_grid_search_map, added_items );\n\t\t\t\ta_dropdown_this.localSearch( 'select', select_grid_search_map, added_items );\n\t\t\t}\n\t\t};\n\n\t\tthis.updateRealSelectItemsIfNecessary = function( left_to_right, moved_items ) {\n\t\t\tif ( !real_selected_items || real_selected_items.length == 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( left_to_right ) {\n\t\t\t\tvar current_items_in_selected_grid = select_grid.getGridParam( 'data' );\n\t\t\t\t$.each( moved_items, function( index, value ) {\n\t\t\t\t\t$.each( current_items_in_selected_grid, function( index1, value1 ) {\n\t\t\t\t\t\tif ( value1[key] == value ) { //use == to match '' or number of id\n\t\t\t\t\t\t\treal_selected_items.push( value1 );\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\t$.each( moved_items, function( index, value ) {\n\t\t\t\t\t$.each( real_selected_items, function( index1, value1 ) {\n\t\t\t\t\t\tif ( value1[key] == value ) { //use == to match '' or number of id\n\t\t\t\t\t\t\treal_selected_items.splice( index1, 1 );\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setHeight = function( height ) {\n\t\t\tif ( max_height && max_height < height ) {\n\t\t\t\theight = max_height;\n\t\t\t}\n\t\t\tunselect_grid.grid.setGridHeight( height );\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tselect_grid.grid.setGridHeight( height );\n\t\t\t}\n\t\t};\n\n\t\tvar initColumnSettingsBtn = function() {\n\t\t\tvar edit_icon_div = $( a_dropdown_this ).find( '.edit-columnIcon-div' );\n\t\t\tvar edit_icon = $( a_dropdown_this ).find( '.edit_column_icon' );\n\t\t\tif ( !display_column_settings || tree_mode ) {\n\t\t\t\tedit_icon_div.hide();\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tedit_icon_div.show();\n\t\t\t}\n\n\t\t\tedit_icon_div.css( 'display', 'inline-block' );\n\t\t\tedit_icon.attr( 'src', Global.getRealImagePath( 'images/edit.png' ) );\n\n\t\t\t//OPen Column editor\n\t\t\tedit_icon_div.click( function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\n\t\t\t\tif ( !parent_a_combo_box.getEnabled() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tapi.getOptions( column_option_key, {\n\t\t\t\t\tonResult: function( columns_result ) {\n\n\t\t\t\t\t\tcolumn_editor = $( $.fn.ColumnEditor.html_template ); // Unable to use Global.loadWidgetByName as FormItemType did not have ColumnEditor listed, and its only used in one place anyway.\n\t\t\t\t\t\tcolumn_editor.find( '#save_btn' ).text( $.i18n._( 'Save and Close' ) );\n\t\t\t\t\t\tcolumn_editor.find( '#close_btn' ).text( $.i18n._( 'Close' ) );\n\t\t\t\t\t\tcolumn_editor.find( '.rows-per-page' ).text( $.i18n._( 'Rows Per Page' ) );\n\t\t\t\t\t\tcolumn_editor.find( '.choose-layout' ).text( $.i18n._( 'Choose Layout' ) );\n\n\t\t\t\t\t\tcolumn_editor = column_editor.ColumnEditor( { parent_awesome_box: parent_a_combo_box } );\n\n\t\t\t\t\t\tvar columns_result_data = columns_result.getResult();\n\t\t\t\t\t\tparent_a_combo_box.setAllColumns( Global.buildColumnArray( columns_result_data ) );\n\t\t\t\t\t\tparent_a_combo_box.setDisplayColumnsForEditor( parent_a_combo_box.buildDisplayColumnsForEditor() );\n\n\t\t\t\t\t\t//Open Column Editor;\n\t\t\t\t\t\tcolumn_editor.show();\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t\t};\n\n\t\tvar setLabels = function() {\n\t\t\tvar unselected_items_label = a_dropdown_this.find( '#unSelectedItemsLabel' );\n\t\t\tvar un_deselect_all_btn = a_dropdown_this.find( '#unDeselectAllBtn' );\n\t\t\tvar unselect_all_btn = a_dropdown_this.find( '#unselect_all_btn' );\n\t\t\tvar un_clear_btn = a_dropdown_this.find( '#un_clear_btn' );\n\t\t\tvar show_all_check_box_label = a_dropdown_this.find( '#show_all_check_box_label' );\n\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tunselected_items_label.text( $.i18n._( 'UNSELECTED ITEMS' ) );\n\t\t\t} else {\n\t\t\t\tunselected_items_label.text( $.i18n._( 'PLEASE SELECT ITEM' ) );\n\t\t\t}\n\t\t\tun_deselect_all_btn.text( $.i18n._( 'Deselect All' ) );\n\t\t\tunselect_all_btn.text( $.i18n._( 'Select All' ) );\n\t\t\tun_clear_btn.text( $.i18n._( 'Move All' ) );\n\t\t\tshow_all_check_box_label.text( $.i18n._( 'Show All' ) );\n\n\t\t\tvar selectedItemsLabel = a_dropdown_this.find( '#selectedItemsLabel' );\n\t\t\tvar delete_all_btn = a_dropdown_this.find( '#delete_all_btn' );\n\t\t\tvar select_all_btn = a_dropdown_this.find( '#select_all_btn' );\n\t\t\tvar clear_btn = a_dropdown_this.find( '#clear_btn' );\n\n\t\t\tselectedItemsLabel.text( $.i18n._( 'SELECTED ITEMS' ) );\n\t\t\tdelete_all_btn.text( $.i18n._( 'Deselect All' ) );\n\t\t\tselect_all_btn.text( $.i18n._( 'Select All' ) );\n\t\t\tclear_btn.text( $.i18n._( 'Move All' ) );\n\n\t\t};\n\n\t\tthis.selectNextItem = function( e ) {\n\t\t\tvar next_index;\n\t\t\tvar target_grid;\n\t\t\tvar next_select_item;\n\t\t\tif ( e.keyCode === 39 ) { //right\n\t\t\t\tif ( allow_multiple_selection && !$( e.target ).hasClass( 'search-input' ) ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\ta_dropdown_this.onUnSelectGridDoubleClick();\n\t\t\t\t}\n\t\t\t} else if ( e.keyCode === 37 ) { //left\n\t\t\t\tif ( allow_multiple_selection && !$( e.target ).hasClass( 'search-input' ) ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\ta_dropdown_this.onSelectGridDoubleClick();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( quick_search_timer ) {\n\t\t\t\t\tclearTimeout( quick_search_timer );\n\t\t\t\t}\n\t\t\t\tvar focus_target = $( ':focus' );\n\t\t\t\tif ( focus_target.length > 0 && $( focus_target[0] ).hasClass( 'search-input' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tquick_search_timer = setTimeout( function() {\n\t\t\t\t\tquick_search_typed_keys = '';\n\t\t\t\t}, 200 );\n\t\t\t\te.preventDefault();\n\t\t\t\tquick_search_typed_keys = quick_search_typed_keys + Global.KEYCODES[e.which];\n\t\t\t\tif ( allow_multiple_selection || tree_mode ) {\n\t\t\t\t\tif ( quick_search_typed_keys ) {\n\t\t\t\t\t\ttarget_grid = a_dropdown_this.getFocusInSeletGrid() ? a_dropdown_this.getSelectGrid() : a_dropdown_this.getUnSelectGrid();\n\t\t\t\t\t\tvar search_index = quick_search_dic[quick_search_typed_keys] ? quick_search_dic[quick_search_typed_keys] : 0;\n\t\t\t\t\t\tvar tds = $( target_grid.grid.find( 'tr' ).find( 'td:eq(1)' ).filter( function() {\n\t\t\t\t\t\t\treturn $.text( [this] ).toLowerCase().indexOf( quick_search_typed_keys ) == 0;\n\t\t\t\t\t\t} ) );\n\t\t\t\t\t\tvar td;\n\t\t\t\t\t\tif ( search_index < 0 || search_index > tds.length ) {\n\t\t\t\t\t\t\tsearch_index = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttd = $( tds[search_index] );\n\t\t\t\t\t\ta_dropdown_this.unSelectAll( target_grid.grid, true );\n\n\t\t\t\t\t\tnext_index = td.parent().index() - 1;\n\n\t\t\t\t\t\tvar next_select_item = false;\n\t\t\t\t\t\tvar grid_data = target_grid.getData();\n\t\t\t\t\t\tfor ( var z = 0; z < grid_data.length; z++ ) {\n\t\t\t\t\t\t\tif ( grid_data[z].id == td.parents( 'tr' ).attr( 'id' ) ) {\n\t\t\t\t\t\t\t\tnext_select_item = grid_data[z];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tselect_item = next_select_item;\n\t\t\t\t\t\ta_dropdown_this.setSelectItem( next_select_item, target_grid );\n\t\t\t\t\t\tquick_search_dic = {};\n\t\t\t\t\t\tquick_search_dic[quick_search_typed_keys] = search_index + 1;\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tif ( quick_search_typed_keys ) {\n\t\t\t\t\t\tsearch_index = quick_search_dic[quick_search_typed_keys] ? quick_search_dic[quick_search_typed_keys] : 0;\n\t\t\t\t\t\ttds = $( a_dropdown_this.getUnSelectGrid().find( 'tr' ).find( 'td:first' ).filter( function() {\n\t\t\t\t\t\t\treturn $.text( [this] ).toLowerCase().indexOf( quick_search_typed_keys ) == 0;\n\t\t\t\t\t\t} ) );\n\t\t\t\t\t\tif ( search_index > 0 && search_index < tds.length ) {\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsearch_index = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttd = $( tds[search_index] );\n\n\t\t\t\t\t\tnext_index = td.parent().index() - 1;\n\t\t\t\t\t\tnext_select_item = this.getItemByIndex( next_index );\n\t\t\t\t\t\tselect_item = next_select_item;\n\t\t\t\t\t\ta_dropdown_this.setSelectItem( next_select_item );\n\n\t\t\t\t\t\tquick_search_dic = {};\n\t\t\t\t\t\tquick_search_dic[quick_search_typed_keys] = search_index + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\t//For multiple items like .xxx could contains a few widgets.\n\t\t//#2353 removed $.each because it's slower\n\t\tfor ( var i = 0; i < this.length; i++ ) {\n\t\t\tvar obj = $( this[i] ); //#2353 - caching the lookup to speed this part up.\n\t\t\tvar o = $.meta ? $.extend( {}, opts, obj.data() ) : opts;\n\n\t\t\tif ( o.default_height > 150 ) {\n\t\t\t\tdefault_height = o.default_height;\n\t\t\t}\n\n\t\t\tfield = o.field;\n\n\t\t\tif ( o.search_input_filter ) {\n\t\t\t\tunselect_grid_search_map = o.search_input_filter;\n\t\t\t}\n\n\t\t\tif ( o.select_grid_search_input_filter ) {\n\t\t\t\tselect_grid_search_map = o.select_grid_search_input_filter;\n\t\t\t}\n\n\t\t\tif ( o.default_sort_filter ) {\n\t\t\t\tunselect_grid_sort_map = o.default_sort_filter;\n\t\t\t}\n\n\t\t\tif ( o.default_select_grid_sort_filter ) {\n\t\t\t\tselect_grid_sort_map = o.default_select_grid_sort_filter;\n\t\t\t}\n\n\t\t\tif ( o.auto_sort ) {\n\t\t\t\tauto_sort = o.auto_sort;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( o.allow_multiple_selection ) ) {\n\t\t\t\tallow_multiple_selection = o.allow_multiple_selection;\n\t\t\t}\n\n\t\t\tif ( o.column_option_key ) {\n\t\t\t\tcolumn_option_key = o.column_option_key;\n\t\t\t}\n\n\t\t\tif ( o.api ) {\n\t\t\t\tapi = o.api;\n\t\t\t}\n\n\t\t\tif ( o.hasOwnProperty( 'display_column_settings' ) ) {\n\t\t\t\tdisplay_column_settings = o.display_column_settings;\n\t\t\t}\n\n\t\t\tif ( o.resize_grids ) {\n\t\t\t\tresize_grids = o.resize_grids;\n\t\t\t} else {\n\t\t\t\tresize_grids = false;\n\t\t\t}\n\n\t\t\t//Init paging widget\n\n\t\t\tleft_buttons_div = obj.find( '.left-buttons-div' );\n\t\t\tright_buttons_div = obj.find( '.right-buttons-div' );\n\n\t\t\tstart = obj.find( '.start' );\n\t\t\tlast = obj.find( '.last' );\n\t\t\tnext = obj.find( '.next' );\n\t\t\tend = obj.find( '.end' );\n\n\t\t\tstart.text( $.i18n._( 'Start' ) );\n\t\t\tlast.text( $.i18n._( 'Previous' ) );\n\n\t\t\tnext.text( $.i18n._( 'Next' ) );\n\t\t\tend.text( $.i18n._( 'End' ) );\n\n\t\t\tstart.click( function() {\n\t\t\t\tif ( left_buttons_enable ) {\n\t\t\t\t\tparent_a_combo_box.onADropDownSearch( 'unselect_grid', 'start' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tlast.click( function() {\n\t\t\t\tif ( left_buttons_enable ) {\n\t\t\t\t\tparent_a_combo_box.onADropDownSearch( 'unselect_grid', 'last' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tnext.click( function() {\n\t\t\t\tif ( right_buttons_enable ) {\n\t\t\t\t\tparent_a_combo_box.onADropDownSearch( 'unselect_grid', 'next' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tend.click( function() {\n\t\t\t\tif ( right_buttons_enable ) {\n\t\t\t\t\tparent_a_combo_box.onADropDownSearch( 'unselect_grid', 'end' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tleft_buttons_div.css( 'display', 'none' );\n\t\t\tright_buttons_div.css( 'display', 'none' );\n\n\t\t\tif ( LocalCacheData.paging_type !== 10 ) {\n\t\t\t\t//Click to show more button below the last row\n\t\t\t\tpaging_widget = Global.loadWidgetByName( WidgetNamesDic.PAGING );\n\t\t\t}\n\n\t\t\t//Display 'Displaying XX of xx, Selected: xxx'\n\t\t\ttotal_display_span = obj.find( '.total-number-span' );\n\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\ttotal_display_span.text( $.i18n._( 'Displaying' ) + ' 0 ' + $.i18n._( 'of' ) + ' 0 ' + $.i18n._( 'total' ) );\n\t\t\t} else {\n\t\t\t\ttotal_display_span.text( $.i18n._( 'Displaying' ) + ' 0 - 0 ' + $.i18n._( 'of' ) + ' 0 ' + $.i18n._( 'total' ) + '. ' + $.i18n._( 'Selected' ) + ': 0' );\n\t\t\t}\n\n\t\t\tif ( !allow_multiple_selection ) {\n\t\t\t\tvar unselect_grd_border_div = obj.find( '.unselect-grid-border-div' );\n\t\t\t\tunselect_grd_border_div.addClass( 'single-mode-border' );\n\n\t\t\t}\n\n\t\t\tvar unselect_grd_div = obj.find( '.unselect-grid-div' );\n\n\t\t\tunselect_grd_div.bind( 'click', function() {\n\t\t\t\tfocus_in_select_grid = false;\n\n\t\t\t} );\n\n\t\t\tvar select_grid_div = obj.find( '.select-grid-div' );\n\t\t\tvar left_and_right_div = obj.find( '.left-and-right-div' );\n\t\t\tvar unselected_items_label = obj.find( '#unselected_items_label' );\n\t\t\tvar selected_items_label = obj.find( '#selected_items_label' );\n\n\t\t\tselect_grid_div.bind( 'click', function() {\n\t\t\t\tfocus_in_select_grid = true;\n\n\t\t\t} );\n\n\t\t\tif ( !allow_multiple_selection ) {\n\t\t\t\tselect_grid_div.css( 'display', 'none' );\n\t\t\t\tleft_and_right_div.css( 'display', 'none' );\n\t\t\t\tunselected_items_label.text( $.i18n._( 'SELECT AN ITEM' ) );\n\t\t\t} else {\n\t\t\t\tselect_grid_div.css( 'display', 'inline-block' );\n\t\t\t\tleft_and_right_div.css( 'display', 'inline-block' );\n\t\t\t\tunselected_items_label.text( $.i18n._( 'UNSELECTED ITEMS' ) );\n\t\t\t\tselected_items_label.text( $.i18n._( 'SELECTED ITEMS' ) );\n\t\t\t}\n\n\t\t\tif ( Global.isSet( o.allow_drag_to_order ) ) {\n\t\t\t\tallow_drag_to_order = o.allow_drag_to_order;\n\t\t\t}\n\n\t\t\t//Set UI visibility\n\t\t\tif ( o.display_show_all === true ) {\n\n\t\t\t\tvar show_all_check_box = obj.find( '#show_all_check_box' );\n\n\t\t\t\tshow_all_check_box.css( 'display', 'normal' );\n\t\t\t\tobj.find( '#show_all_check_box_label' ).css( 'display', 'normal' );\n\n\t\t\t\tif ( o.show_all === true ) {\n\t\t\t\t\tshow_all_check_box.prop( 'checked', 'true' );\n\t\t\t\t} else {\n\t\t\t\t\tshow_all_check_box.prop( 'checked', undefined );\n\t\t\t\t}\n\n\t\t\t\tobj.find( '#show_all_check_box' ).click( function() {\n\t\t\t\t\tvar show_all_checked = false;\n\t\t\t\t\tif ( show_all_check_box.prop( 'checked' ) === 'checked' || show_all_check_box[0].checked === true ) {\n\t\t\t\t\t\tshow_all_checked = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tparent_a_combo_box.onShowAll( show_all_checked );\n\n\t\t\t\t} );\n\n\t\t\t} else {\n\t\t\t\tobj.find( '#show_all_check_box' ).css( 'display', 'none' );\n\t\t\t\tobj.find( '#show_all_check_box_label' ).css( 'display', 'none' );\n\n\t\t\t}\n\n\t\t\tif ( o.comboBox ) {\n\t\t\t\tparent_a_combo_box = o.comboBox;\n\n\t\t\t\tif ( parent_a_combo_box.allow_multiple_selection ) {\n\t\t\t\t\tobj.css( 'min-Width', 958 );\n\t\t\t\t} else {\n\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tobj.css( 'min-Width', 958 );\n\t\t\t}\n\n\t\t\tid = o.id;\n\n\t\t\tobj.attr( 'id', o.id + 'ADropDown' );\n\n\t\t\tif ( o.max_height ) {\n\t\t\t\tmax_height = o.max_height;\n\t\t\t}\n\n\t\t\tif ( o.static_height ) {\n\t\t\t\tstatic_height = o.static_height;\n\t\t\t\tmax_height = o.static_height;\n\t\t\t}\n\n\t\t\tif ( o.key ) {\n\t\t\t\tkey = o.key;\n\t\t\t}\n\n\t\t\tif ( o.hasOwnProperty( 'show_search_inputs' ) ) {\n\t\t\t\tshow_search_inputs = o.show_search_inputs;\n\t\t\t}\n\n\t\t\tif ( o.tree_mode ) {\n\t\t\t\ttree_mode = o.tree_mode;\n\t\t\t}\n\n\t\t\tif ( o.on_tree_grid_row_select ) {\n\t\t\t\ton_tree_grid_row_select = o.on_tree_grid_row_select;\n\t\t\t}\n\n\t\t\t//All options set, NOW we init the label and column settings button\n\t\t\tsetLabels();\n\t\t\tinitColumnSettingsBtn();\n\n\t\t\tunselect_grid = obj.find( '.unselect-grid' ); //Must add id for them\n\n\t\t\tunselect_grid.attr( 'id', 'unselect_grid' + '_' + id );\n\t\t\tvar unselect_grid_data = {};\n\t\t\tif ( !tree_mode ) {\n\t\t\t\tunselect_grid_data = {\n\t\t\t\t\twidth: 440,\n\t\t\t\t\t//maxHeight: default_height,\n\t\t\t\t\tonCellSelect: a_dropdown_this.onUnSelectGridSelectRow,\n\t\t\t\t\tondblClickRow: a_dropdown_this.onUnSelectGridDoubleClick,\n\t\t\t\t\tmultiselect: allow_multiple_selection,\n\t\t\t\t\twinMultiSelect: allow_multiple_selection,\n\t\t\t\t\tmultiboxonly: allow_multiple_selection\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tunselect_grid_data = {\n\n\t\t\t\t\twidth: 440,\n\t\t\t\t\t//maxHeight: default_height,\n\t\t\t\t\tsortname: 'id',\n\t\t\t\t\tonCellSelect: a_dropdown_this.onUnSelectGridSelectRow,\n\t\t\t\t\tondblClickRow: a_dropdown_this.onUnSelectGridDoubleClick,\n\t\t\t\t\tmultiselect: allow_multiple_selection,\n\t\t\t\t\twinMultiSelect: allow_multiple_selection,\n\t\t\t\t\tgridview: true,\n\t\t\t\t\ttreeGrid: true,\n\t\t\t\t\ttreeGridModel: 'adjacency',\n\t\t\t\t\ttreedatatype: 'local',\n\t\t\t\t\tExpandColumn: 'name',\n\t\t\t\t\tjsonReader: {\n\t\t\t\t\t\trepeatitems: false,\n\t\t\t\t\t\troot: function( obj ) {\n\t\t\t\t\t\t\treturn obj;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpage: function( obj ) {\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttotal: function( obj ) {\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t},\n\t\t\t\t\t\trecords: function( obj ) {\n\t\t\t\t\t\t\treturn obj.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\tif ( max_height ) {\n\t\t\t\tunselect_grid_data.maxHeight = max_height;\n\t\t\t}\n\n\t\t\tif ( static_height ) {\n\t\t\t\tunselect_grid_data.static_height = static_height;\n\t\t\t}\n\n\t\t\tunselect_grid = new TTGrid( 'unselect_grid' + '_' + id, unselect_grid_data, [] );\n\n\t\t\tselect_grid = obj.find( '.select-grid' );\n\n\t\t\tselect_grid.attr( 'id', 'select_grid' + '_' + id );\n\n\t\t\tselect_grid = new TTGrid( 'select_grid' + '_' + id, {\n\t\t\t\tcontainer_selector: '.select-grid-div',\n\t\t\t\taltRows: true,\n\t\t\t\tdata: [],\n\t\t\t\tdatatype: 'local',\n\t\t\t\tsortable: false,\n\t\t\t\twidth: 440,\n\t\t\t\t//maxHeight: default_height,\n\t\t\t\trowNum: 10000,\n\t\t\t\tcolNames: [],\n\t\t\t\tcolModel: [],\n\t\t\t\tondblClickRow: a_dropdown_this.onSelectGridDoubleClick,\n\t\t\t\tmultiselect: allow_multiple_selection,\n\t\t\t\twinMultiSelect: allow_multiple_selection,\n\t\t\t\tmultiboxonly: true,\n\t\t\t\tviewrecords: true,\n\t\t\t\tonResizeGrid: resize_grids,\n\t\t\t\tmaxHeight: max_height,\n\t\t\t\tstatic_height: static_height ? static_height : null\n\n\t\t\t}, [] );\n\n\t\t\tvar right_arrow = obj.find( '.a-grid-right-arrow' );\n\t\t\tvar left_arrow = obj.find( '.a-grid-left-arrow' );\n\n\t\t\tright_arrow.attr( 'src', Global.getRealImagePath( 'css/global/widgets/awesomebox/images/nav_right.png' ) );\n\t\t\tleft_arrow.attr( 'src', Global.getRealImagePath( 'css/global/widgets/awesomebox/images/nav_left.png' ) );\n\n\t\t\tright_arrow.click( function() {\n\n\t\t\t\tif ( !tree_mode ) {\n\t\t\t\t\tvar grid_selected_id_array = unselect_grid.grid.jqGrid( 'getGridParam', 'selarrrow' );\n\t\t\t\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\t\t\t\tif ( grid_selected_length > 0 ) {\n\t\t\t\t\t\ta_dropdown_this.moveItems( true, grid_selected_id_array );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar selectRow = unselect_grid.grid.jqGrid( 'getGridParam', 'selrow' );\n\t\t\t\t\ta_dropdown_this.moveItems( true, [selectRow] );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tleft_arrow.click( function() {\n\t\t\t\tvar grid_selected_id_array = select_grid.grid.jqGrid( 'getGridParam', 'selarrrow' );\n\t\t\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\t\t\tif ( grid_selected_length > 0 ) {\n\t\t\t\t\ta_dropdown_this.moveItems( false, grid_selected_id_array );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t//Set Action  Buttons\n\n\t\t\t//UnSelect grid\n\t\t\tvar unselect_all_btn = obj.find( '#unselect_all_btn' );\n\n\t\t\tunselect_all_btn.click( function() {\n\t\t\t\tselectAllInGrid( unselect_grid );\n\t\t\t} );\n\n\t\t\tvar un_deselect_all_Btn = obj.find( '#unDeselectAllBtn' );\n\n\t\t\tun_deselect_all_Btn.click( function() {\n\t\t\t\tselectAllInGrid( unselect_grid, true );\n\n\t\t\t} );\n\n\t\t\tvar un_clear_btn = obj.find( '#un_clear_btn' );\n\n\t\t\tun_clear_btn.click( function() {\n\t\t\t\tcleanAllInGrid( unselect_grid, true );\n\n\t\t\t} );\n\n\t\t\tif ( tree_mode || !allow_multiple_selection ) {\n\t\t\t\tunselect_all_btn.css( 'display', 'none' );\n\t\t\t\tun_deselect_all_Btn.css( 'display', 'none' );\n\t\t\t\tun_clear_btn.css( 'display', 'none' );\n\t\t\t} else {\n\t\t\t\tunselect_all_btn.css( 'display', 'inline-block' );\n\t\t\t\tun_deselect_all_Btn.css( 'display', 'inline-block' );\n\t\t\t\tun_clear_btn.css( 'display', 'inline-block' );\n\t\t\t}\n\n\t\t\t//Select Grid\n\t\t\tvar select_all_btn = obj.find( '#select_all_btn' );\n\n\t\t\tselect_all_btn.click( function() {\n\t\t\t\tselectAllInGrid( select_grid );\n\n\t\t\t} );\n\n\t\t\tvar delete_all_btn = obj.find( '#delete_all_btn' );\n\n\t\t\tdelete_all_btn.click( function() {\n\t\t\t\tselectAllInGrid( select_grid, true );\n\n\t\t\t} );\n\n\t\t\tvar clear_btn = obj.find( '#clear_btn' );\n\n\t\t\tclear_btn.click( function() {\n\t\t\t\tcleanAllInGrid( select_grid );\n\t\t\t} );\n\n\t\t\tvar select_grid_close_btn = obj.find( '#select_grid_close_btn' );\n\t\t\tvar unselect_grid_close_btn = obj.find( '#unselect_grid_close_btn' );\n\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tunselect_grid_close_btn.css( 'display', 'none' );\n\t\t\t} else {\n\t\t\t\tunselect_grid_close_btn.css( 'display', 'inline-block' );\n\t\t\t\tunselect_grid_close_btn.click( function() {\n\t\t\t\t\ta_dropdown_this.trigger( 'close', [a_dropdown_this] );\n\t\t\t\t} );\n\t\t\t}\n\t\t\tif ( Global.isSet( o.display_close_btn ) && !o.display_close_btn ) {\n\t\t\t\tselect_grid_close_btn.css( 'display', 'none' );\n\t\t\t} else {\n\t\t\t\tselect_grid_close_btn.css( 'display', 'inline-block' );\n\t\t\t\tselect_grid_close_btn.click( function() {\n\t\t\t\t\ta_dropdown_this.trigger( 'close', [a_dropdown_this] );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t//Move all records from target grid to another\n\t\t\tfunction cleanAllInGrid( target, left_to_right ) {\n\n\t\t\t\ta_dropdown_this.removeNoResultCover( 'unselect_grid' );\n\t\t\t\ta_dropdown_this.removeNoResultCover( 'select_grid' );\n\n\t\t\t\tisChanged = true;\n\t\t\t\tvar finalArray = [];\n\t\t\t\tif ( left_to_right ) {\n\t\t\t\t\tvar source_grid = unselect_grid;\n\t\t\t\t\tvar target_grid = select_grid;\n\t\t\t\t\tvar source_data = unselect_grid.getData();\n\t\t\t\t\tvar target_data = select_grid.getData();\n\t\t\t\t} else {\n\t\t\t\t\tsource_grid = select_grid;\n\t\t\t\t\ttarget_grid = unselect_grid;\n\t\t\t\t\tsource_data = select_grid.getData();\n\t\t\t\t\ttarget_data = unselect_grid.getData();\n\t\t\t\t}\n\n\t\t\t\tif ( a_dropdown_this.isLocalSearchMode() ) {\n\t\t\t\t\t//Only move visible items while on local search mode.\n\t\t\t\t\tvar [keep_items, move_items] = _.partition( source_data, ( item ) => {\n\t\t\t\t\t\treturn item.hidden;\n\t\t\t\t\t} );\n\n\t\t\t\t\tsource_grid.setData( keep_items );\n\t\t\t\t\ttarget_grid.setData( target_data.concat( move_items ) );\n\n\t\t\t\t\ta_dropdown_this.localSearch( 'unselect', unselect_grid_search_map, move_items );\n\t\t\t\t\ta_dropdown_this.localSearch( 'select', select_grid_search_map, move_items );\n\t\t\t\t}\n\t\t\t\telse if ( tree_mode ) {\n\t\t\t\t\tsource_grid.clearGridData();\n\t\t\t\t\tsource_grid.grid.trigger( 'reloadGrid' );\n\t\t\t\t\ta_dropdown_this.setTotalDisplaySpan();\n\t\t\t\t\ta_dropdown_this.getUnSelectGrid().grid.find( 'tr' ).removeClass( 'selected-tree-cell' );\n\t\t\t\t} else {\n\t\t\t\t\tfinalArray = target_data.concat( source_data );\n\t\t\t\t\ttarget_grid.setData( finalArray );\n\n\t\t\t\t\t//#2721 - This helps fixes a bug where if you expand a awesomebox (ie: Edit Policy Group, Absence Policys), on right-hand side click clear search. Click Move All on right-hand side. Collapse, expand, click move All left-hand side. Both sides are now blank.\n\t\t\t\t\tif ( left_to_right ) {\n\t\t\t\t\t\treal_selected_items = finalArray; // Fixes #2721\n\t\t\t\t\t} else {\n\t\t\t\t\t\treal_selected_items = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tsource_grid.clearGridData();\n\t\t\t\t\tsource_grid.grid.trigger( 'reloadGrid' );\n\t\t\t\t\ta_dropdown_this.setTotalDisplaySpan();\n\t\t\t\t}\n\t\t\t\tif ( !parent_a_combo_box ) {\n\t\t\t\t\ta_dropdown_this.trigger( 'formItemChange', [a_dropdown_this] );\n\t\t\t\t}\n\n\t\t\t\ta_dropdown_this.setSelectGridDragAble();\n\t\t\t\ta_dropdown_this.setUnSelectGridDragAble();\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.ADropDown.defaults = {};\n\t$.fn.ADropDown.html_template = `\n\t<div class=\"a-dropdown\">\n\t\t<div class=\"unselect-grid-div\">\n\t\t\t<div class=\"unselect-grid-title-bar\">\n\t\t\t\t<div class=\"edit-columnIcon-div\">\n\t\t\t\t\t<img class=\"edit_column_icon\">\n\t\t\t\t</div>\n\t\t\t\t<span id=\"unSelectedItemsLabel\" class=\"a-grid-title\"></span>\n\t\t\t\t<button id=\"unselect_grid_close_btn\" class=\"a-grid-close-button\"></button>\n\t\t\t\t<button id=\"unDeselectAllBtn\" class=\"a-grid-button\"></button>\n\t\t\t\t<button id=\"unselect_all_btn\" class=\"a-grid-button\"></button>\n\t\t\t\t<button id=\"un_clear_btn\" class=\"a-grid-button\"></button>\n\t\t\t\t<span id=\"show_all_check_box_label\" class=\"a-grid-checkbox-label\"></span>\n\t\t\t\t<input id=\"show_all_check_box\" type=\"checkbox\" class=\"a-grid-checkbox\" value=\"Show All\">\n\t\t\t</div>\n\t\t\t<div class=\"unselect-grid-border-div\">\n\t\t\t\t<div class=\"unselect-grid-search-div\"></div>\n\t\t\t\t<table class=\"a-grid unselect-grid\" id=\"unselect_grid\"></table>\n\t\t\t</div>\n\t\t\t<div class=\"unselect-grid-bottom-bar\">\n\t\t\t\t<div class=\"left-buttons-div\">\n\t\t\t\t\t<a class=\"double-left-arrow\" title=\"Start\"></a>\n\t\t\t\t\t<span class=\"paging-2-span start\"></span>\n\t\t\t\t\t<a class=\"left-arrow\"></a>\n\t\t\t\t\t<span class=\"paging-2-span last\"></span>\n\t\t\t\t</div>\n\t\t\t\t<span class=\"total-number-span\"></span>\n\t\t\t\t<div class=\"right-buttons-div\">\n\t\t\t\t\t<span class=\"paging-2-span next\"></span>\n\t\t\t\t\t<a class=\"right-arrow\"></a>\n\t\t\t\t\t<span class=\"paging-2-span end\"></span>\n\t\t\t\t\t<a class=\"double-right-arrow\"></a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"left-and-right-div\">\n\t\t\t<div class=\"right-arrow-div\"><img class=\"a-grid-right-arrow\"></div>\n\t\t\t<div class=\"left-arrow-div\"><img class=\"a-grid-left-arrow\"></div>\n\t\t</div>\n\t\t<div class=\"select-grid-div\">\n\t\t\t<div class=\"select-grid-title-bar\">\n\t\t\t\t<span id=\"selectedItemsLabel\" class=\"a-grid-title\"> SELECTED ITEMS</span>\n\t\t\t\t<button id=\"select_grid_close_btn\" class=\"a-grid-close-button\"></button>\n\t\t\t\t<button id=\"delete_all_btn\" class=\"a-grid-button\">Deselect All</button>\n\t\t\t\t<button id=\"select_all_btn\" class=\"a-grid-button\">Select All</button>\n\t\t\t\t<button id=\"clear_btn\" class=\"a-grid-button\">Move All</button>\n\t\t\t</div>\n\t\t\t<div class=\"select-grid-border-div\">\n\t\t\t\t<div class=\"select-grid-search-div\"></div>\n\t\t\t\t<table class=\"a-grid select-grid\" id=\"select_grid\"></table>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`;\n\n} )( jQuery );\n"],"names":["$","options","opts","unselect_grid","select_grid","total_display_span","static_source_data","id","key","parent_a_combo_box","a_dropdown_this","unselect_grid_header_array","select_grid_header_array","show_search_inputs","local_search_mode","local_search_optional_filter","unselect_grid_search_map","select_grid_search_map","unselect_grid_sort_map","select_grid_sort_map","select_item","tree_mode","on_tree_grid_row_select","unselect_grid_last_row","select_grid_last_row","allow_multiple_selection","pager_data","paging_widget","real_selected_items","start","last","next","end","left_buttons_div","right_buttons_div","left_buttons_enable","right_buttons_enable","field","error_tip_box","error_string","default_height","unselect_grid_no_result_box","select_grid_no_result_box","box_width","focus_in_select_grid","auto_sort","isChanged","api","column_editor","column_option_key","display_column_settings","quick_search_timer","quick_search_typed_keys","quick_search_dic","max_height","static_height","resize_grids","selectAllInGrid","target","deSelect","source_data","len","i","item","value","val","errStr","show","isWarning","sec","ids","select_items","columns","column_info","column_header","onUnSelectColumnHeaderClick","e","headerE","column_model","reset","targetName","sort_map","nextSort","found","sortItem","headerArray","tGridHeader","_a","sortArrayLen","j","sortField","onSelectColumnHeaderClick","target_grid","content","temp_val","content_key","content_id_key","retval","all_records","selected_ids","n","primary_grid","secondary_grid","p_data","s_data","temp","offset","min_grid_width","max_grid_width","primary_grid_width","secondary_grid_width","scroll_position","grid_data","col_model","k","el","index","iRow","$td","iCol","p","cm","obj","top_offset","bottom_offset","new_height","source_height","cell_value","related_data","row","selected_items","m","unselect_grid_search_div","select_grid_search_div","grid_width","tree_columns","_","search_div","first_column_width","search_input_array","header","search_input","searchVal","close_btn","s_i","grid_type","grid_search_map","optional_filter","search_grid","search_items","meetAllSearchCriteria","wildcardSearch","search_term","search_regex","str","search_inputs","unselect_grid_width","unselect_grid_search_div_width","outer_box_width","inner_box_width","max_width","newWidth","width","searchResult","all_columns","tmp_select_items","all_columns_len","selectItemLen","fromAllColumn","array","no_result_box","grid_div","highlight_Rows","trs","event","container","clone_row","grid_selected_id_array","grid_selected_length","$$this","selectRow","parent_grid_container","firstTr","rows","target_row_index","drag_item_index","itemLabel","index1","value1","rowLabel","$this","totalRows","unselect_grid_length","totalInfo","selected_count","remain_count","left_to_right","target_row_id","added_items","editable_unselect_items","$el","tr_id","editable_select_items","moved_items_array","source_grid","target_data","selected_item_id","from_all_columns_item","target_data_len","find","y","existed_item","moved_items","current_items_in_selected_grid","height","initColumnSettingsBtn","edit_icon_div","edit_icon","columns_result","columns_result_data","setLabels","unselected_items_label","un_deselect_all_btn","unselect_all_btn","un_clear_btn","show_all_check_box_label","selectedItemsLabel","delete_all_btn","select_all_btn","clear_btn","next_index","next_select_item","focus_target","search_index","tds","td","z","cleanAllInGrid","finalArray","keep_items","move_items","o","unselect_grd_border_div","unselect_grd_div","select_grid_div","left_and_right_div","selected_items_label","show_all_check_box","show_all_checked","unselect_grid_data","right_arrow","left_arrow","un_deselect_all_Btn","select_grid_close_btn","unselect_grid_close_btn","jQuery"],"mappings":"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"}