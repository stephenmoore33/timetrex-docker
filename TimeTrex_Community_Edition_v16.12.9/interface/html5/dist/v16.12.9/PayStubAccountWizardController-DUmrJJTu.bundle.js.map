{"version":3,"file":"PayStubAccountWizardController-DUmrJJTu.bundle.js","sources":["../../views/wizard/pay_stub_account/PayStubAccountWizardController.js"],"sourcesContent":["export class PayStubAccountWizardController extends BaseWizardController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '.wizard-bg'\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.title = $.i18n._( 'Migrate PS Accounts' );\n\t\tthis.steps = 2;\n\t\tthis.current_step = 1;\n\t\t$( this.el ).width( 1010 );\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tsuper.render();\n\t\tthis.initCurrentStep();\n\t}\n\n\t//Create each page UI\n\tbuildCurrentStepUI() {\n\t\tthis.content_div.empty();\n\t\tthis.stepsWidgetDic[this.current_step] = {};\n\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tvar label = this.getLabel();\n\t\t\t\tlabel.html( $.i18n._( 'This wizard will automatically create Pay Stub Amendments to migrate Year-To-Date amounts from one Pay Stub Account to another as of a specific effective date.' ) + '<br><br>' );\n\t\t\t\tthis.content_div.append( label );\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\t//Source Pay Stub Account\n\t\t\t\tvar form_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\tform_item.css( 'margin-top', '15px' );\n\t\t\t\tvar form_item_label = form_item.find( '.form-item-label' );\n\t\t\t\tvar form_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\tvar a_combobox = this.getAComboBox( TTAPI.APIPayStubEntryAccount, true, 'global_PayStubAccount', 'src_ids' );\n\t\t\t\tform_item_label.text( $.i18n._( 'Source Pay Stub Account(s)' ) );\n\t\t\t\tform_item_input_div.append( a_combobox );\n\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][a_combobox.getField()] = a_combobox;\n\n\t\t\t\t// Destination Pay Stub Account\n\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\ta_combobox = this.getAComboBox( TTAPI.APIPayStubEntryAccount, false, 'global_PayStubAccount', 'dst_id' );\n\t\t\t\tform_item_label.text( $.i18n._( 'Destination Pay Stub Account' ) );\n\t\t\t\tform_item_input_div.append( a_combobox );\n\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][a_combobox.getField()] = a_combobox;\n\n\t\t\t\t//Effective Date\n\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\tvar effective_date = this.getDatePicker( 'effective_date' );\n\t\t\t\tform_item_label.text( $.i18n._( 'Effective Date' ) );\n\t\t\t\tform_item_input_div.append( effective_date );\n\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][effective_date.getField()] = effective_date;\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tbuildCurrentStepData() {\n\t\tvar $this = this;\n\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 2:\n\t\t\t\tif ( !current_step_data ) {\n\t\t\t\t\tvar date = new Date();\n\t\t\t\t\tcurrent_step_ui.effective_date.setValue( date.format() );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonDoneClick() {\n\t\tvar $this = this;\n\t\tsuper.onDoneClick();\n\t\tthis.saveCurrentStep();\n\t\tvar src_ids = this.stepsDataDic[2].src_ids;\n\t\tvar dst_id = this.stepsDataDic[2].dst_id;\n\t\tvar effective_date = this.stepsDataDic[2].effective_date;\n\t\tvar ps_api = TTAPI.APIPayStubEntryAccount;\n\t\tps_api.migratePayStubEntryAccount( src_ids, dst_id, effective_date, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( result_data ) {\n\t\t\t\t\t$this.onCloseClick();\n\t\t\t\t\tif ( $this.call_back ) {\n\t\t\t\t\t\t$this.call_back();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tTAlertManager.showErrorAlert( result );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentStepValues() {\n\n\t\tif ( !this.stepsDataDic[this.current_step] ) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\t}\n\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tif ( current_step_data.src_ids ) {\n\t\t\t\t\tcurrent_step_ui.src_ids.setValue( current_step_data.src_ids );\n\t\t\t\t}\n\t\t\t\tif ( current_step_data.dst_id ) {\n\t\t\t\t\tcurrent_step_ui.dst_id.setValue( current_step_data.dst_id );\n\t\t\t\t}\n\t\t\t\tif ( current_step_data.effective_date ) {\n\t\t\t\t\tcurrent_step_ui.effective_date.setValue( current_step_data.effective_date );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsaveCurrentStep() {\n\t\tthis.stepsDataDic[this.current_step] = {};\n\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tcurrent_step_data.src_ids = current_step_ui.src_ids.getValue();\n\t\t\t\tcurrent_step_data.dst_id = current_step_ui.dst_id.getValue();\n\t\t\t\tcurrent_step_data.effective_date = current_step_ui.effective_date.getValue();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n}"],"names":["PayStubAccountWizardController","options","_","$","label","form_item","form_item_label","form_item_input_div","a_combobox","effective_date","current_step_data","current_step_ui","date","$this","src_ids","dst_id","ps_api","result","result_data"],"mappings":"uDAAO,MAAMA,UAAuC,oBAAqB,CACxE,YAAaC,EAAU,GAAK,CAC3BC,EAAE,SAAUD,EAAS,CACpB,GAAI,YACP,GAEE,MAAOA,CAAO,CACd,CAED,KAAMA,EAAU,CAEf,KAAK,MAAQE,EAAE,KAAK,EAAG,qBAAqB,EAC5C,KAAK,MAAQ,EACb,KAAK,aAAe,EACpBA,EAAG,KAAK,EAAI,EAAC,MAAO,IAAI,EACxB,KAAK,OAAM,CACX,CAED,QAAS,CACR,MAAM,OAAM,EACZ,KAAK,gBAAe,CACpB,CAGD,oBAAqB,CAIpB,OAHA,KAAK,YAAY,QACjB,KAAK,eAAe,KAAK,YAAY,EAAI,CAAA,EAEhC,KAAK,aAAY,CACzB,IAAK,GACJ,IAAIC,EAAQ,KAAK,WACjBA,EAAM,KAAMD,EAAE,KAAK,EAAG,iKAAiK,EAAK,YAC5L,KAAK,YAAY,OAAQC,GACzB,MACD,IAAK,GAEJ,IAAIC,EAAYF,EAAG,OAAO,WAAY,qDAAuD,CAAA,EAC7FE,EAAU,IAAK,aAAc,QAC7B,IAAIC,EAAkBD,EAAU,KAAM,kBAAkB,EACpDE,EAAsBF,EAAU,KAAM,sBAAsB,EAC5DG,EAAa,KAAK,aAAc,MAAM,uBAAwB,GAAM,wBAAyB,WACjGF,EAAgB,KAAMH,EAAE,KAAK,EAAG,4BAA4B,GAC5DI,EAAoB,OAAQC,GAC5B,KAAK,YAAY,OAAQH,GACzB,KAAK,eAAe,KAAK,YAAY,EAAEG,EAAW,SAAQ,CAAE,EAAIA,EAGhEH,EAAYF,EAAG,OAAO,WAAY,qDAAuD,CAAA,EACzFG,EAAkBD,EAAU,KAAM,oBAClCE,EAAsBF,EAAU,KAAM,wBACtCG,EAAa,KAAK,aAAc,MAAM,uBAAwB,GAAO,wBAAyB,UAC9FF,EAAgB,KAAMH,EAAE,KAAK,EAAG,8BAA8B,GAC9DI,EAAoB,OAAQC,GAC5B,KAAK,YAAY,OAAQH,GACzB,KAAK,eAAe,KAAK,YAAY,EAAEG,EAAW,SAAQ,CAAE,EAAIA,EAGhEH,EAAYF,EAAG,OAAO,WAAY,qDAAuD,CAAA,EACzFG,EAAkBD,EAAU,KAAM,oBAClCE,EAAsBF,EAAU,KAAM,wBACtC,IAAII,EAAiB,KAAK,cAAe,gBAAgB,EACzDH,EAAgB,KAAMH,EAAE,KAAK,EAAG,gBAAgB,GAChDI,EAAoB,OAAQE,GAC5B,KAAK,YAAY,OAAQJ,GACzB,KAAK,eAAe,KAAK,YAAY,EAAEI,EAAe,SAAQ,CAAE,EAAIA,EAEpE,KACD,CACD,CAED,sBAAuB,CAEtB,IAAIC,EAAoB,KAAK,aAAa,KAAK,YAAY,EACvDC,EAAkB,KAAK,eAAe,KAAK,YAAY,EAE3D,OAAS,KAAK,aAAY,CACzB,IAAK,GACJ,GAAK,CAACD,EAAoB,CACzB,IAAIE,EAAO,IAAI,KACfD,EAAgB,eAAe,SAAUC,EAAK,OAAQ,CAAA,CACtD,CACD,KACD,CACD,CAED,aAAc,CACb,IAAIC,EAAQ,KACZ,MAAM,YAAW,EACjB,KAAK,gBAAe,EACpB,IAAIC,EAAU,KAAK,aAAa,CAAC,EAAE,QAC/BC,EAAS,KAAK,aAAa,CAAC,EAAE,OAC9BN,EAAiB,KAAK,aAAa,CAAC,EAAE,eACtCO,EAAS,MAAM,uBACnBA,EAAO,2BAA4BF,EAASC,EAAQN,EAAgB,CACnE,SAAU,SAAUQ,EAAS,CAC5B,IAAIC,EAAcD,EAAO,YACpBC,GACJL,EAAM,aAAY,EACbA,EAAM,WACVA,EAAM,UAAS,GAGhB,cAAc,eAAgBI,EAE/B,CACJ,EACE,CAED,sBAAuB,CAEtB,GAAM,KAAK,aAAa,KAAK,YAAY,EAGxC,IAAIP,EAAoB,KAAK,aAAa,KAAK,YAAY,EACvDC,EAAkB,KAAK,eAAe,KAAK,YAAY,MAH3D,QAMD,OAAS,KAAK,aAAY,CACzB,IAAK,GACJ,MACD,IAAK,GACCD,EAAkB,SACtBC,EAAgB,QAAQ,SAAUD,EAAkB,OAAO,EAEvDA,EAAkB,QACtBC,EAAgB,OAAO,SAAUD,EAAkB,MAAM,EAErDA,EAAkB,gBACtBC,EAAgB,eAAe,SAAUD,EAAkB,cAAc,EAE1E,KACD,CACD,CAED,iBAAkB,CACjB,KAAK,aAAa,KAAK,YAAY,EAAI,CAAA,EACvC,IAAIA,EAAoB,KAAK,aAAa,KAAK,YAAY,EACvDC,EAAkB,KAAK,eAAe,KAAK,YAAY,EAC3D,OAAS,KAAK,aAAY,CACzB,IAAK,GACJ,MACD,IAAK,GACJD,EAAkB,QAAUC,EAAgB,QAAQ,SAAQ,EAC5DD,EAAkB,OAASC,EAAgB,OAAO,SAAQ,EAC1DD,EAAkB,eAAiBC,EAAgB,eAAe,SAAQ,EAC1E,KACD,CACD,CAEF"}