import{_ as p,j as a}from"./vendor-tTApdY0Y.bundle.js";class o extends BaseWizardController{constructor(s={}){p.defaults(s,{el:".wizard"}),super(s)}init(s){this.title=a.i18n._("Reset Password"),this.steps=1,this.current_step=1,this.default_data&&typeof this.default_data.api_class<"u"?this.api=this.default_data.api_class:this.api=TTAPI.APIAuthentication,this.render()}render(){super.render(),this.initCurrentStep()}buildCurrentStepUI(){switch(this.content_div.empty(),this.stepsWidgetDic[this.current_step]={},this.current_step){case 1:var s=this.getLabel();s.text(this.default_data?this.default_data.message:""),this.content_div.append(s);var t=a(Global.loadWidget("global/widgets/wizard_form_item/WizardFormItem.html")),e=t.find(".form-item-label"),i=t.find(".form-item-input-div"),r=this.getText();r.text(this.default_data?this.default_data.user_name:""),e.text(a.i18n._("User Name")),i.append(r),this.content_div.append(t),t=a(Global.loadWidget("global/widgets/wizard_form_item/WizardFormItem.html")),e=t.find(".form-item-label"),i=t.find(".form-item-input-div");var d=this.getPasswordInput("current_password");e.text(a.i18n._("Current Password")),i.append(d),this.content_div.append(t),t=a(Global.loadWidget("global/widgets/wizard_form_item/WizardFormItem.html")),e=t.find(".form-item-label"),i=t.find(".form-item-input-div");var n=this.getPasswordInput("new_password");e.text(a.i18n._("New Password")),i.append(n),this.content_div.append(t),t=a(Global.loadWidget("global/widgets/wizard_form_item/WizardFormItem.html")),e=t.find(".form-item-label"),i=t.find(".form-item-input-div");var l=this.getPasswordInput("confirm_password");e.text(a.i18n._("New Password (Confirm)")),i.append(l),this.content_div.append(t),this.stepsWidgetDic[this.current_step][d.getField()]=d,this.stepsWidgetDic[this.current_step][n.getField()]=n,this.stepsWidgetDic[this.current_step][l.getField()]=l,d.focus();break}}saveCurrentStep(){this.stepsDataDic[this.current_step]={};var s=this.stepsDataDic[this.current_step],t=this.stepsWidgetDic[this.current_step];switch(this.current_step){default:for(var e in t)t.hasOwnProperty(e)&&(s[e]=t[e].getValue());break}}buildCurrentStepData(){}onCloseClick(){a(this.el).remove(),LocalCacheData.current_open_wizard_controllers=LocalCacheData.current_open_wizard_controllers.filter(s=>s.wizard_id!==this.wizard_id),LocalCacheData.extra_filter_for_next_open_view=null}onDoneClick(){var s=this;super.onDoneClick(),this.saveCurrentStep();var t=this.stepsDataDic[1].current_password,e=this.stepsDataDic[1].new_password,i=this.stepsDataDic[1].confirm_password;if(this.stepsWidgetDic[1].current_password.clearErrorStyle(),this.stepsWidgetDic[1].new_password.clearErrorStyle(),this.stepsWidgetDic[1].confirm_password.clearErrorStyle(),!t)this.stepsWidgetDic[1].current_password.setErrorStyle(a.i18n._("Current password can't be empty"),!0);else if(!e)this.stepsWidgetDic[1].new_password.setErrorStyle(a.i18n._("New password can't be empty"),!0);else if(e!==i)this.stepsWidgetDic[1].new_password.setErrorStyle(a.i18n._("New password does not match"),!0);else{if(!this.default_data||!this.default_data.user_name){TAlertManager.showAlert(a.i18n._("Invalid user name"));return}this.api.changePassword(this.default_data.user_name,t,e,i,{onResult:function(r){r.isValid()?(s.onCloseClick(),s.call_back&&s.call_back()):TAlertManager.showErrorAlert(r)}})}}}o.type="";export{o as ResetPasswordWizardController};
//# sourceMappingURL=ResetPasswordWizardController-DRfupmza.bundle.js.map
