import{_ as V,j as l}from"./vendor-tTApdY0Y.bundle.js";class O extends BaseViewController{constructor(t={}){V.defaults(t,{el:"#recurring_schedule_template_control_view_container",sub_document_view_controller:null,document_object_type_id:null,recurring_schedule_template_api:null,schedule_api:null,recurring_schedule_status_array:null}),super(t)}init(t){this.edit_view_tpl="RecurringScheduleTemplateControlEditView.html",this.permission_id="recurring_schedule_template",this.viewId="RecurringScheduleTemplateControl",this.script_name="RecurringScheduleTemplateControlView",this.table_name_key="recurring_schedule_template_control",this.context_menu_name=l.i18n._("Recurring Templates"),this.navigation_label=l.i18n._("Recurring Template"),this.api=TTAPI.APIRecurringScheduleTemplateControl,this.schedule_api=TTAPI.APISchedule,this.recurring_schedule_template_api=TTAPI.APIRecurringScheduleTemplate,this.document_object_type_id=10,this.event_bus=new TTEventBus({view_id:this.viewId}),this.render(),this.buildContextMenu(),this.initData()}initOptions(){var t=this;this.initDropDownOption("status",null,this.recurring_schedule_template_api,function(i){i=i.getResult(),t.recurring_schedule_status_array=Global.buildRecordArray(i)})}buildEditViewUI(){super.buildEditViewUI();var t={tab_recurring_template:{label:l.i18n._("Recurring Template"),html_template:this.getRecurringTemplateTabHtml()},tab_attachment:!0,tab_audit:!0};this.setTabModel(t);var i;this.navigation.AComboBox({api_class:TTAPI.APIRecurringScheduleTemplateControl,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_recurring_template_control",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation(),Global.UNIT_TEST_MODE==!1&&(this.edit_view_tab.css("max-width","none"),Global.getProductEdition()>=20?this.edit_view_tab.css("min-width","1250px"):Global.getProductEdition()>=15?this.edit_view_tab.css("min-width","1050px"):this.edit_view_tab.css("min-width","950px"));var e=this.edit_view_tab.find("#tab_recurring_template"),d=e.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(d),i=Global.loadWidgetByName(FormItemType.TEXT_INPUT),i.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn(l.i18n._("Name"),i,d,""),i.parent().width("45%"),i=Global.loadWidgetByName(FormItemType.TEXT_INPUT),i.TTextInput({field:"description",width:"100%"}),this.addEditFieldToColumn(l.i18n._("Description"),i,d),i.parent().width("45%"),i=Global.loadWidgetByName(FormItemType.AWESOME_BOX),i.AComboBox({api_class:TTAPI.APIUser,allow_multiple_selection:!1,layout_name:"global_user",show_search_inputs:!0,set_empty:!0,field:"created_by_id"}),this.addEditFieldToColumn(l.i18n._("Created By"),i,d),i.parent().width("45%");var a=e.find(".inside-editor-div"),n={week:l.i18n._("Week"),status:l.i18n._("Status"),week_names:"S&nbsp;&nbsp;M&nbsp;&nbsp;T&nbsp;&nbsp;W&nbsp;&nbsp;T&nbsp&nbsp;F&nbsp;&nbsp;S",shift_time:l.i18n._("Shift Time"),total:l.i18n._("Total"),schedule_policy:l.i18n._("Schedule Policy"),branch_department:l.i18n._("Branch/Department"),job_task:l.i18n._("Job/Task/Tags"),open_shift_multiplier:l.i18n._("Open Shift Multiplier")};this.editor=Global.loadWidgetByName(FormItemType.INSIDE_EDITOR),this.editor.InsideEditor({title:l.i18n._("NOTE: To set different In/Out times for each day of the week, add additional weeks all with the same week number."),addRow:this.insideEditorAddRow,removeRow:this.insideEditorRemoveRow,getValue:this.insideEditorGetValue,setValue:this.insideEditorSetValue,parent_controller:this,api:this.recurring_schedule_template_api,render:r(),render_args:n,render_inline_html:!0,row_render:o()});function r(){var s="";return Global.getProductEdition()>=20?s=`
				<table class="inside-editor-render">
					<tr class="title">
						<td style="width: 50px"><%= week %></td>
						<td style="width: 100px"><%= status %></td>
						<td style="width: 153px"><%= week_names %></td>
						<td style="width: 140px"><%= shift_time %></td>
						<td style="width: 45px"><%= total %></td>
						<td style="width: 140px"><%= schedule_policy %></td>
						<td style="width: 230px"><%= branch_department %></td>
						<td style="width: 190px"><%= job_task %></td>
						<td style="width: 100px"><%= open_shift_multiplier %></td>
					</tr>
				</table>`:Global.getProductEdition()>=15?s=`
				<table class="inside-editor-render">
					<tr class="title">
						<td style="width: 50px"><%= week %></td>
						<td style="width: 100px"><%= status %></td>
						<td style="width: 153px"><%= week_names %></td>
						<td style="width: 140px"><%= shift_time %></td>
						<td style="width: 45px"><%= total %></td>
						<td style="width: 140px"><%= schedule_policy %></td>
						<td style="width: 230px"><%= branch_department %></td>
						<td style="width: 100px"><%= open_shift_multiplier %></td>
					</tr>
				</table>`:s=`
				<table class="inside-editor-render">
					<tr class="title">
						<td style="width: 50px"><%= week %></td>
						<td style="width: 100px"><%= status %></td>
						<td style="width: 153px"><%= week_names %></td>
						<td style="width: 140px"><%= shift_time %></td>
						<td style="width: 45px"><%= total %></td>
						<td style="width: 140px"><%= schedule_policy %></td>
						<td style="width: 230px"><%= branch_department %></td>
					</tr>
				</table>`,s}function o(){var s="";return Global.getProductEdition()>=20?s=`<tr class="inside-editor-row data-row">
							<td class=""></td>
							<td class=""></td>
							<td class="week-cell"></td>
							<td class=""></td>
							<td class=""></td>
							<td class=""></td>
							<td class=""></td>
							<td class=""></td>
							<td class=""></td>
							<td class="cell control-icon">
								<button class="plus-icon" onclick=""></button>
							</td>
							<td class="cell control-icon">
								<button class="minus-icon " onclick=""></button>
							</td>
						</tr>`:Global.getProductEdition()>=15?s=`<tr class="inside-editor-row data-row">
							<td class=""></td>
							<td class=""></td>
							<td class="week-cell"></td>
							<td class=""></td>
							<td class=""></td>
							<td class=""></td>
							<td class=""></td>
							<td class=""></td>
							<td class="cell control-icon">
								<button class="plus-icon" onclick=""></button>
							</td>
							<td class="cell control-icon">
								<button class="minus-icon " onclick=""></button>
							</td>
						</tr>`:s=`
					<tr class="inside-editor-row data-row">
						<td class=""></td>
						<td class=""></td>
						<td class="week-cell"></td>
						<td class=""></td>
						<td class=""></td>
						<td class=""></td>
						<td class=""></td>
						<td class="cell control-icon">
							<button class="plus-icon" onclick=""></button>
						</td>
						<td class="cell control-icon">
							<button class="minus-icon " onclick=""></button>
						</td>
					</tr>`,s}a.append(this.editor)}setEditViewDataDone(){super.setEditViewDataDone(),this.is_mass_editing?this.edit_view.find(".inside-editor-div").hide():(this.initInsideEditorData(),this.edit_view.find(".inside-editor-div").show())}initInsideEditorData(){var t=this,i={};i.filter_data={},(!this.current_edit_record||!this.current_edit_record.id)&&!this.copied_record_id?(t.editor.removeAllRows(),t.editor.getDefaultData()):(i.filter_data.recurring_schedule_template_control_id=this.current_edit_record.id?this.current_edit_record.id:this.copied_record_id,this.copied_record_id="",t.recurring_schedule_template_api["get"+t.recurring_schedule_template_api.key_name](i,{onResult:function(e){if(t.edit_view){var d=e.getResult();t.editor.setValue(d)}}}))}insideEditorAddRow(t,i){var e,d=this;if(!t)this.getDefaultData(i);else{var e,a,n=t.id&&this.parent_controller.current_edit_record.id?t.id:TTUUID.generateUUID(),r=this.getRowRender(),o=this.getRender(),s={};e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"week",width:40}),e.setValue(t.week?t.week:1),s[e.getField()]=e,r.children().eq(0).append(e),e.attr("recurring_schedule_template_id",n),e.attr("date_stamp",t.date_stamp),this.setWidgetEnableBaseOnParentController(e),a=l("<div class='recurring-template-status-div'></div>"),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"status_id"}),e.setSourceData(this.parent_controller.recurring_schedule_status_array),e.setValue(t.status_id?t.status_id:10),s[e.getField()]=e,e.bind("formItemChange",function(v,c){c.getValue()==10?s.absence_policy_id.hide():c.getValue()==20&&s.absence_policy_id.show()}),a.append(e),this.setWidgetEnableBaseOnParentController(e),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIAbsencePolicy,width:132,allow_multiple_selection:!1,layout_name:"global_absences",show_search_inputs:!0,set_empty:!0,field:"absence_policy_id"}),e.css("position","absolute"),e.css("left","0"),e.css("top","30px"),e.css("z-index","1"),e.setValue(t.absence_policy_id?t.absence_policy_id:""),s[e.getField()]=e,this.setWidgetEnableBaseOnParentController(e),a.append(e),r.children().eq(1).append(a);var p=l("<div class='widget-h-box'></div>"),h=Global.loadWidgetByName(FormItemType.CHECKBOX);h.TCheckbox({field:"sun"}),h.setValue(t.sun?t.sun:!1),s[h.getField()]=h,p.append(h),this.setWidgetEnableBaseOnParentController(h);var m=Global.loadWidgetByName(FormItemType.CHECKBOX);m.TCheckbox({field:"mon"}),m.setValue(t.mon?t.mon:!1),s[m.getField()]=m,p.append(m),this.setWidgetEnableBaseOnParentController(m);var g=Global.loadWidgetByName(FormItemType.CHECKBOX);g.TCheckbox({field:"tue"}),g.setValue(t.tue?t.tue:!1),s[g.getField()]=g,p.append(g),this.setWidgetEnableBaseOnParentController(g);var b=Global.loadWidgetByName(FormItemType.CHECKBOX);b.TCheckbox({field:"wed"}),b.setValue(t.wed?t.wed:!1),s[b.getField()]=b,p.append(b),this.setWidgetEnableBaseOnParentController(b);var y=Global.loadWidgetByName(FormItemType.CHECKBOX);y.TCheckbox({field:"thu"}),y.setValue(t.thu?t.thu:!1),s[y.getField()]=y,p.append(y),this.setWidgetEnableBaseOnParentController(y);var f=Global.loadWidgetByName(FormItemType.CHECKBOX);f.TCheckbox({field:"fri"}),f.setValue(t.fri?t.fri:!1),s[f.getField()]=f,p.append(f),this.setWidgetEnableBaseOnParentController(f);var T=Global.loadWidgetByName(FormItemType.CHECKBOX);T.TCheckbox({field:"sat"}),T.setValue(t.sat?t.sat:!1),s[T.getField()]=T,p.append(T),this.setWidgetEnableBaseOnParentController(T),r.children().eq(2).append(p),a=l("<div class='widget-h-box'></div>");var u=l("<div style='text-align: left; '></div>"),w=l("<span class='widget-right-label recurring-template-widget-right-label' style='display: inline-block; width: 28px; vertical-align: middle;'> "+l.i18n._("In")+" </span>");e=Global.loadWidgetByName(FormItemType.TIME_PICKER),e.TTimePicker({field:"start_time"}),e.setValue(t.start_time?t.start_time:""),e.bind("formItemChange",function(v,c){var E=d.rows_widgets_array[c.parent().parent().parent().parent().index()-1];d.parent_controller.onRowChanges(E)}),s[e.getField()+n]=e,this.parent_controller.edit_view_ui_validation_field_dic[e.getField()+n]=e,u.append(w),u.append(e),a.append(u),this.setWidgetEnableBaseOnParentController(e);var _=l("<div style='text-align: left; margin-top: 5px;'></div>"),I=l("<span class='widget-right-label recurring-template-widget-right-label' style='display: inline-block; width: 28px; vertical-align: middle;' > "+l.i18n._("Out")+" </span>");if(e=Global.loadWidgetByName(FormItemType.TIME_PICKER),e.TTimePicker({field:"end_time"}),e.setValue(t.end_time?t.end_time:""),e.bind("formItemChange",function(v,c){var E=d.rows_widgets_array[c.parent().parent().parent().parent().index()-1];d.parent_controller.onRowChanges(E)}),s[e.getField()+n]=e,this.parent_controller.edit_view_ui_validation_field_dic[e.getField()+n]=e,_.append(I),_.append(e),a.append(_),r.children().eq(3).append(a),this.setWidgetEnableBaseOnParentController(e),e=Global.loadWidgetByName(FormItemType.TEXT),e.TText({field:"total_time"}),e.setValue(t.total_time?Global.getTimeUnit(t.total_time):""),s[e.getField()]=e,r.children().eq(4).append(e),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APISchedulePolicy,width:80,allow_multiple_selection:!1,layout_name:"global_schedule",show_search_inputs:!0,set_empty:!0,field:"schedule_policy_id"}),e.setValue(t.schedule_policy_id?t.schedule_policy_id:""),s[e.getField()]=e,r.children().eq(5).append(e),e.bind("formItemChange",function(v,c){var E=d.rows_widgets_array[c.parent().parent().index()-1];d.parent_controller.onRowChanges(E)}),this.setWidgetEnableBaseOnParentController(e),a=l("<div class='widget-h-box recurring-template-widget-h-box'></div>"),u=l("<div></div>"),w=l("<span class='widget-right-label' style='float: left; height: 24px; line-height: 24px; min-width: 74px;'> "+l.i18n._("Branch")+" </span>"),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIBranch,width:80,allow_multiple_selection:!1,layout_name:"global_branch",show_search_inputs:!0,set_any:!0,field:"branch_id",custom_first_label:Global.default_item}),t.branch_id.toUpperCase()===TTUUID.not_exist_id.toUpperCase()?e.set_default_value=!0:e.setValue(t.branch_id?t.branch_id:""),s[e.getField()]=e,u.append(w),u.append(e),a.append(u),_=l("<div style='margin-top: 5px; float: left'></div>"),I=l("<span class='widget-right-label' style='float: left; height: 24px; line-height: 24px; min-width: 74px;'> "+l.i18n._("Department")+" </span>"),this.setWidgetEnableBaseOnParentController(e),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIDepartment,width:80,allow_multiple_selection:!1,layout_name:"global_department",show_search_inputs:!0,set_any:!0,field:"department_id",custom_first_label:Global.default_item}),e.setValue(t.department_id?t.department_id:""),s[e.getField()]=e,_.append(I),_.append(e),a.append(_),r.children().eq(6).append(a),this.setWidgetEnableBaseOnParentController(e),Global.getProductEdition()>=20){a=l("<div class='widget-h-box recurring-template-widget-h-box'></div>"),u=l("<div></div>"),w=l("<span class='widget-right-label' style='float: left; height: 24px; line-height: 24px; min-width: 32px;'> "+l.i18n._("Job")+" </span>"),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIJob,width:80,allow_multiple_selection:!1,layout_name:"global_job",show_search_inputs:!0,set_any:!0,field:"job_id",custom_first_label:Global.default_item}),e.setValue(t.job_id?t.job_id:""),s[e.getField()]=e,u.append(w),u.append(e),a.append(u),_=l("<div style='margin-top: 5px; float: left'></div>"),I=l("<span class='widget-right-label' style='float: left; height: 24px; line-height: 24px; min-width: 32px;'> "+l.i18n._("Task")+" </span>"),this.setWidgetEnableBaseOnParentController(e),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIJobItem,width:80,allow_multiple_selection:!1,layout_name:"global_job_item",show_search_inputs:!0,set_any:!0,field:"job_item_id",custom_first_label:Global.default_item}),e.setValue(t.job_item_id?t.job_item_id:""),s[e.getField()]=e,_.append(I),_.append(e),a.append(_);var B=l("<div style='margin-top: 5px; float: left'></div>"),P=l("<span class='widget-right-label' style='float: left; height: 24px; line-height: 24px; min-width: 32px;'> "+l.i18n._("Tags")+" </span>");this.setWidgetEnableBaseOnParentController(e),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIPunchTag,width:80,allow_multiple_selection:!0,layout_name:"global_punch_tag",show_search_inputs:!0,set_any:!0,setRealValueCallBack:v=>{v&&this.parent_controller.setPunchTagQuickSearchManualIds(v)},field:"punch_tag_id",custom_first_label:Global.default_item}),e.setValue(t.punch_tag_id?t.punch_tag_id:""),s[e.getField()]=e,B.append(P),B.append(e),a.append(B),r.children().eq(7).append(a),this.setWidgetEnableBaseOnParentController(e)}Global.getProductEdition()>=15&&(e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"open_shift_multiplier",width:20}),e.setValue(t.open_shift_multiplier?t.open_shift_multiplier:1),s[e.getField()]=e,Global.getProductEdition()<=15?r.children().eq(7).append(e):r.children().eq(8).append(e),this.setWidgetEnableBaseOnParentController(e)),typeof i<"u"?(r.insertAfter(l(o).find("tr").eq(i)),this.rows_widgets_array.splice(i,0,s)):(l(o).append(r),this.rows_widgets_array.push(s)),this.parent_controller.is_viewing&&r.find(".control-icon").hide(),s.status_id.getValue()==10?s.absence_policy_id.css("display","none"):s.status_id.getValue()==20&&s.absence_policy_id.css("display","block"),this.addIconsEvent(r),this.removeLastRowLine()}}onRowChanges(t){var i=t.week.attr("recurring_schedule_template_id"),e=t.week.attr("date_stamp");if(i){var d=e+" "+t["start_time"+i].getValue(),a=e+" "+t["end_time"+i].getValue(),n=t.schedule_policy_id.getValue();if(d!==""&&a!==""&&n!==""){var r=this.schedule_api.getScheduleTotalTime(d,a,n,{async:!1});if(r.isValid()&&r.getResult()){var o=r.getResult();t.total_time.setValue(Global.getTimeUnit(o))}}this.validate()}}insideEditorGetValue(t){for(var i=this.rows_widgets_array.length,e=[],d=0;d<i;d++){var a=this.rows_widgets_array[d],n=a.week.attr("recurring_schedule_template_id"),r=a.week.attr("date_stamp");if(n){var o={id:n,week:a.week.getValue(),status_id:a.status_id.getValue(),mon:a.mon.getValue(),tue:a.tue.getValue(),wed:a.wed.getValue(),thu:a.thu.getValue(),fri:a.fri.getValue(),sat:a.sat.getValue(),sun:a.sun.getValue(),date_stamp:r,start_time:a["start_time"+n].getValue(),end_time:a["end_time"+n].getValue(),total_time:null,branch_id:a.branch_id.getValue(),department_id:a.department_id.getValue(),absence_policy_id:a.absence_policy_id.getValue(),schedule_policy_id:a.schedule_policy_id.getValue()};Global.getProductEdition()>=15&&(o.open_shift_multiplier=a.open_shift_multiplier.getValue()),Global.getProductEdition()>=20&&(o.job_id=a.job_id.getValue(),o.job_item_id=a.job_item_id.getValue(),o.punch_tag_id=a.punch_tag_id.getValue()),o.recurring_schedule_template_control_id=t,e.push(o)}}return e}insideEditorSetValue(t){var i=t.length;if(this.removeAllRows(),i>0){for(var e=0;e<t.length;e++)if(Global.isSet(t[e])){var d=t[e];this.addRow(d)}}else this.getDefaultData()}insideEditorRemoveRow(t){var i=t[0].rowIndex-1,e=this.rows_widgets_array[i].week.attr("recurring_schedule_template_id");TTUUID.isUUID(e)&&e!=TTUUID.zero_id&&e!=TTUUID.not_exist_id&&this.delete_ids.push(e),t.remove(),this.rows_widgets_array.splice(i,1),this.removeLastRowLine()}uniformVariable(t){return this.is_mass_editing||(t.recurring_schedule_template=this.editor.getValue(this.refresh_id)),t}renameObjectKey(t,i,e){i!==e&&(Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(t,i)),delete t[i])}_continueDoCopyAsNew(){if(this.setCurrentEditViewState("new"),LocalCacheData.current_doing_context_action="copy_as_new",Global.isSet(this.edit_view))for(var t=0;t<this.editor.rows_widgets_array.length;t++){var i=TTUUID.generateUUID(),e=this.editor.rows_widgets_array[t].week.attr("recurring_schedule_template_id");this.renameObjectKey(this.editor.rows_widgets_array[t],"start_time"+e,"start_time"+i),this.renameObjectKey(this.editor.rows_widgets_array[t],"end_time"+e,"end_time"+i),this.editor.rows_widgets_array[t].week.attr("recurring_schedule_template_id",i)}super._continueDoCopyAsNew()}onCopyAsNewResult(t){var i=this,e=t.getResult();if(!e){TAlertManager.showAlert(l.i18n._("Record does not exist")),i.onCancelClick();return}i.openEditView(),e=e[0],this.copied_record_id=e.id,e.id="",i.sub_view_mode&&i.parent_key&&(e[i.parent_key]=i.parent_value),i.current_edit_record=e,i.initEditView()}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:l.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:l.i18n._("Description"),in_column:1,field:"description",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:l.i18n._("Template"),in_column:1,field:"id",layout_name:"global_recurring_template_control",api_class:TTAPI.APIRecurringScheduleTemplateControl,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:l.i18n._("Schedule Policy"),in_column:2,field:"schedule_policy_id",layout_name:"global_schedule",api_class:TTAPI.APISchedulePolicy,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:l.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:l.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX})]}getCustomContextMenuModel(){var t={exclude:[],include:[{label:l.i18n._("Jump To"),id:"jump_to_header",menu_align:"right",action_group:"jump_to",action_group_header:!0,permission_result:!1},{label:l.i18n._("Recurring Schedules"),id:"recurring_schedule",menu_align:"right",action_group:"jump_to",group:"navigation"}]};return t}onCustomContextClick(t){switch(t){case"recurring_schedule":this.onNavigationClick(t);break}}onNavigationClick(t){var i=this,e,d={filter_data:{}},a=[];switch(i.edit_view&&i.current_edit_record.id?a.push(i.current_edit_record.id):(e=this.getGridSelectIdArray(),l.each(e,function(n,r){var o=i.getRecordFromGridById(r);a.push(o.id)})),d.filter_data.recurring_schedule_template_control_id=a,t){case"recurring_schedule":Global.addViewTab(this.viewId,l.i18n._("Recurring Templates"),window.location.href),IndexViewController.goToView("RecurringScheduleControl",d);break}}setCustomDefaultMenuIcon(t,i,e){switch(t){case"recurring_schedule":this.setDefaultMenuRecurringScheduleIcon(i,e);break}}setDefaultMenuRecurringScheduleIcon(t,i,e){(!PermissionManager.checkTopLevelPermission("RecurringScheduleControl")||this.edit_only_mode)&&ContextMenuManager.hideMenuItem(this.determineContextMenuMountAttributes().id,t.id,!1),i>0?ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,t.id,!0):ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,t.id,!1)}setCustomEditMenuIcon(t,i){switch(t){case"recurring_schedule":this.setEditMenuRecurringScheduleIcon(i);break}}setEditMenuRecurringScheduleIcon(t,i){(!this.viewPermissionValidate(i)||this.edit_only_mode)&&ContextMenuManager.hideMenuItem(this.determineContextMenuMountAttributes().id,t.id,!1),(!this.current_edit_record||!this.current_edit_record.id)&&ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,t.id,!1)}onSaveResult(t){if(super.onSaveResult(t),t&&t.isValid()){var i=t.getAttributeInAPIDetails("system_job_queue");i&&this.event_bus.emit("tt_topbar","toggle_job_queue_spinner",{show:!0,get_job_data:!0})}}getRecurringTemplateTabHtml(){return`<div id="tab_recurring_template" class="edit-view-tab-outside">
					<div class="edit-view-tab" id="tab_recurring_template_content_div">
						<div class="first-column full-width-column"></div>
						<div class="inside-editor-div full-width-column">
						</div>
					</div>
				</div>`}}export{O as RecurringScheduleTemplateControlViewController};
//# sourceMappingURL=RecurringScheduleTemplateControlViewController-ByXFIWvo.bundle.js.map
