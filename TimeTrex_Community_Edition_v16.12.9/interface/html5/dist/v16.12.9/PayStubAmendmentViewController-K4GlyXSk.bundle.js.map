{"version":3,"file":"PayStubAmendmentViewController-K4GlyXSk.bundle.js","sources":["../../views/payroll/pay_stub_amendment/PayStubAmendmentViewController.js"],"sourcesContent":["import Decimal from 'decimal.js';\n\nexport class PayStubAmendmentViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#pay_stub_amendment_view_container',\n\n\t\t\tuser_status_array: null,\n\t\t\tfiltered_status_array: null,\n\t\t\ttype_array: null,\n\t\t\tis_mass_adding: false,\n\n\t\t\tuser_api: null,\n\t\t\tuser_group_api: null,\n\t\t\tuser_wage_api: null,\n\t\t\tjob_api: null,\n\t\t\tjob_item_api: null,\n\t\t\tdepartment_api: null,\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'PayStubAmendmentEditView.html';\n\t\tthis.permission_id = 'pay_stub_amendment';\n\t\tthis.viewId = 'PayStubAmendment';\n\t\tthis.script_name = 'PayStubAmendmentView';\n\t\tthis.table_name_key = 'pay_stub_amendment';\n\t\tthis.context_menu_name = $.i18n._( 'Pay Stub Amendment' );\n\t\tthis.navigation_label = $.i18n._( 'Pay Stub Amendment' );\n\t\tthis.api = TTAPI.APIPayStubAmendment;\n\t\tthis.user_api = TTAPI.APIUser;\n\t\tthis.user_group_api = TTAPI.APIUserGroup;\n\t\tthis.currency_api = TTAPI.APICurrency;\n\t\tthis.user_wage_api = TTAPI.APIUserWage;\n\n\t\tif ( Global.getProductEdition() >= 20 ) {\n\t\t\tthis.job_api = TTAPI.APIJob;\n\t\t\tthis.job_item_api = TTAPI.APIJobItem;\n\t\t\tthis.department_api = TTAPI.APIDepartment;\n\t\t}\n\n\t\tthis.initPermission();\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t}\n\n\tinitPermission() {\n\t\tsuper.initPermission();\n\n\t\tif ( this.branchUIValidate() ) {\n\t\t\tthis.show_branch_ui = true;\n\t\t} else {\n\t\t\tthis.show_branch_ui = false;\n\t\t}\n\n\t\tif ( this.departmentUIValidate() ) {\n\t\t\tthis.show_department_ui = true;\n\t\t} else {\n\t\t\tthis.show_department_ui = false;\n\t\t}\n\n\t\tif ( this.jobUIValidate() ) {\n\t\t\tthis.show_job_ui = true;\n\t\t} else {\n\t\t\tthis.show_job_ui = false;\n\t\t}\n\n\t\tif ( this.jobItemUIValidate() ) {\n\t\t\tthis.show_job_item_ui = true;\n\t\t} else {\n\t\t\tthis.show_job_item_ui = false;\n\t\t}\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tvar options = [\n\t\t\t{ option_name: 'type', api: this.api },\n\t\t\t{ option_name: 'status', field_name: 'user_status_id', api: this.user_api },\n\t\t\t{ option_name: 'filtered_status', field_name: 'status_id', api: this.api },\n\t\t];\n\n\t\tthis.initDropDownOptions( options );\n\n\t\tthis.user_group_api.getUserGroup( '', false, false, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = res.getResult();\n\n\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t$this.user_group_array = res;\n\n\t\t\t\tif ( !$this.sub_view_mode && $this.basic_search_field_ui_dic['group_id'] ) {\n\t\t\t\t\t$this.basic_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['group_id'].setSourceData( res );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\n\t\tthis.api.getOptions( 'status', false, false, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tvar status_array = Global.buildRecordArray( res.getResult() );\n\n\t\t\t\tif ( !$this.sub_view_mode && $this.basic_search_field_ui_dic['status_id'] ) {\n\t\t\t\t\t$this.basic_search_field_ui_dic['status_id'].setSourceData( status_array );\n\t\t\t\t\tif ( $this.adv_search_field_ui_dic['status_id'] ) {\n\t\t\t\t\t\t$this.adv_search_field_ui_dic['status_id'].setSourceData( status_array );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tjobUIValidate( p_id ) {\n\n\t\tif ( !p_id ) {\n\t\t\tp_id = this.permission_id;\n\t\t}\n\n\t\tif ( PermissionManager.validate( 'job', 'enabled' ) &&\n\t\t\tPermissionManager.validate( p_id, 'edit_job' ) &&\n\t\t\t( Global.getProductEdition() >= 20 ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tjobItemUIValidate( p_id ) {\n\n\t\tif ( !p_id ) {\n\t\t\tp_id = this.permission_id;\n\t\t}\n\n\t\tif ( PermissionManager.validate( 'job_item', 'enabled' ) &&\n\t\t\tPermissionManager.validate( p_id, 'edit_job_item' ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tbranchUIValidate( p_id ) {\n\n\t\tif ( !p_id ) {\n\t\t\tp_id = this.permission_id;\n\t\t}\n\n\t\tif ( PermissionManager.validate( p_id, 'edit_branch' ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tdepartmentUIValidate( p_id ) {\n\n\t\tif ( !p_id ) {\n\t\t\tp_id = this.permission_id;\n\t\t}\n\n\t\tif ( PermissionManager.validate( p_id, 'edit_department' ) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tgetUserHourlyRate( user_id ) {\n\t\tvar $this = this;\n\n\t\tif ( !user_id ) {\n\t\t\tuser_id = this.current_edit_record['user_id'];\n\t\t}\n\n\t\tif ( TTUUID.isUUID( user_id ) == false || ( $.isArray( user_id ) && user_id.length != 1 ) ) {\n\t\t\tuser_id = TTUUID.zero_id;\n\t\t}\n\n\t\t//Last Wage record only.\n\t\tthis.user_wage_api.getUserWage( {\n\t\t\tfilter_data: {\n\t\t\t\tuser_id: user_id,\n\t\t\t\twage_group_id: TTUUID.zero_id\n\t\t\t}\n\t\t}, false, true, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar rate = '0.00';\n\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( result_data && result_data.length > 0 ) {\n\t\t\t\t\tresult_data = result_data[0];\n\n\t\t\t\t\trate = result_data.hourly_rate;\n\t\t\t\t}\n\n\t\t\t\t$this.edit_view_ui_dic['rate'].setValue( rate );\n\t\t\t\t$this.current_edit_record['rate'] = rate;\n\t\t\t\t$this.calcAmount();\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\n\t\tvar column_filter = {};\n\t\tcolumn_filter.is_owner = true;\n\t\tcolumn_filter.id = true;\n\t\tcolumn_filter.user_id = true;\n\t\tcolumn_filter.is_child = true;\n\t\tcolumn_filter.in_use = true;\n\t\tcolumn_filter.first_name = true;\n\t\tcolumn_filter.last_name = true;\n\t\tcolumn_filter.effective_date = true;\n\n\t\t// Error: Unable to get property 'getGridParam' of undefined or null reference\n\t\tvar display_columns = [];\n\t\tif ( this.grid ) {\n\t\t\tdisplay_columns = this.grid.getGridParam( 'colModel' );\n\t\t}\n\t\tif ( display_columns ) {\n\t\t\tvar len = display_columns.length;\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar column_info = display_columns[i];\n\t\t\t\tcolumn_filter[column_info.name] = true;\n\t\t\t}\n\t\t}\n\n\t\treturn column_filter;\n\t}\n\n\tonReportPrintClick( key ) {\n\t\tvar $this = this;\n\n\t\tvar grid_selected_id_array;\n\n\t\tvar filter = {};\n\n\t\tvar ids = [];\n\n\t\tvar user_ids = [];\n\n\t\tvar base_date;\n\n\t\tvar pay_period_ids = [];\n\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\tids.push( $this.current_edit_record.id );\n\t\t\tuser_ids.push( $this.current_edit_record.user_id );\n\t\t\tpay_period_ids.push( $this.current_edit_record.pay_period_id );\n\t\t\tbase_date = $this.current_edit_record.start_date;\n\t\t} else {\n\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\tids.push( grid_selected_row.id );\n\t\t\t\tuser_ids.push( grid_selected_row.user_id );\n\t\t\t\tpay_period_ids.push( grid_selected_row.pay_period_id );\n\t\t\t\tbase_date = grid_selected_row.start_date;\n\t\t\t} );\n\t\t}\n\n\t\tvar args = { filter_data: { id: ids } };\n\t\tvar post_data = { 0: args, 1: true, 2: key };\n\n\t\tthis.doFormIFrameCall( post_data );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Jump To' ),\n\t\t\t\t\tid: 'jump_to_header',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\taction_group_header: true,\n\t\t\t\t\tpermission_result: false, // to hide it in legacy context menu and avoid errors in legacy parsers.\n\t\t\t\t\tsort_order: 9050,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'TimeSheet' ),\n\t\t\t\t\tid: 'timesheet',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\tsort_order: 9050,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Pay Stubs' ),\n\t\t\t\t\tid: 'pay_stub',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\tsort_order: 9050,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit Employee' ),\n\t\t\t\t\tid: 'edit_employee',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\tsort_order: 9050,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Import' ),\n\t\t\t\t\tid: 'import_icon',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'import_export',\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\tvue_icon: 'tticon tticon-file_download_black_24dp',\n\t\t\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'ImportCSVPayStubAmendment' ),\n\t\t\t\t\tsort_order: 9010\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tsetCustomDefaultMenuIcon( id, context_btn, grid_selected_length ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'timesheet':\n\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'punch' );\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub':\n\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'pay_stub' );\n\t\t\t\tbreak;\n\t\t\tcase 'edit_employee':\n\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length, 'user' );\n\t\t\t\tbreak;\n\t\t\tcase 'print_checks':\n\t\t\t\tthis.setDefaultMenuPrintChecksIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t\tcase 'direct_deposit':\n\t\t\t\tthis.setDefaultMenuDirectDepositIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetDefaultMenuImportIcon( context_btn, grid_selected_length, pId ) {\n\t\tif ( PermissionManager.checkTopLevelPermission( 'ImportCSVPayStubAmendment' ) === true ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\t//Remove the copy button as it can never work due to API unique constraints.\n\tsetDefaultMenuCopyIcon( context_btn, grid_selected_length, pId ) {\n\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t}\n\n\tsetEditMenuCopyIcon( context_btn, grid_selected_length, pId ) {\n\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t}\n\n\t/* jshint ignore:end */\n\tsetDefaultMenuViewIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( pId === 'punch' || pId === 'schedule' || pId === 'pay_stub' ) {\n\t\t\tsuper.setDefaultMenuViewIcon( context_btn, grid_selected_length, pId );\n\t\t} else {\n\n\t\t\tif ( !this.viewPermissionValidate( pId ) || this.edit_only_mode ) {\n\t\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t\t}\n\n\t\t\tif ( grid_selected_length > 0 && this.viewOwnerOrChildPermissionValidate() ) {\n\t\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t\t} else {\n\t\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t\t}\n\n\t\t}\n\t}\n\n\tsetDefaultMenuPrintChecksIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( grid_selected_length > 0 ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsetDefaultMenuDirectDepositIcon( context_btn, grid_selected_length, pId ) {\n\n\t\tif ( grid_selected_length > 0 ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsetCustomEditMenuIcon( id, context_btn ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'timesheet':\n\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'punch' );\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub':\n\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'pay_stub' );\n\t\t\t\tbreak;\n\t\t\tcase 'edit_employee':\n\t\t\t\tthis.setEditMenuViewIcon( context_btn, 'user' );\n\t\t\t\tbreak;\n\t\t\tcase 'print_checks':\n\t\t\tcase 'direct_deposit':\n\t\t\t\tthis.setEditMenuViewIcon( context_btn );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tswitch ( key ) {\n\t\t\tcase 'user_id':\n\t\t\t\tif ( $.isArray( this.current_edit_record.user_id ) && this.current_edit_record.user_id.length > 1 ) {\n\t\t\t\t\tthis.is_mass_adding = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.is_mass_adding = false;\n\t\t\t\t}\n\t\t\t\tdoNotValidate = true; //Don't validate since setCurrency() triggers calcAmount(), which changes the amount field asynchronously, only then should we validate.\n\t\t\t\tthis.setCurrency();\n\t\t\t\tthis.setEditMenu();\n\t\t\t\tbreak;\n\t\t\tcase 'type_id':\n\t\t\t\tthis.onTypeChange();\n\t\t\t\tbreak;\n\t\t\tcase 'rate':\n\t\t\tcase 'units':\n\t\t\tcase 'amount':\n\t\t\t\tif ( this.is_mass_editing ) {\n\t\t\t\t\tif ( target.isChecked() ) {\n\t\t\t\t\t\tthis.edit_view_ui_dic['rate'].setCheckBox( true );\n\t\t\t\t\t\tthis.edit_view_ui_dic['units'].setCheckBox( true );\n\t\t\t\t\t\tthis.edit_view_ui_dic['amount'].setCheckBox( true );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.edit_view_ui_dic['rate'].setCheckBox( false );\n\t\t\t\t\t\tthis.edit_view_ui_dic['units'].setCheckBox( false );\n\t\t\t\t\t\tthis.edit_view_ui_dic['amount'].setCheckBox( false );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.current_edit_record['amount'] = this.edit_view_ui_dic['amount'].getValue();\n\t\t\t\tbreak;\n\t\t\tcase 'job_quick_search':\n\t\t\tcase 'job_item_quick_search':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.onJobQuickSearch( key, c_value );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'job_id':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.edit_view_ui_dic['job_quick_search'].setValue( target.getValue( true ) ? ( target.getValue( true ).manual_id ? target.getValue( true ).manual_id : '' ) : '' );\n\t\t\t\t\tthis.setJobItemValueWhenJobChanged( target.getValue( true ), 'job_item_id', {\n\t\t\t\t\t\tstatus_id: 10,\n\t\t\t\t\t\tjob_id: this.current_edit_record.job_id\n\t\t\t\t\t} );\n\t\t\t\t\tthis.edit_view_ui_dic['job_quick_search'].setCheckBox( true );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'job_item_id':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.edit_view_ui_dic['job_item_quick_search'].setValue( target.getValue( true ) ? ( target.getValue( true ).manual_id ? target.getValue( true ).manual_id : '' ) : '' );\n\t\t\t\t\tthis.edit_view_ui_dic['job_item_quick_search'].setCheckBox( true );\n\t\t\t\t\tthis.setPunchTagValuesWhenCriteriaChanged( this.getPunchTagFilterData(), 'punch_tag_id' );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tonTypeChange() {\n\t\tif ( this.current_edit_record.type_id == 10 ) {\n\t\t\tthis.detachElement( 'percent_amount' );\n\t\t\tthis.detachElement( 'percent_amount_entry_name_id' );\n\t\t\tthis.attachElement( 'rate' );\n\t\t\tthis.attachElement( 'units' );\n\t\t\tthis.attachElement( 'amount' );\n\n\t\t} else if ( this.current_edit_record.type_id == 20 ) {\n\t\t\tthis.attachElement( 'percent_amount' );\n\t\t\tthis.attachElement( 'percent_amount_entry_name_id' );\n\t\t\tthis.detachElement( 'rate' );\n\t\t\tthis.detachElement( 'units' );\n\t\t\tthis.detachElement( 'amount' );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tcalcAmount() {\n\t\tvar widget_rate = this.edit_view_ui_dic['rate'];\n\t\tvar widget_units = this.edit_view_ui_dic['units'];\n\t\tvar widget_amount = this.edit_view_ui_dic['amount'];\n\n\t\tif ( widget_rate && widget_rate.getValue().length > 0 && widget_units && widget_units.getValue().length > 0 ) {\n\t\t\t//widget_amount.setValue( ( parseFloat( widget_rate.getValue() ) * parseFloat( widget_units.getValue() ) ).toFixed( 2 ) ); //This fails on 17.07 * 9.50 as it rounds to 162.16 rather than 162.17\n\t\t\t//calc_amount = ( parseFloat( widget_rate.getValue() ) * parseFloat( widget_units.getValue() ) ); //This fails on 16.5 * 130.23\n\t\t\tvar calc_amount = new Decimal( parseFloat( widget_rate.getValue() ) ).mul( parseFloat( widget_units.getValue() ) ).toFixed( 4 ); //Need to use Decimal() class for proper money math operations\n\t\t\tDebug.Text( 'Calculate Amount before rounding: ' + calc_amount, 'PayStubAmendmentViewController.js', 'PayStubAmendmentViewController', 'onFormItemKeyUp', 10 );\n\n\t\t\tvar round_decimal_places;\n\t\t\tif ( this.currency_array && this.currency_array.round_decimal_places ) {\n\t\t\t\tround_decimal_places = this.currency_array.round_decimal_places;\n\t\t\t} else {\n\t\t\t\tround_decimal_places = 2;\n\t\t\t}\n\t\t\twidget_amount.setValue( Global.MoneyRound( calc_amount, round_decimal_places ) );\n\t\t} else {\n\t\t\tif ( widget_amount && widget_amount.getValue() == '' ) {\n\t\t\t\twidget_amount.setValue( '0.00' );\n\t\t\t}\n\t\t}\n\n\t\tif ( !this.is_mass_editing && this.edit_view_ui_dic['amount'] && this.current_edit_record ) { //Make sure this is only done when editing a single record otherwise Mass Edit will default to changing the amount to 0.00.\n\t\t\tthis.current_edit_record['amount'] = this.edit_view_ui_dic['amount'].getValue(); //Update current record Amount, otherwise edit/save (without any changes) won't save the rounded value.\n\t\t}\n\t}\n\n\tonRateOrUnitChange() {\n\t\tvar widget_rate = this.edit_view_ui_dic['rate'];\n\t\tvar widget_units = this.edit_view_ui_dic['units'];\n\t\tvar widget_amount = this.edit_view_ui_dic['amount'];\n\n\t\tif ( widget_rate.getValue().length > 0 || widget_units.getValue().length > 0 ) {\n\t\t\twidget_amount.setReadOnly( true );\n\t\t} else {\n\t\t\twidget_amount.setReadOnly( false );\n\t\t}\n\t}\n\n\tonFormItemKeyUp( target ) {\n\t\tthis.onRateOrUnitChange();\n\t\tthis.calcAmount();\n\t}\n\n\tonFormItemKeyDown( target ) {\n\t\tthis.onRateOrUnitChange();\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'import_icon':\n\t\t\t\tthis.onImportClick();\n\t\t\t\tbreak;\n\t\t\tcase 'timesheet':\n\t\t\tcase 'pay_stub':\n\t\t\tcase 'edit_employee':\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonImportClick() {\n\n\t\tvar $this = this;\n\t\tIndexViewController.openWizard( 'ImportCSVWizard', 'PayStubAmendment', function() {\n\t\t\t$this.search();\n\t\t} );\n\t}\n\n\t/* jshint ignore:start */\n\tonNavigationClick( iconName ) {\n\n\t\tvar $this = this;\n\n\t\tvar grid_selected_id_array;\n\n\t\tvar filter = {};\n\n\t\tvar user_ids = [];\n\n\t\tvar ids = [];\n\n\t\tvar base_date;\n\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\tids.push( $this.current_edit_record.id );\n\t\t\tuser_ids.push( $this.current_edit_record.user_id );\n\t\t\tbase_date = $this.current_edit_record.effective_date;\n\t\t} else {\n\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\tids.push( grid_selected_row.id );\n\t\t\t\tuser_ids.push( grid_selected_row.user_id );\n\t\t\t\tbase_date = grid_selected_row.effective_date;\n\t\t\t} );\n\t\t}\n\n\t\tvar args = { filter_data: { id: ids } };\n\n\t\tswitch ( iconName ) {\n\t\t\tcase 'timesheet':\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tfilter.user_id = user_ids[0];\n\t\t\t\t\tfilter.base_date = base_date;\n\t\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Pay Stub Amendments' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'TimeSheet', filter );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub':\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tfilter.filter_data = {};\n\t\t\t\t\tfilter.filter_data.user_id = user_ids[0];\n\t\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Pay Stub Amendments' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'PayStub', filter );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'edit_employee':\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tIndexViewController.openEditView( this, 'Employee', user_ids[0] );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/* jshint ignore:end */\n\tonReportMenuClick( id ) {\n\t\tthis.onReportPrintClick( id );\n\t}\n\n\t//not currently called. are we reimplementing the eft code commented out above in this class?\n\tdoFormIFrameCall( postData ) {\n\t\tGlobal.APIFileDownload( this.api.className, 'get' + this.api.key_name, postData );\n\t}\n\n\tsetCurrency() {\n\t\tvar $this = this;\n\t\tif ( Global.isSet( this.current_edit_record.user_id ) ) {\n\t\t\tvar filter = {};\n\t\t\tfilter.filter_data = { user_id: this.current_edit_record.user_id };\n\n\t\t\tthis.currency_api.getCurrency( filter, false, false, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( Global.isArray( res ) ) {\n\t\t\t\t\t\t$this.currency_array = res[0];\n\t\t\t\t\t\t$this.calcAmount();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.currency_array = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\t// When mass editing, these fields may not be the common data, so their value will be undefined, so this will cause their change event cannot work properly.\n\t\tthis.setDefaultData( {\n\t\t\t'type_id': 10\n\t\t} );\n\n\t\tsuper.setCurrentEditRecordData();\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\t\tthis.setCurrency();\n\t\tthis.onTypeChange();\n\t\tthis.onRateOrUnitChange();\n\t}\n\n\tvalidate() {\n\n\t\tvar $this = this;\n\n\t\tvar record = {};\n\n\t\tvar records_data = null;\n\n\t\tif ( this.is_mass_editing ) {\n\t\t\tfor ( var key in this.edit_view_ui_dic ) {\n\t\t\t\t//#2536 - Never send status_id to the API.\n\t\t\t\tif ( key != 'status_id' ) {\n\t\t\t\t\tvar widget = this.edit_view_ui_dic[key];\n\n\t\t\t\t\tif ( Global.isSet( widget.isChecked ) ) {\n\t\t\t\t\t\tif ( widget.isChecked() && widget.getEnabled() ) {\n\t\t\t\t\t\t\trecord[key] = widget.getValue();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\t\t\trecord = this.uniformVariable( this.current_edit_record );\n\t\t}\n\n\t\tvar record = this.buildMassAddRecord( record );\n\n\t\tthis.api['validate' + this.api.key_name]( record, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.validateResult( result );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tremoveEditView() {\n\t\tthis.is_mass_adding = false;\n\t\tsuper.removeEditView();\n\t}\n\n\tbuildMassAddRecord( record ) {\n\t\tif ( $.isArray( record.user_id ) ) {\n\t\t\tvar records_data = [];\n\t\t\tvar length = record.user_id.length;\n\t\t\tif ( length > 0 ) {\n\t\t\t\tfor ( var i = 0; i < length; i++ ) {\n\t\t\t\t\tvar record_data = Global.clone( record );\n\t\t\t\t\trecord_data.user_id = record.user_id[i];\n\t\t\t\t\trecords_data.push( record_data );\n\t\t\t\t}\n\t\t\t\tthis.setEditMenu();\n\n\t\t\t\treturn this.uniformVariable( records_data );\n\n\t\t\t} else {\n\t\t\t\trecord.user_id = record.user_id.toString();\n\t\t\t}\n\n\t\t}\n\n\t\treturn this.uniformVariable( record );\n\t}\n\n\tonSaveAndContinue( ignoreWarning ) {\n\t\tvar $this = this;\n\t\tif ( !Global.isSet( ignoreWarning ) ) {\n\t\t\tignoreWarning = false;\n\t\t}\n\t\tthis.is_changed = false;\n\t\tthis.is_add = false;\n\t\tLocalCacheData.current_doing_context_action = 'save_and_continue';\n\n\t\tvar record = this.buildMassAddRecord( this.current_edit_record );\n\t\tthis.api['set' + this.api.key_name]( record, false, ignoreWarning, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.onSaveAndContinueResult( result );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tdoSaveAPICall( record, ignoreWarning ) {\n\t\t// #2644: We have to handle the record as though its a mass_add, as the awesomebox will always return an array of user_id's. Cannot force is_mass_adding, as this affects the save&continue button disabling.\n\t\trecord = this.buildMassAddRecord( record );\n\t\tsuper.doSaveAPICall( record, ignoreWarning );\n\t}\n\n\tonSaveAndCopy( ignoreWarning ) {\n\t\tvar $this = this;\n\t\tif ( !Global.isSet( ignoreWarning ) ) {\n\t\t\tignoreWarning = false;\n\t\t}\n\t\tthis.is_add = true;\n\t\tthis.is_changed = false;\n\t\tvar record = this.current_edit_record;\n\t\tLocalCacheData.current_doing_context_action = 'save_and_copy';\n\t\tvar records_data = null;\n\t\tthis.clearNavigationData();\n\n\t\tvar record = this.buildMassAddRecord( record );\n\n\t\tthis.api['set' + this.api.key_name]( record, false, ignoreWarning, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( result_data === true ) {\n\t\t\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\n\t\t\t\t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t\t\t$this.refresh_id = result_data;\n\t\t\t\t\t}\n\t\t\t\t\t$this.search( false );\n\t\t\t\t\t$this.onCopyAsNewClick();\n\t\t\t\t} else {\n\t\t\t\t\t$this.setErrorTips( result );\n\t\t\t\t\t$this.setErrorMenu();\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSaveAndNewClick( ignoreWarning ) {\n\t\tvar $this = this;\n\t\tif ( !Global.isSet( ignoreWarning ) ) {\n\t\t\tignoreWarning = false;\n\t\t}\n\t\tthis.is_add = true;\n\t\tvar record = this.current_edit_record;\n\t\tLocalCacheData.current_doing_context_action = 'new';\n\n\t\tvar records_data = null;\n\n\t\tvar record = this.buildMassAddRecord( record );\n\n\t\tthis.api['set' + this.api.key_name]( record, false, ignoreWarning, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( result_data === true ) {\n\t\t\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\n\t\t\t\t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t\t\t$this.refresh_id = result_data;\n\t\t\t\t\t}\n\t\t\t\t\t$this.search( false );\n\t\t\t\t\t$this.onAddClick( true );\n\t\t\t\t} else {\n\t\t\t\t\t$this.setErrorTips( result );\n\t\t\t\t\t$this.setErrorMenu();\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetEditMenuSaveAndContinueIcon( context_btn, pId ) {\n\t\tthis.saveAndContinueValidate( context_btn, pId );\n\n\t\tif ( this.is_mass_adding || this.is_mass_editing || this.is_viewing || ( this.current_edit_record && Global.isArray( this.current_edit_record.user_id ) && this.current_edit_record.user_id.length > 1 ) ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tcheckTabPermissions( tab ) {\n\t\tvar retval = false;\n\n\t\tswitch ( tab ) {\n\t\t\tcase 'tab_cost_centers':\n\t\t\t\tif ( this.branchUIValidate() || this.departmentUIValidate() || this.jobUIValidate() || this.jobItemUIValidate() ) { //Only display tab if fields exists to be edited.\n\t\t\t\t\tretval = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tretval = super.checkTabPermissions( tab );\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn retval;\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\t\tvar allow_multiple_selection = false;\n\n\t\tvar tab_model = {\n\t\t\t'tab_pay_stub_amendment': { 'label': $.i18n._( 'Pay Stub Amendment' ) },\n\t\t\t'tab_cost_centers': { 'label': $.i18n._( 'Cost Centers' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStubAmendment,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_pay_stub_amendment',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_pay_stub_amendment = this.edit_view_tab.find( '#tab_pay_stub_amendment' );\n\n\t\tvar tab_pay_stub_amendment_column1 = tab_pay_stub_amendment.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_pay_stub_amendment_column1 );\n\n\t\tif ( this.is_add ) {\n\t\t\tallow_multiple_selection = true;\n\t\t}\n\n\t\t//Employee\n\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: allow_multiple_selection,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'user_id'\n\t\t} );\n\n\t\tvar default_args = {};\n\t\tdefault_args.permission_section = 'pay_stub_amendment';\n\t\tform_item_input.setDefaultArgs( default_args );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee(s)' ), form_item_input, tab_pay_stub_amendment_column1, '' );\n\n\t\tvar args = {};\n\t\tvar filter_data = {};\n\t\tfilter_data.type_id = [10, 20, 30, 50, 60, 65, 80];\n\t\targs.filter_data = filter_data;\n\n\t\t// Pay Stub Account\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'pay_stub_entry_name_id',\n\t\t\tvalidation_field: 'pay_stub_entry_name'\n\t\t} );\n\n\t\tform_item_input.setDefaultArgs( args );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Stub Account' ), form_item_input, tab_pay_stub_amendment_column1 );\n\n\t\t// Amount Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'type_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Amount Type' ), form_item_input, tab_pay_stub_amendment_column1 );\n\n\t\t// Fixed\n\n\t\t// Units\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'units', width: 114, hasKeyEvent: true } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Units' ), form_item_input, tab_pay_stub_amendment_column1, '', null, true, null, null, true );\n\n\t\t// Rate\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'rate', width: 114, hasKeyEvent: true } );\n\n\t\tvar widgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\twidgetContainer.append( form_item_input );\n\n\t\tif ( !this.is_viewing ) {\n\t\t\tvar get_hourly_rate_btn = $( '<input class=\\'t-button\\' style=\\'margin-left: 5px; height: 25px;\\' type=\\'button\\' value=\\'' + $.i18n._( 'Get Hourly Rate' ) + '\\'></input>' );\n\t\t\tget_hourly_rate_btn.click( function() {\n\t\t\t\t$this.getUserHourlyRate();\n\t\t\t} );\n\t\t\twidgetContainer.append( get_hourly_rate_btn );\n\t\t}\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Rate' ), form_item_input, tab_pay_stub_amendment_column1, '', widgetContainer, true, null, null, true );\n\n\t\t// Amount\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'amount', width: 114 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Amount' ), form_item_input, tab_pay_stub_amendment_column1, '', null, true );\n\n\t\t// Percent\n\n\t\t//Percent\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'percent_amount', width: 79 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Percent' ), form_item_input, tab_pay_stub_amendment_column1, '', null, true );\n\n\t\targs = {};\n\t\tfilter_data = {};\n\t\tfilter_data.type_id = [10, 20, 30, 40, 50, 60, 65];\n\t\targs.filter_data = filter_data;\n\n\t\t// Percent of\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'percent_amount_entry_name_id'\n\t\t} );\n\n\t\tform_item_input.setDefaultArgs( args );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Percent of' ), form_item_input, tab_pay_stub_amendment_column1, '', null, true );\n\n\t\t// Pay Stub Note (Public)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'description', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Stub Note (Public)' ), form_item_input, tab_pay_stub_amendment_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\t\t// Description (Private)\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\n\t\tform_item_input.TTextArea( { field: 'private_description' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Description (Private)' ), form_item_input, tab_pay_stub_amendment_column1, '', null, null, true );\n\n\t\t// Effective Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'effective_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Effective Date' ), form_item_input, tab_pay_stub_amendment_column1 );\n\n\n\t\t//Tab 1 start\n\t\tvar tab_cost_center = this.edit_view_tab.find( '#tab_cost_centers' );\n\t\tvar tab_cost_center_column1 = tab_cost_center.find( '.first-column' );\n\t\tthis.edit_view_tabs[1] = [];\n\t\tthis.edit_view_tabs[1].push( tab_cost_center_column1 );\n\n\t\t// Branch\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_branch',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'branch_id',\n\t\t\taddition_source_function: ( function( target, source_data ) {\n\t\t\t\treturn $this.onSourceDataCreate( target, source_data );\n\t\t\t} ),\n\t\t\tadded_items: [\n\t\t\t\t{ value: TTUUID.not_exist_id, label: Global.default_item },\n\t\t\t]\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Branch' ), form_item_input, tab_cost_center_column1, '', null, true );\n\n\t\tif ( !this.show_branch_ui ) {\n\t\t\tthis.detachElement( 'branch_id' );\n\n\t\t}\n\n\t\t// Department\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_department',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'department_id',\n\t\t\taddition_source_function: ( function( target, source_data ) {\n\t\t\t\treturn $this.onSourceDataCreate( target, source_data );\n\t\t\t} ),\n\t\t\tadded_items: [\n\t\t\t\t{ value: TTUUID.not_exist_id, label: Global.default_item },\n\t\t\t]\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Department' ), form_item_input, tab_cost_center_column1, '', null, true );\n\n\t\tif ( !this.show_department_ui ) {\n\t\t\tthis.detachElement( 'department_id' );\n\t\t}\n\n\t\tif ( Global.getProductEdition() >= 20 ) {\n\t\t\t//Job\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIJob,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_job',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_empty: true,\n\t\t\t\tsetRealValueCallBack: ( function( val ) {\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\tjob_coder.setValue( val.manual_id );\n\t\t\t\t\t}\n\t\t\t\t} ),\n\t\t\t\tfield: 'job_id',\n\t\t\t\taddition_source_function: ( function( target, source_data ) {\n\t\t\t\t\treturn $this.onSourceDataCreate( target, source_data );\n\t\t\t\t} ),\n\t\t\t\tadded_items: [\n\t\t\t\t\t{ value: TTUUID.not_exist_id, label: Global.default_item },\n\t\t\t\t]\n\t\t\t} );\n\n\t\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\n\t\t\tvar job_coder = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tjob_coder.TTextInput( { field: 'job_quick_search', disable_keyup_event: true } );\n\t\t\tjob_coder.addClass( 'job-coder' );\n\n\t\t\twidgetContainer.append( job_coder );\n\t\t\twidgetContainer.append( form_item_input );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Job' ), [form_item_input, job_coder], tab_cost_center_column1, '', widgetContainer, true );\n\n\t\t\tif ( !this.show_job_ui ) {\n\t\t\t\tthis.detachElement( 'job_id' );\n\t\t\t}\n\n\t\t\t// Task\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIJobItem,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_job_item',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_empty: true,\n\t\t\t\tsetRealValueCallBack: ( function( val ) {\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\tjob_item_coder.setValue( val.manual_id );\n\t\t\t\t\t}\n\t\t\t\t} ),\n\t\t\t\tfield: 'job_item_id',\n\t\t\t\taddition_source_function: ( function( target, source_data ) {\n\t\t\t\t\treturn $this.onSourceDataCreate( target, source_data );\n\t\t\t\t} ),\n\t\t\t\tadded_items: [\n\t\t\t\t\t{ value: TTUUID.not_exist_id, label: Global.default_item },\n\t\t\t\t]\n\t\t\t} );\n\n\t\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\n\t\t\tvar job_item_coder = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tjob_item_coder.TTextInput( { field: 'job_item_quick_search', disable_keyup_event: true } );\n\t\t\tjob_item_coder.addClass( 'job-coder' );\n\n\t\t\twidgetContainer.append( job_item_coder );\n\t\t\twidgetContainer.append( form_item_input );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Task' ), [form_item_input, job_item_coder], tab_cost_center_column1, '', widgetContainer, true );\n\n\t\t\tif ( !this.show_job_item_ui ) {\n\t\t\t\tthis.detachElement( 'job_item_id' );\n\t\t\t}\n\t\t}\n\t}\n\n\tonSourceDataCreate( target, source_data ) {\n\t\tvar display_columns = target.getDisplayColumns();\n\t\tvar first_item = {};\n\n\t\t$.each( display_columns, function( index, content ) {\n\t\t\tfirst_item.id = TTUUID.not_exist_id;\n\t\t\tfirst_item[content.name] = Global.default_item;\n\t\t\treturn false;\n\t\t} );\n\n\t\t//Error: Object doesn't support property or method 'unshift' in /interface/html5/line 6953\n\t\tif ( !source_data || $.type( source_data ) !== 'array' ) {\n\t\t\tsource_data = [];\n\t\t}\n\t\tsource_data.unshift( first_item );\n\n\t\treturn source_data;\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\n\t\tvar default_args = {};\n\t\tdefault_args.permission_section = 'pay_stub_amendment';\n\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Period' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_period_id',\n\t\t\t\tlayout_name: 'global_Pay_period',\n\t\t\t\tapi_class: TTAPI.APIPayPeriod,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tdefault_args: default_args,\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Stub Account' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_stub_entry_name_id',\n\t\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Title' ),\n\t\t\t\tfield: 'title_id',\n\t\t\t\tin_column: 1,\n\t\t\t\tlayout_name: 'global_job_title',\n\t\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee Status' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'user_status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Branch' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Department' ),\n\t\t\t\tfield: 'department_id',\n\t\t\t\tin_column: 2,\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tuniformVariable( data ) {\n\t\tif ( data.status_id ) {\n\t\t\tdelete data.status_id;\n\t\t}\n\t\treturn super.uniformVariable( data );\n\t}\n\n\tcopyAsNewResetIds( data ) {\n\t\tdata = this.uniformVariable( data );\n\t\tdata.id = null;\n\t\tdata.effective_date = ( new Date ).format( Global.getLoginUserDateFormat() );\n\t\treturn data;\n\t}\n\n}\n"],"names":["PayStubAmendmentViewController","options","_","$","$this","res","status_array","p_id","user_id","result","rate","result_data","column_filter","display_columns","len","i","column_info","key","grid_selected_id_array","ids","user_ids","pay_period_ids","index","value","grid_selected_row","args","post_data","context_menu_model","id","context_btn","grid_selected_length","pId","target","doNotValidate","c_value","widget_rate","widget_units","widget_amount","calc_amount","Decimal","round_decimal_places","iconName","filter","base_date","postData","record","widget","records_data","length","record_data","ignoreWarning","tab","retval","allow_multiple_selection","tab_model","tab_pay_stub_amendment","tab_pay_stub_amendment_column1","form_item_input","default_args","filter_data","widgetContainer","get_hourly_rate_btn","tab_cost_center","tab_cost_center_column1","source_data","val","job_coder","job_item_coder","first_item","content","data"],"mappings":"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"}