import{_ as o,j as r}from"./vendor-tTApdY0Y.bundle.js";class l extends BaseViewController{constructor(e={}){o.defaults(e,{el:"#currency_rate_view_container"}),super(e)}init(e){this.edit_view_tpl="CurrencyRateEditView.html",this.permission_id="currency",this.script_name="CurrencyRateView",this.viewId="CurrencyRate",this.table_name_key="currency_rate",this.context_menu_name=r.i18n._("Rates"),this.navigation_label=r.i18n._("Rate"),this.api=TTAPI.APICurrencyRate,this.render(),this.sub_view_mode?this.buildContextMenu(!0):this.buildContextMenu(),this.sub_view_mode||this.initData()}getCustomContextMenuModel(){var e={exclude:["copy"],include:[]};return e}buildEditViewUI(){super.buildEditViewUI();var e={tab_currency_rate:{label:r.i18n._("Currency Rate")},tab_audit:!0};this.setTabModel(e);var t,a;this.navigation.AComboBox({api_class:TTAPI.APICurrencyRate,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_currency_rate",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var n=this.edit_view_tab.find("#tab_currency_rate"),i=n.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(i),t=Global.loadWidgetByName(FormItemType.AWESOME_BOX),t.AComboBox({api_class:TTAPI.APICurrency,allow_multiple_selection:!1,layout_name:"global_currency",field:"currency_id",set_empty:!1,show_search_inputs:!0}),this.addEditFieldToColumn(r.i18n._("Currency"),t,i),t=Global.loadWidgetByName(FormItemType.DATE_PICKER),t.TDatePicker({field:"date_stamp"}),this.addEditFieldToColumn(r.i18n._("Date"),t,i),t=Global.loadWidgetByName(FormItemType.TEXT_INPUT),t.TTextInput({field:"conversion_rate",width:114}),a=r("<div class=''></div>");var _=r("<span id='rate_conversion_rate_clarification_box'></span>");a.append(t),a.append(_),this.addEditFieldToColumn(r.i18n._("Conversion Rate"),[t],i,"",a,!1,!0)}onMassEditClick(){var e=this;e.is_add=!1,e.is_viewing=!1,e.is_mass_editing=!0,LocalCacheData.current_doing_context_action="mass_edit",e.openEditView();var t={},a=this.getGridSelectIdArray();a.length,this.mass_edit_record_ids=[],r.each(a,function(n,i){e.mass_edit_record_ids.push(i)}),t.filter_data={},t.filter_data.id=this.mass_edit_record_ids,this.api["getCommon"+this.api.key_name+"Data"](t,{onResult:function(n){var i=n.getResult();i||(i=[]),e.api.getOptions("unique_columns",{onResult:function(_){e.unique_columns=_.getResult(),e.linked_columns={},e.sub_view_mode&&e.parent_key&&(i[e.parent_key]=e.parent_value),e.current_edit_record=i,e.initEditView()}})}})}onFormItemChange(e,t){e.getField()=="conversion_rate"&&this.setConversionRateExampleText(e.getValue(),null,this.edit_view_ui_dic.currency_id.getValue()),super.onFormItemChange(e,t)}initEditView(e,t){super.initEditView(),this.setConversionRateExampleText(this.edit_view_ui_dic.conversion_rate.getValue(),null,this.edit_view_ui_dic.currency_id.getValue())}}l.loadSubView=function(s,e,t){Global.loadViewSource("CurrencyRate","SubCurrencyRateView.html",function(a){var n={},i=o.template(a);Global.isSet(e)&&e(),Global.isSet(s)&&(s.html(i(n)),Global.isSet(t)&&TTPromise.wait("BaseViewController","initialize",function(){t(sub_currency_rate_view_controller)}))})};export{l as CurrencyRateViewController};
//# sourceMappingURL=CurrencyRateViewController-Dtv63GIM.bundle.js.map
