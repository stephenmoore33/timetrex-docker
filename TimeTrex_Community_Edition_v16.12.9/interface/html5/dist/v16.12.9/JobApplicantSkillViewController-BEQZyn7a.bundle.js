import{_ as u,j as s}from"./vendor-tTApdY0Y.bundle.js";class p extends BaseViewController{constructor(i={}){u.defaults(i,{el:"#job_applicant_skill_view_container",proficiency_array:null,qualification_array:null,qualification_api:null,sub_view_grid_autosize:!0,sub_view_mode:!0}),super(i)}initialize(i){super.initialize(i),this.edit_view_tpl="JobApplicantSkillEditView.html",this.permission_id="job_applicant",this.viewId="JobApplicantSkill",this.script_name="JobApplicantSkillView",this.table_name_key="job_applicant_skill",this.context_menu_name=s.i18n._("Skills"),this.navigation_label=s.i18n._("Skill"),this.api=TTAPI.APIJobApplicantSkill,this.qualification_api=TTAPI.APIQualification,this.render(),this.sub_view_mode||this.initData()}showNoResultCover(i){super.showNoResultCover(!!this.sub_view_mode)}onGridSelectRow(){this.sub_view_mode?(this.buildContextMenu(!0),this.cancelOtherSubViewSelectedStatus()):this.buildContextMenu(),this.setDefaultMenu()}onGridSelectAll(){this.sub_view_mode&&(this.buildContextMenu(!0),this.cancelOtherSubViewSelectedStatus()),this.setDefaultMenu()}cancelOtherSubViewSelectedStatus(){switch(!0){case typeof this.parent_view_controller.sub_job_applicant_license_view_controller<"u":this.parent_view_controller.sub_job_applicant_license_view_controller.unSelectAll();case typeof this.parent_view_controller.sub_job_applicant_language_view_controller<"u":this.parent_view_controller.sub_job_applicant_language_view_controller.unSelectAll();case typeof this.parent_view_controller.sub_job_applicant_education_view_controller<"u":this.parent_view_controller.sub_job_applicant_education_view_controller.unSelectAll();case typeof this.parent_view_controller.sub_job_applicant_membership_view_controller<"u":this.parent_view_controller.sub_job_applicant_membership_view_controller.unSelectAll();break}}onMassEditClick(){var i=this;i.is_add=!1,i.is_viewing=!1,i.is_mass_editing=!0,LocalCacheData.current_doing_context_action="mass_edit",i.openEditView();var a={},l=this.getGridSelectIdArray();l.length,this.mass_edit_record_ids=[],s.each(l,function(t,e){i.mass_edit_record_ids.push(e)}),a.filter_data={},a.filter_data.id=this.mass_edit_record_ids,this.api["getCommon"+this.api.key_name+"Data"](a,{onResult:function(t){var e=t.getResult();i.unique_columns={},i.linked_columns={},e||(e=[]),i.sub_view_mode&&i.parent_key&&(e[i.parent_key]=i.parent_value),i.current_edit_record=e,i.initEditView()}})}initOptions(){var i=this;this.initDropDownOption("proficiency");var a={},l={};l.type_id=[10],l.visibility_type_id=[20,100],a.filter_data=l,this.qualification_api.getQualification(a,{onResult:function(t){t=t.getResult(),i.qualification_array=t}})}buildEditViewUI(){super.buildEditViewUI();var i=this,a={tab_skill:{label:s.i18n._("Skill")},tab_audit:!0};this.setTabModel(a),this.navigation.AComboBox({api_class:TTAPI.APIJobApplicantSkill,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_jobApplicantSkill",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var l=this.edit_view_tab.find("#tab_skill"),t=l.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(t);var e,_,d,c={},o={};o.type_id=[10],o.visibility_type_id=[20,100],c.filter_data=o,e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIQualification,allow_multiple_selection:!1,layout_name:"global_qualification",show_search_inputs:!0,set_empty:!0,field:"qualification_id"}),e.setDefaultArgs(c),this.addEditFieldToColumn(s.i18n._("Skill"),e,t,""),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"proficiency_id",set_empty:!0}),e.setSourceData(i.proficiency_array),this.addEditFieldToColumn(s.i18n._("Proficiency"),e,t),e=Global.loadWidgetByName(FormItemType.DATE_PICKER),e.TDatePicker({field:"first_used_date"}),this.addEditFieldToColumn(s.i18n._("First Used Date"),e,t),e=Global.loadWidgetByName(FormItemType.DATE_PICKER),e.TDatePicker({field:"last_used_date"}),this.addEditFieldToColumn(s.i18n._("Last Used Date"),e,t);var r=[];e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"experience",width:50}),r.push(e),_=s('<div class="widget-h-box"></div>'),d=s("<span class='widget-right-label'> "+s.i18n._("Automatic")+"</span>"),_.append(e),_.append(d),e=Global.loadWidgetByName(FormItemType.CHECKBOX),e.TCheckbox({field:"enable_calc_experience"}),r.push(e),_.append(e),this.addEditFieldToColumn(s.i18n._("Years Experience"),r,t,"",_),e=Global.loadWidgetByName(FormItemType.DATE_PICKER),e.TDatePicker({field:"expiry_date"}),this.addEditFieldToColumn(s.i18n._("Expiry Date"),e,t,"",null),e=Global.loadWidgetByName(FormItemType.TEXT_AREA),e.TTextArea({field:"description",width:"100%"}),this.addEditFieldToColumn(s.i18n._("Description"),e,t,"",null,null,!0),e.parent().width("45%"),e=Global.loadWidgetByName(FormItemType.TAG_INPUT),e.TTagInput({field:"tag",object_type_id:391}),this.addEditFieldToColumn(s.i18n._("Tags"),e,t,"",null,null,!0)}setEditViewDataDone(){super.setEditViewDataDone(),this.current_edit_record.enable_calc_experience?this.edit_view_ui_dic.experience.setEnabled(!1):this.edit_view_ui_dic.experience.setEnabled(!0)}onFormItemChange(i,a){this.setIsChanged(i),this.setMassEditingFieldsWhenFormChange(i);var l=i.getField(),t=i.getValue();switch(l){case"enable_calc_experience":t?this.calcExperience():this.edit_view_ui_dic.experience.setEnabled(!0);break;case"last_used_date":case"first_used_date":this.current_edit_record.enable_calc_experience&&this.calcExperience();break}this.current_edit_record[l]=t,a||this.validate()}calcExperience(){this.edit_view_ui_dic.experience.setEnabled(!1);var i=this.edit_view_ui_dic.first_used_date.getValue(),a=this.edit_view_ui_dic.last_used_date.getValue();if(a=a||new Date().format(),i!==""&&a!==""){var l=this.api.calcExperience(i,a,{async:!1});if(l){var t=l.getResult();this.edit_view_ui_dic.experience.setValue(t)}}else this.edit_view_ui_dic.experience.setValue(0)}onAddClick(){this.sub_view_mode&&this.buildContextMenu(!0),super.onAddClick()}searchDone(){super.searchDone(),TTPromise.resolve("JobApplicant_Qualifications_Tab","JobApplicantSkillViewController")}}p.loadSubView=function(n,i,a){Global.loadViewSource("JobApplicantSkill","SubJobApplicantSkillView.html",function(l){var t={},e=u.template(l);Global.isSet(i)&&i(),Global.isSet(n)&&(n.html(e(t)),Global.isSet(a)&&a(sub_job_applicant_skill_view_controller))})};export{p as JobApplicantSkillViewController};
//# sourceMappingURL=JobApplicantSkillViewController-BEQZyn7a.bundle.js.map
