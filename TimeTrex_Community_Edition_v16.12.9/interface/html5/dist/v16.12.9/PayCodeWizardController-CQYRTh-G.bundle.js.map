{"version":3,"file":"PayCodeWizardController-CQYRTh-G.bundle.js","sources":["../../views/wizard/pay_code/PayCodeWizardController.js"],"sourcesContent":["export class PayCodeWizardController extends BaseWizardController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '.wizard-bg'\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\n\t\tthis.title = $.i18n._( 'Migrate Pay Codes' );\n\t\tthis.steps = 2;\n\t\tthis.current_step = 1;\n\t\t$( this.el ).width( 1010 );\n\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tsuper.render();\n\n\t\tthis.initCurrentStep();\n\t}\n\n\t//Create each page UI\n\tbuildCurrentStepUI() {\n\n\t\tthis.content_div.empty();\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tvar label = this.getLabel();\n\t\t\t\tlabel.html( $.i18n._( 'This wizard will migrate data associated with one pay code to another pay code without recalculating timesheets or otherwise affecting employees time or wages.' ) + '<br><br>' +\n\t\t\t\t\t'<span style=\"color: #ff0000; font-weight: bold;\">' + $.i18n._( 'WARNING' ) + ': ' + '</span>' +\n\t\t\t\t\t$.i18n._( 'This operation can not be reversed once complete.' ) );\n\n\t\t\t\tthis.content_div.append( label );\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tvar content = $( $( this.el ).find( '.wizard-content' ) );\n\n\t\t\t\tvar content_clone = content.clone();\n\n\t\t\t\tthis.stepsWidgetDic[this.current_step] = {};\n\n\t\t\t\t// Select Source Pay Codes\n\n\t\t\t\tvar first_hr = content_clone.find( '.first-hr' );\n\t\t\t\tfirst_hr.find( '.wizard-item-label > span' ).text( $.i18n._( 'Select Source Pay Codes' ) );\n\t\t\t\tvar a_combobox = this.getAComboBox( TTAPI.APIPayCode, true, 'global_pay_code', 'source_pay_code_ids' );\n\t\t\t\tfirst_hr.find( '.wizard-item-widget' ).append( a_combobox );\n\n\t\t\t\tthis.stepsWidgetDic[this.current_step][a_combobox.getField()] = a_combobox;\n\n\t\t\t\t// Select Destination Pay Code\n\n\t\t\t\tvar second_hr = content_clone.find( '.second-hr' );\n\t\t\t\tsecond_hr.find( '.wizard-item-label > span' ).text( $.i18n._( 'Select Destination Pay Code' ) );\n\t\t\t\ta_combobox = this.getAComboBox( TTAPI.APIPayCode, false, 'global_pay_code', 'dest_pay_code_id' );\n\t\t\t\tsecond_hr.find( '.wizard-item-widget' ).append( a_combobox );\n\n\t\t\t\tthis.stepsWidgetDic[this.current_step][a_combobox.getField()] = a_combobox;\n\n\t\t\t\tcontent_clone.appendTo( this.content_div );\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tbuildCurrentStepData() {\n\t}\n\n\tonDoneClick() {\n\t\tvar $this = this;\n\t\tsuper.onDoneClick();\n\t\tthis.saveCurrentStep();\n\t\tvar source_pay_code_ids = this.stepsDataDic[2].source_pay_code_ids;\n\t\tvar dest_pay_code_id = this.stepsDataDic[2].dest_pay_code_id;\n\n\t\tvar pay_code_api = TTAPI.APIPayCode;\n\n\t\tpay_code_api.migratePayCode( source_pay_code_ids, dest_pay_code_id, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( result_data ) {\n\t\t\t\t\t$this.onCloseClick();\n\n\t\t\t\t\tif ( $this.call_back ) {\n\t\t\t\t\t\t$this.call_back();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tTAlertManager.showErrorAlert( result );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentStepValues() {\n\n\t\tif ( !this.stepsDataDic[this.current_step] ) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\t}\n\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tif ( current_step_data.source_pay_code_ids ) {\n\t\t\t\t\tcurrent_step_ui.source_pay_code_ids.setValue( current_step_data.source_pay_code_ids );\n\t\t\t\t}\n\t\t\t\tif ( current_step_data.dest_pay_code_id ) {\n\t\t\t\t\tcurrent_step_ui.dest_pay_code_id.setValue( current_step_data.dest_pay_code_id );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsaveCurrentStep() {\n\t\tthis.stepsDataDic[this.current_step] = {};\n\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tcurrent_step_data.source_pay_code_ids = current_step_ui.source_pay_code_ids.getValue();\n\t\t\t\tcurrent_step_data.dest_pay_code_id = current_step_ui.dest_pay_code_id.getValue();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetDefaultDataToSteps() {\n\n\t\tif ( !this.default_data ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.stepsDataDic[2] = {};\n\n\t\tif ( this.getDefaultData( 'source_pay_code_ids' ) ) {\n\t\t\tthis.stepsDataDic[2].source_pay_code_ids = this.getDefaultData( 'source_pay_code_ids' );\n\t\t}\n\n\t\tif ( this.getDefaultData( 'dest_pay_code_id' ) ) {\n\t\t\tthis.stepsDataDic[2].dest_pay_code_id = this.getDefaultData( 'dest_pay_code_id' );\n\t\t}\n\t}\n\n}"],"names":["PayCodeWizardController","options","_","$","label","content","content_clone","first_hr","a_combobox","second_hr","$this","source_pay_code_ids","dest_pay_code_id","pay_code_api","result","result_data","current_step_data","current_step_ui"],"mappings":"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"}