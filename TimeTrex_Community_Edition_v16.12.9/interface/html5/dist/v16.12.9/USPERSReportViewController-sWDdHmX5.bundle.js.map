{"version":3,"file":"USPERSReportViewController-sWDdHmX5.bundle.js","sources":["../../views/reports/us_pers/USPERSReportViewController.js"],"sourcesContent":["export class USPERSReportViewController extends ReportBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tform_setup_states_array: null,\n\n\t\t\tform_setup_ui_dic: {},\n\t\t\tform_setup_data: {},\n\n\t\t\tsave_form_setup_data: {}\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinitReport( options ) {\n\t\tthis.script_name = 'USPERSReport';\n\t\tthis.viewId = 'USPERSReport';\n\t\tthis.context_menu_name = $.i18n._( 'US PERS' );\n\t\tthis.navigation_label = $.i18n._( 'Saved Report' );\n\t\tthis.view_file = 'USPERSReportView.html';\n\t\tthis.api = TTAPI.APIUSPERSReport;\n\t\tthis.include_form_setup = true;\n\t\tthis.form_setup_data = {};\n\t}\n\n\tinitOptions( callBack ) {\n\t\tvar options = [\n\t\t\t{ option_name: 'page_orientation' },\n\t\t\t{ option_name: 'font_size' },\n\t\t\t{ option_name: 'auto_refresh' },\n\t\t\t{ option_name: 'chart_display_mode' },\n\t\t\t{ option_name: 'chart_type' },\n\t\t\t{ option_name: 'templates' },\n\t\t\t{ option_name: 'setup_fields' },\n\t\t\t{ option_name: 'form_setup_states' }\n\t\t];\n\n\t\tthis.initDropDownOptions( options, function( result ) {\n\n\t\t\tcallBack( result ); // First to initialize drop down options, and then to initialize edit view UI.\n\n\t\t} );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\tgroups: {\n\t\t\t},\n\t\t\texclude: [],\n\t\t\tinclude: [\n\t\t\t\t// {\n\t\t\t\t// \tlabel: $.i18n._( 'Export' ),\n\t\t\t\t// \tid: 'export_export',\n\t\t\t\t// \tgroup: 'editor',\n\t\t\t\t// \tvue_icon: 'tticon tticon-file_upload_black_24dp',\n\t\t\t\t// \tmenu_align: 'right'\n\t\t\t\t// },\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Save Setup' ),\n\t\t\t\t\tid: 'save_setup',\n\t\t\t\t\tgroup: 'form',\n\t\t\t\t\tvue_icon: 'tticon tticon-settings_black_24dp',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\tsort_order: 3000\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tonContextMenuClick( context_btn, menu_name ) {\n\t\tvar id;\n\t\tif ( Global.isSet( menu_name ) ) {\n\t\t\tid = menu_name;\n\t\t} else {\n\n\t\t\tif ( context_btn.disabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif ( this.select_grid_last_row ) {\n\t\t\tthis.export_grid.grid.jqGrid( 'saveRow', this.select_grid_last_row );\n\t\t\tthis.select_grid_last_row = null;\n\t\t}\n\n\t\tvar message_override = $.i18n._( 'Setup data for this report has not been configured yet. Please click on the Form Setup tab to do so now.' );\n\n\t\tswitch ( id ) {\n\t\t\tcase 'view':\n\t\t\t\tProgressBar.showOverlay();\n\t\t\t\tthis.onViewClick( null, false, message_override );\n\t\t\t\tbreak;\n\t\t\tcase 'view_html':\n\t\t\t\tProgressBar.showOverlay();\n\t\t\t\tthis.onViewClick( 'html', false, message_override );\n\t\t\t\tbreak;\n\t\t\tcase 'view_html_new_window':\n\t\t\t\tthis.onViewClick( 'html', false, message_override );\n\t\t\t\tbreak;\n\t\t\tcase 'export_export':\n\t\t\t\tProgressBar.showOverlay();\n\t\t\t\tthis.onViewClick( 'efile', false, message_override );\n\t\t\t\tbreak;\n\t\t\tcase 'cancel':\n\t\t\t\tthis.onCancelClick();\n\t\t\t\tbreak;\n\t\t\tcase 'save_existed_report': //All report view\n\t\t\t\tthis.onSaveExistedReportClick();\n\t\t\t\tbreak;\n\t\t\tcase 'save_new_report': //All report view\n\t\t\t\tthis.onSaveNewReportClick();\n\t\t\t\tbreak;\n\t\t\tcase 'save_setup': //All report view\n\t\t\t\tthis.onSaveSetup( $.i18n._( 'Form setup' ) );\n\t\t\t\tbreak;\n\t\t}\n\t\tGlobal.triggerAnalyticsContextMenuClick( context_btn, menu_name );\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\n\t\tvar tab_3_label = this.edit_view.find( 'a[ref=tab_form_setup]' );\n\t\ttab_3_label.text( $.i18n._( 'Form Setup' ) );\n\t}\n\n\tbuildFormSetupUI() {\n\n\t\tvar $this = this;\n\n\t\tvar tab3 = this.edit_view_tab.find( '#tab_form_setup' );\n\n\t\tvar tab3_column1 = tab3.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[3] = [];\n\n\t\tthis.edit_view_tabs[3].push( tab3_column1 );\n\n\t\t//Form setup\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'form_setup_type', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.form_setup_states_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'State' ), form_item_input, tab3_column1, '' );\n\n\t\tform_item_input.bind( 'formItemChange', function( e, target ) {\n\t\t\t$this.onFormSetupChange( target.getValue() );\n\t\t} );\n\t}\n\n\tonFormSetupChange( state ) {\n\t\tvar $this = this;\n\n\t\tthis.removeCurrentFormSetupUI();\n\t\tthis.form_setup_ui_dic = {};\n\n\t\tvar yes_no_arr = {\n\t\t\t'0': $.i18n._( 'No' ),\n\t\t\t'1': $.i18n._( 'Yes' )\n\t\t};\n\n\t\tswitch ( state ) {\n\t\t\tcase 'MS':\n\t\t\t\t$this.buildAdditionalCustomInputBox( state, 'reporting_unit_number', $.i18n._( 'Unit Number' ) );\n\t\t\t\t//This is handled automatically through Tax/Deduction paystub accounts, if they are employee deduction or employer deduction.\n\t\t\t\t// $this.buildIncludeExcludeDropdown( state, 'employee_deduction', 'pay_stub_entry_account', $.i18n._( 'Employee Contributions' ) );\n\t\t\t\t// $this.buildIncludeExcludeDropdown( state, 'employer_deduction', 'pay_stub_entry_account', $.i18n._( 'Employer Contributions' ) );\n\t\t\t\t$this.buildAdditionalCustomInputBox( state, 'wage_code', $.i18n._( 'Wage Code' ) );\n\n\t\t\t\t$this.buildAdditionalCustomInputBox( state, 'retirement_status_date', $.i18n._( 'Retirement Status Date' ) );\n\t\t\t\t$this.buildAdditionalCustomInputBox( state, 'retirement_status_code', $.i18n._( 'Retirement Status Code' ) ); //Could probably use existing status_id for this.\n\t\t\t\t$this.buildAdditionalCustomInputBox( state, 'title_code', $.i18n._( 'Position Code' ) );\n\t\t\t\tbreak;\n\t\t\tcase 'IA':\n\t\t\t\t$this.buildAdditionalCustomInputBox( state, 'title_code', $.i18n._( 'Occupation Code' ) );\n\t\t\t\tbreak;\n\t\t\tcase 'NE':\n\t\t\t\t$this.buildAdditionalCustomInputBox( state, 'agency_number', $.i18n._( 'Agency Number' ) );\n\t\t\t\t$this.buildAdditionalCustomInputBox( state, 'plan_participation_date', $.i18n._( 'Plan Participation Date' ) );\n\t\t\t\tbreak;\n\t\t\tcase 'NV':\n\t\t\t\t//$this.buildAdditionalCustomInputBox( state, 'title_code', $.i18n._( 'Employment Type' ) );\n\t\t\t\t$this.buildAdditionalCustomInputBox( state, 'employment_status', $.i18n._( 'Employment Status (FT/PT)' ) );\n\t\t\t\t$this.buildAdditionalCustomInputBox( state, 'employment_status_code', $.i18n._( 'Status Code' ) );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif ( this.edit_view_tab ) {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_form_setup .first-column' ).append( '<div id=\"no-setup-data\" style=\"font-weight: bold; text-align:center\">' + $.i18n._( 'No form setup required for this state.' ) + '</div>' );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Overridden to allow stateful form_setup formats. This ensures your changes are put into memory..\n\t *\n\t * @param target\n\t * @param doNotDoValidate\n\t */\n\tonFormItemChange( target, doNotValidate ) {\n\t\tif ( target && target.getField && target.getField() == 'form_setup_type' ) { // cannot read property getField of undefined\n\t\t\tvar other = {};\n\t\t\tother.form_setup_type = this.current_edit_record.form_setup_type;\n\t\t\tother[other.form_setup_type] = {};\n\n\t\t\t// this.save_form_setup_data[other.form_setup_type] = this.getFormSetupData( other );\n\t\t\tthis.form_setup_changed = true;\n\t\t\treturn; //make room for the custom event above\n\t\t}\n\t\tsuper.onFormItemChange( target, doNotValidate );\n\t}\n\n\t/**\n\t * Get the form setup data from the api\n\t * @param res_Data\n\t */\n\tsetFormSetupData( res_data ) {\n\t\tif ( !res_data ) {\n\t\t\tthis.show_empty_message = true;\n\t\t}\n\n\t\tthis.save_form_setup_data = res_data;\n\n\t\tvar batch_get_real_data = {};\n\n\t\tif ( res_data.form_setup_type && this.edit_view_ui_dic.form_setup_type ) {\n\t\t\tthis.edit_view_ui_dic.form_setup_type.setValue( res_data.form_setup_type );\n\t\t\tthis.onFormSetupChange( res_data.form_setup_type );\n\n\t\t\tlet key_prefix = `form_setup_${res_data.form_setup_type}_`;\n\n\t\t\tbatch_get_real_data = this.processFormSetupDataAndAddToBatch( res_data, [\n\t\t\t\t{ data: _.get(res_data, [ res_data.form_setup_type, 'employee_contribution']), field_key: key_prefix + 'employee_contribution', api: this.api_paystub, api_method: 'getPayStubEntryAccount' },\n\t\t\t\t{ data: _.get(res_data, [ res_data.form_setup_type, 'employee_contribution']), field_key: key_prefix + 'employee_contribution', api: this.api_paystub, api_method: 'getPayStubEntryAccount' },\n\t\t\t] );\n\t\t\tthis.getBatchedRealFormDataFromAPI( batch_get_real_data );\n\n\t\t\tbatch_get_real_data = this.processFormSetupDataAndAddToBatch( res_data, [\n\t\t\t\t{ data: _.get(res_data, [ res_data.form_setup_type, 'employer_contribution']), field_key: key_prefix + 'employer_contribution', api: this.api_paystub, api_method: 'getPayStubEntryAccount' },\n\t\t\t\t{ data: _.get(res_data, [ res_data.form_setup_type, 'employer_contribution']), field_key: key_prefix + 'employer_contribution', api: this.api_paystub, api_method: 'getPayStubEntryAccount' },\n\t\t\t] );\n\t\t\tthis.getBatchedRealFormDataFromAPI( batch_get_real_data );\n\n\t\t} else if ( Array.isArray( this.form_setup_states_array ) && this.form_setup_states_array.length > 0 ) {\n\t\t\tthis.onFormSetupChange( this.form_setup_states_array[0]['value'] );\n\t\t}\n\t}\n\n\tbuildIncludeExcludeDropdown( state, prefix, suffix, label ) {\n\t\tvar tab3 = this.edit_view_tab.find( '#tab_form_setup' );\n\t\tvar tab3_column1 = tab3.find( '.first-column' );\n\n\t\tvar field_name_include = 'form_setup_' + state + '_' + prefix + '_include_' + suffix;\n\t\tvar field_name_exclude = 'form_setup_' + state + '_' + prefix + '_exclude_' + suffix;\n\n\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\tvar $this = this;\n\n\t\t//Selection Type\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: field_name_include\n\t\t} );\n\n\t\tvar form_item = this.putInputToInsideFormItem( form_item_input, $.i18n._( 'Include' ) );\n\n\t\tv_box.append( form_item );\n\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t//Selection\n\t\tvar form_item_input_1 = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input_1.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayStubEntryAccount,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_PayStubAccount',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: field_name_exclude\n\t\t} );\n\n\t\tform_item = this.putInputToInsideFormItem( form_item_input_1, $.i18n._( 'Exclude' ) );\n\n\t\tv_box.append( form_item );\n\n\t\tthis.addEditFieldToColumn( label, [form_item_input, form_item_input_1], tab3_column1, '', v_box, false, true );\n\t\tthis.setWidgetVisible( [form_item_input, form_item_input_1] );\n\n\t\tthis.form_setup_ui_dic['form_setup_' + state +'_'+ prefix +'_'+ suffix] = v_box.parent().parent() //Reference on form change to remove v_box and include/exclude fields\n\n\t\tif ( this.save_form_setup_data[state][prefix] && this.save_form_setup_data[state][prefix]['include_' + suffix] ) {\n\t\t\tthis.edit_view_ui_dic[field_name_include].setValue( this.save_form_setup_data[state][prefix]['include_' + suffix] );\n\t\t}\n\t\tif ( this.save_form_setup_data[state][prefix] && this.save_form_setup_data[state][prefix]['exclude_' + suffix] ) {\n\t\t\tthis.edit_view_ui_dic[field_name_exclude].setValue( this.save_form_setup_data[state][prefix]['exclude_' + suffix] );\n\t\t}\n\n\t\tthis.editFieldResize( 3 );\n\t}\n\n\tbuildAdditionalCustomInputBox( state, code, label, custom_dropdown_options = null ) {\n\t\tif ( !this.save_form_setup_data ) {\n\t\t\tthis.save_form_setup_data = {};\n\t\t}\n\n\t\tif ( !this.save_form_setup_data[state] ) {\n\t\t\tthis.save_form_setup_data[state] = {};\n\t\t}\n\n\t\tvar $this = this;\n\n\t\tvar tab3 = this.edit_view_tab.find( '#tab_form_setup' );\n\t\tvar tab3_column1 = tab3.find( '.first-column' );\n\t\tthis.edit_view_tabs[3] = [];\n\t\tthis.edit_view_tabs[3].push( tab3_column1 );\n\n\t\tvar field_name = 'form_setup_' + state + '_' + code;\n\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: field_name } );\n\n\t\tif ( !custom_dropdown_options ) {\n\t\t\tvar h_box = $( '<div class=\\'h-box\\'></div>' );\n\t\t\tvar text_box = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\ttext_box.css( 'margin-left', '10px' );\n\t\t\ttext_box.TTextInput( { field: field_name + '_text' } );\n\t\t\th_box.append( form_item_input );\n\t\t\th_box.append( text_box );\n\n\t\t\tthis.addEditFieldToColumn( $.i18n._( label ), [form_item_input, text_box], tab3_column1, '', h_box, true );\n\t\t\tthis.setWidgetVisible( [form_item_input, text_box] );\n\t\t\tform_item_input.bind( 'formItemChange', ( e, target ) => {\n\t\t\t\tif ( target.getValue() === 0 ) {\n\t\t\t\t\ttext_box.css( 'display', 'inline' );\n\t\t\t\t\tif ( this.save_form_setup_data[state][code + '_value'] ) {\n\t\t\t\t\t\ttext_box.setValue( this.save_form_setup_data[state][code + '_value'] );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttext_box.css( 'display', 'none' );\n\t\t\t\t\ttext_box.setValue( '' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tthis.api.getOptions( 'form_setup_custom_fields', {\n\t\t\t\tonResult: ( result ) => {\n\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\tform_item_input.setSourceData( Global.buildRecordArray( result_data ) );\n\n\t\t\t\t\tif ( this.save_form_setup_data[state] && this.save_form_setup_data[state][code] ) {\n\t\t\t\t\t\tform_item_input.setValue( this.save_form_setup_data[state][code] );\n\t\t\t\t\t}\n\t\t\t\t\tform_item_input.trigger( 'formItemChange', [form_item_input, true] );\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\tform_item_input.setSourceData( custom_dropdown_options );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( label ), form_item_input, tab3_column1, '', null, true );\n\t\t\tthis.setWidgetVisible( [form_item_input] );\n\n\t\t\tif ( this.save_form_setup_data[state] && this.save_form_setup_data[state][code] ) {\n\t\t\t\tform_item_input.setValue( this.save_form_setup_data[state][code] );\n\t\t\t}\n\t\t\tform_item_input.trigger( 'formItemChange', [form_item_input, true] );\n\t\t}\n\n\t\tthis.form_setup_ui_dic[field_name] = this.edit_view_form_item_dic[field_name];\n\t\tdelete this.edit_view_form_item_dic[field_name];\n\n\t\tthis.editFieldResize( 3 );\n\t}\n\n\tremoveCurrentFormSetupUI() {\n\n\t\tfor ( var key in this.form_setup_ui_dic ) {\n\t\t\tvar html_item = this.form_setup_ui_dic[key];\n\t\t\tif ( html_item ) {\n\t\t\t\thtml_item.remove();\n\t\t\t}\n\t\t}\n\n\t\t$( '#no-setup-data' ).remove();\n\n\t\t//Error: Unable to get property 'find' of undefined or null reference in /interface/html5/ line 1033\n\t\tif ( !this.edit_view_tab ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar tab3 = this.edit_view_tab.find( '#tab_form_setup' );\n\t\tvar tab3_column1 = tab3.find( '.first-column' );\n\t\tvar clear_both_div = tab3_column1.find( '.clear-both-div' );\n\n\t\tclear_both_div.remove();\n\t}\n\n\t/**\n\t * Gets array of properly configured values for the form_setup setup form.\n\t *\n\t * @param field_list Array\n\t * @returns {{}|*}\n\t */\n\tgetFormSetupFieldValues( state, field_list ) {\n\t\tvar retarr = {};\n\n\t\tfor ( var i = 0; i < field_list.length; i++ ) {\n\t\t\tif ( this.edit_view_ui_dic['form_setup_' + state + '_' + field_list[i]] && !this.edit_view_ui_dic['form_setup_' + state + '_' + field_list[i]].getValue() ) {\n\t\t\t\tif ( this.edit_view_ui_dic['form_setup_' + state + '_' + field_list[i] + '_text'] ) {\n\t\t\t\t\t//States with text fields\n\t\t\t\t\tretarr[field_list[i]] = this.edit_view_ui_dic['form_setup_' + state + '_' + field_list[i] + '_text'].getValue();\n\t\t\t\t\tretarr[field_list[i] + '_value'] = this.edit_view_ui_dic['form_setup_' + state + '_' + field_list[i] + '_text'].getValue();\n\t\t\t\t} else {\n\t\t\t\t\t//States without text fields such as Louisiana custom dropdown options\n\t\t\t\t\tretarr[field_list[i]] = this.edit_view_ui_dic['form_setup_' + state + '_' + field_list[i]].getValue();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( !this.edit_view_ui_dic['form_setup_' + state + '_' + field_list[i]] ) {\n\t\t\t\t\tretarr[field_list[i]] = '';\n\t\t\t\t} else {\n\t\t\t\t\tretarr[field_list[i]] = this.edit_view_ui_dic['form_setup_' + state + '_' + field_list[i]].getValue();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//Include/Exclude regular earning accounts\n\t\t// if ( this.edit_view_ui_dic['form_setup_' + state + '_employee_deduction_include_pay_stub_entry_account'] ) {\n\t\t// \tretarr['employee_deduction'] = {\n\t\t// \t\tinclude_pay_stub_entry_account: this.edit_view_ui_dic['form_setup_' + state + '_employee_deduction_include_pay_stub_entry_account'].getValue(),\n\t\t// \t\texclude_pay_stub_entry_account: this.edit_view_ui_dic['form_setup_' + state + '_employee_deduction_exclude_pay_stub_entry_account'].getValue()\n\t\t// \t};\n\t\t// }\n\t\t//\n\t\t// if ( this.edit_view_ui_dic['form_setup_' + state + '_employer_deduction_include_pay_stub_entry_account'] ) {\n\t\t// \tretarr['employer_deduction'] = {\n\t\t// \t\tinclude_pay_stub_entry_account: this.edit_view_ui_dic['form_setup_' + state + '_employer_deduction_include_pay_stub_entry_account'].getValue(),\n\t\t// \t\texclude_pay_stub_entry_account: this.edit_view_ui_dic['form_setup_' + state + '_employer_deduction_exclude_pay_stub_entry_account'].getValue()\n\t\t// \t};\n\t\t// }\n\n\t\treturn retarr;\n\t}\n\n\tgetFormData( other, for_display ) {\n\t\tif ( !other || !other.form_setup_type ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tother[other.form_setup_type] = this.getFormSetupFieldValues( other.form_setup_type, this.getFieldList( other.form_setup_type ) );\n\n\t\tif ( !this.save_form_setup_data ) {\n\t\t\tthis.save_form_setup_data = {};\n\t\t}\n\t\tthis.save_form_setup_data[other.form_setup_type] = other[other.form_setup_type];\n\t\tthis.save_form_setup_data['form_setup_type'] = other.form_setup_type;\n\n\t\tif ( for_display ) {\n\t\t\tfor ( var key in this.save_form_setup_data ) {\n\t\t\t\tif ( key !== false && typeof ( this.save_form_setup_data[key] ) !== 'string' ) {\n\t\t\t\t\tthis.save_form_setup_data[key] = this.convertFormSetupValues( this.save_form_setup_data[key] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.save_form_setup_data;\n\t}\n\n\tgetFieldList( state ) {\n\t\tvar field_list = [];\n\n\t\tswitch ( state ) {\n\t\t\tcase 'MS':\n\t\t\t\tfield_list = [ 'reporting_unit_number', 'wage_code', 'retirement_status_date', 'retirement_status_code', 'title_code' ];\n\t\t\t\tbreak;\n\t\t\tcase 'IA':\n\t\t\t\tfield_list = [ 'title_code' ];\n\t\t\t\tbreak;\n\t\t\tcase 'NE':\n\t\t\t\tfield_list = [ 'agency_number', 'plan_participation_date' ];\n\t\t\t\tbreak;\n\t\t\tcase 'NV':\n\t\t\t\tfield_list = [ 'employment_status', 'employment_status_code' ];\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn field_list;\n\t}\n\n\t/* jshint ignore:start */\n\tgetFormSetupData( for_view ) {\n\t\tvar other = {};\n\t\tother.form_setup_type = this.edit_view_ui_dic.form_setup_type.getValue();\n\n\t\tother[other.form_setup_type] = {};\n\n\t\tother = this.getFormData( other, true );\n\n\t\treturn other;\n\t}\n\n\t/**\n\t * Backwards compatible function for custom data to be moved from the way the api stores it to the way the form needs it.\n\t *\n\t * the old custom field data was stored in obj[key]\n\t * new custom field data is stored in obj[key+'_value']\n\t *\n\t * ie. obj[company_code] is now obj[company_code_value]\n\t *\n\t * @param data\n\t * @returns {*}\n\t */\n\tconvertFormSetupValues( data ) {\n\t\tfor ( var api_data_key in data ) {\n\t\t\tvar form_data_key = api_data_key.substr( 0, api_data_key.indexOf( '_value' ) );\n\t\t\tif ( api_data_key.search( '_value' ) > 0 ) {\n\t\t\t\tdata[form_data_key] = data[api_data_key];\n\t\t\t}\n\t\t}\n\t\t//conversion for lower form_setup grid data from old format\n\t\tif ( data.form_setup_columns && !data.columns && data.form_setup_type != 0 && data.form_setup_columns[data.form_setup_type] ) {\n\t\t\tdata.columns = {};\n\t\t\tdata.columns = data.form_setup_columns[data.form_setup_type].columns;\n\t\t}\n\n\t\treturn data;\n\t}\n\n}"],"names":["USPERSReportViewController","options","_","$","callBack","result","context_menu_model","context_btn","menu_name","id","message_override","tab_3_label","$this","tab3","tab3_column1","form_item_input","e","target","state","doNotValidate","other","res_data","batch_get_real_data","key_prefix","prefix","suffix","label","field_name_include","field_name_exclude","v_box","form_item","form_item_input_1","code","custom_dropdown_options","field_name","h_box","text_box","result_data","key","html_item","clear_both_div","field_list","retarr","i","for_display","for_view","data","api_data_key","form_data_key"],"mappings":"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"}