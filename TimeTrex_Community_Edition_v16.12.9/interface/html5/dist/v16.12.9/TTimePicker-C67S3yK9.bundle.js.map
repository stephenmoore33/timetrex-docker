{"version":3,"file":"TTimePicker-C67S3yK9.bundle.js","sources":["../../global/widgets/timepicker/TTimePicker.js"],"sourcesContent":["( function( $ ) {\n\n\t$.fn.TTimePicker = function( options ) {\n\t\tvar opts = $.extend( {}, $.fn.TTimePicker.defaults, options );\n\t\t//Global.addCss( 'global/widgets/timepicker/TTimePicker.css' );\n\t\tvar $this = this;\n\t\tvar field;\n\t\tvar validation_field;\n\t\tvar time_picker_input;\n\t\tvar icon;\n\t\tvar error_string = '';\n\t\tvar error_tip_box;\n\t\tvar mass_edit_mode = false;\n\t\tvar check_box = null;\n\t\tvar enabled = true;\n\t\tvar is_open = false;\n\t\tvar focus_out_timer;\n\t\tvar can_open = false; //default when the calender can be open, we only open it when click on the icon\n\t\tvar is_static_width = false;\n\t\tvar stepMinute = 15;\n\n\t\tthis.getEnabled = function() {\n\t\t\treturn enabled;\n\t\t};\n\n\t\tthis.setEnabled = function( val ) {\n\t\t\tenabled = val;\n\t\t\tif ( val === false || val === '' ) {\n\t\t\t\ttime_picker_input.addClass( 't-time-picker-readonly' );\n\t\t\t\ticon.css( 'display', 'none' );\n\t\t\t\ttime_picker_input.attr( 'readonly', 'readonly' );\n\t\t\t} else {\n\t\t\t\ttime_picker_input.removeClass( 't-time-picker-readonly' );\n\t\t\t\ticon.css( 'display', 'inline' );\n\t\t\t\ttime_picker_input.removeAttr( 'readonly' );\n\t\t\t}\n\t\t};\n\n\t\tthis.setCheckBox = function( val ) {\n\t\t\tcheck_box.children().eq( 0 )[0].checked = val;\n\t\t};\n\n\t\tthis.isChecked = function() {\n\t\t\tif ( check_box ) {\n\t\t\t\tif ( check_box.children().eq( 0 )[0].checked === true ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.setMassEditMode = function( val ) {\n\t\t\tmass_edit_mode = val;\n\t\t\tif ( mass_edit_mode ) {\n\t\t\t\tcheck_box = $( ' <div class=\"mass-edit-checkbox-wrapper\"><input type=\"checkbox\" class=\"mass-edit-checkbox\"></input>' +\n\t\t\t\t\t'<label for=\"checkbox-input-1\" class=\"input-helper input-helper--checkbox\"></label></div>' );\n\t\t\t\tcheck_box.insertBefore( $( this ) );\n\n\t\t\t\tcheck_box.change( function() {\n\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t} );\n\n\t\t\t} else {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.remove();\n\t\t\t\t\tcheck_box = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setErrorStyle = function( errStr, show, isWarning ) {\n\t\t\tif ( isWarning ) {\n\t\t\t\ttime_picker_input.addClass( 'warning-tip' );\n\t\t\t} else {\n\t\t\t\ttime_picker_input.addClass( 'error-tip' );\n\t\t\t}\n\t\t\terror_string = errStr;\n\t\t\tif ( show ) {\n\t\t\t\tthis.showErrorTip();\n\t\t\t}\n\t\t};\n\n\t\tthis.showErrorTip = function( sec ) {\n\t\t\tif ( !Global.isSet( sec ) ) {\n\t\t\t\tsec = 2;\n\t\t\t}\n\t\t\tif ( !error_tip_box ) {\n\t\t\t\terror_tip_box = Global.loadWidgetByName( WidgetNamesDic.ERROR_TOOLTIP );\n\t\t\t\terror_tip_box = error_tip_box.ErrorTipBox();\n\t\t\t}\n\t\t\tif ( time_picker_input.hasClass( 'warning-tip' ) ) {\n\t\t\t\terror_tip_box.show( this, error_string, sec, true );\n\t\t\t} else {\n\t\t\t\terror_tip_box.show( this, error_string, sec );\n\t\t\t}\n\t\t};\n\n\t\tthis.hideErrorTip = function() {\n\t\t\tif ( Global.isSet( error_tip_box ) ) {\n\t\t\t\terror_tip_box.remove();\n\t\t\t}\n\t\t};\n\n\t\t// Error: TypeError: time_picker_input is undefined in /interface/html5/global/widgets/datepicker/TTimePicker.js?v=8.0.3-20150313-161037 line 122\n\t\tthis.clearErrorStyle = function() {\n\t\t\tif ( !time_picker_input ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttime_picker_input.removeClass( 'error-tip' );\n\t\t\ttime_picker_input.removeClass( 'warning-tip' );\n\t\t\tthis.hideErrorTip();\n\t\t\terror_string = '';\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValidationField = function() {\n\t\t\treturn validation_field;\n\t\t};\n\n\t\tthis.getDefaultFormatValue = function() {\n\t\t\tvar val = time_picker_input.val();\n\n\t\t\tval = Global.strToDate( val ).format( 'YYYY-MM-DD' );\n\n\t\t\treturn val;\n\t\t};\n\n\t\tthis.setPlaceHolder = function( val ) {\n\t\t\ttime_picker_input.attr( 'placeholder', val );\n\t\t};\n\n\t\tthis.getValue = function() {\n\t\t\treturn time_picker_input.val();\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\t\t\t//Error: Uncaught TypeError: Cannot read property 'val' of undefined in /interface/html5/global/widgets/datepicker/TTimePicker.js?v=8.0.0-20141230-130626 line 144\n\t\t\tif ( !time_picker_input ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( !val ) {\n\t\t\t\tval = '';\n\t\t\t}\n\t\t\ttime_picker_input.val( val );\n\t\t\tthis.autoResize();\n\t\t};\n\n\t\tthis.setDefaultWidgetValue = function() {\n\t\t\tif ( $( this ).attr( 'widget-value' ) ) {\n\t\t\t\tthis.setValue( $( this ).attr( 'widget-value' ) );\n\t\t\t}\n\t\t};\n\n\t\tthis.autoResize = function() {\n\t\t\tvar content_width, example_width;\n\t\t\tif ( !is_static_width ) {\n\t\t\t\texample_width = Global.calculateTextWidth( LocalCacheData.getLoginUserPreference().time_format_display );\n\t\t\t\tcontent_width = Global.calculateTextWidth( time_picker_input.val(), {\n\t\t\t\t\tmin_width: example_width,\n\t\t\t\t\tmax_width: ( example_width + 100 ),\n\t\t\t\t\tpadding: 28\n\t\t\t\t} );\n\t\t\t\t$this.width( content_width + 'px' );\n\t\t\t}\n\t\t};\n\n\t\tthis.each( function() {\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\t\t\tvar time_format = 'h:mm TT';\n\t\t\tif ( LocalCacheData.getLoginUserPreference() ) {\n\t\t\t\ttime_format = LocalCacheData.getLoginUserPreference().time_format_1;\n\t\t\t}\n\t\t\tfield = o.field;\n\t\t\tif ( o.validation_field ) {\n\t\t\t\tvalidation_field = o.validation_field;\n\t\t\t}\n\t\t\ticon = $( this ).find( '.t-time-picker-icon' );\n\t\t\ttime_picker_input = $( this ).find( '.t-time-picker' );\n\t\t\ticon.attr( 'src', Global.getRealImagePath( 'images/time.png' ) );\n\t\t\ticon.bind( 'mouseup', function() {\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif ( !is_open ) {\n\t\t\t\t\ttime_picker_input.timepicker( 'show' );\n\t\t\t\t\tis_open = true;\n\t\t\t\t} else {\n\t\t\t\t\tis_open = false;\n\t\t\t\t\tif ( focus_out_timer ) {\n\t\t\t\t\t\tclearTimeout( focus_out_timer );\n\t\t\t\t\t\tfocus_out_timer = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tif ( o.stepMinute ) {\n\t\t\t\tstepMinute = o.stepMinute;\n\t\t\t}\n\n\t\t\tvar close_text = $.i18n._( 'Close' );\n\t\t\ttime_picker_input = time_picker_input.timepicker( {\n\t\t\t\tshowMillisec: false,\n\t\t\t\tshowMicrosec: false,\n\t\t\t\tshowTimezone: false,\n\t\t\t\tshowHeader: false,\n\t\t\t\ttimeFormat: time_format,\n\t\t\t\tshowOn: '',\n\t\t\t\tstepMinute: stepMinute,\n\t\t\t\tcloseText: close_text,\n\t\t\t\tshowAnim: '',\n\t\t\t\tbeforeShow: function() {\n\t\t\t\t\tif ( o.beforeShow ) {\n\t\t\t\t\t\to.beforeShow();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonClose: function() {\n\t\t\t\t\tfocus_out_timer = setTimeout( function() {\n\t\t\t\t\t\tis_open = false;\n\t\t\t\t\t\t$this.autoResize();\n\t\t\t\t\t\tif ( o.onClose ) {\n\t\t\t\t\t\t\to.onClose();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 100 );\n\t\t\t\t}\n\t\t\t} );\n\t\t\t$this.setPlaceHolder( LocalCacheData.loginUserPreference.time_format_display );\n\n\t\t\t//hack to stop automatic rounding of typed dates to stepMinute increment\n\t\t\ttime_picker_input.off( 'keyup' ).off( 'keydown' ).off( 'keypress' );\n\n\t\t\ttime_picker_input.off( 'change' ).on( 'change', function( e ) {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\t$this.setCheckBox( true );\n\t\t\t\t}\n\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t$this.autoResize();\n\t\t\t} );\n\t\t\ttime_picker_input.mouseover( function() {\n\t\t\t\tif ( enabled ) {\n\t\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\t\t$this.showErrorTip( 20 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t\ttime_picker_input.mouseout( function() {\n\t\t\t\tif ( !$( $this ).is( ':focus' ) ) {\n\t\t\t\t\t$this.hideErrorTip();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\ttime_picker_input.focusin( function( e ) {\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\tif ( !check_box ) {\n\t\t\t\t\t\tif ( LocalCacheData.current_open_sub_controller &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.edit_view &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.is_viewing ) {\n\t\t\t\t\t\t\terror_string = LocalCacheData.current_open_sub_controller.getViewModeErrorMessage();\n\t\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t\t} else if ( LocalCacheData.current_open_primary_controller &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.edit_view &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.is_viewing ) {\n\t\t\t\t\t\t\terror_string = LocalCacheData.current_open_primary_controller.getViewModeErrorMessage();\n\t\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\t\t$this.showErrorTip( 20 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\ttime_picker_input.focusout( function() {\n\t\t\t\t$this.hideErrorTip();\n\n\t\t\t} );\n\t\t\tif ( o.width > 0 ) {\n\t\t\t\t$this.width( o.width );\n\t\t\t\tis_static_width = true;\n\t\t\t} else {\n\t\t\t\t$this.autoResize();\n\t\t\t\tis_static_width = false;\n\t\t\t}\n\t\t\t$this.setDefaultWidgetValue();\n\t\t} );\n\t\treturn this;\n\t};\n\n\t$.fn.TTimePicker.defaults = {};\n\t$.fn.TTimePicker.html_template = `\n\t<div class=\"t-time-picker-div\">\n\t\t<input class=\"t-time-picker\" type=\"text\"/>\n\t\t<img id=\"tTimePickerIcon\" class=\"t-time-picker-icon\"/>\n\t</div>\n\t`;\n\n} )( jQuery );"],"names":["$","options","opts","$this","field","validation_field","time_picker_input","icon","error_string","error_tip_box","mass_edit_mode","check_box","enabled","is_open","focus_out_timer","is_static_width","stepMinute","val","errStr","show","isWarning","sec","content_width","example_width","o","time_format","close_text","e","jQuery"],"mappings":"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"}