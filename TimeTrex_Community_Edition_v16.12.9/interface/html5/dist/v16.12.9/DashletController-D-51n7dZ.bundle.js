import{_ as f,j as a}from"./vendor-tTApdY0Y.bundle.js";import{e as b,G as l}from"./main_ui-z76rxVqJ.entry.bundle.js";class m extends b{constructor(e={}){f.defaults(e,{data:null,api_dashboard:null,api_user_report:null,user_generic_data_api:null,all_columns:null,grid:null,dashboard_data:null,refresh_timer:null,iframe_data:null,initComplete:!1,iframe:null,homeViewController:null,initTimesheetGridComplete:null,accumulated_total_grid_source_map:null,accmulated_order_map:null}),super(e)}initialize(e){super.initialize(e),this.api_dashboard=TTAPI.APIDashboard,this.user_generic_data_api=TTAPI.APIUserGenericData}refreshIfNecessary(){(this.data&&this.data.data.dashlet_type=="custom_report"||this.data.data.dashlet_type==="news")&&this.iframe_data&&(this.addIframeBack(),this.setIframeData())}initContent(){var e=this;this.setTitle(),this.initComplete=!1,l.isScrolledIntoView(a(e.el))&&t(),l.detectMobileBrowser()==!1&&a("#"+a(this.el).attr("id")).resizable({handles:"all",start:function(i,s){},resize:function(i,s){e.setGridSize()},stop:function(i,s){e.addIframeBack();var o=Math.round(s.element[0].offsetHeight/10)*10,r=Math.round(s.element[0].offsetWidth/a(".dashboard-container").width()*100);s.element[0].style.height=o+"px",s.element[0].style.width=r+"%",e.saveSize(o,r),e.homeViewController.updateLayout(),e.homeViewController.dashboard_container.masonry("reloadItems")}}),this.homeViewController.dashboard_container.parent().scroll(function(){l.isScrolledIntoView(a(e.el))&&!e.initComplete&&t()});function t(){e.data.data.dashlet_type=="custom_list"?(a(e.el).addClass("custom_list"),e.initCustomViewContent()):e.data.data.dashlet_type=="custom_report"?(a(e.el).addClass("custom-report"),e.initReportContent(),a(e.el).bind("mousedown",function(){e.removeIframe()}),a(e.el).bind("mouseup",function(){e.addIframeBack()})):e.data.data.dashlet_type=="request_summary"?(a(e.el).addClass("request-summary"),e.initDefaultDashletContent("request_summary")):e.data.data.dashlet_type=="request_authorize_summary"?(a(e.el).addClass("request-authorize-summary"),e.initDefaultDashletContent("request_authorize_summary")):e.data.data.dashlet_type=="accrual_balance_summary"?(a(e.el).addClass("accrual-balance-summary"),e.initDefaultDashletContent("accrual_balance_summary")):e.data.data.dashlet_type=="exception_summary"?(a(e.el).addClass("exception-summary"),e.initDefaultDashletContent("exception_summary")):e.data.data.dashlet_type=="exception_summary_child"?(a(e.el).addClass("exception-summary-child"),e.initDefaultDashletContent("exception_summary_child")):e.data.data.dashlet_type=="message_summary"?(a(e.el).addClass("message-summary"),e.initDefaultDashletContent("message_summary")):e.data.data.dashlet_type=="user_active_shift_summary"?(a(e.el).addClass("user-active-shift-summary"),e.initDefaultDashletContent("user_active_shift_summary")):e.data.data.dashlet_type=="timesheet_verification_summary"?(a(e.el).addClass("timesheet-verification-summary"),e.initDefaultDashletContent("timesheet_verification_summary")):e.data.data.dashlet_type=="timesheet_verification_summary_child"?(a(e.el).addClass("timesheet-verification_summary-child"),e.initDefaultDashletContent("timesheet_verification_summary_child")):e.data.data.dashlet_type=="timesheet_summary"?(a(e.el).addClass("timesheet-summary"),e.initTimesheetContent("timesheet_summary")):e.data.data.dashlet_type=="schedule_summary"?(a(e.el).addClass("schedule-summary"),e.initDefaultDashletContent("schedule_summary")):e.data.data.dashlet_type=="schedule_summary_child"?(a(e.el).addClass("schedule-summary-child"),e.initDefaultDashletContent("schedule_summary_child")):e.data.data.dashlet_type=="news"&&(a(e.el).addClass("news"),e.initNewsContent(),a(e.el).unbind("mousedown").bind("mousedown",function(){e.removeIframe()}),a(e.el).unbind("mouseup").bind("mouseup",function(){e.addIframeBack()})),e.initComplete=!0}}onViewClick(){var e="",t=!1;if(this.data.data.dashlet_type=="custom_list")e=this.data.data.view_name,e==="Request-Authorization"?e="RequestAuthorization":e==="PayPeriodTimeSheetVerify"?e="TimeSheetAuthorization":e==="UserExpense-Authorization"?e="ExpenseAuthorization":e==="User"?e="Employee":e==="Transaction"?e="InvoiceTransaction":e==="UserWage"&&(e="Wage");else switch(this.data.data.dashlet_type){case"message_summary":e="MessageControl";break;case"exception_summary_child":case"exception_summary":e="Exception";break;case"schedule_summary":case"schedule_summary_child":e="Schedule";break;case"request_summary":e="Request";break;case"timesheet_verification_summary":t=!0,e="TimesheetSummaryReport";break;case"timesheet_verification_summary_child":t=!0,e="TimesheetSummaryReport";break;case"timesheet_summary":e="TimeSheet";break;case"user_active_shift_summary":t=!0,e="ActiveShiftReport";break;case"request_authorize_summary":e="RequestAuthorization";break;case"accrual_balance_summary":e="AccrualBalance";break}t?IndexViewController.openReport(this.homeViewController,e):IndexViewController.goToView(e)}onCellFormat(e,t,i){e=l.decodeCellValue(e);var s=t.colModel;t.rowid;var o=a("<div class='punch-content-div'></div>"),r;if(t.pos===0)return i.type===m.TOTAL_ROW?(r=a("<span class='total' style='font-size: 11px'></span>"),l.isSet(e)?r.text(e):r.text(""),r.get(0).outerHTML):i.type===m.REGULAR_ROW?(r=a("<span class='top-line-span' style='font-size: 11px'></span>"),l.isSet(e)?r.text(e):r.text(""),r.get(0).outerHTML):e;var n,d;return i.type===m.TOTAL_ROW?(d=i[s.name+"_data"],n=a("<span class='total'></span>"),l.isSet(e)?(d&&(d.hasOwnProperty("override")&&d.override===!0&&n.addClass("absence-override"),d.hasOwnProperty("note")&&d.note&&(e="*"+e)),n.text(e)):n.text(""),o.prepend(n)):i.type===m.REGULAR_ROW?(o.addClass("top-line"),d=i[s.name+"_data"],n=a("<span ></span>"),l.isSet(e)?(d&&(d.hasOwnProperty("override")&&d.override===!0&&n.addClass("absence-override"),d.hasOwnProperty("note")&&d.note&&(e="*"+e)),n.text(e)):n.text(""),o.prepend(n)):i.type===m.ACCUMULATED_TIME_ROW?(d=i[s.name+"_data"],n=a("<span></span>"),l.isSet(e)?(d&&(d.hasOwnProperty("override")&&d.override===!0&&n.addClass("absence-override"),d.hasOwnProperty("note")&&d.note&&(e="*"+e)),n.text(e)):n.text(""),o.prepend(n)):(n=a("<span class='punch-time'></span>"),l.isSet(e)?n.text(e):n.text(""),o.prepend(n)),o.get(0).outerHTML}initNewsContent(){var e=this;a(this.el).find("#grid").remove(),a(this.el).find(".view-btn").remove(),a(this.el).find(".refresh-btn").unbind("click").bind("click",function(t){a(t.target).addClass("button-rotate"),e.initNewsData()}),this.initNewsData(),this.startRefresh()}initNewsData(){var e=this;this.api_dashboard.getDashletData(this.data.data.dashlet_type,{},{onResult:function(i){var i=i.getResult();e.iframe_data=i,i?(e.removeNoResultCover(),e.setIframeData()):e.showNoResultCover(),a(".button-rotate").removeClass("button-rotate")}})}setIframeData(){if(a(this.el).find("#iframe").length>0){const e=a(this.el).find("#iframe")[0],t=e.contentDocument||e.contentWindow.document;a(t.body).empty();const i=t.createElement("div");for(i.innerHTML=this.iframe_data;i.firstChild;)t.body.appendChild(i.firstChild)}}initTimesheetContent(e){a(this.el).find("#iframe").remove();var t=this;if(this.api=this.getAPIByViewName(e),!l.isSet(this.grid)||!l.isSet(this.grid.grid)){var i=a(this.el).find("#grid");i.attr("id","dashlet_"+this.data.id+"_grid")}a(this.el).find(".refresh-btn").unbind("click").bind("click",function(s){a(s.target).addClass("button-rotate"),t.initDefaultTimesheetData()}),a(this.el).find(".view-btn").unbind("click").bind("click",function(s){t.onViewClick()}),this.initDefaultTimesheetData(),this.startRefresh()}initDefaultTimesheetData(){if(LocalCacheData.getLoginUser()){var e=this;this.accumulated_total_grid_source_map={},this.api.getTimeSheetData(LocalCacheData.getLoginUser().id,new Date().format(),{onResult:function(t){t&&t.isValid()?(e.full_timesheet_data=t.getResult(),e.pay_period_data=e.full_timesheet_data.pay_period_data,e.timesheet_verify_data=e.full_timesheet_data.timesheet_verify_data,e.full_timesheet_data.timesheet_dates?(e.start_date=l.strToDate(e.full_timesheet_data.timesheet_dates.start_display_date),e.end_date=l.strToDate(e.full_timesheet_data.timesheet_dates.end_display_date),!e.initTimesheetGridComplete&&e.start_date&&e.end_date&&(e.buildAccumulatedTotalGrid(),e.initTimesheetGridComplete=!0),e.buildAccumulatedTotalData()):e.showNoResultCover()):e.showNoResultCover(),a(".button-rotate").removeClass("button-rotate")}})}}buildAccmulatedOrderMap(e){if(e)for(var t in e)for(var i in e[t])this.accmulated_order_map[i]=e[t][i].order}buildAccumulatedTotalData(){if(this.grid){this.accmulated_order_map={},this.accumulated_total_grid_source=[];var e=this.full_timesheet_data.accumulated_user_date_total_data,t=this.full_timesheet_data.pay_period_accumulated_user_date_total_data,i=t.accumulated_time,s=t.premium_time,o=t.absence_time_taken;e.total&&this.buildAccmulatedOrderMap(e.total),t&&this.buildAccmulatedOrderMap(t),l.isSet(i)?this.buildSubGridsData(i,"pay_period",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"accumulated_time"):(i={total:{label:"Total Time",total_time:"0"}},this.buildSubGridsData(i,"pay_period",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"accumulated_time")),l.isSet(s)&&this.buildSubGridsData(s,"pay_period",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"premium_time"),l.isSet(o)&&this.buildSubGridsData(o,"pay_period",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"absence_time"),i={total:{label:"Total Time",total_time:"0"}},this.buildSubGridsData(i,"week",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"accumulated_time");for(var r in e)if(r==="total"){var n=e.total;i=n.accumulated_time,s=n.premium_time,o=n.absence_time_taken,l.isSet(i)&&this.buildSubGridsData(i,"week",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"accumulated_time"),l.isSet(s)&&this.buildSubGridsData(s,"week",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"premium_time"),l.isSet(o)&&this.buildSubGridsData(o,"week",this.accumulated_total_grid_source_map,this.accumulated_total_grid_source,"absence_time");continue}this.sortAccumulatedTotalData(),this.grid.setData(this.accumulated_total_grid_source)}}sortAccumulatedTotalData(){var e=["order","punch_info"];this.accumulated_total_grid_source.sort(l.m_sort_by(e))}buildSubGridsData(e,t,i,s,o){var r,n=!1;for(var d in e)if(i[d])r=i[d],r[t]&&d==="total"?(e[d].key=d,r[t]=l.getTimeUnit(e[d].total_time),r[t+"_data"]=e[d],r.parent_key==="accumulated_time"&&e[d].override&&(r.is_override_row=!0)):(e[d].key=d,r[t]=l.getTimeUnit(e[d].total_time),r[t+"_data"]=e[d],r.parent_key==="accumulated_time"&&e[d].override&&(r.is_override_row=!0));else{r={},r.parent_key=o,r.key=d,o==="accumulated_time"?(d==="total"||d==="worked_time"?r.type=m.TOTAL_ROW:n==!1&&d.indexOf("regular_time")===0?(r.type=m.REGULAR_ROW,n=!0):r.type=m.ACCUMULATED_TIME_ROW,e[d].override&&(r.is_override_row=!0)):o==="premium_time"&&(r.type=m.PREMIUM_ROW),this.accmulated_order_map[d]&&(r.order=this.accmulated_order_map[d]),r.punch_info=e[d].label;var u=d.split("_"),h=!1;u.length>1&&u[1]=="0"&&(h=!0),e[d].key=d,r[t]=l.getTimeUnit(e[d].total_time),r[t+"_data"]=e[d],h?s.unshift(r):s.push(r),i[d]=r}}getAccumulatedTotalGridPayperiodHeader(){this.pay_period_header=a.i18n._("No Pay Period");var e=this.timesheet_verify_data.pay_period_id;if(e&&this.pay_period_data)for(var t in this.pay_period_data){var i=this.pay_period_data[t];if(i.id===e){var s=l.strToDate(i.start_date).format(),o=l.strToDate(i.end_date).format();this.pay_period_header=s+" to "+o;break}}}buildAccumulatedTotalGrid(){var e=this,t=[],i;l.isSet(this.grid)||(i="dashlet_"+this.data.id+"_grid");var s={name:"punch_info",index:"punch_info",label:" ",width:200,sortable:!1,title:!1,formatter:this.onCellFormat};t.push(s);var o=this.start_date.format(l.getLoginUserDateFormat()),r=this.end_date.format(l.getLoginUserDateFormat());this.getAccumulatedTotalGridPayperiodHeader();var n={name:"week",index:"week",label:a.i18n._("Week")+"<br>"+o+" to "+r,width:100,sortable:!1,title:!1,formatter:this.onCellFormat},d={name:"pay_period",index:"pay_period",label:a.i18n._("Pay Period")+"<br>"+this.pay_period_header,width:100,sortable:!1,title:!1,formatter:this.onCellFormat};t.push(n),t.push(d);var u={};this.grid?u={shrinkToFit:!1}:u={multiselectPosition:"none",gridComplete:function(){a(this).jqGrid("getGridParam","data").length>0&&e.setGridColumnsWidth()}},this.grid=new TTGrid(i,u,t),e.setGridSize()}initDefaultDashletContent(e){a(this.el).find("#iframe").remove();var t=this;if(this.api=this.getAPIByViewName(e),a(window).off("resize.dashlet_content").on("resize.dashlet_content",function(){t.grid&&t.setGridSize()}),!l.isSet(this.grid)){var i=a(this.el).find("#grid");i.attr("id","dashlet_"+this.data.id+"_grid")}a(this.el).find(".refresh-btn").unbind("click").bind("click",function(s){a(s.target).addClass("button-rotate"),t.initDefaultDashletData()}),a(this.el).find(".view-btn").unbind("click").bind("click",function(s){t.onViewClick()}),this.initDefaultDashletData(),this.startRefresh()}initDefaultDashletData(){var e=this;e.getDefaultDashletData(function(){e.getAllColumns(function(){e.setSelectLayout();var t=l.formatGridData(e.dashboard_data.data,e.data.data.dashlet_type);t=e.processId(t),e.grid&&e.grid.setData(t),a(".button-rotate").removeClass("button-rotate"),!l.isArray(e.dashboard_data.data)||e.dashboard_data.data.length<1?e.showNoResultCover():e.removeNoResultCover(),e.setGridCellBackGround()})})}processId(e){var t=-2;return e=f.map(e,function(i){return i.hasOwnProperty("id")&&(!i.id||i.id==TTUUID.zero_id)&&(i.id=t),t--,i}),e}addIframeBack(){var e=this;e.iframe&&(a(e.el).find(".content").append(e.iframe),e.setIframeData(),e.iframe=null)}removeIframe(){var e=this;e.iframe=a(e.el).find("#iframe"),a(e.el).find("#iframe").remove()}saveSize(e,t){this.data.data.width=t,this.data.data.height=e,this.user_generic_data_api.setUserGenericData(this.data,{onResult:function(i){}})}setGridSize(){!this.grid||!this.grid.grid||!this.grid.grid.is(":visible")||(this.grid.grid.setGridWidth(a(this.el).find(".content").width()),this.grid.grid.setGridHeight(a(this.el).find(".content").height()-28))}initReportContent(){var e=this;a(this.el).find("#grid").remove(),a(this.el).find(".view-btn").remove(),a(this.el).find(".refresh-btn").unbind("click").bind("click",function(t){a(t.target).addClass("button-rotate"),e.initReportData()}),this.api_user_report=TTAPI.APIUserReportData,this.api=this.getAPIByViewName(this.data.data.report),this.initReportData(),this.startRefresh()}cleanWhenUnloadView(){this.refresh_timer&&clearInterval(this.refresh_timer)}initReportData(){var e=this;if(e.data.data.template!=="saved_report"){var t=this.getAPIByViewName(this.data.data.report);t.getTemplate(e.data.data.template,{onResult:function(i){var s=i.getResult();s.other={page_orientation:"P",font_size:0,auto_refresh:!1,disable_grand_total:!1,maximum_page_limit:100,show_duplicate_values:!1,is_embedded:!0},e.api["get"+e.api.key_name](s,"html",{onResult:function(o){var r=o.getResult();e.iframe_data=r,r&&e.setIframeData(),a(".button-rotate").removeClass("button-rotate")}})}})}else e.api_user_report.getUserReportData({filter_data:{id:e.data.data.saved_report_id}},{onResult:function(i){var s=i.getResult();s&&s.length==1&&(s[0].data.config.other?s[0].data.config.other.is_embedded=!0:s[0].data.config.other={is_embedded:!0},e.api["get"+e.api.key_name](s[0].data.config,"html",{onResult:function(o){var r=o.getResult();e.iframe_data=r,r&&e.setIframeData(),a(".button-rotate").removeClass("button-rotate")}}))}})}startRefresh(){var e=this,t=this.data.data.auto_refresh;t>0&&(this.refresh_timer=setInterval(function(){l.idle_time&&l.idle_time>1||(LocalCacheData.current_open_primary_controller.viewId!=="Home"&&clearInterval(e.refresh_timer),e.data.data.dashlet_type=="custom_list"?e.initCustomViewData():e.data.data.dashlet_type=="custom_report"?e.initReportData():e.data.data.dashlet_type=="exception_summary"||e.data.data.dashlet_type=="request_summary"||e.data.data.dashlet_type=="message_summary"||e.data.data.dashlet_type=="exception_summary_child"||e.data.data.dashlet_type=="request_authorize_summary"||e.data.data.dashlet_type=="accrual_balance_summary"||e.data.data.dashlet_type=="user_active_shift_summary"||e.data.data.dashlet_type=="timesheet_verification_summary"||e.data.data.dashlet_type=="timesheet_verification_summary_child"||e.data.data.dashlet_type=="schedule_summary"||e.data.data.dashlet_type=="schedule_summary_child"?e.initDefaultDashletData():e.data.data.dashlet_type=="timesheet_summary"?e.initDefaultTimesheetData():e.data.data.dashlet_type=="news"&&e.initNewsData())},t*1e3))}initCustomViewContent(){a(this.el).find("#iframe").remove();var e=this;if(this.api=this.getAPIByViewName(this.data.data.view_name),a(window).off("resize.dashlet_custom_content").on("resize.dashlet_custom_content",function(){e.grid&&e.setGridSize()}),!l.isSet(this.grid)){var t=a(this.el).find("#grid");t.attr("id","dashlet_"+this.data.id+"_grid")}a(this.el).find(".refresh-btn").unbind("click").bind("click",function(i){a(i.target).addClass("button-rotate"),e.initCustomViewData()}),a(this.el).find(".view-btn").unbind("click").bind("click",function(i){e.onViewClick()}),this.initCustomViewData(),this.startRefresh()}setGridCellBackGround(){var e=this.grid.getData(),t,i,s;if(this.data.data.dashlet_type==="exception_summary"||this.data.data.dashlet_type==="exception_summary_child"){if(!e)return;t=e.length;for(var i=0;i<t;i++){if(s=e[i],s.exception_background_color){var o=a(this.el).find("tr[id='"+s.id+"']").find('td[aria-describedby="dashlet_'+this.data.id+'_grid_severity"]');o.css("background-color",s.exception_background_color),o.css("font-weight","bold")}if(s.exception_color){var r=a(this.el).find("tr[id='"+s.id+"']").find('td[aria-describedby="dashlet_'+this.data.id+'_grid_exception_policy_type_id"]');r.css("color",s.exception_color),r.css("font-weight","bold")}}}else if(this.data.data.dashlet_type==="message_summary"){if(!e)return;t=e.length;for(var i=0;i<t;i++)s=e[i],s.status_id==10&&a(this.el).find("tr[id='"+s.id+"'] td").css("font-weight","bold")}else if(this.data.data.dashlet_type==="request_summary"){if(!e)return;t=e.length;for(var i=0;i<t;i++)s=e[i],s.status_id==30&&a(this.el).find("tr[id='"+s.id+"']").addClass("bolder-request")}else if(this.data.data.dashlet_type==="user_active_shift_summary"){if(!e)return;t=e.length;for(var i=0;i<t;i++)s=e[i],s._status_id==10?a(this.el).find("tr[id='"+s.id+"']").addClass("light-green"):s.status==="Out"&&a(this.el).find("tr[id='"+s.id+"']").addClass("light-red")}else if(this.data.data.dashlet_type==="schedule_summary"||this.data.data.dashlet_type==="schedule_summary_child"){if(!e)return;t=e.length;for(var i=0;i<t;i++)s=e[i],s.status_id==20&&a(this.el).find("tr[id='"+s.id+"']").addClass("red-absence")}}startCustomViewAutoRefresh(){var e=this,t=this.data.data.auto_refresh;t>0&&(this.refresh_timer=setInterval(function(){LocalCacheData.current_open_primary_controller.viewId!=="Home"&&clearInterval(e.refresh_timer),e.initCustomViewData()},t*1e3))}initCustomViewData(){var e=this;e.getCustomListDashboardData(function(){e.getAllColumns(function(){e.setSelectLayout(),e.grid.setData(l.formatGridData(e.dashboard_data.data)),a(".button-rotate").removeClass("button-rotate"),l.isArray(e.dashboard_data.data)?e.removeNoResultCover():e.showNoResultCover(),TTPromise.wait(null,null,function(){e.setGridCellBackGround()})})})}getCustomListDashboardData(e){var t=this;this.data.data.rows_per_page||(this.data.data.rows_per_page=0),this.api_dashboard.getDashletData(this.data.data.dashlet_type,{class:this.data.data.view_name,user_generic_data_id:this.data.data.layout_id.toString(),rows_per_page:this.data.data.rows_per_page.toString()},{onResult:function(i){var s=i.getResult();t.dashboard_data=s,e()}})}getDefaultDashletData(e){var t=this;this.data.data.rows_per_page||(this.data.data.rows_per_page=0),this.api_dashboard.getDashletData(this.data.data.dashlet_type,{rows_per_page:this.data.data.rows_per_page.toString()},{onResult:function(i){var s=i.getResult();t.dashboard_data=s,e()}})}buildDisplayColumns(e){for(var t=this.all_columns.length,i=e?e.length:0,s=[],o=0;o<i;o++)for(var r=0;r<t;r++)e[o]===this.all_columns[r].value&&s.push(this.all_columns[r]);return s}onGridDblClickRow(){this.onViewClick()}setSelectLayout(){var e=this,t;l.isSet(this.grid)||(t="dashlet_"+this.data.id+"_grid",a("#"+t).length>0&&a("#"+t).jqGrid("GridUnload"));for(var i=this.buildDisplayColumns(this.dashboard_data.display_columns),s=[],o=i.length,r=0,n=r;n<o;n++){var d=i[n],u={name:d.value,index:d.value,label:d.label,width:100,sortable:!1,title:!1};s.push(u)}if(!this.grid){var h={multiselectPosition:"none",onSelectRow:a.proxy(this.onGridSelectRow,this),ondblClickRow:function(){e.onGridDblClickRow()},gridComplete:function(){a(this).jqGrid("getGridParam","data").length>0&&e.setGridColumnsWidth()}};this.grid=new TTGrid(t,h,s)}e.setGridSize()}showNoResultCover(){if(this.removeNoResultCover(),this.no_result_box=l.loadWidgetByName(WidgetNamesDic.NO_RESULT_BOX),this.no_result_box){this.no_result_box.NoResultBox({related_view_controller:this,is_new:!1,message:this.getNoResultMessage()}),this.no_result_box.attr("id","dashlet_"+this.data.id+"_no_result_box"),a("#dashlet_"+this.data.id+"_no_result_box").remove();var e=a(this.el).find(".content");e.append(this.no_result_box)}}getNoResultMessage(){var e=a.i18n._("No Results Found");switch(this.data.data.dashlet_type){case"schedule_summary":e=a.i18n._("Perhaps if you ask nicely, your supervisor will add a schedule for you?");break;case"exception_summary":e=a.i18n._("No exceptions to correct, great job!");break;case"message_summary":e=a.i18n._("All messages are read, nicely done!");break;case"request_summary":e=a.i18n._("Send a request to your supervisor by clicking Profile -> Requests.");break;case"accrual_balance_summary":e=a.i18n._("No accrual balances at this time.");break;case"timesheet_summary":e=a.i18n._("Timesheet not available.");break;case"timesheet_verification_summary":case"timesheet_verification_summary_child":e=a.i18n._("No timesheets to verify yet.");break;case"schedule_summary_child":e=a.i18n._("Schedules can be added by clicking Schedule -> Schedules.");break;case"exception_summary_child":e=a.i18n._("All exceptions are corrected... You can relax now!");break;case"user_active_shift_summary":e=a.i18n._("No active shifts at this moment.");break;case"request_authorize_summary":e=a.i18n._("All requests are authorized, excellent work!");break;case"news":e=a.i18n._("Slow news day, nothing to see here yet...");break}return e}removeNoResultCover(){this.no_result_box&&this.no_result_box.length>0&&this.no_result_box.remove(),this.no_result_box=null}getAllColumns(e){var t=this;this.api&&this.api.getOptions("columns",{onResult:function(i){var s=i.getResult();t.all_columns=l.buildColumnArray(s),e&&e()}})}getDefaultDisplayColumns(e){var t=this;this.api.getOptions("default_display_columns",{onResult:function(i){var s=i.getResult();t.default_display_columns=s,e&&e()}})}setTitle(){a(this.el).find(".title").text(this.data.name)}getAPIByViewName(e){var t=null;switch(e.toLowerCase()){case"message_summary":t=TTAPI.APIMessageControl;break;case"schedule_summary":case"schedule_summary_child":case"schedule":t=TTAPI.APISchedule;break;case"exception":case"exception_summary":case"exception_summary_child":t=TTAPI.APIException;break;case"invoice":t=TTAPI.APIInvoice;break;case"user":t=TTAPI.APIUser;break;case"request_summary":case"request":case"request-authorization":case"request_authorize_summary":t=TTAPI.APIRequest;break;case"accrual_balance_summary":t=TTAPI.APIAccrualBalance;break;case"timesheet_verification_summary":case"timesheet_verification_summary_child":t=TTAPI.APITimesheetSummaryReport;break;case"timesheet_summary":t=TTAPI.APITimeSheet;break;case"user_active_shift_summary":t=TTAPI.APIActiveShiftReport;break;case"payperiodtimesheetverify":t=TTAPI.APIPayPeriodTimeSheetVerify;break;case"userexpense":case"userexpense-authorization":t=TTAPI.APIUserExpense;break;case"timesheetsummaryreport":t=TTAPI.APITimesheetSummaryReport;break;case"timesheetdetailreport":t=TTAPI.APITimesheetDetailReport;break;case"accrualbalance":t=TTAPI.APIAccrualBalance;break;case"accrual":t=TTAPI.APIAccrual;break;case"recurringschedulecontrol":t=TTAPI.APIRecurringScheduleControl;break;case"recurringscheduletemplatecontrol":t=TTAPI.APIRecurringScheduleTemplateControl;break;case"job":t=TTAPI.APIJob;break;case"jobitem":t=TTAPI.APIJobItem;break;case"usercontact":t=TTAPI.APIUserContact;break;case"userwage":t=TTAPI.APIUserWage;break;case"paystub":t=TTAPI.APIPayStub;break;case"payperiod":t=TTAPI.APIPayPeriod;break;case"paystubamendment":t=TTAPI.APIPayStubAmendment;break;case"client":t=TTAPI.APIClient;break;case"clientcontact":t=TTAPI.APIClientContact;break;case"transaction":t=TTAPI.APITransaction;break;case"userreviewcontrol":t=TTAPI.APIUserReviewControl;break;case"jobvacancy":t=TTAPI.APIJobVacancy;break;case"jobapplicant":t=TTAPI.APIJobApplicant;break;case"jobapplication":t=TTAPI.APIJobApplication;break;case"accrualbalancesummaryreport":t=TTAPI.APIAccrualBalanceSummaryReport;break;case"usersummaryreport":t=TTAPI.APIUserSummaryReport;break;case"activeshiftreport":t=TTAPI.APIActiveShiftReport;break;case"audittrailreport":t=TTAPI.APIAuditTrailReport;break;case"schedulesummaryreport":t=TTAPI.APIScheduleSummaryReport;break;case"punchsummaryreport":t=TTAPI.APIPunchSummaryReport;break;case"exceptionreport":t=TTAPI.APIExceptionReport;break;case"paystubsummaryreport":t=TTAPI.APIPayStubSummaryReport;break;case"userexpensereport":t=TTAPI.APIUserExpenseReport;break;case"jobsummaryreport":t=TTAPI.APIJobSummaryReport;break;case"jobdetailreport":t=TTAPI.APIJobDetailReport;break;case"jobinformationreport":t=TTAPI.APIJobInformationReport;break;case"jobiteminformationreport":t=TTAPI.APIJobItemInformationReport;break;case"invoicetransactionsummaryreport":t=TTAPI.APIInvoiceTransactionSummaryReport;break;case"userqualificationreport":t=TTAPI.APIUserQualificationReport;break;case"kpireport":t=TTAPI.APIKPIReport;break;case"userrecruitmentsummaryreport":t=TTAPI.APIUserRecruitmentSummaryReport;break;case"userrecruitmentdetailreport":t=TTAPI.APIUserRecruitmentDetailReport;break}return t}setGridColumnsWidth(){var e=this.grid.getGridParam("colModel"),t=this.grid.getGridParam("data");if(this.grid_total_width=0,!!e){for(var i=0;i<e.length;i++){for(var s=e[i],o=s.name,r="",n=0;n<t.length;n++){var d=t[n];if(!d.hasOwnProperty(o))break;var u=d[o];u||(u=""),r?u&&u.toString().length>r.length&&(r=u.toString()):r=u.toString()}if(r){var h=a('<span id="width_test"></span>');h.css("font-size","11"),h.css("font-weight","normal"),a("body").append(h),h.text(r);var c=h.width();h.text(s.label);var _=h.width();_>c&&(c=_+20),this.grid_total_width+=c+5,this.grid.grid.setColProp(o,{widthOrg:c}),h.remove()}}var p=this.grid.getGridParam("width");this.grid.setGridWidth(p)}}}m.TOTAL_ROW=4;m.REGULAR_ROW=5;m.ABSENCE_ROW=6;m.ACCUMULATED_TIME_ROW=7;m.PREMIUM_ROW=8;export{m as DashletController};
//# sourceMappingURL=DashletController-D-51n7dZ.bundle.js.map
