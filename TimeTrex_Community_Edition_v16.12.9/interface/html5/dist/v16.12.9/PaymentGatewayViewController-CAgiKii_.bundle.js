import{_ as n,j as t}from"./vendor-tTApdY0Y.bundle.js";class m extends BaseViewController{constructor(a={}){n.defaults(a,{el:"#payment_gateway_view_container",status_array:null}),super(a)}init(a){this.edit_view_tpl="PaymentGatewayEditView.html",this.permission_id="payment_gateway",this.viewId="PaymentGateway",this.script_name="PaymentGatewayView",this.table_name_key="payment_gateway",this.context_menu_name=t.i18n._("Payment Gateway"),this.navigation_label=t.i18n._("Payment Gateway"),this.api=TTAPI.APIPaymentGateway,this.render(),this.buildContextMenu(),this.initData()}initOptions(a){var o=[{option_name:"type",field_name:null,api:null},{option_name:"status",field_name:null,api:null},{option_name:"credit_card_type",field_name:null,api:null},{option_name:"bank_account_type",field_name:null,api:null},{option_name:"driver",field_name:null,api:null}];this.initDropDownOptions(o,function(l){a&&a(l)})}buildEditViewUI(){super.buildEditViewUI();var a=this,o={tab_payment_gateway:{label:t.i18n._("Payment Gateway")},tab_audit:!0};this.setTabModel(o),this.navigation.AComboBox({api_class:TTAPI.APIPaymentGateway,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_payment_gateway",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var l=this.edit_view_tab.find("#tab_payment_gateway"),i=l.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(i);var e=Global.loadWidgetByName(FormItemType.COMBO_BOX);e.TComboBox({field:"status_id",set_empty:!1}),e.setSourceData(a.status_array),this.addEditFieldToColumn(t.i18n._("Status"),e,i,""),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn(t.i18n._("Name"),e,i),e=Global.loadWidgetByName(FormItemType.SEPARATED_BOX),e.SeparatedBox({label:t.i18n._("Selection Criteria")}),this.addEditFieldToColumn(null,e,i),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"type_id",set_empty:!1}),e.setSourceData(a.type_array),this.addEditFieldToColumn(t.i18n._("Type"),e,i,""),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e=e.AComboBox({field:"credit_card_type_id",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"}),e.setSourceData(a.credit_card_type_array),this.addEditFieldToColumn(t.i18n._("Credit Card Type"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e=e.AComboBox({field:"bank_account_type_id",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"}),e.setSourceData(a.bank_account_type_array),this.addEditFieldToColumn(t.i18n._("Bank Account Type"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APICurrency,allow_multiple_selection:!0,layout_name:"global_currency",show_search_inputs:!0,set_empty:!0,field:"currency_id"}),this.addEditFieldToColumn(t.i18n._("Currency"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"priority",width:40}),this.addEditFieldToColumn(t.i18n._("Priority"),e,i),e=Global.loadWidgetByName(FormItemType.SEPARATED_BOX),e.SeparatedBox({label:t.i18n._("Gateway Credentials")}),this.addEditFieldToColumn(null,e,i),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"driver_id"}),e.setSourceData(a.driver_array),this.addEditFieldToColumn(t.i18n._("Driver"),e,i,""),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"customer_id"}),this.addEditFieldToColumn(t.i18n._("Customer ID"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"user_name"}),this.addEditFieldToColumn(t.i18n._("User Name"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"password"}),this.addEditFieldToColumn(t.i18n._("Password"),e,i,"")}onTypeChange(){this.current_edit_record.type_id==30?(this.attachElement("credit_card_type_id"),this.detachElement("bank_account_type_id")):(this.detachElement("credit_card_type_id"),this.attachElement("bank_account_type_id")),this.editFieldResize()}onFormItemChange(a,o){this.setIsChanged(a),this.setMassEditingFieldsWhenFormChange(a);var l=a.getField();this.current_edit_record[l]=a.getValue(),l==="type_id"&&this.onTypeChange(),o||this.validate()}setEditViewDataDone(){super.setEditViewDataDone(),this.onTypeChange()}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:t.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:t.i18n._("Type"),in_column:1,field:"type_id",multiple:!0,basic_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Status"),in_column:1,field:"status_id",multiple:!0,basic_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX})]}}export{m as PaymentGatewayViewController};
//# sourceMappingURL=PaymentGatewayViewController-CAgiKii_.bundle.js.map
