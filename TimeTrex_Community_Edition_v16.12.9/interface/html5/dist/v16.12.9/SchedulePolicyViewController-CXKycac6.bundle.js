import{_ as d,j as i}from"./vendor-tTApdY0Y.bundle.js";class c extends BaseViewController{constructor(l={}){d.defaults(l,{el:"#schedule_policy_view_container",over_time_policy_api:null}),super(l)}init(l){this.edit_view_tpl="SchedulePolicyEditView.html",this.permission_id="schedule_policy",this.viewId="SchedulePolicy",this.script_name="SchedulePolicyView",this.table_name_key="schedule_policy",this.context_menu_name=i.i18n._("Schedule Policy"),this.navigation_label=i.i18n._("Schedule Policy"),this.api=TTAPI.APISchedulePolicy,this.over_time_policy_api=TTAPI.APIOverTimePolicy,this.render(),this.buildContextMenu(),this.initData()}buildEditViewUI(){super.buildEditViewUI();var l={tab_schedule_policy:{label:i.i18n._("Schedule Policy")},tab_audit:!0};this.setTabModel(l),this.navigation.AComboBox({api_class:TTAPI.APISchedulePolicy,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_schedule",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var s=this.edit_view_tab.find("#tab_schedule_policy"),t=s.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(t);var e=Global.loadWidgetByName(FormItemType.TEXT_INPUT);e.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn(i.i18n._("Name"),e,t,""),e.parent().width("45%"),e=Global.loadWidgetByName(FormItemType.TEXT_AREA),e.TTextArea({field:"description",width:"100%"}),this.addEditFieldToColumn(i.i18n._("Description"),e,t,"",null,null,!0),e.parent().width("45%"),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIMealPolicy,allow_multiple_selection:!0,layout_name:"global_meal",show_search_inputs:!0,set_any:!0,field:"meal_policy",custom_first_label:i.i18n._("-- No Meal --"),addition_source_function:this.onMealOrBreakSourceCreate,added_items:[{value:TTUUID.zero_id,label:i.i18n._("-- Defined by Policy Group --")}]}),this.addEditFieldToColumn(i.i18n._("Meal Policy"),e,t),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIBreakPolicy,allow_multiple_selection:!0,layout_name:"global_break",show_search_inputs:!0,set_any:!0,field:"break_policy",custom_first_label:"-- "+i.i18n._("No Break")+" --",addition_source_function:this.onMealOrBreakSourceCreate,added_items:[{value:TTUUID.zero_id,label:"-- "+i.i18n._("Defined by Policy Group")+" --"}]}),this.addEditFieldToColumn(i.i18n._("Break Policy"),e,t);var a=i("<div class='v-box'></div>");e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIRegularTimePolicy,allow_multiple_selection:!0,layout_name:"global_regular_time",show_search_inputs:!0,set_empty:!0,field:"include_regular_time_policy"});var o=this.putInputToInsideFormItem(e,i.i18n._("Include"));a.append(o),a.append("<div class='clear-both-div'></div>");var _=Global.loadWidgetByName(FormItemType.AWESOME_BOX);_.AComboBox({api_class:TTAPI.APIRegularTimePolicy,allow_multiple_selection:!0,layout_name:"global_regular_time",show_search_inputs:!0,set_empty:!0,field:"exclude_regular_time_policy"}),o=this.putInputToInsideFormItem(_,i.i18n._("Exclude")),a.append(o),this.addEditFieldToColumn(i.i18n._("Regular Time Policy"),[e,_],t,"",a,!1,!0),a=i("<div class='v-box'></div>");var r={};r.filter_data={},r.filter_data.type_id=[10,40,50,60,70,80,90,100,180,200],e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIOverTimePolicy,allow_multiple_selection:!0,layout_name:"global_over_time",show_search_inputs:!0,set_empty:!0,field:"include_over_time_policy"}),e.setDefaultArgs(r),o=this.putInputToInsideFormItem(e,i.i18n._("Include")),a.append(o),a.append("<div class='clear-both-div'></div>"),_=Global.loadWidgetByName(FormItemType.AWESOME_BOX),_.AComboBox({api_class:TTAPI.APIOverTimePolicy,allow_multiple_selection:!0,layout_name:"global_over_time",show_search_inputs:!0,set_empty:!0,field:"exclude_over_time_policy"}),_.setDefaultArgs(r),o=this.putInputToInsideFormItem(_,i.i18n._("Exclude")),a.append(o),this.addEditFieldToColumn(i.i18n._("Overtime Policy"),[e,_],t,"",a,!1,!0),a=i("<div class='v-box'></div>"),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIPremiumPolicy,allow_multiple_selection:!0,layout_name:"global_premium",show_search_inputs:!0,set_empty:!0,field:"include_premium_policy"}),o=this.putInputToInsideFormItem(e,i.i18n._("Include")),a.append(o),a.append("<div class='clear-both-div'></div>"),_=Global.loadWidgetByName(FormItemType.AWESOME_BOX),_.AComboBox({api_class:TTAPI.APIPremiumPolicy,allow_multiple_selection:!0,layout_name:"global_premium",show_search_inputs:!0,set_empty:!0,field:"exclude_premium_policy"}),o=this.putInputToInsideFormItem(_,i.i18n._("Exclude")),a.append(o),this.addEditFieldToColumn(i.i18n._("Premium Policy"),[e,_],t,"",a,!1,!0),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIAbsencePolicy,allow_multiple_selection:!1,layout_name:"global_absences",show_search_inputs:!0,set_empty:!0,field:"full_shift_absence_policy_id"}),this.addEditFieldToColumn(i.i18n._("Full Shift Undertime Absence Policy"),e,t),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIAbsencePolicy,allow_multiple_selection:!1,layout_name:"global_absences",show_search_inputs:!0,set_empty:!0,field:"partial_shift_absence_policy_id"}),this.addEditFieldToColumn(i.i18n._("Partial Shift Undertime Absence Policy"),e,t),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"start_stop_window",mode:"time_unit",need_parser_sec:!0}),this.addEditFieldToColumn(i.i18n._("Start / Stop Window"),e,t,"",null)}onMealOrBreakSourceCreate(l,s){var t=l.getDisplayColumns(),e={};return i.each(t,function(a,o){return e.id=TTUUID.zero_id,e[o.name]=i.i18n._("-- Defined by Policy Group --"),!1}),s.unshift(e),s}setCurrentEditRecordData(){for(var l in this.current_edit_record)if(this.current_edit_record.hasOwnProperty(l)){var s=this.edit_view_ui_dic[l];if(Global.isSet(s))switch(l){case"country":this.setCountryValue(s,l);break;default:s.setValue(this.current_edit_record[l]);break}}this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}onFormItemChange(l,s){this.setIsChanged(l),this.setMassEditingFieldsWhenFormChange(l);var t=l.getField(),e=l.getValue();this.current_edit_record[t]=e,s||this.validate()}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:i.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:i.i18n._("Full Shift Absence Policy"),in_column:1,field:"full_shift_absence_policy_id",layout_name:"global_absences",api_class:TTAPI.APIAbsencePolicy,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:i.i18n._("Partial Shift Absence Policy"),in_column:1,field:"partial_shift_absence_policy_id",layout_name:"global_absences",api_class:TTAPI.APIAbsencePolicy,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:i.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:i.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX})]}}export{c as SchedulePolicyViewController};
//# sourceMappingURL=SchedulePolicyViewController-CXKycac6.bundle.js.map
