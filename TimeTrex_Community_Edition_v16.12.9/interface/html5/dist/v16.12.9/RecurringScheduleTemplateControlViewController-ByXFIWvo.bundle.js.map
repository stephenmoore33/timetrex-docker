{"version":3,"file":"RecurringScheduleTemplateControlViewController-ByXFIWvo.bundle.js","sources":["../../views/attendance/recurring_schedule_template_control/RecurringScheduleTemplateControlViewController.js"],"sourcesContent":["export class RecurringScheduleTemplateControlViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#recurring_schedule_template_control_view_container',\n\n\n\t\t\tsub_document_view_controller: null,\n\n\t\t\tdocument_object_type_id: null,\n\n\t\t\trecurring_schedule_template_api: null,\n\n\t\t\tschedule_api: null,\n\n\t\t\trecurring_schedule_status_array: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'RecurringScheduleTemplateControlEditView.html';\n\t\tthis.permission_id = 'recurring_schedule_template';\n\t\tthis.viewId = 'RecurringScheduleTemplateControl';\n\t\tthis.script_name = 'RecurringScheduleTemplateControlView';\n\t\tthis.table_name_key = 'recurring_schedule_template_control';\n\t\tthis.context_menu_name = $.i18n._( 'Recurring Templates' );\n\t\tthis.navigation_label = $.i18n._( 'Recurring Template' );\n\t\tthis.api = TTAPI.APIRecurringScheduleTemplateControl;\n\t\tthis.schedule_api = TTAPI.APISchedule;\n\t\tthis.recurring_schedule_template_api = TTAPI.APIRecurringScheduleTemplate;\n\n\t\tthis.document_object_type_id = 10;\n\t\tthis.event_bus = new TTEventBus({ view_id: this.viewId });\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tthis.initDropDownOption( 'status', null, this.recurring_schedule_template_api, function( res ) {\n\t\t\tres = res.getResult();\n\t\t\t$this.recurring_schedule_status_array = Global.buildRecordArray( res );\n\t\t} );\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_recurring_template': {\n\t\t\t\t'label': $.i18n._( 'Recurring Template' ),\n\t\t\t\t'html_template': this.getRecurringTemplateTabHtml()\n\t\t\t},\n\t\t\t'tab_attachment': true,\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tvar form_item_input;\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIRecurringScheduleTemplateControl,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_recurring_template_control',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//These width changes can cause crashes when tab is hidden on selenium screenshot unit test mode.\n\t\t//Left menu would not be clickable due to elements overlapping.\n\t\tif ( Global.UNIT_TEST_MODE == false ){\n\t\t\tthis.edit_view_tab.css( 'max-width', 'none' );\n\n\t\t\tif ( Global.getProductEdition() >= 20 ) {\n\t\t\t\tthis.edit_view_tab.css( 'min-width', '1250px' );\n\t\t\t} else if ( Global.getProductEdition() >= 15 ) {\n\t\t\t\tthis.edit_view_tab.css( 'min-width', '1050px' );\n\t\t\t} else {\n\t\t\t\tthis.edit_view_tab.css( 'min-width', '950px' );\n\t\t\t}\n\t\t}\n\n\t\t//Tab 0 start\n\n\t\tvar tab_recurring_template = this.edit_view_tab.find( '#tab_recurring_template' );\n\n\t\tvar tab_recurring_template_column1 = tab_recurring_template.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_recurring_template_column1 );\n\n\t\t//Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Name' ), form_item_input, tab_recurring_template_column1, '' );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Description\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'description', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Description' ), form_item_input, tab_recurring_template_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'created_by_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Created By' ), form_item_input, tab_recurring_template_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//Inside editor\n\n\t\tvar inside_editor_div = tab_recurring_template.find( '.inside-editor-div' );\n\n\t\tvar args = {\n\t\t\tweek: $.i18n._( 'Week' ),\n\t\t\tstatus: $.i18n._( 'Status' ),\n\t\t\tweek_names: 'S&nbsp;&nbsp;M&nbsp;&nbsp;T&nbsp;&nbsp;W&nbsp;&nbsp;T&nbsp&nbsp;F&nbsp;&nbsp;S',\n\t\t\tshift_time: $.i18n._( 'Shift Time' ),\n\t\t\ttotal: $.i18n._( 'Total' ),\n\t\t\tschedule_policy: $.i18n._( 'Schedule Policy' ),\n\t\t\tbranch_department: $.i18n._( 'Branch/Department' ),\n\t\t\tjob_task: $.i18n._( 'Job/Task/Tags' ),\n\t\t\topen_shift_multiplier: $.i18n._( 'Open Shift Multiplier' )\n\t\t};\n\n\t\tthis.editor = Global.loadWidgetByName( FormItemType.INSIDE_EDITOR );\n\n\t\tthis.editor.InsideEditor( {\n\t\t\ttitle: $.i18n._( 'NOTE: To set different In/Out times for each day of the week, add additional weeks all with the same week number.' ),\n\t\t\taddRow: this.insideEditorAddRow,\n\t\t\tremoveRow: this.insideEditorRemoveRow,\n\t\t\tgetValue: this.insideEditorGetValue,\n\t\t\tsetValue: this.insideEditorSetValue,\n\t\t\tparent_controller: this,\n\t\t\tapi: this.recurring_schedule_template_api,\n\t\t\trender: getRender(),\n\t\t\trender_args: args,\n\t\t\trender_inline_html: true,\n\t\t\trow_render: getRowRender()\n\n\t\t} );\n\n\t\tfunction getRender() {\n\t\t\tvar render = ''\n\n\t\t\tif ( Global.getProductEdition() >= 20 ) {\n\t\t\t\trender = `\n\t\t\t\t<table class=\"inside-editor-render\">\n\t\t\t\t\t<tr class=\"title\">\n\t\t\t\t\t\t<td style=\"width: 50px\"><%= week %></td>\n\t\t\t\t\t\t<td style=\"width: 100px\"><%= status %></td>\n\t\t\t\t\t\t<td style=\"width: 153px\"><%= week_names %></td>\n\t\t\t\t\t\t<td style=\"width: 140px\"><%= shift_time %></td>\n\t\t\t\t\t\t<td style=\"width: 45px\"><%= total %></td>\n\t\t\t\t\t\t<td style=\"width: 140px\"><%= schedule_policy %></td>\n\t\t\t\t\t\t<td style=\"width: 230px\"><%= branch_department %></td>\n\t\t\t\t\t\t<td style=\"width: 190px\"><%= job_task %></td>\n\t\t\t\t\t\t<td style=\"width: 100px\"><%= open_shift_multiplier %></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>`;\n\t\t\t} else if ( Global.getProductEdition() >= 15 ) {\n\t\t\t\trender = `\n\t\t\t\t<table class=\"inside-editor-render\">\n\t\t\t\t\t<tr class=\"title\">\n\t\t\t\t\t\t<td style=\"width: 50px\"><%= week %></td>\n\t\t\t\t\t\t<td style=\"width: 100px\"><%= status %></td>\n\t\t\t\t\t\t<td style=\"width: 153px\"><%= week_names %></td>\n\t\t\t\t\t\t<td style=\"width: 140px\"><%= shift_time %></td>\n\t\t\t\t\t\t<td style=\"width: 45px\"><%= total %></td>\n\t\t\t\t\t\t<td style=\"width: 140px\"><%= schedule_policy %></td>\n\t\t\t\t\t\t<td style=\"width: 230px\"><%= branch_department %></td>\n\t\t\t\t\t\t<td style=\"width: 100px\"><%= open_shift_multiplier %></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>`;\n\t\t\t} else {\n\t\t\t\trender = `\n\t\t\t\t<table class=\"inside-editor-render\">\n\t\t\t\t\t<tr class=\"title\">\n\t\t\t\t\t\t<td style=\"width: 50px\"><%= week %></td>\n\t\t\t\t\t\t<td style=\"width: 100px\"><%= status %></td>\n\t\t\t\t\t\t<td style=\"width: 153px\"><%= week_names %></td>\n\t\t\t\t\t\t<td style=\"width: 140px\"><%= shift_time %></td>\n\t\t\t\t\t\t<td style=\"width: 45px\"><%= total %></td>\n\t\t\t\t\t\t<td style=\"width: 140px\"><%= schedule_policy %></td>\n\t\t\t\t\t\t<td style=\"width: 230px\"><%= branch_department %></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>`;\n\t\t\t}\n\t\t\treturn render;\n\t\t}\n\n\t\tfunction getRowRender() {\n\t\t\tvar render = '';\n\n\t\t\tif ( Global.getProductEdition() >= 20 ) {\n\t\t\t\trender = `<tr class=\"inside-editor-row data-row\">\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"week-cell\"></td>\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"cell control-icon\">\n\t\t\t\t\t\t\t\t<button class=\"plus-icon\" onclick=\"\"></button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td class=\"cell control-icon\">\n\t\t\t\t\t\t\t\t<button class=\"minus-icon \" onclick=\"\"></button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>`;\n\t\t\t} else if ( Global.getProductEdition() >= 15 ) {\n\t\t\t\trender = `<tr class=\"inside-editor-row data-row\">\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"week-cell\"></td>\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t\t<td class=\"cell control-icon\">\n\t\t\t\t\t\t\t\t<button class=\"plus-icon\" onclick=\"\"></button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td class=\"cell control-icon\">\n\t\t\t\t\t\t\t\t<button class=\"minus-icon \" onclick=\"\"></button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>`;\n\t\t\t} else {\n\t\t\t\trender = `\n\t\t\t\t\t<tr class=\"inside-editor-row data-row\">\n\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t<td class=\"week-cell\"></td>\n\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t<td class=\"\"></td>\n\t\t\t\t\t\t<td class=\"cell control-icon\">\n\t\t\t\t\t\t\t<button class=\"plus-icon\" onclick=\"\"></button>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"cell control-icon\">\n\t\t\t\t\t\t\t<button class=\"minus-icon \" onclick=\"\"></button>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>`;\n\t\t\t}\n\t\t\treturn render;\n\t\t}\n\n\t\tinside_editor_div.append( this.editor );\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\t\tif ( !this.is_mass_editing ) {\n\t\t\tthis.initInsideEditorData();\n\t\t\tthis.edit_view.find( '.inside-editor-div' ).show();\n\t\t} else {\n\t\t\tthis.edit_view.find( '.inside-editor-div' ).hide();\n\t\t}\n\t}\n\n\tinitInsideEditorData() {\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\targs.filter_data = {};\n\n\t\tif ( ( !this.current_edit_record || !this.current_edit_record.id ) && !this.copied_record_id ) {\n\t\t\t$this.editor.removeAllRows();\n\t\t\t$this.editor.getDefaultData();\n\n\t\t} else {\n\n\t\t\targs.filter_data.recurring_schedule_template_control_id = this.current_edit_record.id ? this.current_edit_record.id : this.copied_record_id;\n\t\t\tthis.copied_record_id = '';\n\t\t\t$this.recurring_schedule_template_api['get' + $this.recurring_schedule_template_api.key_name]( args, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tif ( !$this.edit_view ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar data = res.getResult();\n\t\t\t\t\t$this.editor.setValue( data );\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\t}\n\n\tinsideEditorAddRow( data, index ) {\n\n\t\tvar form_item_input;\n\n\t\tvar $this = this;\n\t\tif ( !data ) {\n\t\t\tthis.getDefaultData( index );\n\t\t} else {\n\t\t\tvar form_item_input;\n\t\t\tvar widgetContainer;\n\n\t\t\tvar row_id = ( data.id && this.parent_controller.current_edit_record.id ) ? data.id : TTUUID.generateUUID();\n\t\t\tvar row = this.getRowRender(); //Get Row render\n\t\t\tvar render = this.getRender(); //get render, should be a table\n\t\t\tvar widgets = {}; //Save each row's widgets\n\n\t\t\t//Build row widgets\n\n\t\t\t// Week\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tform_item_input.TTextInput( { field: 'week', width: 40 } );\n\t\t\tform_item_input.setValue( data.week ? data.week : 1 );\n\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\t\trow.children().eq( 0 ).append( form_item_input );\n\t\t\tform_item_input.attr( 'recurring_schedule_template_id', row_id );\n\t\t\tform_item_input.attr( 'date_stamp', data.date_stamp ); //Needed to prepend start/end times with so they can be parsed properly and calculate Total Time.\n\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t\t// Status\n\t\t\twidgetContainer = $( '<div class=\\'recurring-template-status-div\\'></div>' );\n\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\t\tform_item_input.TComboBox( { field: 'status_id' } );\n\t\t\tform_item_input.setSourceData( this.parent_controller.recurring_schedule_status_array );\n\t\t\tform_item_input.setValue( data.status_id ? data.status_id : 10 );\n\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\n\t\t\tform_item_input.bind( 'formItemChange', function( e, target ) {\n\t\t\t\tif ( target.getValue() == 10 ) {\n\t\t\t\t\twidgets['absence_policy_id'].hide();\n\t\t\t\t} else if ( target.getValue() == 20 ) {\n\t\t\t\t\twidgets['absence_policy_id'].show();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\twidgetContainer.append( form_item_input );\n\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIAbsencePolicy,\n\t\t\t\twidth: 132,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_absences',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_empty: true,\n\t\t\t\tfield: 'absence_policy_id'\n\t\t\t} );\n\n\t\t\tform_item_input.css( 'position', 'absolute' );\n\t\t\tform_item_input.css( 'left', '0' );\n\t\t\tform_item_input.css( 'top', '30px' );\n\t\t\tform_item_input.css( 'z-index', '1' ); //For some reason if this overlaps with the \"checkboxes\", it goes behind that div and makes the down arrow unclickable.\n\t\t\tform_item_input.setValue( data.absence_policy_id ? data.absence_policy_id : '' );\n\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\t\t\twidgetContainer.append( form_item_input );\n\n\t\t\trow.children().eq( 1 ).append( widgetContainer );\n\n\t\t\t// sun mon tue wed thu fri sat\n\t\t\tvar widgetContainer2 = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\t\t// Sun\n\t\t\tvar form_item_sun_checkbox = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\t\tform_item_sun_checkbox.TCheckbox( { field: 'sun' } );\n\t\t\tform_item_sun_checkbox.setValue( data.sun ? data.sun : false );\n\t\t\twidgets[form_item_sun_checkbox.getField()] = form_item_sun_checkbox;\n\t\t\twidgetContainer2.append( form_item_sun_checkbox );\n\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_sun_checkbox );\n\t\t\t// Mon\n\t\t\tvar form_item_mon_checkbox = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\t\tform_item_mon_checkbox.TCheckbox( { field: 'mon' } );\n\t\t\tform_item_mon_checkbox.setValue( data.mon ? data.mon : false );\n\t\t\twidgets[form_item_mon_checkbox.getField()] = form_item_mon_checkbox;\n\t\t\twidgetContainer2.append( form_item_mon_checkbox );\n\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_mon_checkbox );\n\t\t\t// Tue\n\t\t\tvar form_item_tue_checkbox = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\t\tform_item_tue_checkbox.TCheckbox( { field: 'tue' } );\n\t\t\tform_item_tue_checkbox.setValue( data.tue ? data.tue : false );\n\t\t\twidgets[form_item_tue_checkbox.getField()] = form_item_tue_checkbox;\n\t\t\twidgetContainer2.append( form_item_tue_checkbox );\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_tue_checkbox );\n\t\t\t// Wed\n\t\t\tvar form_item_wed_checkbox = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\t\tform_item_wed_checkbox.TCheckbox( { field: 'wed' } );\n\t\t\tform_item_wed_checkbox.setValue( data.wed ? data.wed : false );\n\t\t\twidgets[form_item_wed_checkbox.getField()] = form_item_wed_checkbox;\n\t\t\twidgetContainer2.append( form_item_wed_checkbox );\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_wed_checkbox );\n\t\t\t// Thu\n\t\t\tvar form_item_thu_checkbox = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\t\tform_item_thu_checkbox.TCheckbox( { field: 'thu' } );\n\t\t\tform_item_thu_checkbox.setValue( data.thu ? data.thu : false );\n\t\t\twidgets[form_item_thu_checkbox.getField()] = form_item_thu_checkbox;\n\t\t\twidgetContainer2.append( form_item_thu_checkbox );\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_thu_checkbox );\n\t\t\t// Fri\n\t\t\tvar form_item_fri_checkbox = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\t\tform_item_fri_checkbox.TCheckbox( { field: 'fri' } );\n\t\t\tform_item_fri_checkbox.setValue( data.fri ? data.fri : false );\n\t\t\twidgets[form_item_fri_checkbox.getField()] = form_item_fri_checkbox;\n\t\t\twidgetContainer2.append( form_item_fri_checkbox );\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_fri_checkbox );\n\t\t\t// Sat\n\t\t\tvar form_item_sat_checkbox = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\t\tform_item_sat_checkbox.TCheckbox( { field: 'sat' } );\n\t\t\tform_item_sat_checkbox.setValue( data.sat ? data.sat : false );\n\t\t\twidgets[form_item_sat_checkbox.getField()] = form_item_sat_checkbox;\n\t\t\twidgetContainer2.append( form_item_sat_checkbox );\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_sat_checkbox );\n\n\t\t\trow.children().eq( 2 ).append( widgetContainer2 );\n\n\t\t\t// Shift Time\n\t\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\n\t\t\tvar divContainer1 = $( '<div style=\\'text-align: left; \\'></div>' );\n\n\t\t\tvar label_1 = $( '<span class=\\'widget-right-label recurring-template-widget-right-label\\' style=\\'display: inline-block; width: 28px; vertical-align: middle;\\'> ' + $.i18n._( 'In' ) + ' </span>' );\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.TIME_PICKER );\n\t\t\tform_item_input.TTimePicker( { field: 'start_time' } );\n\t\t\tform_item_input.setValue( data.start_time ? data.start_time : '' );\n\n\t\t\tform_item_input.bind( 'formItemChange', function( e, target ) {\n\n\t\t\t\tvar rows_widgets = $this.rows_widgets_array[target.parent().parent().parent().parent().index() - 1];\n\n\t\t\t\t$this.parent_controller.onRowChanges( rows_widgets );\n\t\t\t} );\n\n\t\t\twidgets[form_item_input.getField() + row_id] = form_item_input;\n\t\t\tthis.parent_controller.edit_view_ui_validation_field_dic[form_item_input.getField() + row_id] = form_item_input;\n\n\t\t\tdivContainer1.append( label_1 );\n\t\t\tdivContainer1.append( form_item_input );\n\n\t\t\twidgetContainer.append( divContainer1 );\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t\tvar divContainer2 = $( '<div style=\\'text-align: left; margin-top: 5px;\\'></div>' );\n\n\t\t\tvar label_2 = $( '<span class=\\'widget-right-label recurring-template-widget-right-label\\' style=\\'display: inline-block; width: 28px; vertical-align: middle;\\' > ' + $.i18n._( 'Out' ) + ' </span>' );\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.TIME_PICKER );\n\t\t\tform_item_input.TTimePicker( { field: 'end_time' } );\n\t\t\tform_item_input.setValue( data.end_time ? data.end_time : '' );\n\n\t\t\tform_item_input.bind( 'formItemChange', function( e, target ) {\n\t\t\t\tvar rows_widgets = $this.rows_widgets_array[target.parent().parent().parent().parent().index() - 1];\n\n\t\t\t\t$this.parent_controller.onRowChanges( rows_widgets );\n\t\t\t} );\n\n\t\t\twidgets[form_item_input.getField() + row_id] = form_item_input;\n\t\t\tthis.parent_controller.edit_view_ui_validation_field_dic[form_item_input.getField() + row_id] = form_item_input;\n\n\t\t\tdivContainer2.append( label_2 );\n\t\t\tdivContainer2.append( form_item_input );\n\n\t\t\twidgetContainer.append( divContainer2 );\n\n\t\t\trow.children().eq( 3 ).append( widgetContainer );\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t\t// Total\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\tform_item_input.TText( { field: 'total_time' } );\n\t\t\tform_item_input.setValue( data.total_time ? Global.getTimeUnit( data.total_time ) : '' ); //\n\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\n\t\t\trow.children().eq( 4 ).append( form_item_input );\n\n\t\t\t// Schedule Policy\n\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APISchedulePolicy,\n\t\t\t\twidth: 80,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_schedule',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_empty: true,\n\t\t\t\tfield: 'schedule_policy_id'\n\t\t\t} );\n\n\t\t\tform_item_input.setValue( data.schedule_policy_id ? data.schedule_policy_id : '' );\n\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\n\t\t\trow.children().eq( 5 ).append( form_item_input );\n\n\t\t\tform_item_input.bind( 'formItemChange', function( e, target ) {\n\t\t\t\tvar rows_widgets = $this.rows_widgets_array[target.parent().parent().index() - 1];\n\n\t\t\t\t$this.parent_controller.onRowChanges( rows_widgets );\n\t\t\t} );\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t\t// Branch / Department\n\n\t\t\twidgetContainer = $( '<div class=\\'widget-h-box recurring-template-widget-h-box\\'></div>' );\n\n\t\t\tdivContainer1 = $( '<div></div>' );\n\n\t\t\tlabel_1 = $( '<span class=\\'widget-right-label\\' style=\\'float: left; height: 24px; line-height: 24px; min-width: 74px;\\'> ' + $.i18n._( 'Branch' ) + ' </span>' );\n\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\twidth: 80,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_any: true,\n\t\t\t\tfield: 'branch_id',\n\t\t\t\tcustom_first_label: Global.default_item\n\t\t\t} );\n\n\t\t\tif ( data.branch_id.toUpperCase() === TTUUID.not_exist_id.toUpperCase() ) {\n\t\t\t\tform_item_input.set_default_value = true;\n\t\t\t} else {\n\t\t\t\tform_item_input.setValue( data.branch_id ? data.branch_id : '' );\n\t\t\t}\n\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\n\t\t\tdivContainer1.append( label_1 );\n\t\t\tdivContainer1.append( form_item_input );\n\n\t\t\twidgetContainer.append( divContainer1 );\n\n\t\t\tdivContainer2 = $( '<div style=\\'margin-top: 5px; float: left\\'></div>' );\n\n\t\t\tlabel_2 = $( '<span class=\\'widget-right-label\\' style=\\'float: left; height: 24px; line-height: 24px; min-width: 74px;\\'> ' + $.i18n._( 'Department' ) + ' </span>' );\n\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\twidth: 80,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_any: true,\n\t\t\t\tfield: 'department_id',\n\t\t\t\tcustom_first_label: Global.default_item\n\t\t\t} );\n\t\t\tform_item_input.setValue( ( data.department_id ) ? data.department_id : '' );\n\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\n\t\t\tdivContainer2.append( label_2 );\n\t\t\tdivContainer2.append( form_item_input );\n\n\t\t\twidgetContainer.append( divContainer2 );\n\n\t\t\trow.children().eq( 6 ).append( widgetContainer );\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t\t// Job/Task/Punch Tag\n\n\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\n\t\t\t\twidgetContainer = $( '<div class=\\'widget-h-box recurring-template-widget-h-box\\'></div>' );\n\n\t\t\t\tdivContainer1 = $( '<div></div>' );\n\n\t\t\t\tlabel_1 = $( '<span class=\\'widget-right-label\\' style=\\'float: left; height: 24px; line-height: 24px; min-width: 32px;\\'> ' + $.i18n._( 'Job' ) + ' </span>' );\n\n\t\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\t\tform_item_input.AComboBox( {\n\t\t\t\t\tapi_class: TTAPI.APIJob,\n\t\t\t\t\twidth: 80,\n\t\t\t\t\tallow_multiple_selection: false,\n\t\t\t\t\tlayout_name: 'global_job',\n\t\t\t\t\tshow_search_inputs: true,\n\t\t\t\t\tset_any: true,\n\t\t\t\t\tfield: 'job_id',\n\t\t\t\t\tcustom_first_label: Global.default_item\n\t\t\t\t} );\n\t\t\t\tform_item_input.setValue( data.job_id ? data.job_id : '' );\n\t\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\n\t\t\t\tdivContainer1.append( label_1 );\n\t\t\t\tdivContainer1.append( form_item_input );\n\n\t\t\t\twidgetContainer.append( divContainer1 );\n\n\t\t\t\tdivContainer2 = $( '<div style=\\'margin-top: 5px; float: left\\'></div>' );\n\n\t\t\t\tlabel_2 = $( '<span class=\\'widget-right-label\\' style=\\'float: left; height: 24px; line-height: 24px; min-width: 32px;\\'> ' + $.i18n._( 'Task' ) + ' </span>' );\n\t\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\t\tform_item_input.AComboBox( {\n\t\t\t\t\tapi_class: TTAPI.APIJobItem,\n\t\t\t\t\twidth: 80,\n\t\t\t\t\tallow_multiple_selection: false,\n\t\t\t\t\tlayout_name: 'global_job_item',\n\t\t\t\t\tshow_search_inputs: true,\n\t\t\t\t\tset_any: true,\n\t\t\t\t\tfield: 'job_item_id',\n\t\t\t\t\tcustom_first_label: Global.default_item\n\t\t\t\t} );\n\t\t\t\tform_item_input.setValue( data.job_item_id ? data.job_item_id : '' );\n\t\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\n\t\t\t\tdivContainer2.append( label_2 );\n\t\t\t\tdivContainer2.append( form_item_input );\n\n\t\t\t\twidgetContainer.append( divContainer2 );\n\n\t\t\t\tvar divContainer3 = $( '<div style=\\'margin-top: 5px; float: left\\'></div>' );\n\n\t\t\t\tvar label_3 = $( '<span class=\\'widget-right-label\\' style=\\'float: left; height: 24px; line-height: 24px; min-width: 32px;\\'> ' + $.i18n._( 'Tags' ) + ' </span>' );\n\t\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\t\tform_item_input.AComboBox( {\n\t\t\t\t\tapi_class: TTAPI.APIPunchTag,\n\t\t\t\t\twidth: 80,\n\t\t\t\t\tallow_multiple_selection: true,\n\t\t\t\t\tlayout_name: 'global_punch_tag',\n\t\t\t\t\tshow_search_inputs: true,\n\t\t\t\t\tset_any: true,\n\t\t\t\t\tsetRealValueCallBack: ( ( punch_tags ) => {\n\t\t\t\t\t\tif ( punch_tags ) {\n\t\t\t\t\t\t\tthis.parent_controller.setPunchTagQuickSearchManualIds( punch_tags );\n\t\t\t\t\t\t}\n\t\t\t\t\t} ),\n\t\t\t\t\tfield: 'punch_tag_id',\n\t\t\t\t\tcustom_first_label: Global.default_item\n\t\t\t\t} );\n\t\t\t\tform_item_input.setValue( data.punch_tag_id ? data.punch_tag_id : '' );\n\t\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\n\t\t\t\tdivContainer3.append( label_3 );\n\t\t\t\tdivContainer3.append( form_item_input );\n\n\t\t\t\twidgetContainer.append( divContainer3 );\n\n\t\t\t\trow.children().eq( 7 ).append( widgetContainer );\n\t\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t\t}\n\n\t\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\t\t// Open Shift Multiplier\n\t\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\t\tform_item_input.TTextInput( { field: 'open_shift_multiplier', width: 20 } );\n\t\t\t\tform_item_input.setValue( data.open_shift_multiplier ? data.open_shift_multiplier : 1 );\n\t\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\n\t\t\t\tif ( Global.getProductEdition() <= 15 ) {\n\t\t\t\t\trow.children().eq( 7 ).append( form_item_input );\n\t\t\t\t} else {\n\t\t\t\t\trow.children().eq( 8 ).append( form_item_input );\n\t\t\t\t}\n\n\t\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\t\t\t}\n\n\t\t\tif ( typeof index != 'undefined' ) {\n\n\t\t\t\trow.insertAfter( $( render ).find( 'tr' ).eq( index ) );\n\t\t\t\tthis.rows_widgets_array.splice( ( index ), 0, widgets );\n\n\t\t\t} else {\n\t\t\t\t$( render ).append( row );\n\t\t\t\tthis.rows_widgets_array.push( widgets );\n\t\t\t}\n\n\t\t\tif ( this.parent_controller.is_viewing ) {\n\t\t\t\trow.find( '.control-icon' ).hide();\n\t\t\t}\n\n\t\t\tif ( widgets.status_id.getValue() == 10 ) {\n\t\t\t\twidgets.absence_policy_id.css( 'display', 'none' );\n\t\t\t} else if ( widgets.status_id.getValue() == 20 ) {\n\t\t\t\twidgets.absence_policy_id.css( 'display', 'block' );\n\t\t\t}\n\n\t\t\tthis.addIconsEvent( row ); //Bind event to add and minus icon\n\t\t\tthis.removeLastRowLine();\n\t\t}\n\t}\n\n\tonRowChanges( row_widgets ) {\n\t\tvar recurring_schedule_template_id = row_widgets.week.attr( 'recurring_schedule_template_id' );\n\t\tvar date_stamp = row_widgets.week.attr( 'date_stamp' );\n\n\t\tif ( recurring_schedule_template_id ) {\n\t\t\tvar startTime = date_stamp +' '+ row_widgets['start_time' + recurring_schedule_template_id].getValue();\n\t\t\tvar endTime = date_stamp +' '+ row_widgets['end_time' + recurring_schedule_template_id].getValue();\n\t\t\tvar schedulePolicyId = row_widgets.schedule_policy_id.getValue();\n\n\t\t\tif ( startTime !== '' && endTime !== '' && schedulePolicyId !== '' ) {\n\t\t\t\tvar result = this.schedule_api.getScheduleTotalTime( startTime, endTime, schedulePolicyId, { async: false } );\n\t\t\t\tif ( result.isValid() && result.getResult() ) {\n\t\t\t\t\tvar total_time = result.getResult();\n\n\t\t\t\t\trow_widgets.total_time.setValue( Global.getTimeUnit( total_time ) );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tinsideEditorGetValue( current_edit_item_id ) {\n\t\tvar len = this.rows_widgets_array.length;\n\n\t\tvar result = [];\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar row = this.rows_widgets_array[i];\n\n\t\t\tvar recurring_schedule_template_id = row.week.attr( 'recurring_schedule_template_id' );\n\t\t\tvar date_stamp = row.week.attr( 'date_stamp' );\n\n\t\t\tif ( recurring_schedule_template_id ) {\n\t\t\t\tvar data = {\n\t\t\t\t\tid: recurring_schedule_template_id,\n\n\t\t\t\t\tweek: row.week.getValue(),\n\t\t\t\t\tstatus_id: row.status_id.getValue(),\n\n\t\t\t\t\tmon: row.mon.getValue(),\n\t\t\t\t\ttue: row.tue.getValue(),\n\t\t\t\t\twed: row.wed.getValue(),\n\t\t\t\t\tthu: row.thu.getValue(),\n\t\t\t\t\tfri: row.fri.getValue(),\n\t\t\t\t\tsat: row.sat.getValue(),\n\t\t\t\t\tsun: row.sun.getValue(),\n\n\t\t\t\t\tdate_stamp: date_stamp,\n\t\t\t\t\tstart_time: row['start_time' + recurring_schedule_template_id].getValue(),\n\t\t\t\t\tend_time: row['end_time' + recurring_schedule_template_id].getValue(),\n\t\t\t\t\ttotal_time: null,\n\n\t\t\t\t\tbranch_id: row.branch_id.getValue(),\n\t\t\t\t\tdepartment_id: row.department_id.getValue(),\n\n\t\t\t\t\tabsence_policy_id: row.absence_policy_id.getValue(),\n\t\t\t\t\tschedule_policy_id: row.schedule_policy_id.getValue()\n\t\t\t\t};\n\n\t\t\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\t\t\tdata.open_shift_multiplier = row.open_shift_multiplier.getValue();\n\t\t\t\t}\n\n\t\t\t\tif ( Global.getProductEdition() >= 20 ) {\n\t\t\t\t\tdata.job_id = row.job_id.getValue();\n\t\t\t\t\tdata.job_item_id = row.job_item_id.getValue();\n\t\t\t\t\tdata.punch_tag_id = row.punch_tag_id.getValue();\n\t\t\t\t}\n\n\t\t\t\tdata.recurring_schedule_template_control_id = current_edit_item_id;\n\t\t\t\tresult.push( data );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tinsideEditorSetValue( val ) {\n\t\tvar len = val.length;\n\t\tthis.removeAllRows();\n\n\t\tif ( len > 0 ) {\n\t\t\tfor ( var i = 0; i < val.length; i++ ) {\n\t\t\t\tif ( Global.isSet( val[i] ) ) {\n\t\t\t\t\tvar row = val[i];\n\t\t\t\t\tthis.addRow( row );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.getDefaultData();\n\t\t}\n\t}\n\n\tinsideEditorRemoveRow( row ) {\n\t\tvar index = row[0].rowIndex - 1;\n\t\tvar remove_id = this.rows_widgets_array[index].week.attr( 'recurring_schedule_template_id' );\n\t\tif ( TTUUID.isUUID( remove_id ) && remove_id != TTUUID.zero_id && remove_id != TTUUID.not_exist_id ) {\n\t\t\tthis.delete_ids.push( remove_id );\n\t\t}\n\t\trow.remove();\n\t\tthis.rows_widgets_array.splice( index, 1 );\n\n\t\tthis.removeLastRowLine();\n\t}\n\n\tuniformVariable( records ) {\n\t\tif ( !this.is_mass_editing ) {\n\t\t\trecords.recurring_schedule_template = this.editor.getValue( this.refresh_id );\n\t\t}\n\t\treturn records;\n\t}\n\n\trenameObjectKey( obj, old_key, new_key ) {\n\t\tif ( old_key !== new_key ) {\n\t\t\tObject.defineProperty( obj, new_key,\n\t\t\t\tObject.getOwnPropertyDescriptor( obj, old_key ) );\n\t\t\tdelete obj[old_key];\n\t\t}\n\t}\n\n\t_continueDoCopyAsNew() {\n\t\tthis.setCurrentEditViewState( 'new' );\n\t\tLocalCacheData.current_doing_context_action = 'copy_as_new';\n\n\t\tif ( Global.isSet( this.edit_view ) ) {\n\t\t\tfor ( var i = 0; i < this.editor.rows_widgets_array.length; i++ ) {\n\t\t\t\t//Fix JS exception: Uncaught TypeError: Cannot read property 'getValue' of undefined\n\t\t\t\t//start_time,end_time object keys are appended with the recurring_schedule_template_id, so when copying records we need to rename them to use the new recurring_schedule_template_id\n\t\t\t\tvar new_uuid = TTUUID.generateUUID();\n\t\t\t\tvar old_recurring_schedule_template_id = this.editor.rows_widgets_array[i].week.attr( 'recurring_schedule_template_id' );\n\n\t\t\t\tthis.renameObjectKey( this.editor.rows_widgets_array[i], 'start_time' + old_recurring_schedule_template_id, 'start_time' + new_uuid );\n\t\t\t\tthis.renameObjectKey( this.editor.rows_widgets_array[i], 'end_time' + old_recurring_schedule_template_id, 'end_time' + new_uuid );\n\n\t\t\t\tthis.editor.rows_widgets_array[i].week.attr( 'recurring_schedule_template_id', new_uuid );\n\t\t\t}\n\t\t}\n\t\tsuper._continueDoCopyAsNew();\n\t}\n\n\tonCopyAsNewResult( result ) {\n\t\tvar $this = this;\n\t\tvar result_data = result.getResult();\n\n\t\tif ( !result_data ) {\n\t\t\tTAlertManager.showAlert( $.i18n._( 'Record does not exist' ) );\n\t\t\t$this.onCancelClick();\n\t\t\treturn;\n\t\t}\n\n\t\t$this.openEditView(); // Put it here is to avoid if the selected one is not existed in data or have deleted by other pragram. in this case, the edit view should not be opend.\n\n\t\tresult_data = result_data[0];\n\t\tthis.copied_record_id = result_data.id;\n\t\tresult_data.id = '';\n\t\tif ( $this.sub_view_mode && $this.parent_key ) {\n\t\t\tresult_data[$this.parent_key] = $this.parent_value;\n\t\t}\n\n\t\t$this.current_edit_record = result_data;\n\t\t$this.initEditView();\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Description' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'description',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Template' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'id',\n\t\t\t\tlayout_name: 'global_recurring_template_control',\n\t\t\t\tapi_class: TTAPI.APIRecurringScheduleTemplateControl,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Schedule Policy' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'schedule_policy_id',\n\t\t\t\tlayout_name: 'global_schedule',\n\t\t\t\tapi_class: TTAPI.APISchedulePolicy,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Jump To' ),\n\t\t\t\t\tid: 'jump_to_header',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\taction_group_header: true,\n\t\t\t\t\tpermission_result: false // to hide it in legacy context menu and avoid errors in legacy parsers.\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Recurring Schedules' ),\n\t\t\t\t\tid: 'recurring_schedule',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t}]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'recurring_schedule':\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonNavigationClick( iconName ) {\n\n\t\tvar $this = this;\n\n\t\tvar grid_selected_id_array;\n\n\t\tvar filter = { filter_data: {} };\n\n\t\tvar recurring_schedule_template_control_ids = [];\n\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\trecurring_schedule_template_control_ids.push( $this.current_edit_record.id );\n\t\t} else {\n\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\trecurring_schedule_template_control_ids.push( grid_selected_row.id );\n\t\t\t} );\n\t\t}\n\n\t\tfilter.filter_data.recurring_schedule_template_control_id = recurring_schedule_template_control_ids;\n\n\t\tswitch ( iconName ) {\n\t\t\tcase 'recurring_schedule':\n\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Recurring Templates' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'RecurringScheduleControl', filter );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetCustomDefaultMenuIcon( id, context_btn, grid_selected_length ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'recurring_schedule':\n\t\t\t\tthis.setDefaultMenuRecurringScheduleIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetDefaultMenuRecurringScheduleIcon( context_btn, grid_selected_length, pId ) {\n\t\tif ( !PermissionManager.checkTopLevelPermission( 'RecurringScheduleControl' ) || this.edit_only_mode ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\n\t\tif ( grid_selected_length > 0 ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsetCustomEditMenuIcon( id, context_btn ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'recurring_schedule':\n\t\t\t\tthis.setEditMenuRecurringScheduleIcon( context_btn );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetEditMenuRecurringScheduleIcon( context_btn, pId ) {\n\t\tif ( !this.viewPermissionValidate( pId ) || this.edit_only_mode ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\n\t}\n\n\tonSaveResult( result ) {\n\t\tsuper.onSaveResult( result );\n\t\tif ( result && result.isValid() ) {\n\t\t\tvar system_job_queue = result.getAttributeInAPIDetails( 'system_job_queue' );\n\t\t\tif ( system_job_queue ) {\n\t\t\t\tthis.event_bus.emit( 'tt_topbar', 'toggle_job_queue_spinner', {\n\t\t\t\t\tshow: true,\n\t\t\t\t\tget_job_data: true\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRecurringTemplateTabHtml() {\n\t\treturn `<div id=\"tab_recurring_template\" class=\"edit-view-tab-outside\">\n\t\t\t\t\t<div class=\"edit-view-tab\" id=\"tab_recurring_template_content_div\">\n\t\t\t\t\t\t<div class=\"first-column full-width-column\"></div>\n\t\t\t\t\t\t<div class=\"inside-editor-div full-width-column\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t}\n}\n"],"names":["RecurringScheduleTemplateControlViewController","options","_","$","$this","res","tab_model","form_item_input","tab_recurring_template","tab_recurring_template_column1","inside_editor_div","args","getRender","getRowRender","render","data","index","widgetContainer","row_id","row","widgets","e","target","widgetContainer2","form_item_sun_checkbox","form_item_mon_checkbox","form_item_tue_checkbox","form_item_wed_checkbox","form_item_thu_checkbox","form_item_fri_checkbox","form_item_sat_checkbox","divContainer1","label_1","rows_widgets","divContainer2","label_2","divContainer3","label_3","punch_tags","row_widgets","recurring_schedule_template_id","date_stamp","startTime","endTime","schedulePolicyId","result","total_time","current_edit_item_id","len","i","val","remove_id","records","obj","old_key","new_key","new_uuid","old_recurring_schedule_template_id","result_data","context_menu_model","id","iconName","grid_selected_id_array","filter","recurring_schedule_template_control_ids","value","grid_selected_row","context_btn","grid_selected_length","pId","system_job_queue"],"mappings":"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"}