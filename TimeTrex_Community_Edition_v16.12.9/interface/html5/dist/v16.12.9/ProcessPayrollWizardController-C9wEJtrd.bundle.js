import{_ as v,j as n}from"./vendor-tTApdY0Y.bundle.js";class b extends BaseWizardController{constructor(r={}){v.defaults(r,{el:".wizard-bg",all_columns:null,pay_stub_transaction_columns:null,api_pay_period:null,api_pay_stub:null,api_pay_stub_transaction:null,alert_message:n.i18n._("Please select one or more pay periods in the list above to enable icons."),transaction_source_data:null}),super(r)}init(r){this.title=n.i18n._("Payroll Processing Wizard"),this.steps=9,this.current_step=1,this.script_name="wizard_process_payroll",this.wizard_id="ProcessPayrollWizard",this.api_pay_period=TTAPI.APIPayPeriod,this.api_pay_stub=TTAPI.APIPayStub,this.api_pay_stub_transaction=TTAPI.APIPayStubTransaction,this.render()}render(){super.render(),this.initUserGenericData()}setButtonsStatus(){Global.setWidgetEnabled(this.done_btn,!1),Global.setWidgetEnabled(this.close_btn,!0),this.current_step===1?Global.setWidgetEnabled(this.back_btn,!1):Global.setWidgetEnabled(this.back_btn,!0),this.current_step!==this.steps?(Global.setWidgetEnabled(this.done_btn,!1),Global.setWidgetEnabled(this.next_btn,!0),this.stepsWidgetDic[1]&&(!this.stepsWidgetDic[1].pay_period_id.getValue()||this.stepsWidgetDic[1].pay_period_id.getValue().length<1)&&Global.setWidgetEnabled(this.next_btn,!1)):(Global.setWidgetEnabled(this.done_btn,!0),Global.setWidgetEnabled(this.next_btn,!1))}buildCurrentStepUI(){var r=this;switch(this.content_div.empty(),this.current_step){case 1:var e=this.getLabel();e.text(n.i18n._("Select one or more pay periods to process payroll for"));var t=this.getAComboBox(TTAPI.APIPayPeriod,!0,"global_Pay_period","pay_period_id"),l=n("<div class='wizard-acombobox-div'></div>");l.append(t),t.unbind("formItemChange").bind("formItemChange",function(){r.setButtonsStatus()}),this.stepsWidgetDic[this.current_step]={},this.stepsWidgetDic[this.current_step][t.getField()]=t,this.content_div.append(e),this.content_div.append(l);break;case 2:e=this.getLabel(),e.text(n.i18n._("Confirm all requests are authorized")),this.content_div.append(e),this.stepsWidgetDic[this.current_step]={};var i="pending_request",o=n("<div class='grid-div wizard-grid-div'> <table id='"+i+"'></table></div>");this.setGrid(i,o,!0);var s=this.getRibbonButtonBox(),h=this.getRibbonButton("request",Global.getRibbonIconRealPath("requests-35x35.png"),n.i18n._("Requests"));h.unbind("click").bind("click",function(){r.onNavigationClick("request")}),s.children().eq(0).append(h),this.content_div.append(s);break;case 3:e=this.getLabel(),e.text(n.i18n._("Confirm that no critical exceptions exist")),this.content_div.append(e),this.stepsWidgetDic[this.current_step]={},i="exceptions",o=n("<div class='grid-div wizard-grid-div'> <table id='"+i+"'></table></div>"),this.setGrid(i,o,!0),this.removeResizableGrids(),s=this.getRibbonButtonBox();var d=this.getRibbonButton("exceptions",Global.getRibbonIconRealPath("exceptions-35x35.png"),n.i18n._("Exceptions"));d.unbind("click").bind("click",function(){r.onNavigationClick("exceptions")}),s.children().eq(0).append(d),this.content_div.append(s);break;case 4:e=this.getLabel(),e.text(n.i18n._("Confirm timesheets are verified")),this.content_div.append(e),this.stepsWidgetDic[this.current_step]={},i="timesheet",o=n("<div class='grid-div wizard-grid-div'> <table id='"+i+"'></table></div>"),this.setGrid(i,o,!0),this.removeResizableGrids(),s=this.getRibbonButtonBox(),d=this.getRibbonButton("timesheet_reports",Global.getRibbonIconRealPath("timesheet_reports-35x35.png"),n.i18n._("TimeSheet<br>Summary"));var _=this.getRibbonButton("authorization_timesheet",Global.getRibbonIconRealPath("authorize_timesheet-35x35.png"),n.i18n._("TimeSheet<br>Authorizations"));d.unbind("click").bind("click",function(){r.onNavigationClick("timesheet_reports")}),_.unbind("click").bind("click",function(){r.onNavigationClick("authorization_timesheet")}),s.children().eq(0).append(d),s.children().eq(0).append(_),this.content_div.append(s);break;case 5:e=this.getLabel(),e.text(n.i18n._("Lock pay periods to prevent changes")),this.content_div.append(e),this.stepsWidgetDic[this.current_step]={},i="lock_pay_period",o=n("<div class='grid-div wizard-grid-div'> <table id='"+i+"'></table></div>"),this.setGrid(i,o,!0),s=this.getRibbonButtonBox(),d=this.getRibbonButton("lock",Global.getRibbonIconRealPath("lock-35x35.png"),n.i18n._("Lock")),_=this.getRibbonButton("unlock",Global.getRibbonIconRealPath("unlock-35x35.png"),n.i18n._("UnLock")),d.unbind("click").bind("click",function(){if(n(this).hasClass("disable-image")){TAlertManager.showAlert(r.alert_message);return}r.onNavigationClick("lock")}),_.unbind("click").bind("click",function(){if(n(this).hasClass("disable-image")){TAlertManager.showAlert(r.alert_message);return}r.onNavigationClick("unlock")}),this.stepsWidgetDic[this.current_step].lock=d,this.stepsWidgetDic[this.current_step].unlock=_,s.children().eq(0).append(d),s.children().eq(0).append(_),this.content_div.append(s);break;case 6:e=this.getLabel(),e.text(n.i18n._("Create any necessary pay stub amendments")),this.content_div.append(e),this.stepsWidgetDic[this.current_step]={},i="pay_stub_amendments",o=n("<div class='grid-div wizard-grid-div'> <table id='"+i+"'></table></div>"),this.setGrid(i,o,!0),s=this.getRibbonButtonBox(),d=this.getRibbonButton("pay_stub_amendment",Global.getRibbonIconRealPath("pay_stub_amendments-35x35.png"),n.i18n._("Pay Stub<br>Amendments")),d.unbind("click").bind("click",function(){r.onNavigationClick("pay_stub_amendment")}),s.children().eq(0).append(d),this.content_div.append(s);break;case 7:e=this.getLabel(),e.text(n.i18n._("Generate pay stubs")),this.content_div.append(e),this.stepsWidgetDic[this.current_step]={},i="pay_stub_generate",o=n("<div class='grid-div wizard-grid-div'> <table id='"+i+"'></table></div>"),this.setGrid(i,o,!0),s=this.getRibbonButtonBox(),d=this.getRibbonButton("generate_pay_stub",Global.getRibbonIconRealPath("calculate_paystubs-35x35.png"),n.i18n._("Generate<br>Pay Stubs")),_=this.getRibbonButton("pay_stub",Global.getRibbonIconRealPath("pay_stubs-35x35.png"),n.i18n._("Pay<br>Stubs"));var u=this.getRibbonButton("pay_stub_summary",Global.getRibbonIconRealPath("pay_stubs_accounts-35x35.png"),n.i18n._("Pay Stub<br>Summary"));d.unbind("click").bind("click",function(){if(n(this).hasClass("disable-image")){TAlertManager.showAlert(r.alert_message);return}r.onNavigationClick("generate_pay_stub")}),_.unbind("click").bind("click",function(){r.onNavigationClick("pay_stub")}),u.unbind("click").bind("click",function(){r.onNavigationClick("pay_stub_summary")}),this.stepsWidgetDic[this.current_step].generate_pay_stub=d,s.children().eq(0).append(d),s.children().eq(0).append(_),s.children().eq(0).append(u),this.content_div.append(s);break;case 8:e=this.getLabel(),e.text(n.i18n._("Process transactions")),this.content_div.append(e),this.stepsWidgetDic[this.current_step]={},n(".wizard .content").css("opacity",0),TTPromise.add("wizard","step8"),TTPromise.wait("wizard","step8",function(){n(".wizard .content").css("opacity",1)}),i="pay_stub_transfer",o=n("<div class='grid-div wizard-grid-div'> <table id='"+i+"'></table></div> <hr>"),this.setGrid(i,o,!0),i="pay_stub_transaction",o=n("<div class='grid-div wizard-grid-div'> <table id='"+i+"'></table></div>"),this.setGrid(i,o,!1).setGridHeight(Math.floor((this.content_div.height()-150)/2)),s=this.getRibbonButtonBox();var p=this.getRibbonButton("direct_deposit",Global.getRibbonIconRealPath("direct_deposit-35x35.png"),n.i18n._("Process<br>Transactions"));_=this.getRibbonButton("pay_stub_transaction_summary",Global.getRibbonIconRealPath("payroll_reports-35x35.png"),n.i18n._("Pay Stub<br>Transaction Summary")),u=this.getRibbonButton("payroll_export_report",Global.getRibbonIconRealPath("payroll_reports-35x35.png"),n.i18n._("Payroll Export")),p.unbind("click").bind("click",function(){r.onNavigationClick("direct_deposit")}),_.unbind("click").bind("click",function(){r.onNavigationClick("pay_stub_transaction_summary")}),u.unbind("click").bind("click",function(){r.onNavigationClick("payroll_export_report")}),s.children().eq(0).append(p),s.children().eq(0).append(_),s.children().eq(0).append(u),this.content_div.append(s);break;case 9:e=this.getLabel(),e.text(n.i18n._("Close pay period")),this.content_div.append(e),this.stepsWidgetDic[this.current_step]={},i="pay_stub_close",o=n("<div class='grid-div wizard-grid-div'> <table id='"+i+"'></table></div>"),this.setGrid(i,o,!0),s=this.getRibbonButtonBox(),d=this.getRibbonButton("close_pay_period",Global.getRibbonIconRealPath("close_pay_period-35x35.png"),n.i18n._("Close")),d.unbind("click").bind("click",function(){if(n(this).hasClass("disable-image")){TAlertManager.showAlert(r.alert_message);return}r.onNavigationClick("close_pay_period")}),this.stepsWidgetDic[this.current_step].close=d,s.children().eq(0).append(d),this.content_div.append(s);break}}onNextClick(){if(this.saveCurrentStep(),this.current_step===1){var r=this.stepsWidgetDic[this.current_step],e=r.pay_period_id.getValue();if(!e||e.length==0||e==TTUUID.zero_id||e.length==1&&e[0]==TTUUID.zero_id){TAlertManager.showAlert(n.i18n._("Please choose a Pay Period"));return}}this.current_step=this.current_step+1,this.initCurrentStep()}onDoneClick(){this.cleanStepsData(),LocalCacheData.current_open_wizard_controllers=LocalCacheData.current_open_wizard_controllers.filter(r=>r.wizard_id!==this.wizard_id),this.saveAllStepsToUserGenericData(function(){}),this.call_back&&this.call_back(),n(this.el).remove(),n().TFeedback({source:this.wizard_id})}getGridColumns(r,e){var t=this;if(r=="pay_stub_transaction"){var l=this.api_pay_stub_transaction.getOptions("columns",{payroll_wizard:!0},{async:!1});if(l){var i=l.getResult();t.pay_stub_transaction_columns=Global.buildColumnArray(i);var o=[];for(var s in t.pay_stub_transaction_columns){var h=t.pay_stub_transaction_columns[s];if(h.value=="remittance_source_account"||h.value=="remittance_source_account_type"||h.value=="currency"||h.value=="total_transactions"||h.value=="total_amount"){var d={resizable:!1,name:h.value,index:h.value,label:h.label,width:100,sortable:!1,title:!1};o.push(d)}}e(o);return}}if(this.all_columns)_();else{var l=this.api_pay_period.getOptions("columns",{async:!1}),i=l.getResult();t.all_columns=Global.buildColumnArray(i),_()}function _(){var u=t.all_columns.length,p=[];switch(r){case"pending_request":for(var c=0;c<u;c++){var a=t.all_columns[c];if(a.value=="start_date"||a.value=="end_date"||a.value=="transaction_date"||a.value=="pending_requests"){var g={resizable:!1,name:a.value,index:a.value,label:a.label,width:100,sortable:!1,title:!1};p.push(g)}}break;case"exceptions":for(var c=0;c<u;c++)a=t.all_columns[c],(a.value=="start_date"||a.value=="end_date"||a.value=="transaction_date"||a.value=="exceptions_high"||a.value=="exceptions_medium"||a.value=="exceptions_low"||a.value=="exceptions_critical")&&(a.value=="exceptions_high"||a.value=="exceptions_medium"||a.value=="exceptions_low"||a.value=="exceptions_critical"?(g={resizable:!1,name:a.value,index:a.value,label:a.label,width:50,sortable:!1,title:!1},p.push(g)):(g={resizable:!1,name:a.value,index:a.value,label:a.label,width:100,sortable:!1,title:!1},p.push(g)));break;case"timesheet":for(var c=0;c<u;c++)a=t.all_columns[c],(a.value=="start_date"||a.value=="end_date"||a.value=="transaction_date"||a.value=="verified_timesheets"||a.value=="pending_timesheets"||a.value=="total_timesheets")&&(a.value=="verified_timesheets"||a.value=="pending_timesheets"||a.value=="total_timesheets"?(g={resizable:!1,name:a.value,index:a.value,label:a.label,width:50,sortable:!1,title:!1},p.push(g)):(g={resizable:!1,name:a.value,index:a.value,label:a.label,width:100,sortable:!1,title:!1},p.push(g)));break;case"lock_pay_period":for(var c=0;c<u;c++)a=t.all_columns[c],(a.value=="start_date"||a.value=="end_date"||a.value=="transaction_date"||a.value=="status")&&(g={resizable:!1,name:a.value,index:a.value,label:a.label,width:100,sortable:!1,title:!1},p.push(g));break;case"pay_stub_amendments":for(var c=0;c<u;c++)a=t.all_columns[c],(a.value=="start_date"||a.value=="end_date"||a.value=="transaction_date"||a.value=="ps_amendments")&&(g={resizable:!1,name:a.value,index:a.value,label:a.label,width:100,sortable:!1,title:!1},p.push(g));break;case"pay_stub_generate":case"pay_stub_transfer":for(var c=0;c<u;c++)a=t.all_columns[c],(a.value=="start_date"||a.value=="end_date"||a.value=="transaction_date"||a.value=="pay_stubs_open")&&(g={resizable:!1,name:a.value,index:a.value,label:a.label,width:100,sortable:!1,title:!1},p.push(g));break;case"pay_stub_close":for(var c=0;c<u;c++)a=t.all_columns[c],(a.value=="status"||a.value=="start_date"||a.value=="end_date"||a.value=="transaction_date"||a.value=="pay_stubs_open")&&(g={resizable:!1,name:a.value,index:a.value,label:a.label,width:100,sortable:!1,title:!1},p.push(g));break}e(p)}}removeResizableGrids(){Array.isArray(LocalCacheData.resizeable_grids)&&(LocalCacheData.resizeable_grids=LocalCacheData.resizeable_grids.filter(function(r){return r!==null&&r.ui_id!=="exceptions"&&r.ui_id!=="timesheet"}))}setGridGroupColumns(r){if(!(r!=="exceptions"&&r!=="timesheet")){var e=n(n(this.el).find("table[aria-labelledby=gbox_"+r+"]")[0]),t=n(n(this.el).find("table[id="+r+"]")[0]),l=n("<tr></tr>"),i=n('<th class="group-column-th"><span style="font-weight: bold"></span></th>');switch(r){case"exceptions":var o=t.children(0).children(0).children(),s=i.clone();s.attr("colspan","1"),s.width(o.eq(0).width()),l.append(s),s=i.clone(),s.attr("colspan","3"),s.width(o.eq(1).width()*3),l.append(s),s=i.clone(),s.attr("colspan","4"),s.width(o.eq(4).width()*4),s.children(0).text(n.i18n._("Exceptions"));break;case"timesheet":o=t.children(0).children(0).children(),s=i.clone(),s.attr("colspan","1"),s.width(o.eq(0).width()),l.append(s),s=i.clone(),s.attr("colspan","3"),s.width(o.eq(1).width()*3),l.append(s),s=i.clone(),s.attr("colspan","3"),s.width(o.eq(4).width()*3),s.children(0).text(n.i18n._("Timesheets"));break}l.append(s),e.find("thead").prepend(l)}}onNavigationClick(r){var e=this,t=this.stepsWidgetDic[this.current_step],l,i,o,s;switch(r){case"exceptions":s={filter_data:{}},l=t.exceptions,i=l.grid.jqGrid("getGridParam","selarrrow");var h={value:i};s.filter_data.pay_period_id=h,Global.addViewTab(this.wizard_id,n.i18n._("Process Payroll"),window.location.href),this.onCloseClick(),IndexViewController.goToView("Exception",s);break;case"request":Global.addViewTab(this.wizard_id,n.i18n._("Process Payroll"),window.location.href),IndexViewController.goToView("Request"),this.onCloseClick();break;case"timesheet_reports":Global.addViewTab(this.wizard_id,n.i18n._("Process Payroll"),window.location.href),this.onCloseClick(),LocalCacheData.default_filter_for_next_open_view={template:"by_pay_period_by_employee+verified_time_sheet"},IndexViewController.openReport(LocalCacheData.current_open_primary_controller,"TimesheetSummaryReport");break;case"lock":l=t.lock_pay_period,i=l.grid.jqGrid("getGridParam","selarrrow"),o=[];for(var d=0;d<i.length;d++){var u={};u.id=i[d],u.status_id=12,o.push(u)}ProgressBar.showOverlay(),this.api_pay_period.setPayPeriod(o,{onResult:function(p){p&&p.isValid()?e.buildCurrentStepData():TAlertManager.showErrorAlert(p)}});break;case"unlock":l=t.lock_pay_period,i=l.grid.jqGrid("getGridParam","selarrrow"),o=[];for(var d=0;d<i.length;d++)u={},u.id=i[d],u.status_id=10,o.push(u);ProgressBar.showOverlay(),this.api_pay_period.setPayPeriod(o,{onResult:function(p){p&&p.isValid()?e.buildCurrentStepData():TAlertManager.showErrorAlert(p)}});break;case"pay_stub_amendment":Global.addViewTab(this.wizard_id,n.i18n._("Process Payroll"),window.location.href),this.onCloseClick(),l=t.pay_stub_amendments,i=l.grid.jqGrid("getGridParam","selarrrow"),s={filter_data:{pay_period_id:{value:i}}},IndexViewController.goToView("PayStubAmendment",s);break;case"generate_pay_stub":l=t.pay_stub_generate,i=l.grid.jqGrid("getGridParam","selarrrow"),ProgressBar.showOverlay(),TTAPI.APIPayStub.setIsIdempotent(!0),TTAPI.APIPayStub.generatePayStubs(i,{onResult:function(p){if(p&&p.isValid()){var c=p.getAttributeInAPIDetails("user_generic_status_batch_id");c&&TTUUID.isUUID(c)&&c!=TTUUID.zero_id&&c!=TTUUID.not_exist_id&&UserGenericStatusWindowController.open(c,[],function(){e.buildCurrentStepData()})}else TAlertManager.showErrorAlert(p)}});break;case"pay_stub":Global.addViewTab(this.wizard_id,n.i18n._("Process Payroll"),window.location.href),this.onCloseClick(),this.current_step===7?l=t.pay_stub_generate:l=t.pay_stub_transfer,i=l.grid.jqGrid("getGridParam","selarrrow"),s={filter_data:{pay_period_id:{value:i}}},IndexViewController.goToView("PayStub",s);break;case"pay_stub_summary":Global.addViewTab(this.wizard_id,n.i18n._("Process Payroll"),window.location.href),this.onCloseClick(),IndexViewController.openReport(LocalCacheData.current_open_primary_controller,"PayStubSummaryReport");break;case"pay_stub_transaction_summary":Global.addViewTab(this.wizard_id,n.i18n._("Process Payroll"),window.location.href),this.onCloseClick(),IndexViewController.openReport(LocalCacheData.current_open_primary_controller,"PayStubTransactionSummaryReport");break;case"payroll_export_report":Global.addViewTab(this.wizard_id,n.i18n._("Process Payroll"),window.location.href),this.onCloseClick(),IndexViewController.openReport(LocalCacheData.current_open_primary_controller,"PayrollExportReport");break;case"close_pay_period":l=t.pay_stub_close,i=l.grid.jqGrid("getGridParam","selarrrow"),o=[];for(var d=0;d<i.length;d++)u={},u.id=i[d],u.status_id=20,o.push(u);ProgressBar.showOverlay(),this.api_pay_period.setPayPeriod(o,{onResult:function(p){p&&p.isValid()?e.buildCurrentStepData():TAlertManager.showErrorAlert(p)}});break;case"authorization_timesheet":Global.addViewTab(this.wizard_id,n.i18n._("Process Payroll"),window.location.href),IndexViewController.goToView("TimeSheetAuthorization"),this.onCloseClick();break;case"direct_deposit":Global.addViewTab(this.wizard_id,n.i18n._("Process Payroll"),window.location.href);var _=t.pay_stub_transfer,u={transaction_source_data:e.transaction_source_data,filter_data:{pay_period_id:_.grid.jqGrid("getGridParam","selarrrow")}};IndexViewController.openWizardController("ProcessTransactionsWizardController",u),this.onCloseClick();break}}onGridSelectRow(r){this.stepsDataDic[this.current_step];var e=this.stepsWidgetDic[this.current_step],t,l;if(this.current_step===5)t=e.lock_pay_period,l=t.grid.jqGrid("getGridParam","selarrrow"),l.length<1?(e.lock.addClass("disable-image"),e.unlock.addClass("disable-image")):(e.lock.removeClass("disable-image"),e.unlock.removeClass("disable-image"));else if(this.current_step===7)t=e.pay_stub_generate,l=t.grid.jqGrid("getGridParam","selarrrow"),l.length<1?e.generate_pay_stub.addClass("disable-image"):e.generate_pay_stub.removeClass("disable-image");else if(this.current_step===8){var i=e.pay_stub_transfer,o=e.pay_stub_transaction,s=i.grid.jqGrid("getGridParam","selarrrow");if(s.length<1){this.content_div.find("#directDepositIcon").addClass("disable-image");var t=e.pay_stub_transaction;t.grid.trigger("reloadGrid"),this.setGridAutoHeight(t,this.transaction_source_data.length),this.showNoResultCover(t.grid.parents(".grid-div")),o.grid.show()}else{this.content_div.find("#directDepositIcon").removeClass("disable-image");var h=this,t=e.pay_stub_transaction;this.api_pay_stub_transaction.getPayPeriodTransactionSummary({pay_period_id:s},{onResult:function(_){h.transaction_source_data=_.getResult(),h.transaction_source_data.length>0?(h.removeNoResultCover(t.grid.parents(".grid-div")),t.setData(h.transaction_source_data),h.setGridAutoHeight(t,h.transaction_source_data.length)):h.showNoResultCover(t),o.grid.show()}})}}else this.current_step===9&&(t=e.pay_stub_close,l=t.grid.jqGrid("getGridParam","selarrrow"),l.length<1?e.close.addClass("disable-image"):e.close.removeClass("disable-image"))}setGridAutoHeight(r,e){e>0&&e<10?r.grid.setGridHeight(e*23):e>10&&r.grid.setGridHeight(230)}buildCurrentStepData(){if(this.stepsDataDic[1]){var r=this.stepsDataDic[1].pay_period_id;(!r||r.length==0)&&(r=[0]);var e={},t,l=this,i,o=this.stepsWidgetDic[this.current_step];switch(this.current_step){case 2:e.filter_columns={},e.filter_columns.id=!0,e.filter_columns.start_date=!0,e.filter_columns.end_date=!0,e.filter_columns.transaction_date=!0,e.filter_columns.pending_requests=!0,e.filter_data={},e.filter_data.id=r,this.api_pay_period.getPayPeriod(e,!0,{onResult:function(s){i=s.getResult(),t=o.pending_request,t.setData(i),l.setGridSelection(t,i),l.setGridAutoHeight(t,i.length)}});break;case 3:e.filter_columns={},e.filter_columns.id=!0,e.filter_columns.start_date=!0,e.filter_columns.end_date=!0,e.filter_columns.transaction_date=!0,e.filter_columns.exceptions_high=!0,e.filter_columns.exceptions_medium=!0,e.filter_columns.exceptions_low=!0,e.filter_columns.exceptions_critical=!0,e.filter_data={},e.filter_data.id=r,this.api_pay_period.getPayPeriod(e,!0,{onResult:function(s){i=s.getResult(),t=o.exceptions,t.setData(i),l.setGridSelection(t,i),l.setGridAutoHeight(t,i.length)}});break;case 4:e.filter_columns={},e.filter_columns.id=!0,e.filter_columns.start_date=!0,e.filter_columns.end_date=!0,e.filter_columns.transaction_date=!0,e.filter_columns.verified_timesheets=!0,e.filter_columns.pending_timesheets=!0,e.filter_columns.total_timesheets=!0,e.filter_data={},e.filter_data.id=r,this.api_pay_period.getPayPeriod(e,!0,{onResult:function(s){i=s.getResult(),t=o.timesheet,t.setData(i),l.setGridSelection(t,i),l.setGridAutoHeight(t,i.length)}});break;case 5:e.filter_columns={},e.filter_columns.id=!0,e.filter_columns.start_date=!0,e.filter_columns.end_date=!0,e.filter_columns.transaction_date=!0,e.filter_columns.status=!0,e.filter_data={},e.filter_data.id=r,this.api_pay_period.getPayPeriod(e,!0,{onResult:function(s){i=s.getResult(),t=o.lock_pay_period,t.setData(i),l.setGridSelection(t,i),l.setGridAutoHeight(t,i.length)}});break;case 6:e.filter_columns={},e.filter_columns.id=!0,e.filter_columns.start_date=!0,e.filter_columns.end_date=!0,e.filter_columns.transaction_date=!0,e.filter_columns.ps_amendments=!0,e.filter_data={},e.filter_data.id=r,this.api_pay_period.getPayPeriod(e,!0,{onResult:function(s){i=s.getResult(),t=o.pay_stub_amendments,t.setData(i),l.setGridSelection(t,i),l.setGridAutoHeight(t,i.length)}});break;case 7:e.filter_columns={},e.filter_columns.id=!0,e.filter_columns.start_date=!0,e.filter_columns.end_date=!0,e.filter_columns.transaction_date=!0,e.filter_columns.pay_stubs_open=!0,e.filter_data={},e.filter_data.id=r,this.api_pay_period.getPayPeriod(e,!0,{onResult:function(s){i=s.getResult(),t=o.pay_stub_generate,t.setData(i),l.setGridSelection(t,i),l.setGridAutoHeight(t,i.length)}});break;case 8:e.filter_columns={},e.filter_columns.id=!0,e.filter_columns.start_date=!0,e.filter_columns.end_date=!0,e.filter_columns.transaction_date=!0,e.filter_columns.pay_stubs_open=!0,e.filter_data={},e.filter_data.id=r,TTUUID.isUUID(r)&&r!=TTUUID.zero_id&&this.api_pay_period.getPayPeriod(e,!0,{onResult:function(s){i=s.getResult(),t=o.pay_stub_transfer,t.setData(i),l.setGridSelection(t,i),l.setGridAutoHeight(t,i.length);var h=[];for(var d in i)h.push(i[d].id);l.api_pay_stub_transaction.getPayPeriodTransactionSummary({pay_period_id:h},{onResult:function(_){l.transaction_source_data=_.getResult(),t=o.pay_stub_transaction,typeof l.transaction_source_data=="object"&&l.transaction_source_data.length>0?t.setData(l.transaction_source_data):(t.setData([]),l.showNoResultCover(t.grid.parents(".grid-div"))),l.setGridAutoHeight(t,l.transaction_source_data.length),t.grid.find(".cbox").prop("checked",!0),TTPromise.resolve("wizard","step8")}})}});break;case 9:e.filter_columns={},e.filter_columns.id=!0,e.filter_columns.status=!0,e.filter_columns.start_date=!0,e.filter_columns.end_date=!0,e.filter_columns.transaction_date=!0,e.filter_columns.pay_stubs_open=!0,e.filter_data={},e.filter_data.id=r,this.api_pay_period.getPayPeriod(e,!0,{onResult:function(s){i=s.getResult(),t=o.pay_stub_close,t.setData(i),l.setGridSelection(t,i),l.setGridAutoHeight(t,i.length)}});break}}}setCurrentStepValues(){if(this.stepsDataDic[this.current_step])var r=this.stepsDataDic[this.current_step],e=this.stepsWidgetDic[this.current_step];else{this.current_step===1&&this.setLastPayPeriod();return}switch(this.current_step){case 1:r.pay_period_id&&(r.pay_period_id===TTUUID.zero_id||r.pay_period_id[0]===TTUUID.zero_id?this.setLastPayPeriod():e.pay_period_id.setValue(r.pay_period_id));break}}setGridSelection(r,e){if(e)for(var t=0;t<e.length;t++){var l=e[t];r.grid.jqGrid("setSelection",l.id,!1)}}setLastPayPeriod(){var r=this;this.api_pay_period.getLastPayPeriod({onResult:function(e){var t=e.getResult();t&&t[0]&&t[0].id?r.stepsWidgetDic[1].pay_period_id.setValue(t):r.stepsWidgetDic[1].pay_period_id.setValue(TTUUID.zero_id)}})}saveCurrentStep(){this.stepsDataDic[this.current_step]={};var r=this.stepsDataDic[this.current_step],e=this.stepsWidgetDic[this.current_step];if(e)switch(this.current_step){case 1:r.pay_period_id=e.pay_period_id.getValue();break}}setDefaultDataToSteps(){if(!this.default_data)return null}}export{b as ProcessPayrollWizardController};
//# sourceMappingURL=ProcessPayrollWizardController-C9wEJtrd.bundle.js.map
