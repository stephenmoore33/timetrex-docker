{"version":3,"file":"ReportBaseViewController-sqxrqYaU.bundle.js","sources":["../../views/reports/ReportBaseViewController.js"],"sourcesContent":["import { BaseViewController } from '@/views/BaseViewController';\nimport { Global } from '@/global/Global';\n\nexport class ReportBaseViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tview_file: '',\n\n\t\t\tpage_orientation_array: null,\n\t\t\tfont_size_array: null,\n\t\t\tauto_refresh_array: null,\n\t\t\tchart_display_mode_array: null,\n\t\t\tchart_type_array: null,\n\t\t\ttemplates_array: null,\n\t\t\tsetup_fields_array: null,\n\n\t\t\tlog_action_id_array: null,\n\n\t\t\tlog_table_name_id_array: null,\n\n\t\t\ttime_period_array: null,\n\n\t\t\tvisible_report_widgets: null,\n\n\t\t\tvisible_report_values: null,\n\n\t\t\tvisible_report_widgets_order_fix: null,\n\n\t\t\tstatus_id_array: null,\n\n\t\t\tapi_user_report: null,\n\n\t\t\tcurrent_saved_report: null, // Current saved report if any\n\n\t\t\tsaved_report_array: null,\n\n\t\t\tsub_saved_report_view_controller: null,\n\n\t\t\tsub_custom_column_view_controller: null,\n\n\t\t\tneed_refresh_display_columns: false, //When custom column changed. Set this to true.\n\n\t\t\tReportMissedField: null,\n\n\t\t\tinclude_form_setup: false,\n\n\t\t\tshow_empty_message: false,\n\n\t\t\tdo_validate_after_create_ui: false, //Do validate if there is a saved report\n\n\t\t\tform_setup_changed: false,\n\n\t\t\tis_report: true,\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tpreInit( options ) {\n\t\tthis.preInitReport();\n\t}\n\n\tinit( options ) {\n\t\t//Initialize this.real_this without having to call _super,\n\t\t//this avoids Maximum stack size errors in other functions that call _super. Copied from __super.\n\t\tthis.real_this = this.constructor.__super__;\n\n\t\tthis.permission_id = 'report';\n\n\t\tLocalCacheData.current_open_report_controller = this;\n\n\t\tvar $this = this;\n\n\t\t$this.api_user_report = TTAPI.APIUserReportData;\n\t\t$this.initReport();\n\t\t// this.buildContextMenu(); // #VueContextMenu#EditOnly - Commented out as must happen after initEditViewUI\n\t\tTTPromise.resolve( 'Reports', 'openReport' );\n\t\t$this.postInitReport();\n\t}\n\n\t// Removed because the require callback in init() serves this function and calls postInitReport() at the proper time.\n\t// postInit: function(){\n\t// },\n\n\tpreInitReport( options ) {\n\t}\n\n\tinitReport( options ) {\n\t}\n\n\tpostInitReport( options ) {\n\t}\n\n\trender() {\n\t}\n\n\t// Need always override if report has filter field.\n\tprocessFilterField() {\n\t}\n\n\tgetDefaultReport( data ) {\n\t\tvar item = _.find( data, function( item ) {\n\t\t\treturn item.is_default === true;\n\t\t} );\n\t\tdata && data.length > 0 && !item && ( item = data[0] );\n\n\t\treturn item;\n\t}\n\n\t// overrides BaseViewController.getDefaultContextMenuModel()\n\tgetDefaultContextMenuModel() {\n\n\t\tvar default_context_menu_model = {\n\t\t\t// only put groups that are used in default here, others go in the relevant view controller to avoid confusion on which are obsolete.\n\t\t\tgroups: {\n\t\t\t\teditor: {\n\t\t\t\t\tlabel: $.i18n._( 'Editor' ),\n\t\t\t\t\tid: 'editor'\n\t\t\t\t},\n\t\t\t\tsaved_report: {\n\t\t\t\t\tlabel: $.i18n._( 'Saved Report' ),\n\t\t\t\t\tid: this.viewId + 'SavedReport'\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t'icons': {}\n\t\t};\n\n\t\tdefault_context_menu_model['icons']['view_html'] = {\n\t\t\tlabel: $.i18n._( 'View' ),\n\t\t\tid: 'view_html',\n\t\t\taction_group: 'view',\n\t\t\tgroup: 'editor',\n\t\t\tvue_icon: 'tticon tticon-visibility_black_24dp',\n\t\t\tshow_on_right_click: true,\n\t\t};\n\n\t\tdefault_context_menu_model['icons']['view'] = {\n\t\t\tlabel: $.i18n._( 'PDF' ),\n\t\t\tid: 'view',\n\t\t\taction_group: 'view',\n\t\t\tgroup: 'editor',\n\t\t\tvue_icon: 'tticon tticon-picture_as_pdf_black_24dp',\n\t\t};\n\n\t\tdefault_context_menu_model['icons']['export_excel'] = {\n\t\t\tlabel: $.i18n._( 'Excel' ),\n\t\t\tid: 'export_excel',\n\t\t\taction_group: 'view',\n\t\t\tgroup: 'editor',\n\t\t\tvue_icon: 'tticon tticon-file_upload_black_24dp',\n\t\t\tsort_order: 1800\n\t\t};\n\n\t\tdefault_context_menu_model['icons']['cancel'] = {\n\t\t\tlabel: $.i18n._( 'Cancel' ),\n\t\t\tid: 'cancel',\n\t\t\tgroup: 'editor',\n\t\t\tvue_icon: 'tticon tticon-cancel_black_24dp',\n\t\t\tsort_order: 1990\n\t\t};\n\n\t\tdefault_context_menu_model['icons']['save_existed_report'] = {\n\t\t\tlabel: $.i18n._( 'Save' ),\n\t\t\tid: 'save_existed_report',\n\t\t\taction_group: 'save',\n\t\t\tgroup: 'saved_report',\n\t\t\tvue_icon: 'tticon tticon-save_black_24dp',\n\t\t\tshow_on_right_click: true,\n\t\t};\n\n\t\tdefault_context_menu_model['icons']['save_new_report'] = {\n\t\t\tlabel: $.i18n._( 'Save as New' ),\n\t\t\tid: 'save_new_report',\n\t\t\taction_group: 'save',\n\t\t\tgroup: 'saved_report',\n\t\t\tvue_icon: 'tticon tticon-save_black_24dp',\n\t\t};\n\n\t\treturn default_context_menu_model;\n\t}\n\n\t//this prevents the function of the same name in base class from hiding all of the export to excel buttons on all reports due to their lack of a grid.\n\tsetDefaultMenuExportIcon( context_btn, grid_selected_length, pId ) {\n\t}\n\n\topenEditView() {\n\t\tvar $this = this;\n\t\tthis.initOptions( function() {\n\t\t\t// Always need override\n\t\t\t$this.processFilterField();\n\t\t\tif ( !$this.edit_view ) {\n\t\t\t\t$this.initEditViewUI( $this.viewId, $this.view_file );\n\t\t\t\t$this.buildContextMenu(); // #VueContextMenu#EditOnly - Must happen after initEditViewUI\n\t\t\t\t$this.setEditMenu(); // Since moving buildContextMenu to being after initEditViewUI, none of the report icons were enabled until a tab was switched. So adding this in here refreshes the icons.\n\t\t\t}\n\n\t\t\t$this.do_validate_after_create_ui = true;\n\n\t\t\tTTPromise.wait( 'init', 'init', function() {\n\t\t\t\tif ( LocalCacheData.default_edit_id_for_next_open_edit_view ) {\n\t\t\t\t\t$this.navigation.setValue( LocalCacheData.default_edit_id_for_next_open_edit_view );\n\t\t\t\t\t$this.api_user_report.getUserReportData( { filter_data: { id: LocalCacheData.default_edit_id_for_next_open_edit_view } }, {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tresult = result.getResult();\n\t\t\t\t\t\t\t$this.current_saved_report = result[0];\n\t\t\t\t\t\t\t$this.current_edit_record = {};\n\t\t\t\t\t\t\t$this.visible_report_values = {};\n\t\t\t\t\t\t\tLocalCacheData.default_edit_id_for_next_open_edit_view = null;\n\t\t\t\t\t\t\t$this.initEditView();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\t\t\t\t\tif ( LocalCacheData.getAutoFillData() ) {\n\t\t\t\t\t\tlet data = LocalCacheData.getAutoFillData();\n\t\t\t\t\t\t$this.current_saved_report = {};\n\t\t\t\t\t\t$this.current_edit_record = {};\n\t\t\t\t\t\t$this.visible_report_values = {};\n\t\t\t\t\t\t$this.do_validate_after_create_ui = false;\n\t\t\t\t\t\t$this.initEditView();\n\t\t\t\t\t\tTTPromise.wait( 'BaseViewController', 'initialize', () => {\n\t\t\t\t\t\t\t$this.setSelectTemplate( data.config );\n\t\t\t\t\t\t\t$this.edit_view_ui_dic['template'].setValue( data.config?.template );\n\t\t\t\t\t\t\tLocalCacheData.setAutoFillData( null );\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.api_user_report.getUserReportData( {\n\t\t\t\t\t\t\tfilter_data: {\n\t\t\t\t\t\t\t\tscript: $this.script_name,\n\t\t\t\t\t\t\t\tis_default: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\t\tvar data = result.getResult();\n\t\t\t\t\t\t\t\t$this.current_saved_report = {};\n\t\t\t\t\t\t\t\tif ( data && data.length > 0 ) {\n\t\t\t\t\t\t\t\t\t$this.current_saved_report = data[0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$this.current_edit_record = {};\n\t\t\t\t\t\t\t\t$this.visible_report_values = {};\n\t\t\t\t\t\t\t\t$this.initEditView();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} );\n\t\t} );\n\t}\n\n\t// #2838 Commenting this out, as it was only needed for ReportView.vue. Basically a revert of 44b853d92b9b45b58aa2c1723537fb408afffe8f\n\t// Currently we are going to go back to the old existing logic of loading each report html, and keeping the contextmenu in the old place, as the Vue template had too many bugs for now, and does not take into account form_setup and custom colummns etc.\n\t// Future work can re-include this when we consolidate the html templates into Vue templates.\n\t// initEditViewUI( view_id, edit_view_file_name ) {\n\t// \tGlobal.setUINotready();\n\t// \tTTPromise.add( 'init', 'init' );\n\t// \tTTPromise.wait();\n\t//\n\t// \tvar $this = this;\n\t// \tif ( this.edit_view ) {\n\t// \t\tthis.edit_view.remove();\n\t// \t}\n\t//\n\t// \t// this.edit_view = $( Global.loadViewSource( view_id, edit_view_file_name, null, true ) );\n\t// \tthis.edit_view = Global.contentContainer().find('.report-view.edit-view');\n\t//\n\t// \t//#2353 - commented out because it breaks subgrid menus in the employee qualifications tab\n\t// \t//calls the context menu click every time that the edit view is clicked.\n\t// \t// this.edit_view.unbind( 'click' ).bind( 'click', function() {\n\t// \t// \t$this.selectContextMenu();\n\t// \t// } );\n\t//\n\t// \tthis.edit_view_tab = $( this.edit_view.find( '.edit-view-tab-bar' ) );\n\t// \tthis.edit_view_tab.css( 'opacity', 0 );\n\t//\n\t// \t//Give edt view tab a id, so we can load it when put right click menu on it\n\t// \tthis.edit_view_tab.attr( 'id', this.ui_id + '_edit_view_tab' );\n\t//\n\t// \tthis.setTabOVisibility( false );\n\t//\n\t// \tthis.edit_view_tab = this.edit_view_tab.tabs( {\n\t// \t\tactivate: function( e, ui ) {\n\t// \t\t\tif ( !$this.edit_view_tab || !$this.edit_view_tab.is( ':visible' ) ) {\n\t// \t\t\t\treturn;\n\t// \t\t\t}\n\t//\n\t// \t\t\t$this.onTabShow( e, ui );\n\t// \t\t\tGlobal.triggerAnalyticsTabs( e, ui );\n\t// \t\t}\n\t// \t} );\n\t//\n\t// \tthis.edit_view_tab.off( 'click' ).on( 'click', function( e ) {\n\t// \t\t$this.onTabIndexChange( e );\n\t// \t} );\n\t//\n\t// \t// Global.contentContainer().append( this.edit_view );\n\t//\n\t// \tthis.initRightClickMenu( RightClickMenuType.EDITVIEW );\n\t//\n\t// \tthis.buildEditViewUI();\n\t//\n\t// \t$this.setEditViewTabHeight();\n\t// \tTTPromise.wait( 'init', 'init', function() {\n\t// \t\t$this.edit_view.css( 'opacity', 1 ); // To prevent a FOUC from empty form to populated.\n\t// \t\t$( '.edit-view-tab-bar' ).css( 'opacity', 1 );\n\t// \t} );\n\t// }\n\n\tsetDefaultConfigData() {\n\n\t\tvar $this = this;\n\t\tthis.api.getOtherConfig( {\n\t\t\tonResult: function( config_result ) {\n\n\t\t\t\tif ( $this.current_saved_report &&\n\t\t\t\t\t$this.current_saved_report.data &&\n\t\t\t\t\t$this.current_saved_report.data.config &&\n\t\t\t\t\t$this.current_saved_report.data.config.other\n\t\t\t\t) {\n\t\t\t\t\t//do nothing\n\t\t\t\t} else {\n\n\t\t\t\t\tconfig_result = config_result.getResult();\n\t\t\t\t\tfor ( var key in config_result ) {\n\t\t\t\t\t\tif ( $this.edit_view_ui_dic.hasOwnProperty( key ) ) {\n\t\t\t\t\t\t\t$this.edit_view_ui_dic[key].setValue( config_result[key] );\n\t\t\t\t\t\t\t$this.current_edit_record[key] = config_result[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\tthis.api.getChartConfig( {\n\t\t\tonResult: function( config_result ) {\n\n\t\t\t\tif ( $this.current_saved_report &&\n\t\t\t\t\t$this.current_saved_report.data &&\n\t\t\t\t\t$this.current_saved_report.data.config &&\n\t\t\t\t\t$this.current_saved_report.data.config.chart\n\t\t\t\t) {\n\t\t\t\t\t//do nothing\n\t\t\t\t} else {\n\n\t\t\t\t\tconfig_result = config_result.getResult();\n\t\t\t\t\tfor ( var key in config_result ) {\n\t\t\t\t\t\tif ( $this.edit_view_ui_dic.hasOwnProperty( key ) ) {\n\t\t\t\t\t\t\t$this.edit_view_ui_dic[key].setValue( config_result[key] );\n\t\t\t\t\t\t\t$this.current_edit_record[key] = config_result[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetTabStatus() {\n\t\t//Handle most cases that one tab and on audit tab\n\t}\n\n\t//Call this from setEditViewData\n\tinitTabData() {\n\t}\n\n\tgetReportData( callBack ) {\n\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\targs.filter_data = { script: this.script_name };\n\t\tthis.api_user_report.getUserReportData( args, {\n\t\t\tonResult: function( result ) {\n\n\t\t\t\tvar res_data = result.getResult();\n\t\t\t\t$this.pager_data = result.getPagerData();\n\n\t\t\t\tcallBack( res_data );\n\t\t\t}\n\t\t} );\n\t}\n\n\tinitOptions( callBack ) {\n\t\tvar options = [\n\t\t\t{ option_name: 'page_orientation' },\n\t\t\t{ option_name: 'font_size' },\n\t\t\t{ option_name: 'auto_refresh' },\n\t\t\t{ option_name: 'chart_display_mode' },\n\t\t\t{ option_name: 'chart_type' },\n\t\t\t{ option_name: 'templates' },\n\t\t\t{ option_name: 'setup_fields' }\n\n\t\t];\n\n\t\tthis.initDropDownOptions( options, function( result ) {\n\t\t\tcallBack( result ); // First to initialize drop down options, and then to initialize edit view UI.\n\t\t} );\n\t}\n\n\t//Call this from setEditViewData\n\tinitEditViewData() {\n\t\tvar $this = this;\n\n\t\t//Set Navigation Awesomebox\n\t\tvar navigation_div = this.edit_view.find( '.navigation-div' );\n\t\tnavigation_div.css( 'display', 'block' );\n\n\t\t//init navigation only when open edit view\n\t\tif ( !this.navigation.getSourceData() ) {\n\t\t\tthis.navigation.setSourceData( this.saved_report_array );\n\t\t\tif ( LocalCacheData.getLoginUserPreference() ) {\n\t\t\t\tthis.navigation.setRowPerPage( LocalCacheData.getLoginUserPreference().items_per_page );\n\t\t\t}\n\t\t\tthis.navigation.setPagerData( this.pager_data );\n\n\t\t\tvar default_args = {};\n\t\t\tdefault_args.filter_data = { script: this.script_name };\n\t\t\tthis.navigation.setDefaultArgs( default_args );\n\t\t}\n\n\t\tthis.navigation.setValue( this.current_saved_report );\n\t\tthis.setUIWidgetFieldsToCurrentEditRecord();\n\t\tthis.setNavigationArrowsEnabled();\n\t\t// Create this function alone because of the column value of view is different from each other, some columns need to be handle specially. and easily to rewrite this function in sub-class.\n\t\tthis.setCurrentEditRecordData();\n\n\t\t//Can't hide navigation box if there aren't any saved reports, without having to make an API call and count how many saved reports there are first, which kind of defeats the purpose.\n\n\t\t//Init *Please save this record before modifying any related data* box\n\t\tthis.edit_view.find( '.save-and-continue-div' ).SaveAndContinueBox( { related_view_controller: this } );\n\t\tthis.edit_view.find( '.save-and-continue-div' ).css( 'display', 'none' );\n\t}\n\n\tonRightOrLeftArrowClickCallBack( next_select_item ) {\n\t\tthis.navigation.setValue( next_select_item );\n\t\tthis.current_saved_report = next_select_item;\n\t\tthis.current_edit_record = {};\n\t\tthis.visible_report_values = {};\n\t\tthis.initEditView();\n\t}\n\n\t//Call this after initEditViewUI, usually after current_edit_record is set\n\tinitEditView() {\n\t\tvar $this = this;\n\t\tvar current_url = window.location.href;\n\t\tif ( current_url.indexOf( '&sm' ) > 0 ) {\n\t\t\tcurrent_url = current_url.substring( 0, current_url.indexOf( '&sm' ) );\n\t\t}\n\t\tif ( $this.current_saved_report && $this.current_saved_report.id ) {\n\n\t\t\tcurrent_url = current_url + '&sm=' + $this.viewId + '&sid=' + $this.current_saved_report.id;\n\n\t\t} else {\n\t\t\tcurrent_url = current_url + '&sm=' + $this.viewId;\n\t\t}\n\n\t\tif ( window.location.href.indexOf( '&tab=' ) > 0 ) {\n\t\t\tvar tab_name = window.location.href;\n\t\t\ttab_name = tab_name.substr( ( window.location.href.indexOf( '&tab=' ) + 5 ) ); //get the selected tab name\n\t\t\ttab_name = tab_name.substr( 0, window.location.href.indexOf( '&' ) ); // incase there are subsequent arguments after the tab argument\n\t\t\tcurrent_url += '&tab=' + tab_name;\n\t\t}\n\n\t\tGlobal.setURLToBrowser( current_url );\n\n\t\tsuper.initEditView();\n\t}\n\n\tsetNavigation() {\n\n\t\tvar $this = this;\n\n\t\tthis.navigation.off( 'formItemChange' ).on( 'formItemChange', function( e, target ) {\n\t\t\tvar next_select_item_id = target.getValue();\n\t\t\t$this.edit_view_error_ui_dic = {};\n\t\t\tif ( !next_select_item_id || next_select_item_id === TTUUID.zero_id ) {\n\t\t\t\t$this.current_saved_report = null;\n\t\t\t\t$this.saved_report_array = [];\n\t\t\t\t$this.current_edit_record = {};\n\t\t\t\t$this.visible_report_values = {};\n\n\t\t\t\t$this.do_validate_after_create_ui = true;\n\t\t\t\t$this.initEditView();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( next_select_item_id !== $this.current_edit_record.id ) {\n\t\t\t\t$this.current_saved_report = target.getValue( true );\n\t\t\t\t$this.current_edit_record = {};\n\t\t\t\t$this.visible_report_values = {};\n\n\t\t\t\t$this.initEditView();\n\t\t\t}\n\t\t\tGlobal.triggerAnalyticsEditViewNavigation( 'navigation', $this.viewId );\n\t\t} );\n\t}\n\n\tinitSubCustomColumnView( callBack ) {\n\t\tvar $this = this;\n\n\t\t$this.sub_view_mode = true;\n\n\t\tif ( this.sub_custom_column_view_controller ) {\n\t\t\t$this.sub_custom_column_view_controller.edit_only_mode = false;\n\t\t\t$this.sub_custom_column_view_controller.buildContextMenu( true );\n\t\t\t$this.sub_custom_column_view_controller.parent_value = this.script_name;\n\t\t\t$this.sub_custom_column_view_controller.initData(); //Init data in this parent view\n\t\t\treturn;\n\t\t}\n\n\t\tGlobal.loadViewSource( 'CustomColumn', 'CustomColumnViewController.js', function() {\n\t\t\tvar tab = $this.edit_view_tab.find( '#tab_custom_columns' );\n\n\t\t\tvar firstColumn = tab.find( '.first-column-sub-view' );\n\n\t\t\tTTPromise.add( 'SubCustomColumnView', 'init' );\n\t\t\tTTPromise.wait( 'SubCustomColumnView', 'init', function() {\n\t\t\t\tfirstColumn.css( 'opacity', '1' );\n\t\t\t} );\n\n\t\t\tfirstColumn.css( 'opacity', '0' ); //Hide the grid while its loading/sizing.\n\n\t\t\tGlobal.trackView( 'Sub' + 'ReportSchedule' + 'View' );\n\t\t\tCustomColumnViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_custom_column_view_controller = subViewController;\n\t\t\t$this.sub_custom_column_view_controller.parent_key = 'script';\n\t\t\t$this.sub_custom_column_view_controller.parent_value = $this.script_name;\n\t\t\t$this.sub_custom_column_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_custom_column_view_controller.edit_only_mode = false;\n\t\t\t$this.sub_custom_column_view_controller.sub_view_mode = true;\n\n\t\t\t//init complete\n\t\t\tif ( callBack ) {\n\t\t\t\tcallBack(); // Call back decide call init or not\n\t\t\t}\n\t\t\t$this.sub_custom_column_view_controller.initData(); //Init data in this parent view\n\t\t}\n\t}\n\n\tonSavedReportDelete() {\n\t\tthis.refreshNav();\n\t}\n\n\tinitSubSavedReportView( callBack ) {\n\t\tvar $this = this;\n\n\t\t$this.sub_view_mode = true;\n\n\t\tif ( this.sub_saved_report_view_controller ) {\n\t\t\t$this.sub_saved_report_view_controller.edit_only_mode = false;\n\t\t\t$this.sub_saved_report_view_controller.buildContextMenu( true );\n\t\t\t$this.sub_saved_report_view_controller.parent_value = this.script_name;\n\t\t\t$this.sub_saved_report_view_controller.initData(); //Init data in this parent view\n\t\t\treturn;\n\t\t}\n\n\t\tGlobal.loadViewSource( 'SavedReport', 'SavedReportViewController.js', function() {\n\t\t\tvar tab = $this.edit_view_tab.find( '#tab_saved_reports' );\n\n\t\t\tvar firstColumn = tab.find( '.first-column-sub-view' );\n\n\t\t\tTTPromise.add( 'SubSavedReportView', 'init' );\n\t\t\tTTPromise.wait( 'SubSavedReportView', 'init', function() {\n\t\t\t\tfirstColumn.css( 'opacity', '1' );\n\t\t\t} );\n\n\t\t\tfirstColumn.css( 'opacity', '0' ); //Hide the grid while its loading/sizing.\n\n\t\t\tGlobal.trackView( 'Sub' + 'ReportSchedule' + 'View' );\n\t\t\tSavedReportViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\n\t\t\t$this.sub_saved_report_view_controller = subViewController;\n\t\t\t$this.sub_saved_report_view_controller.parent_key = 'script';\n\t\t\t$this.sub_saved_report_view_controller.parent_value = $this.script_name;\n\t\t\t$this.sub_saved_report_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_saved_report_view_controller.edit_only_mode = false;\n\t\t\t$this.sub_saved_report_view_controller.sub_view_mode = true;\n\n\t\t\t//init complete\n\t\t\tif ( callBack ) {\n\t\t\t\tcallBack(); // Call back decide call init or not\n\t\t\t} else {\n\t\t\t\t$this.sub_saved_report_view_controller.initData(); //Init data in this parent view\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\t\tvar $this = this;\n\n\t\tthis.initEditViewTabs(); // Fixes: Report tabs not initializing in reports, as this code was moved around in BaseVC to initEditViewTabs, which never gets called in Reports because setTabModel() is not used in Reports, which calls this. See 766392fed39460764542611f3ab4df1deb518cf1\n\n\t\tvar navigation_div = this.edit_view.find( '.navigation-div' );\n\t\tvar label = navigation_div.find( '.navigation-label' );\n\t\tvar left_click = navigation_div.find( '.left-click' );\n\t\tvar right_click = navigation_div.find( '.right-click' );\n\t\tvar navigation_widget_div = navigation_div.find( '.navigation-widget-div' );\n\t\tthis.initNavigationWidget( navigation_widget_div );\n\t\tleft_click.attr( 'src', Global.getRealImagePath( 'images/left_arrow.svg' ) );\n\t\tright_click.attr( 'src', Global.getRealImagePath( 'images/right_arrow.svg' ) );\n\t\tlabel.text( this.navigation_label );\n\n\t\tthis.edit_view_close_icon = this.edit_view.find( '.close-icon' );\n\t\tthis.edit_view_close_icon.hide();\n\t\tthis.edit_view_close_icon.click( function() {\n\t\t\t$this.onCloseIconClick();\n\t\t} );\n\n\t\tvar tab_0_label = this.edit_view.find( 'a[ref=tab_report]' );\n\t\tvar tab_1_label = this.edit_view.find( 'a[ref=tab_setup]' );\n\t\tvar tab_2_label = this.edit_view.find( 'a[ref=tab_chart]' );\n\n\t\tif ( this.include_form_setup ) {\n\t\t\t// TODO: #2838 BIG todo here for when we convert back to ReportView.vue, as that does not handle the form setup field yet in the all-in-one template.\n\t\t\tvar tab_3_label = this.edit_view.find( 'a[ref=tab_form_setup]' );\n\t\t\tvar tab_4_label = this.edit_view.find( 'a[ref=tab_custom_columns]' );\n\t\t\tvar tab_5_label = this.edit_view.find( 'a[ref=tab_saved_reports]' );\n\n\t\t\ttab_0_label.text( $.i18n._( 'Report' ) );\n\t\t\ttab_1_label.text( $.i18n._( 'Setup' ) );\n\t\t\ttab_2_label.text( $.i18n._( 'Chart' ) );\n\t\t\ttab_3_label.text( $.i18n._( 'Form Setup' ) );\n\t\t\ttab_4_label.text( $.i18n._( 'Custom Columns' ) );\n\t\t\ttab_5_label.text( $.i18n._( 'Saved Reports' ) );\n\n\t\t\tthis.buildFormSetupUI();\n\t\t} else {\n\t\t\tvar tab_3_label = this.edit_view.find( 'a[ref=tab_custom_columns]' );\n\t\t\tvar tab_4_label = this.edit_view.find( 'a[ref=tab_saved_reports]' );\n\n\t\t\ttab_0_label.text( $.i18n._( 'Report' ) );\n\t\t\ttab_1_label.text( $.i18n._( 'Setup' ) );\n\t\t\ttab_2_label.text( $.i18n._( 'Chart' ) );\n\t\t\ttab_3_label.text( $.i18n._( 'Custom Columns' ) );\n\t\t\ttab_4_label.text( $.i18n._( 'Saved Reports' ) );\n\t\t}\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUserReportData,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user_report_data',\n\t\t\tdefault_args: { filter_data: { script: this.script_name } },\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true, //Required in case there are saved reports but none of them are the default.\n\t\t\talways_search_full_columns: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Making sure that this.saved_report_array is not empty, otherwise navigation arrows will not be enabled on first opening even if there are other reports.\n\t\tif ( this.saved_report_array == null ) {\n\t\t\tthis.navigation.setSourceData( null );\n\t\t\t$this.getReportData( function( result ) {\n\t\t\t\tif ( result && result.length > 0 ) {\n\t\t\t\t\t$this.saved_report_array = result;\n\t\t\t\t} else {\n\t\t\t\t\t$this.saved_report_array = [];\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t//Tab 0 start\n\n\t\tvar tab_report = this.edit_view_tab.find( '#tab_report' );\n\n\t\tvar tab0_column1 = tab_report.find( '.first-column' );\n\n\t\t// Template\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'template', set_empty: true } );\n\t\tform_item_input.setSourceData( $this.templates_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Template' ), form_item_input, tab0_column1 );\n\n\t\t//Tab 1 start\n\t\tvar tab_setup = this.edit_view_tab.find( '#tab_setup' );\n\t\tvar tab1_column1 = tab_setup.find( '.first-column' );\n\n\t\t//Fields\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tallow_multiple_selection: true,\n\t\t\tkey: 'value',\n\t\t\tlayout_name: 'global_option_column',\n\t\t\tallow_drag_to_order: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'setup_field'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Fields' ), form_item_input, tab1_column1, '' );\n\t\tthis.setup_fields_array.shift();\n\t\tform_item_input.setSourceData( this.setup_fields_array );\n\n\t\t//Page Orientation\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'page_orientation', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.page_orientation_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Page Orientation' ), form_item_input, tab1_column1 );\n\n\t\t//Font Size\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'font_size', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.font_size_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Font Size' ), form_item_input, tab1_column1 );\n\n\t\t//Disable Grand Total\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'disable_grand_total' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Disable Grand Total' ), form_item_input, tab1_column1 );\n\n\t\t//Show Duplicate Values\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'show_duplicate_values' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Show Duplicate Values' ), form_item_input, tab1_column1 );\n\n\t\t//Auto-Refresh\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'auto_refresh', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.auto_refresh_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Auto-Refresh' ), form_item_input, tab1_column1 );\n\n\t\t//Maximum Pages\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'maximum_page_limit', width: 50 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Maximum Pages' ), form_item_input, tab1_column1 );\n\n\t\t//Tab 2 start\n\t\tvar tab_chart = this.edit_view_tab.find( '#tab_chart' );\n\t\tvar tab2_column1 = tab_chart.find( '.first-column' );\n\n\t\t//Enable\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Enable' ), form_item_input, tab2_column1, '' );\n\n\t\t//Display\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'display_mode', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.chart_display_mode_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Display' ), form_item_input, tab2_column1 );\n\n\t\t//Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'type', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.chart_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab2_column1 );\n\n\t\t//Chart Sub-Totals\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'include_sub_total' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Chart Sub-Totals' ), form_item_input, tab2_column1 );\n\n\t\t//Consistent Axis Scales\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'axis_scale_static' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Consistent Axis Scales' ), form_item_input, tab2_column1 );\n\n\t\t//Consistent Axis Scales\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'combine_columns' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Combine Columns' ), form_item_input, tab2_column1, '' );\n\n\t\tTTPromise.resolve( 'init', 'init' );\n\t}\n\n\tbuildFormSetupUI() {\n\t\t//Need always override\n\t}\n\n\tbuildSelectTemplateData() {\n\t\tvar template = this.current_saved_report.data.template;\n\t\tvar config = this.current_saved_report.data.config;\n\n\t\tvar result = {};\n\n\t\tfor ( var i = 0; i < template.length; i++ ) {\n\t\t\tvar item = template[i];\n\t\t\t// if ( item === 'sort' ) {\n\t\t\t// \tresult[item] = config[item + '_'];\n\t\t\t// } else {\n\t\t\t\tresult[item] = config[item];\n\t\t\t// }\n\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/* jshint ignore:start */\n\tsetCurrentEditRecordData() {\n\n\t\tvar $this = this;\n\t\tif ( LocalCacheData.default_filter_for_next_open_view ) {\n\n\t\t\tthis.do_validate_after_create_ui = false;\n\t\t\tthis.current_edit_record['template'] = LocalCacheData.default_filter_for_next_open_view.template;\n\t\t\t$this.onTemplateChange( this.current_edit_record['template'] );\n\t\t\tLocalCacheData.default_filter_for_next_open_view = null;\n\n\t\t} else {\n\t\t\tif ( this.current_saved_report && this.current_saved_report.data ) {\n\t\t\t\tvar select_template_data = this.buildSelectTemplateData();\n\t\t\t\tthis.setSelectTemplate( select_template_data );\n\n\t\t\t\tthis.current_edit_record['template'] = this.current_saved_report.data.config.template;\n\n\t\t\t\tfor ( var other_key in this.current_saved_report.data.config.other ) {\n\n\t\t\t\t\tif ( !this.current_saved_report.data.config.other.hasOwnProperty( other_key ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.current_edit_record[other_key] = this.current_saved_report.data.config.other[other_key];\n\t\t\t\t}\n\n\t\t\t\tfor ( var chart_key in this.current_saved_report.data.config.chart ) {\n\n\t\t\t\t\tif ( !this.current_saved_report.data.config.chart.hasOwnProperty( chart_key ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.current_edit_record[chart_key] = this.current_saved_report.data.config.chart[chart_key];\n\t\t\t\t}\n\t\t\t} else if ( !LocalCacheData.getAutoFillData() ) { //If no auto fill data, use default template\n\n\t\t\t\t////If no any saved report, use default setup fields\n\t\t\t\t//var default_setup_fields = this.api.getOptions( 'default_setup_fields', {async: false} );\n\t\t\t\t//$this.current_edit_record.setup_field = default_setup_fields.getResult();\n\t\t\t\t//$this.buildReportUIBaseOnSetupFields();\n\t\t\t\tthis.do_validate_after_create_ui = false;\n\t\t\t\tthis.onTemplateChange( this.templates_array[1].id );\n\t\t\t\tthis.current_edit_record['template'] = this.templates_array[1].id;\n\t\t\t}\n\t\t}\n\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\n\t\t\tif ( !this.current_edit_record.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'user_id':\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'country': //popular case\n\t\t\t\t\t\tthis.setCountryValue( widget, key );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tif ( this.include_form_setup ) {\n\t\t\tthis.api.getCompanyFormConfig( {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\tvar res_Data = result.getResult();\n\t\t\t\t\tif ( res_Data.length == 1 && res_Data.hasOwnProperty( '0' ) && res_Data[0] === false ) {\n\t\t\t\t\t\t//There seem to be cases where the form setup data is somehow saved as the following, which should be ignored, otherwise when trying to re-save the form setup data it doesn't get uploaded to the server because 0 => false.\n\t\t\t\t\t\t//   array(1) {\n\t\t\t\t\t\t//     [0]=>\n\t\t\t\t\t\t//     bool(false)\n\t\t\t\t\t\t//   }\n\t\t\t\t\t\t//\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.setFormSetupData( res_Data );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\n\t\tthis.setDefaultConfigData();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\t/* jshint ignore:end */\n\n\t//set tab 0 visible after all data set done. This be hide when init edit view data\n\tsetEditViewDataDone() {\n//\t\tLocalCacheData.current_doing_context_action = '';\n\t\tthis.setTabOVisibility( true );\n\n\t\tif ( this.do_validate_after_create_ui ) {\n\t\t\tthis.validate();\n\t\t\tthis.do_validate_after_create_ui = false;\n\t\t}\n\n\t\tthis.initRightClickMenuForViewButton();\n\n\t\t//Set url selected tab.\n\t\tif ( window.location.href.indexOf( '&tab=' ) > 0 ) {\n\t\t\tvar tab_name = window.location.href;\n\t\t\ttab_name = tab_name.substr( ( window.location.href.indexOf( '&tab=' ) + 5 ) ); //get the selected tab name\n\t\t\ttab_name = tab_name.substr( 0, window.location.href.indexOf( '&' ) ); // incase there are subsequent arguments after the tab argument\n\t\t\tvar my_tabs = this.edit_view_tab.find( '.edit-view-tab-bar-label' ).children();\n\n\t\t\tfor ( var n = 0; n < my_tabs; n++ ) {\n\t\t\t\tif ( $( my_tabs[n] ).find( 'a' ).length > 0 && tab_name == $( my_tabs[n] ).find( 'a' ).html().replace( /\\/|\\s+/g, '' ) ) {\n\t\t\t\t\t$( my_tabs[n] ).find( 'a' ).click();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tTTPromise.resolve( 'init', 'init' );\n\t\t$( '.edit-view-tab-bar' ).css( 'opacity', 1 );\n\t}\n\n\t//This is just calling into the base anyway, so commented out for now.\n\t// validateResult( result ) {\n\t// \tsuper.validateResult( result );\n\t// },\n\n\tinitRightClickMenuForViewButton() {\n\t\tvar $this = this;\n\t\tvar selector = '#viewHTMLIcon';\n\t\tif ( $( selector ).length == 0 ) {\n\t\t\treturn;\n\t\t}\n\t\tvar items = this.getViewButtonRightClickItems();\n\n\t\tif ( !items || $.isEmptyObject( items ) ) {\n\t\t\treturn;\n\t\t}\n\t\t$.contextMenu( 'destroy', selector );\n\t\t$.contextMenu( {\n\t\t\tselector: selector,\n\t\t\tcallback: function( key, options ) {\n\t\t\t\t$this.onContextMenuClick( null, key );\n\t\t\t},\n\n\t\t\tonContextMenu: function() {\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\titems: items,\n\t\t\tzIndex: 50\n\t\t} );\n\t}\n\n\tgetViewButtonRightClickItems() {\n\t\tvar $this = this;\n\t\tvar items = {};\n\t\titems['viewHTMLIcon'] = {\n\t\t\tname: $.i18n._( 'View' ), icon: 'viewHTMLIcon', disabled: function() {\n\t\t\t\treturn isDisabled();\n\t\t\t}\n\t\t};\n\t\titems['viewHTMLNewWindow'] = {\n\t\t\tname: $.i18n._( 'View (New Window)' ), icon: 'viewHTMLIcon', disabled: function() {\n\t\t\t\treturn isDisabled();\n\t\t\t}\n\t\t};\n\n\t\tfunction isDisabled() {\n\t\t\tif ( $( '#viewHTMLIcon' ).parent().hasClass( 'disable-image' ) ) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn items;\n\t}\n\n//\tonViewRightClick( key ) {\n//\t\t//TODO show view\n//\t\talert('dfdf');\n//\t},\n\n\t// Need always override if report has filter field\n\tonFormItemChangeProcessFilterField() {\n\t}\n\n\t//Shim method to allow override for classes that need their own onFormItemChange for a specific purpose ie payroll export reports\n\t//eg in payroll export, when export_type is changed, we need to execute code but also need the default behaviour of onFormItemChange.\n\tpreFormItemChange( target, doNotDoValidate ) {\n\t\treturn true;\n\t}\n\n\t/* jshint ignore:start */\n\tonFormItemChange( target, doNotDoValidate ) {\n\t\tthis.preFormItemChange( target ); //shim for child class\n\t\tvar $this = this;\n\t\tthis.setIsChanged( target );\n\t\tvar key = target.getField();\n\t\tvar time_period;\n\t\tvar skill_expiry_date;\n\t\tvar membership_renewal_date;\n\t\tvar license_expiry_date;\n\t\tvar education_graduate_date;\n\n\t\tif ( this.visible_report_widgets && ( this.visible_report_widgets[key] || key === 'start_date' || key === 'end_date' || key === 'pay_period_id' || key === 'pay_period_schedule_id' ) ) {\n\t\t\tif ( key === 'sort' ) {\n\t\t\t\tthis.visible_report_values[key] = target.getValue( true );\n\n\t\t\t} else if ( key.indexOf( 'time_period' ) >= 0 ) {\n\n\t\t\t\ttime_period = target.getValue();\n\n\t\t\t\tif ( !this.visible_report_values[key] || this.visible_report_values[key].time_period !== time_period ) {\n\t\t\t\t\tthis.visible_report_values[key] = { time_period: time_period };\n\t\t\t\t\tthis.onTimePeriodChange( target );\n\t\t\t\t}\n\n\t\t\t} else if ( key === 'filter' ) {\n\t\t\t\t//Always needs override\n\t\t\t\tthis.onFormItemChangeProcessFilterField( target, key );\n\n\t\t\t} else if ( key === 'start_date' || key === 'end_date' || key === 'pay_period_id' || key === 'pay_period_schedule_id' ) {\n\t\t\t\ttime_period = this.visible_report_values[target.attr( 'time_period_key' ) ? target.attr( 'time_period_key' ) : 'time_period'];\n\t\t\t\ttime_period[key] = target.getValue();\n\n\t\t\t} else if ( key === 'membership_renewal_date' ) {\n\t\t\t\tmembership_renewal_date = target.getValue();\n\t\t\t\tthis.visible_report_values[key] = { time_period: membership_renewal_date };\n\n\t\t\t\tthis.onMembershipRenewalDateChange( target );\n\t\t\t} else if ( key === 'start_date_1' || key === 'end_date_1' || key === 'pay_period_id_1' || key === 'pay_period_schedule_id_1' ) {\n\t\t\t\tmembership_renewal_date = this.visible_report_values['membership_renewal_date'];\n\t\t\t\tmembership_renewal_date[key.replace( '_1', '' )] = target.getValue();\n\n\t\t\t} else if ( key === 'skill_expiry_date' ) {\n\t\t\t\tskill_expiry_date = target.getValue();\n\t\t\t\tthis.visible_report_values[key] = { time_period: skill_expiry_date };\n\n\t\t\t\tthis.onSkillExpiryDate( target );\n\t\t\t} else if ( key === 'start_date_2' || key === 'end_date_2' || key === 'pay_period_id_2' || key === 'pay_period_schedule_id_2' ) {\n\t\t\t\tskill_expiry_date = this.visible_report_values['skill_expiry_date'];\n\t\t\t\tskill_expiry_date[key.replace( '_2', '' )] = target.getValue();\n\n\t\t\t} else if ( key === 'license_expiry_date' ) {\n\t\t\t\tlicense_expiry_date = target.getValue();\n\t\t\t\tthis.visible_report_values[key] = { time_period: license_expiry_date };\n\n\t\t\t\tthis.onLicenseExpiryDate( target );\n\t\t\t} else if ( key === 'start_date_3' || key === 'end_date_3' || key === 'pay_period_id_3' || key === 'pay_period_schedule_id_3' ) {\n\t\t\t\tlicense_expiry_date = this.visible_report_values['license_expiry_date'];\n\t\t\t\tlicense_expiry_date[key.replace( '_3', '' )] = target.getValue();\n\n\t\t\t} else if ( key === 'education_graduate_date' ) {\n\t\t\t\teducation_graduate_date = target.getValue();\n\t\t\t\tthis.visible_report_values[key] = { time_period: education_graduate_date };\n\n\t\t\t\tthis.onEducationGraduateDate( target );\n\t\t\t} else if ( key === 'start_date_4' || key === 'end_date_4' || key === 'pay_period_id_4' || key === 'pay_period_schedule_id_4' ) {\n\t\t\t\teducation_graduate_date = this.visible_report_values['education_graduate_date'];\n\t\t\t\teducation_graduate_date[key.replace( '_4', '' )] = target.getValue();\n\t\t\t} else {\n\t\t\t\tif ( target.hasClass( 't-checkbox' ) ) {\n\t\t\t\t\tthis.visible_report_values[key] = target.getValue();\n\t\t\t\t} else {\n\t\t\t\t\tvar value = target.getValue();\n\t\t\t\t\tif ( value && ( $.type( value ) !== 'array' || value.length > 0 ) && value != TTUUID.zero_id ) {\n\t\t\t\t\t\tthis.visible_report_values[key] = target.getValue();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete this.visible_report_values[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.current_edit_record[key] = target.getValue();\n\t\t}\n\n\t\tif ( key === 'template' ) {\n\t\t\t$this.onTemplateChange( this.current_edit_record[key] );\n\t\t\t$this.setEditMenu(); //clean error, set edit menu\n\t\t} else {\n\t\t\tif ( !doNotDoValidate ) {\n\t\t\t\tthis.validate();\n\t\t\t}\n\t\t}\n\n\t\tif ( this.include_form_setup && key === 3 ) {\n\t\t\tthis.form_setup_changed = true;\n\t\t}\n\t}\n\n\t/* jshint ignore:end */\n\n\t//Create first tab widget base on select template\n\tonTemplateChange( templateId ) {\n\t\tvar $this = this;\n\t\tthis.api.getTemplate( templateId, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t$this.setSelectTemplate( result_data );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetSelectTemplate( result_data ) {\n\t\tvar $this = this;\n\t\tvar result = Global.buildRecordArray( result_data );\n\n\t\tvar len = result.length;\n\t\tif ( $this.current_edit_record ) {\n\t\t\t$this.current_edit_record.setup_field = [];\n\t\t\t$this.visible_report_values = {};\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar item = result[i];\n\n\t\t\t\tif ( item.value === 'template' ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t$this.visible_report_values[item.value] = item.label; // set value to model\n\t\t\t\t$this.current_edit_record.setup_field.push( item.value );\n\n\t\t\t}\n\n\t\t\t$this.createUI( result );\n\t\t}\n\t}\n\n\tgetFieldLabel( field ) {\n\t\tvar len = this.setup_fields_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar setup_field = this.setup_fields_array[i];\n\t\t\tif ( setup_field.value === field ) {\n\t\t\t\treturn setup_field.label;\n\t\t\t}\n\t\t}\n\t}\n\n\t//Create widgets,\n\tcreateUI( uiModel ) {\n\n\t\tthis.cleanUI();\n\t\tvar $this = this;\n\t\tvar len = uiModel.length;\n\t\tvar tab_report = this.edit_view_tab.find( '#tab_report' );\n\t\tvar tab0_column1 = tab_report.find( '.first-column' );\n\t\tthis.edit_view_tabs[0] = [];\n\t\tthis.edit_view_tabs[0].push( tab0_column1 );\n\t\tthis.visible_report_widgets = {}; //report tab widgets\n\t\tthis.edit_view_form_item_dic = {}; //Only keep report tab form item\n\n\t\tthis.visible_report_widgets_order_fix = {};\n\n\t\tvar last_time_visible_values = this.visible_report_values;\n\n\t\tthis.visible_report_values = {};\n\n\t\tvar order_fix = 1001;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar model = uiModel[i];\n\n\t\t\tvar field = '';\n\t\t\tvar value = '';\n\n\t\t\t//Value, label object\n\t\t\tif ( model.value ) {\n\t\t\t\tfield = model.value;\n\n\t\t\t} else { //Mode is string\n\t\t\t\tfield = model;\n\t\t\t}\n\n\t\t\tvalue = last_time_visible_values[field];\n\t\t\tvar widget = this.getUIWidget( field );\n\n\t\t\t//Dont add field is it's not in setup fields.\n\t\t\tif ( !widget || !this.getFieldLabel( field ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t//Add widget first\n\t\t\tif ( field.indexOf( 'time_period' ) >= 0 ||\n\t\t\t\tfield === 'membership_renewal_date' ||\n\t\t\t\tfield === 'skill_expiry_date' ||\n\t\t\t\tfield == 'license_expiry_date' ||\n\t\t\t\tfield == 'education_graduate_date'\n\t\t\t) {\n\t\t\t\tthis.addEditFieldToColumn( $.i18n._( this.getFieldLabel( field ) ), widget, tab0_column1, '', null, true, true );\n\t\t\t\t$this.edit_view_form_item_dic[field].attr( 'id', 'report_' + field + '_div' );\n\n\t\t\t} else {\n\t\t\t\tthis.addEditFieldToColumn( $.i18n._( this.getFieldLabel( field ) ), widget, tab0_column1, '', null, true );\n\t\t\t}\n\n\t\t\t//Then set Value\n\t\t\tif ( value ) {\n\n\t\t\t\tif ( field.indexOf( 'time_period' ) >= 0 ) {\n\t\t\t\t\twidget.setValue( value['time_period'] ); //inside time_period field, the key always be tiem_period\n\t\t\t\t\t$this.onTimePeriodChange( widget, value );\n\t\t\t\t} else if ( field === 'membership_renewal_date' ) {\n\t\t\t\t\twidget.setValue( value.time_period );\n\t\t\t\t\t$this.onMembershipRenewalDateChange( widget, value );\n\t\t\t\t} else if ( field === 'skill_expiry_date' ) {\n\t\t\t\t\twidget.setValue( value.time_period );\n\t\t\t\t\t$this.onSkillExpiryDate( widget, value );\n\t\t\t\t} else if ( field === 'license_expiry_date' ) {\n\t\t\t\t\twidget.setValue( value.time_period );\n\t\t\t\t\t$this.onLicenseExpiryDate( widget, value );\n\t\t\t\t} else if ( field === 'education_graduate_date' ) {\n\t\t\t\t\twidget.setValue( value.time_period );\n\t\t\t\t\t$this.onEducationGraduateDate( widget, value );\n\t\t\t\t} else if ( field === 'filter' ) {\n\t\t\t\t\t$this.setFilterValue( widget, value );\n\t\t\t\t} else if ( field === 'sort' ) {\n\t\t\t\t\twidget.setValue( value );\n\t\t\t\t} else {\n\t\t\t\t\twidget.setValue( value );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// then init source options\n\n\t\t\tthis.initSourceData( field, widget );\n\n\t\t\tdelete this.current_edit_record[field];\n\n\t\t\tif ( widget.hasClass( 't-checkbox' ) ) {\n\t\t\t\tthis.visible_report_values[field] = value;\n\t\t\t} else if ( value ) {\n\t\t\t\tthis.visible_report_values[field] = value;\n\t\t\t}\n\n\t\t\tthis.visible_report_widgets[field] = widget;\n\n\t\t\tthis.visible_report_widgets_order_fix[field] = order_fix;\n\n\t\t\torder_fix = order_fix + 1;\n\n\t\t}\n\n\t\tthis.setEditViewWidgetsMode();\n\t\tthis.need_refresh_display_columns = false;\n\t\tthis.editFieldResize( 0 );\n\t}\n\n\t// onTabIndexChange( e, ui ) {\n\t//\n\t// },\t// onTabIndexChange: function( e, ui ) {\n\t//\n\t// },\n\t/* jshint ignore:start */\n\tonTabShow( e ) {\n\t\tvar $this = this;\n\t\tvar key = $( e.target ).tabs( 'option', 'active' );\n\n\t\tthis.editFieldResize( key );\n\n\t\tif ( !this.current_edit_record ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar last_index = this.getEditViewTabIndex();\n\n\t\tif ( !this.include_form_setup ) {\n\t\t\tif ( ( last_index === 1 || this.need_refresh_display_columns ) && key === 0 ) {\n\t\t\t\tthis.buildReportUIBaseOnSetupFields();\n\t\t\t\tthis.buildContextMenu( true );\n\t\t\t\tthis.setEditMenu();\n\t\t\t} else if ( key === 1 ) {\n\t\t\t\tthis.edit_view_ui_dic.setup_field.setValue( this.current_edit_record.setup_field );\n\t\t\t\tif ( Global.getProductEdition() == 10 ) {\n\t\t\t\t\tthis.edit_view_ui_dic.auto_refresh.parent().parent().css( 'display', 'none' );\n\t\t\t\t}\n\t\t\t\tthis.buildContextMenu( true );\n\t\t\t\tthis.setEditMenu();\n\t\t\t} else if ( key === 2 ) {\n\t\t\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_chart' ).find( '.first-column' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\t\t\t\t} else {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_chart' ).find( '.first-column' ).css( 'display', 'none' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\t\t\t\t}\n\t\t\t} else if ( key === 3 ) {\n\t\t\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_custom_columns' ).find( '.first-column-sub-view' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\t\t\t\t\tthis.initSubCustomColumnView();\n\t\t\t\t} else {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_custom_columns' ).find( '.first-column-sub-view' ).css( 'display', 'none' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\n\t\t\t\t}\n\n\t\t\t} else if ( key === 4 ) {\n\t\t\t\tthis.initSubSavedReportView();\n\t\t\t} else {\n\t\t\t\tthis.buildContextMenu( true );\n\t\t\t\tthis.setEditMenu();\n\t\t\t}\n\t\t} else {\n\t\t\tif ( ( last_index === 1 || this.need_refresh_display_columns ) && key === 0 ) {\n\t\t\t\tthis.buildReportUIBaseOnSetupFields();\n\t\t\t\tthis.buildContextMenu( true );\n\t\t\t\tthis.setEditMenu();\n\t\t\t} else if ( key === 1 ) {\n\t\t\t\tthis.edit_view_ui_dic.setup_field.setValue( this.current_edit_record.setup_field );\n\t\t\t\tif ( Global.getProductEdition() == 10 ) {\n\t\t\t\t\tthis.edit_view_ui_dic.auto_refresh.parent().parent().css( 'display', 'none' );\n\t\t\t\t}\n\t\t\t\tthis.buildContextMenu( true );\n\t\t\t\tthis.setEditMenu();\n\t\t\t} else if ( key === 2 ) {\n\t\t\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_chart' ).find( '.first-column' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\t\t\t\t} else {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_chart' ).find( '.first-column' ).css( 'display', 'none' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\t\t\t\t}\n\t\t\t} else if ( key === 4 ) {\n\t\t\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_form_setup' ).find( '.first-column-sub-view' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\t\t\t\t\tthis.initSubCustomColumnView();\n\t\t\t\t} else {\n\t\t\t\t\tthis.edit_view_tab.find( '#tab_form_setup' ).find( '.first-column-sub-view' ).css( 'display', 'none' );\n\t\t\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\n\t\t\t\t}\n\t\t\t} else if ( key === 5 ) {\n\t\t\t\tthis.initSubSavedReportView();\n\t\t\t} else {\n\t\t\t\tthis.buildContextMenu( true );\n\t\t\t\tthis.setEditMenu();\n\t\t\t}\n\n\t\t\tthis.checkFormSetupSaved( last_index );\n\n\t\t}\n\n\t\tif ( key === 0 ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\t/**\n\t * Copied to ROEViewController as it doesn't share this base\n\t * FIXME: might need to go into BaseViewController eventually\n\t * @param label\n\t */\n\tcheckFormSetupSaved( last_index, label ) {\n\t\tvar $this = this;\n\n\t\tif ( label == undefined ) {\n\t\t\tlabel = $.i18n._( 'Form Setup' );\n\t\t}\n\n\t\tif ( last_index === 3 && this.form_setup_changed ) {\n\t\t\t$this.form_setup_changed = false;\n\t\t\tTAlertManager.showConfirmAlert( $.i18n._( 'You have modified' ) + ' ' + label + ' ' + $.i18n._( 'data without saving, would you like to save your data now?' ), '', function( flag ) {\n\t\t\t\tif ( flag ) {\n\t\t\t\t\t$this.onSaveSetup( label );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\t/* jshint ignore:end */\n\tcleanUI() {\n\t\tfor ( var key in this.edit_view_form_item_dic ) {\n\t\t\tif ( !this.edit_view_form_item_dic.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar html_item = this.edit_view_form_item_dic[key];\n\n\t\t\t//Check if its a separator with a key of separated_X and skip removing it if it is.\n\t\t\t// FIXME: Would be nice to get a better way to detect a separator widget.\n\t\t\tif ( typeof html_item.getField === 'undefined' && key.indexOf( 'separated_' ) != -1 ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\thtml_item.remove();\n\t\t}\n\n\t\t//Error: TypeError: this.edit_view_tab is null in /interface/html5/views/reports/ReportBaseViewController.js?v=8.0.4-20150320-094021 line 1100\n\t\tif ( this.edit_view_tab ) {\n\t\t\tvar tab_report = this.edit_view_tab.find( '#tab_report' );\n\n\t\t\tvar tab0_column1 = tab_report.find( '.first-column' );\n\n\t\t\tvar clear_both_div = tab0_column1.find( '.clear-both-div' );\n\n\t\t\tclear_both_div.remove();\n\t\t}\n\t\t$( '.errortip-box' ).remove();\n\t\t$( '.errortip-box' ).remove();\n\t}\n\n\tremoveEditView() {\n\n\t\tsuper.removeEditView();\n\t\tthis.sub_custom_column_view_controller = null;\n\t\tthis.sub_saved_report_view_controller = null;\n\n\t\t//this is also happening in Ribbonviewcontoller in onSubMenuClick\n\t\tLocalCacheData.current_open_report_controller = null;\n\t}\n\n\t/* jshint ignore:start */\n\n\t//Get Widget base on field\n\tgetUIWidget( field ) {\n\t\tvar widget;\n\n\t\tif ( field.indexOf( 'time_period' ) >= 0 ) {\n\t\t\twidget = this.getSimpleTComboBox( field, false );\n\t\t} else {\n\n\t\t\tswitch ( field ) {\n\t\t\t\tcase 'is_reprint':\n\t\t\t\t\twidget = this.getCheckBox( field );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'columns':\n\t\t\t\tcase 'sub_total':\n\t\t\t\tcase 'group':\n\t\t\t\tcase 'page_break':\n\t\t\t\tcase 'user_review_control_type_id':\n\t\t\t\tcase 'user_review_control_status_id':\n\t\t\t\tcase 'severity_id':\n\t\t\t\tcase 'term_id':\n\t\t\t\tcase 'kpi_type_id':\n\t\t\t\tcase 'kpi_status_id':\n\t\t\t\tcase 'fluency_id':\n\t\t\t\tcase 'qualification_type_id':\n\t\t\t\tcase 'proficiency_id':\n\t\t\t\tcase 'competency_id':\n\t\t\t\tcase 'ownership_id':\n\t\t\t\tcase 'invoice_status_id':\n\t\t\t\tcase 'user_status_id':\n\t\t\t\tcase 'pay_stub_status_id':\n\t\t\t\tcase 'filter':\n\t\t\t\tcase 'pay_period_time_sheet_verify_status_id':\n\t\t\t\tcase 'job_status_id':\n\t\t\t\tcase 'job_item_status_id':\n\t\t\t\tcase 'client_status_id':\n\t\t\t\tcase 'product_type_id':\n\t\t\t\tcase 'custom_filter':\n\t\t\t\tcase 'log_action_id':\n\t\t\t\tcase 'log_table_name_id':\n\t\t\t\tcase 'accrual_type_id':\n\t\t\t\tcase 'accrual_policy_type_id':\n\t\t\t\tcase 'exception_policy_severity_id':\n\t\t\t\tcase 'exception_policy_type_id':\n\t\t\t\tcase 'expense_policy_require_receipt_id':\n\t\t\t\tcase 'expense_policy_type_id':\n\t\t\t\tcase 'user_expense_payment_method_id':\n\t\t\t\tcase 'user_expense_status_id':\n\t\t\t\tcase 'job_applicant_sex_id':\n\t\t\t\tcase 'job_applicant_status_id':\n\t\t\t\tcase 'job_application_status_id':\n\t\t\t\tcase 'job_application_type_id':\n\t\t\t\tcase 'job_vacancy_employment_status_id':\n\t\t\t\tcase 'job_vacancy_level_id':\n\t\t\t\tcase 'job_vacancy_status_id':\n\t\t\t\tcase 'job_vacancy_type_id':\n\t\t\t\tcase 'job_vacancy_wage_type_id':\n\t\t\t\tcase 'pay_stub_run_id':\n\t\t\t\tcase 'pay_stub_type_id':\n\t\t\t\tcase 'remittance_source_account_type_id':\n\t\t\t\tcase 'transaction_type_id':\n\t\t\t\tcase 'transaction_status_id':\n\t\t\t\t\twidget = this.getSimpleTComboBox( field );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'sort':\n\t\t\t\t\twidget = this.getSortComboBox( field );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'license_expiry_date':\n\t\t\t\tcase 'membership_renewal_date':\n\t\t\t\tcase 'skill_expiry_date':\n\t\t\t\tcase 'education_graduate_date':\n\t\t\t\t\twidget = this.getComboBox( field );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'user_group_id':\n\t\t\t\tcase 'qualification_group_id':\n\t\t\t\tcase 'kpi_group_id':\n\t\t\t\tcase 'job_group_id':\n\t\t\t\tcase 'job_item_group_id':\n\t\t\t\tcase 'client_group_id':\n\t\t\t\tcase 'product_group_id':\n\t\t\t\t\twidget = this.getTreeModeAComboBox( field );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'user_tag':\n\t\t\t\tcase 'review_tag':\n\t\t\t\tcase 'job_tag':\n\t\t\t\tcase 'job_item_tag':\n\t\t\t\t\twidget = this.getTag( field );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'include_user_id':\n\t\t\t\tcase 'exclude_user_id':\n\t\t\t\tcase 'client_sales_contact_id':\n\t\t\t\tcase 'created_by_id':\n\t\t\t\tcase 'updated_by_id':\n\t\t\t\tcase 'include_reviewer_user_id':\n\t\t\t\tcase 'exclude_reviewer_user_id':\n\t\t\t\tcase 'job_applicant_interviewer_user_id':\n\t\t\t\tcase 'job_application_interviewer_user_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_user', TTAPI.APIUser );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'user_title_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_user_title', TTAPI.APIUserTitle );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'payroll_remittance_agency_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_payroll_remittance_agency', TTAPI.APIPayrollRemittanceAgency );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'legal_entity_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_legal_entity', TTAPI.APILegalEntity );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'policy_group_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_policy_group', TTAPI.APIPolicyGroup );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'default_branch_id':\n\t\t\t\tcase 'schedule_branch_id':\n\t\t\t\tcase 'punch_branch_id':\n\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_branch', TTAPI.APIBranch );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'default_department_id':\n\t\t\t\tcase 'schedule_department_id':\n\t\t\t\tcase 'punch_department_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_department', TTAPI.APIDepartment );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'default_job_id':\n\t\t\t\tcase 'punch_job_id':\n\t\t\t\tcase 'include_job_id':\n\t\t\t\tcase 'exclude_job_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_job', TTAPI.APIJob );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'default_job_item_id':\n\t\t\t\tcase 'punch_job_item_id':\n\t\t\t\tcase 'include_job_item_id':\n\t\t\t\tcase 'exclude_job_item_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_job_item', TTAPI.APIJobItem );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'absence_policy_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_absences', TTAPI.APIAbsencePolicy );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'currency_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_currency', TTAPI.APICurrency );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'include_no_data_rows':\n\t\t\t\tcase 'exclude_ytd_adjustment':\n\t\t\t\tcase 'show_child_expenses':\n\t\t\t\t\twidget = this.getCheckBox( field );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'accrual_policy_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_accrual', TTAPI.APIAccrualPolicy );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pay_period_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_Pay_period', TTAPI.APIPayPeriod );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'job_id':\n\t\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\t\twidget = this.getTComboBox( field, 'global_job', TTAPI.APIJob );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'job_item_id':\n\t\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\t\twidget = this.getTComboBox( field, 'global_job_item', TTAPI.APIJobItem );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'default_punch_tag_id':\n\t\t\t\tcase 'punch_tag_id':\n\t\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\t\twidget = this.getTComboBox( field, 'global_punch_tag', TTAPI.APIPunchTag );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'expense_policy_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_expense_policy', TTAPI.APIExpensePolicy );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pay_stub_entry_account_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_PayStubAccount', TTAPI.APIPayStubEntryAccount );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'product_id':\n\t\t\t\tcase 'exclude_product_id':\n\t\t\t\tcase 'include_product_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_product', TTAPI.APIProduct );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'job_client_id':\n\t\t\t\tcase 'exclude_client_id':\n\t\t\t\tcase 'include_client_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_client', TTAPI.APIClient );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'company_deduction_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_deduction', TTAPI.APICompanyDeduction );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'qualification_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_qualification', TTAPI.APIQualification );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'kpi_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_kpi', TTAPI.APIKPI );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'job_applicant_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_job_applicant', TTAPI.APIJobApplicant );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'job_vacancy_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_job_vacancy', TTAPI.APIJobVacancy );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'accrual_policy_account_id':\n\t\t\t\t\twidget = this.getTComboBox( field, 'global_accrual_policy_account', TTAPI.APIAccrualPolicyAccount );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( !Global.isSet( ReportBaseViewController.ReportMissedField ) ) {\n\t\t\t\t\t\tReportBaseViewController.ReportMissedField = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tReportBaseViewController.ReportMissedField[field] = true;\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\treturn widget;\n\t}\n\n\t/* jshint ignore:end */\n\tgetTag( field ) {\n\t\tvar widget = Global.loadWidgetByName( FormItemType.TAG_INPUT );\n\n\t\twidget.TTagInput( { field: field } );\n\n\t\treturn widget;\n\t}\n\n\tgetTreeModeAComboBox( field ) {\n\t\tvar widget = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\twidget = widget.AComboBox( {\n\t\t\ttree_mode: true,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: 'global_tree_column',\n\t\t\tset_empty: true,\n\t\t\tfield: field\n\t\t} );\n\n\t\treturn widget;\n\t}\n\n\tgetCheckBox( field ) {\n\t\tvar widget = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\n\t\twidget = widget.TCheckbox( {\n\t\t\tfield: field\n\t\t} );\n\n\t\treturn widget;\n\t}\n\n\tgetTComboBox( field, layoutName, apiClass ) {\n\n\t\tvar widget = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\twidget = widget.AComboBox( {\n\t\t\tapi_class: apiClass,\n\t\t\tallow_multiple_selection: true,\n\t\t\tlayout_name: layoutName,\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: field\n\t\t} );\n\n\t\treturn widget;\n\t}\n\n\tgetSortComboBox( field ) {\n\t\tvar widget = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\twidget = widget.AComboBox( {\n\t\t\tfield: field,\n\t\t\tallow_drag_to_order: true,\n\t\t\tallow_multiple_selection: true,\n\t\t\tset_empty: true,\n\t\t\tlayout_name: 'global_sort_columns'\n\t\t} );\n\n\t\treturn widget;\n\t}\n\n\tgetSimpleTComboBox( field, allowMultiple ) {\n\n\t\tif ( !Global.isSet( allowMultiple ) ) {\n\t\t\tallowMultiple = true;\n\t\t}\n\n\t\tvar widget = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\twidget = widget.AComboBox( {\n\t\t\tfield: field,\n\t\t\tset_empty: true,\n\t\t\tallow_multiple_selection: allowMultiple,\n\t\t\tlayout_name: 'global_option_column',\n\t\t\tkey: 'value'\n\t\t} );\n\n\t\treturn widget;\n\t}\n\n\tgetComboBox( field ) {\n\t\tvar widget = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\twidget = widget.TComboBox( {\n\t\t\tfield: field,\n\t\t\tset_empty: true\n\t\t} );\n\n\t\treturn widget;\n\t}\n\n\t/* jshint ignore:start */\n\tinitSourceData( field, widget ) {\n\n\t\tvar api_instance = null;\n\t\tvar option = '';\n\t\tvar $this = this;\n\n\t\tswitch ( field ) {\n\t\t\tcase 'sort':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'columns';\n\n\t\t\t\tapi_instance.getOptions( option, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tonResult( result );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tbreak;\n\t\t\tcase 'kpi_group_id':\n\t\t\t\tTTAPI.APIKPIGroup.getKPIGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'qualification_group_id':\n\t\t\t\tTTAPI.APIQualificationGroup.getQualificationGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'product_group_id':\n\t\t\t\tTTAPI.APIProductGroup.getProductGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'client_group_id':\n\t\t\t\tTTAPI.APIClientGroup.getClientGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'user_group_id':\n\t\t\t\tTTAPI.APIUserGroup.getUserGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'policy_group_id':\n\t\t\t\tTTAPI.PolicyGroup.getPolicyGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'job_group_id':\n\t\t\t\tTTAPI.APIJobGroup.getJobGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'job_item_group_id':\n\t\t\t\tTTAPI.APIJobItemGroup.getJobItemGroup( '', false, false, {\n\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\tres = res.getResult();\n\t\t\t\t\t\tres = Global.buildTreeRecord( res );\n\t\t\t\t\t\twidget.setSourceData( res );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'job_vacancy_employment_status_id':\n\t\t\t\tapi_instance = TTAPI.APIJobVacancy;\n\t\t\t\toption = 'employment_status';\n\t\t\t\tbreak;\n\t\t\tcase 'job_vacancy_level_id':\n\t\t\t\tapi_instance = TTAPI.APIJobVacancy;\n\t\t\t\toption = 'level';\n\t\t\t\tbreak;\n\t\t\tcase 'job_vacancy_status_id':\n\t\t\t\tapi_instance = TTAPI.APIJobVacancy;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'job_vacancy_type_id':\n\t\t\t\tapi_instance = TTAPI.APIJobVacancy;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'job_vacancy_wage_type_id':\n\t\t\t\tapi_instance = TTAPI.APIJobVacancy;\n\t\t\t\toption = 'wage_type';\n\t\t\t\tbreak;\n\t\t\tcase 'job_application_status_id':\n\t\t\t\tapi_instance = TTAPI.APIJobApplication;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'job_application_type_id':\n\t\t\t\tapi_instance = TTAPI.APIJobApplication;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'job_applicant_sex_id':\n\t\t\t\tapi_instance = TTAPI.APIJobApplicant;\n\t\t\t\toption = 'sex';\n\t\t\t\tbreak;\n\t\t\tcase 'job_applicant_status_id':\n\t\t\t\tapi_instance = TTAPI.APIJobApplicant;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'user_review_control_type_id':\n\t\t\t\tapi_instance = TTAPI.APIUserReviewControl;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'user_review_control_status_id':\n\t\t\t\tapi_instance = TTAPI.APIUserReviewControl;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'severity_id':\n\t\t\t\tapi_instance = TTAPI.APIUserReviewControl;\n\t\t\t\toption = 'severity';\n\t\t\t\tbreak;\n\t\t\tcase 'term_id':\n\t\t\t\tapi_instance = TTAPI.APIUserReviewControl;\n\t\t\t\toption = 'term';\n\t\t\t\tbreak;\n\t\t\tcase 'kpi_status_id':\n\t\t\t\tapi_instance = TTAPI.APIKPI;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'kpi_type_id':\n\t\t\t\tapi_instance = TTAPI.APIKPI;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'proficiency_id':\n\t\t\t\tapi_instance = TTAPI.APIUserSkill;\n\t\t\t\toption = 'proficiency';\n\t\t\t\tbreak;\n\t\t\tcase 'fluency_id':\n\t\t\t\tapi_instance = TTAPI.APIUserLanguage;\n\t\t\t\toption = 'fluency';\n\t\t\t\tbreak;\n\t\t\tcase 'competency_id':\n\t\t\t\tapi_instance = TTAPI.APIUserLanguage;\n\t\t\t\toption = 'competency';\n\t\t\t\tbreak;\n\t\t\tcase 'user_status_id':\n\t\t\t\tapi_instance = TTAPI.APIUser;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub_status_id':\n\t\t\t\tapi_instance = TTAPI.APIPayStub;\n\t\t\t\toption = 'filtered_status';\n\t\t\t\tbreak;\n\t\t\tcase 'ownership_id':\n\t\t\t\tapi_instance = TTAPI.APIUserMembership;\n\t\t\t\toption = 'ownership';\n\t\t\t\tbreak;\n\t\t\tcase 'license_expiry_date':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'license_expiry_date';\n\t\t\t\tbreak;\n\t\t\tcase 'membership_renewal_date':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'membership_renewal_date';\n\t\t\t\tbreak;\n\t\t\tcase 'skill_expiry_date':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'skill_expiry_date';\n\t\t\t\tbreak;\n\t\t\tcase 'education_graduate_date':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'education_graduate_date';\n\t\t\t\tbreak;\n\t\t\tcase 'group':\n\t\t\tcase 'sub_total':\n\t\t\tcase 'page_break':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'static_columns';\n\t\t\t\tbreak;\n\t\t\tcase 'pay_period_time_sheet_verify_status_id':\n\t\t\t\tapi_instance = TTAPI.APIPayPeriodTimeSheetVerify;\n\t\t\t\t//show valid values specific to the report\n\t\t\t\toption = 'filter_report_status';\n\t\t\t\tbreak;\n\t\t\tcase 'job_status_id':\n\t\t\t\tapi_instance = TTAPI.APIJob;\n\t\t\t\toption = 'status';\n\n\t\t\t\tbreak;\n\t\t\tcase 'custom_filter':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'report_custom_filters';\n\t\t\t\tbreak;\n\n\t\t\tcase 'log_action_id':\n\n\t\t\t\tapi_instance = TTAPI.APILog;\n\t\t\t\toption = 'action';\n\n\t\t\t\tbreak;\n\t\t\tcase 'log_table_name_id':\n\n\t\t\t\tapi_instance = TTAPI.APILog;\n\t\t\t\toption = 'table_name';\n\n\t\t\t\tbreak;\n\t\t\tcase 'filter':\n\t\t\t\tif ( this.script_name === 'ScheduleSummaryReport' ) {\n\t\t\t\t\tapi_instance = TTAPI.APISchedule;\n\t\t\t\t\toption = 'status';\n\t\t\t\t} else if ( this.script_name === 'InvoiceTransactionSummaryReport' ) {\n\t\t\t\t\tapi_instance = TTAPI.APITransaction;\n\t\t\t\t\toption = 'type';\n\t\t\t\t} else if ( this.script_name === 'PayStubSummaryReport' ) {\n\t\t\t\t\tapi_instance = TTAPI.APIPayStub;\n\t\t\t\t\toption = 'status';\n\t\t\t\t} else if ( this.script_name === 'ActiveShiftReport' ) {\n\t\t\t\t\tapi_instance = TTAPI.APIUser;\n\t\t\t\t\toption = 'status';\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'accrual_policy_type_id':\n\t\t\t\tapi_instance = TTAPI.APIAccrualPolicy;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'accrual_type_id':\n\t\t\t\tapi_instance = TTAPI.APIAccrual;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'qualification_type_id':\n\t\t\t\tapi_instance = TTAPI.APIQualification;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'exception_policy_type_id':\n\t\t\t\tapi_instance = TTAPI.APIExceptionPolicy;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'exception_policy_severity_id':\n\t\t\t\tapi_instance = TTAPI.APIExceptionPolicy;\n\t\t\t\toption = 'severity';\n\t\t\t\tbreak;\n\t\t\tcase 'expense_policy_require_receipt_id':\n\t\t\t\tapi_instance = TTAPI.APIExpensePolicy;\n\t\t\t\toption = 'require_receipt';\n\t\t\t\tbreak;\n\t\t\tcase 'expense_policy_type_id':\n\t\t\t\tapi_instance = TTAPI.APIExpensePolicy;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'user_expense_payment_method_id':\n\t\t\t\tapi_instance = TTAPI.APIUserExpense;\n\t\t\t\toption = 'payment_method';\n\t\t\t\tbreak;\n\t\t\tcase 'user_expense_status_id':\n\t\t\t\tapi_instance = TTAPI.APIUserExpense;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'job_item_status_id':\n\t\t\t\tapi_instance = TTAPI.APIJobItem;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'client_status_id':\n\t\t\t\tapi_instance = TTAPI.APIClient;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'invoice_status_id':\n\t\t\t\tapi_instance = TTAPI.APIInvoice;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'invoice_transaction_type_id':\n\t\t\t\tapi_instance = TTAPI.APITransaction;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'product_type_id':\n\t\t\t\tapi_instance = TTAPI.APIProduct;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub_type_id':\n\t\t\t\tapi_instance = TTAPI.APIPayStub;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'transaction_type_id':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'type';\n\t\t\t\tbreak;\n\t\t\tcase 'transaction_status_id':\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = 'status';\n\t\t\t\tbreak;\n\t\t\tcase 'pay_stub_run_id':\n\t\t\t\tvar result = {};\n\t\t\t\tfor ( var i = 1; i <= 128; i++ ) {\n\t\t\t\t\tresult[i] = i;\n\t\t\t\t}\n\t\t\t\tresult = Global.buildRecordArray( result );\n\t\t\t\twidget.setSourceData( result );\n\t\t\t\treturn;\n\t\t\tdefault:\n\t\t\t\t//Don't deal with awesomebox with api\n\t\t\t\tif ( widget.getAPI && widget.getAPI() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//Text Input or other no options widget\n\t\t\t\tif ( !widget.setSourceData ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfield.replace( '_id', '' );\n\n\t\t\t\tapi_instance = this.api;\n\t\t\t\toption = field;\n\t\t\t\tif ( field.indexOf( 'time_period' ) >= 0 ) {\n\t\t\t\t\toption = 'time_period';\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( api_instance ) {\n\n\t\t\tif ( this.need_refresh_display_columns && ( option === 'columns' || field == 'custom_filter' ) ) {\n\t\t\t\tapi_instance.getOptions( option, {\n\t\t\t\t\tnoCache: true, onResult: function( result ) {\n\n\t\t\t\t\t\tonResult( result );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tapi_instance.getOptions( option, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tonResult( result );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onResult( result ) {\n\n\t\t\tvar res_data = result.getResult();\n\t\t\tres_data = Global.buildRecordArray( res_data );\n\t\t\tif ( field === 'sort' ) {\n\t\t\t\tres_data = $this.buildSortSelectorUnSelectColumns( res_data );\n\t\t\t} else if ( field.indexOf( 'time_period' ) >= 0 ) {\n\t\t\t\t$this.time_period_array = res_data;\n\t\t\t}\n\n\t\t\twidget.setSourceData( res_data );\n\n\t\t}\n\t}\n\n\t/* jshint ignore:end */\n\tgetDatePicker( field ) {\n\t\tvar widget = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\twidget.TDatePicker( { field: field } );\n\n\t\treturn widget;\n\t}\n\n\tputInputToInsideFormItem( form_item_input, label ) {\n\t\tvar form_item = $( Global.loadWidgetByName( WidgetNamesDic.EDIT_VIEW_SUB_FORM_ITEM ) );\n\t\tvar form_item_label = form_item.find( '.edit-view-form-item-label' );\n\t\tvar form_item_input_div = form_item.find( '.edit-view-form-item-input-div' );\n\t\tform_item.addClass( 'remove-margin' );\n\n\t\tform_item_label.text( $.i18n._( label ) );\n\t\tform_item_input_div.append( form_item_input );\n\n\t\treturn form_item;\n\t}\n\n\tonLicenseExpiryDate( target, defaultValue ) {\n\n\t\tvar $this = this;\n\t\tvar value = target.getValue();\n\n\t\tthis.visible_report_widgets.license_expiry_date = null;\n\t\tthis.visible_report_widgets.start_date_3 = null;\n\t\tthis.visible_report_widgets.end_date_3 = null;\n\t\tthis.visible_report_widgets.pay_period_id_3 = null;\n\t\tthis.visible_report_widgets.pay_period_schedule_id_3 = null;\n\n\t\tif ( value === 'custom_date' ) {\n\t\t\tbuildCustomDateUI();\n\t\t} else if ( value === 'custom_pay_period' ) {\n\t\t\tbuildPayPeriodUI();\n\t\t} else if ( value === 'this_pay_period' || value === 'last_pay_period' || value === 'to_last_pay_period' || value === 'to_this_pay_period' ) {\n\t\t\tbuildPayPeriodScheduleUI();\n\t\t} else {\n\t\t\tbuildDefaultUI();\n\t\t}\n\n\t\tfunction buildPayPeriodScheduleUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_license_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'license_expiry_date', false, false );\n\t\t\t$this.initSourceData( 'license_expiry_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_schedule_id_3', 'global_pay_period_schedule', TTAPI.APIPayPeriodSchedule );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period Schedule' ) );\n\n\t\t\t$this.visible_report_widgets.license_expiry_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_schedule_id_3 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_schedule_id );\n\t\t\t}\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 120 );\n\n\t\t\tform_input_div.append( v_box );\n\t\t}\n\n\t\tfunction buildPayPeriodUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_license_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'license_expiry_date', false, false );\n\t\t\t$this.initSourceData( 'license_expiry_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_id_3', 'global_Pay_period', TTAPI.APIPayPeriod );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period' ) );\n\n\t\t\t$this.visible_report_widgets.license_expiry_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_id_3 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_id );\n\t\t\t}\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t}\n\n\t\tfunction buildDefaultUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_license_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'license_expiry_date', false, false );\n\n\t\t\tform_input_div.append( time_period );\n\n\t\t\ttime_period.setValue( value );\n\n\t\t\t$this.initSourceData( 'license_expiry_date', time_period );\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\t$this.visible_report_widgets.license_expiry_date = time_period;\n\n\t\t}\n\n\t\tfunction buildCustomDateUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_license_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'license_expiry_date', false, false );\n\t\t\t$this.initSourceData( 'license_expiry_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar start_date = $this.getDatePicker( 'start_date_3' );\n\n\t\t\tvar end_date = $this.getDatePicker( 'end_date_3' );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tstart_date.setValue( defaultValue.start_date );\n\t\t\t\tend_date.setValue( defaultValue.end_date );\n\t\t\t}\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( start_date, $.i18n._( 'Start Date' ) );\n\t\t\tvar form_item3 = $this.putInputToInsideFormItem( end_date, $.i18n._( 'End Date' ) );\n\n\t\t\t$this.visible_report_widgets.license_expiry_date = time_period;\n\t\t\t$this.visible_report_widgets.start_date_3 = start_date;\n\t\t\t$this.visible_report_widgets.end_date_3 = end_date;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tstart_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tend_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item3 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t}\n\t}\n\n\tonEducationGraduateDate( target, defaultValue ) {\n\n\t\tvar $this = this;\n\t\tvar value = target.getValue();\n\n\t\tthis.visible_report_widgets.education_graduate_date = null;\n\t\tthis.visible_report_widgets.start_date_4 = null;\n\t\tthis.visible_report_widgets.end_date_4 = null;\n\t\tthis.visible_report_widgets.pay_period_id_4 = null;\n\t\tthis.visible_report_widgets.pay_period_schedule_id_4 = null;\n\n\t\tif ( value === 'custom_date' ) {\n\t\t\tbuildCustomDateUI();\n\t\t} else if ( value === 'custom_pay_period' ) {\n\t\t\tbuildPayPeriodUI();\n\t\t} else if ( value === 'this_pay_period' || value === 'last_pay_period' || value === 'to_last_pay_period' || value === 'to_this_pay_period' ) {\n\t\t\tbuildPayPeriodScheduleUI();\n\t\t} else {\n\t\t\tbuildDefaultUI();\n\t\t}\n\n\t\tfunction buildPayPeriodScheduleUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_education_graduate_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'education_graduate_date', false, false );\n\t\t\t$this.initSourceData( 'education_graduate_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_schedule_id_4', 'global_pay_period_schedule', TTAPI.APIPayPeriodSchedule );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period Schedule' ) );\n\n\t\t\t$this.visible_report_widgets.education_graduate_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_schedule_id_4 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_schedule_id );\n\t\t\t}\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 120 );\n\n\t\t\tform_input_div.append( v_box );\n\t\t}\n\n\t\tfunction buildPayPeriodUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_education_graduate_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'education_graduate_date', false, false );\n\t\t\t$this.initSourceData( 'education_graduate_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_id_4', 'global_Pay_period', TTAPI.APIPayPeriod );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period' ) );\n\n\t\t\t$this.visible_report_widgets.education_graduate_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_id_4 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_id );\n\t\t\t}\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t}\n\n\t\tfunction buildDefaultUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_education_graduate_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'education_graduate_date', false, false );\n\n\t\t\tform_input_div.append( time_period );\n\n\t\t\ttime_period.setValue( value );\n\n\t\t\t$this.initSourceData( 'education_graduate_date', time_period );\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\t$this.visible_report_widgets.education_graduate_date = time_period;\n\n\t\t}\n\n\t\tfunction buildCustomDateUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_education_graduate_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'education_graduate_date', false, false );\n\t\t\t$this.initSourceData( 'education_graduate_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar start_date = $this.getDatePicker( 'start_date_4' );\n\n\t\t\tvar end_date = $this.getDatePicker( 'end_date_4' );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tstart_date.setValue( defaultValue.start_date );\n\t\t\t\tend_date.setValue( defaultValue.end_date );\n\t\t\t}\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( start_date, $.i18n._( 'Start Date' ) );\n\t\t\tvar form_item3 = $this.putInputToInsideFormItem( end_date, $.i18n._( 'End Date' ) );\n\n\t\t\t$this.visible_report_widgets.education_graduate_date = time_period;\n\t\t\t$this.visible_report_widgets.start_date_4 = start_date;\n\t\t\t$this.visible_report_widgets.end_date_4 = end_date;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tstart_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tend_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item3 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t}\n\t}\n\n\tonSkillExpiryDate( target, defaultValue ) {\n\n\t\tvar $this = this;\n\t\tvar value = target.getValue();\n\n\t\tthis.visible_report_widgets.skill_expiry_date = null;\n\t\tthis.visible_report_widgets.start_date_2 = null;\n\t\tthis.visible_report_widgets.end_date_2 = null;\n\t\tthis.visible_report_widgets.pay_period_id_2 = null;\n\t\tthis.visible_report_widgets.pay_period_schedule_id_2 = null;\n\n\t\tif ( value === 'custom_date' ) {\n\t\t\tbuildCustomDateUI();\n\t\t} else if ( value === 'custom_pay_period' ) {\n\t\t\tbuildPayPeriodUI();\n\t\t} else if ( value === 'this_pay_period' || value === 'last_pay_period' || value === 'to_last_pay_period' || value === 'to_this_pay_period' ) {\n\t\t\tbuildPayPeriodScheduleUI();\n\t\t} else {\n\t\t\tbuildDefaultUI();\n\t\t}\n\n\t\tfunction buildPayPeriodScheduleUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_skill_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'skill_expiry_date', false, false );\n\t\t\t$this.initSourceData( 'skill_expiry_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_schedule_id_2', 'global_pay_period_schedule', TTAPI.APIPayPeriodSchedule );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period Schedule' ) );\n\n\t\t\t$this.visible_report_widgets.skill_expiry_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_schedule_id_2 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_schedule_id );\n\t\t\t}\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 120 );\n\n\t\t\tform_input_div.append( v_box );\n\t\t}\n\n\t\tfunction buildPayPeriodUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_skill_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'skill_expiry_date', false, false );\n\t\t\t$this.initSourceData( 'skill_expiry_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_id_2', 'global_Pay_period', TTAPI.APIPayPeriod );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period' ) );\n\n\t\t\t$this.visible_report_widgets.skill_expiry_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_id_2 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_id );\n\t\t\t}\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t}\n\n\t\tfunction buildDefaultUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_skill_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'skill_expiry_date', false, false );\n\n\t\t\tform_input_div.append( time_period );\n\n\t\t\ttime_period.setValue( value );\n\n\t\t\t$this.initSourceData( 'skill_expiry_date', time_period );\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\t$this.visible_report_widgets.skill_expiry_date = time_period;\n\n\t\t}\n\n\t\tfunction buildCustomDateUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_skill_expiry_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'skill_expiry_date', false, false );\n\t\t\t$this.initSourceData( 'skill_expiry_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar start_date = $this.getDatePicker( 'start_date_2' );\n\n\t\t\tvar end_date = $this.getDatePicker( 'end_date_2' );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tstart_date.setValue( defaultValue.start_date );\n\t\t\t\tend_date.setValue( defaultValue.end_date );\n\t\t\t}\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( start_date, $.i18n._( 'Start Date' ) );\n\t\t\tvar form_item3 = $this.putInputToInsideFormItem( end_date, $.i18n._( 'End Date' ) );\n\n\t\t\t$this.visible_report_widgets.skill_expiry_date = time_period;\n\t\t\t$this.visible_report_widgets.start_date_2 = start_date;\n\t\t\t$this.visible_report_widgets.end_date_2 = end_date;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tstart_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tend_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item3 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t}\n\t}\n\n\tonMembershipRenewalDateChange( target, defaultValue ) {\n\n\t\tvar $this = this;\n\t\tvar value = target.getValue();\n\n\t\tthis.visible_report_widgets.membership_renewal_date = null;\n\t\tthis.visible_report_widgets.start_date_1 = null;\n\t\tthis.visible_report_widgets.end_date_1 = null;\n\t\tthis.visible_report_widgets.pay_period_id_1 = null;\n\t\tthis.visible_report_widgets.pay_period_schedule_id_1 = null;\n\n\t\tif ( value === 'custom_date' ) {\n\t\t\tbuildCustomDateUI();\n\t\t} else if ( value === 'custom_pay_period' ) {\n\t\t\tbuildPayPeriodUI();\n\t\t} else if ( value === 'this_pay_period' || value === 'last_pay_period' || value === 'to_last_pay_period' || value === 'to_this_pay_period' ) {\n\t\t\tbuildPayPeriodScheduleUI();\n\t\t} else {\n\t\t\tbuildDefaultUI();\n\t\t}\n\n\t\tfunction buildPayPeriodScheduleUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_membership_renewal_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'membership_renewal_date', false, false );\n\t\t\t$this.initSourceData( 'membership_renewal_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_schedule_id_1', 'global_pay_period_schedule', TTAPI.APIPayPeriodSchedule );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period Schedule' ) );\n\n\t\t\t$this.visible_report_widgets.membership_renewal_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_schedule_id_1 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_schedule_id );\n\t\t\t}\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 120 );\n\n\t\t\tform_input_div.append( v_box );\n\t\t}\n\n\t\tfunction buildPayPeriodUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_membership_renewal_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'membership_renewal_date', false, false );\n\t\t\t$this.initSourceData( 'membership_renewal_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_id_1', 'global_Pay_period', TTAPI.APIPayPeriod );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period' ) );\n\n\t\t\t$this.visible_report_widgets.membership_renewal_date = time_period;\n\t\t\t$this.visible_report_widgets.pay_period_id_1 = pay_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_id );\n\t\t\t}\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t}\n\n\t\tfunction buildDefaultUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_membership_renewal_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'membership_renewal_date', false, false );\n\n\t\t\tform_input_div.append( time_period );\n\n\t\t\ttime_period.setValue( value );\n\n\t\t\t$this.initSourceData( 'membership_renewal_date', time_period );\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\t$this.visible_report_widgets.membership_renewal_date = time_period;\n\n\t\t}\n\n\t\tfunction buildCustomDateUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_membership_renewal_date_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( 'membership_renewal_date', false, false );\n\t\t\t$this.initSourceData( 'membership_renewal_date', time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar start_date = $this.getDatePicker( 'start_date_1' );\n\n\t\t\tvar end_date = $this.getDatePicker( 'end_date_1' );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tstart_date.setValue( defaultValue.start_date );\n\t\t\t\tend_date.setValue( defaultValue.end_date );\n\t\t\t}\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( start_date, $.i18n._( 'Start Date' ) );\n\t\t\tvar form_item3 = $this.putInputToInsideFormItem( end_date, $.i18n._( 'End Date' ) );\n\n\t\t\t$this.visible_report_widgets.membership_renewal_date = time_period;\n\t\t\t$this.visible_report_widgets.start_date_1 = start_date;\n\t\t\t$this.visible_report_widgets.end_date_1 = end_date;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tstart_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tend_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item3 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 62 );\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t}\n\t}\n\n\tonTimePeriodChange( target, defaultValue ) {\n\t\tvar $this = this;\n\t\tvar value = target.getValue();\n\t\tvar field = target.getField();\n\t\tthis.visible_report_widgets[field] = null;\n\n\t\tif ( value === 'custom_date' ) {\n\t\t\tbuildCustomDateUI();\n\t\t} else if ( value === 'custom_pay_period' ) {\n\t\t\tbuildPayPeriodUI();\n\t\t} else if ( value === 'this_pay_period' || value === 'last_pay_period' || value === 'to_last_pay_period' || value === 'to_this_pay_period' || value === 'this_year_this_pay_period' || value === 'this_year_last_pay_period' ) {\n\t\t\tbuildPayPeriodScheduleUI();\n\t\t} else {\n\t\t\tbuildDefaultUI();\n\t\t}\n\n\t\tfunction buildPayPeriodScheduleUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_' + field + '_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( field, false, false );\n\t\t\t$this.initSourceData( field, time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_schedule_id', 'global_pay_period_schedule', TTAPI.APIPayPeriodSchedule );\n\t\t\tpay_period.attr( 'time_period_key', field );\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period Schedule' ) );\n\n\t\t\t$this.visible_report_widgets[field] = time_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_schedule_id );\n\t\t\t}\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 120 );\n\n\t\t\tform_input_div.append( v_box );\n\t\t}\n\n\t\tfunction buildPayPeriodUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_' + field + '_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( field, false, false );\n\t\t\t$this.initSourceData( field, time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar pay_period = $this.getTComboBox( 'pay_period_id', 'global_Pay_period', TTAPI.APIPayPeriod );\n\t\t\tpay_period.attr( 'time_period_key', field );\n\t\t\tpay_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( pay_period, $.i18n._( 'Pay Period' ) );\n\n\t\t\t$this.visible_report_widgets[field] = time_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tpay_period.setValue( defaultValue.pay_period_id );\n\t\t\t}\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 70 );\n\n\t\t}\n\n\t\tfunction buildDefaultUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_' + field + '_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( field, false, false );\n\n\t\t\tform_input_div.append( time_period );\n\n\t\t\ttime_period.setValue( value );\n\n\t\t\t$this.initSourceData( field, time_period );\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\t$this.visible_report_widgets[field] = time_period;\n\n\t\t}\n\n\t\tfunction buildCustomDateUI() {\n\t\t\tvar form_item_div = ( $this.edit_view ).find( '#report_' + field + '_div' );\n\t\t\tvar form_input_div = $( form_item_div.children()[1] );\n\t\t\tform_input_div.empty();\n\n\t\t\tvar v_box = $( '<div class=\\'v-box\\'></div>' );\n\n\t\t\tvar time_period = $this.getSimpleTComboBox( field, false, false );\n\t\t\t$this.initSourceData( field, time_period );\n\t\t\ttime_period.setValue( value );\n\n\t\t\tvar start_date = $this.getDatePicker( 'start_date' );\n\t\t\tvar end_date = $this.getDatePicker( 'end_date' );\n\t\t\tstart_date.attr( 'time_period_key', field );\n\t\t\tend_date.attr( 'time_period_key', field );\n\n\t\t\tif ( defaultValue ) {\n\t\t\t\tstart_date.setValue( defaultValue.start_date );\n\t\t\t\tend_date.setValue( defaultValue.end_date );\n\t\t\t}\n\n\t\t\tvar form_item = $this.putInputToInsideFormItem( time_period, $.i18n._( 'Section' ) );\n\t\t\tvar form_item2 = $this.putInputToInsideFormItem( start_date, $.i18n._( 'Start Date' ) );\n\t\t\tvar form_item3 = $this.putInputToInsideFormItem( end_date, $.i18n._( 'End Date' ) );\n\n\t\t\t$this.visible_report_widgets[field] = time_period;\n\n\t\t\ttime_period.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tstart_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tend_date.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t$this.onFormItemChange( target );\n\t\t\t} );\n\n\t\t\tv_box.append( form_item );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item2 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\t\t\tv_box.append( form_item3 );\n\t\t\tv_box.append( '<div class=\\'clear-both-div\\'></div>' );\n\n\t\t\t$this.setEditFieldSize( v_box.find( '.edit-view-form-item-sub-label-div > span' ), 62 );\n\n\t\t\tform_input_div.append( v_box );\n\n\t\t}\n\t}\n\n\t//Override this if more than one tab\n\tsetErrorTips( result, dont_switch_tab ) {\n\t\tthis.clearErrorTips();\n\n\t\tvar details = result.getDetails();\n\t\tvar error_list = details[0];\n\n\t\tvar found_in_current_tab = false;\n\n\t\tvar tab_report = this.edit_view_tab.find( '#tab_report' );\n\t\tvar tab_setup = this.edit_view_tab.find( '#tab_setup' );\n\n\t\tfor ( var key in error_list ) {\n\n\t\t\tif ( !error_list.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( !Global.isSet( this.edit_view_ui_dic[key] ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( key === 'time_period' ||\n\t\t\t\tkey === 'membership_renewal_date' ||\n\t\t\t\tkey === 'skill_expiry_date' ||\n\t\t\t\tkey === 'license_expiry_date' ||\n\t\t\t\tkey === 'education_graduate_date'\n\t\t\t) {\n\t\t\t\tif ( this.visible_report_widgets[key] && this.visible_report_widgets[key].is( ':visible' ) ) {\n\t\t\t\t\tthis.visible_report_widgets[key].setErrorStyle( error_list[key], true );\n\t\t\t\t\tfound_in_current_tab = true;\n\t\t\t\t} else if ( this.visible_report_widgets[key] ) {\n\t\t\t\t\tthis.visible_report_widgets[key].setErrorStyle( error_list[key] );\n\t\t\t\t}\n\t\t\t\tthis.edit_view_error_ui_dic[key] = this.visible_report_widgets[key];\n\t\t\t} else {\n\t\t\t\tif ( this.edit_view_ui_dic[key].is( ':visible' ) ) {\n\n\t\t\t\t\tthis.edit_view_ui_dic[key].setErrorStyle( error_list[key], true );\n\t\t\t\t\tfound_in_current_tab = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.edit_view_ui_dic[key].setErrorStyle( error_list[key] );\n\t\t\t\t}\n\t\t\t\tthis.edit_view_error_ui_dic[key] = this.edit_view_ui_dic[key];\n\t\t\t}\n\n\t\t}\n\n\t\tif ( !found_in_current_tab ) {\n\n\t\t\tthis.showEditViewError( result );\n\n\t\t}\n\t}\n\n\tbuildSortSelectorUnSelectColumns( display_columns ) {\n\t\tvar fina_array = [];\n\t\tvar i = 100;\n\t\t$.each( display_columns, function( index, content ) {\n\t\t\tvar new_content = $.extend( {}, content );\n\t\t\tnew_content.id = i; //Need\n\t\t\tnew_content.sort = 'asc';\n\t\t\tfina_array.push( new_content );\n\t\t\ti = i + 1;\n\t\t} );\n\n\t\treturn fina_array;\n\t}\n\n\tsetEditViewWidgetsMode() {\n\t\tvar did_clean_dic = {};\n\t\tfor ( var key in this.edit_view_ui_dic ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\twidget.css( 'opacity', 1 );\n\t\t\tvar column = widget.parent().parent().parent();\n\t\t\tvar tab_id = column.parent().attr( 'id' );\n\t\t\tif ( !column.hasClass( 'v-box' ) ) {\n\t\t\t\tif ( !did_clean_dic[tab_id] ) {\n\t\t\t\t\tdid_clean_dic[tab_id] = true;\n\t\t\t\t}\n\t\t\t\tif ( Global.isSet( widget.setEnabled ) ) {\n\t\t\t\t\twidget.setEnabled( true );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildReportUIBaseOnSetupFields() {\n\t\tvar setup_field = this.current_edit_record.setup_field;\n\t\tif ( setup_field && setup_field.length > 0 ) {\n\t\t\tthis.createUI( setup_field );\n\t\t}\n\t}\n\n\tgetFormValues() {\n\t\tvar other = {};\n\n\t\tother.page_orientation = this.current_edit_record.page_orientation;\n\t\tother.font_size = this.current_edit_record.font_size;\n\t\tother.auto_refresh = this.current_edit_record.auto_refresh;\n\t\tother.disable_grand_total = this.current_edit_record.disable_grand_total;\n\t\tother.maximum_page_limit = this.current_edit_record.maximum_page_limit;\n\t\tother.show_duplicate_values = this.current_edit_record.show_duplicate_values;\n\n\t\tif ( this.current_saved_report && Global.isSet( this.current_saved_report.name ) ) {\n\t\t\tother.report_name = this.current_saved_report.name;\n\t\t\tother.report_description = this.current_saved_report.description;\n\t\t}\n\n\t\treturn other;\n\t}\n\n\tgetChartValues() {\n\n\t\tvar chart = {};\n\n\t\tchart.enable = this.current_edit_record.enable;\n\t\tchart.display_mode = this.current_edit_record.display_mode;\n\t\tchart.type = this.current_edit_record.type;\n\t\tchart.include_sub_total = this.current_edit_record.include_sub_total;\n\t\tchart.axis_scale_static = this.current_edit_record.axis_scale_static;\n\t\tchart.combine_columns = this.current_edit_record.combine_columns;\n\n\t\treturn chart;\n\t}\n\n\tconvertSortValues( sort ) {\n\n\t\tvar result = [];\n\t\tfor ( var i = 0; i < sort.length; i++ ) {\n\t\t\tvar item = sort[i];\n\n\t\t\tif ( !Global.isSet( item.fullValue ) ) {\n\t\t\t\tresult = sort;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tvar new_item = {};\n\t\t\t\tnew_item[item.value] = item.sort;\n\t\t\t\tresult.push( new_item );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\taddOrderFix( report ) {\n\n\t\tvar new_report_fields = {};\n\n\t\tfor ( var key in report ) {\n\n\t\t\tif ( !report.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar order_fix = this.visible_report_widgets_order_fix[key];\n\n\t\t\tif ( order_fix > 0 ) {\n\t\t\t\tnew_report_fields['-' + order_fix + '-' + key] = report[key];\n\t\t\t}\n\t\t}\n\n\t\treturn new_report_fields;\n\t}\n\n\t//Make sure this.current_edit_record is updated before validate\n\tvalidate( synchronous ) {\n\t\tvar $this = this;\n\t\tvar other = this.getFormValues();\n\t\tvar chart = this.getChartValues();\n\n\t\t//#2293 - Refresh the report tab UI based on any changes to chart or setup tabs, or changes that hide and show fields will not validate properly.\n\t\tthis.buildReportUIBaseOnSetupFields();\n\n\t\tvar report = this.visible_report_values;\n\t\tif ( report.sort ) {\n\t\t\treport.sort = this.convertSortValues( report.sort );\n\t\t}\n\n\t\treport = this.addOrderFix( report );\n\n\t\tvar config = report;\n\t\tconfig['-' + 1000 + '-' + 'template'] = this.current_edit_record.template;\n\t\tconfig.other = other;\n\t\tconfig.chart = chart;\n\n\t\tif ( this.include_form_setup ) {\n\t\t\tconfig.form = this.getFormSetupData( true );\n\t\t}\n\n\t\tif ( report.sort ) {\n\t\t\treport.sort = this.convertSortValues( report.sort );\n\t\t}\n\n\t\tif ( !synchronous ) {\n\t\t\tthis.api['validateReport']( config, 'pdf', {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t$this.validateResult( result );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn null;\n\t\t} else {\n\t\t\t//#2293 - synchronous call to validation api allows us to return the value in realtime\n\t\t\tvar result = this.api['validateReport']( config, 'pdf', { async: false } );\n\t\t\tif ( result ) {\n\t\t\t\tthis.validateResult( result );\n\n\t\t\t\treturn result.getResult();\n\t\t\t}\n\t\t}\n\t}\n\n\tonViewExcelClick( message_override ) {\n\n\t\tvar config = this.getPostReportJson();\n\t\tvar post_data = { 0: config, 1: 'csv' };\n\n\t\tif ( this.include_form_setup ) {\n\n\t\t\tif ( this.show_empty_message ) {\n\t\t\t\tvar message = $.i18n._( 'Setup data for this report has not been completed yet. Please click on the Form Setup tab to do so now.' );\n\t\t\t\tif ( message_override ) {\n\t\t\t\t\tmessage = message_override;\n\t\t\t\t}\n\t\t\t\tTAlertManager.showAlert( message );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconfig.form = this.getFormSetupData( true );\n\t\t}\n\n\t\tthis.doFormIFrameCall( post_data );\n\n\t\tvar source = 'Excel'; // Backup value in case the url sm does not exist.\n\t\tif ( LocalCacheData.getAllURLArgs() && LocalCacheData.getAllURLArgs().sm ) {\n\t\t\tsource = LocalCacheData.getAllURLArgs().sm + '@Excel';\n\t\t}\n\t\t$().TFeedback( {\n\t\t\tsource: source,\n\t\t\tforce_source: true,\n\t\t\tdelay: 5000\n\t\t} );\n\t}\n\n\tgetVisibleReportValues() {\n\t\t//#2353 - cut out any zero uuid strings, they are likely --none-- in a multiselect\n\t\tfor ( var i in this.visible_report_values.filter ) {\n\t\t\tif ( this.visible_report_values.filter[i] == TTUUID.zero_id ) {\n\t\t\t\tdelete this.visible_report_values.filter[i];\n\t\t\t}\n\t\t}\n\t\treturn this.visible_report_values;\n\t}\n\n\tgetPostReportJson( noPreFix ) {\n\t\tvar other = this.getFormValues();\n\t\tvar chart = this.getChartValues();\n\t\tvar report = this.getVisibleReportValues();\n\n\t\tif ( report.sort ) {\n\t\t\treport.sort = this.convertSortValues( report.sort );\n\n\t\t\t//This causes the report US \"Sort By\" dropdown box to get cleared out when you click to Save a report, then click Cancel.\n\t\t\t// if ( noPreFix ) { //no pre fix means save to userReport, use sort_ to match flex format\n\t\t\t// \treport.sort_ = report.sort;\n\t\t\t//\n\t\t\t// \tdelete report.sort;\n\t\t\t// }\n\n\t\t}\n\n\t\tif ( !noPreFix ) {\n\t\t\treport = this.addOrderFix( report );\n\t\t}\n\n\t\tvar config = report;\n\t\tif ( !noPreFix ) {\n\t\t\tconfig['-' + 1000 + '-' + 'template'] = this.current_edit_record.template;\n\t\t} else {\n\t\t\tconfig['template'] = this.current_edit_record.template;\n\t\t}\n\n\t\tconfig.other = other;\n\t\tconfig.chart = chart;\n\n\t\treturn config;\n\t}\n\n\t//Reports don't share many icons with other views, so override the entire function here.\n\tonContextMenuClick( context_btn, menu_name ) {\n\t\tProgressBar.showOverlay();\n\t\t//this flag is turned off in ProgressBarManager::closeOverlay, or 2s whichever happens first\n\t\tif ( window.clickProcessing == true ) {\n\t\t\treturn;\n\t\t} else {\n\t\t\twindow.clickProcessing = true;\n\t\t\twindow.clickProcessingHandle = window.setTimeout( function() {\n\t\t\t\tif ( window.clickProcessing == true ) {\n\t\t\t\t\twindow.clickProcessing = false;\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\tTTPromise.wait();\n\t\t\t\t}\n\t\t\t}, 1000 );\n\t\t}\n\t\tvar id;\n\t\tif ( Global.isSet( menu_name ) ) {\n\t\t\tid = menu_name;\n\t\t} else {\n\n\t\t\tif ( context_btn.disabled ) {\n\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tswitch ( id ) {\n\t\t\tcase 'view':\n\t\t\t\tProgressBar.showOverlay();\n\t\t\t\tthis.onViewClick();\n\t\t\t\tbreak;\n\t\t\tcase 'view_html':\n\t\t\t\tProgressBar.showOverlay();\n\t\t\t\tthis.onViewClick( 'html' );\n\t\t\t\tbreak;\n\t\t\tcase 'view_html_new_window':\n\t\t\t\tProgressBar.showOverlay();\n\t\t\t\tthis.onViewClick( 'html', true );\n\t\t\t\tbreak;\n\t\t\tcase 'export_excel':\n\t\t\t\tthis.onViewExcelClick();\n\t\t\t\tbreak;\n\t\t\tcase 'cancel':\n\t\t\t\tthis.onCancelClick();\n\t\t\t\tbreak;\n\t\t\tcase 'save_existed_report': //All report view\n\t\t\t\tthis.onSaveExistedReportClick();\n\t\t\t\tbreak;\n\t\t\tcase 'save_new_report': //All report view\n\t\t\t\tthis.onSaveNewReportClick();\n\t\t\t\tbreak;\n\t\t\tcase 'save_setup': //All report view\n\t\t\t\tthis.onSaveSetup();\n\t\t\t\tbreak;\n\t\t\tcase 'view_form': //All report view\n\t\t\t\tthis.onViewClick( 'pdf_form' );\n\t\t\t\tbreak;\n\t\t\tcase 'e_file': //All report view\n\t\t\t\tthis.onViewClick( 'efile' );\n\t\t\t\tbreak;\n\t\t\tcase 'timesheet_view': //All report view\n\t\t\t\tthis.onViewClick( 'pdf_timesheet' );\n\t\t\t\tbreak;\n\t\t\tcase 'timesheet_view_detail': //All report view\n\t\t\t\tthis.onViewClick( 'pdf_timesheet_detail' );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\tthis.onCustomContextClick( id, context_btn );\n\t\t\t\tbreak;\n\t\t}\n\t\tGlobal.triggerAnalyticsContextMenuClick( context_btn, menu_name );\n\t}\n\n\tonSaveSetup( label ) {\n\t\tvar $this = this;\n\t\tvar form_setup = this.getFormSetupData();\n\n\t\tif ( label == undefined ) {\n\t\t\tlabel = $.i18n._( 'Form setup' );\n\t\t}\n\n\t\t//Allows saving of all export config data for all export formats at once in PayrollExport\n\t\tif ( this.save_export_setup_data != undefined ) {\n\t\t\tform_setup = this.save_export_setup_data;\n\t\t}\n\n\t\t//do this before the api call for speed to stop #\n\t\t$this.show_empty_message = false;\n\t\t$this.form_setup_changed = false;\n\n\t\tif ( form_setup ) { //Don't save if form_setup is false.\n\t\t\tthis.api.setCompanyFormConfig( form_setup, {\n\t\t\t\tonResult: function( result ) {\n\n\t\t\t\t\tif ( result && result.isValid() ) {\n\n\t\t\t\t\t\tTAlertManager.showAlert( label + ' ' + $.i18n._( 'has been saved successfully' ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.show_empty_message = true;\n\t\t\t\t\t\t$this.form_setup_changed = true;\n\t\t\t\t\t\tTAlertManager.showAlert( label + ' ' + $.i18n._( 'save failed, please try again' ) );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\tTAlertManager.showAlert( label + ' ' + $.i18n._( 'invalid, please try again' ) );\n\t\t}\n\t}\n\n\tgetFormSetupData() {\n\t\t//Always need override\n\t}\n\n\tonViewClick( key, new_window, message_override ) {\n//\t\tGlobal.loadPage('temp_page.html',function(result){\n//\t\t\tIndexViewController.openizard( 'ReportViewWizard', result);\n//\t\t});\n\t\tif ( !key ) {\n\t\t\tkey = 'pdf';\n\t\t}\n\n\t\t//#2293 - make validation call synchronously to stop the report from being shown if it fails.\n\t\tif ( !this.validate( true ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar config = this.getPostReportJson();\n\t\tvar post_data = { 0: config, 1: key };\n\t\tif ( this.include_form_setup ) {\n\t\t\tif ( this.show_empty_message ) {\n\t\t\t\tvar message = $.i18n._( 'Setup data for this report has not been completed yet. Please click on the Form Setup tab to do so now.' );\n\t\t\t\tif ( message_override ) {\n\t\t\t\t\tmessage = message_override;\n\t\t\t\t}\n\t\t\t\tTAlertManager.showAlert( message );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconfig.form = this.getFormSetupData( true );\n\t\t}\n\n//\t\tif ( key === 'pdf' ) {\n//\t\t\tthis.doFormIFrameCall( post_data );\n//\t\t}\n\t\tif ( key === 'html' ) {\n\t\t\tvar url = ServiceCaller.getAPIURL( 'Class=' + this.api.className + '&Method=' + 'get' + this.api.key_name + '&v=2' );\n\t\t\tif ( Global.getStationID() ) {\n\t\t\t\turl = url + '&StationID=' + Global.getStationID();\n\t\t\t}\n\t\t\tvar message_id = TTUUID.generateUUID();\n\t\t\turl = url + '&MessageID=' + message_id;\n\n\t\t\tvar refresh_request = '<script>';\n\t\t\trefresh_request += 'function getCookie( name ) {';\n\t\t\trefresh_request += '\tvar name = name + \"=\";';\n\t\t\trefresh_request += '\tvar split_cookie = document.cookie.split( \";\" );';\n\t\t\trefresh_request += '\tfor ( var i = 0; i < split_cookie.length; i++ ) {';\n\t\t\trefresh_request += '\t\tvar tmp_cookie = split_cookie[i].trim();';\n\t\t\trefresh_request += '';\n\t\t\trefresh_request += '\t\tif ( tmp_cookie.indexOf( name ) === 0 ) {';\n\t\t\trefresh_request += '\t\t\treturn tmp_cookie.substring( name.length, tmp_cookie.length );';\n\t\t\trefresh_request += '\t\t}';\n\t\t\trefresh_request += '\t}';\n\t\t\trefresh_request += '\treturn \"\"';\n\t\t\trefresh_request += '}';\n\t\t\trefresh_request += '';\n\t\t\trefresh_request += 'var timeout_handler;';\n\t\t\trefresh_request += 'var post_data;';\n\t\t\trefresh_request += 'function startRefreshReport() {';\n\t\t\trefresh_request += '\tif ( typeof( auto_refresh_time ) !== \"undefined\" && auto_refresh_time > 0 ) {';\n\t\t\trefresh_request += '\t\ttimeout_handler = setTimeout( \"refreshReport()\", ( auto_refresh_time * 1000 ) );';\n\t\t\trefresh_request += '\t}';\n\t\t\trefresh_request += '}';\n\t\t\trefresh_request += '';\n\t\t\trefresh_request += 'function refreshReport() {';\n\t\t\trefresh_request += '\tthis.document.getElementById( \"refresh-icon\" ).classList.add( \"button-rotate\" );';\n\t\t\trefresh_request += '\ttry {';\n\t\t\trefresh_request += '\t\t$.ajax({';\n\t\t\trefresh_request += '\t\t\tdataType: \"JSON\",';\n\t\t\trefresh_request += '\t\t\tdata: { json: JSON.stringify( post_data ) },';\n\t\t\trefresh_request += '            headers: { \"X-Client-ID\": \"Browser-TimeTrex\", \"X-CSRF-Token\": getCookie( \"CSRF-Token\" ) },';\n\t\t\trefresh_request += '\t\t\ttype: \"POST\",';\n\t\t\trefresh_request += '            url: \"' + url + '\",';\n\t\t\trefresh_request += '\t\t\tsuccess: function(result) {';\n\t\t\trefresh_request += '\t\t\tif(console){ console.log( \"Auto refreshing report: Seconds: \"+ auto_refresh_time +\" Current Time: \"+ Date() ) }';\n\t\t\trefresh_request += '\t\t\tvar newDoc = result.api_retval + $(\"body\").children(\":last\")[0].outerHTML; document.open(\"text/html\"); document.write(newDoc); document.close(); ';\n\t\t\trefresh_request += '\t\t\t}';\n\t\t\trefresh_request += '\t\t})';\n\t\t\trefresh_request += '\t} catch(e) {}';\n\t\t\trefresh_request += '}';\n\t\t\trefresh_request += 'startRefreshReport();';\n\t\t\trefresh_request += '';\n\t\t\trefresh_request += '$( \"body\" ).mousemove( function( e ) {';\n\t\t\trefresh_request += '\twindow.parent.Global.doPingIfNecessary()';\n\t\t\trefresh_request += '} );';\n\t\t\trefresh_request += '</script>';\n\n\t\t\tthis.api['get' + this.api.key_name]( config, key, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tvar result = res.getResult();\n\t\t\t\t\tif ( result ) {\n\t\t\t\t\t\tif ( Global.isEmpty( result ) === false ) {\n\t\t\t\t\t\t\tresult = result + refresh_request;\n\t\t\t\t\t\t\tif ( new_window ) {\n\t\t\t\t\t\t\t\tvar w = window.open();\n\t\t\t\t\t\t\t\tw.post_data = post_data;\n\t\t\t\t\t\t\t\tw.document.writeln( result );\n\t\t\t\t\t\t\t\tw.document.close();\n\t\t\t\t\t\t\t} else if ( result ) {\n\t\t\t\t\t\t\t\t//Issue #3328 - Pressing view multiole times during long report generation causes multiple report wizard windows to open.\n\t\t\t\t\t\t\t\t//This is not a supported scenario, and therefore we should ignore subsequent requests. Otherwise, the user can be stuck in a broken UI state and various exceptions can occur.\n\t\t\t\t\t\t\t\tif ( BaseWizardController.isWizardInitializingOrActive( 'ReportViewWizardController' ) == true ) {\n\t\t\t\t\t\t\t\t\tDebug.Text( 'ReportViewWizardController: Ignoring request to open report, another report is already being generated or is already open.', 'ReportViewWizardController.js', 'ReportViewWizardController', 'onResult', 10 );\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar report_data = { post_data: post_data, result: result };\n\t\t\t\t\t\t\t\tIndexViewController.openWizard( 'ReportViewWizard', report_data );\n\t\t\t\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tTAlertManager.showAlert( $.i18n._( 'NO DATA MATCHES CRITERIA', LocalCacheData.getApplicationName() ), $.i18n._( 'NOTICE' ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tTAlertManager.showErrorAlert( res );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t} else if ( key === 'pdf_form_publish_employee' ) {\n\t\t\tthis.api['get' + this.api.key_name]( config, key, {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\tvar retval = result.getResult();\n\t\t\t\t\tif ( retval ) {\n\t\t\t\t\t\tUserGenericStatusWindowController.open( retval, LocalCacheData.getLoginUser().id, function() {\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tTAlertManager.showAlert( $.i18n._( 'NO DATA MATCHES CRITERIA', LocalCacheData.getApplicationName() ), $.i18n._( 'NOTICE' ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.doFormIFrameCall( post_data );\n\t\t\tProgressBar.closeOverlay();\n\n\t\t\tvar source = 'PDF'; // Backup value in case the url sm does not exist.\n\t\t\tif ( LocalCacheData.getAllURLArgs() && LocalCacheData.getAllURLArgs().sm ) {\n\t\t\t\tsource = LocalCacheData.getAllURLArgs().sm + '@PDF';\n\t\t\t}\n\t\t\t$().TFeedback( {\n\t\t\t\tsource: source,\n\t\t\t\tforce_source: true,\n\t\t\t\tdelay: 5000\n\t\t\t} );\n\t\t}\n\t}\n\n\tprocessTransactions( key ) {\n\t\tvar args = this.getPostReportJson( true );\n\t\tvar post_data = { 0: { filter_data: args }, 1: true, 2: key };\n\t\tvar pay_stub_api = TTAPI.APIPayStub;\n\t\tvar url = ServiceCaller.getAPIURL( 'Class=' + pay_stub_api.className + '&Method=' + 'get' + pay_stub_api.key_name );\n\t\tGlobal.APIFileDownload( pay_stub_api.className, pay_stub_api.key_name, post_data, url );\n\t}\n\n\tsetEditMenuViewIcon( context_btn, pId ) {\n\t}\n\n\tdoFormIFrameCall( postData ) {\n\n\t\tvar url = ServiceCaller.getAPIURL( 'Class=' + this.api.className + '&Method=' + 'get' + this.api.key_name );\n\n\t\tGlobal.APIFileDownload( this.api.className, this.api.key_name, postData, url );\n\t}\n\n\tonSaveNewReportClick() {\n\t\tvar $this = this;\n\t\tvar config = this.getPostReportJson( true );\n\t\tvar select_field = this.current_edit_record.setup_field;\n\n\t\tif ( config.template ) {\n\t\t\tselect_field.unshift( 'template' );\n\t\t}\n\n\t\tvar report_data = {};\n\t\treport_data.data = {};\n\t\treport_data.data.config = config;\n\t\treport_data.data.template = select_field;\n\t\treport_data.script = this.script_name;\n\n\t\tif ( !this.sub_saved_report_view_controller ) {\n\t\t\tthis.initSubSavedReportView( function() {\n\t\t\t\t$this.sub_saved_report_view_controller.edit_only_mode = true;\n\t\t\t\t$this.sub_saved_report_view_controller.onAddClick( report_data );\n\t\t\t} );\n\t\t} else {\n\t\t\t$this.sub_saved_report_view_controller.edit_only_mode = true;\n\t\t\t$this.sub_saved_report_view_controller.buildContextMenu( true );\n\t\t\t$this.sub_saved_report_view_controller.onAddClick( report_data );\n\t\t}\n\t}\n\n\tonSaveExistedReportClick() {\n\t\tvar $this = this;\n\t\tvar config = this.getPostReportJson( true );\n\t\tvar select_field = this.current_edit_record.setup_field;\n\n\t\tif ( config.template ) {\n\t\t\tselect_field.unshift( 'template' );\n\t\t}\n\n\t\tvar report_data = this.current_saved_report;\n\n\t\tif ( !report_data ) {\n\t\t\treport_data = {};\n\t\t}\n\n\t\treport_data.data = {};\n\t\treport_data.data.config = config;\n\t\treport_data.data.template = select_field;\n\n\t\tif ( !report_data.script ) {\n\t\t\treport_data.script = this.script_name;\n\t\t}\n\n\t\tif ( !this.sub_saved_report_view_controller ) {\n\t\t\tthis.initSubSavedReportView( function() {\n\t\t\t\t$this.sub_saved_report_view_controller.edit_only_mode = true;\n\t\t\t\t$this.sub_saved_report_view_controller.onAddClick( report_data );\n\t\t\t} );\n\t\t} else {\n\t\t\t$this.sub_saved_report_view_controller.edit_only_mode = true;\n\t\t\t$this.sub_saved_report_view_controller.buildContextMenu( true );\n\t\t\t$this.sub_saved_report_view_controller.onAddClick( report_data );\n\t\t}\n\t}\n\n\tonSaveDoneCallback( result, current_edit_record ) {\n\t\tvar new_id = result.getResult();\n\n\t\tif ( TTUUID.isUUID( new_id ) == false && current_edit_record && current_edit_record.id ) {\n\t\t\tnew_id = current_edit_record.id;\n\t\t}\n\t\tthis.refreshNav( new_id );\n\t}\n\n\trefreshNav( newId ) {\n\n\t\tvar $this = this;\n\n\t\tthis.navigation.setSourceData( null );\n\n\t\t$this.getReportData( function( result ) {\n\t\t\t// Waiting for the TTAPI.API returns data to set the current edit record.\n\n\t\t\tif ( result && result.length > 0 ) {\n\n\t\t\t\tif ( TTUUID.isUUID( newId ) ) {\n\t\t\t\t\tfor ( var i = 0; i < result.length; i++ ) {\n\t\t\t\t\t\tvar item = result[i];\n\n\t\t\t\t\t\tif ( item.id === newId ) {\n\t\t\t\t\t\t\t$this.current_saved_report = result[i];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\t$this.current_saved_report = $this.getDefaultReport( result );\n\t\t\t\t}\n\n\t\t\t\t$this.saved_report_array = result;\n\t\t\t} else {\n\t\t\t\t$this.current_saved_report = null;\n\t\t\t\t$this.saved_report_array = [];\n\t\t\t}\n\n\t\t\t$this.current_edit_record = {};\n\t\t\t$this.visible_report_values = {};\n\n\t\t\t$this.initEditView();\n\n\t\t} );\n\t}\n\n\tprocessFormSetupDataAndAddToBatch( response_data, form_data_map ) {\n\t\t//This is used to group form setup data by API so that we can do a single API call instead of one for every field.\n\t\t//The API call retrieves the real form data that is displayed when a dropdown has only one record. Data with more than 1 record or with no API\n\t\t//is set immediately as they do not require data from the server. Otherwise this returns an array of batched record IDs\n\t\t//that will be sent to the server with getBatchedRealFormDataFromAPI().\n\t\tlet batch_get_real_data = {};\n\t\tif ( response_data ) {\n\t\t\tfor ( let i = 0; i < form_data_map.length; i++ ) {\n\t\t\t\tif ( form_data_map[i].data && typeof form_data_map[i].data === 'object' && form_data_map[i].api ) {\n\t\t\t\t\tfor ( let key in form_data_map[i].data ) {\n\t\t\t\t\t\tlet field_name = form_data_map[i].field_key + '_' + key;\n\t\t\t\t\t\tif ( form_data_map[i].api && form_data_map[i].data[key] !== false && form_data_map[i].api && form_data_map[i].data[key].length === 1 ) {\n\t\t\t\t\t\t\tif ( !batch_get_real_data[form_data_map[i].api.className] ) {\n\t\t\t\t\t\t\t\tbatch_get_real_data[form_data_map[i].api.className] = {\n\t\t\t\t\t\t\t\t\tmethod: form_data_map[i].api_method,\n\t\t\t\t\t\t\t\t\trecords: []\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbatch_get_real_data[form_data_map[i].api.className].records.push( {\n\t\t\t\t\t\t\t\tfield: field_name,\n\t\t\t\t\t\t\t\tid: form_data_map[i].data[key][0]\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.edit_view_ui_dic[field_name].setValue( form_data_map[i].data[key] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.current_edit_record[field_name] = form_data_map[i].data[key];\n\t\t\t\t\t}\n\t\t\t\t} else if ( form_data_map[i].data !== undefined ) {\n\t\t\t\t\tthis.edit_view_ui_dic[form_data_map[i].field_key]?.setValue( form_data_map[i].data );\n\t\t\t\t\tthis.current_edit_record[form_data_map[i].field_key] = form_data_map[i].data;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn batch_get_real_data;\n\t}\n\n\tgetBatchedRealFormDataFromAPI( batch_data ) {\n\t\tif ( Object.keys( batch_data ).length > 0 ) {\n\t\t\tlet $this = this;\n\t\t\tfor ( let api in batch_data ) {\n\t\t\t\tlet data = {};\n\t\t\t\t//Get paystub entry account ids and remove duplicate values\n\t\t\t\tdata.filter_data = {\n\t\t\t\t\tid: _.uniq( batch_data[api].records.map( ( obj ) => {\n\t\t\t\t\t\treturn obj.id;\n\t\t\t\t\t} ) )\n\t\t\t\t};\n\n\t\t\t\tTTAPI[api][batch_data[api].method]( data, {\n\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\tlet result = res.getResult();\n\n\t\t\t\t\t\tif ( result && Array.isArray( result ) ) {\n\t\t\t\t\t\t\t//Loop through batch not api results, as results will not contain duplicate values\n\t\t\t\t\t\t\t//which would result in skipping setting fields that have the duplicate account entry id selected.\n\t\t\t\t\t\t\tfor ( let i = 0; i < batch_data[api].records.length; i++ ) {\n\t\t\t\t\t\t\t\tlet result_data = result.find( data => data.id === batch_data[api].records[i].id );\n\t\t\t\t\t\t\t\t//Issue #3130 - Deleted records that are still set on the field would cause an error. Do not set undefined to the field.\n\t\t\t\t\t\t\t\tif ( result_data !== undefined ) {\n\t\t\t\t\t\t\t\t\tif ( $this.edit_view_ui_dic[batch_data[api].records[i].field] ) {\n\t\t\t\t\t\t\t\t\t\tif ( $this.edit_view_ui_dic[batch_data[api].records[i].field].getAllowMultipleSelection() === true ) {\n\t\t\t\t\t\t\t\t\t\t\t$this.edit_view_ui_dic[batch_data[api].records[i].field].setValue( [result_data] );\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t$this.edit_view_ui_dic[batch_data[api].records[i].field].setValue( result );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\t//#2543 - fixing disconnected menu leading to page_orientation JavaScript exception\n\t//This caused a bug that if you go to Dashboard, then Report -> TimeSheet Report, then click the X at the top right, the ribbon menu would get out of sync and have the last \"Help\" top level menu selected.\n\t// onCloseIconClick: function() {\n\t// \tif ( LocalCacheData.current_open_sub_controller ) {\n\t// \t\tLocalCacheData.current_open_sub_controller.onCancelClick();\n\t// \t} else {\n\t// \t\tvar $this = this;\n\t// \t\tthis.onCancelClick( null, null, function() {\n\t// \t\t\tif ( !this.edit_view ) {\n\t// \t\t\t\t$this.parent_view_controller.buildContextMenu();\n\t// \t\t\t\t$this.parent_view_controller.setDefaultMenu();\n\t// \t\t\t\t//$this.onCancelClick();\n\t// \t\t\t} else {\n\t// \t\t\t\t$this.buildEditMenu();\n\t// \t\t\t}\n\t// \t\t} );\n\t// \t}\n\t// }\n\n}\n\nReportBaseViewController.ReportMissedField = null;"],"names":["ReportBaseViewController","BaseViewController","options","_","$this","data","item","default_context_menu_model","$","context_btn","grid_selected_length","pId","result","_a","config_result","key","callBack","args","res_data","navigation_div","default_args","next_select_item","current_url","tab_name","Global","e","target","next_select_item_id","tab","firstColumn","beforeLoadView","afterLoadView","subViewController","label","left_click","right_click","navigation_widget_div","tab_0_label","tab_1_label","tab_2_label","tab_3_label","tab_4_label","tab_5_label","tab_report","tab0_column1","form_item_input","tab_setup","tab1_column1","tab_chart","tab2_column1","template","config","i","select_template_data","other_key","chart_key","widget","res_Data","my_tabs","n","selector","items","isDisabled","doNotDoValidate","time_period","skill_expiry_date","membership_renewal_date","license_expiry_date","education_graduate_date","value","templateId","result_data","len","field","setup_field","uiModel","last_time_visible_values","order_fix","model","last_index","flag","html_item","clear_both_div","layoutName","apiClass","allowMultiple","api_instance","option","onResult","res","form_item","form_item_label","form_item_input_div","defaultValue","buildCustomDateUI","buildPayPeriodUI","buildPayPeriodScheduleUI","buildDefaultUI","form_item_div","form_input_div","v_box","pay_period","form_item2","start_date","end_date","form_item3","dont_switch_tab","details","error_list","found_in_current_tab","display_columns","fina_array","index","content","new_content","did_clean_dic","column","tab_id","other","chart","sort","new_item","report","new_report_fields","synchronous","message_override","post_data","message","source","noPreFix","menu_name","id","form_setup","new_window","url","message_id","refresh_request","w","report_data","retval","pay_stub_api","postData","select_field","current_edit_record","new_id","newId","response_data","form_data_map","batch_get_real_data","field_name","batch_data","api","obj"],"mappings":"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"}