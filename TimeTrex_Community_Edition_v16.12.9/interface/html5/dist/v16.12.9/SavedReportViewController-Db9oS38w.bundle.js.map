{"version":3,"file":"SavedReportViewController-Db9oS38w.bundle.js","sources":["../../views/reports/saved_report/SavedReportViewController.js"],"sourcesContent":["export class SavedReportViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#saved_report_view_container',\n\n\t\t\t//Issue #1187 - Many of these variables are needed when this view is rendered as a sub view\n\t\t\t//in that case, init() will not be run so those variables need to be defined at load time instead.\n\n\t\t\tsub_report_schedule_view_controller: null,\n\t\t\tedit_view_tpl: 'SavedReportEditView.html',\n\t\t\tpermission_id: 'report',\n\t\t\tviewId: 'SavedReport',\n\t\t\tscript_name: 'UserReportDataView',\n\t\t\ttable_name_key: 'user_report_data',\n\t\t\tcontext_menu_name: $.i18n._( 'Reports' ),\n\t\t\tnavigation_label: $.i18n._( 'Saved Report' ),\n\n\t\t\tapi: TTAPI.APIUserReportData\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\n\t\tthis.render();\n\t\tif ( this.sub_view_mode ) {\n\t\t\tthis.buildContextMenu( true );\n\n\t\t\t//call init data in parent view, don't call initData\n\t\t} else {\n\t\t\tthis.buildContextMenu();\n\t\t\tif ( !this.sub_view_mode ) {\n\t\t\t\tthis.initData();\n\t\t\t}\n\t\t}\n\t}\n\n\tonDeleteResult( result, remove_ids ) {\n\t\tvar $this = this;\n\t\tProgressBar.closeOverlay();\n\n\t\tif ( result && result.isValid() ) {\n\t\t\t$this.search();\n\t\t\t$this.onDeleteDone( result );\n\n\t\t\tif ( $this.edit_view ) {\n\t\t\t\t$this.removeEditView();\n\t\t\t} else {\n\t\t\t\t$this.setCurrentEditViewState( '' );\n\t\t\t}\n\n\t\t\tif ( this.sub_view_mode && this.parent_view_controller ) {\n\t\t\t\tthis.parent_view_controller.onSavedReportDelete();\n\t\t\t}\n\n\t\t} else {\n\t\t\t$this.revertEditViewState();\n\t\t\tTAlertManager.showErrorAlert( result );\n\t\t}\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'share_report':\n\n\t\t\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\t\t\tvar default_data = [];\n\t\t\t\t\tif ( this.edit_view && this.current_edit_record.id ) {\n\t\t\t\t\t\tdefault_data.push( this.current_edit_record.id );\n\t\t\t\t\t} else if ( !this.edit_view ) {\n\t\t\t\t\t\tdefault_data = this.getGridSelectIdArray();\n\t\t\t\t\t}\n\t\t\t\t\tIndexViewController.openWizard( 'ShareReportWizard', default_data );\n\t\t\t\t} else {\n\t\t\t\t\tTAlertManager.showAlert( Global.getUpgradeMessage() );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonGridDblClickRow() {\n\t\tProgressBar.showOverlay();\n\n\t\tif ( this.sub_view_mode ) {\n\t\t\tthis.onEditClick();\n\t\t} else {\n\t\t\tthis.onViewClick();\n\t\t}\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\tgroups: {\n\t\t\t\tshare: {\n\t\t\t\t\tlabel: $.i18n._( 'Share' ),\n\t\t\t\t\tid: this.viewId + 'Share'\n\t\t\t\t}\n\t\t\t},\n\t\t\texclude: ['default'],\n\t\t\tinclude: [\n\t\t\t\t'edit',\n\t\t\t\t'delete_icon',\n\t\t\t\t'delete_and_next',\n\t\t\t\t'save',\n\t\t\t\t'save_and_continue',\n\t\t\t\t'save_and_next',\n\t\t\t\t'cancel',\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Share Report' ),\n\t\t\t\t\tid: 'share_report',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\tvue_icon: 'tticon tticon-share_black_24dp',\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif ( !this.sub_view_mode ) {\n\t\t\tcontext_menu_model.include.unshift( {\n\t\t\t\tlabel: $.i18n._( 'Report' ),\n\t\t\t\tid: 'view',\n\t\t\t\tgroup: 'editor',\n\t\t\t\tvue_icon: 'tticon tticon-visibility_black_24dp',\n\t\t\t} );\n\t\t}\n\n\t\treturn context_menu_model;\n\t}\n\n\tremoveEditView() {\n\n\t\tsuper.removeEditView();\n\t\tthis.sub_report_schedule_view_controller = null;\n\t}\n\n\tgetGridSetup() {\n\t\tvar $this = this;\n\n\t\tvar grid_setup = {\n\t\t\tcontainer_selector: this.sub_view_mode ? '#tab_saved_reports' : '.view', //tab4 = Saved Report tab.\n\t\t\tsub_grid_mode: this.sub_view_mode,\n\t\t\tonSelectRow: function() {\n\t\t\t\t$this.onGridSelectRow();\n\t\t\t},\n\t\t\tonCellSelect: function() {\n\t\t\t\t$this.onGridSelectRow();\n\t\t\t},\n\t\t\tonSelectAll: function() {\n\t\t\t\t$this.onGridSelectAll();\n\t\t\t},\n\t\t\tondblClickRow: function( e ) {\n\t\t\t\t$this.onGridDblClickRow( e );\n\t\t\t},\n\t\t\tonRightClickRow: function( rowId ) {\n\t\t\t\tvar id_array = $this.getGridSelectIdArray();\n\t\t\t\tif ( id_array.indexOf( rowId ) < 0 ) {\n\t\t\t\t\t$this.grid.grid.resetSelection();\n\t\t\t\t\t$this.grid.grid.setSelection( rowId );\n\t\t\t\t\t$this.onGridSelectRow();\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t//Only use custom grid sizing when in sub_view_mode, since we need to use the BaseViewController grid sizing otherwise.\n\t\tif ( this.sub_view_mode ) {\n\t\t\tgrid_setup.setGridSize = function() {\n\t\t\t\tif ( $this.sub_view_mode ) {\n\t\t\t\t\t$this.baseViewSubTabGridResize( '#tab_saved_reports' );\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tgrid_setup.onResizeGrid = function() {\n\t\t\t\tif ( $this.sub_view_mode ) {\n\t\t\t\t\t$this.baseViewSubTabGridResize( '#tab_saved_reports' );\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\treturn grid_setup;\n\t}\n\n\tonViewClick( edit_record, noRefreshUI ) {\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\tvar id = grid_selected_id_array[0];\n\n\t\tvar record = this.getRecordFromGridById( id );\n\t\tif ( record && record.script ) {\n\t\t\tvar report_name = record.script; //Must use 'script' instead of 'script_name' so it doesn't change with different languages.\n\n\t\t\tLocalCacheData.current_doing_context_action = 'view';\n\t\t\tLocalCacheData.default_edit_id_for_next_open_edit_view = id;\n\n\t\t\tswitch ( report_name ) {\n\t\t\t\tcase 'UserExpenseReport':\n\t\t\t\t\treport_name = 'ExpenseSummaryReport';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ExceptionReport':\n\t\t\t\t\treport_name = 'ExceptionSummaryReport';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'JobDetailReport':\n\t\t\t\t\treport_name = 'JobAnalysisReport';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'AffordableCareReport':\n\t\t\t\t\tif ( Global.getProductEdition() == 10 ) {\n\t\t\t\t\t\tTAlertManager.showAlert( Global.getUpgradeMessage() );\n\t\t\t\t\t\treport_name = null;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t// Having a default that errors out makes it so we have to add every new report here. Instead, we'll just error out if the report isn't defined, which should be far fewer cases.\n\t\t\t\t// default:\n\t\t\t\t// \tProgressBar.closeOverlay();\n\t\t\t\t// \tDebug.Text( 'ERROR: Saved Report name not defined: ' + report_name, 'SavedReportViewController.js', '', 'onViewClick', 10 );\n\t\t\t\t// \treport_name = null;\n\t\t\t\t// \tbreak;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( report_name ) && report_name ) {\n\t\t\t\tIndexViewController.openReport( this, report_name );\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_report': { 'label': $.i18n._( 'Report' ) },\n\t\t\t'tab_schedule': {\n\t\t\t\t'label': $.i18n._( 'Schedule' ),\n\t\t\t\t'init_callback': 'initSubReportScheduleView',\n\t\t\t\t'show_permission_div': true\n\t\t\t},\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tif ( !this.edit_only_mode ) {\n\t\t\tthis.navigation.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIUserReportData,\n\t\t\t\tid: this.script_name + '_navigation',\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_user_report_data',\n\t\t\t\tnavigation_mode: true,\n\t\t\t\tshow_search_inputs: true\n\t\t\t} );\n\n\t\t\tthis.setNavigation();\n\n\t\t}\n\n\t\t//Tab 0 start\n\n\t\tvar tab_report = this.edit_view_tab.find( '#tab_report' );\n\n\t\tvar tab_report_column1 = tab_report.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_report_column1 );\n\n\t\t// Name\n\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Name' ), form_item_input, tab_report_column1, '' );\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Default\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\n\t\tform_item_input.TCheckbox( { field: 'is_default' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Default' ), form_item_input, tab_report_column1 );\n\n\t\t// Description\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\n\t\tform_item_input.TTextInput( { field: 'description', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Description' ), form_item_input, tab_report_column1, '', null, null, true );\n\n\t\tform_item_input.parent().width( '45%' );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Description' ),\n\t\t\t\tfield: 'description',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tscript_name: 'EmployeeView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tscript_name: 'EmployeeView',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\n\t\t];\n\t}\n\n\tinitSubReportScheduleView() {\n\t\tvar $this = this;\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\tif ( this.sub_report_schedule_view_controller ) {\n\t\t\t\tthis.sub_report_schedule_view_controller.buildContextMenu( true );\n\t\t\t\tthis.sub_report_schedule_view_controller.setDefaultMenu();\n\t\t\t\t$this.sub_report_schedule_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t\t$this.sub_report_schedule_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t\t$this.sub_report_schedule_view_controller.initData(); //Init data in this parent view\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tGlobal.loadViewSource( 'ReportSchedule', 'ReportScheduleViewController.js', function() {\n\t\t\t\tvar tab = $this.edit_view_tab.find( '#tab_schedule' );\n\n\t\t\t\tvar firstColumn = tab.find( '.first-column-sub-view' );\n\n\t\t\t\tTTPromise.add( 'initSubReportScheduleView', 'init' );\n\t\t\t\tTTPromise.wait( 'initSubReportScheduleView', 'init', function() {\n\t\t\t\t\tfirstColumn.css( 'opacity', '1' );\n\t\t\t\t} );\n\n\t\t\t\tfirstColumn.css( 'opacity', '0' ); //Hide the grid while its loading/sizing.\n\n\t\t\t\tGlobal.trackView( 'Sub' + 'ReportSchedule' + 'View' );\n\t\t\t\tReportScheduleViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.edit_view_tab.find( '#tab_schedule' ).find( '.first-column-sub-view' ).css( 'display', 'none' );\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\t\t\tthis.edit_view.find( '.save-and-continue-button-div' ).css( 'display', 'none' );\n\t\t}\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_report_schedule_view_controller = subViewController;\n\t\t\t$this.sub_report_schedule_view_controller.parent_key = 'user_report_data_id';\n\t\t\t$this.sub_report_schedule_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_report_schedule_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_report_schedule_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_report_schedule_view_controller.sub_view_mode = true;\n\n\t\t\t$this.sub_report_schedule_view_controller.initData(); //Init data in this parent view\n\t\t}\n\t}\n\n\tuniformVariable( records ) {\n\n\t\t// Remove in next commit, related to #2698 fix, no longer needed but semi-big refactor to remove\n\t\t// if ( records.hasOwnProperty( 'data' ) && records.data.hasOwnProperty( 'config' ) && records.data.config.hasOwnProperty( 'filter' ) ) {\n\t\t// \trecords.data.config.filter_ = records.data.config.filter;\n\t\t// }\n\n\t\treturn records;\n\t}\n\n\tonSaveClick( ignoreWarning, force_no_confirm = false ) {\n\t\t//Issue #3454 - Saving a report will warn about no changed data which can be confusing for users. This is because saving a report opens a new edit view.\n\t\t//Becuase of this on save we do force_no_confirm = true to avoid the warning. This does not affect the warning message when closing the edit view with pending unsaved changes.\n\t\tsuper.onSaveClick( ignoreWarning, true );\n\t}\n\n\tonSaveDone( result ) {\n\t\t//onSaveDoneCallback is set in Report controller\n\t\tif ( this.parent_view_controller && this.parent_view_controller.onSaveDoneCallback ) {\n\t\t\tthis.parent_view_controller.onSaveDoneCallback( result, this.current_edit_record );\n\t\t}\n\t}\n\n\tonSaveAndContinueDone( result ) {\n\t\tthis.onSaveDone( result );\n\t}\n\n\tonSaveAndNextDone( result ) {\n\t\tthis.onSaveDone( result );\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\t\tvar column_filter = {};\n\t\tcolumn_filter.id = true;\n\t\tcolumn_filter.is_owner = true;\n\t\tcolumn_filter.is_child = true;\n\t\tcolumn_filter.script = true; //Include script column so onViewClick() knows which view to open for saved reports.\n\n\t\t// Error: Unable to get property 'getGridParam' of undefined or null reference\n\t\tvar display_columns = [];\n\t\tif ( this.grid ) {\n\t\t\tdisplay_columns = this.grid.getGridParam( 'colModel' );\n\t\t}\n\n\t\tif ( display_columns ) {\n\t\t\tvar len = display_columns.length;\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar column_info = display_columns[i];\n\t\t\t\tcolumn_filter[column_info.name] = true;\n\t\t\t}\n\t\t}\n\n\t\treturn column_filter;\n\t}\n\n\tonAddClick( reportData ) {\n\n\t\tProgressBar.closeOverlay();\n\t\tvar $this = this;\n\t\tthis.setCurrentEditViewState( 'new' );\n\t\t$this.openEditView();\n\t\t$this.current_edit_record = reportData;\n\t\t$this.initEditView();\n\t}\n\n\tsearchDone() {\n\t\t$( 'window' ).trigger( 'resize' );\n\t\tif ( this.sub_view_mode ) {\n\t\t\tTTPromise.resolve( 'SubSavedReportView', 'init' );\n\t\t}\n\t\tsuper.searchDone();\n\t}\n}\n\nSavedReportViewController.loadSubView = function( container, beforeViewLoadedFun, afterViewLoadedFun ) {\n\n\tGlobal.loadViewSource( 'SavedReport', 'SubSavedReportView.html', function( result ) {\n\n\t\tvar args = {};\n\t\tvar template = _.template( result );\n\n\t\tif ( Global.isSet( beforeViewLoadedFun ) ) {\n\t\t\tbeforeViewLoadedFun();\n\t\t}\n\n\t\tif ( Global.isSet( container ) ) {\n\t\t\tcontainer.html( template( args ) );\n\t\t\tif ( Global.isSet( afterViewLoadedFun ) ) {\n\t\t\t\tTTPromise.wait( 'BaseViewController', 'initialize', function() {\n\t\t\t\t\tafterViewLoadedFun( window.sub_saved_report_view_controller );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n};\n"],"names":["SavedReportViewController","options","_","$","result","remove_ids","$this","id","default_data","context_menu_model","grid_setup","e","rowId","id_array","edit_record","noRefreshUI","grid_selected_id_array","record","report_name","tab_model","tab_report","tab_report_column1","form_item_input","tab","firstColumn","beforeLoadView","afterLoadView","subViewController","records","ignoreWarning","force_no_confirm","column_filter","display_columns","len","i","column_info","reportData","container","beforeViewLoadedFun","afterViewLoadedFun","args","template"],"mappings":"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"}