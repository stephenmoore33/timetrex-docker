{"version":3,"file":"AccrualPolicyViewController-BCMubygJ.bundle.js","sources":["../../views/policy/accrual_policy/AccrualPolicyViewController.js"],"sourcesContent":["export class AccrualPolicyViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#accrual_policy_view_container',\n\n\t\t\ttype_array: null,\n\t\t\tapply_frequency_array: null,\n\t\t\tmonth_of_year_array: null,\n\t\t\tday_of_month_array: null,\n\t\t\tday_of_week_array: null,\n\t\t\tmonth_of_quarter_array: null,\n\t\t\tlength_of_service_unit_array: null,\n\t\t\telgible_period_array: null,\n\t\t\toriginal_milestone_data: [],\n\t\t\tdate_api: null,\n\t\t\taccrual_policy_milestone_api: null,\n\t\t\taccrual_policy_user_modifier_api: null,\n\n\t\t\tsub_accrual_policy_user_modifier_view_controller: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'AccrualPolicyEditView.html';\n\t\tthis.permission_id = 'accrual_policy';\n\t\tthis.viewId = 'AccrualPolicy';\n\t\tthis.script_name = 'AccrualPolicyView';\n\t\tthis.table_name_key = 'accrual_policy';\n\t\tthis.context_menu_name = $.i18n._( 'Accrual Policy' );\n\t\tthis.navigation_label = $.i18n._( 'Accrual Policy' );\n\t\tthis.api = TTAPI.APIAccrualPolicy;\n\t\tthis.date_api = TTAPI.APITTDate;\n\t\tthis.accrual_policy_milestone_api = TTAPI.APIAccrualPolicyMilestone;\n\t\tthis.accrual_policy_user_modifier_api = TTAPI.APIAccrualPolicyUserModifier;\n\t\tthis.month_of_quarter_array = Global.buildRecordArray( { 1: 1, 2: 2, 3: 3 } );\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase 're_calculate_accrual':\n\t\t\t\tthis.onReCalAccrualClick();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonReCalAccrualClick() {\n\t\tvar default_data = {};\n\t\tvar $this = this;\n\n\t\tif ( this.edit_view ) {\n\t\t\tdefault_data.accrual_policy_id = [this.current_edit_record.id];\n\t\t} else {\n\t\t\tdefault_data.accrual_policy_id = this.getGridSelectIdArray();\n\t\t}\n\n\t\tIndexViewController.openWizard( 'ReCalculateAccrualWizard', default_data, function() {\n\t\t\t$this.search();\n\t\t} );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: '', //Empty label. vue_icon is displayed instead of text.\n\t\t\t\t\tid: 'other_header',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'other',\n\t\t\t\t\taction_group_header: true,\n\t\t\t\t\tvue_icon: 'tticon tticon-more_vert_black_24dp',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'ReCalculate Accrual' ),\n\t\t\t\t\tid: 're_calculate_accrual',\n\t\t\t\t\tpermission_result: true,\n\t\t\t\t\tpermission: null,\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'other'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tvar options = [\n\t\t\t{ option_name: 'type', api: this.api },\n\t\t\t{ option_name: 'apply_frequency', api: this.api },\n\t\t\t{ option_name: 'eligible_period', api: this.api },\n\t\t\t{ option_name: 'length_of_service_unit', field_name: 'length_of_service_unit_id', api: this.accrual_policy_milestone_api },\n\t\t];\n\n\t\tthis.initDropDownOptions( options );\n\n\t\tthis.date_api.getMonthOfYearArray( {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = res.getResult();\n\t\t\t\t$this.month_of_year_array = res;\n\t\t\t}\n\t\t} );\n\t\tthis.date_api.getDayOfMonthArray( {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = res.getResult();\n\t\t\t\t$this.day_of_month_array = res;\n\t\t\t}\n\t\t} );\n\t\tthis.date_api.getDayOfWeekArray( {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = res.getResult();\n\t\t\t\t$this.day_of_week_array = res;\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCustomDefaultMenuIcon( id, context_btn, grid_selected_length ) {\n\t\tswitch ( id ) {\n\t\t\tcase 're_calculate_accrual':\n\t\t\t\tthis.setDefaultMenuReCalAccrualWizardIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetCustomEditMenuIcon( id, context_btn ) {\n\t\tswitch ( id ) {\n\t\t\tcase 're_calculate_accrual':\n\t\t\t\tthis.setEditMenuReCalAccrualWizardIcon( context_btn );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetEditMenuReCalAccrualWizardIcon( context_btn ) {\n\t\tif ( PermissionManager.validate( 'accrual_policy', 'enabled' ) &&\n\t\t\t( PermissionManager.validate( 'accrual_policy', 'edit' ) || PermissionManager.validate( 'accrual_policy', 'edit_child' ) || PermissionManager.validate( 'accrual_policy', 'edit_own' ) )\n\t\t) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\n\t\t} else {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\n\t\tif ( this.current_edit_record && this.current_edit_record.id ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsetDefaultMenuReCalAccrualWizardIcon( context_btn, grid_selected_length ) {\n\t\tif ( PermissionManager.validate( 'accrual_policy', 'enabled' ) &&\n\t\t\t( PermissionManager.validate( 'accrual_policy', 'edit' ) || PermissionManager.validate( 'accrual_policy', 'edit_child' ) || PermissionManager.validate( 'accrual_policy', 'edit_own' ) )\n\t\t) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\n\t\t} else {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\n\t\tif ( grid_selected_length >= 1 ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_accrual_policy': { 'label': $.i18n._( 'Accrual Policy' ), 'is_multi_column': true },\n\t\t\t'tab_eligibility': { 'label': $.i18n._( 'Eligibility' ) },\n\t\t\t'tab_length_of_service_milestones': {\n\t\t\t\t'label': $.i18n._( 'Length Of Service Milestones' ),\n\t\t\t\t'html_template': this.getAccrualPolicyLengthOfServiceMilestonesTabHtml()\n\t\t\t},\n\t\t\t'tab_employee_settings': {\n\t\t\t\t'label': $.i18n._( 'Employee Settings' ),\n\t\t\t\t'init_callback': 'initSubAccrualPolicyUserModifier',\n\t\t\t\t'display_on_mass_edit': false,\n\t\t\t\t'show_permission_div': true\n\t\t\t},\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIAccrualPolicy,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_accrual',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_accrual_policy = this.edit_view_tab.find( '#tab_accrual_policy' );\n\t\tvar tab_eligibility = this.edit_view_tab.find( '#tab_eligibility' );\n\t\tvar tab_length_of_service_milestones = this.edit_view_tab.find( '#tab_length_of_service_milestones' );\n\n\t\tvar tab_accrual_policy_column1 = tab_accrual_policy.find( '.first-column' );\n\t\tvar tab_eligibility_column1 = tab_eligibility.find( '.first-column' );\n\t\tvar tab_length_of_service_milestones_column1 = tab_length_of_service_milestones.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\t\tthis.edit_view_tabs[0].push( tab_accrual_policy_column1 );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\t\tvar label;\n\n\t\t//Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'name', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Name' ), form_item_input, tab_accrual_policy_column1, '' );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Description\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\tform_item_input.TTextArea( { field: 'description', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Description' ), form_item_input, tab_accrual_policy_column1, '', null, null, true );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t//Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'type_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab_accrual_policy_column1 );\n\n\t\t// Contributing Shift\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIContributingShiftPolicy,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_contributing_shift_policy',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tset_default: true,\n\t\t\tfield: 'contributing_shift_policy_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Contributing Shift Policy' ), form_item_input, tab_accrual_policy_column1, '', null, true );\n\n\t\t// Accrual Account\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIAccrualPolicyAccount,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_accrual_policy_account',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tset_default: true,\n\t\t\tfield: 'accrual_policy_account_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Accrual Account' ), form_item_input, tab_accrual_policy_column1 );\n\n\t\t//Length of Service contributing pay codes.\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIContributingPayCodePolicy,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_contributing_pay_code_policy',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tset_default: true,\n\t\t\tfield: 'length_of_service_contributing_pay_code_policy_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Length Of Service Hours Based On' ), form_item_input, tab_length_of_service_milestones_column1, '', null, true );\n\n\t\t//Milestone Rollover Based On\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Milestone Rollover Based On' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_accrual_policy_column1, '', null, true, false, 'separated_2' );\n\n\t\t//Employee's Hire Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'milestone_rollover_hire_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee\\'s Hire Date' ), form_item_input, tab_accrual_policy_column1, '', null, true );\n\n\t\t//Month\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'milestone_rollover_month' } );\n\t\tform_item_input.setSourceData( $this.month_of_year_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Month' ), form_item_input, tab_accrual_policy_column1, '', null, true );\n\n\t\t//Day Of Month\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'milestone_rollover_day_of_month' } );\n\t\tform_item_input.setSourceData( $this.day_of_month_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Day of Month' ), form_item_input, tab_accrual_policy_column1, '', null, true );\n\n\t\tvar tab_accrual_policy_column2 = tab_accrual_policy.find( '.second-column' );\n\t\tthis.edit_view_tabs[0].push( tab_accrual_policy_column2 );\n\n\t\t// Excess Rollover Accrual Account\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIAccrualPolicyAccount,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_accrual_policy_account',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tset_default: true,\n\t\t\tfield: 'excess_rollover_accrual_policy_account_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Move Excess Rollover Time To' ), form_item_input, tab_accrual_policy_column1 );\n\n\n\t\t//Frequency In Which To Apply Time to Employee Records\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Frequency In Which To Apply Time to Employee Records' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_accrual_policy_column2, '', null, true, false, 'separated_1' );\n\n\t\t//Frequency\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'apply_frequency_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.apply_frequency_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Frequency' ), form_item_input, tab_accrual_policy_column2, '', null, true );\n\n\t\t//Employee's Hire Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'apply_frequency_hire_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee\\'s Hire Date' ), form_item_input, tab_accrual_policy_column2, '', null, true );\n\n\t\t//Month\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'apply_frequency_month' } );\n\t\tform_item_input.setSourceData( $this.month_of_year_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Month' ), form_item_input, tab_accrual_policy_column2, '', null, true );\n\n\t\t//Day Of Month\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'apply_frequency_day_of_month' } );\n\t\tform_item_input.setSourceData( $this.day_of_month_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Day of Month' ), form_item_input, tab_accrual_policy_column2, '', null, true );\n\n\t\t//Day Of Week\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'apply_frequency_day_of_week' } );\n\t\tform_item_input.setSourceData( $.extend( {}, $this.day_of_week_array ) );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Day Of Week' ), form_item_input, tab_accrual_policy_column2, '', null, true );\n\n\t\t// Month of Quarter\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'apply_frequency_quarter_month', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.month_of_quarter_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Month of Quarter' ), form_item_input, tab_accrual_policy_column2, '', null, true );\n\n\t\t//Enable Opening Balance\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_opening_balance' } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( '(Applies Initial Accrual Amount on Hire Date)' ) + '</span>' );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Enable Opening Balance' ), form_item_input, tab_accrual_policy_column2, '', widgetContainer, true );\n\n\t\t//Enable Pro-Rate Initial Period\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'enable_pro_rate_initial_period' } );\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( '(Based on Hire Date)' ) + '</span>' );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Prorate Initial Accrual Amount' ), form_item_input, tab_accrual_policy_column2, '', widgetContainer, true );\n\n\n\t\tthis.edit_view_tabs[1] = [];\n\t\tthis.edit_view_tabs[1].push( tab_eligibility_column1 );\n\n\t\t// After Minimum Employed Days\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'minimum_employed_days', width: 30 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'After Minimum Employed Days' ), form_item_input, tab_eligibility_column1, '', null, true );\n\n\n\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\t//Eligibility Tab\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\t\tform_item_input.TComboBox( { field: 'eligible_period_id', set_empty: false } );\n\t\t\tform_item_input.setSourceData( $this.eligible_period_array );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Eligibility Period' ), form_item_input, tab_eligibility_column1 );\n\n\t\t\t// Minimum Worked Hours\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tform_item_input.TTextInput( { field: 'minimum_eligible_time', mode: 'time_unit', need_parser_sec: true } );\n\t\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\t\tvar check_box = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\t\tcheck_box.TCheckbox( { field: 'minimum_eligible_apply_retroactive' } );\n\t\t\tvar label = $( '<span class=\\'widget-right-label\\'>' + $.i18n._( 'Apply Retroactively' ) + '</span>' );\n\t\t\twidgetContainer.append( form_item_input );\n\t\t\twidgetContainer.append( label );\n\t\t\twidgetContainer.append( check_box );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'After Minimum Time' ), [form_item_input, check_box], tab_eligibility_column1, '', widgetContainer, true );\n\n\t\t\t// Maximum Worked Hours\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tform_item_input.TTextInput( { field: 'maximum_eligible_time', mode: 'time_unit', need_parser_sec: true } );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Before Maximum Time' ), form_item_input, tab_eligibility_column1, '', null, true );\n\n\t\t\t// Contributing Shift\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIContributingShiftPolicy,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_contributing_shift_policy',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_empty: true,\n\t\t\t\tset_default: true,\n\t\t\t\tfield: 'eligible_contributing_shift_policy_id'\n\t\t\t} );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Contributing Shift Policy' ), form_item_input, tab_eligibility_column1, '', null, true );\n\t\t}\n\n\n\t\tvar tab_length_of_service_milestones = this.edit_view_tab.find( '#tab_length_of_service_milestones' );\n\n\t\t//\n\t\t//Inside editor\n\t\t//\n\t\tvar inside_editor_div = tab_length_of_service_milestones.find( '.inside-editor-div' );\n\t\tvar args = {\n\t\t\tlength_of_service: $.i18n._( 'Length Of Service' ),\n\t\t\taccrual_rate: $.i18n._( 'Accrual Rate/Year' ),\n\t\t\taccrual_total_maximum: $.i18n._( 'Accrual Maximum Balance' ),\n\t\t\tannual_maximum_rollover: $.i18n._( 'Annual Maximum Rollover' ),\n\t\t\tannual_maximum_time: $.i18n._( 'Annual Accrual Maximum' )\n\t\t};\n\n\t\tthis.editor = Global.loadWidgetByName( FormItemType.INSIDE_EDITOR );\n\n\t\tthis.editor.InsideEditor( {\n\t\t\taddRow: this.insideEditorAddRow,\n\t\t\tremoveRow: this.insideEditorRemoveRow,\n\t\t\tgetValue: this.insideEditorGetValue,\n\t\t\tsetValue: this.insideEditorSetValue,\n\t\t\trender: getRender(),\n\t\t\trender_args: args,\n\t\t\trender_inline_html: true,\n\t\t\trow_render: getRowRender(),\n\t\t\tparent_controller: this\n\t\t} );\n\n\t\tfunction getRender() {\n\t\t\treturn `\n\t\t\t<table class=\"inside-editor-render\">\n\t\t\t\t<tr class=\"title\">\n\t\t\t\t\t<td style=\"width: 200px\"><%= length_of_service %></td>\n\t\t\t\t\t<td style=\"width: 200px\"><%= accrual_rate %></td>\n\t\t\t\t\t<td class=\"annual-maximum-time-td\" style=\"width: 200px\"><%= annual_maximum_time %></td>\n\t\t\t\t\t<td style=\"width: 200px\"><%= accrual_total_maximum %></td>\n\t\t\t\t\t<td style=\"width: 200px\"><%= annual_maximum_rollover %></td>\n\t\t\t\t\t<td style=\"width: 25px\"></td>\n\t\t\t\t\t<td style=\"width: 25px\"></td>\n\t\t\t\t</tr>\n\t\t\t</table>`;\n\t\t}\n\n\t\tfunction getRowRender() {\n\t\t\treturn `\n\t\t\t<tr class=\"inside-editor-row data-row\">\n\t\t\t\t<td class=\"length_of_service cell\"></td>\n\t\t\t\t<td class=\"accrual_rate cell\"></td>\n\t\t\t\t<td class=\"annual_maximum_time annual-maximum-time-td cell\"></td>\n\t\t\t\t<td class=\"accrual_total_maximum cell\"></td>\n\t\t\t\t<td class=\"annual_maximum_rollover cell\"></td>\n\t\t\t\t<td class=\"cell control-icon\">\n\t\t\t\t\t<button class=\"plus-icon\" onclick=\"\"></button>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"cell control-icon\">\n\t\t\t\t\t<button class=\"minus-icon \" onclick=\"\"></button>\n\t\t\t\t</td>\n\t\t\t</tr>`;\n\t\t}\n\n\t\tinside_editor_div.append( this.editor );\n\t}\n\n\tonMilestoneRolloverHireDate() {\n\t\tif ( this.current_edit_record['milestone_rollover_hire_date'] === true ) {\n\t\t\tthis.detachElement( 'milestone_rollover_month' );\n\t\t\tthis.detachElement( 'milestone_rollover_day_of_month' );\n\t\t} else if ( this.current_edit_record['milestone_rollover_hire_date'] === false ) {\n\t\t\tthis.attachElement( 'milestone_rollover_month' );\n\t\t\tthis.attachElement( 'milestone_rollover_day_of_month' );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tonApplyFrequencyHireDate() {\n\t\tif ( this.current_edit_record['apply_frequency_id'] == 20 ) {\n\t\t\tthis.attachElement( 'apply_frequency_hire_date' );\n\t\t\tif ( this.current_edit_record['apply_frequency_hire_date'] === true ) {\n\t\t\t\tthis.detachElement( 'apply_frequency_month' );\n\t\t\t\tthis.detachElement( 'apply_frequency_day_of_month' );\n\t\t\t} else {\n\t\t\t\tthis.attachElement( 'apply_frequency_month' );\n\t\t\t\tthis.attachElement( 'apply_frequency_day_of_month' );\n\t\t\t}\n\n\t\t\tthis.editFieldResize();\n\t\t}\n\t}\n\n\tonApplyFrequencyChange( arg ) {\n\t\tif ( !Global.isSet( arg ) ) {\n\t\t\tif ( !Global.isSet( this.current_edit_record['apply_frequency_id'] ) ) {\n\t\t\t\tthis.current_edit_record['apply_frequency_id'] = 10;\n\t\t\t}\n\n\t\t\targ = this.current_edit_record['apply_frequency_id'];\n\t\t}\n\t\tthis.detachElement( 'apply_frequency_hire_date' );\n\t\tthis.detachElement( 'apply_frequency_month' );\n\t\tthis.detachElement( 'apply_frequency_day_of_month' );\n\t\tthis.detachElement( 'apply_frequency_day_of_week' );\n\t\tthis.detachElement( 'apply_frequency_quarter_month' );\n\n\t\tif ( arg == 20 ) {\n\t\t\tthis.onApplyFrequencyHireDate();\n\t\t} else if ( arg == 30 ) {\n\t\t\tthis.attachElement( 'apply_frequency_day_of_month' );\n\t\t} else if ( arg == 40 ) {\n\t\t\tthis.attachElement( 'apply_frequency_day_of_week' );\n\t\t} else if ( arg == 25 ) {\n\t\t\tthis.attachElement( 'apply_frequency_day_of_month' );\n\t\t\tthis.attachElement( 'apply_frequency_quarter_month' );\n\t\t}\n\n\t\tif ( this.edit_view_ui_dic['type_id'].getValue() == 20 && this.edit_view_ui_dic['eligible_period_id'] && this.edit_view_ui_dic['eligible_period_id'].getValue() != 0 ) {\n\t\t\tthis.edit_view_ui_dic['eligible_period_id'].setValue( arg );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tonContributingShiftPolicyChange() {\n\t\tif ( this.edit_view_ui_dic['contributing_shift_policy_id'] && this.edit_view_ui_dic['eligible_contributing_shift_policy_id'] ) {\n\t\t\tthis.current_edit_record['eligible_contributing_shift_policy_id'] = this.edit_view_ui_dic['contributing_shift_policy_id'].getValue();\n\t\t\tthis.edit_view_ui_dic['eligible_contributing_shift_policy_id'].setValue( this.edit_view_ui_dic['contributing_shift_policy_id'].getValue() );\n\t\t}\n\t}\n\n\tonTypeChange() {\n\t\tif ( !Global.isSet( this.current_edit_record['type_id'] ) ) {\n\t\t\tthis.current_edit_record['type_id'] = 20;\n\t\t}\n\n\t\tif ( this.current_edit_record['type_id'] == 20 ) {\n\t\t\tif ( !this.is_mass_editing ) {\n\t\t\t\t$( this.edit_view_tab.find( 'ul li' )[1] ).show();\n\t\t\t\t$( this.edit_view_tab.find( 'ul li' )[2] ).show();\n\t\t\t}\n\t\t\tthis.edit_view_tab.find( '#tab_accrual_policy' ).find( '.second-column' ).css( 'display', 'block' );\n\t\t\tthis.edit_view_tab.find( '#tab_accrual_policy' ).find( '.first-column' ).removeClass( 'full-width-column' );\n\t\t\tthis.attachElement( 'separated_1' );\n\t\t\tthis.attachElement( 'apply_frequency_id' );\n\t\t\tthis.attachElement( 'minimum_employed_days' );\n\t\t\tthis.detachElement( 'contributing_shift_policy_id' );\n\t\t\tthis.attachElement( 'enable_opening_balance' );\n\t\t\tthis.attachElement( 'enable_pro_rate_initial_period' );\n\n\t\t\tthis.onApplyFrequencyChange();\n\t\t\tthis.onApplyFrequencyHireDate();\n\t\t} else if ( this.current_edit_record['type_id'] == 30 ) {\n\t\t\tif ( !this.is_mass_editing ) {\n\t\t\t\t$( this.edit_view_tab.find( 'ul li' )[1] ).show();\n\t\t\t\t$( this.edit_view_tab.find( 'ul li' )[2] ).show();\n\t\t\t}\n\t\t\tthis.edit_view_tab.find( '#tab_accrual_policy' ).find( '.second-column' ).css( 'display', 'none' );\n\t\t\tthis.edit_view_tab.find( '#tab_accrual_policy' ).find( '.first-column' ).removeClass( 'full-width-column' );\n\t\t\tthis.attachElement( 'contributing_shift_policy_id' );\n\t\t\tthis.attachElement( 'separated_1' );\n\t\t\tthis.attachElement( 'minimum_employed_days' );\n\t\t\tthis.detachElement( 'enable_opening_balance' );\n\t\t\tthis.detachElement( 'enable_pro_rate_initial_period' );\n\t\t\tthis.detachElement( 'apply_frequency_id' );\n\n\t\t\tthis.onApplyFrequencyChange( false );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t\tthis.setAccrualRateFormat();\n\t}\n\n\tonEligiblePeriodChange() {\n\t\tif ( !Global.isSet( this.current_edit_record['eligible_period_id'] ) ) {\n\t\t\tthis.current_edit_record['eligible_period_id'] = 0;\n\t\t}\n\n\t\tif ( this.current_edit_record['eligible_period_id'] == 0 ) {\n\t\t\tthis.detachElement( 'minimum_eligible_time' );\n\t\t\tthis.detachElement( 'minimum_eligible_apply_retroactive' );\n\t\t\tthis.detachElement( 'maximum_eligible_time' );\n\t\t\tthis.detachElement( 'eligible_contributing_shift_policy_id' );\n\t\t} else {\n\t\t\tthis.attachElement( 'minimum_eligible_time' );\n\t\t\tthis.attachElement( 'minimum_eligible_apply_retroactive' );\n\t\t\tthis.attachElement( 'maximum_eligible_time' );\n\t\t\tthis.attachElement( 'eligible_contributing_shift_policy_id' );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tsetAccrualRateFormat( type ) {\n\n\t\tvar len = this.editor.rows_widgets_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar row = this.editor.rows_widgets_array[i];\n\n\t\t\tif ( this.current_edit_record['type_id'] == 30 ) {\n\t\t\t\trow.accrual_rate_hourly.show();\n\t\t\t\trow.accrual_rate_yearly.hide();\n\t\t\t} else {\n\t\t\t\trow.accrual_rate_yearly.show();\n\t\t\t\trow.accrual_rate_hourly.hide();\n\t\t\t}\n\t\t}\n\n\t\tvar td = $( '.inside-editor-render' ).children().eq( 0 ).children().eq( 0 ).children().eq( 1 );\n\t\tif ( this.current_edit_record['type_id'] == 30 ) {\n\t\t\ttd.text( $.i18n._( 'Accrual Rate/Hour' ) );\n\t\t\t$( '.annual-maximum-time-td' ).show();\n\t\t} else {\n\t\t\ttd.text( $.i18n._( 'Accrual Rate/Year' ) );\n\t\t\t$( '.annual-maximum-time-td' ).hide();\n\t\t}\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\n\t\tthis.current_edit_record[key] = c_value;\n\t\tif ( key === 'type_id' ) {\n\t\t\tthis.onTypeChange();\n\t\t}\n\n\t\tif ( key === 'apply_frequency_id' ) {\n\t\t\tthis.onApplyFrequencyChange();\n\t\t}\n\n\t\tif ( key === 'apply_frequency_hire_date' ) {\n\t\t\tthis.onApplyFrequencyHireDate();\n\t\t}\n\n\t\tif ( key === 'milestone_rollover_hire_date' ) {\n\t\t\tthis.onMilestoneRolloverHireDate();\n\t\t}\n\n\t\tif ( key === 'eligible_period_id' ) {\n\t\t\tthis.onEligiblePeriodChange();\n\t\t}\n\n\t\tif ( key === 'contributing_shift_policy_id' ) {\n\t\t\tthis.onContributingShiftPolicyChange()\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tisDisplayLengthOfServiceHoursBasedOn() {\n\t\tvar len = this.editor.rows_widgets_array.length;\n\n\t\tvar count = 0;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar row = this.editor.rows_widgets_array[i];\n\t\t\tif ( row['length_of_service_unit_id'].getValue() == 50 ) {\n\t\t\t\tcount++;\n\t\t\t}\n\n\t\t}\n\n\t\tif ( count === 0 ) {\n\t\t\tthis.detachElement( 'length_of_service_contributing_pay_code_policy_id' );\n\t\t\tthis.edit_view_tab.find( '#tab_length_of_service_milestones' ).find( '.first-column' ).css( 'border', 'none' );\n\t\t} else {\n\t\t\tthis.attachElement( 'length_of_service_contributing_pay_code_policy_id' );\n\t\t\tthis.edit_view_tab.find( '#tab_length_of_service_milestones' ).find( '.first-column' ).css( 'border', '1px solid #c7c7c7' );\n\t\t}\n\t}\n\n\tinsideEditorSetValue( val ) {\n\t\tvar len = val.length;\n\n\t\tthis.removeAllRows();\n\t\tfor ( var i = 0; i < val.length; i++ ) {\n\t\t\tif ( Global.isSet( val[i] ) ) {\n\t\t\t\tvar row = val[i];\n\t\t\t\tif ( Global.isSet( this.parent_id ) ) {\n\t\t\t\t\trow['id'] = '';\n\t\t\t\t}\n\t\t\t\tthis.addRow( row );\n\t\t\t}\n\n\t\t}\n\t}\n\n\tinsideEditorAddRow( data, index ) {\n\n\t\tif ( !data ) {\n\t\t\tdata = {};\n\t\t}\n\n\t\tvar row_id = ( data.id && this.parent_controller.current_edit_record.id ) ? data.id : TTUUID.generateUUID();\n\n\t\tvar $this = this;\n\t\tvar row = this.getRowRender(); //Get Row render\n\t\tvar render = this.getRender(); //get render, should be a table\n\t\tvar widgets = {}; //Save each row's widgets\n\n\t\t//Build row widgets\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\n\t\t// Length Of Service\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\n\t\tvar label_1 = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'After' ) + ': ' + ' </span>' );\n\t\tvar label_2 = $( '<span class=\\'widget-right-label\\'>&nbsp;</span>' );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'length_of_service', width: 30 } );\n\t\tform_item_input.setValue( data.length_of_service ? data.length_of_service : 0 );\n\t\tform_item_input.attr( 'milestone_id', row_id );\n\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\tvar form_item_combobox = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_combobox.TComboBox( { field: 'length_of_service_unit_id' } );\n\t\tform_item_combobox.setSourceData( this.parent_controller.length_of_service_unit_array );\n\t\tform_item_combobox.setValue( data.length_of_service_unit_id ? data.length_of_service_unit_id : 10 );\n\n\t\tform_item_combobox.bind( 'formItemChange', function( e, target ) {\n\t\t\t$this.parent_controller.isDisplayLengthOfServiceHoursBasedOn();\n\t\t} );\n\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_combobox );\n\n\t\twidgetContainer.append( label_1 );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label_2 );\n\t\twidgetContainer.append( form_item_combobox );\n\n\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\twidgets[form_item_combobox.getField()] = form_item_combobox;\n\t\trow.children().eq( 0 ).append( widgetContainer );\n\n\t\t// Accrual Rate/Year\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tform_item_input.TTextInput( { field: 'accrual_rate_hourly', width: 90, need_parser_sec: false } );\n\t\tform_item_input.setPlaceHolder( '' );\n\t\tform_item_input.setValue( data.accrual_rate ? data.accrual_rate : '0.000' );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\trow.children().eq( 1 ).append( widgetContainer );\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'accrual_rate_yearly',\n\t\t\twidth: 90,\n\t\t\tmode: 'time_unit',\n\t\t\tneed_parser_sec: true\n\t\t} );\n\t\tform_item_input.setValue( data.accrual_rate ? data.accrual_rate : '0' );\n\t\twidgetContainer.append( form_item_input );\n\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\trow.children().eq( 1 ).append( widgetContainer );\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\tif ( data.type_id == 30 ) {\n\t\t\twidgets.accrual_rate_hourly.show();\n\t\t\twidgets.accrual_rate_yearly.hide();\n\t\t} else {\n\t\t\twidgets.accrual_rate_yearly.show();\n\t\t\twidgets.accrual_rate_hourly.hide();\n\t\t}\n\n\t\t//Annual Accrual Maximum\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'annual_maximum_time',\n\t\t\twidth: 90,\n\t\t\tmode: 'time_unit',\n\t\t\tneed_parser_sec: true\n\t\t} );\n\t\tform_item_input.setValue( data.annual_maximum_time ? data.annual_maximum_time : '0' );\n\n\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\trow.children().eq( 2 ).append( form_item_input );\n\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t// Accrual Total Maximum\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'maximum_time', width: 90, mode: 'time_unit', need_parser_sec: true } );\n\t\tform_item_input.setValue( data.maximum_time ? data.maximum_time : '0' );\n\n\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\trow.children().eq( 3 ).append( form_item_input );\n\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t// Annual Maximum Rollover\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'rollover_time', width: 90, mode: 'time_unit', need_parser_sec: true } );\n\t\tform_item_input.setValue( data.rollover_time ? data.rollover_time : '0' );\n\n\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\trow.children().eq( 4 ).append( form_item_input );\n\n\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\tif ( typeof index != 'undefined' ) {\n\n\t\t\trow.insertAfter( $( render ).find( 'tr' ).eq( index ) );\n\t\t\tthis.rows_widgets_array.splice( ( index ), 0, widgets );\n\n\t\t} else {\n\t\t\t$( render ).append( row );\n\t\t\tthis.rows_widgets_array.push( widgets );\n\t\t}\n\n\t\tif ( this.parent_controller.is_viewing ) {\n\t\t\trow.find( '.control-icon' ).hide();\n\t\t}\n\n\t\tthis.addIconsEvent( row ); //Bind event to add and minus icon\n\t\tthis.removeLastRowLine();\n\n\t\tthis.parent_controller.setAccrualRateFormat();\n\t}\n\n\tinsideEditorRemoveRow( row ) {\n\t\tvar index = row[0].rowIndex - 1;\n\t\tvar remove_id = this.rows_widgets_array[index].length_of_service.attr( 'milestone_id' );\n\t\tif ( remove_id && TTUUID.isUUID( remove_id ) && remove_id != TTUUID.not_exist_id && remove_id != TTUUID.zero_id ) {\n\t\t\tthis.delete_ids.push( remove_id );\n\t\t}\n\t\trow.remove();\n\t\tthis.rows_widgets_array.splice( index, 1 );\n\t\tthis.removeLastRowLine();\n\n\t\tthis.parent_controller.isDisplayLengthOfServiceHoursBasedOn();\n\t}\n\n\tinsideEditorGetValue( current_edit_item_id ) {\n\t\tvar len = this.rows_widgets_array.length;\n\n\t\tvar result = [];\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar row = this.rows_widgets_array[i];\n\t\t\tvar accrual_rate = 0;\n\n\t\t\tif ( this.parent_controller.current_edit_record.type_id == 30 ) {\n\t\t\t\taccrual_rate = row.accrual_rate_hourly.getValue();\n\t\t\t} else {\n\t\t\t\taccrual_rate = row.accrual_rate_yearly.getValue();\n\t\t\t}\n\n\t\t\tvar data = {\n\t\t\t\tlength_of_service: row.length_of_service.getValue(),\n\t\t\t\tlength_of_service_unit_id: row.length_of_service_unit_id.getValue(),\n\t\t\t\taccrual_rate: accrual_rate,\n\t\t\t\tmaximum_time: row.maximum_time.getValue(),\n\t\t\t\trollover_time: row.rollover_time.getValue()\n\n\t\t\t};\n\n\t\t\tif ( this.parent_controller.current_edit_record.type_id == 30 ) {\n\t\t\t\tdata.annual_maximum_time = row.annual_maximum_time.getValue();\n\t\t\t}\n\n\t\t\tdata.id = row.length_of_service.attr( 'milestone_id' );\n\n\t\t\tdata.accrual_policy_id = current_edit_item_id;\n\t\t\tresult.push( data );\n\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\n\t\tthis.onApplyFrequencyChange();\n\t\tthis.onTypeChange();\n\t\tthis.onMilestoneRolloverHireDate();\n\t\tthis.onEligiblePeriodChange();\n\n\t\tthis.initInsideEditorData();\n\t}\n\n\tinitInsideEditorData() {\n\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\targs.filter_data = {};\n\n\t\tif ( this.mass_edit || ( ( !this.current_edit_record || !this.current_edit_record.id ) && !this.copied_record_id ) ) {\n\t\t\t$this.editor.removeAllRows();\n\t\t\t$this.editor.addRow();\n\t\t\t$this.isDisplayLengthOfServiceHoursBasedOn();\n\t\t\t$this.original_milestone_data = [];\n\t\t} else {\n\t\t\targs.filter_data.accrual_policy_id = this.current_edit_record.id ? this.current_edit_record.id : this.copied_record_id;\n\t\t\tthis.copied_record_id = '';\n\t\t\tthis.accrual_policy_milestone_api.getAccrualPolicyMilestone( args, true, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tif ( !$this.edit_view ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar data = res.getResult();\n\t\t\t\t\tif ( data === true ) { // result is null\n\t\t\t\t\t\t$this.original_milestone_data = [];\n\t\t\t\t\t\t$this.editor.addRow();\n\t\t\t\t\t} else if ( data.length > 0 ) {\n\t\t\t\t\t\t$this.original_milestone_data =  _.map(data, _.clone);\n\t\t\t\t\t\t$this.editor.setValue( data );\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.isDisplayLengthOfServiceHoursBasedOn();\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\t}\n\n\tsaveInsideEditorData( result, callBack ) {\n\t\tvar $this = this;\n\t\tvar data = this.editor.getValue( this.refresh_id );\n\t\tvar remove_ids = $this.editor.delete_ids;\n\t\tif ( remove_ids.length > 0 ) {\n\t\t\t$this.accrual_policy_milestone_api.deleteAccrualPolicyMilestone( remove_ids, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tif ( res && res.isValid() ) {\n\t\t\t\t\t\t$this.editor.delete_ids = [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tlet changed_data = this.getChangedRecords( data, this.original_milestone_data, [] );\n\n\t\tif ( Array.isArray( changed_data ) && changed_data.length > 0 ) {\n\t\t\t$this.accrual_policy_milestone_api.setAccrualPolicyMilestone( changed_data, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tvar res_data = res.getResult();\n\t\t\t\t\tif ( Global.isSet( result ) ) {\n\t\t\t\t\t\tresult();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\tif ( Global.isSet( result ) ) {\n\t\t\t\tresult();\n\t\t\t}\n\t\t}\n\t}\n\n\tonSaveResult( result ) {\n\t\tif ( result && result.isValid() ) {\n\t\t\tvar result_data = result.getResult();\n\t\t\tif ( result_data === true ) {\n\t\t\t\tthis.refresh_id = this.current_edit_record.id; // as add\n\t\t\t} else if ( result_data && TTUUID.isUUID( result_data ) && result_data != TTUUID.not_exist_id && result_data != TTUUID.zero_id ) {\n\t\t\t\tthis.refresh_id = result_data;\n\t\t\t}\n\n\t\t\tif ( this.is_mass_editing == false ) {\n\t\t\t\tvar $this = this;\n\t\t\t\t$this.saveInsideEditorData( function() {\n\t\t\t\t\t$this.search();\n\t\t\t\t\t$this.onSaveDone( result );\n\n\t\t\t\t\t$this.removeEditView();\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tthis.search();\n\t\t\t\tthis.onSaveDone( result );\n\t\t\t\tthis.removeEditView();\n\t\t\t}\n\n\t\t} else {\n\t\t\tthis.setErrorTips( result );\n\t\t\tthis.setErrorMenu();\n\t\t}\n\t}\n\n\tremoveEditView() {\n\n\t\tsuper.removeEditView();\n\t\tthis.sub_accrual_policy_user_modifier_view_controller = null;\n\t}\n\n\tonSaveAndCopyResult( result ) {\n\t\tvar $this = this;\n\t\tif ( result && result.isValid() ) {\n\t\t\tvar result_data = result.getResult();\n\t\t\tif ( result_data === true ) {\n\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\n\t\t\t} else if ( result_data && TTUUID.isUUID( result_data ) && result_data != TTUUID.not_exist_id && result_data != TTUUID.zero_id ) {\n\t\t\t\t$this.refresh_id = result_data;\n\t\t\t}\n\n\t\t\t$this.saveInsideEditorData( function() {\n\t\t\t\t$this.search( false );\n\t\t\t\t$this.onCopyAsNewClick();\n\n\t\t\t} );\n\n\t\t} else {\n\t\t\t$this.setErrorTips( result );\n\t\t\t$this.setErrorMenu();\n\t\t}\n\t}\n\n\t_continueDoCopyAsNew() {\n\t\tLocalCacheData.current_doing_context_action = 'copy_as_new';\n\t\tthis.is_add = true;\n\t\tif ( Global.isSet( this.edit_view ) ) {\n\t\t\tfor ( var i = 0; i < this.editor.rows_widgets_array.length; i++ ) {\n\t\t\t\tthis.editor.rows_widgets_array[i].length_of_service.attr( 'milestone_id', '' );\n\t\t\t}\n\t\t}\n\t\tsuper._continueDoCopyAsNew();\n\t}\n\n\tonCopyAsNewResult( result ) {\n\t\tvar $this = this;\n\t\tvar result_data = result.getResult();\n\n\t\tif ( !result_data ) {\n\t\t\tTAlertManager.showAlert( $.i18n._( 'Record does not exist' ) );\n\t\t\t$this.onCancelClick();\n\t\t\treturn;\n\t\t}\n\n\t\t$this.openEditView(); // Put it here is to avoid if the selected one is not existed in data or have deleted by other pragram. in this case, the edit view should not be opend.\n\n\t\tresult_data = result_data[0];\n\n\t\tthis.copied_record_id = result_data.id;\n\n\t\tresult_data.id = '';\n\n\t\tif ( $this.sub_view_mode && $this.parent_key ) {\n\t\t\tresult_data[$this.parent_key] = $this.parent_value;\n\t\t}\n\n\t\t$this.current_edit_record = result_data;\n\t\t$this.initEditView();\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'name',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tinitSubAccrualPolicyUserModifier() {\n\t\tvar $this = this;\n\n\t\tif ( Global.getProductEdition() <= 10 ) { //This must go before the current_edit_record.id check below, otherwise we return too early and it displays the wrong div.\n\t\t\tthis.edit_view_tab.find( '#tab_employee_settings' ).find( '.first-column-sub-view' ).css( 'display', 'none' );\n\t\t\tthis.edit_view.find( '.save-and-continue-div' ).css( 'display', 'none' );\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\t\t} else {\n\t\t\tthis.edit_view_tab.find( '#tab_employee_settings' ).find( '.first-column-sub-view' ).css( 'display', 'block' );\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\t\t}\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.sub_accrual_policy_user_modifier_view_controller ) {\n\t\t\tthis.sub_accrual_policy_user_modifier_view_controller.buildContextMenu( true );\n\t\t\tthis.sub_accrual_policy_user_modifier_view_controller.setDefaultMenu();\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_key = 'accrual_policy_id';\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.initData(); //Init data in this parent view\n\t\t\treturn;\n\t\t}\n\n\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\tGlobal.loadScript( 'views/policy/accrual_policy/AccrualPolicyUserModifierViewController.js', function() {\n\t\t\t\tvar tab_accrual_policy = $this.edit_view_tab.find( '#tab_employee_settings' );\n\n\t\t\t\tvar firstColumn = tab_accrual_policy.find( '.first-column-sub-view' );\n\n\t\t\t\tGlobal.trackView( 'Sub' + 'AccrualPolicyUserModifier' + 'View' );\n\t\t\t\tAccrualPolicyUserModifierViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\t\t\t} );\n\t\t}\n\n\t\tfunction beforeLoadView( tpl ) {\n\t\t\tvar args = { parent_view: 'accrual_policy' };\n\t\t\treturn { template: _.template( tpl ), args: args };\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller = subViewController;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_key = 'accrual_policy_id';\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.parent_view_controller = $this;\n\t\t\tTTPromise.wait( 'BaseViewController', 'initialize', function() {\n\t\t\t\t$this.sub_accrual_policy_user_modifier_view_controller.initData(); //Init data in this parent view\n\t\t\t} );\n\t\t}\n\t}\n\n\tgetAccrualPolicyLengthOfServiceMilestonesTabHtml() {\n\t\treturn `<div id=\"tab_length_of_service_milestones\" class=\"edit-view-tab-outside\">\n\t\t\t\t\t<div class=\"edit-view-tab\" id=\"tab_length_of_service_milestones_content_div\">\n\t\t\t\t\t\t<div class=\"first-column full-width-column\"></div>\n\t\t\t\t\t\t<div class=\"inside-editor-div full-width-column\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t}\n\n}\n"],"names":["AccrualPolicyViewController","options","_","$","id","default_data","$this","context_menu_model","res","context_btn","grid_selected_length","tab_model","tab_accrual_policy","tab_eligibility","tab_length_of_service_milestones","tab_accrual_policy_column1","tab_eligibility_column1","tab_length_of_service_milestones_column1","form_item_input","widgetContainer","label","tab_accrual_policy_column2","check_box","inside_editor_div","args","getRender","getRowRender","arg","type","len","i","row","td","target","doNotValidate","key","c_value","count","val","data","index","row_id","render","widgets","label_1","label_2","form_item_combobox","e","remove_id","current_edit_item_id","result","accrual_rate","callBack","remove_ids","changed_data","result_data","firstColumn","beforeLoadView","afterLoadView","tpl","subViewController"],"mappings":"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"}