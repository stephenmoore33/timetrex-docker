{"version":3,"file":"TimeSheetAuthorizationViewController-DozFPW5F.bundle.js","sources":["../../views/my_account/timesheet_authorization/TimeSheetAuthorizationViewController.js"],"sourcesContent":["export class TimeSheetAuthorizationViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#time_sheet_authorization_view_container',\n\n\t\t\ttype_array: null,\n\t\t\thierarchy_level_array: null,\n\n\t\t\tmessages: null,\n\n\t\t\tmessage_control_api: null,\n\n\t\t\tauthorization_api: null,\n\n\t\t\trequest_api: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'TimeSheetAuthorizationEditView.html';\n\t\tthis.permission_id = 'punch';\n\t\tthis.viewId = 'TimeSheetAuthorization';\n\t\tthis.script_name = 'TimeSheetAuthorizationView';\n\t\tthis.table_name_key = 'pay_period_time_sheet_verify';\n\t\tthis.context_menu_name = $.i18n._( 'TimeSheet (Authorizations)' );\n\t\tthis.navigation_label = $.i18n._( 'TimeSheet' );\n\t\tthis.api = TTAPI.APIPayPeriodTimeSheetVerify;\n\t\tthis.request_api = TTAPI.APIRequest;\n\t\tthis.message_control_api = TTAPI.APIMessageControl;\n\t\tthis.authorization_api = TTAPI.APIAuthorization;\n\t\tthis.event_bus = new TTEventBus({ view_id: this.viewId });\n\n\t\tthis.render();\n\t\tthis.buildContextMenu( true );\n\n\t\tthis.initData();\n\n\t\tthis.hierarchy_type_id = 90;\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tvar result = this.request_api.getHierarchyLevelOptions( [-1], { async: false } );\n\t\tif ( result && result.isValid() ) {\n\t\t\tvar data = result.getResult();\n\t\t\t$this['hierarchy_level_array'] = Global.buildRecordArray( data );\n\t\t\tif ( Global.isSet( $this.basic_search_field_ui_dic['hierarchy_level'] ) ) {\n\t\t\t\t$this.basic_search_field_ui_dic['hierarchy_level'].setSourceData( Global.buildRecordArray( data ) );\n\t\t\t}\n\t\t}\n\t}\n\n\tsearch( set_default_menu, page_action, page_number, callBack ) {\n\t\tthis.refresh_id = null;\n\t\tthis.updateBadgeCount();\n\t\tsuper.search( set_default_menu, page_action, page_number, callBack );\n\t}\n\n\tupdateBadgeCount() {\n\t\tthis.event_bus.emit( 'tt_topbar', 'profile_pending_counts', { //Update \"My Profile\" badge.\n\t\t\tobject_types: [ 'notification', 'timesheet_authorization' ]\n\t\t} );\n\t}\n\n\tprocessResultData( result_data ) {\n\t\tvar len = result_data.length;\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar item = result_data[i];\n\t\t\tif ( item.id == TTUUID.not_exist_id ) {\n\t\t\t\titem.id = item.user_id + '_' + item.pay_period_id;\n\t\t\t}\n\t\t}\n\n\t\treturn result_data;\n\t}\n\n\tparseToRecordId( id, index ) {\n\t\tif ( !id ) {\n\t\t\treturn false;\n\t\t}\n\t\tid = id.toString();\n\t\tif ( id.indexOf( '_' ) > 0 ) {\n\t\t\tif ( index >= 0 ) {\n\t\t\t\treturn id.split( '_' )[index];\n\t\t\t}\n\t\t\treturn TTUUID.not_exist_id;\n\t\t} else {\n\t\t\treturn id;\n\t\t}\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\tgroups: {\n\t\t\t\taction: {\n\t\t\t\t\tlabel: $.i18n._( 'Action' ),\n\t\t\t\t\tid: this.script_name + 'action'\n\t\t\t\t},\n\t\t\t\tauthorization: {\n\t\t\t\t\tlabel: $.i18n._( 'Authorization' ),\n\t\t\t\t\tid: this.script_name + 'authorization'\n\t\t\t\t},\n\t\t\t\tobjects: {\n\t\t\t\t\tlabel: $.i18n._( 'Objects' ),\n\t\t\t\t\tid: this.script_name + 'objects'\n\t\t\t\t}\n\t\t\t},\n\t\t\texclude: ['default'],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'View' ),\n\t\t\t\t\tid: 'view',\n\t\t\t\t\tgroup: 'action',\n\t\t\t\t\tvue_icon: 'tticon tticon-visibility_black_24dp',\n\t\t\t\t\tshow_on_right_click: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Cancel' ),\n\t\t\t\t\tid: 'cancel',\n\t\t\t\t\tgroup: 'action',\n\t\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Authorize' ),\n\t\t\t\t\tid: 'authorization',\n\t\t\t\t\tvue_icon: 'tticon tticon-thumb_up_black_24dp',\n\t\t\t\t\tmenu_align: 'center'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Pass' ),\n\t\t\t\t\tid: 'pass',\n\t\t\t\t\tvue_icon: 'tticon tticon-redo_black_24dp',\n\t\t\t\t\tmenu_align: 'center'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Decline' ),\n\t\t\t\t\tid: 'decline',\n\t\t\t\t\tvue_icon: 'tticon tticon-thumb_down_black_24dp',\n\t\t\t\t\tmenu_align: 'center'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Jump To' ),\n\t\t\t\t\tid: 'jump_to_header',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\taction_group_header: true,\n\t\t\t\t\tpermission_result: false // to hide it in legacy context menu and avoid errors in legacy parsers.\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'TimeSheet' ),\n\t\t\t\t\tid: 'timesheet',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Schedule' ),\n\t\t\t\t\tid: 'schedule',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Export' ),\n\t\t\t\t\tid: 'export_excel',\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\tvue_icon: 'tticon tticon-file_upload_black_24dp',\n\t\t\t\t\tmenu_align: 'right'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit Employee' ),\n\t\t\t\t\tid: 'edit_employee',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\t},\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tsetDefaultMenuViewIcon( context_btn, grid_selected_length, p_id ) {\n\t\tif ( !this.viewPermissionValidate( p_id ) || this.edit_only_mode ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsetDefaultMenuEditIcon( context_btn, grid_selected_length ) {\n\t\tif ( !this.editPermissionValidate( 'punch' ) || this.edit_only_mode ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\n\t\tif ( grid_selected_length === 1 && this.editOwnerOrChildPermissionValidate( 'punch' ) && this.parseToRecordId( this.getGridSelectIdArray()[0] ) !== TTUUID.not_exist_id ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsetEditMenuEditIcon( context_btn ) {\n\t\tif ( !this.editPermissionValidate( 'punch' ) || this.edit_only_mode ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\t\tif ( !this.is_viewing || !this.editOwnerOrChildPermissionValidate( 'punch' ) || this.parseToRecordId( this.current_edit_record.id ) === TTUUID.not_exist_id ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\t\t// Error: Unable to get property 'getGridParam' of undefined or null reference\n\t\tvar display_columns = [];\n\t\tif ( this.grid ) {\n\t\t\tdisplay_columns = this.grid.getGridParam( 'colModel' );\n\t\t}\n\n\t\tvar column_filter = {};\n\t\tcolumn_filter.is_owner = true;\n\t\tcolumn_filter.id = true;\n\t\tcolumn_filter.user_id = true;\n\t\tcolumn_filter.is_child = true;\n\t\tcolumn_filter.in_use = true;\n\t\tcolumn_filter.first_name = true;\n\t\tcolumn_filter.last_name = true;\n\t\tcolumn_filter.start_date = true;\n\t\tcolumn_filter.end_date = true;\n\t\tcolumn_filter.pay_period_id = true;\n\n\t\tif ( display_columns ) {\n\t\t\tvar len = display_columns.length;\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar column_info = display_columns[i];\n\t\t\t\tcolumn_filter[column_info.name] = true;\n\t\t\t}\n\t\t}\n\n\t\treturn column_filter;\n\t}\n\n\tsetDefaultMenuAuthorizationExpenseIcon( context_btn, grid_selected_length ) {\n\t\tif ( !( Global.getProductEdition() >= 25 ) ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t}\n\n\tsetCustomDefaultMenuIcon( id, context_btn, grid_selected_length ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'send':\n\t\t\t\tthis.setDefaultMenuSaveIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t\tcase 'authorization':\n\t\t\t\tthis.setDefaultMenuAuthorizationIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t\tcase 'pass':\n\t\t\t\tthis.setDefaultMenuPassIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t\tcase 'decline':\n\t\t\t\tthis.setDefaultMenuDeclineIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t\tcase 'authorization_request':\n\t\t\t\tthis.setDefaultMenuAuthorizationRequestIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t\tcase 'authorization_timesheet':\n\t\t\t\tthis.setDefaultMenuAuthorizationTimesheetIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t\tcase 'timesheet':\n\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'punch' );\n\t\t\t\tbreak;\n\t\t\tcase 'schedule':\n\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'schedule' );\n\t\t\t\tbreak;\n\t\t\tcase 'edit_employee':\n\t\t\t\tthis.setDefaultMenuViewIcon( context_btn, grid_selected_length, 'user' );\n\t\t\t\tbreak;\n\t\t\tcase 'authorization_expense':\n\t\t\t\tthis.setDefaultMenuAuthorizationExpenseIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetCustomEditMenuIcon( id, context_btn ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'send':\n\t\t\t\tthis.setEditMenuSaveIcon( context_btn );\n\t\t\t\tbreak;\n\t\t\tcase 'authorization':\n\t\t\t\tthis.setEditMenuAuthorizationIcon( context_btn );\n\t\t\t\tbreak;\n\t\t\tcase 'pass':\n\t\t\t\tthis.setEditMenuPassIcon( context_btn );\n\t\t\t\tbreak;\n\t\t\tcase 'decline':\n\t\t\t\tthis.setEditMenuDeclineIcon( context_btn );\n\t\t\t\tbreak;\n\t\t\tcase 'authorization_request':\n\t\t\t\tthis.setEditMenuAuthorizationRequestIcon( context_btn );\n\t\t\t\tbreak;\n\t\t\tcase 'authorization_timesheet':\n\t\t\t\tthis.setEditMenuAuthorizationTimesheetIcon( context_btn );\n\t\t\t\tbreak;\n\t\t\tcase 'timesheet':\n\t\t\t\tthis.setEditMenuNavViewIcon( context_btn, 'punch' );\n\t\t\t\tbreak;\n\t\t\tcase 'schedule':\n\t\t\t\tthis.setEditMenuNavViewIcon( context_btn, 'schedule' );\n\t\t\t\tbreak;\n\t\t\tcase 'edit_employee':\n\t\t\t\tthis.setEditMenuNavEditIcon( context_btn, 'user' );\n\t\t\t\tbreak;\n\t\t\tcase 'authorization_expense':\n\t\t\t\tthis.setEditMenuAuthorizationExpenseIcon( context_btn );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetEditMenuAuthorizationExpenseIcon( context_btn ) {\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t}\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'send':\n\t\t\t\tthis.onSaveClick();\n\t\t\t\tbreak;\n\t\t\tcase 'authorization':\n\t\t\t\tthis.onAuthorizationClick();\n\t\t\t\tbreak;\n\t\t\tcase 'pass':\n\t\t\t\tthis.onPassClick();\n\t\t\t\tbreak;\n\t\t\tcase 'decline':\n\t\t\t\tthis.onDeclineClick();\n\t\t\t\tbreak;\n\t\t\tcase 'authorization_request':\n\t\t\t\tthis.onAuthorizationRequestClick();\n\t\t\t\tbreak;\n\t\t\tcase 'authorization_timesheet':\n\t\t\t\tbreak; //Already here, don't do anything.\n\t\t\tcase 'authorization_expense':\n\t\t\t\tthis.onAuthorizationExpenseClick();\n\t\t\t\tbreak;\n\t\t\tcase 'timesheet':\n\t\t\tcase 'schedule':\n\t\t\tcase 'edit_employee':\n\t\t\tcase 'export_excel':\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thandleAuthorizationButtons( enable = true ) {\n\t\tif ( enable == true ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, 'authorization', true );\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, 'pass', true );\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, 'decline', true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, 'authorization', false );\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, 'pass', false );\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, 'decline', false );\n\t\t}\n\t}\n\n\tonAuthorizationExpenseClick() {\n\t\tIndexViewController.goToView( 'ExpenseAuthorization' );\n\t}\n\n\tonNavigationClick( iconName ) {\n\n\t\tvar $this = this;\n\n\t\tvar grid_selected_id_array;\n\n\t\tvar filter = {};\n\n\t\tvar ids = [];\n\n\t\tvar user_ids = [];\n\n\t\tvar base_date;\n\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\tids.push( $this.current_edit_record.id );\n\t\t\tuser_ids.push( $this.current_edit_record.user_id );\n\t\t\tbase_date = $this.current_edit_record.start_date;\n\t\t} else {\n\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\tids.push( grid_selected_row.id );\n\t\t\t\tuser_ids.push( grid_selected_row.user_id );\n\t\t\t\tbase_date = grid_selected_row.start_date;\n\t\t\t} );\n\t\t}\n\n\t\t//Error: TypeError: Global.strToDateTime(...) is null in interface/html5/framework/jquery.min.js?v=9.0.0-20151014-164655 line 2 > eval line 552\n\t\tbase_date = base_date ? Global.strToDateTime( base_date ).format() : new Date().format();\n\n\t\tswitch ( iconName ) {\n\t\t\tcase 'edit_employee':\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tIndexViewController.openEditView( this, 'Employee', user_ids[0] );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'timesheet':\n\t\t\t\tif ( user_ids.length > 0 ) {\n\t\t\t\t\tfilter.user_id = user_ids[0];\n\t\t\t\t\tfilter.base_date = base_date;\n\t\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Authorization - TimeSheet' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'TimeSheet', filter );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'schedule':\n\t\t\t\tfilter.filter_data = {};\n\t\t\t\tvar include_users = { value: user_ids };\n\t\t\t\tfilter.filter_data.include_user_ids = include_users;\n\t\t\t\tfilter.select_date = base_date;\n\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Authorization - TimeSheet' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'Schedule', filter );\n\t\t\t\tbreak;\n\n\t\t\tcase 'export_excel':\n\t\t\t\tthis.onExportClick( 'export' + this.api.key_name );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonSaveClick( ignoreWarning ) {\n\t\tif ( !Global.isSet( ignoreWarning ) ) {\n\t\t\tignoreWarning = false;\n\t\t}\n\t\tif ( this.is_edit ) {\n\n\t\t\tvar $this = this;\n\n\t\t\tvar record = {};\n\n\t\t\tthis.is_add = false;\n\n\t\t\trecord = this.uniformVariable( record );\n\n\t\t\tthis.message_control_api['setMessageControl']( record, false, ignoreWarning, {\n\t\t\t\tonResult: function( result ) {\n\n\t\t\t\t\t$this.onSaveResult( result );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tonSaveResult( result ) {\n\t\tvar $this = this;\n\t\tvar current_edit_record_id;\n\n\t\tif ( result && result.isValid() ) {\n\t\t\tcurrent_edit_record_id = $this.current_edit_record.id;\n\n\t\t\t$this.onViewClick( current_edit_record_id, true );\n\t\t} else {\n\t\t\t$this.setErrorMenu();\n\t\t\t$this.setErrorTips( result );\n\n\t\t}\n\t}\n\n\tvalidate() {\n\n\t\tvar $this = this;\n\n\t\tvar record = this.current_edit_record;\n\n\t\trecord = this.uniformVariable( record );\n\n\t\tthis.message_control_api['validate' + this.message_control_api.key_name]( record, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.validateResult( result );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tonAuthorizationClick() {\n\t\tvar $this = this;\n\t\tvar data = [];\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tvar getRecordFilterData = ( record_data ) => {\n\t\t\tvar filter = {};\n\t\t\tfilter.authorized = true;\n\t\t\tif ( this.parseToRecordId( record_data.id ) == TTUUID.not_exist_id ) {\n\t\t\t\tfilter.object_id = TTUUID.not_exist_id;\n\t\t\t\tfilter.user_id = record_data.user_id;\n\t\t\t\tfilter.pay_period_id = record_data.pay_period_id;\n\t\t\t} else {\n\t\t\t\tfilter.object_id = record_data.id;\n\t\t\t}\n\t\t\tfilter.object_type_id = 90;\n\n\t\t\treturn filter;\n        };\n\n\t\tif ( grid_selected_length > 0 && !this.is_viewing && !this.is_edit ) { //Only do mass authorization if not in list view.\n\t\t\tfor ( var i = 0; i < grid_selected_length; i++ ) {\n\t\t\t\tvar record_data = this.getRecordFromGridById( grid_selected_id_array[i] );\n\t\t\t\tdata.push( getRecordFilterData( record_data ) );\n\t\t\t}\n\t\t} else {\n\t\t\tdata.push( getRecordFilterData( $this.current_edit_record ) );\n\t\t}\n\n\t\t$this.handleAuthorizationButtons( false ); //Disable the authorization buttons while the authorization is being processed.\n\n\t\t$this.authorization_api['setAuthorization']( data, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tif ( res && res.isValid() ) {\n\t\t\t\t\t$this.updateBadgeCount();\n\t\t\t\t\tif ( $this.is_edit || $this.is_viewing ) {\n\t\t\t\t\t\t$this.onRightArrowClick( function() {\n\t\t\t\t\t\t\t$this.search( false );\n\t\t\t\t\t\t\t$().TFeedback( {\n\t\t\t\t\t\t\t\tsource: 'Authorize'\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.search( true );\n\t\t\t\t\t\t$().TFeedback( {\n                            source: 'Authorize'\n                        } );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tTAlertManager.showErrorAlert( res );\n\t\t\t\t}\n\n\t\t\t\t$this.handleAuthorizationButtons( true ); //Enable the authorization buttons while the authorization is being processed.\n\t\t\t},\n\t\t\tonError: function( result ) {\n\t\t\t\t$this.handleAuthorizationButtons( true ); //Enable the authorization buttons while the authorization is being processed.\n\t\t\t}\n\t\t} );\n\t}\n\n\tonPassClick() {\n\t\tvar $this = this;\n\t\tthis.onRightArrowClick( function() {\n\t\t\t$this.search();\n\t\t\t$().TFeedback( {\n\t\t\t\tsource: 'Pass'\n\t\t\t} );\n\t\t} );\n\t}\n\n\tonAuthorizationRequestClick() {\n\t\tIndexViewController.goToView( 'RequestAuthorization' );\n\t}\n\n\tonCancelClick( force_no_confirm, cancel_all, callback ) {\n\t\t//Refresh grid on cancel as its not done during authorize/decline anymore.\n\t\tvar $this = this;\n\t\tsuper.onCancelClick( force_no_confirm, cancel_all, function() {\n\t\t\t//Since we are overriding the callback function to call this.search(), make sure the original callback is still called.\n\t\t\tif ( callback ) {\n\t\t\t\tcallback();\n\t\t\t}\n\n\t\t\t$this.search();\n\t\t} );\n\t}\n\n\tonDeclineClick() {\n\n\t\tvar $this = this;\n\t\tvar data = [];\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\n\t\tvar getRecordFilterData = ( record_data ) => {\n\t\t\tvar filter = {};\n\t\t\tfilter.authorized = false;\n\t\t\tif ( this.parseToRecordId( record_data.id ) == TTUUID.not_exist_id ) {\n\t\t\t\tfilter.object_id = TTUUID.not_exist_id;\n\t\t\t\tfilter.user_id = record_data.user_id;\n\t\t\t\tfilter.pay_period_id = record_data.pay_period_id;\n\t\t\t} else {\n\t\t\t\tfilter.object_id = record_data.id;\n\t\t\t}\n\t\t\tfilter.object_type_id = 90;\n\n\t\t\treturn filter;\n\t\t};\n\n\t\tif ( grid_selected_length > 0 && !this.is_viewing && !this.is_edit ) { //Only do mass authorization if not in list view.\n\t\t\tfor ( var i = 0; i < grid_selected_length; i++ ) {\n\t\t\t\tvar record_data = this.getRecordFromGridById( grid_selected_id_array[i] );\n\t\t\t\tdata.push( getRecordFilterData( record_data ) );\n\t\t\t}\n\t\t} else {\n\t\t\tdata.push( getRecordFilterData( $this.current_edit_record ) );\n\t\t}\n\n\t\t$this.handleAuthorizationButtons( false ); //Disable the authorization buttons while the authorization is being processed.\n\n\t\t$this.authorization_api['setAuthorization']( data, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tif ( res && res.isValid() ) {\n\t\t\t\t\t$this.updateBadgeCount();\n\t\t\t\t\tif ( $this.is_edit || $this.is_viewing ) {\n\t\t\t\t\t\t$this.search( false );\n\t\t\t\t\t\t$this.onRightArrowClick( function() {\n\t\t\t\t\t\t\t$().TFeedback( {\n\t\t\t\t\t\t\t\tsource: 'Decline'\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.search( true );\n\t\t\t\t\t\t$().TFeedback( {\n\t\t\t\t\t\t\tsource: 'Decline'\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tTAlertManager.showErrorAlert( res );\n\t\t\t\t}\n\n\t\t\t\t$this.handleAuthorizationButtons( true ); //Enable the authorization buttons while the authorization is being processed.\n\t\t\t},\n\t\t\tonError: function( result ) {\n\t\t\t\t$this.handleAuthorizationButtons( true ); //Enable the authorization buttons while the authorization is being processed.\n\t\t\t}\n\t\t} );\n\t}\n\n\tonAuthorizationTimesheetClick() {\n\t\tthis.search( false );\n\t}\n\n\tuniformVariable( records ) {\n\n\t\tvar msg = {};\n\n\t\tif ( this.is_edit && this.current_edit_record != undefined ) {\n\t\t\tmsg.body = this.current_edit_record['body'];\n\t\t\tmsg.from_user_id = this.current_edit_record['user_id'];\n\t\t\tmsg.to_user_id = this.current_edit_record['user_id'];\n\t\t\tmsg.object_id = this.current_edit_record['id'];\n\t\t\tmsg.object_type_id = 90;\n\t\t\tif ( Global.isFalseOrNull( this.current_edit_record['subject'] ) ) {\n\t\t\t\tmsg.subject = this.edit_view_ui_dic['subject'].getValue();\n\t\t\t} else {\n\t\t\t\tmsg.subject = this.current_edit_record['subject'];\n\t\t\t}\n\t\t\treturn msg;\n\t\t}\n\t\trecords.id = this.parseToRecordId( records.id );\n\t\treturn records;\n\t}\n\n\tgetAPIFilters() {\n\t\t// override this function if view requires more filters\n\t\tvar record_id = this.getCurrentSelectedRecord();\n\t\tvar filter = {};\n\n\t\tfilter.filter_data = {};\n\t\tif ( this.parseToRecordId( record_id ) != TTUUID.not_exist_id ) {\n\t\t\tfilter.filter_data.id = [record_id];\n\t\t} else {\n\t\t\tfilter.filter_data.user_id = this.parseToRecordId( record_id, 0 );\n\t\t\tfilter.filter_data.pay_period_id = this.parseToRecordId( record_id, 1 );\n\t\t}\n\n\t\treturn filter;\n\t}\n\n\thandleViewAPICallbackResult( result ) {\n\t\tvar result_data = result.getResult();\n\t\tvar record_id = this.getCurrentSelectedRecord();\n\n\t\tresult_data = this.processResultData( result_data );\n\t\tif ( !result_data ) {\n\t\t\tresult_data = [];\n\t\t}\n\n\t\tresult_data = result_data[0];\n\t\treturn super.handleViewAPICallbackResult( result_data );\n\t}\n\n\tdoViewClickResult( result_data ) {\n\t\tsuper.doViewClickResult( result_data );\n\t\tAuthorizationHistory.init( this );\n\t}\n\n\tonGridDblClickRow() {\n\n\t\tProgressBar.showOverlay();\n\t\tthis.onViewClick();\n\t}\n\n\tsetEditMenuAuthorizationIcon( context_btn ) {\n\t\tif ( this.is_edit ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t}\n\t}\n\n\tsetEditMenuPassIcon( context_btn ) {\n\t\tif ( this.is_edit ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t}\n\t}\n\n\tsetEditMenuDeclineIcon( context_btn ) {\n\t\tif ( this.is_edit ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t}\n\t}\n\n\tsetEditMenuAuthorizationRequestIcon( context_btn ) {\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t}\n\t}\n\n\tsetEditMenuAuthorizationTimesheetIcon( context_btn ) {\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t}\n\t}\n\n\tsetDefaultMenuSaveIcon( context_btn, grid_selected_length ) {\n\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t}\n\n\tsetDefaultMenuAuthorizationIcon( context_btn, grid_selected_length ) {\n\t\tif ( grid_selected_length > 0 ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsetDefaultMenuPassIcon( context_btn, grid_selected_length ) {\n\t\tif ( !this.is_viewing ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\n\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t}\n\n\tsetDefaultMenuDeclineIcon( context_btn, grid_selected_length ) {\n\t\tif ( grid_selected_length > 0 ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsetDefaultMenuAuthorizationRequestIcon( context_btn, grid_selected_length ) {\n\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t}\n\n\tsetDefaultMenuAuthorizationTimesheetIcon( context_btn, grid_selected_length ) {\n\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Pay Period' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'pay_period_id',\n\t\t\t\tlayout_name: 'global_Pay_period',\n\t\t\t\tapi_class: TTAPI.APIPayPeriod,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Hierarchy Level' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tmultiple: false,\n\t\t\t\tset_any: false,\n\t\t\t\tfield: 'hierarchy_level',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tonEditClick( editId, noRefreshUI ) {\n\n\t\tvar $this = this;\n\t\tthis.is_viewing = false;\n\t\tthis.is_edit = true;\n\t\tthis.is_add = false;\n\t\tLocalCacheData.current_doing_context_action = 'edit';\n\t\t$this.openEditView();\n\n\t\t$this.initEditView();\n\t}\n\n\tgetSubViewFilter( filter ) {\n\n\t\tif ( filter.length === 0 ) {\n\t\t\tfilter = {};\n\t\t}\n\n\t\tif ( !Global.isSet( filter.hierarchy_level ) ) {\n\t\t\tfilter['hierarchy_level'] = 1;\n\t\t\tthis.filter_data['hierarchy_level'] = {\n\t\t\t\tfield: 'hierarchy_level',\n\t\t\t\tid: '',\n\t\t\t\tvalue: this.basic_search_field_ui_dic['hierarchy_level'].getValue( true )\n\t\t\t};\n\t\t}\n\n\t\treturn filter;\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\n\t\tvar tab_model = {\n\t\t\t'tab_timesheet_verification': { 'label': $.i18n._( 'Message' ), 'is_multi_column': true },\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation = null;\n\n\t\t//Tab 0 start\n\n\t\tvar tab_timesheet_verification = this.edit_view_tab.find( '#tab_timesheet_verification' );\n\t\tvar tab_timesheet_verification_column1 = tab_timesheet_verification.find( '.first-column' );\n\t\tvar tab_timesheet_verification_column2 = tab_timesheet_verification.find( '.second-column' );\n\t\tthis.edit_view_tabs[0] = [];\n\t\tthis.edit_view_tabs[0].push( tab_timesheet_verification_column1 );\n\n\t\t// Subject\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'subject', width: 359 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Subject' ), form_item_input, tab_timesheet_verification_column1, '' );\n\n\t\t// Body\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\tform_item_input.TTextArea( { field: 'body', width: 600, height: 400 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Body' ), form_item_input, tab_timesheet_verification_column1, '', null, null, true );\n\t\ttab_timesheet_verification_column2.css( 'display', 'none' );\n\t}\n\n\tneedShowNavigation() {\n\t\tif ( this.is_viewing && this.current_edit_record && Global.isSet( this.current_edit_record.id ) && this.current_edit_record.id ) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tbuildViewUI() {\n\t\tvar pager_data = this.navigation && this.navigation.getPagerData && this.navigation.getPagerData();\n\t\tvar source_data = this.navigation && this.navigation.getSourceData && this.navigation.getSourceData();\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_timesheet_verification': {\n\t\t\t\t'label': $.i18n._( 'TimeSheet Verification' ),\n\t\t\t\t'html_template': this.getTimeSheetAuthorizationTabHtml(),\n\t\t\t},\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIPayPeriodTimeSheetVerify,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_Pay_period',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true,\n\t\t\textendDataProcessWhenSearch: this.processResultData\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\tif ( pager_data && source_data ) {\n\t\t\tthis.navigation.setSourceData( source_data );\n\t\t\tthis.navigation.setPagerData( pager_data );\n\t\t}\n\n\t\t//Tab 0 first column start\n\n\t\tvar tab_timesheet_verification = this.edit_view_tab.find( '#tab_timesheet_verification' );\n\t\tvar tab_timesheet_verification_column1 = tab_timesheet_verification.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\t\tthis.edit_view_tabs[0].push( tab_timesheet_verification_column1 );\n\n\t\t// Employee\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'full_name', selected_able: true } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee' ), form_item_input, tab_timesheet_verification_column1, '' );\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'status', selected_able: true } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_timesheet_verification_column1, '' );\n\n\t\t// Pay Period\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'pay_period', selected_able: true } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Pay Period' ), form_item_input, tab_timesheet_verification_column1 );\n\n\t\t// tab_timesheet_verification first column end\n\n\t\tvar separate_box = tab_timesheet_verification.find( '.separate' );\n\n\t\t// Messages\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Messages' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, separate_box );\n\n\t\tseparate_box.css( 'display', 'none' );\n\n\t\t// Tab 0 second column start\n\n\t\tvar tab_timesheet_verification_column2 = tab_timesheet_verification.find( '.second-column' );\n\n\t\tthis.edit_view_tabs[0].push( tab_timesheet_verification_column2 );\n\n\t\t// From\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'from', selected_able: true } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'From' ), form_item_input, tab_timesheet_verification_column2, '' );\n\n\t\t// Subject\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'subject', selected_able: true } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Subject' ), form_item_input, tab_timesheet_verification_column2 );\n\n\t\t// Body\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'body', width: 600, height: 400, selected_able: true } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Body' ), form_item_input, tab_timesheet_verification_column2, '', null, true, true );\n\n\t\t// Tab 0 second column end\n\n\t\ttab_timesheet_verification_column2.css( 'display', 'none' );\n\t}\n\n\tinitEditViewUI( view_id, edit_view_file_name ) {\n\t\tGlobal.setUINotready();\n\t\tTTPromise.add( 'init', 'init' );\n\t\tTTPromise.wait();\n\t\tvar $this = this;\n\n\t\tif ( this.edit_view ) {\n\t\t\tthis.edit_view.remove();\n\t\t}\n\n\t\tthis.edit_view = $( Global.loadViewSource( view_id, edit_view_file_name, null, true ) );\n\n\t\tthis.edit_view_tab = $( this.edit_view.find( '.edit-view-tab-bar' ) );\n\n\t\t//Give edt view tab a id, so we can load it when put right click menu on it\n\t\tthis.edit_view_tab.attr( 'id', this.ui_id + '_edit_view_tab' );\n\n\t\t// Moved into generic BaseView.initEditViewTabs\n\t\t// this.setTabOVisibility( false );\n\t\t// this.edit_view_tab = this.edit_view_tab.tabs( {\n\t\t// \tactivate: function( e, ui ) {\n\t\t// \t\t$this.onTabShow( e, ui );\n\t\t// \t}\n\t\t// } );\n\t\t//\n\t\t// this.edit_view_tab.bind( 'tabsselect', function( e, ui ) {\n\t\t// \t$this.onTabIndexChange( e, ui );\n\t\t// } );\n\n\t\tGlobal.contentContainer().append( this.edit_view );\n\t\tthis.initRightClickMenu( RightClickMenuType.EDITVIEW );\n\n\t\tif ( this.is_viewing ) {\n\t\t\tLocalCacheData.current_doing_context_action = 'view';\n\t\t\tthis.buildViewUI();\n\t\t} else if ( this.is_edit ) {\n\t\t\tLocalCacheData.current_doing_context_action = 'edit';\n\t\t\tthis.buildEditViewUI();\n\t\t}\n\n\t\t$this.setEditViewTabHeight();\n\t}\n\n\tinitEditViewTabs() {\n\t\tvar $this = this;\n\t\tvar tab_options = {\n\t\t\tactivate: function( e, ui ) {\n\t\t\t\t$this.onTabShow( e, ui );\n\t\t\t}\n\t\t};\n\n\t\tsuper.initEditViewTabs( tab_options );\n\t}\n\n\tsetCurrentEditRecordData() {\n\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tif ( !this.current_edit_record.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'full_name':\n\t\t\t\t\t\tif ( this.is_viewing ) {\n\t\t\t\t\t\t\twidget.setValue( this.current_edit_record['first_name'] + ' ' + this.current_edit_record['last_name'] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'pay_period':\n\t\t\t\t\t\twidget.setValue( this.current_edit_record['start_date'] + ' ' + this.current_edit_record['end_date'] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'subject':\n\t\t\t\t\t\tif ( this.is_edit ) {\n\t\t\t\t\t\t\tif ( Global.isSet( this.messages ) ) {\n\t\t\t\t\t\t\t\twidget.setValue( 'Re: ' + this.messages[0].subject );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if ( this.is_viewing ) {\n\t\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tsetEditViewDataDone() {\n\t\tvar $this = this;\n\t\tsuper.setEditViewDataDone();\n\n\t\tif ( this.is_viewing ) {\n\t\t\tthis.initTimeSheetSummary();\n\t\t\tthis.initExceptionSummary();\n\t\t\t//this.initEmbeddedMessageData();\n\t\t} else {\n\t\t\tif ( Global.isSet( $this.messages ) ) {\n\t\t\t\t$this.messages = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildExceptionDisplayColumns( apiDisplayColumnsArray ) {\n\t\tvar len = this.all_exception_columns.length;\n\t\tvar len1 = apiDisplayColumnsArray ? apiDisplayColumnsArray.length : 0;\n\t\tvar display_columns = [];\n\t\tfor ( var j = 0; j < len1; j++ ) {\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tif ( apiDisplayColumnsArray[j] === this.all_exception_columns[i].value ) {\n\t\t\t\t\tdisplay_columns.push( this.all_exception_columns[i] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn display_columns;\n\t}\n\n\tinitExceptionSummary() {\n\n\t\tvar $this = this;\n\t\tif ( !this.api_exception ) {\n\t\t\tthis.api_exception = TTAPI.APIException;\n\t\t}\n\n\t\t$this.buildExceptionGrid();\n\t\t$this.setExceptionGridSize();\n\t\tthis.api_exception.getOptions( 'columns', {\n\t\t\tonResult: function( columns_result ) {\n\t\t\t\tvar columns_result_data = columns_result.getResult();\n\t\t\t\tif ( Global.isSet( $this.current_edit_record ) == false ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar args = {\n\t\t\t\t\tfilter_data: {\n\t\t\t\t\t\tuser_id: $this.current_edit_record.user_id,\n\t\t\t\t\t\tpay_period_id: $this.current_edit_record.pay_period_id,\n\t\t\t\t\t\ttype_id: [30, 40, 50, 55, 60]\n\t\t\t\t\t},\n\t\t\t\t\tfilter_columns: { 'date_stamp': true, 'severity': true, 'exception_policy_type': true, 'exception_policy_type_id': true, 'exception_color': true, 'exception_background_color': true }\n\t\t\t\t};\n\n\t\t\t\t$this.api_exception.getException( args, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t$this.all_exception_columns = Global.buildColumnArray( columns_result_data );\n\n\t\t\t\t\t\tvar grid;\n\t\t\t\t\t\tif ( !Global.isSet( $this.exception_grid ) ) {\n\t\t\t\t\t\t\tgrid = $( '#exception_grid' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar display_columns = [\n\t\t\t\t\t\t\t'date_stamp',\n\t\t\t\t\t\t\t'severity',\n\t\t\t\t\t\t\t'exception_policy_type',\n\t\t\t\t\t\t\t'exception_policy_type_id',\n\t\t\t\t\t\t\t'exception_color',\n\t\t\t\t\t\t\t'exception_background_color'\n\t\t\t\t\t\t];\n\t\t\t\t\t\tdisplay_columns = $this.buildExceptionDisplayColumns( display_columns );\n\n\t\t\t\t\t\t//Set Data Grid on List view\n\t\t\t\t\t\tvar column_info_array = [];\n\t\t\t\t\t\tvar len = display_columns.length;\n\t\t\t\t\t\tvar start_from = 0;\n\t\t\t\t\t\tfor ( var i = start_from; i < len; i++ ) {\n\t\t\t\t\t\t\tvar view_column_data = display_columns[i];\n\t\t\t\t\t\t\tvar column_info = {\n\t\t\t\t\t\t\t\tname: view_column_data.value,\n\t\t\t\t\t\t\t\tindex: view_column_data.value,\n\t\t\t\t\t\t\t\tlabel: view_column_data.label,\n\t\t\t\t\t\t\t\twidth: 25,\n\t\t\t\t\t\t\t\tsortable: false,\n\t\t\t\t\t\t\t\ttitle: false\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tcolumn_info_array.push( column_info );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$this.buildExceptionGrid( column_info_array );\n\n\t\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\t\tif ( !Global.isArray( result_data ) && TTUUID.isUUID( $this.refresh_id ) == false ) {\n\t\t\t\t\t\t\t$this.showExceptionGridNoResultCover();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$this.removeExceptionGridNoResultCover();\n\t\t\t\t\t\t\t$this.exception_grid.setData( Global.formatGridData( result.getResult() ) );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$this.setExceptionGridSize();\n\n\t\t\t\t\t\t$( '.exception-title' ).text( $.i18n._( 'Exceptions' ) );\n\t\t\t\t\t\t$( '.exception-title' ).css( 'width', ( $this.exception_grid.grid.width() - 1 ) + 'px !important' );\n\t\t\t\t\t\t$this.setGridCellBackGround();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\n\tbuildExceptionGrid( column_info_array ) {\n\t\tvar $this = this;\n\n\t\tif ( typeof column_info_array == 'undefined' ) {\n\t\t\tcolumn_info_array = [];\n\t\t}\n\n\t\tif ( this.exception_grid ) {\n\t\t\tthis.exception_grid.grid.jqGrid( 'GridUnload' );\n\t\t\tthis.exception_grid = null;\n\t\t}\n\t\tthis.exception_grid = new TTGrid( 'exception_grid', {\n\t\t\tcontainer_selector: '#exception_grid',\n\t\t\tonResizeGrid: false,\n\t\t\tmultiselect: false,\n\t\t\twinMultiSelect: false,\n\t\t\tgridComplete: function() {\n\t\t\t\tif ( $( this ).jqGrid( 'getGridParam', 'data' ).length > 0 ) {\n\t\t\t\t\t$this.exception_grid.setGridColumnsWidth();\n\t\t\t\t}\n\t\t\t},\n\t\t\tondblClickRow: function( row_id ) {\n\t\t\t\t$this.onExceptionGridDblClickRow( row_id );\n\t\t\t},\n\t\t\tsortable: false,\n\t\t\theight: 160\n\t\t}, column_info_array );\n\t}\n\n\tshowExceptionGridNoResultCover() {\n\t\tthis.removeExceptionGridNoResultCover();\n\t\tthis.exception_grid_no_result_box = Global.loadWidgetByName( WidgetNamesDic.NO_RESULT_BOX );\n\t\tthis.exception_grid_no_result_box.NoResultBox( { related_view_controller: this, is_new: false } );\n\t\tvar grid_div = $( '.exception-grid-div' );\n\t\tgrid_div.css( 'position', 'relative' );\n\t\tthis.exception_grid_no_result_box.attr( 'id', '#exception_grid_no_result_box' );\n\t\tthis.exception_grid_no_result_box.css( 'width', parseInt( grid_div.width() ) + 'px' );\n\t\tthis.exception_grid_no_result_box.css( 'height', parseInt( grid_div.height() ) + 'px' );\n\n\t\tgrid_div.append( this.exception_grid_no_result_box );\n\t}\n\n\tremoveExceptionGridNoResultCover() {\n\t\tif ( this.exception_grid_no_result_box && this.exception_grid_no_result_box.length > 0 ) {\n\t\t\tthis.exception_grid_no_result_box.remove();\n\t\t}\n\t\tthis.exception_grid_no_result_box = null;\n\t}\n\n\tsetEditViewTabSize() {\n\t\tsuper.setEditViewTabSize();\n\t\tthis.setExceptionGridSize();\n\t\tthis.setTimeSheetSummaryGridSize();\n\t}\n\n\tsetGridCellBackGround() {\n\t\tvar data;\n\t\tvar len;\n\t\tvar i;\n\t\tvar item;\n\t\tif ( !this.exception_grid || !this.edit_view ) {\n\t\t\treturn;\n\t\t}\n\t\tdata = this.exception_grid.getGridParam( 'data' );\n\t\t//Error: TypeError: data is undefined in /interface/html5/framework/jquery.min.js?v=7.4.6-20141027-074127 line 2 > eval line 70\n\t\tif ( !data ) {\n\t\t\treturn;\n\t\t}\n\t\tlen = data.length;\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\titem = data[i];\n\t\t\tif ( item.exception_background_color ) {\n\t\t\t\tvar severity = this.edit_view.find( 'tr[id=\\'' + item.id + '\\']' ).find( 'td[aria-describedby=\"exception_grid_severity\"]' );\n\t\t\t\tseverity.css( 'background-color', item.exception_background_color );\n\t\t\t\tseverity.css( 'font-weight', 'bold' );\n\t\t\t}\n\t\t\tif ( item.exception_color ) {\n\t\t\t\tvar code = this.edit_view.find( 'tr[id=\\'' + item.id + '\\']' ).find( 'td[aria-describedby=\"exception_grid_exception_policy_type_id\"]' );\n\t\t\t\tcode.css( 'color', item.exception_color );\n\t\t\t\tcode.css( 'font-weight', 'bold' );\n\t\t\t}\n\t\t}\n\t}\n\n\tinitTimeSheetSummary() {\n\t\tvar $this = this;\n\n\t\tif ( Global.isSet( this.current_edit_record ) == false ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.accumulated_total_grid_source_map = {};\n\t\tif ( !this.api_timesheet ) {\n\t\t\tthis.api_timesheet = TTAPI.APITimeSheet;\n\t\t}\n\n\t\t$this.buildAccumulatedTotalGrid();\n\t\tthis.api_timesheet.getTimeSheetData( this.current_edit_record.user_id, this.current_edit_record.start_date, {\n\t\t\tonResult: function( result ) {\n\n\t\t\t\tif ( Global.isSet( $this.current_edit_record ) == false ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t$this.full_timesheet_data = result.getResult();\n\t\t\t\t$this.pay_period_data = $this.full_timesheet_data.pay_period_data;\n\t\t\t\t$this.timesheet_verify_data = $this.full_timesheet_data.timesheet_verify_data;\n\t\t\t\t$this.start_date = Global.strToDate( $this.full_timesheet_data.timesheet_dates.start_display_date );\n\t\t\t\t$this.end_date = Global.strToDate( $this.full_timesheet_data.timesheet_dates.end_display_date );\n\t\t\t\tvar columns = [];\n\t\t\t\tvar punch_in_out_column = {\n\t\t\t\t\tname: 'punch_info',\n\t\t\t\t\tindex: 'punch_info',\n\t\t\t\t\tlabel: ' ',\n\t\t\t\t\twidth: 200,\n\t\t\t\t\tfixed: true,\n\t\t\t\t\tsortable: false,\n\t\t\t\t\ttitle: false,\n\t\t\t\t\tformatter: $this.onCellFormat\n\t\t\t\t};\n\t\t\t\tcolumns.push( punch_in_out_column );\n\t\t\t\tvar start_date_str = $this.current_edit_record.start_date;\n\t\t\t\tvar end_date_str = $this.current_edit_record.end_date;\n\t\t\t\t$this.getAccumulatedTotalGridPayperiodHeader();\n\t\t\t\tvar column_1 = {\n\t\t\t\t\tname: 'week',\n\t\t\t\t\tindex: 'week',\n\t\t\t\t\tlabel: $.i18n._( 'Week' ) + '<br>' + start_date_str + ' to ' + end_date_str,\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tsortable: false,\n\t\t\t\t\ttitle: false,\n\t\t\t\t\tformatter: $this.onCellFormat\n\t\t\t\t};\n\t\t\t\tvar column_2 = {\n\t\t\t\t\tname: 'pay_period',\n\t\t\t\t\tindex: 'pay_period',\n\t\t\t\t\tlabel: $.i18n._( 'Pay Period' ) + '<br>' + $this.pay_period_header,\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tsortable: false,\n\t\t\t\t\ttitle: false,\n\t\t\t\t\tformatter: $this.onCellFormat\n\t\t\t\t};\n\t\t\t\tcolumns.push( column_2 );\n\t\t\t\t$this.buildAccumulatedTotalGrid( columns );\n\t\t\t\t$this.buildAccumulatedTotalData();\n\t\t\t\t$this.setTimeSheetSummaryGridSize();\n\t\t\t\t$( '.button-rotate' ).removeClass( 'button-rotate' );\n\t\t\t}\n\t\t} );\n\t}\n\n\tbuildAccmulatedOrderMap( total ) {\n\t\tif ( !total ) {\n\t\t\treturn;\n\t\t}\n\t\tfor ( var key in total ) {\n\t\t\tfor ( var key1 in total[key] ) {\n\t\t\t\tthis.accmulated_order_map[key1] = total[key][key1].order;\n\t\t\t}\n\t\t}\n\t}\n\n\t//This function is copied from TimeSheetViewController.js\n\tbuildSubGridsData( array, date_string, map, result_array, parent_key ) {\n\t\tvar row;\n\t\tvar marked_regular_row = false; //Only mark the first regular time row, as thats where the bold top-line is going to go.\n\t\tfor ( var key in array ) {\n\t\t\tif ( !map[key] ) {\n\t\t\t\trow = {};\n\t\t\t\trow.parent_key = parent_key;\n\t\t\t\trow.key = key;\n\n\t\t\t\tif ( parent_key === 'accumulated_time' ) {\n\t\t\t\t\tif ( key === 'total' || key === 'worked_time' ) {\n\t\t\t\t\t\trow.type = TimeSheetAuthorizationViewController.TOTAL_ROW;\n\t\t\t\t\t} else if ( marked_regular_row == false && key.indexOf( 'regular_time' ) === 0 ) {\n\t\t\t\t\t\trow.type = TimeSheetAuthorizationViewController.REGULAR_ROW;\n\t\t\t\t\t\tmarked_regular_row = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\trow.type = TimeSheetAuthorizationViewController.ACCUMULATED_TIME_ROW;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( array[key].override ) {\n\t\t\t\t\t\trow.is_override_row = true;\n\t\t\t\t\t}\n\t\t\t\t} else if ( parent_key === 'premium_time' ) {\n\t\t\t\t\trow.type = TimeSheetAuthorizationViewController.PREMIUM_ROW;\n\t\t\t\t}\n\n\t\t\t\tif ( this.accmulated_order_map[key] ) {\n\t\t\t\t\trow.order = this.accmulated_order_map[key];\n\t\t\t\t}\n\n\t\t\t\trow.punch_info = array[key].label;\n\n\t\t\t\tvar key_array = key.split( '_' );\n\t\t\t\tvar no_id = false;\n\t\t\t\tif ( key_array.length > 1 && key_array[1] == '0' ) {\n\t\t\t\t\tno_id = true;\n\t\t\t\t}\n\n\t\t\t\tarray[key].key = key;\n\t\t\t\trow[date_string] = Global.getTimeUnit( array[key].total_time );\n\t\t\t\trow[date_string + '_data'] = array[key];\n\n\t\t\t\t//if id == 0, put the row as first row.\n\t\t\t\tif ( no_id ) {\n\t\t\t\t\tresult_array.unshift( row );\n\t\t\t\t} else {\n\t\t\t\t\tresult_array.push( row );\n\t\t\t\t}\n\t\t\t\tmap[key] = row;\n\t\t\t} else {\n\t\t\t\trow = map[key];\n\t\t\t\tif ( row[date_string] && key === 'total' ) { //Override total cell data since we set all to 00:00 at beginning\n\t\t\t\t\tarray[key].key = key;\n\t\t\t\t\trow[date_string] = Global.getTimeUnit( array[key].total_time );\n\t\t\t\t\trow[date_string + '_data'] = array[key];\n\t\t\t\t\tif ( row.parent_key === 'accumulated_time' ) {\n\t\t\t\t\t\tif ( array[key].override ) {\n\t\t\t\t\t\t\trow.is_override_row = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tarray[key].key = key;\n\t\t\t\t\trow[date_string] = Global.getTimeUnit( array[key].total_time );\n\t\t\t\t\trow[date_string + '_data'] = array[key];\n\n\t\t\t\t\tif ( row.parent_key === 'accumulated_time' ) {\n\t\t\t\t\t\tif ( array[key].override ) {\n\t\t\t\t\t\t\trow.is_override_row = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildAccumulatedTotalData() {\n\t\tthis.accmulated_order_map = {};\n\t\tthis.accumulated_total_grid_source = [];\n\t\tvar accumulated_user_date_total_data = this.full_timesheet_data.accumulated_user_date_total_data;\n\t\tvar pay_period_accumulated_user_date_total_data = this.full_timesheet_data.pay_period_accumulated_user_date_total_data;\n\t\tvar accumulated_time = pay_period_accumulated_user_date_total_data.accumulated_time;\n\t\tvar premium_time = pay_period_accumulated_user_date_total_data.premium_time;\n\t\tvar absence_time = pay_period_accumulated_user_date_total_data.absence_time_taken;\n\t\t// Save the order, will do sort after all data prepared.\n\t\tif ( accumulated_user_date_total_data.total ) {\n\t\t\tthis.buildAccmulatedOrderMap( accumulated_user_date_total_data.total );\n\t\t}\n\t\tif ( pay_period_accumulated_user_date_total_data ) {\n\t\t\tthis.buildAccmulatedOrderMap( pay_period_accumulated_user_date_total_data );\n\t\t}\n\t\tif ( Global.isSet( accumulated_time ) ) {\n\t\t\tthis.buildSubGridsData( accumulated_time, 'pay_period', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'accumulated_time' );\n\t\t} else {\n\t\t\taccumulated_time = { total: { label: 'Total Time', total_time: '0' } };\n\t\t\tthis.buildSubGridsData( accumulated_time, 'pay_period', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'accumulated_time' );\n\t\t}\n\t\tif ( Global.isSet( premium_time ) ) {\n\t\t\tthis.buildSubGridsData( premium_time, 'pay_period', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'premium_time' );\n\t\t}\n\t\tif ( Global.isSet( absence_time ) ) {\n\t\t\tthis.buildSubGridsData( absence_time, 'pay_period', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'absence_time' );\n\t\t}\n\t\taccumulated_time = { total: { label: 'Total Time', total_time: '0' } };\n\t\tthis.buildSubGridsData( accumulated_time, 'week', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'accumulated_time' );\n\t\tfor ( var key in accumulated_user_date_total_data ) {\n\t\t\t//Build Accumulated Total Grid week column data\n\t\t\tif ( key === 'total' ) {\n\t\t\t\tvar total_result = accumulated_user_date_total_data.total;\n\t\t\t\taccumulated_time = total_result.accumulated_time;\n\t\t\t\tpremium_time = total_result.premium_time;\n\t\t\t\tabsence_time = total_result.absence_time_taken;\n\t\t\t\tif ( Global.isSet( accumulated_time ) ) {\n\t\t\t\t\tthis.buildSubGridsData( accumulated_time, 'week', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'accumulated_time' );\n\t\t\t\t}\n\t\t\t\tif ( Global.isSet( premium_time ) ) {\n\t\t\t\t\tthis.buildSubGridsData( premium_time, 'week', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'premium_time' );\n\t\t\t\t}\n\t\t\t\tif ( Global.isSet( absence_time ) ) {\n\t\t\t\t\tthis.buildSubGridsData( absence_time, 'week', this.accumulated_total_grid_source_map, this.accumulated_total_grid_source, 'absence_time' );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tthis.sortAccumulatedTotalData();\n\t\tthis.timesheet_authorization_summary_grid.setData( this.accumulated_total_grid_source );\n\n\t\t$( '.timesheet-authorization-summary-title' ).text( $.i18n._( 'TimeSheet Summary' ) );\n\t}\n\n\tsortAccumulatedTotalData() {\n\t\tvar sort_fields = ['order', 'punch_info'];\n\t\tthis.accumulated_total_grid_source.sort( Global.m_sort_by( sort_fields ) );\n\t}\n\n\tgetAccumulatedTotalGridPayperiodHeader() {\n\t\tthis.pay_period_header = $.i18n._( 'No Pay Period' );\n\t\tvar pay_period_id = this.timesheet_verify_data.pay_period_id;\n\t\tif ( pay_period_id && this.pay_period_data ) {\n\t\t\tfor ( var key in this.pay_period_data ) {\n\t\t\t\tvar pay_period = this.pay_period_data[key];\n\t\t\t\tif ( pay_period.id === pay_period_id ) {\n\t\t\t\t\tvar start_date = Global.strToDate( pay_period.start_date ).format();\n\t\t\t\t\tvar end_date = Global.strToDate( pay_period.end_date ).format();\n\t\t\t\t\tthis.pay_period_header = start_date + ' to ' + end_date;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildAccumulatedTotalGrid( columns ) {\n\t\tvar $this = this;\n\t\tvar grid;\n\t\tif ( typeof columns == 'undefined' ) {\n\t\t\tcolumns = [];\n\t\t}\n\t\tif ( this.timesheet_authorization_summary_grid ) {\n\t\t\tthis.timesheet_authorization_summary_grid.grid.jqGrid( 'GridUnload' );\n\t\t\tthis.timesheet_authorization_summary_grid = null;\n\t\t}\n\t\tvar $this = this;\n\t\tthis.timesheet_authorization_summary_grid = new TTGrid( 'timesheet_authorization_summary_grid', {\n\t\t\tmultiselect: false,\n\t\t\twinMultiSelect: false,\n\t\t\tsortable: false,\n\t\t\tonResizeGrid: false,\n\t\t\tgridComplete: function() {\n\t\t\t\t$this.setTimeSheetSummaryGridSize();\n\t\t\t},\n\t\t\tondblClickRow: function() {\n\t\t\t\t$this.onTimeSheetGridDblClickRow();\n\t\t\t}\n\t\t}, columns );\n\t\tthis.setTimeSheetSummaryGridSize();\n\t}\n\n\tonTimeSheetGridDblClickRow() {\n\t\tvar filter = { filter_data: {} };\n\t\tfilter.user_id = this.current_edit_record.user_id;\n\t\tfilter.base_date = Global.strToDateTime( this.current_edit_record.start_date ).format();\n\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'TimeSheet (Authorizations)' ), window.location.href );\n\t\tIndexViewController.goToView( 'TimeSheet', filter );\n\t}\n\n\tonExceptionGridDblClickRow( row_id ) {\n\t\tvar date_stamp = this.exception_grid.grid.jqGrid( 'getCell', row_id, 'date_stamp' );\n\n\t\tif ( !date_stamp ) {\n\t\t\tdate_stamp = Global.strToDateTime( this.current_edit_record.start_date ).format();\n\t\t}\n\n\t\tvar filter = { filter_data: {} };\n\t\tfilter.user_id = this.current_edit_record.user_id;\n\t\tfilter.base_date = date_stamp;\n\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'TimeSheet (Authorizations)' ), window.location.href );\n\t\tIndexViewController.goToView( 'TimeSheet', filter );\n\t}\n\n\tonCellFormat( cell_value, related_data, row ) {\n\t\tcell_value = Global.decodeCellValue( cell_value );\n\t\tvar col_model = related_data.colModel;\n\t\tvar row_id = related_data.rowid;\n\t\tvar content_div = $( '<div class=\\'punch-content-div\\'></div>' );\n\t\tvar punch_info;\n\t\tif ( related_data.pos === 0 ) {\n\t\t\tif ( row.type === TimeSheetAuthorizationViewController.TOTAL_ROW ) {\n\t\t\t\tpunch_info = $( '<span class=\\'total\\' style=\\'font-size: 11px\\'></span>' );\n\t\t\t\tif ( Global.isSet( cell_value ) ) {\n\t\t\t\t\tpunch_info.text( cell_value );\n\t\t\t\t} else {\n\t\t\t\t\tpunch_info.text( '' );\n\t\t\t\t}\n\t\t\t\treturn punch_info.get( 0 ).outerHTML;\n\t\t\t} else if ( row.type === TimeSheetAuthorizationViewController.REGULAR_ROW ) {\n\t\t\t\tpunch_info = $( '<span class=\\'top-line-span\\' style=\\'font-size: 11px\\'></span>' );\n\t\t\t\tif ( Global.isSet( cell_value ) ) {\n\t\t\t\t\tpunch_info.text( cell_value );\n\t\t\t\t} else {\n\t\t\t\t\tpunch_info.text( '' );\n\t\t\t\t}\n\t\t\t\treturn punch_info.get( 0 ).outerHTML;\n\t\t\t}\n\t\t\treturn cell_value;\n\t\t}\n\t\tvar ex_span;\n\t\tvar i;\n\t\tvar time_span;\n\t\tvar punch;\n\t\tvar break_span;\n\t\tvar related_punch;\n\t\tvar exception;\n\t\tvar len;\n\t\tvar text;\n\t\tvar ex;\n\t\tvar data;\n\t\tif ( row.type === TimeSheetAuthorizationViewController.TOTAL_ROW ) {\n\t\t\tdata = row[col_model.name + '_data'];\n\t\t\ttime_span = $( '<span class=\\'total\\'></span>' );\n\t\t\tif ( Global.isSet( cell_value ) ) {\n\t\t\t\tif ( data ) {\n\t\t\t\t\tif ( data.hasOwnProperty( 'override' ) && data.override === true ) {\n\t\t\t\t\t\ttime_span.addClass( 'absence-override' );\n\t\t\t\t\t}\n\t\t\t\t\tif ( data.hasOwnProperty( 'note' ) && data.note ) {\n\t\t\t\t\t\tcell_value = '*' + cell_value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttime_span.text( cell_value );\n\n\t\t\t} else {\n\t\t\t\ttime_span.text( '' );\n\t\t\t}\n\t\t\tcontent_div.prepend( time_span );\n\t\t} else if ( row.type === TimeSheetAuthorizationViewController.REGULAR_ROW ) {\n\t\t\tcontent_div.addClass( 'top-line' );\n\t\t\tdata = row[col_model.name + '_data'];\n\t\t\ttime_span = $( '<span ></span>' );\n\t\t\tif ( Global.isSet( cell_value ) ) {\n\t\t\t\tif ( data ) {\n\t\t\t\t\tif ( data.hasOwnProperty( 'override' ) && data.override === true ) {\n\t\t\t\t\t\ttime_span.addClass( 'absence-override' );\n\t\t\t\t\t}\n\t\t\t\t\tif ( data.hasOwnProperty( 'note' ) && data.note ) {\n\t\t\t\t\t\tcell_value = '*' + cell_value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttime_span.text( cell_value );\n\t\t\t} else {\n\t\t\t\ttime_span.text( '' );\n\t\t\t}\n\t\t\tcontent_div.prepend( time_span );\n\t\t} else if ( row.type === TimeSheetAuthorizationViewController.ACCUMULATED_TIME_ROW ) {\n\t\t\tdata = row[col_model.name + '_data'];\n\t\t\ttime_span = $( '<span></span>' );\n\t\t\tif ( Global.isSet( cell_value ) ) {\n\t\t\t\tif ( data ) {\n\t\t\t\t\tif ( data.hasOwnProperty( 'override' ) && data.override === true ) {\n\t\t\t\t\t\ttime_span.addClass( 'absence-override' );\n\t\t\t\t\t}\n\t\t\t\t\tif ( data.hasOwnProperty( 'note' ) && data.note ) {\n\t\t\t\t\t\tcell_value = '*' + cell_value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttime_span.text( cell_value );\n\t\t\t} else {\n\t\t\t\ttime_span.text( '' );\n\t\t\t}\n\t\t\tcontent_div.prepend( time_span );\n\t\t} else {\n\t\t\ttime_span = $( '<span class=\\'punch-time\\'></span>' );\n\t\t\tif ( Global.isSet( cell_value ) ) {\n\t\t\t\ttime_span.text( cell_value );\n\t\t\t} else {\n\t\t\t\ttime_span.text( '' );\n\t\t\t}\n\t\t\tcontent_div.prepend( time_span );\n\t\t}\n\t\treturn content_div.get( 0 ).outerHTML;\n\t}\n\n\tsetExceptionGridSize() {\n\t\tif ( this.exception_grid ) {\n\t\t\t//this.exception_grid.grid.setGridWidth( $( '.exception-grid-div' ).width() + 1 );\n\n\t\t\tvar size = 2;\n\n\t\t\tvar data_array = this.exception_grid.getData();\n\t\t\tif ( Global.isArray( data_array ) ) {\n\t\t\t\tsize += ( 22 * data_array.length );\n\t\t\t}\n\n\t\t\tthis.exception_grid.setGridHeight( size );\n\t\t}\n\t}\n\n\tsetTimeSheetSummaryGridSize() {\n\t\tif ( this.timesheet_authorization_summary_grid ) {\n\t\t\t//this.timesheet_authorization_summary_grid.grid.setGridWidth( $( '.timesheet-authorization-grid-div' ).width() );\n\n\t\t\tvar size = 2;\n\n\t\t\tvar data_array = this.timesheet_authorization_summary_grid.getData();\n\t\t\tif ( Global.isArray( data_array ) ) {\n\t\t\t\tsize += ( 22 * data_array.length );\n\t\t\t}\n\n\t\t\tthis.timesheet_authorization_summary_grid.setGridHeight( size );\n\t\t}\n\t}\n\n\tgetTimeSheetAuthorizationTabHtml() {\n\t\treturn `\n\t\t<div id=\"tab_timesheet_verification\" class=\"edit-view-tab-outside\">\n\t\t\t<div class=\"edit-view-tab\" id=\"tab_timesheet_verification_content_div\">\n\t\t\t\t<div class=\"first-column full-width-column\"></div>\n\t\t\t\t<div class=\"authorization-grid-div inside-grid full-width-column\">\n\t\t\t\t\t<div class=\"grid-top-border\"></div>\n\t\t\t\t\t<div class=\"grid-title separated-box\"></div>\n\t\t\t\t\t<table id=\"grid\"></table>\n\t\t\t\t\t<div class=\"bottom-div\">\n\t\t\t\t\t\t<div class=\"grid-bottom-border\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<br>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"third-column  timesheet-authorization-grid-div\">\n\t\t\t\t\t<div class=\"accumulated-total-grid-title timesheet-authorization-summary-title full-width-column\"></div>\n\t\t\t\t\t<table id=\"timesheet_authorization_summary_grid\"></table>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"forth-column  exception-grid-div\">\n\t\t\t\t\t<div class=\"accumulated-total-grid-title exception-title full-width-column\"></div>\n\t\t\t\t\t<table id=\"exception_grid\"></table>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"separate full-width-column\"></div>\n\t\t\t\t<div class=\"second-column full-width-column\" style=\"margin-left: 0\"></div>\n\t\t\t</div>\n\t\t</div>`;\n\t}\n\n}\n\nTimeSheetAuthorizationViewController.TOTAL_ROW = 4;\nTimeSheetAuthorizationViewController.REGULAR_ROW = 5;\nTimeSheetAuthorizationViewController.ABSENCE_ROW = 6;\nTimeSheetAuthorizationViewController.ACCUMULATED_TIME_ROW = 7;\nTimeSheetAuthorizationViewController.PREMIUM_ROW = 8;\n"],"names":["TimeSheetAuthorizationViewController","options","_","$","$this","result","data","set_default_menu","page_action","page_number","callBack","result_data","len","item","id","index","context_menu_model","context_btn","grid_selected_length","p_id","display_columns","column_filter","i","column_info","enable","iconName","grid_selected_id_array","filter","ids","user_ids","base_date","value","grid_selected_row","include_users","ignoreWarning","record","current_edit_record_id","getRecordFilterData","record_data","res","force_no_confirm","cancel_all","callback","records","msg","record_id","editId","noRefreshUI","tab_model","tab_timesheet_verification","tab_timesheet_verification_column1","tab_timesheet_verification_column2","form_item_input","pager_data","source_data","separate_box","view_id","edit_view_file_name","tab_options","e","ui","key","widget","apiDisplayColumnsArray","len1","j","columns_result","columns_result_data","args","column_info_array","start_from","view_column_data","row_id","grid_div","severity","code","columns","punch_in_out_column","start_date_str","end_date_str","column_2","total","key1","array","date_string","map","result_array","parent_key","row","marked_regular_row","key_array","no_id","accumulated_user_date_total_data","pay_period_accumulated_user_date_total_data","accumulated_time","premium_time","absence_time","total_result","sort_fields","pay_period_id","pay_period","start_date","end_date","date_stamp","cell_value","related_data","col_model","content_div","punch_info","time_span","size","data_array"],"mappings":"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"}