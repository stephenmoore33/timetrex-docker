import{_ as n,j as o}from"./vendor-tTApdY0Y.bundle.js";class d extends BaseViewController{constructor(e={}){n.defaults(e,{el:"#area_policy_view_container",status_array:null,country_array:null,district_array:null,province_array:null,company_api:null}),super(e)}init(e){this.edit_view_tpl="AreaPolicyEditView.html",this.permission_id="area_policy",this.viewId="AreaPolicy",this.script_name="AreaPolicyView",this.table_name_key="area_policy",this.context_menu_name=o.i18n._("Area Policy"),this.navigation_label=o.i18n._("Area"),this.api=TTAPI.APIAreaPolicy,this.company_api=TTAPI.APICompany,this.render(),this.buildContextMenu(),this.initData()}onFormItemChange(e,a){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var t=e.getField(),i=e.getValue();switch(t){case"country":if(i.toString()===this.current_edit_record[t].toString())break;var r=this.edit_view_ui_dic.province,l=this.edit_view_ui_dic.district;r.setValue(null),l.setValue(null),this.current_edit_record.province=!1,this.current_edit_record.district=!1;var s=this.edit_view_ui_dic.province.getValue();this.eSetProvince(i),this.setDistrict(i,s);break;case"province":if(i.toString()===this.current_edit_record[t].toString())break;r=this.edit_view_ui_dic.district,r.setValue(null);var _=this.edit_view_ui_dic.country.getValue();this.setDistrict(_,i);break}this.current_edit_record[t]=i,t!=="country"&&this.validate()}initOptions(){this.initDropDownOption("country",null,this.company_api)}setDistrict(e,a){var t=this,i=t.edit_view_ui_dic.district;!Global.isSet(e)||e==="-1"||e==="0"||!Global.isSet(a)||a==="-1"||a==="0"?(t.district_array=[],i.setSourceData([])):this.api.getDistrictOptions(e,a,{onResult:function(r){r=r.getResult(),t.district_array=Global.buildRecordArray(r),i.setSourceData(t.district_array)}})}eSetProvince(e,a){var t=this,i=t.edit_view_ui_dic.province;!e||e==="-1"||e==="0"?(t.e_province_array=[],i.setSourceData([])):this.api.getProvinceOptions(e,{onResult:function(r){r=r.getResult(),r||(r=[]),t.province_array=Global.buildRecordArray(r),i.setSourceData(t.province_array)}})}setCurrentEditRecordData(){for(var e in this.current_edit_record)if(this.current_edit_record.hasOwnProperty(e)){this.edit_view_ui_dic.province.setSourceData(null),this.edit_view_ui_dic.district.setSourceData(null);var a=this.edit_view_ui_dic[e];if(Global.isSet(a))switch(e){case"country":this.setCountryValue(a,e);break;case"province":this.setDistrict(this.current_edit_record.country,this.current_edit_record[e]),a.setValue(this.current_edit_record[e]);break;case"":a.setValue(this.current_edit_record[e]);break;default:a.setValue(this.current_edit_record[e]);break}}this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}buildEditViewUI(){super.buildEditViewUI();var e={tab_area:{label:o.i18n._("Area")},tab_audit:!0};this.setTabModel(e),this.navigation.AComboBox({api_class:TTAPI.APIAreaPolicy,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_area_policy",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var a=this.edit_view_tab.find("#tab_area"),t=a.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(t);var i=Global.loadWidgetByName(FormItemType.TEXT_INPUT);i.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn(o.i18n._("Name"),i,t,""),i.parent().width("45%"),i=Global.loadWidgetByName(FormItemType.AWESOME_BOX),i=i.AComboBox({field:"country",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"}),i.setSourceData(this.country_array),this.addEditFieldToColumn(o.i18n._("Country"),i,t,""),i=Global.loadWidgetByName(FormItemType.AWESOME_BOX),i=i.AComboBox({field:"province",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"}),this.addEditFieldToColumn(o.i18n._("Province"),i,t,""),i=Global.loadWidgetByName(FormItemType.AWESOME_BOX),i=i.AComboBox({field:"district",set_empty:!0,allow_multiple_selection:!0,layout_name:"global_option_column",key:"value"}),this.addEditFieldToColumn(o.i18n._("District"),i,t,"")}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:o.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:o.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:o.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX})]}}export{d as AreaPolicyViewController};
//# sourceMappingURL=AreaPolicyViewController-CbzEZcx2.bundle.js.map
