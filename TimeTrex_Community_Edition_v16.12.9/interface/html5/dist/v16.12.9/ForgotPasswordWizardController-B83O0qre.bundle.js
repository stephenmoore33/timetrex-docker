import{_ as o,j as s}from"./vendor-tTApdY0Y.bundle.js";class d extends BaseWizardController{constructor(t={}){o.defaults(t,{el:".wizard-bg"}),super(t)}init(){this.title=s.i18n._("Password Reset"),this.steps=1,this.current_step=1,this.default_data&&typeof this.default_data.api_class<"u"?this.api=this.default_data.api_class:this.api=TTAPI.APIAuthentication,this.render()}render(){super.render(),this.initCurrentStep()}buildCurrentStepUI(){var t=this;switch(this.content_div.empty(),this.stepsWidgetDic[this.current_step]={},this.current_step){case 1:var e=s(Global.loadWidget("global/widgets/wizard_form_item/WizardFormItem.html")),i=e.find(".form-item-label"),a=e.find(".form-item-input-div"),r=this.getTextInput("email");i.text(s.i18n._("Email Address")),a.unbind("keydown").bind("keydown",function(n){n.keyCode===13&&t.onDoneClick()}),a.append(r),this.content_div.append(e),this.stepsWidgetDic[this.current_step][r.getField()]=r,this.stepsWidgetDic[this.current_step][r.getField()].focus();break}}saveCurrentStep(){this.stepsDataDic[this.current_step]={};var t=this.stepsDataDic[this.current_step],e=this.stepsWidgetDic[this.current_step];switch(this.current_step){default:for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i].getValue());break}}buildCurrentStepData(){}onCloseClick(){s(this.el).remove(),LocalCacheData.current_open_wizard_controllers=LocalCacheData.current_open_wizard_controllers.filter(t=>t.wizard_id!==this.wizard_id),LocalCacheData.extra_filter_for_next_open_view=null}onDoneClick(){var t=this;super.onDoneClick(),this.saveCurrentStep();var e=this.stepsDataDic[1].email;this.stepsWidgetDic[1].email.clearErrorStyle(),e?this.api.resetPassword(e,{onResult:function(i){i.isValid()?(t.onCloseClick(),t.call_back&&t.call_back(i)):TAlertManager.showErrorAlert(i)}}):this.stepsWidgetDic[1].email.setErrorStyle(s.i18n._("Email must be specified"),!0)}showErrorAlert(t){var e=t.getDetails();e||(e=t.getDescription());var i="";Global.isArray(e)||typeof e=="object"?s.each(e,function(a,r){r.hasOwnProperty("error")&&(r=r.error);for(var n in r)i=i+r[n]+"<br>"}):i=e,IndexViewController.instance.router.showTipModal(i)}}export{d as ForgotPasswordWizardController};
//# sourceMappingURL=ForgotPasswordWizardController-B83O0qre.bundle.js.map
