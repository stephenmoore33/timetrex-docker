import{_ as s,j as a}from"./vendor-tTApdY0Y.bundle.js";class m extends BaseViewController{constructor(t={}){s.defaults(t,{el:"#recurring_pay_stub_amendment_view_container",type_array:null,filtered_status_array:null,frequency_array:null}),super(t)}init(t){this.edit_view_tpl="RecurringPayStubAmendmentEditView.html",this.permission_id="pay_stub_amendment",this.viewId="RecurringPayStubAmendment",this.script_name="RecurringPayStubAmendmentView",this.table_name_key="recurring_ps_amendment",this.context_menu_name=a.i18n._("Recurring PS Amendment"),this.navigation_label=a.i18n._("Recurring PS Amendment"),this.api=TTAPI.APIRecurringPayStubAmendment,this.render(),this.buildContextMenu(),this.initData()}initOptions(){var t=this;this.initDropDownOption("type"),this.initDropDownOption("filtered_status","status_id",this.api,function(){t.basic_search_field_ui_dic.status_id.setSourceData(t.filtered_status_array)}),this.initDropDownOption("frequency")}onFormItemChange(t,n){this.setIsChanged(t),this.setMassEditingFieldsWhenFormChange(t);var l=t.getField(),i=t.getValue();this.current_edit_record[l]=i,l==="type_id"&&this.onTypeChange(),(l==="rate"||l==="units"||l==="amount")&&(this.is_mass_editing&&(t.isChecked()?(this.edit_view_ui_dic.rate.setCheckBox(!0),this.edit_view_ui_dic.units.setCheckBox(!0),this.edit_view_ui_dic.amount.setCheckBox(!0)):(this.edit_view_ui_dic.rate.setCheckBox(!1),this.edit_view_ui_dic.units.setCheckBox(!1),this.edit_view_ui_dic.amount.setCheckBox(!1))),this.current_edit_record.amount=this.edit_view_ui_dic.amount.getValue()),n||this.validate()}uniformVariable(t){return t.type_id==20&&(t.amount=t.percent_amount),t}onTypeChange(){this.current_edit_record.type_id==10?(this.detachElement("percent_amount"),this.detachElement("percent_amount_entry_name_id"),this.attachElement("rate"),this.attachElement("units"),this.attachElement("amount")):this.current_edit_record.type_id==20&&(this.attachElement("percent_amount"),this.attachElement("percent_amount_entry_name_id"),this.detachElement("rate"),this.detachElement("units"),this.detachElement("amount")),this.editFieldResize()}onFormItemKeyUp(t){var n=this.edit_view_ui_dic.rate,l=this.edit_view_ui_dic.units,i=this.edit_view_ui_dic.amount;t.getValue().length===0&&i.setReadOnly(!1),(n.getValue().length>0||l.getValue().length>0)&&i.setReadOnly(!0),n.getValue().length>0&&l.getValue().length>0?i.setValue((parseFloat(n.getValue())*parseFloat(l.getValue())).toFixed(2)):i.setValue("0.00")}onFormItemKeyDown(t){var n=this.edit_view_ui_dic.amount,l=this.edit_view_ui_dic.rate,i=this.edit_view_ui_dic.units;l.getValue().length>0&&i.getValue().length>0||n.setValue("0.00"),n.setReadOnly(!0)}setCurrentEditRecordData(){this.setDefaultData({type_id:10});var t;for(var n in this.current_edit_record)if(t=this.edit_view_ui_dic[n],Global.isSet(t))switch(n){default:t.setValue(this.current_edit_record[n]);break}(this.current_edit_record.rate||this.current_edit_record.units)&&(t=this.edit_view_ui_dic.amount,t.setReadOnly(!0)),this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}setEditViewDataDone(){super.setEditViewDataDone(),this.onTypeChange()}buildEditViewUI(){super.buildEditViewUI();var t=this,n={tab_recurring_ps_amendment:{label:a.i18n._("Recurring PS Amendment")},tab_audit:!0};this.setTabModel(n),this.navigation.AComboBox({api_class:TTAPI.APIRecurringPayStubAmendment,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_recurring_amendment",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var l=this.edit_view_tab.find("#tab_recurring_ps_amendment"),i=l.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(i);var e=Global.loadWidgetByName(FormItemType.COMBO_BOX);e.TComboBox({field:"status_id",set_empty:!1}),e.setSourceData(t.filtered_status_array),this.addEditFieldToColumn(a.i18n._("Status"),e,i,""),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn(a.i18n._("Name"),e,i),e.parent().width("45%"),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"description",width:"100%"}),this.addEditFieldToColumn(a.i18n._("Description"),e,i),e.parent().width("45%"),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"frequency_id",set_empty:!1}),e.setSourceData(t.frequency_array),this.addEditFieldToColumn(a.i18n._("Frequency"),e,i),e=Global.loadWidgetByName(FormItemType.DATE_PICKER),e.TDatePicker({field:"start_date"}),this.addEditFieldToColumn(a.i18n._("Start Date"),e,i),e=Global.loadWidgetByName(FormItemType.DATE_PICKER),e.TDatePicker({field:"end_date"}),this.addEditFieldToColumn(a.i18n._("End Date"),e,i),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIUser,allow_multiple_selection:!0,layout_name:"global_user",show_search_inputs:!0,set_empty:!0,field:"user"});var r={};r.permission_section="recurring_ps_amendment",e.setDefaultArgs(r),this.addEditFieldToColumn(a.i18n._("Employee(s)"),e,i),e=Global.loadWidgetByName(FormItemType.SEPARATED_BOX),e.SeparatedBox({label:a.i18n._("Pay Stub Amendment")}),this.addEditFieldToColumn(null,e,i);var _={},d={};d.type_id=[10,20,30,50,60,65,80],_.filter_data=d,e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIPayStubEntryAccount,allow_multiple_selection:!1,layout_name:"global_PayStubAccount",show_search_inputs:!0,set_empty:!0,field:"pay_stub_entry_name_id"}),e.setDefaultArgs(_),this.addEditFieldToColumn(a.i18n._("Pay Stub Account"),e,i),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"type_id",set_empty:!1}),e.setSourceData(t.type_array),this.addEditFieldToColumn(a.i18n._("Amount Type"),e,i),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"rate",width:149,hasKeyEvent:!0}),this.addEditFieldToColumn(a.i18n._("Rate"),e,i,"",null,!0,null,null,!0),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"units",width:149,hasKeyEvent:!0}),this.addEditFieldToColumn(a.i18n._("Units"),e,i,"",null,!0,null,null,!0),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"amount",width:149}),this.addEditFieldToColumn(a.i18n._("Amount"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"percent_amount",width:79}),this.addEditFieldToColumn(a.i18n._("Percent"),e,i,"",null,!0),_={},d={},d.type_id=[10,20,30,40,50,60,65],_.filter_data=d,e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIPayStubEntryAccount,allow_multiple_selection:!1,layout_name:"global_PayStubAccount",show_search_inputs:!0,set_empty:!0,field:"percent_amount_entry_name_id"}),e.setDefaultArgs(_),this.addEditFieldToColumn(a.i18n._("Percent of"),e,i,"",null,!0),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"ps_amendment_description",width:359}),this.addEditFieldToColumn(a.i18n._("Pay Stub Note (Public)"),e,i,"")}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:a.i18n._("Name"),in_column:1,field:"name",basic_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:a.i18n._("Type"),in_column:1,field:"type_id",multiple:!0,basic_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:a.i18n._("Status"),in_column:1,field:"status_id",multiple:!0,basic_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:a.i18n._("Frequency"),in_column:2,field:"frequency_id",multiple:!0,basic_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:a.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:a.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,form_item_type:FormItemType.AWESOME_BOX})]}}export{m as RecurringPayStubAmendmentViewController};
//# sourceMappingURL=RecurringPayStubAmendmentViewController-Blg_Ujj4.bundle.js.map
