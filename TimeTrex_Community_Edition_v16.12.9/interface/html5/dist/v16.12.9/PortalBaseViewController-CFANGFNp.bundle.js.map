{"version":3,"file":"PortalBaseViewController-CFANGFNp.bundle.js","sources":["../../views/portal/sign_in/SignInController.js","../../views/portal/header/HeaderViewController.js","../../framework/bootstrap-toolkit.min.js","../../views/portal/hr/recruitment/PortalJobVacancyDetailController.js","../../views/portal/hr/recruitment/PortalJobVacancyDetailViewController.js","../../views/portal/hr/recruitment/PortalJobVacancyViewController.js","../../views/portal/hr/my_profile/JobApplicantSubBaseViewController.js","../../views/portal/hr/my_profile/JobApplicantEmploymentSubViewController.js","../../views/portal/hr/my_profile/JobApplicantReferenceSubViewController.js","../../views/portal/hr/my_profile/JobApplicantLocationSubViewController.js","../../views/portal/hr/my_profile/JobApplicantSkillSubViewController.js","../../views/portal/hr/my_profile/JobApplicantEducationSubViewController.js","../../views/portal/hr/my_profile/JobApplicantMembershipSubViewController.js","../../views/portal/hr/my_profile/JobApplicantLicenseSubViewController.js","../../views/portal/hr/my_profile/JobApplicantLanguageSubViewController.js","../../views/portal/hr/my_profile/JobApplicationSubViewController.js","../../views/portal/hr/my_profile/DocumentSubViewController.js","../../views/portal/hr/my_profile/MyProfileViewController.js","../../portal/recruitment/IndexController.js","../../views/portal/PortalBaseViewController.js"],"sourcesContent":["import { PortalBaseViewController } from '@/views/portal/PortalBaseViewController';\nimport { PortalResetForgotPasswordController } from '@/views/portal/sign_in/PortalResetForgotPasswordController';\nimport { TTAPI } from '@/services/TimeTrexClientAPI';\nimport { IndexViewController } from '@/portal/recruitment/IndexController';\nimport { ServiceCaller } from '@/services/ServiceCaller';\nimport { PortalForgotPasswordController } from '@/views/portal/sign_in/PortalForgotPasswordController';\nimport 'bootstrap';\n\nexport class SignInController extends PortalBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tdoing_login: false,\n\t\t\tedit_view_error_ui_dic: {},\n\n\t\t\t_delegate: null,\n\t\t\tevents: {\n\t\t\t\t'click #forgot_password': 'forgotPasswordClick'\n\t\t\t}\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\tvar $this = this;\n\t\t$this.recruitment_api = TTAPI.APIRecruitmentAuthentication;\n\t\t$this.jobapplicant_api = TTAPI.APIJobApplicantPortal;\n\t\t$this.authentication_api = TTAPI.APIAuthentication;\n\t\t// var login_data = LocalCacheData.getLoginData();\n\t\tvar el = Global.loadWidget( 'views/portal/sign_in/SignIn.html' );\n\t\t$this.setElement( _.template( el )() );\n\t\t$this.user_name = $this.$( '#user_name' );\n\t\t$this.password = $this.$( '#password' );\n\t\tif ( Global.isSet( options ) && Global.isSet( options._delegate ) ) {\n\t\t\t$this._delegate = options._delegate;\n\t\t}\n\t\tif ( LocalCacheData.getAllURLArgs().sm === 'ResetPassword' && LocalCacheData.getAllURLArgs().key && LocalCacheData.getAllURLArgs().company_id ) {\n\t\t\tvar forgotResetPasswordIntance = new PortalResetForgotPasswordController( {\n\t\t\t\tcallback: function() {\n\t\t\t\t\tLocalCacheData.setAllURLArgs( _.omit( LocalCacheData.getAllURLArgs(), 'sm' ) );\n\t\t\t\t\tLocalCacheData.setAllURLArgs( _.omit( LocalCacheData.getAllURLArgs(), 'key' ) );\n\n\t\t\t\t\tvar url = Global.getBaseURL( null, true, true ).replace(/#!m=.*?(&|$)/g, '#!m=PortalJobVacancy$1').replace( Global.getBaseURL( null, true, false ), '' ); //Be sure to include any other URL args.\n\t\t\t\t\tIndexViewController.instance.router.navigate( url, {\n\t\t\t\t\t\ttrigger: false,\n\t\t\t\t\t\treplace: true\n\t\t\t\t\t} );\n\t\t\t\t\t$this.setLoginTips( $.i18n._( 'Password has been changed successfully, you may now login' ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\t// $( this.el ).visible();\n\t\t\t$this.render();\n\t\t}\n\t\t// this.render();\n\t}\n\n\trender() {\n\t\tvar $this = this;\n\t\tLocalCacheData.setSessionID( '' );\n\t\tthis.user_name.focus();\n\t\tthis.password.unbind( 'keydown' ).bind( 'keydown', function( e ) {\n\t\t\tif ( e.keyCode === 13 ) {\n\t\t\t\t$this.onLoginBtnClick();\n\t\t\t}\n\t\t} );\n\t\tif ( LocalCacheData.getAllURLArgs().user_name ) {\n\t\t\tthis.user_name.val( LocalCacheData.getAllURLArgs().user_name );\n\t\t}\n\t\tif ( LocalCacheData.getAllURLArgs().password ) {\n\t\t\tthis.password.val( LocalCacheData.getAllURLArgs().password );\n\t\t}\n\t\tthis.showSignInModal();\n\t}\n\n\tshowSignInModal() {\n\t\tvar $this = this;\n\t\tIndexViewController.instance.router.showSignInModal( this.$el, {\n\t\t\ttitle: $.i18n._( 'Sign In' ),\n\t\t\tactions: [\n\t\t\t\t{ label: $.i18n._( 'Cancel' ), isClose: true },\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Sign In' ), callBack: function( e ) {\n\t\t\t\t\t\t$this.onLoginBtnClick();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\t}\n\n\thideSignInModal( callback ) {\n\t\tif ( callback ) {\n\t\t\t$( '#signinModal' ).unbind( 'hidden.bs.modal' ).bind( 'hidden.bs.modal', function( e ) {\n\t\t\t\tcallback();\n\t\t\t} );\n\t\t}\n\t\tIndexViewController.instance.router.hideSignInModal();\n\t}\n\n\tforgotPasswordClick() {\n\t\tvar $this = this;\n\t\tthis.hideSignInModal( function() {\n\t\t\tvar forgotPasswordIntance = new PortalForgotPasswordController();\n\t\t\t$( '#signinModal' ).unbind( 'hidden.bs.modal' );\n\t\t} );\n\t}\n\n\tonLoginBtnClick() {\n\t\tvar user_name = this.user_name.val();\n\t\tvar password = this.password.val();\n\t\tvar $this = this;\n\t\tif ( !this.doing_login ) {\n\t\t\tthis.doing_login = true;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\t//Async call\n\t\tthis.recruitment_api.Login( user_name, password, {\n\t\t\tonResult: function( e ) {\n\t\t\t\t$this.onLoginSuccess( e );\n\t\t\t\t$this.setLocalCacheCompany();\n\t\t\t}, delegate: this\n\t\t} );\n\t}\n\n\tsetLocalCacheCompany() {\n\t\t// set local cache company information this will be used when sending an error report.\n\t\tthis.authentication_api.getCurrentCompany( {\n\t\t\tonResult: function( current_company_result ) {\n\t\t\t\tvar com_result = current_company_result.getResult();\n\t\t\t\tLocalCacheData.setCurrentCompany( com_result );\n\t\t\t}\n\t\t} );\n\t}\n\n\tonLoginSuccess( e, session_id ) {\n\t\tvar result;\n\t\tvar $this = this;\n\t\tif ( !session_id ) {\n\t\t\tresult = e.getResult();\n\t\t} else {\n\t\t\tresult = session_id;\n\t\t}\n\t\t//Clean user preference, since if login to normal UI and than to portal, it's not null.\n\t\tLocalCacheData.setLoginUserPreference( null );\n\n\t\tif ( e && !e.isValid() ) {\n\t\t\tLocalCacheData.setSessionID( '' );\n\t\t\tdeleteCookie( Global.getSessionIDKey() );\n\n\t\t\tif ( e.getDetails()[0].hasOwnProperty( 'password' ) ) {\n\t\t\t\t$this.hideSignInModal();\n\t\t\t\t$this.password.val( '' );\n\t\t\t\tIndexViewController.openWizard( 'ResetPasswordWizard', {\n\t\t\t\t\tuser_name: $this.user_name.val(),\n\t\t\t\t\tapi_class: TTAPI.APIRecruitmentAuthentication,\n\t\t\t\t\tmessage: e.getDetailsAsString()\n\t\t\t\t}, function() {\n\t\t\t\t\t$this.setLoginTips( $.i18n._( 'Password has been changed successfully, you may now login' ) );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\t// TAlertManager.showAlert( e.getDetailsAsString(), 'Error', function() {\n\t\t\t\t//     password.focus();\n\t\t\t\t// } );\n\t\t\t\tthis.setErrorTips( e );\n\t\t\t}\n\n\t\t\t$this.doing_login = false;\n\t\t} else {\n\t\t\tthis.clearErrorTips();\n\t\t\tServiceCaller.cancel_all_error = false;\n\n\t\t\tIndexViewController.setPortalLoginUserData( result, function() {\n\t\t\t\tIndexViewController.instance.router.headerView.render();\n\t\t\t\tif ( $this._delegate ) {\n\t\t\t\t\t$this._delegate.render();\n\t\t\t\t}\n\t\t\t\t$this.hideSignInModal();\n\n\t\t\t\t$this.doing_login = false;\n\t\t\t} );\n\t\t}\n\t}\n\n\tsetLoginTips( message ) {\n\t\tif ( typeof this.$( '.alert' )[0] !== 'undefined' ) {\n\t\t\tthis.$( '.alert' ).remove();\n\t\t}\n\t\tvar row = Global.loadWidget( 'views/portal/alert/alert.html' );\n\t\tthis.$( '.signIn-form' ).before( row );\n\t\tthis.$( '.alert' ).append( '<p>' + message + '</p>' );\n\t\tthis.showSignInModal();\n\t}\n\n\tsetErrorTips(e) {\n\t\tvar error_list = e.getDetails() ? e.getDetails()[0] : {};\n\t\tif (error_list && error_list.hasOwnProperty('error')) {\n\t\t\terror_list = error_list.error;\n\t\t}\n\t\tfor (var key in error_list) {\n\t\t\tif (!error_list.hasOwnProperty(key)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar field_obj;\n\t\t\tif (document.getElementById(key)) {\n\t\t\t\tfield_obj = document.getElementById(key);\n\t\t\t}\n\t\t\tif (field_obj) {\n\t\t\t\tfield_obj.classList.add('error-tip');\n\t\t\t\tvar error_string;\n\t\t\t\tif (_.isArray(error_list[key])) {\n\t\t\t\t\terror_string = error_list[key][0];\n\t\t\t\t} else {\n\t\t\t\t\terror_string = error_list[key];\n\t\t\t\t}\n\t\t\t\tvar myTooltip = new bootstrap.Tooltip(field_obj, {\n\t\t\t\t\ttitle: error_string\n\t\t\t\t});\n\t\t\t\tmyTooltip.show();\n\t\t\t\tthis.edit_view_error_ui_dic[key] = myTooltip;\n\t\t\t}\n\t\t}\n\t}\n\n\tclearErrorTips() {\n\t\tGlobal.removeErrorTips( Object.values( this.edit_view_error_ui_dic ).map( item => item[0] ), true );\n\t\tthis.edit_view_error_ui_dic = {};\n\t}\n\n}","import { TTBackboneView } from '@/views/TTBackboneView';\nimport { SignInController } from '@/views/portal/sign_in/SignInController';\nimport { HeaderUploadResumeWidget } from '@/views/portal/header/HeaderUploadResumeWidget';\nimport { ServiceCaller } from '@/services/ServiceCaller';\nimport { TTAPI } from '@/services/TimeTrexClientAPI';\n\nexport class HeaderViewController extends TTBackboneView {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tevents: {\n\t\t\t\t'click .navbar-signin .login': 'goPortalLogin',\n\t\t\t\t'click .navbar-signin .logout': 'doLogout',\n\t\t\t\t'click .navbar-signin .profile': 'goProfile'\n\t\t\t\t// 'click .navbar-upload-resume > a': 'uploadResume'\n\t\t\t}\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinitialize( options ) {\n\t\tsuper.initialize( options );\n\t\tvar url;\n\t\tvar options = {};\n\t\tif ( LocalCacheData.getAllURLArgs().company_id ) {\n\t\t\turl = ServiceCaller.getAPIURL( 'Class=APIDocumentPortal&Method=getCompanyLogo' + '&v=2' ) + '&company_id=' + LocalCacheData.getAllURLArgs().company_id;\n\t\t} else {\n\t\t\turl = '../../theme/default/portal/images/t_icon_logo.png';\n\t\t}\n\t\tvar tpl = Global.loadWidget( 'views/portal/header/HeaderView.html' );\n\t\tlet portal_vacancy_url = Global.getBaseURL() + '#!m=PortalJobVacancy&company_id=' + LocalCacheData.getAllURLArgs().company_id;\n\t\tthis.setElement( _.template( tpl )( { company_logo: url, portal_vacancy_link: portal_vacancy_url } ) );\n\t\tthis.uploadResumeWidget = null;\n\t\tthis.profileView = null;\n\t\tthis.jobVacancyDetailController = null;\n\t\tthis.jobVacancyViewController = null;\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tvar $this = this;\n\t\tif ( !LocalCacheData.getPortalLoginUser() ) {\n\t\t\tvar sign_in_container = $( '<a class=\"login\"></a>' );\n\t\t\tsign_in_container.attr( 'href', 'javascript:;' );\n\t\t\tsign_in_container.append( $( '<img>' ).attr( 'src', '../../theme/default/portal/images/t_icon_head.png' ) );\n\t\t\tsign_in_container.append( $( '<span>' ).text( $.i18n._( 'Sign In' ) ) );\n\t\t\tthis.$( '.navbar-signin' ).html( sign_in_container );\n\t\t} else {\n\t\t\tvar my_profile_container = $( '<div class=\"dropdown\"></div>' );\n\t\t\tmy_profile_container.append( '<div class=\"dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">' + LocalCacheData.getPortalLoginUser().first_name + ' ' + LocalCacheData.getPortalLoginUser().last_name + ' <span class=\"caret\"></span></div>' );\n\t\t\tvar dropdown_menus = $( '<ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\"></ul>' );\n\t\t\tdropdown_menus.append( '<li><a class=\"profile\" href=\"javascript:;\">'+ $.i18n._( 'My Profile' ) +'</a></li>' );\n\t\t\tdropdown_menus.append( '<li><a class=\"logout\" href=\"javascript:;\">'+ $.i18n._( 'Sign Out' ) +'</a></li>' );\n\t\t\tmy_profile_container.append( dropdown_menus );\n\t\t\tthis.$( '.navbar-signin' ).html( my_profile_container );\n\t\t}\n\t}\n\n\tgoPortalLogin() {\n\t\tvar sign_controller = new SignInController( {\n\t\t\t_delegate: this.jobVacancyDetailController\n\t\t} );\n\t\t// $('#signinModal').modal({\n\t\t// \tbackdrop: 'static',\n\t\t// \tshow: true\n\t\t// });\n\t}\n\n\tdoLogout() {\n\t\tthis.clearErrorTips();\n\t\tvar $this = this;\n\t\tvar current_user_api = TTAPI.APIRecruitmentAuthentication;\n\t\tcurrent_user_api.Logout( {\n\t\t\tonResult: function( result ) {\n\t\t\t\tdeleteCookie( Global.getSessionIDKey() );\n\t\t\t\tLocalCacheData.setPortalLoginUser( false );\n\t\t\t\tLocalCacheData.current_open_view_id = ''; //#1528  -  Logout icon not working.\n\n\t\t\t\tif ( $this.jobVacancyViewController ) {\n\t\t\t\t\t$this.render();\n\t\t\t\t} else {\n\t\t\t\t\tif ( window.location.href.indexOf('#!m=PortalJobVacancy&') !== -1 ) {\n\t\t\t\t\t\tIndexViewController.instance.router.headerView.render(); //Ensure the Profile button at the top right switches back to \"Sign In\"\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar url = Global.getBaseURL( null, true, true ).replace(/#!m=.*?(&|$)/g, '#!m=PortalJobVacancy$1').replace( Global.getBaseURL( null, true, false ), '' ); //Be sure to include any other URL args.\n\t\t\t\t\t\tIndexViewController.instance.router.navigate( url, {\n\t\t\t\t\t\t\ttrigger: true,\n\t\t\t\t\t\t\treplace: true\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t//needed for logout.\n\tclearErrorTips() {\n\t\t//harder here because we can't access the active controller's data from here.\n\t\tGlobal.removeErrorTips( document.querySelectorAll( '.error-tip' ), true );\n\t}\n\n\tgoProfile() {\n\t\twindow.location = Global.getBaseURL( null, true, true ).replace(/#!m=.*?(&|$)/g, '#!m=MyProfile$1').replace( /&id=[^&]*/g, '' ); //Be sure to include any other URL args.\n\t}\n\n\tuploadResume() {\n\t\tvar $this = this;\n\t\tif ( !LocalCacheData.getPortalLoginUser() ) {\n\t\t\t// IndexViewController.instance.router.showTipModal('Please login first!')\n\t\t\t// setTimeout(function(  ) {\n\t\t\t// \t$this.goPortalLogin();\n\t\t\t// }, 100)\n\t\t\tthis.goPortalLogin();\n\t\t} else {\n\t\t\tif ( !this.uploadResumeWidget ) {\n\t\t\t\tthis.uploadResumeWidget = new HeaderUploadResumeWidget( {\n\t\t\t\t\tprofileView: $this.profileView\n\t\t\t\t} );\n\t\t\t}\n\t\t\tthis.uploadResumeWidget.render();\n\t\t}\n\t}\n}\n","/*!\n * Responsive Bootstrap Toolkit\n * Author:    Maciej Gurban\n * License:   MIT\n * Version:   2.6.3 (2016-06-21)\n * Origin:    https://github.com/maciej-gurban/responsive-bootstrap-toolkit\n */\nwindow.ResponsiveBootstrapToolkit=function(i){var e={detectionDivs:{bootstrap:{xs:i('<div class=\"device-xs visible-xs visible-xs-block\"></div>'),sm:i('<div class=\"device-sm visible-sm visible-sm-block\"></div>'),md:i('<div class=\"device-md visible-md visible-md-block\"></div>'),lg:i('<div class=\"device-lg visible-lg visible-lg-block\"></div>')},foundation:{small:i('<div class=\"device-xs show-for-small-only\"></div>'),medium:i('<div class=\"device-sm show-for-medium-only\"></div>'),large:i('<div class=\"device-md show-for-large-only\"></div>'),xlarge:i('<div class=\"device-lg show-for-xlarge-only\"></div>')}},applyDetectionDivs:function(){i(document).ready(function(){i.each(o.breakpoints,function(i){o.breakpoints[i].appendTo(\".responsive-bootstrap-toolkit\")})})},isAnExpression:function(i){return\"<\"==i.charAt(0)||\">\"==i.charAt(0)},splitExpression:function(i){var e=i.charAt(0),o=\"=\"==i.charAt(1),s=1+(o?1:0),n=i.slice(s);return{operator:e,orEqual:o,breakpointName:n}},isAnyActive:function(e){var s=!1;return i.each(e,function(i,e){return o.breakpoints[e].is(\":visible\")?(s=!0,!1):void 0}),s},isMatchingExpression:function(i){var s=e.splitExpression(i),n=Object.keys(o.breakpoints),r=n.indexOf(s.breakpointName);if(-1!==r){var t=0,a=0;\"<\"==s.operator&&(t=0,a=s.orEqual?++r:r),\">\"==s.operator&&(t=s.orEqual?r:++r,a=void 0);var l=n.slice(t,a);return e.isAnyActive(l)}}},o={interval:300,framework:null,breakpoints:null,is:function(i){return e.isAnExpression(i)?e.isMatchingExpression(i):o.breakpoints[i]&&o.breakpoints[i].is(\":visible\")},use:function(i,s){o.framework=i.toLowerCase(),\"bootstrap\"===o.framework||\"foundation\"===o.framework?o.breakpoints=e.detectionDivs[o.framework]:o.breakpoints=s,e.applyDetectionDivs()},current:function(){var e=\"unrecognized\";return i.each(o.breakpoints,function(i){o.is(i)&&(e=i)}),e},changed:function(i,e){var s;return function(){clearTimeout(s),s=setTimeout(function(){i()},e||o.interval)}}};return i(document).ready(function(){i('<div class=\"responsive-bootstrap-toolkit\"></div>').appendTo(\"body\")}),null===o.framework&&o.use(\"bootstrap\"),o}(jQuery);\"undefined\"!=typeof module&&module.exports&&(module.exports=ResponsiveBootstrapToolkit);","import '@/framework/bootstrap-toolkit.min';\nimport { PortalBaseViewController } from '@/views/portal/PortalBaseViewController';\nimport { TTAPI } from '@/services/TimeTrexClientAPI';\nimport '@/global/widgets/filebrowser/TImageBrowser';\nimport { ServiceCaller } from '@/services/ServiceCaller';\nimport { TTUUID } from '@/global/TTUUID';\n\nexport class PortalJobVacancyDetailController extends PortalBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tedit_view_error_ui_dic: {},\n\t\t\tevents: {\n\t\t\t\t'click #applyBtn': 'debouncedOnApplyJobClick', //See debounced event below.\n\t\t\t\t'click #available_jobs': 'availableJobsClick',\n\t\t\t\t'click #applied_jobs': 'appliedJobsClick',\n\t\t\t\t'click #applied_btn': 'appliedJobsClick',\n\t\t\t\t'click .sign-in': 'signIN'\n\t\t\t}\n\t\t} );\n\n\t\tsuper( options );\n\n\t\tthis.debouncedOnApplyJobClick = _.debounce( this.onApplyJobClick.bind( this ), Global.calcDebounceWaitTimeBasedOnNetwork(), true );\n\n\t\t// Modify the events object so it can be re-bound after super()\n\t\tthis.events['click #applyBtn'] = 'debouncedOnApplyJobClick';\n\n\t\t// Re-delegate the events\n\t\tthis.delegateEvents();\n\t}\n\n\tinit() {\n\t\tthis.viewId = 'PortalJobVacancyDetail';\n\t\tthis.script_name = 'JobVacancyDetailView';\n\t\tthis.job_applicant_api = TTAPI.APIJobApplicantPortal;\n\t\tthis.viewport = $.extend( {}, ResponsiveBootstrapToolkit );\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tvar $this = this;\n\t\tif ( LocalCacheData.getPortalLoginUser() ) {\n\t\t\tthis.setRegisterContainerStatus( function( applied ) {\n\t\t\t\t$this.showJobVacancy( { applied: applied } );\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.showJobVacancy();\n\t\t}\n\t}\n\n\tshowJobVacancy( options ) {\n\t\tvar $this = this;\n\t\tvar row = Global.loadWidget( 'views/portal/hr/recruitment/PortalJobVacancyDetail.html' );\n\t\tvar user_data = { first_name: '', last_name: '', email: '', applied: false };\n\t\tif ( LocalCacheData.getPortalLoginUser() ) {\n\t\t\tuser_data = {\n\t\t\t\tfirst_name: LocalCacheData.getPortalLoginUser().first_name,\n\t\t\t\tlast_name: LocalCacheData.getPortalLoginUser().last_name,\n\t\t\t\temail: LocalCacheData.getPortalLoginUser().email\n\t\t\t};\n\t\t}\n\t\tif ( Global.isSet( options ) && Global.isSet( options.applied ) ) {\n\t\t\tuser_data.applied = options.applied;\n\t\t}\n\t\tfor ( var key in this.model.attributes ) {\n\t\t\tif ( this.model.get( key ) == false ) {\n\t\t\t\tthis.model.set( key, '' );\n\t\t\t}\n\t\t}\n\t\tthis.$el.html( _.template( row )( $.extend( user_data, this.model.toJSON() ) ) );\n\t\tthis.$( 'input[type=\"text\"], input[type=\"email\"]' ).each( function() {\n\t\t\t$( this ).unbind( 'focus' ).bind( 'focus', function() {\n\t\t\t\t$( this ).parent().addClass( 'job-apply-form-focus' );\n\t\t\t} );\n\t\t} );\n\t\tthis.$( 'input[type=\"text\"], input[type=\"email\"]' ).each( function() {\n\t\t\t$( this ).unbind( 'blur' ).bind( 'blur', function() {\n\t\t\t\t$( this ).parent().removeClass( 'job-apply-form-focus' );\n\t\t\t} );\n\t\t} );\n\n\t\tthis.setDetailAndApplyFormHeight();\n\t\t$( window ).resize(\n\t\t\t$this.viewport.changed( function() {\n\t\t\t\t$this.setDetailAndApplyFormHeight();\n\t\t\t} )\n\t\t);\n\t\t// if ( LocalCacheData.getPortalLoginUser() ) {\n\t\t// \tthis.setRegisterContainerStatus();\n\t\t// } else {\n\t\t// \t$this.$('.apply-form .form-group').show();\n\t\t// }\n\t\tthis.uploader = this.$( '.register-resume' ).TImageBrowser( {\n\t\t\tfield: 'file',\n\t\t\tname: 'file_data',\n\t\t\taccept_filter: '*',\n\t\t\tchangeHandler: function( a ) {\n\t\t\t\tvar file_name = $( this ).find( '.browser' )[0].files[0].name;\n\t\t\t\t$this.$( '.apply-form #file_name' ).val( file_name );\n\t\t\t}\n\t\t} );\n\n\t\tlet apply_form = document.querySelector( '.apply-form' );\n\n\t\tif ( apply_form ) {\n\t\t\tGlobal.initFileDragAndDrop( apply_form, ( files ) => {\n\t\t\t\tthis.attachDragAndDropFile( files );\n\t\t\t} );\n\t\t}\n\n\t\t// start- from html PortalJobVacancyDetail.html\n\n\n\t\t$( '.apply-form' ).unbind( 'keydown' ).bind( 'keydown', function( e ) {\n\t\t\tif ( e.keyCode === 13 ) {\n\t\t\t\t$this.onApplyJobClick();\n\t\t\t}\n\t\t} );\n\n\t\t// end - from html\n\t}\n\n\tattachDragAndDropFile( files ) {\n\t\t//Only add the first file\n\t\tlet data_transfer = new DataTransfer();\n\t\tdata_transfer.items.add( files[0] );\n\n\t\tthis.uploader[0].querySelector( 'input' ).files = data_transfer.files;\n\t\tthis.$( '.apply-form #file_name' ).val( files[0].name );\n\t}\n\n\tsetDetailAndApplyFormHeight() {\n\t\tvar detail_panel_header_height = this.$( '.job-header' ).height();\n\t\tvar apply_form__header_height = this.$( '.job-apply' ).height();\n\t\tif ( this.viewport.is( 'md' ) || this.viewport.is( '>md' ) ) {\n\t\t\tif ( detail_panel_header_height !== apply_form__header_height ) {\n\t\t\t\tif ( detail_panel_header_height > apply_form__header_height ) {\n\t\t\t\t\tthis.$( '.job-apply' ).height( detail_panel_header_height - 20 );\n\t\t\t\t} else {\n\t\t\t\t\tthis.$( '.job-header' ).height( apply_form__header_height + 20 );\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( this.viewport.is( '<=sm' ) ) {\n\t\t\tthis.$( '.job-apply' ).height( 70 );\n\t\t}\n\t}\n\n\tonApplyJobClick() {\n\t\tvar $this = this;\n\t\tif ( LocalCacheData.getPortalLoginUser() ) {\n\t\t\tthis.getJobApplication( function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tif ( result_data.length > 0 ) {\n\t\t\t\t\t\tvar location = Global.getBaseURL( null, true, true ).replace(/#!m=.*?(&|$)/g, '#!m=MyProfile' + '$1'); //Be sure to include any other URL args.\n\n\t\t\t\t\t\twindow.location = location;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.uploadResume();\n\t\t\t\t\t\t$this.saveCurrentJobVacancy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.registerNewUser( function( user_name, password ) {\n\t\t\t\tvar recruitment_api = TTAPI.APIRecruitmentAuthentication;\n\t\t\t\trecruitment_api.Login( user_name, password, {\n\t\t\t\t\tonResult: function( e ) {\n\t\t\t\t\t\t$this.onLoginSuccess( e );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t}\n\n\tavailableJobsClick() {\n\t\twindow.location = Global.getBaseURL( null, true, true ).replace(/#!m=.*?(&|$)/g, '#!m=PortalJobVacancy$1').replace( /&id=[^&]*/g, '' ); //Be sure to include any other URL args.\n\t\tLocalCacheData.setAllURLArgs( {} );\n\t}\n\n\tappliedJobsClick() {\n\t\tvar $this = this;\n\t\twindow.location = Global.getBaseURL( null, true, true ).replace(/#!m=.*?(&|$)/g, '#!m=MyJobApplication$1').replace( /&id=[^&]*/g, '' ); //Be sure to include any other URL args.\n\t\tLocalCacheData.setAllURLArgs( {} );\n\t}\n\n\tsignIN() {\n\t\tvar sign_controller = new SignInController( {\n\t\t\t_delegate: this\n\t\t} );\n\t}\n\n\tonLoginSuccess( e, session_id ) {\n\t\tvar result;\n\t\tvar $this = this;\n\t\tif ( !session_id ) {\n\t\t\tresult = e.getResult();\n\t\t} else {\n\t\t\tresult = session_id;\n\t\t}\n\t\tServiceCaller.cancel_all_error = false;\n\t\tLocalCacheData.setSessionID( result );\n\t\tsetCookie( Global.getSessionIDKey(), result );\n\t\tvar jobapplicant_api = TTAPI.APIJobApplicantPortal;\n\t\tjobapplicant_api.getJobApplicant( {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tLocalCacheData.setPortalLoginUser( result.getResult()[0] );\n\t\t\t\t\tIndexViewController.instance.router.headerView.render();\n\t\t\t\t\t$this.uploadResume();\n\t\t\t\t\t$this.saveCurrentJobVacancy();\n\t\t\t\t} else {\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetRegisterContainerStatus( callback ) {\n\t\tvar $this = this;\n\t\tthis.getJobApplication( function( res ) {\n\t\t\tvar result = false;\n\t\t\tif ( res && res.isValid() ) {\n\t\t\t\tvar result_data = res.getResult();\n\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\tresult_data = [];\n\t\t\t\t}\n\t\t\t\tif ( result_data.length > 0 ) {\n\t\t\t\t\t// $this.$('.apply-form .form-group').hide();\n\t\t\t\t\t// $this.hideApplyForm();\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcallback( result );\n\t\t} );\n\t}\n\n\t// hideApplyForm: function () {\n\t// \tthis.$('.apply-form .form-group').hide();\n\t// \tthis.$('.apply-form button[id=\"applyBtn\"]').text( $.i18n._('Applied')  ).attr('disabled', 'disabled');\n\t// },\n\n\t// showApplyForm: function () {\n\t// \tthis.$('.apply-form .form-group').show();\n\t// \tthis.$('.apply-form button[id=\"applyBtn\"]').html( $.i18n._('Apply') + '<span class=\"glyphicon glyphicon-menu-right\" aria-hidden=\"true\"></span>' ).removeAttr('disabled');\n\t// },\n\n\tgetJobApplication( callback ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.job_vacancy_id = this.model.id;\n\t\tthis.job_applicant_api.getJobApplication( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tcallback( result );\n\t\t\t}\n\t\t} );\n\t}\n\n\tsaveCurrentJobVacancy( callback ) {\n\t\tvar $this = this;\n\t\tvar record = {};\n\t\trecord.job_vacancy_id = this.model.id;\n\t\tthis.job_applicant_api.setJobApplication( record, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( !result.isValid() ) {\n\t\t\t\t\t$this.showValidateErrorTips( result );\n\t\t\t\t} else {\n\t\t\t\t\t$this.render();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tshowAlert( content ) {\n\t\tIndexViewController.instance.router.showTipModal( content, {\n\t\t\tstyle: {\n\t\t\t\t'border': '2px solid #154575',\n\t\t\t\t'color': '#154575'\n\t\t\t}\n\t\t} );\n\t}\n\n\tuploadResume() {\n\t\tif ( !this.uploader ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( document.getElementById( 'file_browser') !== null ) { //Only try uploading resume if the \"Browse\" button actually exists. So when the user is already logged in and applying for a position they don't get an error message.\n\t\t\tvar uploader = this.uploader;\n\t\t\tvar name = uploader.attr( 'file_name' );\n\t\t\tvar file = uploader.getValue();\n\t\t\tif ( file ) {\n\t\t\t\tthis.document_api = TTAPI.APIDocumentPortal;\n\t\t\t\tvar document_name = 'Resume' + ' - ' + this.$( '.apply-form input[id=\"first_name\"]' ).val() + ' ' + this.$( '.apply-form input[id=\"last_name\"]' ).val();\n\t\t\t\tvar document_revision_id = this.document_api.addAttachment( document_name, '', { async: false } ).getResult()['document_revision_id'];\n\t\t\t\tthis.uploadFile( file, document_revision_id );\n\t\t\t} else {\n\t\t\t\tthis.applyFail( $.i18n._( 'No resume uploaded.' ) );\n\t\t\t}\n\t\t}\n\t}\n\n\tgetProfileURL() {\n\t\treturn Global.getBaseURL( null, true, true ).replace(/#!m=.*?(&|$)/g, '#!m=MyProfile' + '$1'); //Be sure to include any other URL args.\n\t}\n\n\tapplySuccess() {\n\t\tvar content = $( '<div>' );\n\t\tcontent.append( '<p><strong>' + $.i18n._( 'Application sent successfully!' ) + '</strong></p>' );\n\t\tcontent.append( '<p>' + $.i18n._( 'Please ensure all sections of your profile are accurate and complete.' ) + '</p>' );\n\t\tthis.showAlert( content );\n\t\twindow.location = this.getProfileURL();\n\t}\n\n\tapplyFail( error ) {\n\t\tvar content = $( '<div>' );\n\t\tcontent.append( '<p><strong><font color=\"red\">' + error + '</font></strong></p>' );\n\t\tcontent.append( '<p>' + $.i18n._( 'Please complete your profile and ensure all information is accurate and complete.' ) + '</p>' );\n\t\tthis.showAlert( content );\n\t\twindow.location = this.getProfileURL();\n\t}\n\n\tuploadFile( file_data, document_revision_id ) {\n\t\tvar $this = this;\n\t\tvar url = ServiceCaller.getAPIURL( 'Class=' + this.document_api.className + '&Method=uploadAttachment' + '&v=2' );\n\t\tif ( LocalCacheData.getAllURLArgs().company_id ) {\n\t\t\turl = url + '&company_id=' + LocalCacheData.getAllURLArgs().company_id;\n\t\t}\n\t\turl = url + '&object_id=' + document_revision_id;\n\t\tvar message_id = TTUUID.generateUUID();\n\t\tProgressBar.showProgressBar( message_id );\n\t\tProgressBar.changeProgressBarMessage( 'File Uploading' );\n\t\t$.ajax( {\n\t\t\turl: url, //Server script to process data\n\t\t\theaders: {\n\t\t\t\t//Handle CSRF tokens and related headers here.\n\t\t\t\t'X-Client-ID': 'Browser-TimeTrex',\n\t\t\t\t'X-CSRF-Token': getCookie( 'CSRF-Token' ),\n\t\t\t},\n\t\t\ttype: 'POST',\n\t\t\tdata: file_data,\n\t\t\tsuccess: function( res ) {\n\t\t\t\tProgressBar.removeProgressBar();\n\t\t\t\tif ( res.error == '' ) {\n\t\t\t\t\t$this.applySuccess();\n\t\t\t\t} else {\n\t\t\t\t\t$this.applyFail( res.error );\n\t\t\t\t}\n\t\t\t},\n\t\t\tcache: false,\n\t\t\tcontentType: false,\n\t\t\tprocessData: false\n\t\t} );\n\t}\n\n\tregisterNewUser( callBack ) {\n\t\tvar $this = this;\n\t\tvar data = {};\n\t\tdata.first_name = this.$( '.apply-form input[id=\"first_name\"]' ).val();\n\t\tdata.last_name = this.$( '.apply-form input[id=\"last_name\"]' ).val();\n\t\tdata.user_name = this.$( '.apply-form input[id=\"email\"]' ).val();\n\t\tdata.email = data.user_name;\n\t\tdata.password = Math.random().toString( 36 ).replace( /[^a-z0-9]+/g, '' ); //Use a random password for new users.\n\t\tdata.company_id = LocalCacheData.getAllURLArgs().company_id;\n\t\tif ( this.$( '.apply-form input[id=\"email\"]' ).val() === this.$( '.apply-form input[id=\"confirm_email\"]' ).val() ) {\n\t\t\tif ( this.edit_view_error_ui_dic.hasOwnProperty( 'confirm_email' ) ) {\n\t\t\t\tGlobal.removeErrorTips( [ this.edit_view_error_ui_dic['confirm_email'][0] ], true );\n\t\t\t}\n\t\t\tif ( data.first_name != '' && data.last_name != '' && data.email != '' ) {\n\t\t\t\tif ( !this.uploader.getValue() ) {\n\t\t\t\t\tIndexViewController.instance.router.showConfirmModal( $.i18n._( 'Are you sure you want to apply for this position without uploading a resume?' ), {\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\tactions: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'No', isClose: true, callBack: function( e ) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'Yes', callBack: function( e ) {\n\t\t\t\t\t\t\t\t\tIndexViewController.instance.router.hideConfirmModal();\n\t\t\t\t\t\t\t\t\t$this.setJobApplicant( data, callBack );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t} );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setJobApplicant( data, callBack );\n\t\t} else {\n\t\t\tthis.removeValidateErrorTips();\n\t\t\tvar field_obj = this.$( '.apply-form' ).find( 'input[id=\"confirm_email\"]' );\n\t\t\tfield_obj[0].classList.add( 'error-tip' );\n\n\t\t\tconst tooltip = new bootstrap.Tooltip( field_obj[0], {\n\t\t\t\ttitle: 'Confirm email does not match email', // Replace this with the appropriate translation function if needed\n\t\t\t} );\n\n\t\t\tif ( tooltip ) {\n\t\t\t\ttooltip.show();\n\t\t\t}\n\t\t\tthis.edit_view_error_ui_dic['confirm_email'] = field_obj;\n\t\t}\n\t}\n\n\tsetJobApplicant( data, callBack ) {\n\t\tvar $this = this;\n\t\tthis.job_applicant_api.setIsIdempotent( true ); //Force to idempotent API call to avoid duplicate network requests from causing errors displayed to the user.\n\t\tthis.job_applicant_api.setJobApplicant( data, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\t$this.removeValidateErrorTips();\n\t\t\t\t\t$this.edit_view_error_ui_dic = {};\n\t\t\t\t\tcallBack( data.user_name, data.password );\n\t\t\t\t} else {\n\t\t\t\t\t$this.showValidateErrorTips( result );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tshowValidateErrorTips( result, stepsWidgetDic ) {\n\t\tconst details = result.getDetails() || result.getDescription();\n\n\t\tif ( Global.isArray( details ) || typeof details === 'object' ) {\n\t\t\tthis.removeValidateErrorTips();\n\n\t\t\tObject.values( details ).forEach( ( val ) => {\n\t\t\t\tif ( val.hasOwnProperty( 'error' ) ) {\n\t\t\t\t\tval = val.error;\n\t\t\t\t}\n\n\t\t\t\tfor ( let key in val ) {\n\t\t\t\t\tif ( !val.hasOwnProperty( key ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet error_string = '';\n\t\t\t\t\tif ( key === 'user_name' ) {\n\t\t\t\t\t\tkey = 'email';\n\t\t\t\t\t\terror_string = $.i18n._( 'Email address already exists, please login instead' );\n\t\t\t\t\t}\n\n\t\t\t\t\tlet field_obj = null;\n\t\t\t\t\tif ( this.$( '.apply-form' ).find( `input[id=\"${key}\"]` )[0] ) {\n\t\t\t\t\t\tfield_obj = this.$( '.apply-form' ).find( `input[id=\"${key}\"]` );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfield_obj = this.$( '.apply-form' );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( field_obj ) {\n\t\t\t\t\t\tfield_obj.addClass( 'error-tip' );\n\t\t\t\t\t\tif ( !error_string ) {\n\t\t\t\t\t\t\terror_string = _.isArray( val[key] ) ? val[key][0] : val[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfield_obj.attr( { 'title': error_string, 'data-bs-original-title': error_string } );\n\t\t\t\t\t\tconst tooltip = new bootstrap.Tooltip( field_obj[0], {\n\t\t\t\t\t\t\t'title': error_string,\n\t\t\t\t\t\t} );\n\t\t\t\t\t\ttooltip.show();\n\t\t\t\t\t\tthis.edit_view_error_ui_dic[key] = field_obj;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\treturn false;\n\t}\n\n\tremoveValidateErrorTips() {\n\t\tconst tips_to_remove = [];\n\n\t\tfor ( const key in this.edit_view_error_ui_dic ) {\n\t\t\tif ( key === 'email' || key === 'confirm_email' ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ttips_to_remove.push( this.edit_view_error_ui_dic[key] );\n\t\t}\n\n\t\tGlobal.removeErrorTips( tips_to_remove.map( item => item[0] ), true );\n\t}\n\n}\n","import { PortalBaseViewController } from '@/views/portal/PortalBaseViewController';\nimport { TTAPI } from '@/services/TimeTrexClientAPI';\nimport { PortalJobVacancyDetailController } from '@/views/portal/hr/recruitment/PortalJobVacancyDetailController';\nimport { IndexViewController} from '@/portal/recruitment/IndexController';\n\nexport class PortalJobVacancyDetailViewController extends PortalBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '.job-vacancy-detail-view',\n\t\t\tapi: null,\n\n\t\t\t// _required_files: ['PortalJobVacancyDetailController']\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit() {\n\t\tthis.script_name = 'JobVacancyDetailView';\n\t\tthis.api = TTAPI.APIJobVacancyPortal;\n\t\tthis.job_detail_panel = this.$( '.search-result' );\n\t\tthis.job_detail_panel.empty();\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tvar $this = this;\n\t\tProgressBar.showOverlay();\n\t\tthis.search();\n\t}\n\n\tsearch() {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tif ( LocalCacheData.edit_id_for_next_open_view ) {\n\t\t\tthis.view_id = LocalCacheData.edit_id_for_next_open_view;\n\t\t\tfilter.filter_data.id = [this.view_id];\n\t\t\tProgressBar.showOverlay();\n\t\t\tthis.api.getJobVacancy( filter, {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tresult_data = result_data[0];\n\t\t\t\t\t// $this.current_edit_record = result_data;\n\t\t\t\t\tif ( result_data ) {\n\t\t\t\t\t\tvar detail_model = new Backbone.Model( result_data );\n\t\t\t\t\t\tvar portal_job_vacancy_detail = new PortalJobVacancyDetailController( {\n\t\t\t\t\t\t\tmodel: detail_model,\n\t\t\t\t\t\t\tel: $this.$el\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tIndexViewController.instance.router.headerView.jobVacancyDetailController = portal_job_vacancy_detail;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t\tLocalCacheData.edit_id_for_next_open_view = null;\n\t\t}\n\t}\n\n\tgoPortalLogin() {\n\t\tvar url = Global.getBaseURL( null, true, true ).replace(/#!m=.*?(&|$)/g, '#!m=PortalJobVacancy$1'); //Be sure to include any other URL args.\n\n\t\tif ( window.location.href === url ) {\n\t\t\tIndexViewController.instance.router.reloadView( 'PortalJobVacancy' );\n\t\t} else {\n\t\t\twindow.location = url;\n\t\t}\n\t}\n}\n\nPortalJobVacancyDetailViewController.html_template = `\n<div class=\"view job-vacancy-detail-view\"></div>`;","import { PortalBaseViewController } from '@/views/portal/PortalBaseViewController';\nimport { SignInController } from '@/views/portal/sign_in/SignInController';\nimport { TTAPI } from '@/services/TimeTrexClientAPI';\n\nexport class PortalJobVacancyViewController extends PortalBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#job_vacancy_view_container',\n\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\tthis.api = TTAPI.APIJobVacancyPortal;\n\t\tthis.script_name = 'JobVacancyView';\n\t\tthis.render();\n\t\tTTPromise.resolve( 'IndexController', 'onViewChange' );\n\t}\n\n\tsearch() {\n\t\tvar $this = this;\n\t\tthis.onSearchClick( {\n\t\t\tcallback: function() {\n\t\t\t\tif ( LocalCacheData.getAllURLArgs().sm === 'ResetPassword' && LocalCacheData.getAllURLArgs().key && LocalCacheData.getAllURLArgs().company_id ) {\n\t\t\t\t\tvar signInController = new SignInController();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n}\n\nPortalJobVacancyViewController.html_template = `\n<div id=\"job_vacancy_view_container\">\n\t<div class=\"search-bar\">\n\t\t<div class=\"container\">\n\t\t\t<form>\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-md-3\">\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label class=\"sr-only\" for=\"name\">title</label>\n\t\t\t\t\t\t\t<input class=\"form-control\" id=\"name\" placeholder=\"<%= $.i18n._('Search Title') %>\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-md-2\">\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"country\" class=\"sr-only\">country</label>\n\t\t\t\t\t\t\t<div class=\"styled-select\">\n\t\t\t\t\t\t\t\t<select class=\"form-control\" id=\"country\"></select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-md-2\">\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"province\" class=\"sr-only\">province</label>\n\t\t\t\t\t\t\t<div class=\"styled-select\">\n\t\t\t\t\t\t\t\t<select class=\"form-control\" id=\"province\">\n\t\t\t\t\t\t\t\t\t<option value=\"\"><%= $.i18n._('All Province/States') %></option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-md-2\">\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"city\" class=\"sr-only\">city</label>\n\t\t\t\t\t\t\t<input class=\"form-control\" id=\"city\" placeholder=\"<%= $.i18n._('Search City') %>\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-md-3\">\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-block btn-default search-btn w-100\"><%= $.i18n._('Search') %> <span class=\"glyphicon glyphicon-menu-right\" aria-hidden=\"true\"></span></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t</div>\n\t<div class=\"search-result\">\n\t\t<div class=\"content container\"></div>\n\t\t<div class=\"more container\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<button type=\"button\" class=\"btn btn-primary btn-lg btn-block\"><%= $.i18n._('Loading') %>...</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n`;\n","import { PortalBaseViewController } from '@/views/portal/PortalBaseViewController';\nimport { TTAPI } from '@/services/TimeTrexClientAPI';\nimport { TTUUID } from '@/global/TTUUID';\n\nexport class JobApplicantSubBaseViewController extends PortalBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tevents: {\n\t\t\t\t'change input[type=\"text\"]': 'onFormItemChange',\n\t\t\t\t'change input[type=\"checkbox\"]': 'onFormItemChange',\n\t\t\t\t'change select.form-control': 'onFormItemChange',\n\t\t\t\t'change textarea.form-control': 'onFormItemChange'\n\t\t\t\t// 'click .styled-select .glyphicon': 'onSelectClick',\n\t\t\t}\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tpreInit( options ) { //Since this is an intermediary class between *SubViewController and PortalBaseViewController, we need to use preInit() so this is called before init() of each child class.\n\t\tthis.api = TTAPI.APIJobApplicantPortal;\n\t\tthis.qualification_api = TTAPI.APIQualificationPortal;\n\t\tthis.company_api = TTAPI.APICompanyPortal;\n\t\tthis.sub_view_id = options.sub_view_id;\n\t\tthis.display_columns = options.display_columns;\n\t\tthis.table_container = options.table_container;\n\t\tthis.available_fields = options.available_fields;\n\t\tthis._delegate = options._delegate;\n\t\tthis.edit_view_error_ui_dic = {};\n\t\tthis.enable_add_qualification = options.enable_add_qualification || false;\n\n\t}\n\n\tpostInit() {\n\t\tif ( !this.model.id ) {\n\t\t\tthis.setEditView();\n\t\t} else {\n\t\t\tthis.render();\n\t\t}\n\t}\n\n\trender() {\n\t\tvar $this = this;\n\t\tvar list_tpl = Global.loadWidget( 'views/portal/hr/my_profile/MyProfileSubView.html' );\n\t\tvar unique_id = this.sub_view_id + '-' + this.model.id;\n\t\tthis.unique_id = unique_id;\n\t\tthis.sub_view = _.template( list_tpl )( {} );\n\t\tif ( this.table_container.find( '.table-container' ).length == 0 ) {\n\t\t\tthis.table_container.html( '<div class=\"table-responsive\"><table class=\"table table-condensed table-bordered table-container\"><thead></thead><tbody></tbody></table></div>' );\n\t\t}\n\t\tif ( this.table_container.find( '#' + unique_id ).length === 0 ) {\n\t\t\tvar tbody = $( '<tr>' ).attr( 'id', unique_id );\n\t\t\t$( this.table_container.find( 'tbody' )[0] ).append( tbody );\n\t\t} else {\n\t\t\tthis.table_container.find( '#' + unique_id ).html( '' );\n\t\t}\n\t\tvar thead = $( '<tr>' );\n\t\tfor ( var column in this.display_columns ) {\n\t\t\tif ( !this.display_columns.hasOwnProperty( column ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// comment this, this will cause some default display columns cannot be shown.\n\t\t\t// if ( !this.available_fields.hasOwnProperty( column ) ) {\n\t\t\t// \tcontinue;\n\t\t\t// }\n\t\t\tvar column_val;\n\t\t\tswitch ( column ) {\n\t\t\t\tcase 'is_current_employer':\n\t\t\t\tcase 'is_contact_available':\n\t\t\t\t\tif ( this.model.get( column ) ) {\n\t\t\t\t\t\tcolumn_val = $.i18n._( 'Yes' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolumn_val = $.i18n._( 'No' );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif ( !this.model.get( column ) ) {\n\t\t\t\t\t\tcolumn_val = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolumn_val = this.model.get( column );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthead.append( '<th>' + this.display_columns[column] + '</th>' );\n\t\t\tthis.table_container.find( '#' + unique_id ).append( '<td>' + column_val + '</td>' );\n\t\t}\n\t\tthead.append( '<th>' + $.i18n._( 'Action' ) + '</th>' );\n\t\tif ( this.table_container.find( 'thead' ).html() === '' ) {\n\t\t\tthis.table_container.find( 'thead' ).html( thead );\n\t\t}\n\t\tthis.table_container.find( '#' + unique_id ).append( this.sub_view );\n\t\tthis.table_container.find( '#' + unique_id ).find( '.edit-icon' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$this['get' + $this.sub_view_id]( function() {\n\t\t\t\t$this.setEditView();\n\t\t\t} );\n\t\t} );\n\t\tthis.table_container.find( '#' + unique_id ).find( '.delete-icon' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$this['get' + $this.sub_view_id]( function() {\n\t\t\t\t$this.onDeleteClick();\n\t\t\t} );\n\t\t} );\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\tvar filter_data = {};\n\t\tfilter_data.type_id = [this.qualification_type_id];\n\t\targs.filter_data = filter_data;\n\t\targs.filter_columns = {\n\t\t\t'id': true,\n\t\t\t'name': true\n\t\t};\n\t\tthis.qualification_api.getQualification( args, true, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar res = result.getResult();\n\t\t\t\tvar options = {};\n\t\t\t\tfor ( var i in res ) {\n\t\t\t\t\tif ( !res.hasOwnProperty( i ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tvar row = res[i];\n\t\t\t\t\toptions[row.id] = $.i18n._( row.name );\n\t\t\t\t}\n\t\t\t\t$this.setSourceData( 'qualification_id', options, true );\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSelectClick( e ) {\n\t\tvar elem = $( e.currentTarget ).parent().find( 'select' );\n\t\tif ( document.createEvent ) {\n\t\t\tvar e = document.createEvent( 'MouseEvents' );\n\t\t\te.initMouseEvent( 'mousedown', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null );\n\t\t\telem[0].dispatchEvent( e );\n\t\t} else if ( element.fireEvent ) {\n\t\t\telem[0].fireEvent( 'onmousedown' );\n\t\t}\n\t}\n\n\tsetEditView() {\n\t\tvar tpl = Global.loadWidget( 'views/portal/hr/my_profile/' + this.sub_view_id + 'SubEditView.html' );\n\t\tthis.setElement( _.template( tpl )( {\n\t\t\tavailable_fields: this.available_fields,\n\t\t\tenable_add_qualification: this.enable_add_qualification\n\t\t} ) );\n\t\tthis.initOptions();\n\t\tthis.registerDatePicker();\n\t\tthis.setCurrentEditRecordData();\n\t\tthis.openEditView();\n\t}\n\n\tonDeleteClick() {\n\t\tvar $this = this;\n\t\tIndexViewController.instance.router.showConfirmModal( Global.delete_confirm_message, {\n\t\t\ttitle: '',\n\t\t\tactions: [\n\t\t\t\t{ label: 'No', isClose: true },\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Yes', callBack: function( e ) {\n\t\t\t\t\t\t$this.closeConfirmModal();\n\t\t\t\t\t\tProgressBar.showOverlay();\n\t\t\t\t\t\t$this.api['delete' + $this.sub_view_id]( $this.model.id, {\n\t\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\t\t\t\t\t// $this.remove();\n\t\t\t\t\t\t\t\t\t// $this.table_container.find('#'+$this.unique_id).remove();\n\t\t\t\t\t\t\t\t\t$this._delegate.setSubViews( $this.sub_view_id, $this.display_columns );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$this.showErrorAlert( result );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\t}\n\n\tsetSourceData( field, source_data, set_empty ) {\n\t\tvar $this = this;\n\t\tvar field_selector = 'select[name=\"' + field + '\"]';\n\t\tif ( this.$( field_selector ) && this.$( field_selector )[0] ) {\n\t\t\tthis.$( field_selector ).empty();\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\tif ( !Global.isSet( this.model.get( field ) ) ) {\n\t\t\tthis.model.set( field, '' ); // initialize a value;\n\t\t}\n\t\tif ( _.size( source_data ) == 0 ) {\n\t\t\tset_empty = true;\n\t\t\tthis.model.set( field, '' );\n\t\t}\n\t\tswitch ( field ) {\n\t\t\tcase 'qualification_id':\n\t\t\t\tif ( this.enable_add_qualification ) {\n\t\t\t\t\tvar option_name;\n\t\t\t\t\tswitch ( this.sub_view_id ) {\n\t\t\t\t\t\tcase 'JobApplicantSkill':\n\t\t\t\t\t\t\toption_name = $.i18n._( 'Add New Skill' );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'JobApplicantEducation':\n\t\t\t\t\t\t\toption_name = $.i18n._( 'Add New Course' );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'JobApplicantLicense':\n\t\t\t\t\t\t\toption_name = $.i18n._( 'Add New Type' );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'JobApplicantLanguage':\n\t\t\t\t\t\t\toption_name = $.i18n._( 'Add New Language' );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'JobApplicantMembership':\n\t\t\t\t\t\t\toption_name = $.i18n._( 'Add New Membership' );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tset_empty = false;\n\t\t\t\t\tthis.$( field_selector ).append( $( '<option></option>' ).prop( 'value', '' ).text( '-- ' + option_name + ' --' ) );\n\t\t\t\t}\n\t\t\t//break; -- Do not break here, it should fall through to default.\n\t\t\tdefault:\n\t\t\t\tif ( set_empty === true ) {\n\t\t\t\t\tthis.$( field_selector ).append( $( '<option></option>' ).prop( 'value', '' ).text( '-- ' + $.i18n._( 'None' ) + ' --' ) );\n\t\t\t\t}\n\t\t\t\tif ( _.size( source_data ) > 0 ) {\n\t\t\t\t\t$.each( source_data, function( value, label ) {\n\t\t\t\t\t\t$this.$( field_selector ).append( $( '<option></option>' ).prop( 'value', value ).text( label ) );\n\t\t\t\t\t\tif ( $this.model.get( field ) == value ) {\n\t\t\t\t\t\t\t$this.$( field_selector ).val( value );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\t$this.$( field_selector ).selectpicker();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tregisterDatePicker() {\n\t\tvar time_format = 'h:mm TT';\n\t\tvar format = 'dd-M-y';\n\t\tvar focus_out_timer;\n\t\tvar is_open = false;\n\t\t// When portal mode, no user preference.\n\t\t// if ( LocalCacheData.getLoginUserPreference() ) {\n\t\t// \tformat = LocalCacheData.getLoginUserPreference().date_format_1;\n\t\t// \ttime_format = LocalCacheData.getLoginUserPreference().time_format_1;\n\t\t// }\n\t\tvar day_name_min = [\n\t\t\t$.i18n._( 'Sun' ), $.i18n._( 'Mon' ), $.i18n._( 'Tue' ),\n\t\t\t$.i18n._( 'Wed' ), $.i18n._( 'Thu' ), $.i18n._( 'Fri' ), $.i18n._( 'Sat' )\n\t\t];\n\t\tvar month_name_short = [\n\t\t\t$.i18n._( 'Jan' ), $.i18n._( 'Feb' ),\n\t\t\t$.i18n._( 'Mar' ), $.i18n._( 'Apr' ), $.i18n._( 'May' ),\n\t\t\t$.i18n._( 'Jun' ), $.i18n._( 'Jul' ), $.i18n._( 'Aug' ),\n\t\t\t$.i18n._( 'Sep' ), $.i18n._( 'Oct' ), $.i18n._( 'Nov' ),\n\t\t\t$.i18n._( 'Dec' )\n\t\t];\n\t\tvar current_text = $.i18n._( 'Today' );\n\t\tvar close_text = $.i18n._( 'Close' );\n\t\tvar options = {\n\t\t\tshowTime: false,\n\t\t\tdateFormat: format,\n\t\t\tshowHour: false,\n\t\t\tshowMinute: false,\n\t\t\tchangeMonth: true,\n\t\t\tchangeYear: true,\n\t\t\tshowButtonPanel: true,\n\t\t\tduration: '',\n\t\t\tshowAnim: '',\n\t\t\tyearRange: '-100:+10',\n\t\t\tshowOn: '',\n\t\t\tdayNamesMin: day_name_min,\n\t\t\tcurrentText: current_text,\n\t\t\tmonthNamesShort: month_name_short,\n\t\t\tcloseText: close_text,\n\t\t\tbeforeShow: function() {\n\t\t\t},\n\t\t\tonSelect: function( dateText ) {\n\t\t\t\t$( this ).change();\n\t\t\t},\n\t\t\tonClose: function() {\n\t\t\t\tfocus_out_timer = setTimeout( function() {\n\t\t\t\t\tis_open = false;\n\t\t\t\t}, 100 );\n\t\t\t}\n\n\t\t};\n\t\tthis.$( 'input[type=\"text\"].datepicker' ).datepicker( options );\n\t\tthis.$( 'input[type=\"text\"].datepicker' ).attr( 'placeholder', 'dd-mmm-yy' );\n\t\tthis.$( 'input[type=\"text\"].datepicker' ).bind( 'mouseup', function() {\n\t\t\tif ( !is_open ) {\n\t\t\t\t$( this ).datepicker( 'show' );\n\t\t\t\tis_open = true;\n\t\t\t} else {\n\t\t\t\tis_open = false;\n\t\t\t\tif ( focus_out_timer ) {\n\t\t\t\t\tclearTimeout( focus_out_timer );\n\t\t\t\t\tfocus_out_timer = null;\n\t\t\t\t}\n\t\t\t}\n\t\t} ).next('.glyphicon').bind( 'mouseup', function() { $(this).prev().trigger( 'mouseup' ) } ); // this allows clicking on the calendar icon as well as the input box\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tvar self = this;\n\t\tvar unindexed_array = this.$( '.detail-form' ).serializeArray();\n\t\t$.map( unindexed_array, function( row, i ) {\n\t\t\tif ( !Global.isSet( self.model.get( row['name'] ) ) ) {\n\t\t\t\tself.model.set( row['name'], row['value'] );\n\t\t\t}\n\t\t} );\n\t\tif ( !this.model.has( 'qualification_id' ) ) {\n\t\t\tthis.model.set( 'qualification_id', false );\n\t\t}\n\t}\n\n\taddQualification() {\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\targs.type_id = this.qualification_type_id;\n\t\tvar name = args.name = this.getQualificationWidget().val();\n\t\tthis.qualification_api.setQualification( args, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tif ( !res.isValid() ) {\n\t\t\t\t\t$this.setErrorTips( res );\n\t\t\t\t} else {\n\t\t\t\t\t$this.$( 'select[name=\\'qualification_id\\']' ).selectpicker( 'destroy' );\n\t\t\t\t\tvar new_id = res.getResult();\n\t\t\t\t\t$( '<option>' ).attr( {\n\t\t\t\t\t\tselected: 'selected',\n\t\t\t\t\t\tvalue: new_id\n\t\t\t\t\t} ).text( name ).appendTo( $this.$( 'select[name=\\'qualification_id\\']' ) );\n\t\t\t\t\t$this.$( 'select[name=\\'qualification_id\\']' ).selectpicker();\n\t\t\t\t\t$this.$( 'select[name=\\'qualification_id\\']' ).trigger( 'change' );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetAddQualificationContainer() {\n\t\treturn this.$( '.add-qualification-container' );\n\t}\n\n\tgetQualificationWidget() {\n\t\treturn this.getAddQualificationContainer().find( 'input[name=\"name\"]' );\n\t}\n\n\tshowAddQualificationContainer() {\n\t\tvar $this = this;\n\t\tvar container = this.getAddQualificationContainer();\n\t\tcontainer.css( 'display', 'table' );\n\t\tcontainer.find( '.input-group-btn' ).off( 'click' ).on( 'click', function() {\n\t\t\t$this.addQualification();\n\t\t} );\n\t\tvar qualification_widget = this.getQualificationWidget();\n\t\tqualification_widget.val( '' );\n\t\tqualification_widget.unbind( 'keydown' ).bind( 'keydown', function( e ) {\n\t\t\tif ( e.keyCode === 13 ) {\n\t\t\t\t$this.addQualification();\n\t\t\t}\n\t\t} );\n\t\treturn container;\n\t}\n\n\thideAddQualificationContainer() {\n\t\tvar container = this.getAddQualificationContainer();\n\t\tcontainer.css( 'display', 'none' );\n\t\treturn container;\n\t}\n\n\t// showAddQualificationErrorTip: function () {\n\t// \tvar container = this.getAddQualificationContainer();\n\t//\n\t// },\n\n\topenEditView() {\n\t\tvar $this = this;\n\t\tIndexViewController.instance.router.showFormModal( this.$el, {\n\t\t\ttitle: '',\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Close', isClose: true, callBack: function( e ) {\n\t\t\t\t\t\t//$this.clearErrorTips( true );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Save Changes', callBack: function( e ) {\n\t\t\t\t\t\t$this.onSaveClick();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t} );\n\t}\n\n\tcloseEditView() {\n\t\tIndexViewController.instance.router.hideFormModal();\n\t}\n\n\tcloseConfirmModal() {\n\t\tIndexViewController.instance.router.hideConfirmModal();\n\t}\n\n\tonFormItemChange( e, doNotValidate ) {\n\t\tvar key = e.currentTarget.name;\n\t\tthis.model.set( key, $( e.currentTarget ).val() );\n\t\tswitch ( key ) {\n\t\t\tcase 'qualification_id':\n\t\t\t\tif ( this.model.get( key ) === '' && this.enable_add_qualification ) {\n\t\t\t\t\tthis.showAddQualificationContainer();\n\t\t\t\t\tdoNotValidate = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.hideAddQualificationContainer();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tvalidate() {\n\t\tvar $this = this;\n\t\t// var record = this.current_edit_record;\n\t\t// this.api.setJobApplicant\n\t\tthis.api['validate' + this.sub_view_id]( this.model.toJSON(), {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.validateResult( result );\n\t\t\t}\n\t\t} );\n\t}\n\n\tvalidateResult( result ) {\n\t\t// this.clearErrorTips();\n\t\tthis.setErrorTips( result );\n\t}\n\n\tclearErrorTips( clear_all ) {\n\t\tGlobal.removeErrorTips( Object.values( this.edit_view_error_ui_dic ).map( item => item[0] ), clear_all );\n\t}\n\n\tsetErrorTips( result ) {\n\t\tthis.clearErrorTips( true );\n\t\tlet error_list = result.getDetails() ? result.getDetails()[0] : {};\n\t\tif ( error_list && error_list.hasOwnProperty( 'error' ) ) {\n\t\t\terror_list = error_list.error;\n\t\t}\n\t\tfor ( const key in error_list ) {\n\t\t\tif ( !error_list.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet field_obj;\n\t\t\tif ( this.$( `input[name=\"${key}\"]` )[0] ) {\n\t\t\t\tfield_obj = this.$( `input[name=\"${key}\"]` );\n\t\t\t} else if ( this.$( `select[name=\"${key}\"]` )[0] ) {\n\t\t\t\tfield_obj = this.$( `select[name=\"${key}\"]` ).parents( '.styled-select' );\n\t\t\t} else if ( this.$( `textarea[name=\"${key}\"]` )[0] ) {\n\t\t\t\tfield_obj = this.$( `textarea[name=\"${key}\"]` );\n\t\t\t}\n\t\t\tif ( field_obj ) {\n\t\t\t\tfield_obj.addClass( 'error-tip' );\n\t\t\t\tlet error_string;\n\t\t\t\tif ( _.isArray( error_list[key] ) ) {\n\t\t\t\t\terror_string = error_list[key][0];\n\t\t\t\t} else {\n\t\t\t\t\terror_string = error_list[key];\n\t\t\t\t}\n\t\t\t\tconst tooltip = new bootstrap.Tooltip( field_obj[0], {\n\t\t\t\t\ttitle: error_string,\n\t\t\t\t\tplacement: 'right',\n\t\t\t\t\tcontainer: 'body',\n\t\t\t\t\ttrigger: 'hover focus'\n\t\t\t\t} );\n\n\t\t\t\ttooltip.show();\n\t\t\t\tthis.edit_view_error_ui_dic[key] = field_obj;\n\t\t\t}\n\t\t}\n\t}\n\n\tshowErrorAlert( result ) {\n\t\tvar details = result.getDetails();\n\n\t\tif ( details.hasOwnProperty( 'error' ) ) {\n\n\t\t}\n\t\tif ( !details ) {\n\t\t\tdetails = result.getDescription(); // If the details is empty, try to get description to show.\n\t\t}\n\t\tvar error_string = '';\n\n\t\tif ( Global.isArray( details ) || typeof details === 'object' ) {\n\n\t\t\t$.each( details, function( index, val ) {\n\n\t\t\t\tif ( val.hasOwnProperty( 'error' ) ) {\n\t\t\t\t\tval = val.error;\n\t\t\t\t}\n\n\t\t\t\tfor ( var key in val ) {\n\t\t\t\t\terror_string = error_string + val[key] + '<br>';\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\n\t\t\terror_string = details;\n\t\t}\n\n\t\tthis.showAlert( error_string );\n\t}\n\n\tonSaveClick() {\n\t\tvar $this = this;\n\t\t// if ( _.size(this.edit_view_error_ui_dic) > 0 ) {\n\t\t// \treturn;\n\t\t// }\n\t\tthis.api['set' + this.sub_view_id]( this.model.toJSON(), {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( result_data !== true && TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t\t\t$this.model.set( 'id', result_data );\n\t\t\t\t\t}\n\t\t\t\t\t$this.edit_view_error_ui_dic = {};\n\t\t\t\t\t$this['get' + $this.sub_view_id]( function() {\n\t\t\t\t\t\t$this.render();\n\t\t\t\t\t\t$this.closeEditView();\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\t$this.setErrorTips( result );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tshowAlert( content ) {\n\t\tIndexViewController.instance.router.showTipModal( content );\n\t}\n}","import { JobApplicantSubBaseViewController } from '@/views/portal/hr/my_profile/JobApplicantSubBaseViewController';\n\nexport class JobApplicantEmploymentSubViewController extends JobApplicantSubBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {} );\n\n\t\tsuper( options );\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tthis.api.getJobApplicantEmploymentOptions( 'employment_status', {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.setSourceData( 'employment_status_id', result.getResult(), true );\n\t\t\t}\n\t\t} );\n\t\tthis.api.getJobApplicantEmploymentOptions( 'wage_type', {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.setSourceData( 'wage_type_id', result.getResult(), true );\n\t\t\t}\n\t\t} );\n\t\tthis.company_api.getOptions( 'country', {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result = result.getResult();\n\t\t\t\t$this.setSourceData( 'country', result, true );\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetJobApplicantEmployment( callback ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.model.id;\n\t\tthis.api['getJobApplicantEmployment']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tresult_data = result_data[0];\n\t\t\t\t\t$this.model.set( result_data );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this.showErrorAlert( result );\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tsuper.setCurrentEditRecordData();\n\t\tvar field_selector;\n\t\tvar field_control;\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.model.attributes ) {\n\t\t\tif ( !this.model.has( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// if ( this.current_edit_record[key] === false ) {\n\t\t\t// \tthis.current_edit_record[key] = '';\n\t\t\t// }\n\t\t\tswitch ( key ) {\n\t\t\t\tcase 'country':\n\t\t\t\t\t// if ( this.current_edit_record[key] === false ) {\n\t\t\t\t\t// \tthis.current_edit_record[key] = '';\n\t\t\t\t\t// }\n\t\t\t\t\tfield_selector = 'select[name=\"' + key + '\"]';\n\t\t\t\t\tthis.$( field_selector ).val( this.model.get( key ) );\n\t\t\t\t\tif ( key === 'country' ) {\n\t\t\t\t\t\tthis.eSetProvince( this.model.get( key ) );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'is_current_employer':\n\t\t\t\tcase 'is_contact_available':\n\t\t\t\t\tfield_selector = 'input[name=\"' + key + '\"]';\n\t\t\t\t\tif ( this.model.get( key ) === true ) {\n\t\t\t\t\t\tthis.$( field_selector ).prop( 'checked', 'checked' );\n\t\t\t\t\t} else if ( this.model.get( key ) === false ) {\n\t\t\t\t\t\tthis.$( field_selector ).removeAttr( 'checked' );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif ( this.model.get( key ) === false ) {\n\t\t\t\t\t\tthis.model.set( key, '' );\n\t\t\t\t\t}\n\t\t\t\t\tfield_selector = '.form-control[name=\"' + key + '\"]';\n\t\t\t\t\tfield_control = this.$( field_selector );\n\t\t\t\t\tif ( field_control && field_control[0] ) {\n\t\t\t\t\t\tthis.$( field_selector ).val( this.model.get( key ) );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t\t// this.collectUIDataToCurrentEditRecord();\n\t\t// this.setEditViewDataDone();\n\t}\n\n\tonFormItemChange( e, doNotValidate ) {\n\t\tvar key = e.currentTarget.name;\n\t\tvar $this = this;\n\t\tthis.model.set( key, $( e.currentTarget ).val() );\n\t\tswitch ( key ) {\n\t\t\t// case 'country':\n\t\t\t// case 'identification_country':\n\t\t\t// \tvar widget = this.$('select[name=\"' + key + '\"]');\n\t\t\t// \twidget.val( null );\n\t\t\t// \tbreak;\n\t\t\tcase 'is_current_employer':\n\t\t\tcase 'is_contact_available':\n\t\t\t\tif ( $( e.currentTarget ).is( ':checked' ) ) {\n\t\t\t\t\tthis.model.set( key, true );\n\t\t\t\t} else {\n\t\t\t\t\tthis.model.set( key, false );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\tif ( key == 'country' ) {\n\t\t\tthis.eSetProvince( this.$( 'select[name=\"country\"]' ).val(), true, function() {\n\t\t\t\t$this.validate();\n\t\t\t} );\n\t\t\t// this.clearErrorTips();\n\t\t\treturn;\n\t\t}\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\teSetProvince( val, refresh, callback ) {\n\t\tvar $this = this;\n\t\t$this.$( 'select[name=\"province\"]' ).selectpicker( 'destroy' );\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\t$this.setSourceData( 'province', [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\t\t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.model.set( 'province', $this.e_province_array[0].value );\n\t\t\t\t\t\t$this.$( 'select[name=\"province\"]' ).val( $this.model.get( 'province' ) );\n\t\t\t\t\t}\n\t\t\t\t\t$this.setSourceData( 'province', res );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n}","import { JobApplicantSubBaseViewController } from '@/views/portal/hr/my_profile/JobApplicantSubBaseViewController';\n\nexport class JobApplicantReferenceSubViewController extends JobApplicantSubBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {} );\n\n\t\tsuper( options );\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tthis.api.getJobApplicantReferenceOptions( 'type', {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.setSourceData( 'type_id', result.getResult(), true );\n\t\t\t}\n\t\t} );\n\t\tthis.company_api.getOptions( 'country', {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result = result.getResult();\n\t\t\t\t$this.setSourceData( 'country', result, true );\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetJobApplicantReference( callback ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.model.id;\n\t\tthis.api['getJobApplicantReference']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tresult_data = result_data[0];\n\t\t\t\t\t$this.model.set( result_data );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this.showErrorAlert( result );\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tsuper.setCurrentEditRecordData();\n\t\tvar field_selector;\n\t\tvar field_control;\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.model.attributes ) {\n\t\t\tif ( !this.model.has( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// if ( this.current_edit_record[key] === false ) {\n\t\t\t// \tthis.current_edit_record[key] = '';\n\t\t\t// }\n\t\t\tswitch ( key ) {\n\t\t\t\tcase 'country':\n\t\t\t\t\t// if ( this.current_edit_record[key] === false ) {\n\t\t\t\t\t// \tthis.current_edit_record[key] = '';\n\t\t\t\t\t// }\n\t\t\t\t\tfield_selector = 'select[name=\"' + key + '\"]';\n\t\t\t\t\tthis.$( field_selector ).val( this.model.get( key ) );\n\t\t\t\t\tif ( key === 'country' ) {\n\t\t\t\t\t\tthis.eSetProvince( this.model.get( key ) );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif ( this.model.get( key ) === false ) {\n\t\t\t\t\t\tthis.model.set( key, '' );\n\t\t\t\t\t}\n\t\t\t\t\tfield_selector = '.form-control[name=\"' + key + '\"]';\n\t\t\t\t\tfield_control = this.$( field_selector );\n\t\t\t\t\tif ( field_control && field_control[0] ) {\n\t\t\t\t\t\tthis.$( field_selector ).val( this.model.get( key ) );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t\t// this.collectUIDataToCurrentEditRecord();\n\t\t// this.setEditViewDataDone();\n\t}\n\n\tonFormItemChange( e, doNotValidate ) {\n\t\tvar key = e.currentTarget.name;\n\t\tvar $this = this;\n\t\tthis.model.set( key, $( e.currentTarget ).val() );\n\t\t// switch ( key ) {\n\t\t// case 'country':\n\t\t// case 'identification_country':\n\t\t// \tvar widget = this.$('select[name=\"' + key + '\"]');\n\t\t// \twidget.val( null );\n\t\t// \tbreak;\n\t\t// case 'is_current_employer':\n\t\t// case 'is_contact_available':\n\t\t// \tif ( $(e.currentTarget).is(':checked' ) ) {\n\t\t// \t\tthis.model.set( key, true )\n\t\t// \t} else {\n\t\t// \t\tthis.model.set( key, false )\n\t\t// \t}\n\t\t// \tbreak;\n\t\t// }\n\t\tif ( key == 'country' ) {\n\t\t\tthis.eSetProvince( this.$( 'select[name=\"country\"]' ).val(), true, function() {\n\t\t\t\t$this.validate();\n\t\t\t} );\n\t\t\t// this.clearErrorTips();\n\t\t\treturn;\n\t\t}\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\teSetProvince( val, refresh, callback ) {\n\t\tvar $this = this;\n\t\t$this.$( 'select[name=\"province\"]' ).selectpicker( 'destroy' );\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\t$this.setSourceData( 'province', [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\t\t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.model.set( 'province', $this.e_province_array[0].value );\n\t\t\t\t\t\t$this.$( 'select[name=\"province\"]' ).val( $this.model.get( 'province' ) );\n\t\t\t\t\t}\n\t\t\t\t\t$this.setSourceData( 'province', res );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n}\n","import { JobApplicantSubBaseViewController } from '@/views/portal/hr/my_profile/JobApplicantSubBaseViewController';\n\nexport class JobApplicantLocationSubViewController extends JobApplicantSubBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {} );\n\n\t\tsuper( options );\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tthis.company_api.getOptions( 'country', {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result = result.getResult();\n\t\t\t\t$this.setSourceData( 'country', result, true );\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetJobApplicantLocation( callback ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.model.id;\n\t\tthis.api['getJobApplicantLocation']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tresult_data = result_data[0];\n\t\t\t\t\t$this.model.set( result_data );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this.showErrorAlert( result );\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tsuper.setCurrentEditRecordData();\n\t\tvar field_selector;\n\t\tvar field_control;\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.model.attributes ) {\n\t\t\tif ( !this.model.has( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// if ( this.current_edit_record[key] === false ) {\n\t\t\t// \tthis.current_edit_record[key] = '';\n\t\t\t// }\n\t\t\tswitch ( key ) {\n\t\t\t\tcase 'country':\n\t\t\t\t\t// if ( this.current_edit_record[key] === false ) {\n\t\t\t\t\t// \tthis.current_edit_record[key] = '';\n\t\t\t\t\t// }\n\t\t\t\t\tfield_selector = 'select[name=\"' + key + '\"]';\n\t\t\t\t\tthis.$( field_selector ).val( this.model.get( key ) );\n\t\t\t\t\tif ( key === 'country' ) {\n\t\t\t\t\t\tthis.eSetProvince( this.model.get( key ) );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif ( this.model.get( key ) === false ) {\n\t\t\t\t\t\tthis.model.set( key, '' );\n\t\t\t\t\t}\n\t\t\t\t\tfield_selector = '.form-control[name=\"' + key + '\"]';\n\t\t\t\t\tfield_control = this.$( field_selector );\n\t\t\t\t\tif ( field_control && field_control[0] ) {\n\t\t\t\t\t\tthis.$( field_selector ).val( this.model.get( key ) );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t\t// this.collectUIDataToCurrentEditRecord();\n\t\t// this.setEditViewDataDone();\n\t}\n\n\tonFormItemChange( e, doNotValidate ) {\n\t\tvar key = e.currentTarget.name;\n\t\tvar $this = this;\n\t\tthis.model.set( key, $( e.currentTarget ).val() );\n\t\t// switch ( key ) {\n\t\t// case 'country':\n\t\t// case 'identification_country':\n\t\t// \tvar widget = this.$('select[name=\"' + key + '\"]');\n\t\t// \twidget.val( null );\n\t\t// \tbreak;\n\t\t// case 'is_current_employer':\n\t\t// case 'is_contact_available':\n\t\t// \tif ( $(e.currentTarget).is(':checked' ) ) {\n\t\t// \t\tthis.model.set( key, true )\n\t\t// \t} else {\n\t\t// \t\tthis.model.set( key, false )\n\t\t// \t}\n\t\t// \tbreak;\n\t\t// }\n\t\tif ( key == 'country' ) {\n\t\t\tthis.eSetProvince( this.$( 'select[name=\"country\"]' ).val(), true, function() {\n\t\t\t\t$this.validate();\n\t\t\t} );\n\t\t\t// this.clearErrorTips();\n\t\t\treturn;\n\t\t}\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\teSetProvince( val, refresh, callback ) {\n\t\tvar $this = this;\n\t\t$this.$( 'select[name=\"province\"]' ).selectpicker( 'destroy' );\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\t$this.setSourceData( 'province', [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\t\t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.model.set( 'province', $this.e_province_array[0].value );\n\t\t\t\t\t\t$this.$( 'select[name=\"province\"]' ).val( $this.model.get( 'province' ) );\n\t\t\t\t\t}\n\t\t\t\t\t$this.setSourceData( 'province', res );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n}\n","import { JobApplicantSubBaseViewController } from '@/views/portal/hr/my_profile/JobApplicantSubBaseViewController';\n\nexport class JobApplicantSkillSubViewController extends JobApplicantSubBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\tthis.qualification_type_id = 10;\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tthis.api.getJobApplicantSkillOptions( 'proficiency', {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.setSourceData( 'proficiency_id', result.getResult(), true );\n\t\t\t}\n\t\t} );\n\t\tvar args = {};\n\t\tvar filter_data = {};\n\t\tfilter_data.type_id = [this.qualification_type_id];\n\t\targs.filter_data = filter_data;\n\t\targs.filter_columns = {\n\t\t\t'id': true,\n\t\t\t'name': true\n\t\t};\n\t\tthis.qualification_api.getQualification( args, true, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar res = result.getResult();\n\t\t\t\tvar options = {};\n\t\t\t\tfor ( var i in res ) {\n\t\t\t\t\tif ( !res.hasOwnProperty( i ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tvar row = res[i];\n\t\t\t\t\toptions[row.id] = $.i18n._( row.name );\n\t\t\t\t}\n\t\t\t\t$this.setSourceData( 'qualification_id', options, true );\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetJobApplicantSkill( callback ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.model.id;\n\t\tthis.api['getJobApplicantSkill']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tresult_data = result_data[0];\n\t\t\t\t\t$this.model.set( result_data );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this.showErrorAlert( result );\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tsuper.setCurrentEditRecordData();\n\t\tvar field_selector;\n\t\tvar field_control;\n\t\t//Set current edit record data to all widgets\n\t\tif ( !Global.isSet( this.model.get( 'enable_calc_experience' ) ) ) {\n\t\t\tthis.model.set( 'enable_calc_experience', false );\n\t\t}\n\t\tfor ( var key in this.model.attributes ) {\n\t\t\tif ( !this.model.has( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// if ( this.current_edit_record[key] === false ) {\n\t\t\t// \tthis.current_edit_record[key] = '';\n\t\t\t// }\n\t\t\tswitch ( key ) {\n\t\t\t\t// case 'country':\n\t\t\t\t// \t// if ( this.current_edit_record[key] === false ) {\n\t\t\t\t// \t// \tthis.current_edit_record[key] = '';\n\t\t\t\t// \t// }\n\t\t\t\t// \tfield_selector = 'select[name=\"' + key + '\"]';\n\t\t\t\t// \tthis.$(field_selector ).val( this.model.get(key) );\n\t\t\t\t// \tif ( key === 'country' ) {\n\t\t\t\t// \t\tthis.eSetProvince( this.model.get(key) );\n\t\t\t\t// \t}\n\t\t\t\t// \tbreak\n\t\t\t\tcase 'enable_calc_experience':\n\t\t\t\t\tfield_selector = 'input[name=\"' + key + '\"]';\n\t\t\t\t\tif ( this.model.get( key ) === true ) {\n\t\t\t\t\t\tthis.$( field_selector ).prop( 'checked', 'checked' );\n\t\t\t\t\t} else if ( this.model.get( key ) === false ) {\n\t\t\t\t\t\tthis.$( field_selector ).removeAttr( 'checked' );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif ( this.model.get( key ) === false ) {\n\t\t\t\t\t\tthis.model.set( key, '' );\n\t\t\t\t\t\tif ( key === 'qualification_id' && this.enable_add_qualification ) {\n\t\t\t\t\t\t\tthis.showAddQualificationContainer();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfield_selector = '.form-control[name=\"' + key + '\"]';\n\t\t\t\t\tfield_control = this.$( field_selector );\n\t\t\t\t\tif ( field_control && field_control[0] ) {\n\t\t\t\t\t\tthis.$( field_selector ).val( this.model.get( key ) );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t\t// this.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tsetEditViewDataDone() {\n\t\tif ( this.model.get( 'enable_calc_experience' ) === true ) {\n\t\t\tthis.$( 'input[name=\"experience\"]' ).attr( 'readonly', 'true' );\n\t\t} else {\n\t\t\tthis.$( 'input[name=\"experience\"]' ).removeAttr( 'readonly' );\n\t\t}\n\t\t$( '.edit-view-tab-bar' ).css( 'opacity', 1 );\n\t}\n\n\tonFormItemChange( e, doNotValidate ) {\n\t\tvar key = e.currentTarget.name;\n\t\tthis.model.set( key, $( e.currentTarget ).val() );\n\t\tif ( this.model.get( 'first_used_date' ) ) {\n\t\t\tthis.model.set( 'enable_calc_experience', true );\n\t\t\tthis.$( 'input[name=\"enable_calc_experience\"]' ).prop( 'checked', 'checked' );\n\t\t\tthis.$( 'input[name=\"enable_calc_experience\"]' )[0].checked = true;\n\t\t\tthis.$( 'input[name=\"enable_calc_experience\"]' ).attr( 'disabled', 'disabled' );\n\t\t} else {\n\t\t\tthis.model.set( 'enable_calc_experience', false );\n\t\t\tif ( this.$( 'input[name=\"enable_calc_experience\"]' ) && this.$( 'input[name=\"enable_calc_experience\"]' )[0] ) {\n\t\t\t\tthis.$( 'input[name=\"enable_calc_experience\"]' ).removeAttr( 'checked' );\n\t\t\t\tthis.$( 'input[name=\"enable_calc_experience\"]' )[0].checked = false;\n\t\t\t\tthis.$( 'input[name=\"enable_calc_experience\"]' ).removeAttr( 'disabled' );\n\t\t\t}\n\t\t}\n\t\tswitch ( key ) {\n\t\t\t// case 'country':\n\t\t\t// case 'identification_country':\n\t\t\t// \tvar widget = this.$('select[name=\"' + key + '\"]');\n\t\t\t// \twidget.val( null );\n\t\t\t// \tbreak;\n\t\t\tcase 'qualification_id':\n\t\t\t\tif ( this.model.get( key ) === '' && this.enable_add_qualification ) {\n\t\t\t\t\tthis.showAddQualificationContainer();\n\t\t\t\t\tdoNotValidate = true;\n\t\t\t\t} else {\n\t\t\t\t\tthis.hideAddQualificationContainer();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'enable_calc_experience':\n\t\t\t\tif ( $( e.currentTarget ).is( ':checked' ) ) {\n\t\t\t\t\tthis.model.set( key, true );\n\t\t\t\t\tthis.calcExperience();\n\t\t\t\t} else {\n\t\t\t\t\tthis.model.set( key, false );\n\t\t\t\t\tthis.$( 'input[name=\"experience\"]' ).removeAttr( 'readonly' );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'last_used_date':\n\t\t\tcase 'first_used_date':\n\t\t\t\t// if ( this.model.get('enable_calc_experience') === true ) {\n\t\t\t\t// \tthis.calcExperience();\n\t\t\t\t// }\n\t\t\t\tthis.calcExperience();\n\t\t\t\tbreak;\n\t\t}\n\t\t// if ( key == 'country' ) {\n\t\t// \tthis.eSetProvince( this.$('select[name=\"country\"]').val(), true );\n\t\t// \t// this.clearErrorTips();\n\t\t// \t// return;\n\t\t// }\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tcalcExperience() {\n\t\tif ( this.model.get( 'enable_calc_experience' ) === true ) {\n\t\t\tthis.$( 'input[name=\"experience\"]' ).attr( 'readonly', 'true' );\n\t\t} else {\n\t\t\tthis.$( 'input[name=\"experience\"]' ).removeAttr( 'readonly' );\n\t\t}\n\t\tvar first_used_date = this.$( 'input[name=\"first_used_date\"]' ).val();\n\t\tvar last_used_date = this.$( 'input[name=\"last_used_date\"]' ).val();\n\t\tlast_used_date = last_used_date ? last_used_date : new Date().format( 'DD-MMM-YY' );\n\t\tvar experience = 0;\n\t\tif ( first_used_date !== '' && last_used_date !== '' ) {\n\t\t\texperience = this.api.calcExperience( first_used_date, last_used_date, { async: false } ).getResult();\n\t\t\tthis.$( 'input[name=\"experience\"]' ).val( experience );\n\t\t} else {\n\t\t\tthis.$( 'input[name=\"experience\"]' ).val( experience );\n\t\t}\n\t\tthis.model.set( 'experience', experience );\n\t}\n\n\t// eSetProvince: function( val, refresh ) {\n\t// \tvar $this = this;\n\t// \tif ( !val || val === '-1' || val === '0' ) {\n\t// \t\t$this.e_province_array = [];\n\t// \t\t$this.setSourceData( 'province', [] );\n\t// \t} else {\n\t// \t\tthis.company_api.getOptions( 'province', val, {\n\t// \t\t\tonResult: function( res ) {\n\t// \t\t\t\tres = res.getResult();\n\t// \t\t\t\tif ( !res ) {\n\t// \t\t\t\t\tres = [];\n\t// \t\t\t\t}\n\t// \t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\t// \t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t// \t\t\t\t\t$this.model.set( 'province', $this.e_province_array[0].value )\n\t// \t\t\t\t\t$this.$('select[name=\"province\"]').val( $this.model.get( 'province') );\n\t// \t\t\t\t}\n\t// \t\t\t\t$this.setSourceData( 'province', res );\n\t// \t\t\t}\n\t// \t\t} );\n\t// \t}\n\t// },\n}\n","import { JobApplicantSubBaseViewController } from '@/views/portal/hr/my_profile/JobApplicantSubBaseViewController';\n\nexport class JobApplicantEducationSubViewController extends JobApplicantSubBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\tthis.qualification_type_id = 20;\n\t}\n\n\tgetJobApplicantEducation( callback ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.model.id;\n\t\tthis.api['getJobApplicantEducation']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tresult_data = result_data[0];\n\t\t\t\t\t$this.model.set( result_data );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this.showErrorAlert( result );\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tsuper.setCurrentEditRecordData();\n\t\tvar field_selector;\n\t\tvar field_control;\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.model.attributes ) {\n\t\t\tif ( !this.model.has( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// if ( this.current_edit_record[key] === false ) {\n\t\t\t// \tthis.current_edit_record[key] = '';\n\t\t\t// }\n\t\t\tswitch ( key ) {\n\t\t\t\t// case 'country':\n\t\t\t\t// \t// if ( this.current_edit_record[key] === false ) {\n\t\t\t\t// \t// \tthis.current_edit_record[key] = '';\n\t\t\t\t// \t// }\n\t\t\t\t// \tfield_selector = 'select[name=\"' + key + '\"]';\n\t\t\t\t// \tthis.$(field_selector ).val( this.model.get(key) );\n\t\t\t\t// \tif ( key === 'country' ) {\n\t\t\t\t// \t\tthis.eSetProvince( this.model.get(key) );\n\t\t\t\t// \t}\n\t\t\t\t// \tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tif ( this.model.get( key ) === false ) {\n\t\t\t\t\t\tthis.model.set( key, '' );\n\t\t\t\t\t\tif ( key === 'qualification_id' && this.enable_add_qualification ) {\n\t\t\t\t\t\t\tthis.showAddQualificationContainer();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfield_selector = '.form-control[name=\"' + key + '\"]';\n\t\t\t\t\tfield_control = this.$( field_selector );\n\t\t\t\t\tif ( field_control && field_control[0] ) {\n\t\t\t\t\t\tthis.$( field_selector ).val( this.model.get( key ) );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t\t// this.collectUIDataToCurrentEditRecord();\n\t\t// this.setEditViewDataDone();\n\t}\n}\n","import { TTAPI } from '@/services/TimeTrexClientAPI';\nimport { JobApplicantSubBaseViewController } from '@/views/portal/hr/my_profile/JobApplicantSubBaseViewController';\n\nexport class JobApplicantMembershipSubViewController extends JobApplicantSubBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\n\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\tthis.qualification_type_id = 50;\n\t\tthis.currency_api = TTAPI.APICurrencyPortal;\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\tthis.api.getJobApplicantMembershipOptions( 'ownership', {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.setSourceData( 'ownership_id', result.getResult(), true );\n\t\t\t}\n\t\t} );\n\t\tvar filter_data = {};\n\t\tfilter_data.type_id = [this.qualification_type_id];\n\t\targs.filter_data = filter_data;\n\t\targs.filter_columns = {\n\t\t\t'id': true,\n\t\t\t'name': true\n\t\t};\n\t\tthis.qualification_api.getQualification( args, true, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar res = result.getResult();\n\t\t\t\tvar options = {};\n\t\t\t\tfor ( var i in res ) {\n\t\t\t\t\tif ( !res.hasOwnProperty( i ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tvar row = res[i];\n\t\t\t\t\toptions[row.id] = $.i18n._( row.name );\n\t\t\t\t}\n\t\t\t\t$this.setSourceData( 'qualification_id', options, true );\n\t\t\t}\n\t\t} );\n\t\tthis.currency_api.getCurrency( {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar res = result.getResult();\n\t\t\t\tvar options = {};\n\t\t\t\tfor ( var i in res ) {\n\t\t\t\t\tif ( !res.hasOwnProperty( i ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tvar row = res[i];\n\t\t\t\t\toptions[row.id] = $.i18n._( row.name );\n\t\t\t\t}\n\t\t\t\t$this.setSourceData( 'currency_id', options, true );\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetJobApplicantMembership( callback ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.model.id;\n\t\tthis.api['getJobApplicantMembership']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tresult_data = result_data[0];\n\t\t\t\t\t$this.model.set( result_data );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this.showErrorAlert( result );\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tsuper.setCurrentEditRecordData();\n\t\tvar field_selector;\n\t\tvar field_control;\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.model.attributes ) {\n\t\t\tif ( !this.model.has( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tswitch ( key ) {\n\t\t\t\tdefault:\n\t\t\t\t\tif ( this.model.get( key ) === false ) {\n\t\t\t\t\t\tthis.model.set( key, '' );\n\t\t\t\t\t\tif ( key === 'qualification_id' && this.enable_add_qualification ) {\n\t\t\t\t\t\t\tthis.showAddQualificationContainer();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfield_selector = '.form-control[name=\"' + key + '\"]';\n\t\t\t\t\tfield_control = this.$( field_selector );\n\t\t\t\t\tif ( field_control && field_control[0] ) {\n\t\t\t\t\t\tthis.$( field_selector ).val( this.model.get( key ) );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t}\n}\n","import { JobApplicantSubBaseViewController } from '@/views/portal/hr/my_profile/JobApplicantSubBaseViewController';\n\nexport class JobApplicantLicenseSubViewController extends JobApplicantSubBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\tthis.qualification_type_id = 30;\n\t}\n\n\tgetJobApplicantLicense( callback ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.model.id;\n\t\tthis.api['getJobApplicantLicense']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tresult_data = result_data[0];\n\t\t\t\t\t$this.model.set( result_data );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this.showErrorAlert( result );\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tsuper.setCurrentEditRecordData();\n\t\tvar field_selector;\n\t\tvar field_control;\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.model.attributes ) {\n\t\t\tif ( !this.model.has( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tswitch ( key ) {\n\t\t\t\tdefault:\n\t\t\t\t\tif ( this.model.get( key ) === false ) {\n\t\t\t\t\t\tthis.model.set( key, '' );\n\t\t\t\t\t\tif ( key === 'qualification_id' && this.enable_add_qualification ) {\n\t\t\t\t\t\t\tthis.showAddQualificationContainer();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfield_selector = '.form-control[name=\"' + key + '\"]';\n\t\t\t\t\tfield_control = this.$( field_selector );\n\t\t\t\t\tif ( field_control && field_control[0] ) {\n\t\t\t\t\t\tthis.$( field_selector ).val( this.model.get( key ) );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t}\n}\n","import { JobApplicantSubBaseViewController } from '@/views/portal/hr/my_profile/JobApplicantSubBaseViewController';\n\nexport class JobApplicantLanguageSubViewController extends JobApplicantSubBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\tthis.qualification_type_id = 40;\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\tthis.api.getJobApplicantLanguageOptions( 'fluency', {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.setSourceData( 'fluency_id', result.getResult(), true );\n\t\t\t}\n\t\t} );\n\t\tthis.api.getJobApplicantLanguageOptions( 'competency', {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.setSourceData( 'competency_id', result.getResult(), true );\n\t\t\t}\n\t\t} );\n\n\t\tvar filter_data = {};\n\t\tfilter_data.type_id = [this.qualification_type_id];\n\t\targs.filter_data = filter_data;\n\t\targs.filter_columns = {\n\t\t\t'id': true,\n\t\t\t'name': true\n\t\t};\n\t\tthis.qualification_api.getQualification( args, true, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar res = result.getResult();\n\t\t\t\tvar options = {};\n\t\t\t\tfor ( var i in res ) {\n\t\t\t\t\tif ( !res.hasOwnProperty( i ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tvar row = res[i];\n\t\t\t\t\toptions[row.id] = $.i18n._( row.name );\n\t\t\t\t}\n\t\t\t\t$this.setSourceData( 'qualification_id', options, true );\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetJobApplicantLanguage( callback ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.model.id;\n\t\tthis.api['getJobApplicantLanguage']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tresult_data = result_data[0];\n\t\t\t\t\t$this.model.set( result_data );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this.showErrorAlert( result );\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tsuper.setCurrentEditRecordData();\n\t\tvar field_selector;\n\t\tvar field_control;\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.model.attributes ) {\n\t\t\tif ( !this.model.has( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tswitch ( key ) {\n\t\t\t\tdefault:\n\t\t\t\t\tif ( this.model.get( key ) === false ) {\n\t\t\t\t\t\tthis.model.set( key, '' );\n\t\t\t\t\t\tif ( key === 'qualification_id' && this.enable_add_qualification ) {\n\t\t\t\t\t\t\tthis.showAddQualificationContainer();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfield_selector = '.form-control[name=\"' + key + '\"]';\n\t\t\t\t\tfield_control = this.$( field_selector );\n\t\t\t\t\tif ( field_control && field_control[0] ) {\n\t\t\t\t\t\tthis.$( field_selector ).val( this.model.get( key ) );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t}\n}\n","import { JobApplicantSubBaseViewController } from '@/views/portal/hr/my_profile/JobApplicantSubBaseViewController';\n\nexport class JobApplicationSubViewController extends JobApplicantSubBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {} );\n\n\t\tsuper( options );\n\t}\n\n\trender() {\n\t\tvar $this = this;\n\t\tvar list_tpl = Global.loadWidget( 'views/portal/hr/my_profile/MyProfileSubView.html' );\n\t\tvar unique_id = this.sub_view_id + '-' + this.model.id;\n\t\tthis.unique_id = unique_id;\n\t\tthis.sub_view = _.template( list_tpl )( {} );\n\t\tif ( this.table_container.find( '.table-container' ).length == 0 ) {\n\t\t\tthis.table_container.html( '<div class=\"table-responsive\"><table class=\"table table-condensed table-bordered table-container\"><thead></thead><tbody></tbody></table></div>' );\n\t\t}\n\t\tif ( this.table_container.find( '#' + unique_id ).length === 0 ) {\n\t\t\tvar tbody = $( '<tr>' ).attr( 'id', unique_id );\n\t\t\t$( this.table_container.find( 'tbody' )[0] ).append( tbody );\n\t\t} else {\n\t\t\tthis.table_container.find( '#' + unique_id ).html( '' );\n\t\t}\n\t\tvar thead = $( '<tr>' );\n\t\tfor ( var column in this.display_columns ) {\n\t\t\tif ( !this.display_columns.hasOwnProperty( column ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar column_val;\n\t\t\tswitch ( column ) {\n\t\t\t\tdefault:\n\t\t\t\t\tif ( !this.model.get( column ) ) {\n\t\t\t\t\t\tcolumn_val = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolumn_val = this.model.get( column );\n\t\t\t\t\t}\n\t\t\t\t\tif ( column === 'job_vacancy' ) {\n\t\t\t\t\t\tvar url = Global.getBaseURL( null, true, true ).replace(/#!m=.*?(&|$)/g, '#!m=PortalJobVacancyDetail&id=' + this.model.get( 'job_vacancy_id' ) + '$1'); //Be sure to include any other URL args.\n\t\t\t\t\t\tthis.table_container.find( '#' + unique_id ).append( '<td><a href=\"' + url + '\">' + column_val + '</a></td>' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.table_container.find( '#' + unique_id ).append( '<td>' + column_val + '</td>' );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthead.append( '<th>' + this.display_columns[column] + '</th>' );\n\t\t}\n\t\tthead.append( '<th>' + $.i18n._( 'Action' ) + '</th>' );\n\t\tif ( this.table_container.find( 'thead' ).html() === '' ) {\n\t\t\tthis.table_container.find( 'thead' ).html( thead );\n\t\t}\n\t\tthis.table_container.find( '#' + unique_id ).append( this.sub_view );\n\t\tthis.table_container.find( '#' + unique_id ).find( '.edit-icon' ).remove();\n\t\t// this.table_container.find('#'+unique_id).find('.edit-icon').unbind('click').bind('click', function( e ) {\n\t\t// \t$this['get'+$this.sub_view_id](function() {\n\t\t// \t\t$this.setEditView();\n\t\t// \t})\n\t\t// });\n\t\tthis.table_container.find( '#' + unique_id ).find( '.delete-icon' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$this['get' + $this.sub_view_id]( function() {\n\t\t\t\t$this.onDeleteClick();\n\t\t\t} );\n\t\t} );\n\t}\n\n\tgetJobApplication( callback ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.model.id;\n\t\tthis.api['getJobApplication']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tresult_data = result_data[0];\n\t\t\t\t\t$this.model.set( result_data );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this.showErrorAlert( result );\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t//\n\t// setCurrentEditRecordData: function() {\n\t// \tthis._super('setCurrentEditRecordData');\n\t// \tvar field_selector;\n\t// \tvar field_control;\n\t// \t//Set current edit record data to all widgets\n\t// \tfor ( var key in this.model.attributes ) {\n\t// \t\tif ( !this.model.has( key ) ) {\n\t// \t\t\tcontinue;\n\t// \t\t}\n\t// \t\tswitch ( key ) {\n\t// \t\t\tdefault:\n\t// \t\t\t\tif ( this.model.get(key) === false ) {\n\t// \t\t\t\t\tthis.model.set( key, '' );\n\t// \t\t\t\t}\n\t// \t\t\t\tfield_selector = '.form-control[name=\"' + key + '\"]';\n\t// \t\t\t\tfield_control = this.$(field_selector );\n\t// \t\t\t\tif ( field_control && field_control[0] ) {\n\t// \t\t\t\t\tthis.$(field_selector ).val( this.model.get(key) );\n\t// \t\t\t\t}\n\t// \t\t\t\tbreak;\n\t//\n\t// \t\t}\n\t// \t}\n\t// },\n\t//\n\t// onFormItemChange: function( e, doNotValidate ) {\n\t// \tvar key = e.currentTarget.name;\n\t// \tthis.model.set( key, $(e.currentTarget).val() );\n\t// \tif ( !doNotValidate ) {\n\t// \t\tthis.validate();\n\t// \t}\n\t// },\n\n}","import { JobApplicantSubBaseViewController } from '@/views/portal/hr/my_profile/JobApplicantSubBaseViewController';\nimport { TTAPI } from '@/services/TimeTrexClientAPI';\nimport { TTUUID } from '@/global/TTUUID';\nimport { ServiceCaller } from '@/services/ServiceCaller';\n\nexport class DocumentSubViewController extends JobApplicantSubBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\tthis.document_api = TTAPI.APIDocumentPortal;\n\t\tthis.attachment_data = null;\n\t}\n\n\trender() {\n\t\tvar $this = this;\n\t\tvar list_tpl = Global.loadWidget( 'views/portal/hr/my_profile/MyProfileSubView.html' );\n\t\tvar unique_id = this.sub_view_id + '-' + this.model.id;\n\t\tthis.unique_id = unique_id;\n\t\tthis.sub_view = _.template( list_tpl )( {} );\n\t\tif ( this.table_container.find( '.table-container' ).length == 0 ) {\n\t\t\tthis.table_container.html( '<div class=\"table-responsive\"><table class=\"table table-condensed table-bordered table-container\"><thead></thead><tbody></tbody></table></div>' );\n\t\t}\n\t\tif ( this.table_container.find( '#' + unique_id ).length === 0 ) {\n\t\t\tvar tbody = $( '<tr>' ).attr( 'id', unique_id );\n\t\t\t$( this.table_container.find( 'tbody' )[0] ).append( tbody );\n\t\t} else {\n\t\t\tthis.table_container.find( '#' + unique_id ).html( '' );\n\t\t}\n\t\tvar thead = $( '<tr>' );\n\t\tfor ( var column in this.display_columns ) {\n\t\t\tif ( !this.display_columns.hasOwnProperty( column ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar column_val;\n\t\t\tswitch ( column ) {\n\t\t\t\tdefault:\n\t\t\t\t\tif ( !this.model.get( column ) ) {\n\t\t\t\t\t\tcolumn_val = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolumn_val = this.model.get( column );\n\t\t\t\t\t}\n\t\t\t\t\tif ( column === 'name' ) {\n\t\t\t\t\t\tthis.table_container.find( '#' + unique_id ).append( '<td><a class=\"download-attachment\" href=\"javascript:void(0);\">' + column_val + '</a></td>' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.table_container.find( '#' + unique_id ).append( '<td>' + column_val + '</td>' );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthead.append( '<th>' + this.display_columns[column] + '</th>' );\n\t\t}\n\t\tthead.append( '<th>' + $.i18n._( 'Action' ) + '</th>' );\n\t\tif ( this.table_container.find( 'thead' ).html() === '' ) {\n\t\t\tthis.table_container.find( 'thead' ).html( thead );\n\t\t}\n\t\tthis.table_container.find( '#' + unique_id ).append( this.sub_view );\n\t\tthis.table_container.find( '#' + unique_id ).find( '.download-attachment' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\tvar filter = {};\n\t\t\tfilter.filter_data = {};\n\t\t\tfilter.filter_data.id = $this.model.id;\n\t\t\t$this.document_api['getAttachment']( filter, {\n\t\t\t\tonResult: function( result_data ) {\n\t\t\t\t\t$this.downloadFile( result_data );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t\tthis.table_container.find( '#' + unique_id ).find( '.edit-icon' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$this['get' + $this.sub_view_id]( function() {\n\t\t\t\t$this.setEditView();\n\t\t\t} );\n\t\t} );\n\t\tthis.table_container.find( '#' + unique_id ).find( '.delete-icon' ).unbind( 'click' ).bind( 'click', function( e ) {\n\t\t\t$this['get' + $this.sub_view_id]( function() {\n\t\t\t\t$this.onDeleteClick();\n\t\t\t} );\n\t\t} );\n\t}\n\n\tdownloadFile( result_data ) {\n\t\tvar $this = this;\n\t\tvar data = result_data.getResult();\n\t\tif ( data.length > 0 ) {\n\t\t\tvar document_id = data[0].id;\n\t\t\tvar document_revision_id = data[0].document_revision_id;\n\n\t\t\tvar url = ServiceCaller.getAPIURL( 'Class=APIDocumentPortal&Method=downloadAttachment' + '&v=2' );\n\t\t\tif ( LocalCacheData.getAllURLArgs().company_id ) {\n\t\t\t\turl = url + '&company_id=' + LocalCacheData.getAllURLArgs().company_id;\n\t\t\t}\n\n\t\t\tvar post_data = { parent_id: document_id, object_id: document_revision_id };\n\n\t\t\tGlobal.APIFileDownload( null, null, post_data, url );\n\t\t}\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t}\n\n\tgetDocument( callback ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.model.id;\n\t\tthis.api['getDocument']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tresult_data = result_data[0];\n\t\t\t\t\t$this.model.set( result_data );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$this.showErrorAlert( result );\n\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tsuper.setCurrentEditRecordData();\n\t\tvar field_selector;\n\t\tvar field_control;\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.model.attributes ) {\n\t\t\tif ( !this.model.has( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tswitch ( key ) {\n\t\t\t\tcase 'private':\n\t\t\t\tcase 'template':\n\t\t\t\t\tfield_selector = 'input[name=\"' + key + '\"]';\n\t\t\t\t\tif ( this.model.get( key ) === true ) {\n\t\t\t\t\t\tthis.$( field_selector ).prop( 'checked', 'checked' );\n\t\t\t\t\t} else if ( this.model.get( key ) === false ) {\n\t\t\t\t\t\tthis.$( field_selector ).removeAttr( 'checked' );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif ( this.model.get( key ) === false ) {\n\t\t\t\t\t\tthis.model.set( key, '' );\n\t\t\t\t\t}\n\t\t\t\t\tfield_selector = '.form-control[name=\"' + key + '\"]';\n\t\t\t\t\tfield_control = this.$( field_selector );\n\t\t\t\t\tif ( field_control && field_control[0] ) {\n\t\t\t\t\t\tthis.$( field_selector ).val( this.model.get( key ) );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t}\n\n\tonSaveClick() {\n\t\tvar $this = this;\n\t\tif ( _.size( this.edit_view_error_ui_dic ) > 0 ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( !this.model.get( 'name' ) ) {\n\t\t\tthis.model.set( 'name', 'Resume' + ' - ' + LocalCacheData.getPortalLoginUser().first_name + ' ' + LocalCacheData.getPortalLoginUser().last_name );\n\t\t}\n\t\tthis.api['set' + this.sub_view_id]( this.model.toJSON(), {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( result_data !== true && TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t\t\t$this.model.set( 'id', result_data );\n\t\t\t\t\t}\n\t\t\t\t\t$this.onSaveResult( result, function() {\n\t\t\t\t\t\t$this['get' + $this.sub_view_id]( function() {\n\t\t\t\t\t\t\tProgressBar.changeProgressBarMessage( 'Processing...' );\n\t\t\t\t\t\t\t// $this.render();\n\t\t\t\t\t\t\t$this.closeEditView();\n\t\t\t\t\t\t\t$this._delegate.refreshProfile();\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\t$this.setErrorTips( result );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSaveResult( document_result, callback ) {\n\t\tvar document_id = document_result.getResult();\n\t\tvar $this = this;\n\n\t\t// var file = this.attachment_data;\n\n\t\tvar file = this.$( 'input[name=\"file_data\"]' )[0].files[0];\n\t\tvar form = new FormData();\n\t\tif ( document_id === true ) { // edit\n\t\t\tdocument_id = this.model.id;\n\t\t}\n\t\t//Save a document revision data if has upload file, otherwise don't\n\t\tif ( file ) {\n\t\t\tvar document_name = this.model.get( 'name' );\n\t\t\tvar revision = this.model.get( 'revision' );\n\t\t\tvar document_revision_id = this.document_api.addAttachment( document_name, document_id, revision, { async: false } ).getResult()['document_revision_id'];\n\t\t\tform.append( 'file_data', file );\n\t\t\tthis.uploadFile( form, document_revision_id, callback );\n\t\t} else {\n\t\t\tcallback();\n\t\t}\n\t}\n\n\tuploadFile( file_data, document_revision_id, callback ) {\n\t\tvar url = ServiceCaller.getAPIURL( 'Class=' + this.document_api.className + '&Method=uploadAttachment' + '&v=2' );\n\t\tif ( LocalCacheData.getAllURLArgs().company_id ) {\n\t\t\turl = url + '&company_id=' + LocalCacheData.getAllURLArgs().company_id;\n\t\t}\n\t\turl = url + '&object_id=' + document_revision_id;\n\t\tvar message_id = TTUUID.generateUUID();\n\t\tProgressBar.showProgressBar( message_id );\n\t\tProgressBar.changeProgressBarMessage( 'File Uploading' );\n\t\t$.ajax( {\n\t\t\turl: url, //Server script to process data\n\t\t\theaders: {\n\t\t\t\t//Handle CSRF tokens and related headers here.\n\t\t\t\t'X-Client-ID': 'Browser-TimeTrex',\n\t\t\t\t'X-CSRF-Token': getCookie( 'CSRF-Token' ),\n\t\t\t},\n\t\t\ttype: 'POST',\n\t\t\tdata: file_data,\n\t\t\tsuccess: function( res ) {\n\t\t\t\tProgressBar.removeProgressBar();\n\t\t\t\tif ( res.error.length > 0 ) {\n\t\t\t\t\tIndexViewController.instance.router.showTipModal( res.error );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcallback();\n\t\t\t},\n\t\t\tcache: false,\n\t\t\tcontentType: false,\n\t\t\tprocessData: false\n\t\t} );\n\t}\n\n\tonFormItemChange( e, doNotValidate ) {\n\t\tvar key = e.currentTarget.name;\n\t\tthis.model.set( key, $( e.currentTarget ).val() );\n\t\tswitch ( key ) {\n\t\t\t// case 'country':\n\t\t\t// case 'identification_country':\n\t\t\t// \tvar widget = this.$('select[name=\"' + key + '\"]');\n\t\t\t// \twidget.val( null );\n\t\t\t// \tbreak;\n\t\t\tcase 'private':\n\t\t\tcase 'template':\n\t\t\t\tif ( $( e.currentTarget ).is( ':checked' ) ) {\n\t\t\t\t\tthis.model.set( key, true );\n\t\t\t\t} else {\n\t\t\t\t\tthis.model.set( key, false );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n}","import 'jquery-ui/ui/widgets/datepicker';\nimport { PortalBaseViewController } from '@/views/portal/PortalBaseViewController';\nimport { TTAPI } from '@/services/TimeTrexClientAPI';\nimport { TTUUID } from '@/global/TTUUID';\nimport * as bootstrap from 'bootstrap';\nimport { JobApplicantEmploymentSubViewController } from '@/views/portal/hr/my_profile/JobApplicantEmploymentSubViewController';\nimport { JobApplicantReferenceSubViewController } from '@/views/portal/hr/my_profile/JobApplicantReferenceSubViewController';\nimport { JobApplicantLocationSubViewController } from '@/views/portal/hr/my_profile/JobApplicantLocationSubViewController';\nimport { JobApplicantSkillSubViewController } from '@/views/portal/hr/my_profile/JobApplicantSkillSubViewController';\nimport { JobApplicantSubBaseViewController } from '@/views/portal/hr/my_profile/JobApplicantSubBaseViewController';\nimport { JobApplicantEducationSubViewController } from '@/views/portal/hr/my_profile/JobApplicantEducationSubViewController';\nimport { JobApplicantMembershipSubViewController } from '@/views/portal/hr/my_profile/JobApplicantMembershipSubViewController';\nimport { JobApplicantLicenseSubViewController } from '@/views/portal/hr/my_profile/JobApplicantLicenseSubViewController';\nimport { JobApplicantLanguageSubViewController } from '@/views/portal/hr/my_profile/JobApplicantLanguageSubViewController';\nimport { JobApplicationSubViewController } from '@/views/portal/hr/my_profile/JobApplicationSubViewController';\nimport { DocumentSubViewController } from '@/views/portal/hr/my_profile/DocumentSubViewController';\n\nexport class MyProfileViewController extends PortalBaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#my_profile_view',\n\t\t\tevents: {\n\t\t\t\t'click #saveBtn': 'onSaveClick',\n\t\t\t\t'click #available_jobs': 'availableJobsClick',\n\t\t\t\t'click #applied_jobs': 'appliedJobsClick',\n\t\t\t\t'change input[type=\"text\"]': 'onFormItemChange',\n\t\t\t\t'change input[type=\"checkbox\"]': 'onFormItemChange',\n\t\t\t\t'change select.form-control': 'onFormItemChange',\n\t\t\t\t'change textarea.form-control': 'onFormItemChange',\n\t\t\t\t'click .detail-form-title': 'onFormTitleClick',\n\t\t\t\t'click .table-title .add-btn': 'onSubViewAddClick'\n\t\t\t\t// 'click .styled-select .glyphicon': 'onSelectClick',\n\t\t\t},\n\t\t\t// _required_files: [\n\t\t\t// \t'JobApplicantEmploymentSubViewController',\n\t\t\t// \t'JobApplicantReferenceSubViewController',\n\t\t\t// \t'JobApplicantLocationSubViewController',\n\t\t\t// \t'JobApplicantSkillSubViewController',\n\t\t\t// \t'JobApplicantEducationSubViewController',\n\t\t\t// \t'JobApplicantMembershipSubViewController',\n\t\t\t// \t'JobApplicantLicenseSubViewController',\n\t\t\t// \t'JobApplicantLanguageSubViewController',\n\t\t\t// \t'JobApplicationSubViewController',\n\t\t\t// \t'DocumentSubViewController'\n\t\t\t// ]\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit() {\n\t\tif ( !Global.isSet( LocalCacheData.getPortalLoginUser() ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.current_edit_record = Global.clone( LocalCacheData.getPortalLoginUser() );\n\t\tthis.model = new Backbone.Model( this.current_edit_record );\n\t\tthis.viewId = 'MyProfile';\n\n\t\t// __non_webpack_require__( this._required_files, function() {\n\t\tthis.api = TTAPI.APIJobApplicantPortal;\n\t\tthis.company_api = TTAPI.APICompanyPortal;\n\t\tthis.ethnic_group_api = TTAPI.APIEthnicGroupPortal;\n\t\tthis.qualification_api = TTAPI.APIQualificationPortal;\n\t\tthis.script_name = 'ProfileView';\n\t\tthis.edit_view_error_ui_dic = {};\n\t\tthis.applicant_fields = {};\n\t\tthis.background_fields = {};\n\t\tthis.availability_fields = {};\n\t\tthis.employment_history_fields = {};\n\t\tthis.reference_fields = {};\n\t\tthis.location_fields = {};\n\t\tthis.skill_fields = {};\n\t\tthis.education_fields = {};\n\t\tthis.membership_fields = {};\n\t\tthis.license_fields = {};\n\t\tthis.language_fields = {};\n\t\tthis.enable_add_qualification_fields = {};\n\t\tthis.is_changed = null;\n\n\t\tvar $this = this;\n\t\tthis.getAvailableFieldsForSection( function() {\n\t\t\t$this.render();\n\t\t} );\n\t\t// } );\n\t}\n\n\trefreshProfile() {\n\t\tvar $this = this;\n\t\tthis.api.getJobApplicant( {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tLocalCacheData.setPortalLoginUser( result.getResult()[0] );\n\t\t\t\t\t$this.current_edit_record = Global.clone( LocalCacheData.getPortalLoginUser() );\n\t\t\t\t}\n\t\t\t\t$this.$( '.job-applicant-detail' ).remove();\n\t\t\t\t$this.render();\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetAvailableFieldsForSection( callback ) {\n\t\tvar $this = this;\n\t\tvar sections;\n\t\tthis.api.getRecruitmentPortalConfig( {}, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tvar result = res.getResult();\n\t\t\t\tif ( Global.isArray( result ) ) {\n\t\t\t\t\tsections = result[0];\n\t\t\t\t}\n\n\t\t\t\tif ( sections ) {\n\t\t\t\t\tfor ( var section in sections ) {\n\t\t\t\t\t\tvar section_available_fields_ids;\n\t\t\t\t\t\tif ( sections.hasOwnProperty( section ) ) {\n\t\t\t\t\t\t\tsection_available_fields_ids = sections[section];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( Global.isArray( section_available_fields_ids ) ) {\n\t\t\t\t\t\t\tfor ( var i = 0; i < section_available_fields_ids.length; i++ ) {\n\t\t\t\t\t\t\t\tvar section_available_fields_id = section_available_fields_ids[i];\n\t\t\t\t\t\t\t\t$this[section + '_fields'][section_available_fields_id] = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$this.api.getJobApplicant( {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\t\t\tLocalCacheData.setPortalLoginUser( result.getResult()[0] );\n\t\t\t\t\t\t\t$this.current_edit_record = Global.clone( LocalCacheData.getPortalLoginUser() );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\n\trender() {\n\t\tvar tpl = Global.loadWidget( 'views/portal/hr/my_profile/MyProfileDetailView.html' );\n\t\tthis.$el.append( _.template( tpl )( {\n\t\t\t'applicant': this.applicant_fields,\n\t\t\t'background': this.background_fields,\n\t\t\t'availability': this.availability_fields,\n\t\t\t'employment_history': this.employment_history_fields,\n\t\t\t'reference': this.reference_fields,\n\t\t\t'location': this.location_fields,\n\t\t\t'skill': this.skill_fields,\n\t\t\t'education': this.education_fields,\n\t\t\t'membership': this.membership_fields,\n\t\t\t'license': this.license_fields,\n\t\t\t'language': this.language_fields\n\t\t} ) );\n\t\tthis.initOptions();\n\t\tthis.registerDatePicker();\n\t\tthis.setCurrentEditRecordData();\n\t\tthis.initSubHistoryView();\n\t\tthis.initSubQualificationView();\n\t\tthis.initSubApplicationView();\n\t\tthis.initSubDocumentView();\n\n\t\tvar $this = this;\n\t\t//Required to send the update credentials data into the api.\n\t\t$( '.portal-tables #password, .portal-tables #password_confirm' ).on( 'change', function( e ) {\n\t\t\t$this.onFormItemChange( e );\n\t\t} );\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tthis.api.getJobApplicantOptions( 'sex', {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.setSourceData( 'sex_id', result.getResult() );\n\t\t\t}\n\t\t} );\n\t\tthis.ethnic_group_api.getEthnicGroup( { filter_columns: { 'id': true, 'name': true } }, true, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar res = result.getResult();\n\t\t\t\tvar options = {};\n\t\t\t\tfor ( var i in res ) {\n\t\t\t\t\tif ( !res.hasOwnProperty( i ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tvar row = res[i];\n\t\t\t\t\toptions[row.id] = $.i18n._( row.name );\n\t\t\t\t}\n\t\t\t\t$this.setSourceData( 'ethnic_group_id', options, true );\n\t\t\t}\n\t\t} );\n\t\tthis.api.getJobApplicantOptions( 'minimum_wage_type', {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.setSourceData( 'minimum_wage_type_id', result.getResult(), true );\n\t\t\t}\n\t\t} );\n\t\tthis.company_api.getOptions( 'country', {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result = result.getResult();\n\t\t\t\t$this.setSourceData( 'country', result, true );\n\t\t\t\t$this.setSourceData( 'identification_country', result, true );\n\t\t\t}\n\t\t} );\n\t\tthis.api.getJobApplicantOptions( 'identification_type', {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.setSourceData( 'identification_type_id', result.getResult(), true );\n\t\t\t}\n\t\t} );\n\t\tthis.api.getJobApplicantOptions( 'available_days_of_week', {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.setSourceData( 'available_days_of_week', result.getResult(), true );\n\t\t\t}\n\t\t} );\n\t\tthis.api.getJobApplicantOptions( 'available_hours_of_day', {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.setSourceData( 'available_hours_of_day', result.getResult(), true );\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSelectClick( e ) {\n\t\tvar elem = $( e.currentTarget ).parent().find( 'select' );\n\t\tif ( document.createEvent ) {\n\t\t\tvar e = document.createEvent( 'MouseEvents' );\n\t\t\te.initMouseEvent( 'mousedown', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null );\n\t\t\telem[0].dispatchEvent( e );\n\t\t} else if ( element.fireEvent ) {\n\t\t\telem[0].fireEvent( 'onmousedown' );\n\t\t}\n\t}\n\n\tregisterDatePicker() {\n\t\tvar time_format = 'h:mm TT';\n\t\tvar format = 'dd-M-y';\n\t\tvar focus_out_timer;\n\t\tvar is_open = false;\n\t\t// When portal mode, no user preference.\n\t\t// if ( LocalCacheData.getLoginUserPreference() ) {\n\t\t// \tformat = LocalCacheData.getLoginUserPreference().date_format_1;\n\t\t// \ttime_format = LocalCacheData.getLoginUserPreference().time_format_1;\n\t\t// }\n\t\tvar day_name_min = [\n\t\t\t$.i18n._( 'Sun' ), $.i18n._( 'Mon' ), $.i18n._( 'Tue' ),\n\t\t\t$.i18n._( 'Wed' ), $.i18n._( 'Thu' ), $.i18n._( 'Fri' ), $.i18n._( 'Sat' )\n\t\t];\n\t\tvar month_name_short = [\n\t\t\t$.i18n._( 'Jan' ), $.i18n._( 'Feb' ),\n\t\t\t$.i18n._( 'Mar' ), $.i18n._( 'Apr' ), $.i18n._( 'May' ),\n\t\t\t$.i18n._( 'Jun' ), $.i18n._( 'Jul' ), $.i18n._( 'Aug' ),\n\t\t\t$.i18n._( 'Sep' ), $.i18n._( 'Oct' ), $.i18n._( 'Nov' ),\n\t\t\t$.i18n._( 'Dec' )\n\t\t];\n\t\tvar current_text = $.i18n._( 'Today' );\n\t\tvar close_text = $.i18n._( 'Close' );\n\t\tvar options = {\n\t\t\tshowTime: false,\n\t\t\tdateFormat: format,\n\t\t\tshowHour: false,\n\t\t\tshowMinute: false,\n\t\t\tchangeMonth: true,\n\t\t\tchangeYear: true,\n\t\t\tshowButtonPanel: true,\n\t\t\tduration: '',\n\t\t\tshowAnim: '',\n\t\t\tyearRange: '-100:+10',\n\t\t\tshowOn: '',\n\t\t\tdayNamesMin: day_name_min,\n\t\t\tcurrentText: current_text,\n\t\t\tmonthNamesShort: month_name_short,\n\t\t\tcloseText: close_text,\n\t\t\tbeforeShow: function() {\n\t\t\t},\n\t\t\tonSelect: function( dateText ) {\n\t\t\t\t$( this ).change();\n\t\t\t},\n\t\t\tonClose: function() {\n\t\t\t\tfocus_out_timer = setTimeout( function() {\n\t\t\t\t\tis_open = false;\n\t\t\t\t}, 100 );\n\t\t\t}\n\n\t\t};\n\t\tthis.$( 'input[type=\"text\"].datepicker' ).datepicker( options );\n\t\t// if ( LocalCacheData.getLoginUserPreference() ) {\n\t\t// \tthis.$('input[type=\"text\"].datepicker').attr( 'placeholder', LocalCacheData.getLoginUserPreference().date_format_display );\n\t\t// } else {\n\t\t// \tthis.$('input[type=\"text\"].datepicker').attr( 'placeholder', 'dd-mmm-yy' );\n\t\t// }\n\t\tthis.$( 'input[type=\"text\"].datepicker' ).attr( 'placeholder', 'dd-mmm-yy' );\n\t\tthis.$( 'input[type=\"text\"].datepicker' ).bind( 'mouseup', function() {\n\t\t\tif ( !is_open ) {\n\t\t\t\t$( this ).datepicker( 'show' );\n\t\t\t\tis_open = true;\n\t\t\t} else {\n\t\t\t\tis_open = false;\n\t\t\t\tif ( focus_out_timer ) {\n\t\t\t\t\tclearTimeout( focus_out_timer );\n\t\t\t\t\tfocus_out_timer = null;\n\t\t\t\t}\n\t\t\t}\n\t\t} ).next('.glyphicon').bind( 'mouseup', function() { $(this).prev().trigger( 'mouseup' ) } ); // this allows clicking on the calendar icon as well as the input box\n\t}\n\n\tsetSourceData( field, source_data, set_empty ) {\n\t\tvar $this = this;\n\t\tvar field_selector = 'select[id=\"' + field + '\"]';\n\t\tif ( this.$( field_selector ) && this.$( field_selector )[0] ) {\n\t\t\tthis.$( field_selector ).empty();\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\tif ( _.size( source_data ) == 0 ) {\n\t\t\tset_empty = true;\n\t\t}\n\t\tif ( set_empty === true ) {\n\t\t\tif ( field === 'available_days_of_week' || field === 'available_hours_of_day' ) {\n\t\t\t\tthis.$( field_selector ).append( $( '<option></option>' ).prop( 'value', '0' ).text( '-- ' + $.i18n._( 'Select all that apply' ) + ' --' ).attr( 'selected', 'selected' ) );\n\t\t\t} else {\n\t\t\t\tthis.$( field_selector ).append( $( '<option></option>' ).prop( 'value', '0' ).text( '-- ' + $.i18n._( 'None' ) + ' --' ).attr( 'selected', 'selected' ) );\n\t\t\t}\n\t\t}\n\t\tif ( _.size( source_data ) > 0 ) {\n\t\t\t$.each( source_data, function( value, label ) {\n\t\t\t\t$this.$( field_selector ).append( $( '<option></option>' ).prop( 'value', value ).text( label ) );\n\t\t\t\tif ( field === 'available_days_of_week' || field === 'available_hours_of_day' ) {\n\t\t\t\t\tif ( _.isArray( $this.current_edit_record[field] ) ) {\n\t\t\t\t\t\t$this.$( field_selector ).find( 'option[value=\\'0\\']' ).removeAttr( 'selected' );\n\t\t\t\t\t\tvar weeks = $this.current_edit_record[field];\n\t\t\t\t\t\tfor ( var i = 0; i < weeks.length; i++ ) {\n\t\t\t\t\t\t\tif ( value == weeks[i] ) {\n\t\t\t\t\t\t\t\t$this.$( field_selector ).find( 'option[value=\\'' + value + '\\']' ).attr( 'selected', 'selected' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( $this.current_edit_record[field] == value ) {\n\t\t\t\t\t\t$this.$( field_selector ).val( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} );\n\t\t}\n\t\t$this.$( field_selector ).selectpicker();\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\tvar field_selector;\n\t\tvar field_control;\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tif ( !this.current_edit_record.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// if ( this.current_edit_record[key] === false ) {\n\t\t\t// \tthis.current_edit_record[key] = '';\n\t\t\t// }\n\t\t\tswitch ( key ) {\n\t\t\t\tcase 'country':\n\t\t\t\tcase 'identification_country':\n\t\t\t\t\t// if ( this.current_edit_record[key] === false ) {\n\t\t\t\t\t// \tthis.current_edit_record[key] = '';\n\t\t\t\t\t// }\n\t\t\t\t\t// field_selector = 'select[id=\"' + key + '\"]';\n\t\t\t\t\t// this.$(field_selector ).val( this.current_edit_record[key] );\n\t\t\t\t\tif ( key === 'country' ) {\n\t\t\t\t\t\tthis.eSetProvince( this.current_edit_record[key] );\n\t\t\t\t\t} else if ( key === 'identification_country' ) {\n\t\t\t\t\t\tthis.iSetProvince( this.current_edit_record[key] );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'currently_employed':\n\t\t\t\tcase 'immediate_drug_test':\n\t\t\t\tcase 'criminal_record':\n\t\t\t\t\tfield_selector = 'input[id=\"' + key + '\"]';\n\t\t\t\t\tif ( this.current_edit_record[key] === true ) {\n\t\t\t\t\t\tthis.$( field_selector ).prop( 'checked', 'checked' );\n\t\t\t\t\t\tif ( this.$( 'textarea[id=\"criminal_record_description\"]' )[0] ) {\n\t\t\t\t\t\t\tif ( key === 'criminal_record' ) {\n\t\t\t\t\t\t\t\tthis.$( 'textarea[id=\"criminal_record_description\"]' ).removeAttr( 'disabled' );\n\t\t\t\t\t\t\t\tthis.$( 'textarea[id=\"criminal_record_description\"]' ).css( 'background-color', '#fff' );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.$( 'textarea[id=\"criminal_record_description\"]' ).attr( 'disabled', 'disabled' );\n\t\t\t\t\t\t\t\tthis.$( 'textarea[id=\"criminal_record_description\"]' ).css( 'background-color', '#eee' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if ( this.current_edit_record[key] === false ) {\n\t\t\t\t\t\tthis.$( field_selector ).removeAttr( 'checked' );\n\t\t\t\t\t\tif ( this.$( 'textarea[id=\"criminal_record_description\"]' )[0] ) {\n\t\t\t\t\t\t\tthis.$( 'textarea[id=\"criminal_record_description\"]' ).attr( 'disabled', 'disabled' );\n\t\t\t\t\t\t\tthis.$( 'textarea[id=\"criminal_record_description\"]' ).css( 'background-color', '#eee' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t// case 'available_days_of_week':\n\t\t\t\t// case 'identification_type_id':\n\t\t\t\t// case 'ethnic_group_id':\n\t\t\t\t// case 'sex_id':\n\t\t\t\t// \tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif ( this.current_edit_record[key] === false ) {\n\t\t\t\t\t\tthis.current_edit_record[key] = '';\n\t\t\t\t\t}\n\t\t\t\t\tfield_selector = '.form-control[id=\"' + key + '\"]';\n\t\t\t\t\tfield_control = this.$( field_selector );\n\t\t\t\t\tif ( field_control && field_control[0] ) {\n\t\t\t\t\t\tthis.$( field_selector ).val( this.current_edit_record[key] );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\n\t\t// this.collectUIDataToCurrentEditRecord();\n\t\t// this.setEditViewDataDone();\n\t}\n\n\tonFormItemChange( e, doNotValidate ) {\n\t\tif ( e.currentTarget.name ) {\n\t\t\tvar key = e.currentTarget.name;\n\t\t} else if ( e.currentTarget.id ) {\n\t\t\tvar key = e.currentTarget.id;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar $this = this;\n\t\tthis.current_edit_record[key] = $( e.currentTarget ).val();\n\t\tthis.model.set( key, $( e.currentTarget ).val() );\n\t\tthis.is_changed = true;\n\t\tswitch ( key ) {\n\t\t\t// case 'country':\n\t\t\t// case 'identification_country':\n\t\t\t// \tvar widget = this.$('select[id=\"' + key + '\"]');\n\t\t\t// \twidget.val( null );\n\t\t\t// \tbreak;\n\t\t\tcase 'currently_employed':\n\t\t\tcase 'immediate_drug_test':\n\t\t\tcase 'criminal_record':\n\t\t\t\tif ( $( e.currentTarget ).is( ':checked' ) ) {\n\t\t\t\t\tthis.current_edit_record[key] = true;\n\t\t\t\t\tthis.model.set( key, true );\n\t\t\t\t\tif ( key === 'criminal_record' ) {\n\t\t\t\t\t\tif ( this.$( 'textarea[id=\"criminal_record_description\"]' )[0] ) {\n\t\t\t\t\t\t\tthis.$( 'textarea[id=\"criminal_record_description\"]' ).removeAttr( 'disabled' );\n\t\t\t\t\t\t\tthis.$( 'textarea[id=\"criminal_record_description\"]' ).css( 'background-color', '#fff' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.current_edit_record[key] = false;\n\t\t\t\t\tthis.model.set( key, false );\n\t\t\t\t\tif ( key === 'criminal_record' ) {\n\t\t\t\t\t\tif ( this.$( 'textarea[id=\"criminal_record_description\"]' )[0] ) {\n\t\t\t\t\t\t\tthis.$( 'textarea[id=\"criminal_record_description\"]' ).attr( 'disabled', 'disabled' );\n\t\t\t\t\t\t\tthis.$( 'textarea[id=\"criminal_record_description\"]' ).css( 'background-color', '#eee' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'available_days_of_week':\n\t\t\tcase 'available_hours_of_day':\n\t\t\t\tif ( $( e.currentTarget ).val() === null ) {\n\t\t\t\t\tthis.current_edit_record[key] = 0;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'confirm_password':\n\t\t\t\tdoNotValidate = false;\n\t\t\t\tbreak;\n\t\t}\n\t\tif ( key == 'country' ) {\n\t\t\tthis.eSetProvince( this.$( 'select[id=\"country\"]' ).val(), true, function() {\n\t\t\t\t$this.validate();\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\t\tif ( key === 'identification_country' ) {\n\t\t\tthis.iSetProvince( this.$( 'select[id=\"identification_country\"]' ).val(), true, function() {\n\t\t\t\t$this.validate();\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tvalidate() {\n\t\tvar $this = this;\n\t\tvar record = this.current_edit_record;\n\t\tthis.api.validateJobApplicant( record, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.validateResult( result );\n\t\t\t}\n\t\t} );\n\t}\n\n\tvalidateResult( result ) {\n\t\tthis.clearErrorTips();\n\t\tthis.setErrorTips( result );\n\t}\n\n\tclearErrorTips( clear_all ) {\n\t\tGlobal.removeErrorTips( Object.values( this.edit_view_error_ui_dic ).map( item => item[0] ), clear_all );\n\t}\n\n\tsetErrorTips( result ) {\n\t\tthis.clearErrorTips( true );\n\t\tvar error_list = result.getDetails() ? result.getDetails()[0] : {};\n\t\tif ( error_list && error_list.hasOwnProperty( 'error' ) ) {\n\t\t\terror_list = error_list.error;\n\t\t}\n\t\tvar sort_array = [];\n\t\tif ( _.size( error_list ) > 0 ) {\n\t\t\tthis.$( '.save-btn' ).addClass( 'error' );\n\t\t} else {\n\t\t\tthis.$( '.save-btn' ).removeClass( 'error' );\n\t\t}\n\t\tfor ( var key in error_list ) {\n\t\t\tif ( !error_list.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar field_obj;\n\t\t\tif ( this.$( 'input[id=\"' + key + '\"]:visible' )[0] ) {\n\t\t\t\tfield_obj = this.$( 'input[id=\"' + key + '\"]:visible' );\n\t\t\t} else if ( this.$( 'select[id=\"' + key + '\"]:visible' )[0] ) {\n\t\t\t\tfield_obj = this.$( 'select[id=\"' + key + '\"]:visible' ).parents( '.styled-select' );\n\t\t\t} else if ( this.$( 'textarea[id=\"' + key + '\"]:visible' )[0] ) {\n\t\t\t\tfield_obj = this.$( 'textarea[id=\"' + key + '\"]:visible' );\n\t\t\t}\n\t\t\tif ( field_obj ) {\n\n\t\t\t\tfield_obj.addClass( 'error-tip' );\n\t\t\t\tvar error_string;\n\t\t\t\tif ( _.isArray( error_list[key] ) ) {\n\t\t\t\t\terror_string = error_list[key][0];\n\t\t\t\t} else {\n\t\t\t\t\terror_string = error_list[key];\n\t\t\t\t}\n\n\t\t\t\tvar tooltip = new bootstrap.Tooltip(field_obj.get(0), {\n\t\t\t\t\t'title': error_string,\n\t\t\t\t\t'placement': 'right',\n\t\t\t\t\t'selector': '#' + key,\n\t\t\t\t});\n\n\t\t\t\ttooltip.show();\n\n\t\t\t\tthis.edit_view_error_ui_dic[key] = field_obj;\n\t\t\t\tsort_array.push( field_obj.attr( 'data-sort' ) );\n\t\t\t}\n\t\t}\n\t\tif ( sort_array.length > 0 ) {\n\t\t\tsort_array.sort();\n\t\t\tvar error_top_object;\n\t\t\tvar key = sort_array[0];\n\t\t\tif ( this.$( 'input[data-sort=\"' + key + '\"]' )[0] ) {\n\t\t\t\terror_top_object = this.$( 'input[data-sort=\"' + key + '\"]' );\n\t\t\t} else if ( this.$( 'select[data-sort=\"' + key + '\"]' )[0] ) {\n\t\t\t\terror_top_object = this.$( 'select[data-sort=\"' + key + '\"]' );\n\t\t\t} else if ( this.$( 'textarea[data-sort=\"' + key + '\"]' )[0] ) {\n\t\t\t\terror_top_object = this.$( 'textarea[data-sort=\"' + key + '\"]' );\n\t\t\t}\n\t\t\tvar page = $( 'html, body' );\n\t\t\tpage.on( 'scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove', function( e ) {\n\t\t\t\tif ( e.which > 0 || e.type == 'mousedown' || e.type == 'mousewheel' || e.type == 'touchmove' ) {\n\t\t\t\t\tpage.stop();\n\t\t\t\t}\n\t\t\t} );\n\t\t\tif ( error_top_object ) {\n\t\t\t\tpage.animate( { scrollTop: error_top_object.parent().find( '.error-tip' ).offset().top }, 'slow', function() {\n\t\t\t\t\tpage.off( 'scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove' );\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\teSetProvince( val, refresh, callback ) {\n\t\tvar $this = this;\n\t\t$this.$( 'select[id=\"province\"]' ).selectpicker( 'destroy' );\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\t$this.setSourceData( 'province', [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\t\t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.current_edit_record.province = $this.e_province_array[0].value;\n\t\t\t\t\t\t$this.model.set( 'province', $this.e_province_array[0].value );\n\t\t\t\t\t\t$this.$( 'select[id=\"province\"]' ).val( $this.current_edit_record.province );\n\t\t\t\t\t}\n\t\t\t\t\t$this.setSourceData( 'province', res );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tiSetProvince( val, refresh, callback ) {\n\t\tvar $this = this;\n\t\t$this.$( 'select[id=\"identification_province\"]' ).selectpicker( 'destroy' );\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.i_province_array = [];\n\t\t\t$this.setSourceData( 'identification_province', [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.i_province_array = Global.buildRecordArray( res );\n\t\t\t\t\tif ( refresh && $this.i_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.current_edit_record.identification_province = $this.i_province_array[0].value;\n\t\t\t\t\t\t$this.model.set( 'identification_province', $this.i_province_array[0].value );\n\t\t\t\t\t\t$this.$( 'select[id=\"identification_province\"]' ).val( $this.current_edit_record.identification_province );\n\t\t\t\t\t}\n\t\t\t\t\t$this.setSourceData( 'identification_province', res );\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tavailableJobsClick() {\n\t\twindow.location = Global.getBaseURL( null, true, true ).replace(/#!m=.*?(&|$)/g, '#!m=PortalJobVacancy$1'); //Be sure to include any other URL args.\n\t\tLocalCacheData.setAllURLArgs( {} );\n\t}\n\n\tappliedJobsClick() {\n\t\twindow.location = Global.getBaseURL( null, true, true ).replace(/#!m=.*?(&|$)/g, '#!m=MyJobApplication$1'); //Be sure to include any other URL args.\n\t\tLocalCacheData.setAllURLArgs( {} );\n\t}\n\n\tonSaveClick() {\n\t\tthis.clearErrorTips( true );\n\t\tvar $this = this;\n\t\t// if ( _.size(this.edit_view_error_ui_dic) > 0 ) {\n\t\t// \treturn;\n\t\t// }\n\t\tthis.api.setJobApplicant( this.current_edit_record, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\t$this.is_changed = null;\n\t\t\t\t\t$this.showAlert( $.i18n._( 'Profile Saved Successfully!' ), {\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t'border': '2px solid #154575',\n\t\t\t\t\t\t\t'color': '#154575'\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t\t$this.api.getJobApplicant( {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\t\t\t\t$this.$( '#saveBtn' ).removeClass( 'error' );\n\t\t\t\t\t\t\t\t$this.edit_view_error_ui_dic = {};\n\t\t\t\t\t\t\t\tLocalCacheData.setPortalLoginUser( result.getResult()[0] );\n\t\t\t\t\t\t\t\tIndexViewController.instance.router.headerView.render();\n\t\t\t\t\t\t\t\t// $this.initEditViewData();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$this.showErrorAlert( result );\n\t\t\t\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\t$this.setErrorTips( result );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tshowErrorAlert( result ) {\n\t\tvar details = result.getDetails();\n\n\t\tif ( details.hasOwnProperty( 'error' ) ) {\n\n\t\t}\n\t\tif ( !details ) {\n\t\t\tdetails = result.getDescription(); // If the details is empty, try to get description to show.\n\t\t}\n\t\tvar error_string = '';\n\n\t\tif ( Global.isArray( details ) || typeof details === 'object' ) {\n\n\t\t\t$.each( details, function( index, val ) {\n\n\t\t\t\tif ( val.hasOwnProperty( 'error' ) ) {\n\t\t\t\t\tval = val.error;\n\t\t\t\t}\n\n\t\t\t\tfor ( var key in val ) {\n\t\t\t\t\terror_string = error_string + val[key] + '<br>';\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\n\t\t\terror_string = details;\n\t\t}\n\n\t\tthis.showAlert( error_string );\n\t}\n\n\tshowAlert( content, options ) {\n\t\tIndexViewController.instance.router.showTipModal( content, options );\n\t}\n\n\tonFormTitleClick( e ) {\n\t\tthis.toggleSubViews( e );\n\t\t$( 'span.glyphicon', e.currentTarget ).toggleClass( 'glyphicon-chevron-up glyphicon-chevron-down' );\n\t\tsetTimeout( function() {\n\t\t\t$( e.currentTarget ).toggleClass( 'title-expand title-pack-up' );\n\t\t}, 500 );\n\t}\n\n\ttoggleSubViews( e ) {\n\t\tvar current_target_id = $( e.currentTarget ).attr( 'id' );\n\t\tvar target = '.' + current_target_id;\n\t\tthis.$( target ).slideToggle( 'row-expand row-pack-up' );\n\t}\n\n\tinitSubHistoryView() {\n\t\tvar history_views = [\n\t\t\t'JobApplicantEmployment', 'JobApplicantReference', 'JobApplicantLocation'\n\t\t];\n\t\tfor ( var key in history_views ) {\n\t\t\tthis.initSubViews( history_views[key] );\n\t\t}\n\t}\n\n\tinitSubQualificationView() {\n\t\t// var qualification_views = [\n\t\t// \t'JobApplicantSkill', 'JobApplicantEducation', 'JobApplicantMembership', 'JobApplicantLicense', 'JobApplicantLanguage'\n\t\t// ];\n\t\t// for( var key in qualification_views ) {\n\t\t// \tthis.initSubViews( qualification_views[key] );\n\t\t// }\n\t\tthis.initSubViews( 'JobApplicantSkill', { type_id: 10 } );\n\t\tthis.initSubViews( 'JobApplicantEducation', { type_id: 20 } );\n\t\tthis.initSubViews( 'JobApplicantLicense', { type_id: 30 } );\n\t\tthis.initSubViews( 'JobApplicantLanguage', { type_id: 40 } );\n\t\tthis.initSubViews( 'JobApplicantMembership', { type_id: 50 } );\n\t}\n\n\tinitSubApplicationView() {\n\t\tthis.initSubViews( 'JobApplication' );\n\t}\n\n\tinitSubDocumentView() {\n\t\tthis.initSubViews( 'Document' );\n\t}\n\n\tinitSubViews( sub_view_id, options ) {\n\t\tvar $this = this;\n\t\tswitch ( sub_view_id ) {\n\t\t\tcase 'JobApplication':\n\t\t\t\tvar all_columns = {\n\t\t\t\t\t'job_vacancy': $.i18n._( 'Job Vacancy' ),\n\t\t\t\t\t'created_date': $.i18n._( 'Date' )\n\t\t\t\t};\n\t\t\t\tthis.setSubViews( sub_view_id, all_columns );\n\t\t\t\tbreak;\n\t\t\tcase 'Document':\n\t\t\t\tvar all_columns = {\n\t\t\t\t\t'name': $.i18n._( 'Name' ),\n\t\t\t\t\t'created_date': $.i18n._( 'Uploaded Date' )\n\t\t\t\t};\n\t\t\t\tthis.setSubViews( sub_view_id, all_columns, options );\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantSkill':\n\t\t\tcase 'JobApplicantEducation':\n\t\t\tcase 'JobApplicantMembership':\n\t\t\tcase 'JobApplicantLicense':\n\t\t\tcase 'JobApplicantLanguage':\n\t\t\t\tvar args = {};\n\t\t\t\tvar filter_data = {};\n\t\t\t\tfilter_data.type_id = [options.type_id];\n\t\t\t\targs.filter_data = filter_data;\n\t\t\t\targs.filter_columns = {\n\t\t\t\t\t'id': true,\n\t\t\t\t\t'name': true\n\t\t\t\t};\n\t\t\t\tthis.qualification_api.getQualification( args, true, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tvar res = result.getResult();\n\t\t\t\t\t\tif ( res === true && $this.isEnableAddQualification( sub_view_id ) === false ) {\n\t\t\t\t\t\t\t$this.$( '.' + sub_view_id + '-table' ).parent().parent().css( 'display', 'none' );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$this.showQualificationHeader();\n\t\t\t\t\t\t\t$this.getAllColumns( sub_view_id, function( all_columns ) {\n\t\t\t\t\t\t\t\t$this.setSubViews( sub_view_id, all_columns );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.getAllColumns( sub_view_id, function( all_columns ) {\n\t\t\t\t\t$this.setSubViews( sub_view_id, all_columns );\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tshowQualificationHeader() {\n\t\tthis.$( '#qualifications-tables' ).show();\n\t}\n\n\tisEnableAddQualification( sub_view_id ) {\n\t\tvar is_enable;\n\t\tswitch ( sub_view_id ) {\n\t\t\tcase 'JobApplicantSkill':\n\t\t\t\tis_enable = this.enable_add_qualification_fields.hasOwnProperty( 'skill' ) && this.enable_add_qualification_fields.skill === true;\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantEducation':\n\t\t\t\tis_enable = this.enable_add_qualification_fields.hasOwnProperty( 'education' ) && this.enable_add_qualification_fields.education === true;\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantMembership':\n\t\t\t\tis_enable = this.enable_add_qualification_fields.hasOwnProperty( 'membership' ) && this.enable_add_qualification_fields.membership === true;\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantLicense':\n\t\t\t\tis_enable = this.enable_add_qualification_fields.hasOwnProperty( 'license' ) && this.enable_add_qualification_fields.license === true;\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantLanguage':\n\t\t\t\tis_enable = this.enable_add_qualification_fields.hasOwnProperty( 'language' ) && this.enable_add_qualification_fields.language === true;\n\t\t\t\tbreak;\n\t\t}\n\t\treturn is_enable;\n\t}\n\n\taddDocumentRow( document_id ) {\n\t\tvar $this = this;\n\t\tvar options = {};\n\t\toptions.filter_data = {\n\t\t\tid: document_id\n\t\t};\n\t\toptions.append = true;\n\t\tthis.initSubViews( 'Document', options );\n\t\t// $('html, body').animate({\n\t\t// \tscrollTop: $this.$('.Document-table').offset().top\n\t\t// }, 2000);\n\t}\n\n\tgetAllColumns( sub_view_id, callBack ) {\n\t\tvar $this = this;\n\t\tvar method = 'get' + sub_view_id + 'Options';\n\t\tthis.api[method]( 'columns', {\n\t\t\tonResult: function( columns_result ) {\n\t\t\t\tvar columns_result_data = columns_result.getResult();\n\t\t\t\tif ( callBack ) {\n\t\t\t\t\tcallBack( columns_result_data );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetSubViews( sub_view_id, display_columns, options ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_sort = {};\n\t\t// filter.filter_columns = this.getFilterColumnsFromDisplayColumns( display_columns );\n\t\tfilter.filter_items_per_page = 0; // Default to 0 to load user preference defined\n\t\tfilter.filter_page = 1;\n\t\tif ( Global.isSet( options ) && Global.isSet( options.filter_data ) ) {\n\t\t\tfilter.filter_data = options.filter_data;\n\t\t}\n\t\tthis.api['get' + sub_view_id]( filter, true, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tvar container = '.' + sub_view_id + '-table';\n\t\t\t\tif ( !Global.isSet( options ) || ( Global.isSet( options ) && !options.append ) ) {\n\t\t\t\t\t$this.$( container ).empty();\n\t\t\t\t}\n\t\t\t\tif ( !Global.isArray( result_data ) && !( TTUUID.isUUID( $this.refresh_id ) ) ) {\n\t\t\t\t\t$this.$( container ).html( '<h4 class=\"no-result\">' + $.i18n._( 'None provided yet, click the ' + '\"+\"' + ' icon to add' ) + '</h4>' );\n\t\t\t\t} else {\n\t\t\t\t\t// if ( $this.$('.'+sub_view_id+'-table').find('.table-container').length == 0 ) {\n\t\t\t\t\t// \t$this.$('.'+sub_view_id+'-table').html('<div class=\"table-responsive\"><table class=\"table table-condensed table-bordered table-container\"><thead></thead><tbody></tbody></table></div>');\n\t\t\t\t\t// }\n\t\t\t\t\tfor ( var key in result_data ) {\n\t\t\t\t\t\t$this.initSubView( sub_view_id, display_columns, result_data[key] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tinitSubView( sub_view_id, display_columns, view_data ) {\n\t\tvar $this = this;\n\t\tvar sub_view_model = new Backbone.Model( view_data );\n\t\tvar view_name = sub_view_id + 'SubViewController';\n\t\tvar available_fields = null;\n\t\tvar enable_add_qualification;\n\t\tswitch ( sub_view_id ) {\n\t\t\tcase 'JobApplicantEmployment':\n\t\t\t\tavailable_fields = this.employment_history_fields;\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantReference':\n\t\t\t\tavailable_fields = this.reference_fields;\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantLocation':\n\t\t\t\tavailable_fields = this.location_fields;\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantSkill':\n\t\t\t\tavailable_fields = this.skill_fields;\n\t\t\t\tenable_add_qualification = this.enable_add_qualification_fields.skill;\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantEducation':\n\t\t\t\tavailable_fields = this.education_fields;\n\t\t\t\tenable_add_qualification = this.enable_add_qualification_fields.education;\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantMembership':\n\t\t\t\tavailable_fields = this.membership_fields;\n\t\t\t\tenable_add_qualification = this.enable_add_qualification_fields.membership;\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantLicense':\n\t\t\t\tavailable_fields = this.license_fields;\n\t\t\t\tenable_add_qualification = this.enable_add_qualification_fields.license;\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantLanguage':\n\t\t\t\tavailable_fields = this.language_fields;\n\t\t\t\tenable_add_qualification = this.enable_add_qualification_fields.language;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tswitch ( view_name ) {\n\t\t\tcase 'JobApplicantEmploymentSubViewController':\n\t\t\t\tvar controller = JobApplicantEmploymentSubViewController\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantReferenceSubViewController':\n\t\t\t\tvar controller = JobApplicantReferenceSubViewController\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantLocationSubViewController':\n\t\t\t\tvar controller = JobApplicantLocationSubViewController\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantSkillSubViewController':\n\t\t\t\tvar controller = JobApplicantSkillSubViewController\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantSubBaseViewController':\n\t\t\t\tvar controller = JobApplicantSubBaseViewController\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantEducationSubViewController':\n\t\t\t\tvar controller = JobApplicantEducationSubViewController\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantMembershipSubViewController':\n\t\t\t\tvar controller = JobApplicantMembershipSubViewController\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantLicenseSubViewController':\n\t\t\t\tvar controller = JobApplicantLicenseSubViewController\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicantLanguageSubViewController':\n\t\t\t\tvar controller = JobApplicantLanguageSubViewController\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicationSubViewController':\n\t\t\t\tvar controller = JobApplicationSubViewController\n\t\t\t\tbreak;\n\t\t\tcase 'DocumentSubViewController':\n\t\t\t\tvar controller = DocumentSubViewController\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tvar sub_view_controller = new controller( {\n\t\t\t\t\t// table_container: $this.$('.'+sub_view_id+'-table').find('.table-container'),\n\t\t\t\t\ttable_container: $this.$( '.' + sub_view_id + '-table' ),\n\t\t\t\t\tmodel: sub_view_model,\n\t\t\t\t\tsub_view_id: sub_view_id,\n\t\t\t\t\t_delegate: $this,\n\t\t\t\t\tavailable_fields: available_fields,\n\t\t\t\t\tenable_add_qualification: enable_add_qualification,\n\t\t\t\t\tdisplay_columns: display_columns\n\t\t\t\t} );\n\t}\n\n\tonSubViewAddClick( e ) {\n\t\tvar $this = this;\n\t\tvar current_target_id = $( e.currentTarget ).attr( 'id' );\n\t\tvar sub_view_id = current_target_id.split( '-' )[0];\n\t\tswitch ( sub_view_id ) {\n\t\t\tcase 'JobApplication':\n\t\t\t\tvar all_columns = {\n\t\t\t\t\t'job_vacancy': $.i18n._( 'Job Vacancy' ),\n\t\t\t\t\t'created_date': $.i18n._( 'Date' )\n\t\t\t\t};\n\t\t\t\t$this.setSubViewsDefaultData( sub_view_id, all_columns );\n\t\t\t\tbreak;\n\t\t\tcase 'Document':\n\t\t\t\tvar all_columns = {\n\t\t\t\t\t'name': $.i18n._( 'Name' ),\n\t\t\t\t\t'created_date': $.i18n._( 'Uploaded Date' )\n\t\t\t\t};\n\t\t\t\t$this.setSubViewsDefaultData( sub_view_id, all_columns );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.getAllColumns( sub_view_id, function( all_columns ) {\n\t\t\t\t\t$this.setSubViewsDefaultData( sub_view_id, all_columns );\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetSubViewsDefaultData( sub_view_id, display_columns ) {\n\t\tvar $this = this;\n\t\tif ( sub_view_id === 'JobApplication' ) {\n\t\t\tthis.availableJobsClick();\n\t\t\treturn;\n\t\t}\n\t\tthis.api['get' + sub_view_id + 'DefaultData']( {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t// if ( $this.$('.'+sub_view_id+'-table').find('.table-container').length == 0 ) {\n\t\t\t\t// \t$this.$('.'+sub_view_id+'-table').html('<div class=\"table-responsive\"><table class=\"table table-condensed table-bordered table-container\"><thead></thead><tbody></tbody></table></div>');\n\t\t\t\t// }\n\t\t\t\t$this.initSubView( sub_view_id, display_columns, result_data );\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetFilterColumnsFromDisplayColumns( display_columns ) {\n\t\tvar column_filter = {};\n\t\tcolumn_filter.is_owner = true;\n\t\tcolumn_filter.id = true;\n\t\tcolumn_filter.is_child = true;\n\t\tcolumn_filter.in_use = true;\n\t\tcolumn_filter.first_name = true;\n\t\tcolumn_filter.last_name = true;\n\t\tcolumn_filter.job_vacancy_id = true;\n\n\t\t// Error: Unable to get property 'getGridParam' of undefined or null reference\n\t\t//Fixed possible exception -- Error: Unable to get property 'length' of undefined or null reference in /interface/html5/views/BaseViewController.js?v=7.4.3-20140924-090129 line 5031\n\t\t// if ( display_columns ) {\n\t\t// \tvar len = display_columns.length;\n\t\t//\n\t\t// \tfor ( var i = 0; i < len; i++ ) {\n\t\t// \t\tvar column_info = display_columns[i];\n\t\t// \t\tcolumn_filter[column_info.name] = true;\n\t\t// \t}\n\t\t// }\n\t\tfor ( var key in display_columns ) {\n\t\t\tcolumn_filter[key] = true;\n\t\t}\n\n\t\treturn column_filter;\n\t}\n\n}\n\nMyProfileViewController.html_template = `\n<div id=\"my_profile_view\">\n\t<div class=\"job-applicant-navbar\">\n\t\t<div class=\"container\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-3 col-sm-12 col-xs-12\">\n\t\t\t\t\t<button id=\"available_jobs\" class=\"btn btn-block btn-default w-100\"><span class=\"glyphicon glyphicon-menu-left\"></span> <%= $.i18n._('Available Jobs') %></button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-3 col-sm-12 col-xs-12\">\n\t\t\t\t\t<button id=\"applied_jobs\" class=\"btn btn-block btn-default w-100\"><%= $.i18n._('Applied Jobs') %></button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-2 col-sm-12 col-xs-12 offset-4\">\n\t\t\t\t\t<button id=\"saveBtn\" class=\"btn save-btn btn-block w-100\"><%= $.i18n._('Save') %></button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n`;\n","import { HeaderViewController } from '@/views/portal/header/HeaderViewController';\nimport { PortalBaseViewController } from '@/views/portal/PortalBaseViewController';\nimport { PortalJobVacancyDetailController } from '@/views/portal/hr/recruitment/PortalJobVacancyDetailController';\nimport { PortalJobVacancyDetailViewController } from '@/views/portal/hr/recruitment/PortalJobVacancyDetailViewController';\nimport { PortalJobVacancyViewController } from '@/views/portal/hr/recruitment/PortalJobVacancyViewController';\nimport { MyProfileViewController } from '@/views/portal/hr/my_profile/MyProfileViewController';\nimport { MyJobApplicationViewController } from '@/views/portal/hr/my_jobapplication/MyJobApplicationViewController';\nimport { TTAPI } from '@/services/TimeTrexClientAPI';\nimport { TAlertManager } from '@/global/TAlertManager';\nimport '@/theme/default/portal/css/portal.css';\n\nexport class ApplicationRouter extends Backbone.Router {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tcontroller: null,\n\t\t\theaderView: null,\n\t\t\troutes: {\n\t\t\t\t'': 'onViewChange',\n\t\t\t\t'!:viewName': 'onViewChange',\n\t\t\t\t'*notFound': 'notFound'\n\t\t\t}\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\treloadView( view_id ) {\n\t\t//error: Uncaught ReferenceError: XXXXViewController is not defined ininterface/html5/#!m=TimeSheet line 3\n\t\t// Happens when quickly click on context menu and network is slow.\n\t\tif ( eval( 'typeof ' + view_id + 'ViewController' ) === 'function' ) {\n\t\t\tPortalBaseViewController.loadView( view_id );\n\t\t}\n\t}\n\n\tnotFound( url ) {\n\t\tvar new_url = Global.getBaseURL();\n\n\t\tGlobal.setURLToBrowser( new_url + '#!m=PortalJobVacancy' );\n\t}\n\n\t/* jshint ignore:start */\n\tonViewChange( viewName ) {\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\tvar view_id;\n\t\tvar edit_id;\n\t\tvar action;\n\n\t\tif ( Global.needReloadBrowser ) {\n\t\t\tGlobal.needReloadBrowser = false;\n\t\t\twindow.location.reload();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( viewName ) {\n\t\t\targs = Global.buildArgDic( viewName.split( '&' ) );\n\t\t}\n\t\tif ( viewName && viewName.indexOf( 'm=' ) >= 0 ) {\n\t\t\tview_id = Global.sanitizeViewId( args.m );\n\t\t} else {\n\t\t\tview_id = 'PortalJobVacancy';\n\t\t}\n\n\t\tLocalCacheData.fullUrlParameterStr = viewName;\n\n\t\tLocalCacheData.setAllURLArgs( args );\n\n\t\tif ( LocalCacheData.getAllURLArgs() ) {\n\t\t\tif ( !LocalCacheData.getAllURLArgs().hasOwnProperty( 'company_id' ) ) {\n\t\t\t\tTTPromise.add( 'IndexController', 'onViewChange' );\n\t\t\t\tTTPromise.wait( null, null, function() {\n\t\t\t\t\tif ( IndexViewController && IndexViewController.instance && IndexViewController.instance.router ) {\n\t\t\t\t\t\tIndexViewController.instance.router.showTipModal( $.i18n._( 'Invalid Company' ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tTAlertManager.showAlert( $.i18n._( 'Invalid Company' ) );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t//Ensure that the error is shown in a relatively timely fashion AFTER the framework needed to render properly is loaded.\n\t\t\t\t\tTTPromise.resolve( 'IndexController', 'onViewChange' );\n\t\t\t\t}, 4000 );\n\t\t\t}\n\t\t}\n\n\t\tedit_id = args.id;\n\n\t\taction = args.a;\n\n\t\tif ( LocalCacheData.current_open_view_id === view_id ) {\n\n\t\t\tif ( LocalCacheData.current_open_primary_controller ) {\n\n\t\t\t\tif ( action ) {\n\t\t\t\t\tswitch ( action ) {\n\t\t\t\t\t\tcase 'edit':\n\n\t\t\t\t\t\t\t//Error: Unable to get property 'id' of undefined or null reference in /interface/html5/IndexController.js?v=8.0.0-20141230-125406 line 87\n\t\t\t\t\t\t\tif ( !LocalCacheData.current_open_primary_controller.edit_view ||\n\t\t\t\t\t\t\t\t( LocalCacheData.current_open_primary_controller.current_edit_record &&\n\t\t\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.current_edit_record.id != edit_id ) ) {\n\n\t\t\t\t\t\t\t\t//Makes ure when doing copy_as_new, don't open this\n\t\t\t\t\t\t\t\tif ( LocalCacheData.current_doing_context_action === 'edit' ) {\n\t\t\t\t\t\t\t\t\topenEditView( edit_id );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'new':\n\t\t\t\t\t\t\tif ( !LocalCacheData.current_open_primary_controller.edit_view ) {\n\t\t\t\t\t\t\t\topenEditView();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'view':\n\n\t\t\t\t\t\t\tswitch ( view_id ) {\n\t\t\t\t\t\t\t\tcase 'MessageControl':\n\t\t\t\t\t\t\t\t\tif ( args.t === 'message' ) {\n\t\t\t\t\t\t\t\t\t\tif ( !LocalCacheData.current_open_primary_controller.edit_view ||\n\t\t\t\t\t\t\t\t\t\t\t( !checkIds() ) ) {\n\t\t\t\t\t\t\t\t\t\t\topenEditView( edit_id, true );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else if ( args.t === 'request' ) {\n\t\t\t\t\t\t\t\t\t\tif ( !LocalCacheData.current_open_primary_controller.edit_view ||\n\t\t\t\t\t\t\t\t\t\t\t( LocalCacheData.current_open_primary_controller.current_select_message_control_data.id != edit_id ) ) {\n\t\t\t\t\t\t\t\t\t\t\topenEditView( edit_id, true );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tif ( !LocalCacheData.current_open_primary_controller.edit_view ||\n\t\t\t\t\t\t\t\t\t\t( LocalCacheData.current_open_primary_controller.current_edit_record.id != edit_id ) ) {\n\t\t\t\t\t\t\t\t\t\topenEditView( edit_id, true );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tif ( LocalCacheData.current_open_primary_controller.edit_view &&\n\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.current_edit_record ) {\n\n\t\t\t\t\t\tif ( LocalCacheData.current_open_primary_controller.viewId === 'TimeSheet' ) {\n\t\t\t\t\t\t\tif ( LocalCacheData.current_open_primary_controller.is_mass_editing ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.buildContextMenu( true );\n\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.removeEditView();\n\t\t\t\t\t\tthis.cleanAnySubViewUI();\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\treturn;\n\n\t\t} else {\n\t\t\tLocalCacheData.edit_id_for_next_open_view = edit_id;\n\n\t\t\tif ( action ) {\n\t\t\t\tLocalCacheData.current_doing_context_action = action;\n\t\t\t}\n\n\t\t\tswitch ( view_id ) {\n\t\t\t\tcase 'TimeSheet':\n\t\t\t\tcase 'Schedule':\n\t\t\t\t\tif ( args.date ) {\n\t\t\t\t\t\tLocalCacheData.current_select_date = args.date;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar timeout_count;\n\t\ttimeout_count = 0;\n\t\tif ( LocalCacheData.loadViewRequiredJSReady ) {\n\t\t\tshowRibbonMenuAndLoadView();\n\t\t} else {\n\t\t\tvar auto_login_timer = setInterval( function() {\n\t\t\t\tif ( timeout_count == 100 ) {\n\t\t\t\t\tclearInterval( auto_login_timer );\n\t\t\t\t}\n\t\t\t\ttimeout_count = timeout_count + 1;\n\t\t\t\tif ( LocalCacheData.loadViewRequiredJSReady ) {\n\t\t\t\t\tshowRibbonMenuAndLoadView();\n\t\t\t\t\tclearInterval( auto_login_timer );\n\t\t\t\t}\n\t\t\t}, 600 );\n\t\t}\n\n\t\tfunction showRibbonMenuAndLoadView() {\n\n\t\t\tIndexViewController.autoLogin( function() {\n\t\t\t\t$( 'body' ).removeClass( 'login-bg' );\n\t\t\t\t// Global.loadStyleSheet( '../../theme/default/portal/css/portal.css' + '?v=' + APIGlobal.pre_login_data.application_build ); // Trialling the loading of this stylesheet earlier, in portal-styles.js to aid with loading screen styling.\n\t\t\t\tGlobal.loadStyleSheet( '../../framework/bootstrap-select/css/bootstrap-select.min.css' + '?v=' + APIGlobal.pre_login_data.application_build );\n\t\t\t\t// $( 'link[title=\"application css\"]' ).prop( 'disabled', true ); // no longer needed as application.css not loaded now. See the lines above on portal.css. Or for context see #2833 and 65ae7d9c1bf7f9e6102e1faf43a989060416fa99\n\t\t\t\tif ( !$this.headerView ) {\n\t\t\t\t\t$this.headerView = new HeaderViewController();\n\t\t\t\t\t$( '#topContainer' ).html( $this.headerView.el );\n\t\t\t\t\tloadViewController();\n\t\t\t\t} else {\n\t\t\t\t\tif ( $this.headerView.profileView && $this.headerView.profileView.is_changed ) {\n\t\t\t\t\t\t$this.showConfirmModal( $.i18n._( 'You have modified data without saving, are you sure you want to continue and lose your changes' ), {\n\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\tactions: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: \"No\", isClose: true, callBack: function( e ) {\n\t\t\t\t\t\t\t\t\t\t$this.navigate( '#!m=MyProfile&company_id=' + LocalCacheData.getAllURLArgs().company_id, {\n\t\t\t\t\t\t\t\t\t\t\ttrigger: false,\n\t\t\t\t\t\t\t\t\t\t\treplace: true\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: 'Yes', callBack: function( e ) {\n\t\t\t\t\t\t\t\t\t\t$this.hideConfirmModal();\n\t\t\t\t\t\t\t\t\t\theaderRender();\n\t\t\t\t\t\t\t\t\t\tloadViewController();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t} );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\theaderRender();\n\t\t\t\t\t\tloadViewController();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction headerRender() {\n\t\t\t$this.headerView.jobVacancyViewController = null;\n\t\t\t$this.headerView.profileView = null;\n\t\t\t$this.headerView.render();\n\t\t}\n\n\t\tfunction loadViewController() {\n\t\t\t//Hard code all view controllers as there is only a few. This avoids Vite's dynamic imports trying to import everything into the bundles.\n\t\t\tsetTimeout( function() {\n\t\t\t\tGlobal.topContainer().css( 'display', 'block' );\n\t\t\t\tGlobal.bottomContainer().css( 'display', 'block' );\n\n\t\t\t\tGlobal.showPoweredBy();\n\t\t\t}.bind( this ), 50 );\n\n\t\t\t// Issue #3432 (Vite) - This is different from how QuickPunch IndexController loads views.\n\t\t\t// In QuickPunch, we do var view_controller = new XXXXViewController(); Here in recruitment, that line works but later in code causes: Uncaught ReferenceError: PortalJobVacancyDetailViewController is not defined.\n\t\t\t// The ViewController is normally instantiated from HTML retrieved from HtmlTemplates.getViewScriptTagHtml() after going through Global.contentContainer().html(template);\n\t\t\t// Tested skipping PortalBaseViewController.loadView() to avoid the exception and handle this more like QuickPunch does, but that results in a blank view.\n\t\t\t// The current working solution is exposing the ViewController on window, but there should be a better way.\n\t\t\t// These ViewControllers are being imported at the top of this file, same as QuickPunch IndexController.\n\t\t\tswitch ( view_id ) {\n\t\t\t\tcase 'PortalJobVacancyDetail':\n\t\t\t\t\twindow.PortalJobVacancyDetailViewController = PortalJobVacancyDetailViewController;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'PortalJobVacancy':\n\t\t\t\t\twindow.PortalJobVacancyViewController = PortalJobVacancyViewController;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'MyProfile':\n\t\t\t\t\twindow.MyProfileViewController = MyProfileViewController;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'MyJobApplication':\n\t\t\t\t\twindow.MyJobApplicationViewController = MyJobApplicationViewController;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tPortalBaseViewController.loadView( view_id );\n\t\t}\n\n\t\tfunction checkIds() {\n\n\t\t\tif ( Global.isArray( LocalCacheData.current_open_primary_controller.current_edit_record ) ) {\n\t\t\t\tfor ( var i = 0; i < LocalCacheData.current_open_primary_controller.current_edit_record.length; i++ ) {\n\t\t\t\t\tvar item = LocalCacheData.current_open_primary_controller.current_edit_record[i];\n\n\t\t\t\t\tif ( item.id === edit_id ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem = LocalCacheData.current_open_primary_controller.current_edit_record;\n\t\t\t\tif ( item.id === edit_id ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction openEditView( edit_id, view_mode ) {\n\t\t\tvar type;\n\t\t\tswitch ( view_id ) {\n\t\t\t\tcase 'MessageControl':\n\t\t\t\t\ttype = args.t;\n\t\t\t\t\tvar item = {};\n\t\t\t\t\tif ( type === 'message' ) {\n\t\t\t\t\t\titem.id = edit_id;\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem.object_id = edit_id;\n\t\t\t\t\t\titem.object_type_id = 50;\n\t\t\t\t\t}\n\t\t\t\t\tLocalCacheData.current_open_primary_controller.onViewClick( item );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'TimeSheet':\n\t\t\t\t\ttype = args.t;\n\n\t\t\t\t\tif ( !view_mode ) {\n\t\t\t\t\t\tif ( edit_id ) {\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.onEditClick( edit_id, type );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.onAddClick();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( edit_id ) {\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.onViewClick( edit_id, type );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( !view_mode ) {\n\t\t\t\t\t\tif ( edit_id ) {\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.onEditClick( edit_id );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.onAddClick();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( edit_id ) {\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.onViewClick( edit_id );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/* jshint ignore:end */\n\n\tcleanAnySubViewUI() {\n\t\tvar children = Global.contentContainer().children();\n\n\t\tif ( children.length > 1 ) {\n\t\t\tfor ( var i = 1; i < children.length; i++ ) {\n\t\t\t\t// Object doesn't support property or method 'remove', Not sure why, add try catch to ingore this error since this should no harm\n\t\t\t\ttry {\n\n\t\t\t\t\tif ( $( children[i] ).attr( 'id' ) === LocalCacheData.current_open_primary_controller.ui_id ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchildren[i].remove();\n\t\t\t\t\t}\n\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t//Do nothing\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n\n\tsetContentDivHeight() {\n\t\tGlobal.contentContainer().removeClass( 'content-container' );\n\t\tGlobal.contentContainer().addClass( 'content-container-after-login' );\n\t\tGlobal.topContainer().addClass( 'top-container-after-login' );\n\n\t}\n\n\taddTopMenu() {\n\t\tGlobal.loadScript( 'global/widgets/top_menu/TopMenuController.js' );\n\t\tif ( TopMenuController ) {\n\t\t\tTopMenuController.loadView();\n\t\t}\n\n\t}\n\n\tshowFormModal( element, options ) {\n\t\tvar $this = this;\n\t\tif ( $( '#formModal' ).hasClass( 'show' ) ) {\n\t\t\tthis.hideFormModal();\n\t\t\tsetTimeout( function() {\n\t\t\t\tdoNext();\n\t\t\t}, 500 );\n\t\t} else {\n\t\t\tdoNext();\n\t\t}\n\n\t\tfunction doNext() {\n\t\t\t!options && ( options = { title: '...', actions: [] } );\n\t\t\tif ( $( '#formModal' ).length > 0 ) {\n\t\t\t\tvar formModal = new bootstrap.Modal( document.getElementById( 'formModal' ), {\n\t\t\t\t\tbackdrop: 'static'\n\t\t\t\t} );\n\t\t\t\tformModal.show();\n\t\t\t}\n\t\t\t$( '#formModalLabel' ).text( options.title );\n\t\t\t$( '#formModalBody' ).html( element );\n\t\t\tif ( options.actions.length > 0 ) {\n\t\t\t\t$( '#formModalFooter' ).empty();\n\t\t\t\t$.each( options.actions, function( index, item ) {\n\t\t\t\t\tvar button = $( '<button type=\"button\" class=\"btn\"></button>' );\n\t\t\t\t\titem.isClose && button.attr( 'data-bs-dismiss', 'modal' );\n\t\t\t\t\tbutton.text( item.label );\n\t\t\t\t\titem.class && button.addClass( item.class );\n\t\t\t\t\t!item.class && button.addClass( 'btn-primary' );\n\t\t\t\t\tif ( item.callBack ) {\n\t\t\t\t\t\tif ( item.isClose ) {\n\t\t\t\t\t\t\t$( '#formModal button.close' ).unbind( 'click' ).bind( 'click', item.callBack.bind( self ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbutton.unbind( 'click' ).bind( 'click', item.callBack.bind( self ) );\n\t\t\t\t\t}\n\t\t\t\t\t$( '#formModalFooter' ).append( button );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tlet file_input = $( '#formModal' ).find( '#inputFile' );\n\t\t\tif ( file_input.length > 0 ) {\n\t\t\t\tfile_input.unbind( 'change' ).bind( 'change', function( event ) {\n\t\t\t\t\tlet file_name = $( '#formModal' ).find( '#file_name' );\n\t\t\t\t\tif ( file_name.length > 0 ) {\n\t\t\t\t\t\tfile_name.val( event.target.files[0].name );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\tshowTipModal( element, options ) {\n\t\tvar $this = this;\n\t\tif ( $( '#tipModal' ).hasClass( 'show' ) ) {\n\t\t\tthis.hideTipModal();\n\t\t\tsetTimeout( function() {\n\t\t\t\tdoNext();\n\t\t\t}, 500 );\n\t\t} else {\n\t\t\tdoNext();\n\t\t}\n\n\t\tfunction doNext() {\n\t\t\t!options && ( options = { title: '...', actions: [], style: {} } );\n\t\t\t$( '#tipModal .modal-content' ).css( options.style );\n\t\t\tif ( $( '#tipModal' ).length > 0 ) {\n\t\t\t\tvar tipModal = new bootstrap.Modal( document.getElementById( 'tipModal' ) );\n\t\t\t\ttipModal.show();\n\t\t\t}\n\t\t\t$( '#tipModalBody' ).html( element );\n\t\t\t$this.autoHideTipModal();\n\t\t}\n\t}\n\n\tshowConfirmModal( element, options ) {\n\t\tvar $this = this;\n\t\tif ( $( '#confirmModal' ).is( ':visible' ) ) {\n\t\t\tthis.hideConfirmModal();\n\t\t\tsetTimeout( function() {\n\t\t\t\tdoNext();\n\t\t\t}, 500 );\n\t\t} else {\n\t\t\tdoNext();\n\t\t}\n\n\t\tfunction doNext() {\n\t\t\t!options && ( options = { title: '...', actions: [] } );\n\t\t\tif ( $( '#confirmModal' ).length > 0 ) {\n\t\t\t\tvar confirmModal = new bootstrap.Modal( document.getElementById( 'confirmModal' ), {\n\t\t\t\t\tbackdrop: 'static'\n\t\t\t\t} );\n\t\t\t\tconfirmModal.show();\n\t\t\t}\n\t\t\t$( '#confirmModalLabel' ).text( options.title );\n\t\t\t$( '#confirmModalBody' ).html( element );\n\t\t\tif ( options.actions.length > 0 ) {\n\t\t\t\t$( '#confirmModalFooter' ).empty();\n\t\t\t\t$.each( options.actions, function( index, item ) {\n\t\t\t\t\tvar button = $( '<button type=\"button\" class=\"btn\"></button>' );\n\t\t\t\t\titem.isClose && button.attr( 'data-bs-dismiss', 'modal' );\n\t\t\t\t\tbutton.text( item.label );\n\t\t\t\t\titem.class && button.addClass( item.class );\n\t\t\t\t\t!item.class && button.addClass( 'btn-primary' );\n\t\t\t\t\tif ( item.callBack ) {\n\t\t\t\t\t\tbutton.unbind( 'click' ).bind( 'click', item.callBack.bind( self ) );\n\t\t\t\t\t}\n\t\t\t\t\t$( '#confirmModalFooter' ).append( button );\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\tshowSignInModal( element, options ) {\n\t\tvar $this = this;\n\t\tif ( $( '#signinModal' ).hasClass( 'show' ) ) {\n\t\t\tthis.hideSignInModal();\n\t\t\tsetTimeout( function() {\n\t\t\t\tdoNext();\n\t\t\t}, 500 );\n\t\t} else {\n\t\t\tdoNext();\n\t\t}\n\n\t\tfunction doNext() {\n\t\t\t!options && ( options = { title: '...', actions: [] } );\n\t\t\tif ( $( '#signinModal' ).length > 0 ) {\n\t\t\t\tvar signinModal = new bootstrap.Modal( document.getElementById( 'signinModal' ), {\n\t\t\t\t\tbackdrop: 'static'\n\t\t\t\t} );\n\t\t\t\tsigninModal.show();\n\t\t\t}\n\t\t\t$( '#signinModalLabel' ).text( options.title );\n\t\t\t$( '#signinModalBody' ).html( element );\n\t\t\tif ( options.actions.length > 0 ) {\n\t\t\t\t$( '#signinModalFooter' ).empty();\n\t\t\t\t$.each( options.actions, function( index, item ) {\n\t\t\t\t\tvar button = $( '<button type=\"button\" class=\"btn\"></button>' );\n\t\t\t\t\titem.isClose && button.attr( 'data-bs-dismiss', 'modal' );\n\t\t\t\t\tbutton.text( item.label );\n\t\t\t\t\titem.class && button.addClass( item.class );\n\t\t\t\t\t!item.class && button.addClass( 'btn-primary' );\n\t\t\t\t\tif ( item.callBack ) {\n\t\t\t\t\t\tif ( item.isClose ) {\n\t\t\t\t\t\t\t$( '#signinModal button.close' ).unbind( 'click' ).bind( 'click', item.callBack.bind( self ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbutton.unbind( 'click' ).bind( 'click', item.callBack.bind( self ) );\n\t\t\t\t\t}\n\t\t\t\t\t$( '#signinModalFooter' ).append( button );\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\tautoHideTipModal() {\n\t\tvar $this = this;\n\t\tsetTimeout( function() {\n\t\t\t$this.hideTipModal();\n\t\t}, 5000 );\n\t}\n\n\thideTipModal() {\n\t\tvar tipModal = bootstrap.Modal.getInstance( document.getElementById( 'tipModal' ) );\n\t\tif ( tipModal ) {\n\t\t\ttipModal.hide();\n\t\t}\n\t}\n\n\thideFormModal() {\n\t\tvar formModal = bootstrap.Modal.getInstance( document.getElementById( 'formModal' ) );\n\t\tif ( formModal ) {\n\t\t\tformModal.hide();\n\t\t}\n\t}\n\n\thideSignInModal() {\n\t\tvar signinModal = bootstrap.Modal.getInstance( document.getElementById( 'signinModal' ) );\n\t\tif ( signinModal ) {\n\t\t\tsigninModal.hide();\n\t\t}\n\t}\n\n\thideConfirmModal() {\n\t\tvar confirmModal = bootstrap.Modal.getInstance( document.getElementById( 'confirmModal' ) );\n\t\tif ( confirmModal ) {\n\t\t\tconfirmModal.hide();\n\t\t}\n\t}\n\n\tremoveCurrentView( callBack ) {\n\t\tif ( LocalCacheData.current_open_edit_only_controller ) {\n\t\t\tclean( LocalCacheData.current_open_edit_only_controller );\n\t\t\tLocalCacheData.current_open_edit_only_controller = null;\n\t\t}\n\n\t\tif ( LocalCacheData.current_open_primary_controller ) {\n\t\t\tif ( LocalCacheData.current_open_primary_controller.edit_view ) {\n\t\t\t\tclean( LocalCacheData.current_open_primary_controller );\n\t\t\t}\n\t\t\tGlobal.contentContainer().empty();\n\t\t\tLocalCacheData.current_open_primary_controller.cleanWhenUnloadView( callBack );\n\t\t} else {\n\n\t\t\tif ( Global.isSet( callBack ) ) {\n\t\t\t\tcallBack();\n\t\t\t}\n\t\t}\n\n\t\tfunction clean( viewController ) {\n\t\t\tviewController.clearErrorTips();\n\t\t\t// Cannot read property 'remove' of null in interface/html5/IndexController.js?v=9.0.0-20151016-153057 line 439\n\t\t\tif ( viewController.edit_view ) {\n\t\t\t\tviewController.edit_view.remove();\n\t\t\t}\n\t\t\tviewController.sub_log_view_controller = null;\n\t\t\tviewController.edit_view_ui_dic = {};\n\t\t\tviewController.edit_view_ui_validation_field_dic = {};\n\t\t\tviewController.edit_view_form_item_dic = {};\n\t\t\tviewController.edit_view_error_ui_dic = {};\n\t\t\tLocalCacheData.current_doing_context_action = '';\n\t\t}\n\t}\n\n}\n\nexport class IndexViewController extends Backbone.View {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: 'body', //So we can add event listener for all elements\n\t\t\trouter: null,\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinitialize( options ) {\n\t\tthis.router = new ApplicationRouter();\n\n\t\t//Set title in index.php instead.\n\t\t//$( 'title' ).html( '' );\n\n\t\tthis.router.controller = this;\n\t\t//Error: Backbone.history has already been started in interface/html5/framework/backbone/backbone-min.js?v=9.0.1-20151022-162110 line 28\n\t\tif ( !Backbone.History.started ) {\n\t\t\tBackbone.history.start();\n\t\t}\n\n\t\tIndexViewController.instance = this;\n\n\t}\n\n}\n\nIndexViewController.autoLogin = function( callback ) {\n\tvar session_cookie = getCookie( Global.getSessionIDKey() );\n\tvar login_data = LocalCacheData.getLoginData();\n\tif ( session_cookie && session_cookie.length >= 40 && login_data && login_data.is_logged_in == true ) {\n\t\t//Setup user data when browser is refreshed and they are already logged in.\n\t\tIndexViewController.setPortalLoginUserData( session_cookie, callback );\n\t} else {\n\t\tcallback();\n\t}\n};\n\nIndexViewController.setPortalLoginUserData = function( session_id, callback ) {\n\t//Setup Job Appicant data upon login.\n\tif ( LocalCacheData.getPortalLoginUser() === null ) {\n\t\tvar $this = this;\n\n\t\tLocalCacheData.setSessionID( session_id );\n\t\tsetCookie( Global.getSessionIDKey(), session_id );\n\n\t\tthis.doing_login = true;\n\n\t\tthis.jobapplicant_api = TTAPI.APIJobApplicantPortal;\n\t\tthis.jobapplicant_api.getJobApplicant( {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\tLocalCacheData.setPortalLoginUser( result.getResult()[0] );\n\t\t\t\t}\n\n\t\t\t\t$this.doing_login = false;\n\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t} else {\n\t\tcallback();\n\t}\n};\n\nIndexViewController.goToView = function( view_name, filter ) {\n\n\t$( '#' + view_name ).addClass( 'selected-menu' );\n\tLocalCacheData.default_filter_for_next_open_view = filter;\n\n\t// TopMenuManager.goToView( view_name, true );\n\tMenuManager.goToView( view_name, true );\n\n};\n\nIndexViewController.goToViewByViewLabel = function( view_label ) {\n\tvar view_name;\n\tswitch ( view_label ) {\n\t\tcase 'Exceptions':\n\t\t\tview_name = 'Exception';\n\t\t\tbreak;\n\t\tcase 'Messages':\n\t\t\tview_name = 'MessageControl';\n\t\t\tbreak;\n\t\tcase 'Requests':\n\t\t\tview_name = 'Request';\n\t\t\tbreak;\n\t\tcase 'Contact Information':\n\t\t\tIndexViewController.openEditView( LocalCacheData.current_open_primary_controller, 'LoginUserContact' );\n\t\t\treturn;\n\t\tdefault:\n\t\t\tvar reg = /\\s/g;\n\t\t\tview_name = view_label.replace( reg, '' );\n\t\t\tbreak;\n\t}\n\n\tMenuManager.goToView( view_name, true );\n\n};\n\nIndexViewController.openWizard = function( wizardName, defaultData, callBack ) {\n\tBaseWizardController.default_data = defaultData;\n\tBaseWizardController.call_back = callBack;\n\tswitch ( wizardName ) {\n\t\tdefault:\n\t\t\t// track edit view only view\n\t\t\tGlobal.trackView( wizardName );\n\t\t\tGlobal.loadViewSource( wizardName, wizardName + 'Controller.js', function() {\n\t\t\t\tBaseWizardController.openWizard( wizardName, wizardName + '.html' );\n\t\t\t} );\n\t\t\tbreak;\n\t}\n\n};\n\nIndexViewController.openReport = function( parent_view_controller, view_name, id ) {\n\tvar view_controller = null;\n\n\tif ( LocalCacheData.current_open_report_controller ) {\n\t\tLocalCacheData.current_open_report_controller.removeEditView();\n\t}\n\n\tProgressBar.showOverlay();\n\n\tswitch ( view_name ) {\n\t\tdefault:\n\t\t\tGlobal.loadViewSource( view_name, view_name + 'ViewController.js', function() {\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tview_controller = eval( 'new ' + view_name + 'ViewController( {edit_only_mode: true} ); ' );\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tview_controller.parent_view_controller = parent_view_controller;\n\t\t\t\tview_controller.openEditView();\n\n\t\t\t\tvar current_url = window.location.href;\n\t\t\t\tif ( current_url.indexOf( '&sm' ) > 0 ) {\n\t\t\t\t\tcurrent_url = current_url.substring( 0, current_url.indexOf( '&sm' ) );\n\t\t\t\t}\n\t\t\t\tcurrent_url = current_url + '&sm=' + view_name;\n\n\t\t\t\tif ( LocalCacheData.default_edit_id_for_next_open_edit_view ) {\n\t\t\t\t\tcurrent_url = current_url + '&sid=' + LocalCacheData.default_edit_id_for_next_open_edit_view;\n\t\t\t\t}\n\t\t\t\tGlobal.setURLToBrowser( current_url );\n\n\t\t\t} );\n\t\t\tbreak;\n\t}\n\n};\n\n//Open edit view\nIndexViewController.openEditView = function( parent_view_controller, view_name, id ) {\n\tvar view_controller = null;\n\n\tif ( !PermissionManager.checkTopLevelPermission( view_name ) && view_name !== 'map' ) {\n\t\tTAlertManager.showAlert( 'Permission denied' );\n\t\treturn;\n\t}\n\n\t//Merge conflict from RecruitmentPortal. This seemed to have removed the permission check, but that would break the application UI?\n\t//if ( LocalCacheData.current_open_edit_only_controller ) {\n\t//\tLocalCacheData.current_open_edit_only_controller.onCancelClick();\n\t//}\n\n\t// track edit view only view\n\tGlobal.trackView( view_name );\n\n\tswitch ( view_name ) {\n\n\t\tdefault:\n\t\t\tGlobal.loadViewSource( view_name, view_name + 'ViewController.js', function() {\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tview_controller = eval( 'new ' + view_name + 'ViewController( {edit_only_mode: true} ); ' );\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tview_controller.parent_view_controller = parent_view_controller;\n\t\t\t\tview_controller.openEditView( id );\n\n\t\t\t\tvar current_url = window.location.href;\n\t\t\t\tif ( current_url.indexOf( '&sm' ) > 0 ) {\n\t\t\t\t\tcurrent_url = current_url.substring( 0, current_url.indexOf( '&sm' ) );\n\t\t\t\t}\n\t\t\t\tif ( id ) {\n\t\t\t\t\tcurrent_url = current_url + '&sm=' + view_name + '&sid=' + id;\n\t\t\t\t} else {\n\t\t\t\t\tcurrent_url = current_url + '&sm=' + view_name;\n\t\t\t\t}\n\n\t\t\t\tGlobal.setURLToBrowser( current_url );\n\n\t\t\t\tLocalCacheData.current_open_edit_only_controller = view_controller;\n\n\t\t\t} );\n\t\t\tbreak;\n\n\t}\n\n};\n\nIndexViewController.instance = null;","import * as bootstrap from 'bootstrap';\nimport { TTBackboneView } from '@/views/TTBackboneView';\nimport { TTAPI } from '@/services/TimeTrexClientAPI';\nimport { IndexViewController} from '@/portal/recruitment/IndexController'; // For the reference in the html file PortalJobVacancyView.html loaded from this file.\nimport { PortalJobVacancyRowController } from '@/views/portal/hr/recruitment/PortalJobVacancyRowController';\n\nexport class PortalBaseViewController extends TTBackboneView {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tcan_cache_controller: true, //if allow to cache current controller\n\t\t\tpager_data: null,\n\t\t\t// required_files: [],\n\n\t\t\tevents: {\n\t\t\t\t'click .search-btn': 'onSearchClick',\n\t\t\t\t'change select[id=\"country\"]': 'onCountryChange',\n\t\t\t\t// 'click .more': 'loadMore'\n\t\t\t\t// 'click .styled-select .glyphicon': 'onSelectClick',\n\t\t\t\t'keydown input[id=\"name\"]': 'autoSearch',\n\t\t\t\t// 'change select[id=\"province\"]': 'onSearchClick',\n\t\t\t\t'keydown input[id=\"city\"]': 'autoSearch'\n\t\t\t}\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinitialize( options ) {\n\t\twindow.bootstrap = bootstrap;\n\t\tsuper.initialize( options );\n\n\t\tthis.preInit( options );\n\n\t\t// __non_webpack_require__( this.getRequiredFiles(), function() {\n\t\tthis.company_api = TTAPI.APICompanyPortal;\n\t\tLocalCacheData.current_open_primary_controller = this;\n\t\tthis.init();\n\t\tthis.postInit( options );\n\t\t// } );\n\t}\n\n\t// getRequiredFiles() {\n\t// \t//override in child class\n\t// \treturn this.required_files.concat( this._required_files );\n\t// }\n\n\tpreInit() {\n\t\t//Override in child class.\n\t\treturn;\n\t}\n\n\tinit() {\n\t\t//Override in child class.\n\t\treturn;\n\t}\n\n\tpostInit() {\n\t\t//Override in child class.\n\t\treturn;\n\t}\n\n\trender() {\n\t\tvar $this = this;\n\t\tProgressBar.showOverlay();\n\t\tthis.initOptions( function() {\n\t\t\t$this.search();\n\t\t} );\n\n\t\t$( window ).off( 'scroll' ).on( 'scroll', Global.debounce( function() {\n\t\t\tif ( $this.isOnScreen( '.more.container' ) ) {\n\t\t\t\t$this.loadMore();\n\t\t\t}\n\t\t}, 200 ) );\n\t}\n\n\tisOnScreen( element_id ) {\n\t\tlet element = $( element_id );\n\n\t\tif ( element.length === 0 || !element.is( ':visible' ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet bounding = element[0].getBoundingClientRect();\n\n\t\tif ( bounding.top >= 0 && bounding.left >= 0 && bounding.right <= ( window.innerWidth || document.documentElement.clientWidth ) && bounding.bottom <= ( window.innerHeight || document.documentElement.clientHeight ) ) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tautoSearch( e ) {\n\t\tif ( e.keyCode === 13 ) {\n\t\t\tthis.onSearchClick();\n\t\t}\n\t}\n\n\tinitOptions( callback ) {\n\t\tthis.initCountryOptions( callback );\n\t}\n\n\tinitCountryOptions( callback ) {\n\t\tvar $this = this;\n\t\tthis.company_api.getOptions( 'country', {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result = result.getResult();\n\t\t\t\t$this.$( '#country' ).append( $( '<option></option>' ).prop( 'value', '' ).attr( 'selected', 'selected' ).text( $.i18n._( 'All Countries' ) ) );\n\t\t\t\t$.each( result, function( value, label ) {\n\t\t\t\t\t$this.$( '#country' ).append( $( '<option></option>' ).prop( 'value', value ).text( $.i18n._( label ) ) );\n\t\t\t\t} );\n\t\t\t\t$this.$( '#country' ).selectpicker();\n\t\t\t\t$this.$( '#province' ).selectpicker();\n\t\t\t\tcallback();\n\t\t\t}\n\t\t} );\n\t}\n\n\tonCountryChange() {\n\t\tthis.eSetProvince( this.$( 'select[id=\"country\"]' ).val() );\n\t}\n\n\teSetProvince( val ) {\n\t\tvar $this = this;\n\t\t$this.$( '#province' ).selectpicker( 'destroy' );\n\t\tif ( !val ) {\n\t\t\t$this.$( '#province' ).html( $( '<option></option>' ).prop( 'value', '' ).attr( 'selected', 'selected' ).text( $.i18n._( 'All Province/States' ) ) );\n\t\t\t$this.$( '#province' ).selectpicker();\n\t\t\treturn;\n\t\t}\n\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tresult = result.getResult();\n\t\t\t\tif ( !result ) {\n\t\t\t\t\tresult = [];\n\t\t\t\t}\n\t\t\t\t$this.$( '#province' ).html( $( '<option></option>' ).prop( 'value', '' ).attr( 'selected', 'selected' ).text( $.i18n._( 'All Province/States' ) ) );\n\t\t\t\t$.each( result, function( value, label ) {\n\t\t\t\t\t$this.$( '#province' ).append( $( '<option></option>' ).prop( 'value', value ).text( $.i18n._( label ) ) );\n\t\t\t\t} );\n\t\t\t\t$this.$( '#province' ).selectpicker();\n\t\t\t}\n\t\t} );\n\t}\n\n\tloadMore() {\n\t\tthis.onSearchClick( {\n\t\t\tpage_action: 'next'\n\t\t} );\n\t}\n\n\taddSearchResultPanel() {\n\t}\n\n\tonSearchClick( options ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tthis.addSearchResultPanel();\n\t\t// first load\n\t\tif ( typeof options == 'undefined' ) {\n\t\t\toptions = {};\n\t\t}\n\t\tif ( typeof options.page_action == 'undefined' ) {\n\t\t\tthis.$( '.search-result .content' ).empty();\n\t\t}\n\t\tthis.vacancy_list_panel = this.$( '.search-result .content' );\n\t\tthis.more_btn = this.$( '.search-result .more' );\n\t\tthis.more_btn.unbind( 'click' ).bind( 'click', function() {\n\t\t\t$this.loadMore();\n\t\t} );\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_sort = {};\n\t\tfilter.filter_items_per_page = 0; // Default to 0 to load user preference defined\n\t\t// if ( this.$('#job_title_id').val() && parseInt( this.$('#job_title_id').val() ) > 0  ) {\n\t\t// \tfilter.filter_data['title_id'] = this.$('#job_title_id').val();\n\t\t// }\n\t\tif ( this.$( '#name' ).val() && this.$( '#name' ).val() != '' ) {\n\t\t\tfilter.filter_data['name'] = this.$( '#name' ).val();\n\t\t}\n\t\tif ( this.$( '#country' ).val() && this.$( '#country' ).val() != '' ) {\n\t\t\tfilter.filter_data['country'] = this.$( '#country' ).val();\n\t\t}\n\t\tif ( this.$( '#province' ).val() && this.$( '#province' ).val() != '' ) {\n\t\t\tfilter.filter_data['province'] = this.$( '#province' ).val();\n\t\t}\n\t\tif ( this.$( '#city' ).val() && this.$( '#city' ).val() != '' ) {\n\t\t\tfilter.filter_data['city'] = this.$( '#city' ).val();\n\t\t}\n\t\tif ( this.pager_data ) {\n\t\t\tif ( options.page_action === 'next' ) {\n\t\t\t\tfilter.filter_page = this.pager_data.next_page;\n\t\t\t} else {\n\t\t\t\tfilter.filter_page = 1;\n\t\t\t}\n\t\t} else {\n\t\t\tfilter.filter_page = 1;\n\t\t}\n\n\t\t//If branch_id is specified on the URL, pass that into the filter here as well.\n\t\tif ( LocalCacheData.getAllURLArgs() && LocalCacheData.getAllURLArgs().hasOwnProperty( 'branch_id' ) ) {\n\t\t\tfilter.filter_data['branch_id'] = LocalCacheData.getAllURLArgs().branch_id;\n\t\t}\n\n\t\tthis.api['get' + this.api.key_name]( filter, false, { // paging or none\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.pager_data = result.getPagerData();\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tvar no_result_panel = $this.vacancy_list_panel.find( '.vacancy-list-no-result' );\n\t\t\t\tif ( no_result_panel[0] || ( $this.pager_data && $this.pager_data.is_first_page ) ) {\n\t\t\t\t\t$this.vacancy_list_panel.empty();\n\t\t\t\t}\n\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\tvar no_result_span = $( '<div class=\"vacancy-list-no-result\">' + $.i18n._( 'No Results Found' ) + '</div>' );\n\t\t\t\t\t$this.vacancy_list_panel.html( no_result_span );\n\t\t\t\t} else {\n\t\t\t\t\tfor ( var i = 0; i < result_data.length; i++ ) {\n\t\t\t\t\t\tvar row = result_data[i];\n\t\t\t\t\t\tvar vacancy_model = new Backbone.Model( row );\n\t\t\t\t\t\tvar vacancy_row = new PortalJobVacancyRowController( { model: vacancy_model } );\n\t\t\t\t\t\t$this.vacancy_list_panel.append( vacancy_row.el );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( !$this.pager_data || $this.pager_data.is_last_page || result_data === true ) {\n\t\t\t\t\t$this.more_btn.hide();\n\t\t\t\t} else {\n\t\t\t\t\t$this.more_btn.show();\n\t\t\t\t}\n\t\t\t\tif ( typeof options.callback != 'undefined' ) {\n\t\t\t\t\toptions.callback();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonError: function () {\n\t\t\t\t//Issue #3083 - This search call is being aborted which will result in a blank page if the user quickly goes to \"My Profile\" and logs out immediately.\n\t\t\t\t//In addition, the async calls are being aborted, so we cannot call search again as all future calls are also aborted.\n\t\t\t\t//This is a rare enough scenario that we have opted to do a reload in this specific case.\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSelectClick( e ) {\n\t\tvar elem = $( e.currentTarget ).parent().find( 'select' );\n\t\tif ( document.createEvent ) {\n\t\t\tvar e = document.createEvent( 'MouseEvents' );\n\t\t\te.initMouseEvent( 'mousedown', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null );\n\t\t\telem[0].dispatchEvent( e );\n\t\t} else if ( element.fireEvent ) {\n\t\t\telem[0].fireEvent( 'onmousedown' );\n\t\t}\n\t}\n}\n\nPortalBaseViewController.loadView = function( view_id ) {\n\tGlobal.loadViewSource( view_id, view_id + 'View.html', function( result ) {\n\t\tvar template = _.template( result )();\n\t\twindow.IndexViewController = IndexViewController; // // For the reference in the html file PortalJobVacancyView.html loaded from this file.\n\t\tGlobal.contentContainer().html( template );\n\n\t\tLocalCacheData.current_open_view_id = view_id;\n\n\t\t$( 'div.tooltip' ).remove(); //Issue #2676 - Removing tooltips on page load to prevent validation errors from lingering on screen.\n\n\t\tGlobal.trackView( view_id, LocalCacheData.current_doing_context_action );\n\t} );\n\n};\n"],"names":["options","$this","el","url","IndexViewController","$","e","callback","user_name","password","current_company_result","com_result","session_id","result","message","row","error_list","key","field_obj","error_string","myTooltip","item","tpl","portal_vacancy_url","my_profile_container","dropdown_menus","sign_in_container","SignInController","current_user_api","i","o","s","n","r","t","a","l","applied","user_data","file_name","apply_form","files","data_transfer","detail_panel_header_height","apply_form__header_height","result_data","location","recruitment_api","jobapplicant_api","res","filter","record","content","uploader","file","document_name","document_revision_id","error","file_data","message_id","callBack","data","tooltip","stepsWidgetDic","details","val","tips_to_remove","detail_model","portal_job_vacancy_detail","list_tpl","unique_id","tbody","thead","column","column_val","args","filter_data","elem","field","source_data","set_empty","field_selector","option_name","value","label","format","focus_out_timer","is_open","day_name_min","month_name_short","current_text","close_text","dateText","self","unindexed_array","name","new_id","container","qualification_widget","doNotValidate","clear_all","index","field_control","refresh","first_used_date","last_used_date","experience","document_id","post_data","document_result","form","revision","sections","section","section_available_fields_ids","section_available_fields_id","weeks","sort_array","bootstrap.Tooltip","error_top_object","page","current_target_id","target","history_views","sub_view_id","all_columns","is_enable","method","columns_result","columns_result_data","display_columns","view_data","sub_view_model","view_name","available_fields","enable_add_qualification","controller","column_filter","new_url","viewName","view_id","edit_id","action","openEditView","checkIds","timeout_count","showRibbonMenuAndLoadView","auto_login_timer","loadViewController","headerRender","view_mode","type","children","element","doNext","formModal","button","file_input","event","tipModal","confirmModal","signinModal","clean","viewController","session_cookie","login_data","view_label","reg","wizardName","defaultData","bootstrap","element_id","bounding","no_result_panel","vacancy_model","vacancy_row","no_result_span","template"],"mappings":"2oBAQO,cAA+B,wBAAyB,CAC9D,YAAaA,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CACpB,YAAa,GACb,uBAAwB,CAAE,EAE1B,UAAW,KACX,OAAQ,CACP,yBAA0B,qBAC1B,CACJ,GAEE,MAAOA,CAAO,CACd,CAED,KAAMA,EAAU,CACf,IAAIC,EAAQ,KACZA,EAAM,gBAAkB,MAAM,6BAC9BA,EAAM,iBAAmB,MAAM,sBAC/BA,EAAM,mBAAqB,MAAM,kBAEjC,IAAIC,EAAK,OAAO,WAAY,kCAAkC,EAC9DD,EAAM,WAAY,EAAE,SAAUC,CAAE,EAAI,CAAA,EACpCD,EAAM,UAAYA,EAAM,EAAG,YAAY,EACvCA,EAAM,SAAWA,EAAM,EAAG,WAAW,EAChC,OAAO,MAAOD,CAAS,GAAI,OAAO,MAAOA,EAAQ,aACrDC,EAAM,UAAYD,EAAQ,WAEtB,eAAe,gBAAgB,KAAO,iBAAmB,eAAe,cAAa,EAAG,KAAO,eAAe,cAAa,EAAG,WACjG,IAAI,oCAAqC,CACzE,SAAU,UAAW,CACpB,eAAe,cAAe,EAAE,KAAM,eAAe,cAAe,EAAE,IAAI,GAC1E,eAAe,cAAe,EAAE,KAAM,eAAe,cAAe,EAAE,KAAK,GAE3E,IAAIG,EAAM,OAAO,WAAY,KAAM,GAAM,EAAI,EAAG,QAAQ,gBAAiB,wBAAwB,EAAE,QAAS,OAAO,WAAY,KAAM,GAAM,EAAK,EAAI,IACpJC,sBAAoB,SAAS,OAAO,SAAUD,EAAK,CAClD,QAAS,GACT,QAAS,EACf,GACKF,EAAM,aAAcI,OAAE,KAAK,EAAG,2DAA2D,EACzF,CACL,CAAO,EAGJJ,EAAM,OAAM,CAGb,CAED,QAAS,CACR,IAAIA,EAAQ,KACZ,eAAe,aAAc,IAC7B,KAAK,UAAU,QACf,KAAK,SAAS,OAAQ,SAAW,EAAC,KAAM,UAAW,SAAUK,EAAI,CAC3DA,EAAE,UAAY,IAClBL,EAAM,gBAAe,CAEzB,GACO,eAAe,cAAe,EAAC,WACnC,KAAK,UAAU,IAAK,eAAe,cAAa,EAAG,WAE/C,eAAe,cAAe,EAAC,UACnC,KAAK,SAAS,IAAK,eAAe,cAAa,EAAG,UAEnD,KAAK,gBAAe,CACpB,CAED,iBAAkB,CACjB,IAAIA,EAAQ,KACZG,sBAAoB,SAAS,OAAO,gBAAiB,KAAK,IAAK,CAC9D,MAAOC,OAAE,KAAK,EAAG,SAAW,EAC5B,QAAS,CACR,CAAE,MAAOA,OAAE,KAAK,EAAG,QAAU,EAAE,QAAS,EAAM,EAC9C,CACC,MAAOA,OAAE,KAAK,EAAG,WAAa,SAAU,SAAUC,EAAI,CACrDL,EAAM,gBAAe,CACrB,CACD,CACD,CACJ,EACE,CAED,gBAAiBM,EAAW,CACtBA,GACJF,OAAG,cAAgB,EAAC,OAAQ,iBAAmB,EAAC,KAAM,kBAAmB,SAAUC,EAAI,CACtFC,GACJ,GAEEH,sBAAoB,SAAS,OAAO,iBACpC,CAED,qBAAsB,CAErB,KAAK,gBAAiB,UAAW,CACJ,IAAI,+BAChCC,OAAG,cAAc,EAAG,OAAQ,iBAAiB,CAChD,EACE,CAED,iBAAkB,CACjB,IAAIG,EAAY,KAAK,UAAU,IAAG,EAC9BC,EAAW,KAAK,SAAS,IAAG,EAC5BR,EAAQ,KACZ,GAAK,CAAC,KAAK,YACV,KAAK,YAAc,OAEnB,QAGD,KAAK,gBAAgB,MAAOO,EAAWC,EAAU,CAChD,SAAU,SAAUH,EAAI,CACvBL,EAAM,eAAgBK,GACtBL,EAAM,qBAAoB,CAC1B,EAAE,SAAU,IAChB,EACE,CAED,sBAAuB,CAEtB,KAAK,mBAAmB,kBAAmB,CAC1C,SAAU,SAAUS,EAAyB,CAC5C,IAAIC,EAAaD,EAAuB,YACxC,eAAe,kBAAmBC,EAClC,CACJ,EACE,CAED,eAAgB,EAAGC,EAAa,CAC/B,IAAIC,EACAZ,EAAQ,KACNW,EAGLC,EAASD,EAFTC,EAAS,EAAE,YAKZ,eAAe,uBAAwB,MAElC,GAAK,CAAC,EAAE,WACZ,eAAe,aAAc,IAC7B,aAAc,OAAO,gBAAe,GAE/B,EAAE,WAAY,EAAC,CAAC,EAAE,eAAgB,aACtCZ,EAAM,gBAAe,EACrBA,EAAM,SAAS,IAAK,IACpBG,sBAAoB,WAAY,sBAAuB,CACtD,UAAWH,EAAM,UAAU,IAAK,EAChC,UAAW,MAAM,6BACjB,QAAS,EAAE,mBAAoB,CACpC,EAAO,UAAW,CACbA,EAAM,aAAcI,OAAE,KAAK,EAAG,2DAA2D,EAC9F,IAKI,KAAK,aAAc,GAGpBJ,EAAM,YAAc,KAEpB,KAAK,eAAc,EACnB,cAAc,iBAAmB,GAEjCG,sBAAoB,uBAAwBS,EAAQ,UAAW,CAC9DT,sBAAoB,SAAS,OAAO,WAAW,OAAM,EAChDH,EAAM,WACVA,EAAM,UAAU,SAEjBA,EAAM,gBAAe,EAErBA,EAAM,YAAc,EACxB,GAEE,CAED,aAAca,EAAU,CAClB,OAAO,KAAK,EAAG,QAAQ,EAAG,CAAC,EAAM,KACrC,KAAK,EAAG,QAAU,EAAC,OAAM,EAE1B,IAAIC,EAAM,OAAO,WAAY,+BAA+B,EAC5D,KAAK,EAAG,cAAgB,EAAC,OAAQA,CAAG,EACpC,KAAK,EAAG,QAAU,EAAC,OAAQ,MAAQD,EAAU,QAC7C,KAAK,gBAAe,CACpB,CAED,aAAa,EAAG,CACf,IAAIE,EAAa,EAAE,WAAY,EAAG,EAAE,WAAY,EAAC,CAAC,EAAI,GAClDA,GAAcA,EAAW,eAAe,OAAO,IAClDA,EAAaA,EAAW,OAEzB,QAASC,KAAOD,EACf,GAAKA,EAAW,eAAeC,CAAG,EAGlC,KAAIC,EAIJ,GAHI,SAAS,eAAeD,CAAG,IAC9BC,EAAY,SAAS,eAAeD,CAAG,GAEpCC,EAAW,CACdA,EAAU,UAAU,IAAI,WAAW,EACnC,IAAIC,EACA,EAAE,QAAQH,EAAWC,CAAG,CAAC,EAC5BE,EAAeH,EAAWC,CAAG,EAAE,CAAC,EAEhCE,EAAeH,EAAWC,CAAG,EAE9B,IAAIG,EAAY,IAAI,UAAU,QAAQF,EAAW,CAChD,MAAOC,CACZ,CAAK,EACDC,EAAU,KAAI,EACd,KAAK,uBAAuBH,CAAG,EAAIG,CACnC,EAEF,CAED,gBAAiB,CAChB,OAAO,gBAAiB,OAAO,OAAQ,KAAK,sBAAsB,EAAG,IAAKC,GAAQA,EAAK,CAAC,CAAG,EAAE,EAAI,EACjG,KAAK,uBAAyB,EAC9B,CAEF,0JC/NO,MAAM,6BAA6B,cAAe,CACxD,YAAarB,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CACpB,OAAQ,CACP,8BAA+B,gBAC/B,+BAAgC,WAChC,gCAAiC,WAEjC,CACJ,GAEE,MAAOA,CAAO,CACd,CAED,WAAYA,EAAU,CACrB,MAAM,WAAYA,GAClB,IAAIG,EACAH,EAAU,CAAA,EACT,eAAe,cAAe,EAAC,WACnCG,EAAM,cAAc,UAAW,qDAA6D,eAAiB,eAAe,cAAe,EAAC,WAE5IA,EAAM,oDAEP,IAAImB,EAAM,OAAO,WAAY,qCAAqC,EAClE,IAAIC,EAAqB,OAAO,WAAY,EAAG,mCAAqC,eAAe,cAAe,EAAC,WACnH,KAAK,WAAY,EAAE,SAAUD,CAAK,EAAE,CAAE,aAAcnB,EAAK,oBAAqBoB,CAAkB,CAAI,CAAA,EACpG,KAAK,mBAAqB,KAC1B,KAAK,YAAc,KACnB,KAAK,2BAA6B,KAClC,KAAK,yBAA2B,KAChC,KAAK,OAAM,CACX,CAED,QAAS,CAER,GAAM,eAAe,qBAMd,CACN,IAAIC,EAAuBnB,OAAG,gCAC9BmB,EAAqB,OAAQ,2IAA6I,eAAe,mBAAkB,EAAG,WAAa,IAAM,eAAe,mBAAkB,EAAG,UAAY,oCAAoC,EACrT,IAAIC,EAAiBpB,OAAG,wEACxBoB,EAAe,OAAQ,8CAA+CpB,OAAE,KAAK,EAAG,cAAgB,aAChGoB,EAAe,OAAQ,6CAA8CpB,OAAE,KAAK,EAAG,YAAc,aAC7FmB,EAAqB,OAAQC,GAC7B,KAAK,EAAG,gBAAkB,EAAC,KAAMD,CAAoB,CACrD,KAd2C,CAC3C,IAAIE,EAAoBrB,OAAG,yBAC3BqB,EAAkB,KAAM,OAAQ,gBAChCA,EAAkB,OAAQrB,OAAG,OAAO,EAAG,KAAM,MAAO,mDAAmD,GACvGqB,EAAkB,OAAQrB,OAAG,UAAW,KAAMA,OAAE,KAAK,EAAG,SAAS,CAAI,CAAA,EACrE,KAAK,EAAG,gBAAkB,EAAC,KAAMqB,CAAiB,CACrD,CASE,CAED,eAAgB,CACO,IAAIC,mBAAkB,CAC3C,UAAW,KAAK,0BACnB,CAAM,CAKJ,CAED,UAAW,CACV,KAAK,eAAc,EACnB,IAAI1B,EAAQ,KACR2B,EAAmB,MAAM,6BAC7BA,EAAiB,OAAQ,CACxB,SAAU,SAAUf,EAAS,CAK5B,GAJA,aAAc,OAAO,gBAAe,GACpC,eAAe,mBAAoB,IACnC,eAAe,qBAAuB,GAEjCZ,EAAM,yBACVA,EAAM,OAAM,UAEP,OAAO,SAAS,KAAK,QAAQ,uBAAuB,IAAM,GAC9D,oBAAoB,SAAS,OAAO,WAAW,OAAM,MAC/C,CACN,IAAIE,EAAM,OAAO,WAAY,KAAM,GAAM,EAAI,EAAG,QAAQ,gBAAiB,wBAAwB,EAAE,QAAS,OAAO,WAAY,KAAM,GAAM,EAAK,EAAI,IACpJ,oBAAoB,SAAS,OAAO,SAAUA,EAAK,CAClD,QAAS,GACT,QAAS,EAChB,EACM,CAEF,CACJ,EACE,CAGD,gBAAiB,CAEhB,OAAO,gBAAiB,SAAS,iBAAkB,YAAY,EAAI,GACnE,CAED,WAAY,CACX,OAAO,SAAW,OAAO,WAAY,KAAM,GAAM,EAAI,EAAG,QAAQ,gBAAiB,iBAAiB,EAAE,QAAS,aAAc,EAAE,CAC7H,CAED,cAAe,CACd,IAAIF,EAAQ,KACN,eAAe,sBAOd,KAAK,qBACV,KAAK,mBAAqB,IAAI,yBAA0B,CACvD,YAAaA,EAAM,WACxB,IAEG,KAAK,mBAAmB,UAPxB,KAAK,cAAa,CASnB,CACF,8IC1HA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAOA,OAAO,2BAA2B,SAAS4B,EAAE,CAAC,IAAI,EAAE,CAAC,cAAc,CAAC,UAAU,CAAC,GAAGA,EAAE,2DAA2D,EAAE,GAAGA,EAAE,2DAA2D,EAAE,GAAGA,EAAE,2DAA2D,EAAE,GAAGA,EAAE,2DAA2D,CAAC,EAAE,WAAW,CAAC,MAAMA,EAAE,mDAAmD,EAAE,OAAOA,EAAE,oDAAoD,EAAE,MAAMA,EAAE,mDAAmD,EAAE,OAAOA,EAAE,oDAAoD,CAAC,CAAC,EAAE,mBAAmB,UAAU,CAACA,EAAE,QAAQ,EAAE,MAAM,UAAU,CAACA,EAAE,KAAKC,EAAE,YAAY,SAASD,EAAE,CAACC,EAAE,YAAYD,CAAC,EAAE,SAAS,+BAA+B,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,eAAe,SAASA,EAAE,CAAC,OAAWA,EAAE,OAAO,CAAC,GAAf,KAAuBA,EAAE,OAAO,CAAC,GAAf,GAAgB,EAAE,gBAAgB,SAASA,EAAE,CAAC,IAAIvB,EAAEuB,EAAE,OAAO,CAAC,EAAEC,EAAOD,EAAE,OAAO,CAAC,GAAf,IAAiBE,EAAE,GAAGD,EAAE,EAAE,GAAG,EAAED,EAAE,MAAME,CAAC,EAAE,MAAM,CAAC,SAASzB,EAAE,QAAQwB,EAAE,eAAe,CAAC,CAAC,EAAE,YAAY,SAASxB,EAAE,CAAC,IAAIyB,EAAE,GAAG,OAAOF,EAAE,KAAKvB,EAAE,SAASuB,EAAEvB,EAAE,CAAC,OAAOwB,EAAE,YAAYxB,CAAC,EAAE,GAAG,UAAU,GAAGyB,EAAE,GAAG,IAAI,MAAM,CAAC,EAAEA,CAAC,EAAE,qBAAqB,SAASF,EAAE,CAAC,IAAIE,EAAE,EAAE,gBAAgBF,CAAC,EAAEG,EAAE,OAAO,KAAKF,EAAE,WAAW,EAAEG,EAAED,EAAE,QAAQD,EAAE,cAAc,EAAE,GAAQE,IAAL,GAAO,CAAC,IAAIC,EAAE,EAAEC,EAAE,EAAOJ,EAAE,UAAP,MAAkBG,EAAE,EAAEC,EAAEJ,EAAE,QAAQ,EAAEE,EAAEA,GAAQF,EAAE,UAAP,MAAkBG,EAAEH,EAAE,QAAQE,EAAE,EAAEA,EAAEE,EAAE,QAAQ,IAAIC,EAAEJ,EAAE,MAAME,EAAEC,CAAC,EAAE,OAAO,EAAE,YAAYC,CAAC,CAAC,CAAC,CAAC,EAAEN,EAAE,CAAC,SAAS,IAAI,UAAU,KAAK,YAAY,KAAK,GAAG,SAASD,EAAE,CAAC,OAAO,EAAE,eAAeA,CAAC,EAAE,EAAE,qBAAqBA,CAAC,EAAEC,EAAE,YAAYD,CAAC,GAAGC,EAAE,YAAYD,CAAC,EAAE,GAAG,UAAU,CAAC,EAAE,IAAI,SAASA,EAAEE,EAAE,CAACD,EAAE,UAAUD,EAAE,YAAa,EAAeC,EAAE,YAAhB,aAA0CA,EAAE,YAAjB,aAA2BA,EAAE,YAAY,EAAE,cAAcA,EAAE,SAAS,EAAEA,EAAE,YAAYC,EAAE,EAAE,oBAAoB,EAAE,QAAQ,UAAU,CAAC,IAAIzB,EAAE,eAAe,OAAOuB,EAAE,KAAKC,EAAE,YAAY,SAASD,EAAE,CAACC,EAAE,GAAGD,CAAC,IAAIvB,EAAEuB,EAAE,CAAC,EAAEvB,CAAC,EAAE,QAAQ,SAASuB,EAAEvB,EAAE,CAAC,IAAIyB,EAAE,OAAO,UAAU,CAAC,aAAaA,CAAC,EAAEA,EAAE,WAAW,UAAU,CAACF,EAAG,CAAA,EAAEvB,GAAGwB,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,OAAOD,EAAE,QAAQ,EAAE,MAAM,UAAU,CAACA,EAAE,kDAAkD,EAAE,SAAS,MAAM,CAAC,CAAC,EAASC,EAAE,YAAT,MAAoBA,EAAE,IAAI,WAAW,EAAEA,CAAC,EAAE,MAAM,EAAe,OAAO,OAApB,KAA4B,OAAO,UAAU,OAAO,QAAQ,4BCA1lE,MAAM,yCAAyC,wBAAyB,CAC9E,YAAa9B,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CACpB,uBAAwB,CAAE,EAC1B,OAAQ,CACP,kBAAmB,2BACnB,wBAAyB,qBACzB,sBAAuB,mBACvB,qBAAsB,mBACtB,iBAAkB,QAClB,CACJ,GAEE,MAAOA,CAAO,EAEd,KAAK,yBAA2B,EAAE,SAAU,KAAK,gBAAgB,KAAM,IAAM,EAAE,OAAO,mCAAoC,EAAE,EAAI,EAGhI,KAAK,OAAO,iBAAiB,EAAI,2BAGjC,KAAK,eAAc,CACnB,CAED,MAAO,CACN,KAAK,OAAS,yBACd,KAAK,YAAc,uBACnB,KAAK,kBAAoB,MAAM,sBAC/B,KAAK,SAAWK,OAAE,OAAQ,CAAE,EAAE,0BAA0B,EACxD,KAAK,OAAM,CACX,CAED,QAAS,CACR,IAAIJ,EAAQ,KACP,eAAe,qBACnB,KAAK,2BAA4B,SAAUoC,EAAU,CACpDpC,EAAM,eAAgB,CAAE,QAASoC,CAAS,CAAA,CAC9C,GAEG,KAAK,eAAc,CAEpB,CAED,eAAgBrC,EAAU,CACzB,IAAIC,EAAQ,KACRc,EAAM,OAAO,WAAY,yDAAyD,EAClFuB,EAAY,CAAE,WAAY,GAAI,UAAW,GAAI,MAAO,GAAI,QAAS,IAChE,eAAe,uBACnBA,EAAY,CACX,WAAY,eAAe,mBAAkB,EAAG,WAChD,UAAW,eAAe,mBAAkB,EAAG,UAC/C,MAAO,eAAe,mBAAkB,EAAG,KAC/C,GAEO,OAAO,MAAOtC,CAAS,GAAI,OAAO,MAAOA,EAAQ,WACrDsC,EAAU,QAAUtC,EAAQ,SAE7B,QAAUiB,KAAO,KAAK,MAAM,WACtB,KAAK,MAAM,IAAKA,CAAG,GAAM,IAC7B,KAAK,MAAM,IAAKA,EAAK,EAAE,EAGzB,KAAK,IAAI,KAAM,EAAE,SAAUF,CAAG,EAAIV,OAAE,OAAQiC,EAAW,KAAK,MAAM,OAAQ,CAAA,CAAI,CAAA,EAC9E,KAAK,EAAG,yCAA2C,EAAC,KAAM,UAAW,CACpEjC,OAAG,IAAI,EAAG,OAAQ,OAAO,EAAG,KAAM,QAAS,UAAW,CACrDA,OAAG,IAAI,EAAG,OAAQ,EAAC,SAAU,sBAAsB,CACvD,EACA,GACE,KAAK,EAAG,yCAA2C,EAAC,KAAM,UAAW,CACpEA,OAAG,IAAI,EAAG,OAAQ,MAAM,EAAG,KAAM,OAAQ,UAAW,CACnDA,OAAG,IAAI,EAAG,OAAQ,EAAC,YAAa,sBAAsB,CAC1D,EACA,GAEE,KAAK,4BAA2B,EAChCA,OAAG,MAAM,EAAG,OACXJ,EAAM,SAAS,QAAS,UAAW,CAClCA,EAAM,4BAA2B,CACrC,CAAM,CACN,EAME,KAAK,SAAW,KAAK,EAAG,kBAAkB,EAAG,cAAe,CAC3D,MAAO,OACP,KAAM,YACN,cAAe,IACf,cAAe,SAAUkC,EAAI,CAC5B,IAAII,EAAYlC,OAAG,IAAI,EAAG,KAAM,YAAa,CAAC,EAAE,MAAM,CAAC,EAAE,KACzDJ,EAAM,EAAG,wBAA0B,EAAC,IAAKsC,CAAS,CAClD,CACJ,GAEE,IAAIC,EAAa,SAAS,cAAe,aAAa,EAEjDA,GACJ,OAAO,oBAAqBA,EAAcC,GAAW,CACpD,KAAK,sBAAuBA,EAChC,GAMEpC,OAAG,aAAe,EAAC,OAAQ,SAAW,EAAC,KAAM,UAAW,SAAUC,EAAI,CAChEA,EAAE,UAAY,IAClBL,EAAM,gBAAe,CAEzB,EAGE,CAED,sBAAuBwC,EAAQ,CAE9B,IAAIC,EAAgB,IAAI,aACxBA,EAAc,MAAM,IAAKD,EAAM,CAAC,CAAC,EAEjC,KAAK,SAAS,CAAC,EAAE,cAAe,SAAU,MAAQC,EAAc,MAChE,KAAK,EAAG,0BAA2B,IAAKD,EAAM,CAAC,EAAE,KACjD,CAED,6BAA8B,CAC7B,IAAIE,EAA6B,KAAK,EAAG,aAAe,EAAC,OAAM,EAC3DC,EAA4B,KAAK,EAAG,YAAc,EAAC,OAAM,EACxD,KAAK,SAAS,GAAI,IAAI,GAAM,KAAK,SAAS,GAAI,OAC7CD,IAA+BC,IAC9BD,EAA6BC,EACjC,KAAK,EAAG,YAAY,EAAG,OAAQD,EAA6B,IAE5D,KAAK,EAAG,aAAa,EAAG,OAAQC,EAA4B,KAGnD,KAAK,SAAS,GAAI,MAAM,GACnC,KAAK,EAAG,YAAc,EAAC,OAAQ,EAAE,CAElC,CAED,iBAAkB,CACjB,IAAI3C,EAAQ,KACP,eAAe,qBACnB,KAAK,kBAAmB,SAAUY,EAAS,CAC1C,GAAKA,GAAUA,EAAO,UAAY,CACjC,IAAIgC,EAAchC,EAAO,YAIzB,GAHM,OAAO,QAASgC,KACrBA,EAAc,CAAA,GAEVA,EAAY,OAAS,EAAI,CAC7B,IAAIC,EAAW,OAAO,WAAY,KAAM,GAAM,EAAM,EAAC,QAAQ,gBAAiB,iBAAsB,EAEpG,OAAO,SAAWA,CACxB,MACM7C,EAAM,aAAY,EAClBA,EAAM,sBAAqB,CAE5B,CACL,GAEG,KAAK,gBAAiB,SAAUO,EAAWC,EAAW,CACrD,IAAIsC,EAAkB,MAAM,6BAC5BA,EAAgB,MAAOvC,EAAWC,EAAU,CAC3C,SAAU,SAAUH,EAAI,CACvBL,EAAM,eAAgBK,EACtB,CACN,EACA,EAEE,CAED,oBAAqB,CACpB,OAAO,SAAW,OAAO,WAAY,KAAM,GAAM,EAAI,EAAG,QAAQ,gBAAiB,wBAAwB,EAAE,QAAS,aAAc,EAAE,EACpI,eAAe,cAAe,CAAA,EAC9B,CAED,kBAAmB,CAElB,OAAO,SAAW,OAAO,WAAY,KAAM,GAAM,EAAI,EAAG,QAAQ,gBAAiB,wBAAwB,EAAE,QAAS,aAAc,EAAE,EACpI,eAAe,cAAe,CAAA,EAC9B,CAED,QAAS,CACc,IAAI,iBAAkB,CAC3C,UAAW,IACd,CAAM,CACJ,CAED,eAAgB,EAAGM,EAAa,CAC/B,IAAIC,EACAZ,EAAQ,KACNW,EAGLC,EAASD,EAFTC,EAAS,EAAE,YAIZ,cAAc,iBAAmB,GACjC,eAAe,aAAcA,GAC7B,UAAW,OAAO,gBAAiB,EAAEA,CAAM,EAC3C,IAAImC,EAAmB,MAAM,sBAC7BA,EAAiB,gBAAiB,CACjC,SAAU,SAAUnC,EAAS,CACvBA,GAAUA,EAAO,WACrB,eAAe,mBAAoBA,EAAO,UAAS,EAAG,CAAC,CAAC,EACxD,oBAAoB,SAAS,OAAO,WAAW,OAAM,EACrDZ,EAAM,aAAY,EAClBA,EAAM,sBAAqB,GAE3B,YAAY,aAAY,CAEzB,CACJ,EACE,CAED,2BAA4BM,EAAW,CAEtC,KAAK,kBAAmB,SAAU0C,EAAM,CACvC,IAAIpC,EAAS,GACb,GAAKoC,GAAOA,EAAI,UAAY,CAC3B,IAAIJ,EAAcI,EAAI,YAChB,OAAO,QAASJ,KACrBA,EAAc,CAAA,GAEVA,EAAY,OAAS,IAGzBhC,EAAS,GAEV,CACDN,EAAUM,CAAM,CACnB,EACE,CAYD,kBAAmBN,EAAW,CAE7B,IAAI2C,EAAS,CAAA,EACbA,EAAO,YAAc,GACrBA,EAAO,YAAY,eAAiB,KAAK,MAAM,GAC/C,KAAK,kBAAkB,kBAAmBA,EAAQ,CACjD,SAAU,SAAUrC,EAAS,CAC5BN,EAAUM,CAAM,CAChB,CACJ,EACE,CAED,sBAAuBN,EAAW,CACjC,IAAIN,EAAQ,KACRkD,EAAS,CAAA,EACbA,EAAO,eAAiB,KAAK,MAAM,GACnC,KAAK,kBAAkB,kBAAmBA,EAAQ,CACjD,SAAU,SAAUtC,EAAS,CACtBA,EAAO,UAGZZ,EAAM,OAAM,EAFZA,EAAM,sBAAuBY,EAI9B,CACJ,EACE,CAED,UAAWuC,EAAU,CACpB,oBAAoB,SAAS,OAAO,aAAcA,EAAS,CAC1D,MAAO,CACN,OAAU,oBACV,MAAS,SACT,CACJ,EACE,CAED,cAAe,CACd,GAAK,CAAC,KAAK,SACV,MAAO,GAGR,GAAK,SAAS,eAAgB,cAAc,IAAM,KAAO,CACxD,IAAIC,EAAW,KAAK,SACTA,EAAS,KAAM,WAAc,EACxC,IAAIC,EAAOD,EAAS,WACpB,GAAKC,EAAO,CACX,KAAK,aAAe,MAAM,kBAC1B,IAAIC,EAAgB,YAAmB,KAAK,EAAG,oCAAsC,EAAC,IAAG,EAAK,IAAM,KAAK,EAAG,mCAAqC,EAAC,IAAG,EACjJC,EAAuB,KAAK,aAAa,cAAeD,EAAe,GAAI,CAAE,MAAO,EAAO,CAAA,EAAG,UAAW,EAAC,qBAC9G,KAAK,WAAYD,EAAME,EAC3B,MACI,KAAK,UAAWnD,OAAE,KAAK,EAAG,qBAAqB,EAEhD,CACD,CAED,eAAgB,CACf,OAAO,OAAO,WAAY,KAAM,GAAM,IAAO,QAAQ,gBAAiB,iBAAsB,CAC5F,CAED,cAAe,CACd,IAAI+C,EAAU/C,OAAG,SACjB+C,EAAQ,OAAQ,cAAgB/C,OAAE,KAAK,EAAG,kCAAqC,iBAC/E+C,EAAQ,OAAQ,MAAQ/C,OAAE,KAAK,EAAG,yEAA4E,QAC9G,KAAK,UAAW+C,GAChB,OAAO,SAAW,KAAK,eACvB,CAED,UAAWK,EAAQ,CAClB,IAAIL,EAAU/C,OAAG,SACjB+C,EAAQ,OAAQ,gCAAkCK,EAAQ,sBAAsB,EAChFL,EAAQ,OAAQ,MAAQ/C,OAAE,KAAK,EAAG,qFAAwF,QAC1H,KAAK,UAAW+C,GAChB,OAAO,SAAW,KAAK,eACvB,CAED,WAAYM,EAAWF,EAAuB,CAC7C,IAAIvD,EAAQ,KACRE,EAAM,cAAc,UAAW,SAAW,KAAK,aAAa,UAAY,gCACvE,eAAe,cAAe,EAAC,aACnCA,EAAMA,EAAM,eAAiB,eAAe,cAAa,EAAG,YAE7DA,EAAMA,EAAM,cAAgBqD,EAC5B,IAAIG,EAAa,OAAO,eACxB,YAAY,gBAAiBA,GAC7B,YAAY,yBAA0B,kBACtCtD,OAAE,KAAM,CACP,IAAKF,EACL,QAAS,CAER,cAAe,mBACf,eAAgB,UAAW,YAAc,CACzC,EACD,KAAM,OACN,KAAMuD,EACN,QAAS,SAAUT,EAAM,CACxB,YAAY,kBAAiB,EACxBA,EAAI,OAAS,GACjBhD,EAAM,aAAY,EAElBA,EAAM,UAAWgD,EAAI,MAEtB,EACD,MAAO,GACP,YAAa,GACb,YAAa,EAChB,EACE,CAED,gBAAiBW,EAAW,CAC3B,IAAI3D,EAAQ,KACR4D,EAAO,CAAA,EAOX,GANAA,EAAK,WAAa,KAAK,EAAG,oCAAoC,EAAG,MACjEA,EAAK,UAAY,KAAK,EAAG,mCAAmC,EAAG,MAC/DA,EAAK,UAAY,KAAK,EAAG,+BAA+B,EAAG,MAC3DA,EAAK,MAAQA,EAAK,UAClBA,EAAK,SAAW,KAAK,SAAS,SAAU,EAAE,EAAG,QAAS,cAAe,IACrEA,EAAK,WAAa,eAAe,cAAa,EAAG,WAC5C,KAAK,EAAG,+BAA+B,EAAG,IAAG,IAAO,KAAK,EAAG,yCAA0C,MAAQ,CAIlH,GAHK,KAAK,uBAAuB,eAAgB,eAAe,GAC/D,OAAO,gBAAiB,CAAE,KAAK,uBAAuB,cAAiB,CAAC,GAAK,IAEzEA,EAAK,YAAc,IAAMA,EAAK,WAAa,IAAMA,EAAK,OAAS,IAC9D,CAAC,KAAK,SAAS,WAAa,CAChC,oBAAoB,SAAS,OAAO,iBAAkBxD,OAAE,KAAK,EAAG,gFAAkF,CACjJ,MAAO,GACP,QAAS,CACR,CACC,MAAO,KAAM,QAAS,GAAM,SAAU,SAAUC,EAAI,CAEnD,CACD,EACD,CACC,MAAO,MAAO,SAAU,SAAUA,EAAI,CACrC,oBAAoB,SAAS,OAAO,mBACpCL,EAAM,gBAAiB4D,EAAMD,EAC7B,CACD,CACD,CACP,GACK,MACA,CAEF,KAAK,gBAAiBC,EAAMD,EAC/B,KAAS,CACN,KAAK,wBAAuB,EAC5B,IAAI1C,EAAY,KAAK,EAAG,aAAa,EAAG,KAAM,6BAC9CA,EAAU,CAAC,EAAE,UAAU,IAAK,WAAW,EAEvC,MAAM4C,EAAU,IAAI,UAAU,QAAS5C,EAAU,CAAC,EAAG,CACpD,MAAO,oCACX,GAEQ4C,GACJA,EAAQ,KAAI,EAEb,KAAK,uBAAuB,cAAmB5C,CAC/C,CACD,CAED,gBAAiB2C,EAAMD,EAAW,CACjC,IAAI3D,EAAQ,KACZ,KAAK,kBAAkB,gBAAiB,IACxC,KAAK,kBAAkB,gBAAiB4D,EAAM,CAC7C,SAAU,SAAUhD,EAAS,CACvBA,GAAUA,EAAO,WACrBZ,EAAM,wBAAuB,EAC7BA,EAAM,uBAAyB,GAC/B2D,EAAUC,EAAK,UAAWA,EAAK,QAAQ,GAEvC5D,EAAM,sBAAuBY,EAE9B,CACJ,EACE,CAED,sBAAuBA,EAAQkD,EAAiB,CAC/C,MAAMC,EAAUnD,EAAO,WAAY,GAAIA,EAAO,eAAc,EAE5D,OAAK,OAAO,QAASmD,CAAS,GAAI,OAAOA,GAAY,YACpD,KAAK,wBAAuB,EAE5B,OAAO,OAAQA,CAAS,EAAC,QAAWC,GAAS,CACvCA,EAAI,eAAgB,WACxBA,EAAMA,EAAI,OAGX,QAAUhD,KAAOgD,EAAM,CACtB,GAAK,CAACA,EAAI,eAAgBhD,GACzB,SAGD,IAAIE,EAAe,GACdF,IAAQ,cACZA,EAAM,QACNE,EAAed,OAAE,KAAK,EAAG,oDAAoD,GAG9E,IAAIa,EAAY,KACX,KAAK,EAAG,aAAa,EAAG,KAAM,aAAaD,CAAG,IAAM,EAAC,CAAC,EAC1DC,EAAY,KAAK,EAAG,aAAe,EAAC,KAAM,aAAaD,CAAG,MAE1DC,EAAY,KAAK,EAAG,eAGhBA,IACJA,EAAU,SAAU,aACdC,IACLA,EAAe,EAAE,QAAS8C,EAAIhD,CAAG,CAAG,EAAGgD,EAAIhD,CAAG,EAAE,CAAC,EAAIgD,EAAIhD,CAAG,GAE7DC,EAAU,KAAM,CAAE,MAASC,EAAc,yBAA0BA,CAAY,GAC/D,IAAI,UAAU,QAASD,EAAU,CAAC,EAAG,CACpD,MAASC,CAChB,GACc,KAAI,EACZ,KAAK,uBAAuBF,CAAG,EAAIC,EAEpC,CACL,IAES,EACP,CAED,yBAA0B,CACzB,MAAMgD,EAAiB,CAAA,EAEvB,UAAYjD,KAAO,KAAK,uBAClBA,IAAQ,SAAWA,IAAQ,iBAGhCiD,EAAe,KAAM,KAAK,uBAAuBjD,CAAG,CAAC,EAGtD,OAAO,gBAAiBiD,EAAe,IAAK7C,GAAQA,EAAK,CAAC,GAAK,GAC/D,CAEF,sKCjeO,MAAM,6CAA6C,wBAAyB,CAClF,YAAarB,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CACpB,GAAI,2BACJ,IAAK,IAGR,GAEE,MAAOA,CAAO,CACd,CAED,MAAO,CACN,KAAK,YAAc,uBACnB,KAAK,IAAM,MAAM,oBACjB,KAAK,iBAAmB,KAAK,EAAG,gBAAgB,EAChD,KAAK,iBAAiB,QACtB,KAAK,OAAM,CACX,CAED,QAAS,CAER,YAAY,YAAW,EACvB,KAAK,OAAM,CACX,CAED,QAAS,CACR,IAAIC,EAAQ,KACRiD,EAAS,CAAA,EACbA,EAAO,YAAc,GAChB,eAAe,6BACnB,KAAK,QAAU,eAAe,2BAC9BA,EAAO,YAAY,GAAK,CAAC,KAAK,OAAO,EACrC,YAAY,YAAW,EACvB,KAAK,IAAI,cAAeA,EAAQ,CAC/B,SAAU,SAAUrC,EAAS,CAC5B,IAAIgC,EAAchC,EAAO,YAMzB,GALMgC,IACLA,EAAc,CAAA,GAEfA,EAAcA,EAAY,CAAC,EAEtBA,EAAc,CAClB,IAAIsB,EAAe,IAAI,SAAS,MAAOtB,CAAW,EAC9CuB,EAA4B,IAAI,iCAAkC,CACrE,MAAOD,EACP,GAAIlE,EAAM,GACjB,GACMG,sBAAoB,SAAS,OAAO,WAAW,2BAA6BgE,CAC5E,CACD,CACL,GACG,eAAe,2BAA6B,KAE7C,CAED,eAAgB,CACf,IAAIjE,EAAM,OAAO,WAAY,KAAM,GAAM,EAAI,EAAG,QAAQ,gBAAiB,wBAAwB,EAE5F,OAAO,SAAS,OAASA,EAC7BC,sBAAoB,SAAS,OAAO,WAAY,kBAAkB,EAElE,OAAO,SAAWD,CAEnB,CACF,CAEA,qCAAqC,cAAgB;AAAA,+NCpE9C,MAAM,uCAAuC,wBAAyB,CAC5E,YAAaH,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CACpB,GAAI,6BAEP,GAEE,MAAOA,CAAO,CACd,CAED,KAAMA,EAAU,CACf,KAAK,IAAM,MAAM,oBACjB,KAAK,YAAc,iBACnB,KAAK,OAAM,EACX,UAAU,QAAS,kBAAmB,eACtC,CAED,QAAS,CAER,KAAK,cAAe,CACnB,SAAU,UAAW,CACf,eAAe,gBAAgB,KAAO,iBAAmB,eAAe,cAAa,EAAG,KAAO,eAAe,cAAa,EAAG,YAC3G,IAAI2B,kBAE5B,CACJ,EACE,CAEF,CAEA,+BAA+B,cAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mKC9BxC,MAAM,0CAA0C,wBAAyB,CAC/E,YAAa3B,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CACpB,OAAQ,CACP,4BAA6B,mBAC7B,gCAAiC,mBACjC,6BAA8B,mBAC9B,+BAAgC,kBAEhC,CACJ,GAEE,MAAOA,CAAO,CACd,CAED,QAASA,EAAU,CAClB,KAAK,IAAM,MAAM,sBACjB,KAAK,kBAAoB,MAAM,uBAC/B,KAAK,YAAc,MAAM,iBACzB,KAAK,YAAcA,EAAQ,YAC3B,KAAK,gBAAkBA,EAAQ,gBAC/B,KAAK,gBAAkBA,EAAQ,gBAC/B,KAAK,iBAAmBA,EAAQ,iBAChC,KAAK,UAAYA,EAAQ,UACzB,KAAK,uBAAyB,GAC9B,KAAK,yBAA2BA,EAAQ,0BAA4B,EAEpE,CAED,UAAW,CACJ,KAAK,MAAM,GAGhB,KAAK,OAAM,EAFX,KAAK,YAAW,CAIjB,CAED,QAAS,CACR,IAAIC,EAAQ,KACRoE,EAAW,OAAO,WAAY,kDAAkD,EAChFC,EAAY,KAAK,YAAc,IAAM,KAAK,MAAM,GAMpD,GALA,KAAK,UAAYA,EACjB,KAAK,SAAW,EAAE,SAAUD,CAAQ,EAAI,CAAA,GACnC,KAAK,gBAAgB,KAAM,kBAAoB,EAAC,QAAU,GAC9D,KAAK,gBAAgB,KAAM,kJAEvB,KAAK,gBAAgB,KAAM,IAAMC,CAAW,EAAC,SAAW,EAAI,CAChE,IAAIC,EAAQlE,OAAG,MAAM,EAAG,KAAM,KAAMiE,GACpCjE,OAAG,KAAK,gBAAgB,KAAM,SAAU,CAAC,CAAG,EAAC,OAAQkE,EACxD,MACG,KAAK,gBAAgB,KAAM,IAAMD,GAAY,KAAM,IAEpD,IAAIE,EAAQnE,OAAG,QACf,QAAUoE,KAAU,KAAK,gBACxB,GAAM,KAAK,gBAAgB,eAAgBA,CAAM,EAOjD,KAAIC,EACJ,OAASD,EAAM,CACd,IAAK,sBACL,IAAK,uBACC,KAAK,MAAM,IAAKA,CAAM,EAC1BC,EAAarE,OAAE,KAAK,EAAG,KAAK,EAE5BqE,EAAarE,OAAE,KAAK,EAAG,IAAI,EAE5B,MACD,QACO,KAAK,MAAM,IAAKoE,CAAM,EAG3BC,EAAa,KAAK,MAAM,IAAKD,CAAM,EAFnCC,EAAa,GAId,KACD,CACDF,EAAM,OAAQ,OAAS,KAAK,gBAAgBC,CAAM,EAAI,SACtD,KAAK,gBAAgB,KAAM,IAAMH,GAAY,OAAQ,OAASI,EAAa,SAE5EF,EAAM,OAAQ,OAASnE,OAAE,KAAK,EAAG,UAAa,SACzC,KAAK,gBAAgB,KAAM,OAAO,EAAG,KAAM,IAAK,IACpD,KAAK,gBAAgB,KAAM,OAAO,EAAG,KAAMmE,GAE5C,KAAK,gBAAgB,KAAM,IAAMF,CAAS,EAAG,OAAQ,KAAK,UAC1D,KAAK,gBAAgB,KAAM,IAAMA,CAAW,EAAC,KAAM,YAAY,EAAG,OAAQ,OAAS,EAAC,KAAM,QAAS,SAAUhE,EAAI,CAChHL,EAAM,MAAQA,EAAM,WAAW,EAAG,UAAW,CAC5CA,EAAM,YAAW,CACrB,EACA,GACE,KAAK,gBAAgB,KAAM,IAAMqE,CAAW,EAAC,KAAM,cAAc,EAAG,OAAQ,OAAS,EAAC,KAAM,QAAS,SAAUhE,EAAI,CAClHL,EAAM,MAAQA,EAAM,WAAW,EAAG,UAAW,CAC5CA,EAAM,cAAa,CACvB,EACA,EACE,CAED,aAAc,CACb,IAAIA,EAAQ,KACR0E,EAAO,CAAA,EACPC,EAAc,CAAA,EAClBA,EAAY,QAAU,CAAC,KAAK,qBAAqB,EACjDD,EAAK,YAAcC,EACnBD,EAAK,eAAiB,CACrB,GAAM,GACN,KAAQ,EACX,EACE,KAAK,kBAAkB,iBAAkBA,EAAM,GAAM,CACpD,SAAU,SAAU9D,EAAS,CAC5B,IAAIoC,EAAMpC,EAAO,YACbb,EAAU,CAAA,EACd,QAAU6B,KAAKoB,EACd,GAAMA,EAAI,eAAgBpB,GAG1B,KAAId,EAAMkC,EAAIpB,CAAC,EACf7B,EAAQe,EAAI,EAAE,EAAIV,OAAE,KAAK,EAAGU,EAAI,MAEjCd,EAAM,cAAe,mBAAoBD,EAAS,EAAI,CACtD,CACJ,EACE,CAED,cAAe,EAAI,CAClB,IAAI6E,EAAOxE,OAAG,EAAE,aAAe,EAAC,OAAQ,EAAC,KAAM,UAC/C,GAAK,SAAS,YAAc,CAC3B,IAAI,EAAI,SAAS,YAAa,aAAa,EAC3C,EAAE,eAAgB,YAAa,GAAM,GAAM,OAAQ,EAAG,EAAG,EAAG,EAAG,EAAG,GAAO,GAAO,GAAO,GAAO,EAAG,MACjGwE,EAAK,CAAC,EAAE,cAAe,CAAC,CAC3B,MAAc,QAAQ,WACnBA,EAAK,CAAC,EAAE,UAAW,aAAa,CAEjC,CAED,aAAc,CACb,IAAIvD,EAAM,OAAO,WAAY,8BAAgC,KAAK,YAAc,oBAChF,KAAK,WAAY,EAAE,SAAUA,CAAG,EAAI,CACnC,iBAAkB,KAAK,iBACvB,yBAA0B,KAAK,wBAC/B,CAAA,GACD,KAAK,YAAW,EAChB,KAAK,mBAAkB,EACvB,KAAK,yBAAwB,EAC7B,KAAK,aAAY,CACjB,CAED,eAAgB,CACf,IAAIrB,EAAQ,KACZ,oBAAoB,SAAS,OAAO,iBAAkB,OAAO,uBAAwB,CACpF,MAAO,GACP,QAAS,CACR,CAAE,MAAO,KAAM,QAAS,EAAM,EAC9B,CACC,MAAO,MAAO,SAAU,SAAUK,EAAI,CACrCL,EAAM,kBAAiB,EACvB,YAAY,YAAW,EACvBA,EAAM,IAAI,SAAWA,EAAM,WAAW,EAAGA,EAAM,MAAM,GAAI,CACxD,SAAU,SAAUY,EAAS,CAC5B,YAAY,aAAY,EACnBA,GAAUA,EAAO,UAGrBZ,EAAM,UAAU,YAAaA,EAAM,YAAaA,EAAM,iBAEtDA,EAAM,eAAgBY,EAEvB,CACR,EACM,CACD,CACD,CACJ,EACE,CAED,cAAeiE,EAAOC,EAAaC,EAAY,CAC9C,IAAI/E,EAAQ,KACRgF,EAAiB,gBAAkBH,EAAQ,KAC/C,GAAK,KAAK,EAAGG,CAAgB,GAAI,KAAK,EAAGA,GAAiB,CAAC,EAC1D,KAAK,EAAGA,CAAgB,EAAC,MAAK,MAE9B,QASD,OAPM,OAAO,MAAO,KAAK,MAAM,IAAKH,CAAK,IACxC,KAAK,MAAM,IAAKA,EAAO,EAAE,EAErB,EAAE,KAAMC,CAAW,GAAM,IAC7BC,EAAY,GACZ,KAAK,MAAM,IAAKF,EAAO,EAAE,GAEjBA,EAAK,CACb,IAAK,mBACJ,GAAK,KAAK,yBAA2B,CACpC,IAAII,EACJ,OAAS,KAAK,YAAW,CACxB,IAAK,oBACJA,EAAc7E,OAAE,KAAK,EAAG,eAAe,EACvC,MACD,IAAK,wBACJ6E,EAAc7E,OAAE,KAAK,EAAG,gBAAgB,EACxC,MACD,IAAK,sBACJ6E,EAAc7E,OAAE,KAAK,EAAG,cAAc,EACtC,MACD,IAAK,uBACJ6E,EAAc7E,OAAE,KAAK,EAAG,kBAAkB,EAC1C,MACD,IAAK,yBACJ6E,EAAc7E,OAAE,KAAK,EAAG,oBAAoB,EAC5C,KACD,CACD2E,EAAY,GACZ,KAAK,EAAGC,CAAc,EAAG,OAAQ5E,OAAG,qBAAsB,KAAM,QAAS,EAAI,EAAC,KAAM,MAAQ6E,EAAc,KAAK,EAC/G,CAEF,QACMF,IAAc,IAClB,KAAK,EAAGC,GAAiB,OAAQ5E,OAAG,mBAAmB,EAAG,KAAM,QAAS,EAAE,EAAG,KAAM,MAAQA,OAAE,KAAK,EAAG,MAAM,EAAK,KAAK,GAElH,EAAE,KAAM0E,CAAW,EAAK,GAC5B1E,OAAE,KAAM0E,EAAa,SAAUI,EAAOC,EAAQ,CAC7CnF,EAAM,EAAGgF,CAAgB,EAAC,OAAQ5E,OAAG,mBAAmB,EAAG,KAAM,QAAS8E,CAAK,EAAG,KAAMC,CAAO,CAAA,EAC1FnF,EAAM,MAAM,IAAK6E,CAAK,GAAMK,GAChClF,EAAM,EAAGgF,CAAgB,EAAC,IAAKE,CAAK,CAE3C,GAEIlF,EAAM,EAAGgF,CAAgB,EAAC,aAAY,EACtC,KACD,CACD,CAED,oBAAqB,CAEpB,IAAII,EAAS,SACTC,EACAC,EAAU,GAMVC,EAAe,CAClBnF,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAO,EACvDA,OAAE,KAAK,EAAG,KAAO,EAAEA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAO,CAC7E,EACMoF,EAAmB,CACtBpF,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAO,EACpCA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAO,EACvDA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAO,EACvDA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAO,EACvDA,OAAE,KAAK,EAAG,KAAO,CACpB,EACMqF,EAAerF,OAAE,KAAK,EAAG,OAAO,EAChCsF,EAAatF,OAAE,KAAK,EAAG,OAAO,EAC9BL,EAAU,CACb,SAAU,GACV,WAAYqF,EACZ,SAAU,GACV,WAAY,GACZ,YAAa,GACb,WAAY,GACZ,gBAAiB,GACjB,SAAU,GACV,SAAU,GACV,UAAW,WACX,OAAQ,GACR,YAAaG,EACb,YAAaE,EACb,gBAAiBD,EACjB,UAAWE,EACX,WAAY,UAAW,CACtB,EACD,SAAU,SAAUC,EAAW,CAC9BvF,OAAG,MAAO,QACV,EACD,QAAS,UAAW,CACnBiF,EAAkB,WAAY,UAAW,CACxCC,EAAU,EACV,EAAE,GAAG,CACN,CAEJ,EACE,KAAK,EAAG,+BAAiC,EAAC,WAAYvF,CAAO,EAC7D,KAAK,EAAG,+BAA+B,EAAG,KAAM,cAAe,aAC/D,KAAK,EAAG,+BAAiC,EAAC,KAAM,UAAW,UAAW,CAC/DuF,GAILA,EAAU,GACLD,IACJ,aAAcA,CAAe,EAC7BA,EAAkB,QANnBjF,OAAG,IAAI,EAAG,WAAY,MAAM,EAC5BkF,EAAU,GAQX,CAAA,EAAG,KAAK,YAAY,EAAE,KAAM,UAAW,UAAW,CAAElF,OAAE,IAAI,EAAE,KAAM,EAAC,QAAS,SAAS,CAAI,CAAA,CAC1F,CAED,0BAA2B,CAC1B,IAAIwF,EAAO,KACPC,EAAkB,KAAK,EAAG,cAAgB,EAAC,eAAc,EAC7DzF,OAAE,IAAKyF,EAAiB,SAAU/E,EAAKc,EAAI,CACpC,OAAO,MAAOgE,EAAK,MAAM,IAAK9E,EAAI,IAAO,IAC9C8E,EAAK,MAAM,IAAK9E,EAAI,KAASA,EAAI,MAErC,GACQ,KAAK,MAAM,IAAK,kBAAkB,GACvC,KAAK,MAAM,IAAK,mBAAoB,EAAK,CAE1C,CAED,kBAAmB,CAClB,IAAId,EAAQ,KACR0E,EAAO,CAAA,EACXA,EAAK,QAAU,KAAK,sBACpB,IAAIoB,EAAOpB,EAAK,KAAO,KAAK,uBAAsB,EAAG,MACrD,KAAK,kBAAkB,iBAAkBA,EAAM,CAC9C,SAAU,SAAU1B,EAAM,CACzB,GAAK,CAACA,EAAI,UACThD,EAAM,aAAcgD,OACd,CACNhD,EAAM,EAAG,iCAAqC,EAAC,aAAc,SAAS,EACtE,IAAI+F,EAAS/C,EAAI,YACjB5C,OAAG,UAAY,EAAC,KAAM,CACrB,SAAU,WACV,MAAO2F,CACb,GAAS,KAAMD,GAAO,SAAU9F,EAAM,EAAG,iCAAmC,GACvEA,EAAM,EAAG,iCAAqC,EAAC,aAAY,EAC3DA,EAAM,EAAG,iCAAqC,EAAC,QAAS,QAAQ,CAChE,CACD,CACJ,EACE,CAED,8BAA+B,CAC9B,OAAO,KAAK,EAAG,+BACf,CAED,wBAAyB,CACxB,OAAO,KAAK,6BAA4B,EAAG,KAAM,oBAAoB,CACrE,CAED,+BAAgC,CAC/B,IAAIA,EAAQ,KACRgG,EAAY,KAAK,+BACrBA,EAAU,IAAK,UAAW,SAC1BA,EAAU,KAAM,oBAAqB,IAAK,SAAU,GAAI,QAAS,UAAW,CAC3EhG,EAAM,iBAAgB,CACzB,GACE,IAAIiG,EAAuB,KAAK,yBAChC,OAAAA,EAAqB,IAAK,IAC1BA,EAAqB,OAAQ,SAAS,EAAG,KAAM,UAAW,SAAU5F,EAAI,CAClEA,EAAE,UAAY,IAClBL,EAAM,iBAAgB,CAE1B,GACSgG,CACP,CAED,+BAAgC,CAC/B,IAAIA,EAAY,KAAK,+BACrB,OAAAA,EAAU,IAAK,UAAW,QACnBA,CACP,CAOD,cAAe,CACd,IAAIhG,EAAQ,KACZ,oBAAoB,SAAS,OAAO,cAAe,KAAK,IAAK,CAC5D,MAAO,GACP,QAAS,CACR,CACC,MAAO,QAAS,QAAS,GAAM,SAAU,SAAUK,EAAI,CAEtD,CACD,EACD,CACC,MAAO,eAAgB,SAAU,SAAUA,EAAI,CAC9CL,EAAM,YAAW,CACjB,CACD,CACD,CACJ,EACE,CAED,eAAgB,CACf,oBAAoB,SAAS,OAAO,eACpC,CAED,mBAAoB,CACnB,oBAAoB,SAAS,OAAO,kBACpC,CAED,iBAAkB,EAAGkG,EAAgB,CACpC,IAAIlF,EAAM,EAAE,cAAc,KAE1B,OADA,KAAK,MAAM,IAAKA,EAAKZ,OAAG,EAAE,aAAa,EAAG,IAAG,GACpCY,EAAG,CACX,IAAK,mBACC,KAAK,MAAM,IAAKA,CAAG,IAAO,IAAM,KAAK,0BACzC,KAAK,8BAA6B,EAClCkF,EAAgB,IAEhB,KAAK,8BAA6B,EAEnC,KACD,CACKA,GACL,KAAK,SAAQ,CAEd,CAED,UAAW,CACV,IAAIlG,EAAQ,KAGZ,KAAK,IAAI,WAAa,KAAK,WAAW,EAAG,KAAK,MAAM,SAAU,CAC7D,SAAU,SAAUY,EAAS,CAC5BZ,EAAM,eAAgBY,EACtB,CACJ,EACE,CAED,eAAgBA,EAAS,CAExB,KAAK,aAAcA,EACnB,CAED,eAAgBuF,EAAY,CAC3B,OAAO,gBAAiB,OAAO,OAAQ,KAAK,sBAAsB,EAAG,IAAK/E,GAAQA,EAAK,CAAC,CAAG,EAAE+E,CAAS,CACtG,CAED,aAAcvF,EAAS,CACtB,KAAK,eAAgB,IACrB,IAAIG,EAAaH,EAAO,WAAY,EAAGA,EAAO,WAAY,EAAC,CAAC,EAAI,GAC3DG,GAAcA,EAAW,eAAgB,OAAO,IACpDA,EAAaA,EAAW,OAEzB,UAAYC,KAAOD,EAAa,CAC/B,GAAK,CAACA,EAAW,eAAgBC,GAChC,SAED,IAAIC,EAQJ,GAPK,KAAK,EAAG,eAAeD,CAAG,IAAI,EAAG,CAAC,EACtCC,EAAY,KAAK,EAAG,eAAeD,CAAG,MAC3B,KAAK,EAAG,gBAAgBA,CAAG,MAAO,CAAC,EAC9CC,EAAY,KAAK,EAAG,gBAAgBD,CAAG,IAAM,EAAC,QAAS,kBAC5C,KAAK,EAAG,kBAAkBA,CAAG,MAAO,CAAC,IAChDC,EAAY,KAAK,EAAG,kBAAkBD,CAAG,OAErCC,EAAY,CAChBA,EAAU,SAAU,aACpB,IAAIC,EACC,EAAE,QAASH,EAAWC,CAAG,CAAC,EAC9BE,EAAeH,EAAWC,CAAG,EAAE,CAAC,EAEhCE,EAAeH,EAAWC,CAAG,EAEd,IAAI,UAAU,QAASC,EAAU,CAAC,EAAG,CACpD,MAAOC,EACP,UAAW,QACX,UAAW,OACX,QAAS,aACd,GAEY,KAAI,EACZ,KAAK,uBAAuBF,CAAG,EAAIC,CACnC,CACD,CACD,CAED,eAAgBL,EAAS,CACxB,IAAImD,EAAUnD,EAAO,aAEhBmD,EAAQ,eAAgB,OAAO,EAG9BA,IACLA,EAAUnD,EAAO,kBAElB,IAAIM,EAAe,GAEd,OAAO,QAAS6C,CAAS,GAAI,OAAOA,GAAY,SAEpD3D,OAAE,KAAM2D,EAAS,SAAUqC,EAAOpC,EAAM,CAElCA,EAAI,eAAgB,WACxBA,EAAMA,EAAI,OAGX,QAAUhD,KAAOgD,EAChB9C,EAAeA,EAAe8C,EAAIhD,CAAG,EAAI,MAE9C,GAGGE,EAAe6C,EAGhB,KAAK,UAAW7C,EAChB,CAED,aAAc,CACb,IAAIlB,EAAQ,KAIZ,KAAK,IAAI,MAAQ,KAAK,WAAW,EAAG,KAAK,MAAM,SAAU,CACxD,SAAU,SAAUY,EAAS,CAC5B,GAAKA,GAAUA,EAAO,UAAY,CACjC,IAAIgC,EAAchC,EAAO,YACpBgC,IAAgB,IAAQ,OAAO,OAAQA,CAAW,GAAMA,GAAe,OAAO,SAAWA,GAAe,OAAO,cACnH5C,EAAM,MAAM,IAAK,KAAM4C,CAAW,EAEnC5C,EAAM,uBAAyB,GAC/BA,EAAM,MAAQA,EAAM,WAAW,EAAG,UAAW,CAC5CA,EAAM,OAAM,EACZA,EAAM,cAAa,CACzB,EACA,MACKA,EAAM,aAAcY,EAErB,CACJ,EACE,CAED,UAAWuC,EAAU,CACpB,oBAAoB,SAAS,OAAO,aAAcA,CAAO,CACzD,CACF,wKCxhBO,MAAM,gDAAgD,iCAAkC,CAC9F,YAAapD,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CAAA,GAErB,MAAOA,CAAO,CACd,CAED,aAAc,CACb,IAAIC,EAAQ,KACZ,KAAK,IAAI,iCAAkC,oBAAqB,CAC/D,SAAU,SAAUY,EAAS,CAC5BZ,EAAM,cAAe,uBAAwBY,EAAO,UAAS,EAAI,GACjE,CACJ,GACE,KAAK,IAAI,iCAAkC,YAAa,CACvD,SAAU,SAAUA,EAAS,CAC5BZ,EAAM,cAAe,eAAgBY,EAAO,UAAS,EAAI,GACzD,CACJ,GACE,KAAK,YAAY,WAAY,UAAW,CACvC,SAAU,SAAUA,EAAS,CAC5B,IAAIA,EAASA,EAAO,YACpBZ,EAAM,cAAe,UAAWY,EAAQ,EAAI,CAC5C,CACJ,EACE,CAED,0BAA2BN,EAAW,CACrC,IAAIN,EAAQ,KACRiD,EAAS,CAAA,EACbA,EAAO,YAAc,GACrBA,EAAO,YAAY,GAAK,KAAK,MAAM,GACnC,KAAK,IAAI,0BAA8BA,EAAQ,CAC9C,SAAU,SAAUrC,EAAS,CAC5B,GAAKA,GAAUA,EAAO,UAAY,CACjC,IAAIgC,EAAchC,EAAO,YACnBgC,IACLA,EAAc,CAAA,GAEfA,EAAcA,EAAY,CAAC,EAC3B5C,EAAM,MAAM,IAAK4C,GACZtC,GACJA,GAEN,MACKN,EAAM,eAAgBY,GACtB,YAAY,aAAY,CAEzB,CACJ,EACE,CAED,0BAA2B,CAC1B,MAAM,yBAAwB,EAC9B,IAAIoE,EACAqB,EAEJ,QAAUrF,KAAO,KAAK,MAAM,WAC3B,GAAM,KAAK,MAAM,IAAKA,CAAG,EAMzB,OAASA,EAAG,CACX,IAAK,UAIJgE,EAAiB,gBAAkBhE,EAAM,KACzC,KAAK,EAAGgE,CAAc,EAAG,IAAK,KAAK,MAAM,IAAKhE,CAAG,GAC5CA,IAAQ,WACZ,KAAK,aAAc,KAAK,MAAM,IAAKA,CAAG,GAEvC,MACD,IAAK,sBACL,IAAK,uBACJgE,EAAiB,eAAiBhE,EAAM,KACnC,KAAK,MAAM,IAAKA,CAAG,IAAO,GAC9B,KAAK,EAAGgE,CAAc,EAAG,KAAM,UAAW,WAC/B,KAAK,MAAM,IAAKhE,CAAG,IAAO,IACrC,KAAK,EAAGgE,CAAgB,EAAC,WAAY,SAAS,EAE/C,MACD,QACM,KAAK,MAAM,IAAKhE,CAAG,IAAO,IAC9B,KAAK,MAAM,IAAKA,EAAK,EAAE,EAExBgE,EAAiB,uBAAyBhE,EAAM,KAChDqF,EAAgB,KAAK,EAAGrB,GACnBqB,GAAiBA,EAAc,CAAC,GACpC,KAAK,EAAGrB,CAAc,EAAG,IAAK,KAAK,MAAM,IAAKhE,CAAG,GAElD,KAED,CAIF,CAED,iBAAkB,EAAGkF,EAAgB,CACpC,IAAIlF,EAAM,EAAE,cAAc,KACtBhB,EAAQ,KAEZ,OADA,KAAK,MAAM,IAAKgB,EAAKZ,OAAG,EAAE,aAAa,EAAG,IAAG,GACpCY,EAAG,CAMX,IAAK,sBACL,IAAK,uBACCZ,OAAG,EAAE,aAAe,EAAC,GAAI,UAAU,EACvC,KAAK,MAAM,IAAKY,EAAK,EAAI,EAEzB,KAAK,MAAM,IAAKA,EAAK,EAAK,EAE3B,KACD,CACD,GAAKA,GAAO,UAAY,CACvB,KAAK,aAAc,KAAK,EAAG,wBAAwB,EAAG,IAAG,EAAI,GAAM,UAAW,CAC7EhB,EAAM,SAAQ,CAClB,GAEG,MACA,CACKkG,GACL,KAAK,SAAQ,CAEd,CAED,aAAclC,EAAKsC,EAAShG,EAAW,CACtC,IAAIN,EAAQ,KACZA,EAAM,EAAG,yBAA2B,EAAC,aAAc,SAAS,EACvD,CAACgE,GAAOA,IAAQ,MAAQA,IAAQ,KACpChE,EAAM,iBAAmB,GACzBA,EAAM,cAAe,WAAY,CAAA,IAEjC,KAAK,YAAY,WAAY,WAAYgE,EAAK,CAC7C,SAAU,SAAUhB,EAAM,CACzBA,EAAMA,EAAI,YACJA,IACLA,EAAM,CAAA,GAEPhD,EAAM,iBAAmB,OAAO,iBAAkBgD,CAAG,EAChDsD,GAAWtG,EAAM,iBAAiB,OAAS,IAC/CA,EAAM,MAAM,IAAK,WAAYA,EAAM,iBAAiB,CAAC,EAAE,OACvDA,EAAM,EAAG,yBAAyB,EAAG,IAAKA,EAAM,MAAM,IAAK,UAAU,IAEtEA,EAAM,cAAe,WAAYgD,GAC5B1C,GACJA,GAED,CACL,EAEE,CACF,oLC9JO,MAAM,+CAA+C,iCAAkC,CAC7F,YAAaP,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CAAA,GAErB,MAAOA,CAAO,CACd,CAED,aAAc,CACb,IAAIC,EAAQ,KACZ,KAAK,IAAI,gCAAiC,OAAQ,CACjD,SAAU,SAAUY,EAAS,CAC5BZ,EAAM,cAAe,UAAWY,EAAO,UAAS,EAAI,GACpD,CACJ,GACE,KAAK,YAAY,WAAY,UAAW,CACvC,SAAU,SAAUA,EAAS,CAC5B,IAAIA,EAASA,EAAO,YACpBZ,EAAM,cAAe,UAAWY,EAAQ,EAAI,CAC5C,CACJ,EACE,CAED,yBAA0BN,EAAW,CACpC,IAAIN,EAAQ,KACRiD,EAAS,CAAA,EACbA,EAAO,YAAc,GACrBA,EAAO,YAAY,GAAK,KAAK,MAAM,GACnC,KAAK,IAAI,yBAA6BA,EAAQ,CAC7C,SAAU,SAAUrC,EAAS,CAC5B,GAAKA,GAAUA,EAAO,UAAY,CACjC,IAAIgC,EAAchC,EAAO,YACnBgC,IACLA,EAAc,CAAA,GAEfA,EAAcA,EAAY,CAAC,EAC3B5C,EAAM,MAAM,IAAK4C,GACZtC,GACJA,GAEN,MACKN,EAAM,eAAgBY,GACtB,YAAY,aAAY,CAEzB,CACJ,EACE,CAED,0BAA2B,CAC1B,MAAM,yBAAwB,EAC9B,IAAIoE,EACAqB,EAEJ,QAAUrF,KAAO,KAAK,MAAM,WAC3B,GAAM,KAAK,MAAM,IAAKA,CAAG,EAMzB,OAASA,EAAG,CACX,IAAK,UAIJgE,EAAiB,gBAAkBhE,EAAM,KACzC,KAAK,EAAGgE,CAAc,EAAG,IAAK,KAAK,MAAM,IAAKhE,CAAG,GAC5CA,IAAQ,WACZ,KAAK,aAAc,KAAK,MAAM,IAAKA,CAAG,GAEvC,MACD,QACM,KAAK,MAAM,IAAKA,CAAG,IAAO,IAC9B,KAAK,MAAM,IAAKA,EAAK,EAAE,EAExBgE,EAAiB,uBAAyBhE,EAAM,KAChDqF,EAAgB,KAAK,EAAGrB,GACnBqB,GAAiBA,EAAc,CAAC,GACpC,KAAK,EAAGrB,CAAc,EAAG,IAAK,KAAK,MAAM,IAAKhE,CAAG,GAElD,KAED,CAIF,CAED,iBAAkB,EAAGkF,EAAgB,CACpC,IAAIlF,EAAM,EAAE,cAAc,KACtBhB,EAAQ,KAiBZ,GAhBA,KAAK,MAAM,IAAKgB,EAAKZ,OAAG,EAAE,aAAa,EAAG,IAAG,GAgBxCY,GAAO,UAAY,CACvB,KAAK,aAAc,KAAK,EAAG,wBAAwB,EAAG,IAAG,EAAI,GAAM,UAAW,CAC7EhB,EAAM,SAAQ,CAClB,GAEG,MACA,CACKkG,GACL,KAAK,SAAQ,CAEd,CAED,aAAclC,EAAKsC,EAAShG,EAAW,CACtC,IAAIN,EAAQ,KACZA,EAAM,EAAG,yBAA2B,EAAC,aAAc,SAAS,EACvD,CAACgE,GAAOA,IAAQ,MAAQA,IAAQ,KACpChE,EAAM,iBAAmB,GACzBA,EAAM,cAAe,WAAY,CAAA,IAEjC,KAAK,YAAY,WAAY,WAAYgE,EAAK,CAC7C,SAAU,SAAUhB,EAAM,CACzBA,EAAMA,EAAI,YACJA,IACLA,EAAM,CAAA,GAEPhD,EAAM,iBAAmB,OAAO,iBAAkBgD,CAAG,EAChDsD,GAAWtG,EAAM,iBAAiB,OAAS,IAC/CA,EAAM,MAAM,IAAK,WAAYA,EAAM,iBAAiB,CAAC,EAAE,OACvDA,EAAM,EAAG,yBAAyB,EAAG,IAAKA,EAAM,MAAM,IAAK,UAAU,IAEtEA,EAAM,cAAe,WAAYgD,GAC5B1C,GACJA,GAED,CACL,EAEE,CACF,kLChJO,MAAM,8CAA8C,iCAAkC,CAC5F,YAAaP,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CAAA,GAErB,MAAOA,CAAO,CACd,CAED,aAAc,CACb,IAAIC,EAAQ,KACZ,KAAK,YAAY,WAAY,UAAW,CACvC,SAAU,SAAUY,EAAS,CAC5B,IAAIA,EAASA,EAAO,YACpBZ,EAAM,cAAe,UAAWY,EAAQ,EAAI,CAC5C,CACJ,EACE,CAED,wBAAyBN,EAAW,CACnC,IAAIN,EAAQ,KACRiD,EAAS,CAAA,EACbA,EAAO,YAAc,GACrBA,EAAO,YAAY,GAAK,KAAK,MAAM,GACnC,KAAK,IAAI,wBAA4BA,EAAQ,CAC5C,SAAU,SAAUrC,EAAS,CAC5B,GAAKA,GAAUA,EAAO,UAAY,CACjC,IAAIgC,EAAchC,EAAO,YACnBgC,IACLA,EAAc,CAAA,GAEfA,EAAcA,EAAY,CAAC,EAC3B5C,EAAM,MAAM,IAAK4C,GACZtC,GACJA,GAEN,MACKN,EAAM,eAAgBY,GACtB,YAAY,aAAY,CAEzB,CACJ,EACE,CAED,0BAA2B,CAC1B,MAAM,yBAAwB,EAC9B,IAAIoE,EACAqB,EAEJ,QAAUrF,KAAO,KAAK,MAAM,WAC3B,GAAM,KAAK,MAAM,IAAKA,CAAG,EAMzB,OAASA,EAAG,CACX,IAAK,UAIJgE,EAAiB,gBAAkBhE,EAAM,KACzC,KAAK,EAAGgE,CAAc,EAAG,IAAK,KAAK,MAAM,IAAKhE,CAAG,GAC5CA,IAAQ,WACZ,KAAK,aAAc,KAAK,MAAM,IAAKA,CAAG,GAEvC,MACD,QACM,KAAK,MAAM,IAAKA,CAAG,IAAO,IAC9B,KAAK,MAAM,IAAKA,EAAK,EAAE,EAExBgE,EAAiB,uBAAyBhE,EAAM,KAChDqF,EAAgB,KAAK,EAAGrB,GACnBqB,GAAiBA,EAAc,CAAC,GACpC,KAAK,EAAGrB,CAAc,EAAG,IAAK,KAAK,MAAM,IAAKhE,CAAG,GAElD,KAED,CAIF,CAED,iBAAkB,EAAGkF,EAAgB,CACpC,IAAIlF,EAAM,EAAE,cAAc,KACtBhB,EAAQ,KAiBZ,GAhBA,KAAK,MAAM,IAAKgB,EAAKZ,OAAG,EAAE,aAAa,EAAG,IAAG,GAgBxCY,GAAO,UAAY,CACvB,KAAK,aAAc,KAAK,EAAG,wBAAwB,EAAG,IAAG,EAAI,GAAM,UAAW,CAC7EhB,EAAM,SAAQ,CAClB,GAEG,MACA,CACKkG,GACL,KAAK,SAAQ,CAEd,CAED,aAAclC,EAAKsC,EAAShG,EAAW,CACtC,IAAIN,EAAQ,KACZA,EAAM,EAAG,yBAA2B,EAAC,aAAc,SAAS,EACvD,CAACgE,GAAOA,IAAQ,MAAQA,IAAQ,KACpChE,EAAM,iBAAmB,GACzBA,EAAM,cAAe,WAAY,CAAA,IAEjC,KAAK,YAAY,WAAY,WAAYgE,EAAK,CAC7C,SAAU,SAAUhB,EAAM,CACzBA,EAAMA,EAAI,YACJA,IACLA,EAAM,CAAA,GAEPhD,EAAM,iBAAmB,OAAO,iBAAkBgD,CAAG,EAChDsD,GAAWtG,EAAM,iBAAiB,OAAS,IAC/CA,EAAM,MAAM,IAAK,WAAYA,EAAM,iBAAiB,CAAC,EAAE,OACvDA,EAAM,EAAG,yBAAyB,EAAG,IAAKA,EAAM,MAAM,IAAK,UAAU,IAEtEA,EAAM,cAAe,WAAYgD,GAC5B1C,GACJA,GAED,CACL,EAEE,CACF,gLC3IO,MAAM,2CAA2C,iCAAkC,CACzF,YAAaP,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CAAA,GAErB,MAAOA,CAAO,CACd,CAED,KAAMA,EAAU,CACf,KAAK,sBAAwB,EAC7B,CAED,aAAc,CACb,IAAIC,EAAQ,KACZ,KAAK,IAAI,4BAA6B,cAAe,CACpD,SAAU,SAAUY,EAAS,CAC5BZ,EAAM,cAAe,iBAAkBY,EAAO,UAAS,EAAI,GAC3D,CACJ,GACE,IAAI8D,EAAO,CAAA,EACPC,EAAc,CAAA,EAClBA,EAAY,QAAU,CAAC,KAAK,qBAAqB,EACjDD,EAAK,YAAcC,EACnBD,EAAK,eAAiB,CACrB,GAAM,GACN,KAAQ,EACX,EACE,KAAK,kBAAkB,iBAAkBA,EAAM,GAAM,CACpD,SAAU,SAAU9D,EAAS,CAC5B,IAAIoC,EAAMpC,EAAO,YACbb,EAAU,CAAA,EACd,QAAU6B,KAAKoB,EACd,GAAMA,EAAI,eAAgBpB,GAG1B,KAAId,EAAMkC,EAAIpB,CAAC,EACf7B,EAAQe,EAAI,EAAE,EAAIV,OAAE,KAAK,EAAGU,EAAI,MAEjCd,EAAM,cAAe,mBAAoBD,EAAS,EAAI,CACtD,CACJ,EACE,CAED,qBAAsBO,EAAW,CAChC,IAAIN,EAAQ,KACRiD,EAAS,CAAA,EACbA,EAAO,YAAc,GACrBA,EAAO,YAAY,GAAK,KAAK,MAAM,GACnC,KAAK,IAAI,qBAAyBA,EAAQ,CACzC,SAAU,SAAUrC,EAAS,CAC5B,GAAKA,GAAUA,EAAO,UAAY,CACjC,IAAIgC,EAAchC,EAAO,YACnBgC,IACLA,EAAc,CAAA,GAEfA,EAAcA,EAAY,CAAC,EAC3B5C,EAAM,MAAM,IAAK4C,GACZtC,GACJA,GAEN,MACKN,EAAM,eAAgBY,GACtB,YAAY,aAAY,CAEzB,CACJ,EACE,CAED,0BAA2B,CAC1B,MAAM,yBAAwB,EAC9B,IAAIoE,EACAqB,EAEE,OAAO,MAAO,KAAK,MAAM,IAAK,wBAAwB,IAC3D,KAAK,MAAM,IAAK,yBAA0B,EAAK,EAEhD,QAAUrF,KAAO,KAAK,MAAM,WAC3B,GAAM,KAAK,MAAM,IAAKA,CAAG,EAMzB,OAASA,EAAG,CAWX,IAAK,yBACJgE,EAAiB,eAAiBhE,EAAM,KACnC,KAAK,MAAM,IAAKA,CAAG,IAAO,GAC9B,KAAK,EAAGgE,CAAc,EAAG,KAAM,UAAW,WAC/B,KAAK,MAAM,IAAKhE,CAAG,IAAO,IACrC,KAAK,EAAGgE,CAAgB,EAAC,WAAY,SAAS,EAE/C,MACD,QACM,KAAK,MAAM,IAAKhE,CAAG,IAAO,KAC9B,KAAK,MAAM,IAAKA,EAAK,EAAE,EAClBA,IAAQ,oBAAsB,KAAK,0BACvC,KAAK,8BAA6B,GAGpCgE,EAAiB,uBAAyBhE,EAAM,KAChDqF,EAAgB,KAAK,EAAGrB,GACnBqB,GAAiBA,EAAc,CAAC,GACpC,KAAK,EAAGrB,CAAc,EAAG,IAAK,KAAK,MAAM,IAAKhE,CAAG,GAElD,KAED,CAGF,KAAK,oBAAmB,CACxB,CAED,qBAAsB,CAChB,KAAK,MAAM,IAAK,wBAAwB,IAAO,GACnD,KAAK,EAAG,0BAA0B,EAAG,KAAM,WAAY,QAEvD,KAAK,EAAG,0BAA4B,EAAC,WAAY,UAAU,EAE5DZ,OAAG,oBAAsB,EAAC,IAAK,UAAW,CAAC,CAC3C,CAED,iBAAkB,EAAG8F,EAAgB,CACpC,IAAIlF,EAAM,EAAE,cAAc,KAe1B,OAdA,KAAK,MAAM,IAAKA,EAAKZ,OAAG,EAAE,aAAa,EAAG,IAAG,GACxC,KAAK,MAAM,IAAK,iBAAiB,GACrC,KAAK,MAAM,IAAK,yBAA0B,EAAI,EAC9C,KAAK,EAAG,sCAAsC,EAAG,KAAM,UAAW,WAClE,KAAK,EAAG,sCAAsC,EAAG,CAAC,EAAE,QAAU,GAC9D,KAAK,EAAG,sCAAsC,EAAG,KAAM,WAAY,cAEnE,KAAK,MAAM,IAAK,yBAA0B,EAAK,EAC1C,KAAK,EAAG,sCAAwC,GAAI,KAAK,EAAG,wCAAyC,CAAC,IAC1G,KAAK,EAAG,sCAAwC,EAAC,WAAY,SAAS,EACtE,KAAK,EAAG,sCAAsC,EAAG,CAAC,EAAE,QAAU,GAC9D,KAAK,EAAG,sCAAwC,EAAC,WAAY,UAAU,IAGhEY,EAAG,CAMX,IAAK,mBACC,KAAK,MAAM,IAAKA,CAAG,IAAO,IAAM,KAAK,0BACzC,KAAK,8BAA6B,EAClCkF,EAAgB,IAEhB,KAAK,8BAA6B,EAEnC,MACD,IAAK,yBACC9F,OAAG,EAAE,aAAe,EAAC,GAAI,UAAU,GACvC,KAAK,MAAM,IAAKY,EAAK,EAAI,EACzB,KAAK,eAAc,IAEnB,KAAK,MAAM,IAAKA,EAAK,EAAK,EAC1B,KAAK,EAAG,0BAA4B,EAAC,WAAY,UAAU,GAE5D,MACD,IAAK,iBACL,IAAK,kBAIJ,KAAK,eAAc,EACnB,KACD,CAMKkF,GACL,KAAK,SAAQ,CAEd,CAED,gBAAiB,CACX,KAAK,MAAM,IAAK,wBAAwB,IAAO,GACnD,KAAK,EAAG,0BAA0B,EAAG,KAAM,WAAY,QAEvD,KAAK,EAAG,0BAA4B,EAAC,WAAY,UAAU,EAE5D,IAAIK,EAAkB,KAAK,EAAG,+BAAiC,EAAC,IAAG,EAC/DC,EAAiB,KAAK,EAAG,8BAAgC,EAAC,IAAG,EACjEA,EAAiBA,GAAkC,IAAI,KAAI,EAAG,OAAQ,aACtE,IAAIC,EAAa,EACZF,IAAoB,IAAMC,IAAmB,IACjDC,EAAa,KAAK,IAAI,eAAgBF,EAAiBC,EAAgB,CAAE,MAAO,GAAS,EAAC,UAAS,EACnG,KAAK,EAAG,0BAA4B,EAAC,IAAKC,CAAU,GAEpD,KAAK,EAAG,0BAA4B,EAAC,IAAKA,CAAU,EAErD,KAAK,MAAM,IAAK,aAAcA,CAAU,CACxC,CAwBF,0KCpOO,MAAM,+CAA+C,iCAAkC,CAC7F,YAAa1G,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CAAA,GAErB,MAAOA,CAAO,CACd,CAED,KAAMA,EAAU,CACf,KAAK,sBAAwB,EAC7B,CAED,yBAA0BO,EAAW,CACpC,IAAIN,EAAQ,KACRiD,EAAS,CAAA,EACbA,EAAO,YAAc,GACrBA,EAAO,YAAY,GAAK,KAAK,MAAM,GACnC,KAAK,IAAI,yBAA6BA,EAAQ,CAC7C,SAAU,SAAUrC,EAAS,CAC5B,GAAKA,GAAUA,EAAO,UAAY,CACjC,IAAIgC,EAAchC,EAAO,YACnBgC,IACLA,EAAc,CAAA,GAEfA,EAAcA,EAAY,CAAC,EAC3B5C,EAAM,MAAM,IAAK4C,GACZtC,GACJA,GAEN,MACKN,EAAM,eAAgBY,GACtB,YAAY,aAAY,CAEzB,CACJ,EACE,CAED,0BAA2B,CAC1B,MAAM,yBAAwB,EAC9B,IAAIoE,EACAqB,EAEJ,QAAUrF,KAAO,KAAK,MAAM,WAC3B,GAAM,KAAK,MAAM,IAAKA,CAAG,EAMzB,OAASA,EAAG,CAWX,QACM,KAAK,MAAM,IAAKA,CAAG,IAAO,KAC9B,KAAK,MAAM,IAAKA,EAAK,EAAE,EAClBA,IAAQ,oBAAsB,KAAK,0BACvC,KAAK,8BAA6B,GAGpCgE,EAAiB,uBAAyBhE,EAAM,KAChDqF,EAAgB,KAAK,EAAGrB,GACnBqB,GAAiBA,EAAc,CAAC,GACpC,KAAK,EAAGrB,CAAc,EAAG,IAAK,KAAK,MAAM,IAAKhE,CAAG,GAElD,KAED,CAIF,CACF,kLC7EO,MAAM,gDAAgD,iCAAkC,CAC9F,YAAajB,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CAGvB,GAEE,MAAOA,CAAO,CACd,CAED,KAAMA,EAAU,CACf,KAAK,sBAAwB,GAC7B,KAAK,aAAe,MAAM,iBAC1B,CAED,aAAc,CACb,IAAIC,EAAQ,KACR0E,EAAO,CAAA,EACX,KAAK,IAAI,iCAAkC,YAAa,CACvD,SAAU,SAAU9D,EAAS,CAC5BZ,EAAM,cAAe,eAAgBY,EAAO,UAAS,EAAI,GACzD,CACJ,GACE,IAAI+D,EAAc,CAAA,EAClBA,EAAY,QAAU,CAAC,KAAK,qBAAqB,EACjDD,EAAK,YAAcC,EACnBD,EAAK,eAAiB,CACrB,GAAM,GACN,KAAQ,EACX,EACE,KAAK,kBAAkB,iBAAkBA,EAAM,GAAM,CACpD,SAAU,SAAU9D,EAAS,CAC5B,IAAIoC,EAAMpC,EAAO,YACbb,EAAU,CAAA,EACd,QAAU6B,KAAKoB,EACd,GAAMA,EAAI,eAAgBpB,GAG1B,KAAId,EAAMkC,EAAIpB,CAAC,EACf7B,EAAQe,EAAI,EAAE,EAAIV,OAAE,KAAK,EAAGU,EAAI,MAEjCd,EAAM,cAAe,mBAAoBD,EAAS,EAAI,CACtD,CACJ,GACE,KAAK,aAAa,YAAa,CAC9B,SAAU,SAAUa,EAAS,CAC5B,IAAIoC,EAAMpC,EAAO,YACbb,EAAU,CAAA,EACd,QAAU6B,KAAKoB,EACd,GAAMA,EAAI,eAAgBpB,GAG1B,KAAId,EAAMkC,EAAIpB,CAAC,EACf7B,EAAQe,EAAI,EAAE,EAAIV,OAAE,KAAK,EAAGU,EAAI,MAEjCd,EAAM,cAAe,cAAeD,EAAS,EAAI,CACjD,CACJ,EACE,CAED,0BAA2BO,EAAW,CACrC,IAAIN,EAAQ,KACRiD,EAAS,CAAA,EACbA,EAAO,YAAc,GACrBA,EAAO,YAAY,GAAK,KAAK,MAAM,GACnC,KAAK,IAAI,0BAA8BA,EAAQ,CAC9C,SAAU,SAAUrC,EAAS,CAC5B,GAAKA,GAAUA,EAAO,UAAY,CACjC,IAAIgC,EAAchC,EAAO,YACnBgC,IACLA,EAAc,CAAA,GAEfA,EAAcA,EAAY,CAAC,EAC3B5C,EAAM,MAAM,IAAK4C,GACZtC,GACJA,GAEN,MACKN,EAAM,eAAgBY,GACtB,YAAY,aAAY,CAEzB,CACJ,EACE,CAED,0BAA2B,CAC1B,MAAM,yBAAwB,EAC9B,IAAIoE,EACAqB,EAEJ,QAAUrF,KAAO,KAAK,MAAM,WAC3B,GAAM,KAAK,MAAM,IAAKA,CAAG,EAGzB,OAASA,EAAG,CACX,QACM,KAAK,MAAM,IAAKA,CAAG,IAAO,KAC9B,KAAK,MAAM,IAAKA,EAAK,EAAE,EAClBA,IAAQ,oBAAsB,KAAK,0BACvC,KAAK,8BAA6B,GAGpCgE,EAAiB,uBAAyBhE,EAAM,KAChDqF,EAAgB,KAAK,EAAGrB,GACnBqB,GAAiBA,EAAc,CAAC,GACpC,KAAK,EAAGrB,CAAc,EAAG,IAAK,KAAK,MAAM,IAAKhE,CAAG,GAElD,KAED,CAEF,CACF,oLCjHO,MAAM,6CAA6C,iCAAkC,CAC3F,YAAajB,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CAAA,GAErB,MAAOA,CAAO,CACd,CAED,KAAMA,EAAU,CACf,KAAK,sBAAwB,EAC7B,CAED,uBAAwBO,EAAW,CAClC,IAAIN,EAAQ,KACRiD,EAAS,CAAA,EACbA,EAAO,YAAc,GACrBA,EAAO,YAAY,GAAK,KAAK,MAAM,GACnC,KAAK,IAAI,uBAA2BA,EAAQ,CAC3C,SAAU,SAAUrC,EAAS,CAC5B,GAAKA,GAAUA,EAAO,UAAY,CACjC,IAAIgC,EAAchC,EAAO,YACnBgC,IACLA,EAAc,CAAA,GAEfA,EAAcA,EAAY,CAAC,EAC3B5C,EAAM,MAAM,IAAK4C,GACZtC,GACJA,GAEN,MACKN,EAAM,eAAgBY,GACtB,YAAY,aAAY,CAEzB,CACJ,EACE,CAED,0BAA2B,CAC1B,MAAM,yBAAwB,EAC9B,IAAIoE,EACAqB,EAEJ,QAAUrF,KAAO,KAAK,MAAM,WAC3B,GAAM,KAAK,MAAM,IAAKA,CAAG,EAGzB,OAASA,EAAG,CACX,QACM,KAAK,MAAM,IAAKA,CAAG,IAAO,KAC9B,KAAK,MAAM,IAAKA,EAAK,EAAE,EAClBA,IAAQ,oBAAsB,KAAK,0BACvC,KAAK,8BAA6B,GAGpCgE,EAAiB,uBAAyBhE,EAAM,KAChDqF,EAAgB,KAAK,EAAGrB,GACnBqB,GAAiBA,EAAc,CAAC,GACpC,KAAK,EAAGrB,CAAc,EAAG,IAAK,KAAK,MAAM,IAAKhE,CAAG,GAElD,KAED,CAEF,CACF,8KC/DO,MAAM,8CAA8C,iCAAkC,CAC5F,YAAajB,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CAAA,GAErB,MAAOA,CAAO,CACd,CAED,KAAMA,EAAU,CACf,KAAK,sBAAwB,EAC7B,CAED,aAAc,CACb,IAAIC,EAAQ,KACR0E,EAAO,CAAA,EACX,KAAK,IAAI,+BAAgC,UAAW,CACnD,SAAU,SAAU9D,EAAS,CAC5BZ,EAAM,cAAe,aAAcY,EAAO,UAAS,EAAI,GACvD,CACJ,GACE,KAAK,IAAI,+BAAgC,aAAc,CACtD,SAAU,SAAUA,EAAS,CAC5BZ,EAAM,cAAe,gBAAiBY,EAAO,UAAS,EAAI,GAC1D,CACJ,GAEE,IAAI+D,EAAc,CAAA,EAClBA,EAAY,QAAU,CAAC,KAAK,qBAAqB,EACjDD,EAAK,YAAcC,EACnBD,EAAK,eAAiB,CACrB,GAAM,GACN,KAAQ,EACX,EACE,KAAK,kBAAkB,iBAAkBA,EAAM,GAAM,CACpD,SAAU,SAAU9D,EAAS,CAC5B,IAAIoC,EAAMpC,EAAO,YACbb,EAAU,CAAA,EACd,QAAU6B,KAAKoB,EACd,GAAMA,EAAI,eAAgBpB,GAG1B,KAAId,EAAMkC,EAAIpB,CAAC,EACf7B,EAAQe,EAAI,EAAE,EAAIV,OAAE,KAAK,EAAGU,EAAI,MAEjCd,EAAM,cAAe,mBAAoBD,EAAS,EAAI,CACtD,CACJ,EACE,CAED,wBAAyBO,EAAW,CACnC,IAAIN,EAAQ,KACRiD,EAAS,CAAA,EACbA,EAAO,YAAc,GACrBA,EAAO,YAAY,GAAK,KAAK,MAAM,GACnC,KAAK,IAAI,wBAA4BA,EAAQ,CAC5C,SAAU,SAAUrC,EAAS,CAC5B,GAAKA,GAAUA,EAAO,UAAY,CACjC,IAAIgC,EAAchC,EAAO,YACnBgC,IACLA,EAAc,CAAA,GAEfA,EAAcA,EAAY,CAAC,EAC3B5C,EAAM,MAAM,IAAK4C,GACZtC,GACJA,GAEN,MACKN,EAAM,eAAgBY,GACtB,YAAY,aAAY,CAEzB,CACJ,EACE,CAED,0BAA2B,CAC1B,MAAM,yBAAwB,EAC9B,IAAIoE,EACAqB,EAEJ,QAAUrF,KAAO,KAAK,MAAM,WAC3B,GAAM,KAAK,MAAM,IAAKA,CAAG,EAGzB,OAASA,EAAG,CACX,QACM,KAAK,MAAM,IAAKA,CAAG,IAAO,KAC9B,KAAK,MAAM,IAAKA,EAAK,EAAE,EAClBA,IAAQ,oBAAsB,KAAK,0BACvC,KAAK,8BAA6B,GAGpCgE,EAAiB,uBAAyBhE,EAAM,KAChDqF,EAAgB,KAAK,EAAGrB,GACnBqB,GAAiBA,EAAc,CAAC,GACpC,KAAK,EAAGrB,CAAc,EAAG,IAAK,KAAK,MAAM,IAAKhE,CAAG,GAElD,KAED,CAEF,CACF,gLCpGO,MAAM,wCAAwC,iCAAkC,CACtF,YAAajB,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CAAA,GAErB,MAAOA,CAAO,CACd,CAED,QAAS,CACR,IAAIC,EAAQ,KACRoE,EAAW,OAAO,WAAY,kDAAkD,EAChFC,EAAY,KAAK,YAAc,IAAM,KAAK,MAAM,GAMpD,GALA,KAAK,UAAYA,EACjB,KAAK,SAAW,EAAE,SAAUD,CAAQ,EAAI,CAAA,GACnC,KAAK,gBAAgB,KAAM,kBAAoB,EAAC,QAAU,GAC9D,KAAK,gBAAgB,KAAM,kJAEvB,KAAK,gBAAgB,KAAM,IAAMC,CAAW,EAAC,SAAW,EAAI,CAChE,IAAIC,EAAQlE,OAAG,MAAM,EAAG,KAAM,KAAMiE,GACpCjE,OAAG,KAAK,gBAAgB,KAAM,SAAU,CAAC,CAAG,EAAC,OAAQkE,EACxD,MACG,KAAK,gBAAgB,KAAM,IAAMD,GAAY,KAAM,IAEpD,IAAIE,EAAQnE,OAAG,QACf,QAAUoE,KAAU,KAAK,gBACxB,GAAM,KAAK,gBAAgB,eAAgBA,CAAM,EAGjD,KAAIC,EACJ,OAASD,EAAM,CACd,QAMC,GALM,KAAK,MAAM,IAAKA,CAAM,EAG3BC,EAAa,KAAK,MAAM,IAAKD,CAAM,EAFnCC,EAAa,GAITD,IAAW,cAAgB,CAC/B,IAAItE,EAAM,OAAO,WAAY,KAAM,GAAM,IAAO,QAAQ,gBAAiB,iCAAmC,KAAK,MAAM,IAAK,gBAAgB,EAAK,IAAI,EACrJ,KAAK,gBAAgB,KAAM,IAAMmE,CAAW,EAAC,OAAQ,gBAAkBnE,EAAM,KAAOuE,EAAa,WAAW,CAClH,MACM,KAAK,gBAAgB,KAAM,IAAMJ,GAAY,OAAQ,OAASI,EAAa,SAE5E,KACD,CACDF,EAAM,OAAQ,OAAS,KAAK,gBAAgBC,CAAM,EAAI,SAEvDD,EAAM,OAAQ,OAASnE,OAAE,KAAK,EAAG,UAAa,SACzC,KAAK,gBAAgB,KAAM,OAAO,EAAG,KAAM,IAAK,IACpD,KAAK,gBAAgB,KAAM,OAAO,EAAG,KAAMmE,GAE5C,KAAK,gBAAgB,KAAM,IAAMF,CAAS,EAAG,OAAQ,KAAK,UAC1D,KAAK,gBAAgB,KAAM,IAAMA,CAAW,EAAC,KAAM,cAAe,SAMlE,KAAK,gBAAgB,KAAM,IAAMA,CAAW,EAAC,KAAM,cAAc,EAAG,OAAQ,OAAS,EAAC,KAAM,QAAS,SAAUhE,EAAI,CAClHL,EAAM,MAAQA,EAAM,WAAW,EAAG,UAAW,CAC5CA,EAAM,cAAa,CACvB,EACA,EACE,CAED,kBAAmBM,EAAW,CAC7B,IAAIN,EAAQ,KACRiD,EAAS,CAAA,EACbA,EAAO,YAAc,GACrBA,EAAO,YAAY,GAAK,KAAK,MAAM,GACnC,KAAK,IAAI,kBAAsBA,EAAQ,CACtC,SAAU,SAAUrC,EAAS,CAC5B,GAAKA,GAAUA,EAAO,UAAY,CACjC,IAAIgC,EAAchC,EAAO,YACnBgC,IACLA,EAAc,CAAA,GAEfA,EAAcA,EAAY,CAAC,EAC3B5C,EAAM,MAAM,IAAK4C,GACZtC,GACJA,GAEN,MACKN,EAAM,eAAgBY,GACtB,YAAY,aAAY,CAEzB,CACJ,EACE,CAoCF,oKCvHO,MAAM,kCAAkC,iCAAkC,CAChF,YAAab,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CACvB,GAEE,MAAOA,CAAO,CACd,CAED,KAAMA,EAAU,CACf,KAAK,aAAe,MAAM,kBAC1B,KAAK,gBAAkB,IACvB,CAED,QAAS,CACR,IAAIC,EAAQ,KACRoE,EAAW,OAAO,WAAY,kDAAkD,EAChFC,EAAY,KAAK,YAAc,IAAM,KAAK,MAAM,GAMpD,GALA,KAAK,UAAYA,EACjB,KAAK,SAAW,EAAE,SAAUD,CAAQ,EAAI,CAAA,GACnC,KAAK,gBAAgB,KAAM,kBAAoB,EAAC,QAAU,GAC9D,KAAK,gBAAgB,KAAM,kJAEvB,KAAK,gBAAgB,KAAM,IAAMC,CAAW,EAAC,SAAW,EAAI,CAChE,IAAIC,EAAQlE,OAAG,MAAM,EAAG,KAAM,KAAMiE,GACpCjE,OAAG,KAAK,gBAAgB,KAAM,SAAU,CAAC,CAAG,EAAC,OAAQkE,EACxD,MACG,KAAK,gBAAgB,KAAM,IAAMD,GAAY,KAAM,IAEpD,IAAIE,EAAQnE,OAAG,QACf,QAAUoE,KAAU,KAAK,gBACxB,GAAM,KAAK,gBAAgB,eAAgBA,CAAM,EAGjD,KAAIC,EACJ,OAASD,EAAM,CACd,QACO,KAAK,MAAM,IAAKA,CAAM,EAG3BC,EAAa,KAAK,MAAM,IAAKD,CAAM,EAFnCC,EAAa,GAITD,IAAW,OACf,KAAK,gBAAgB,KAAM,IAAMH,GAAY,OAAQ,iEAAmEI,EAAa,aAErI,KAAK,gBAAgB,KAAM,IAAMJ,GAAY,OAAQ,OAASI,EAAa,SAE5E,KACD,CACDF,EAAM,OAAQ,OAAS,KAAK,gBAAgBC,CAAM,EAAI,SAEvDD,EAAM,OAAQ,OAASnE,OAAE,KAAK,EAAG,UAAa,SACzC,KAAK,gBAAgB,KAAM,OAAO,EAAG,KAAM,IAAK,IACpD,KAAK,gBAAgB,KAAM,OAAO,EAAG,KAAMmE,GAE5C,KAAK,gBAAgB,KAAM,IAAMF,CAAS,EAAG,OAAQ,KAAK,UAC1D,KAAK,gBAAgB,KAAM,IAAMA,CAAW,EAAC,KAAM,sBAAsB,EAAG,OAAQ,OAAS,EAAC,KAAM,QAAS,SAAUhE,EAAI,CAC1H,IAAI4C,EAAS,CAAA,EACbA,EAAO,YAAc,GACrBA,EAAO,YAAY,GAAKjD,EAAM,MAAM,GACpCA,EAAM,aAAa,cAAkBiD,EAAQ,CAC5C,SAAU,SAAUL,EAAc,CACjC5C,EAAM,aAAc4C,EACpB,CACL,EACA,GACE,KAAK,gBAAgB,KAAM,IAAMyB,CAAW,EAAC,KAAM,YAAY,EAAG,OAAQ,OAAS,EAAC,KAAM,QAAS,SAAUhE,EAAI,CAChHL,EAAM,MAAQA,EAAM,WAAW,EAAG,UAAW,CAC5CA,EAAM,YAAW,CACrB,EACA,GACE,KAAK,gBAAgB,KAAM,IAAMqE,CAAW,EAAC,KAAM,cAAc,EAAG,OAAQ,OAAS,EAAC,KAAM,QAAS,SAAUhE,EAAI,CAClHL,EAAM,MAAQA,EAAM,WAAW,EAAG,UAAW,CAC5CA,EAAM,cAAa,CACvB,EACA,EACE,CAED,aAAc4C,EAAc,CAE3B,IAAIgB,EAAOhB,EAAY,YACvB,GAAKgB,EAAK,OAAS,EAAI,CACtB,IAAI8C,EAAc9C,EAAK,CAAC,EAAE,GACtBL,EAAuBK,EAAK,CAAC,EAAE,qBAE/B1D,EAAM,cAAc,UAAW,uDAA4D,EAC1F,eAAe,cAAe,EAAC,aACnCA,EAAMA,EAAM,eAAiB,eAAe,cAAa,EAAG,YAG7D,IAAIyG,EAAY,CAAE,UAAWD,EAAa,UAAWnD,CAAoB,EAEzE,OAAO,gBAAiB,KAAM,KAAMoD,EAAWzG,CAAG,CAClD,CACD,CAED,aAAc,CAEb,CAED,YAAaI,EAAW,CACvB,IAAIN,EAAQ,KACRiD,EAAS,CAAA,EACbA,EAAO,YAAc,GACrBA,EAAO,YAAY,GAAK,KAAK,MAAM,GACnC,KAAK,IAAI,YAAgBA,EAAQ,CAChC,SAAU,SAAUrC,EAAS,CAC5B,GAAKA,GAAUA,EAAO,UAAY,CACjC,IAAIgC,EAAchC,EAAO,YACnBgC,IACLA,EAAc,CAAA,GAEfA,EAAcA,EAAY,CAAC,EAC3B5C,EAAM,MAAM,IAAK4C,GACZtC,GACJA,GAEN,MACKN,EAAM,eAAgBY,GACtB,YAAY,aAAY,CAEzB,CACJ,EACE,CAED,0BAA2B,CAC1B,MAAM,yBAAwB,EAC9B,IAAIoE,EACAqB,EAEJ,QAAUrF,KAAO,KAAK,MAAM,WAC3B,GAAM,KAAK,MAAM,IAAKA,CAAG,EAGzB,OAASA,EAAG,CACX,IAAK,UACL,IAAK,WACJgE,EAAiB,eAAiBhE,EAAM,KACnC,KAAK,MAAM,IAAKA,CAAG,IAAO,GAC9B,KAAK,EAAGgE,CAAc,EAAG,KAAM,UAAW,WAC/B,KAAK,MAAM,IAAKhE,CAAG,IAAO,IACrC,KAAK,EAAGgE,CAAgB,EAAC,WAAY,SAAS,EAE/C,MACD,QACM,KAAK,MAAM,IAAKhE,CAAG,IAAO,IAC9B,KAAK,MAAM,IAAKA,EAAK,EAAE,EAExBgE,EAAiB,uBAAyBhE,EAAM,KAChDqF,EAAgB,KAAK,EAAGrB,GACnBqB,GAAiBA,EAAc,CAAC,GACpC,KAAK,EAAGrB,CAAc,EAAG,IAAK,KAAK,MAAM,IAAKhE,CAAG,GAElD,KAED,CAEF,CAED,aAAc,CACb,IAAIhB,EAAQ,KACP,EAAE,KAAM,KAAK,sBAAsB,EAAK,IAGvC,KAAK,MAAM,IAAK,MAAM,GAC3B,KAAK,MAAM,IAAK,OAAQ,YAAmB,eAAe,mBAAkB,EAAG,WAAa,IAAM,eAAe,mBAAoB,EAAC,SAAS,EAEhJ,KAAK,IAAI,MAAQ,KAAK,WAAW,EAAG,KAAK,MAAM,SAAU,CACxD,SAAU,SAAUY,EAAS,CAC5B,GAAKA,GAAUA,EAAO,UAAY,CACjC,IAAIgC,EAAchC,EAAO,YACpBgC,IAAgB,IAAQ,OAAO,OAAQA,CAAW,GAAMA,GAAe,OAAO,SAAWA,GAAe,OAAO,cACnH5C,EAAM,MAAM,IAAK,KAAM4C,CAAW,EAEnC5C,EAAM,aAAcY,EAAQ,UAAW,CACtCZ,EAAM,MAAQA,EAAM,WAAW,EAAG,UAAW,CAC5C,YAAY,yBAA0B,iBAEtCA,EAAM,cAAa,EACnBA,EAAM,UAAU,gBACvB,EACA,EACA,MACKA,EAAM,aAAcY,EAErB,CACJ,GACE,CAED,aAAcgG,EAAiBtG,EAAW,CACzC,IAAIoG,EAAcE,EAAgB,YAK9BvD,EAAO,KAAK,EAAG,yBAA2B,EAAC,CAAC,EAAE,MAAM,CAAC,EACrDwD,EAAO,IAAI,SAKf,GAJKH,IAAgB,KACpBA,EAAc,KAAK,MAAM,IAGrBrD,EAAO,CACX,IAAIC,EAAgB,KAAK,MAAM,IAAK,MAAM,EACtCwD,EAAW,KAAK,MAAM,IAAK,UAAU,EACrCvD,EAAuB,KAAK,aAAa,cAAeD,EAAeoD,EAAaI,EAAU,CAAE,MAAO,EAAO,CAAA,EAAG,UAAW,EAAC,qBACjID,EAAK,OAAQ,YAAaxD,GAC1B,KAAK,WAAYwD,EAAMtD,EAAsBjD,CAAQ,CACxD,MACGA,GAED,CAED,WAAYmD,EAAWF,EAAsBjD,EAAW,CACvD,IAAIJ,EAAM,cAAc,UAAW,SAAW,KAAK,aAAa,UAAY,gCACvE,eAAe,cAAe,EAAC,aACnCA,EAAMA,EAAM,eAAiB,eAAe,cAAa,EAAG,YAE7DA,EAAMA,EAAM,cAAgBqD,EAC5B,IAAIG,EAAa,OAAO,eACxB,YAAY,gBAAiBA,GAC7B,YAAY,yBAA0B,kBACtCtD,OAAE,KAAM,CACP,IAAKF,EACL,QAAS,CAER,cAAe,mBACf,eAAgB,UAAW,YAAc,CACzC,EACD,KAAM,OACN,KAAMuD,EACN,QAAS,SAAUT,EAAM,CAExB,GADA,YAAY,kBAAiB,EACxBA,EAAI,MAAM,OAAS,EAAI,CAC3B,oBAAoB,SAAS,OAAO,aAAcA,EAAI,KAAK,EAC3D,MACA,CACD1C,GACA,EACD,MAAO,GACP,YAAa,GACb,YAAa,EAChB,EACE,CAED,iBAAkB,EAAG4F,EAAgB,CACpC,IAAIlF,EAAM,EAAE,cAAc,KAE1B,OADA,KAAK,MAAM,IAAKA,EAAKZ,OAAG,EAAE,aAAa,EAAG,IAAG,GACpCY,EAAG,CAMX,IAAK,UACL,IAAK,WACCZ,OAAG,EAAE,aAAe,EAAC,GAAI,UAAU,EACvC,KAAK,MAAM,IAAKY,EAAK,EAAI,EAEzB,KAAK,MAAM,IAAKA,EAAK,EAAK,EAE3B,KACD,CACKkF,GACL,KAAK,SAAQ,CAEd,CACF,wJC7PO,MAAM,gCAAgC,wBAAyB,CACrE,YAAanG,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CACpB,GAAI,mBACJ,OAAQ,CACP,iBAAkB,cAClB,wBAAyB,qBACzB,sBAAuB,mBACvB,4BAA6B,mBAC7B,gCAAiC,mBACjC,6BAA8B,mBAC9B,+BAAgC,mBAChC,2BAA4B,mBAC5B,8BAA+B,mBAE/B,CAaJ,GAEE,MAAOA,CAAO,CACd,CAED,MAAO,CACN,GAAK,CAAC,OAAO,MAAO,eAAe,mBAAoB,CAAA,EACtD,MAAO,GAGR,KAAK,oBAAsB,OAAO,MAAO,eAAe,mBAAkB,GAC1E,KAAK,MAAQ,IAAI,SAAS,MAAO,KAAK,qBACtC,KAAK,OAAS,YAGd,KAAK,IAAM,MAAM,sBACjB,KAAK,YAAc,MAAM,iBACzB,KAAK,iBAAmB,MAAM,qBAC9B,KAAK,kBAAoB,MAAM,uBAC/B,KAAK,YAAc,cACnB,KAAK,uBAAyB,GAC9B,KAAK,iBAAmB,GACxB,KAAK,kBAAoB,GACzB,KAAK,oBAAsB,GAC3B,KAAK,0BAA4B,GACjC,KAAK,iBAAmB,GACxB,KAAK,gBAAkB,GACvB,KAAK,aAAe,GACpB,KAAK,iBAAmB,GACxB,KAAK,kBAAoB,GACzB,KAAK,eAAiB,GACtB,KAAK,gBAAkB,GACvB,KAAK,gCAAkC,GACvC,KAAK,WAAa,KAElB,IAAIC,EAAQ,KACZ,KAAK,6BAA8B,UAAW,CAC7CA,EAAM,OAAM,CACf,EAEE,CAED,gBAAiB,CAChB,IAAIA,EAAQ,KACZ,KAAK,IAAI,gBAAiB,CACzB,SAAU,SAAUY,EAAS,CACvBA,GAAUA,EAAO,YACrB,eAAe,mBAAoBA,EAAO,UAAS,EAAG,CAAC,CAAC,EACxDZ,EAAM,oBAAsB,OAAO,MAAO,eAAe,mBAAkB,IAE5EA,EAAM,EAAG,uBAAyB,EAAC,OAAM,EACzCA,EAAM,OAAM,CACZ,CACJ,EACE,CAED,6BAA8BM,EAAW,CACxC,IAAIN,EAAQ,KACR+G,EACJ,KAAK,IAAI,2BAA4B,GAAI,CACxC,SAAU,SAAU/D,EAAM,CACzB,IAAIpC,EAASoC,EAAI,YAKjB,GAJK,OAAO,QAASpC,KACpBmG,EAAWnG,EAAO,CAAC,GAGfmG,EACJ,QAAUC,KAAWD,EAAW,CAC/B,IAAIE,EAKJ,GAJKF,EAAS,eAAgBC,KAC7BC,EAA+BF,EAASC,CAAO,GAG3C,OAAO,QAASC,GACpB,QAAUrF,EAAI,EAAGA,EAAIqF,EAA6B,OAAQrF,IAAM,CAC/D,IAAIsF,EAA8BD,EAA6BrF,CAAC,EAChE5B,EAAMgH,EAAU,SAAS,EAAEE,CAA2B,EAAI,EAC1D,CAEF,CAEFlH,EAAM,IAAI,gBAAiB,CAC1B,SAAU,SAAUY,EAAS,CACvBA,GAAUA,EAAO,YACrB,eAAe,mBAAoBA,EAAO,UAAS,EAAG,CAAC,CAAC,EACxDZ,EAAM,oBAAsB,OAAO,MAAO,eAAe,mBAAkB,IAGvEM,GACJA,GAED,CACN,EACI,CACJ,EACE,CAED,QAAS,CACR,IAAIe,EAAM,OAAO,WAAY,qDAAqD,EAClF,KAAK,IAAI,OAAQ,EAAE,SAAUA,CAAG,EAAI,CACnC,UAAa,KAAK,iBAClB,WAAc,KAAK,kBACnB,aAAgB,KAAK,oBACrB,mBAAsB,KAAK,0BAC3B,UAAa,KAAK,iBAClB,SAAY,KAAK,gBACjB,MAAS,KAAK,aACd,UAAa,KAAK,iBAClB,WAAc,KAAK,kBACnB,QAAW,KAAK,eAChB,SAAY,KAAK,eACjB,CAAA,GACD,KAAK,YAAW,EAChB,KAAK,mBAAkB,EACvB,KAAK,yBAAwB,EAC7B,KAAK,mBAAkB,EACvB,KAAK,yBAAwB,EAC7B,KAAK,uBAAsB,EAC3B,KAAK,oBAAmB,EAExB,IAAIrB,EAAQ,KAEZI,OAAG,4DAA8D,EAAC,GAAI,SAAU,SAAUC,EAAI,CAC7FL,EAAM,iBAAkBK,EAC3B,EACE,CAED,aAAc,CACb,IAAIL,EAAQ,KACZ,KAAK,IAAI,uBAAwB,MAAO,CACvC,SAAU,SAAUY,EAAS,CAC5BZ,EAAM,cAAe,SAAUY,EAAO,UAAW,CAAA,CACjD,CACJ,GACE,KAAK,iBAAiB,eAAgB,CAAE,eAAgB,CAAE,GAAM,GAAM,KAAQ,EAAM,CAAA,EAAI,GAAM,CAC7F,SAAU,SAAUA,EAAS,CAC5B,IAAIoC,EAAMpC,EAAO,YACbb,EAAU,CAAA,EACd,QAAU6B,KAAKoB,EACd,GAAMA,EAAI,eAAgBpB,GAG1B,KAAId,EAAMkC,EAAIpB,CAAC,EACf7B,EAAQe,EAAI,EAAE,EAAIV,OAAE,KAAK,EAAGU,EAAI,MAEjCd,EAAM,cAAe,kBAAmBD,EAAS,EAAI,CACrD,CACJ,GACE,KAAK,IAAI,uBAAwB,oBAAqB,CACrD,SAAU,SAAUa,EAAS,CAC5BZ,EAAM,cAAe,uBAAwBY,EAAO,UAAS,EAAI,GACjE,CACJ,GACE,KAAK,YAAY,WAAY,UAAW,CACvC,SAAU,SAAUA,EAAS,CAC5B,IAAIA,EAASA,EAAO,YACpBZ,EAAM,cAAe,UAAWY,EAAQ,EAAI,EAC5CZ,EAAM,cAAe,yBAA0BY,EAAQ,EAAI,CAC3D,CACJ,GACE,KAAK,IAAI,uBAAwB,sBAAuB,CACvD,SAAU,SAAUA,EAAS,CAC5BZ,EAAM,cAAe,yBAA0BY,EAAO,UAAS,EAAI,GACnE,CACJ,GACE,KAAK,IAAI,uBAAwB,yBAA0B,CAC1D,SAAU,SAAUA,EAAS,CAC5BZ,EAAM,cAAe,yBAA0BY,EAAO,UAAS,EAAI,GACnE,CACJ,GACE,KAAK,IAAI,uBAAwB,yBAA0B,CAC1D,SAAU,SAAUA,EAAS,CAC5BZ,EAAM,cAAe,yBAA0BY,EAAO,UAAS,EAAI,GACnE,CACJ,EACE,CAED,cAAe,EAAI,CAClB,IAAIgE,EAAOxE,OAAG,EAAE,aAAe,EAAC,OAAQ,EAAC,KAAM,UAC/C,GAAK,SAAS,YAAc,CAC3B,IAAI,EAAI,SAAS,YAAa,aAAa,EAC3C,EAAE,eAAgB,YAAa,GAAM,GAAM,OAAQ,EAAG,EAAG,EAAG,EAAG,EAAG,GAAO,GAAO,GAAO,GAAO,EAAG,MACjGwE,EAAK,CAAC,EAAE,cAAe,CAAC,CAC3B,MAAc,QAAQ,WACnBA,EAAK,CAAC,EAAE,UAAW,aAAa,CAEjC,CAED,oBAAqB,CAEpB,IAAIQ,EAAS,SACTC,EACAC,EAAU,GAMVC,EAAe,CAClBnF,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAO,EACvDA,OAAE,KAAK,EAAG,KAAO,EAAEA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAO,CAC7E,EACMoF,EAAmB,CACtBpF,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAO,EACpCA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAO,EACvDA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAO,EACvDA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAK,EAAIA,OAAE,KAAK,EAAG,KAAO,EACvDA,OAAE,KAAK,EAAG,KAAO,CACpB,EACMqF,EAAerF,OAAE,KAAK,EAAG,OAAO,EAChCsF,EAAatF,OAAE,KAAK,EAAG,OAAO,EAC9BL,EAAU,CACb,SAAU,GACV,WAAYqF,EACZ,SAAU,GACV,WAAY,GACZ,YAAa,GACb,WAAY,GACZ,gBAAiB,GACjB,SAAU,GACV,SAAU,GACV,UAAW,WACX,OAAQ,GACR,YAAaG,EACb,YAAaE,EACb,gBAAiBD,EACjB,UAAWE,EACX,WAAY,UAAW,CACtB,EACD,SAAU,SAAUC,EAAW,CAC9BvF,OAAG,MAAO,QACV,EACD,QAAS,UAAW,CACnBiF,EAAkB,WAAY,UAAW,CACxCC,EAAU,EACV,EAAE,GAAG,CACN,CAEJ,EACE,KAAK,EAAG,+BAAiC,EAAC,WAAYvF,CAAO,EAM7D,KAAK,EAAG,+BAA+B,EAAG,KAAM,cAAe,aAC/D,KAAK,EAAG,+BAAiC,EAAC,KAAM,UAAW,UAAW,CAC/DuF,GAILA,EAAU,GACLD,IACJ,aAAcA,CAAe,EAC7BA,EAAkB,QANnBjF,OAAG,IAAI,EAAG,WAAY,MAAM,EAC5BkF,EAAU,GAQX,CAAA,EAAG,KAAK,YAAY,EAAE,KAAM,UAAW,UAAW,CAAElF,OAAE,IAAI,EAAE,KAAM,EAAC,QAAS,SAAS,CAAI,CAAA,CAC1F,CAED,cAAeyE,EAAOC,EAAaC,EAAY,CAC9C,IAAI/E,EAAQ,KACRgF,EAAiB,cAAgBH,EAAQ,KAC7C,GAAK,KAAK,EAAGG,CAAgB,GAAI,KAAK,EAAGA,GAAiB,CAAC,EAC1D,KAAK,EAAGA,CAAgB,EAAC,MAAK,MAE9B,QAEI,EAAE,KAAMF,CAAW,GAAM,IAC7BC,EAAY,IAERA,IAAc,KACbF,IAAU,0BAA4BA,IAAU,yBACpD,KAAK,EAAGG,CAAgB,EAAC,OAAQ5E,OAAG,mBAAmB,EAAG,KAAM,QAAS,KAAM,KAAM,MAAQA,OAAE,KAAK,EAAG,uBAAyB,EAAG,KAAO,EAAC,KAAM,WAAY,UAAU,GAEvK,KAAK,EAAG4E,CAAgB,EAAC,OAAQ5E,OAAG,mBAAmB,EAAG,KAAM,QAAS,KAAM,KAAM,MAAQA,OAAE,KAAK,EAAG,MAAQ,EAAG,KAAO,EAAC,KAAM,WAAY,UAAU,IAGnJ,EAAE,KAAM0E,CAAW,EAAK,GAC5B1E,OAAE,KAAM0E,EAAa,SAAUI,EAAOC,EAAQ,CAE7C,GADAnF,EAAM,EAAGgF,CAAgB,EAAC,OAAQ5E,OAAG,mBAAmB,EAAG,KAAM,QAAS8E,CAAK,EAAG,KAAMC,CAAO,CAAA,EAC1FN,IAAU,0BAA4BA,IAAU,0BACpD,GAAK,EAAE,QAAS7E,EAAM,oBAAoB6E,CAAK,CAAC,EAAK,CACpD7E,EAAM,EAAGgF,GAAiB,KAAM,qBAAwB,WAAY,YAEpE,QADImC,EAAQnH,EAAM,oBAAoB6E,CAAK,EACjCjD,EAAI,EAAGA,EAAIuF,EAAM,OAAQvF,IAC7BsD,GAASiC,EAAMvF,CAAC,GACpB5B,EAAM,EAAGgF,CAAgB,EAAC,KAAM,iBAAoBE,EAAQ,MAAQ,KAAM,WAAY,UAAU,CAGlG,OAEIlF,EAAM,oBAAoB6E,CAAK,GAAKK,GACxClF,EAAM,EAAGgF,CAAgB,EAAC,IAAKE,CAAK,CAI1C,GAEElF,EAAM,EAAGgF,CAAgB,EAAC,aAAY,CACtC,CAED,0BAA2B,CAC1B,IAAIA,EACAqB,EAEJ,QAAUrF,KAAO,KAAK,oBACrB,GAAM,KAAK,oBAAoB,eAAgBA,CAAG,EAMlD,OAASA,EAAG,CACX,IAAK,UACL,IAAK,yBAMCA,IAAQ,UACZ,KAAK,aAAc,KAAK,oBAAoBA,CAAG,CAAC,EACrCA,IAAQ,0BACnB,KAAK,aAAc,KAAK,oBAAoBA,CAAG,CAAC,EAEjD,MACD,IAAK,qBACL,IAAK,sBACL,IAAK,kBACJgE,EAAiB,aAAehE,EAAM,KACjC,KAAK,oBAAoBA,CAAG,IAAM,IACtC,KAAK,EAAGgE,CAAc,EAAG,KAAM,UAAW,WACrC,KAAK,EAAG,4CAA8C,EAAC,CAAC,IACvDhE,IAAQ,mBACZ,KAAK,EAAG,4CAA8C,EAAC,WAAY,UAAU,EAC7E,KAAK,EAAG,4CAA4C,EAAG,IAAK,mBAAoB,UAEhF,KAAK,EAAG,4CAA4C,EAAG,KAAM,WAAY,YACzE,KAAK,EAAG,4CAA4C,EAAG,IAAK,mBAAoB,WAGvE,KAAK,oBAAoBA,CAAG,IAAM,KAC7C,KAAK,EAAGgE,CAAgB,EAAC,WAAY,SAAS,EACzC,KAAK,EAAG,4CAA8C,EAAC,CAAC,IAC5D,KAAK,EAAG,4CAA4C,EAAG,KAAM,WAAY,YACzE,KAAK,EAAG,4CAA4C,EAAG,IAAK,mBAAoB,UAGlF,MAMD,QACM,KAAK,oBAAoBhE,CAAG,IAAM,KACtC,KAAK,oBAAoBA,CAAG,EAAI,IAEjCgE,EAAiB,qBAAuBhE,EAAM,KAC9CqF,EAAgB,KAAK,EAAGrB,GACnBqB,GAAiBA,EAAc,CAAC,GACpC,KAAK,EAAGrB,GAAiB,IAAK,KAAK,oBAAoBhE,CAAG,GAE3D,KAED,CAKF,CAED,iBAAkB,EAAGkF,EAAgB,CACpC,GAAK,EAAE,cAAc,KACpB,IAAIlF,EAAM,EAAE,cAAc,aACf,EAAE,cAAc,GAC3B,IAAIA,EAAM,EAAE,cAAc,OAE1B,OAAO,GAGR,IAAIhB,EAAQ,KAIZ,OAHA,KAAK,oBAAoBgB,CAAG,EAAIZ,OAAG,EAAE,aAAa,EAAG,MACrD,KAAK,MAAM,IAAKY,EAAKZ,OAAG,EAAE,aAAa,EAAG,IAAG,GAC7C,KAAK,WAAa,GACTY,EAAG,CAMX,IAAK,qBACL,IAAK,sBACL,IAAK,kBACCZ,OAAG,EAAE,aAAe,EAAC,GAAI,UAAU,GACvC,KAAK,oBAAoBY,CAAG,EAAI,GAChC,KAAK,MAAM,IAAKA,EAAK,EAAI,EACpBA,IAAQ,mBACP,KAAK,EAAG,4CAA8C,EAAC,CAAC,IAC5D,KAAK,EAAG,4CAA8C,EAAC,WAAY,UAAU,EAC7E,KAAK,EAAG,4CAA4C,EAAG,IAAK,mBAAoB,WAIlF,KAAK,oBAAoBA,CAAG,EAAI,GAChC,KAAK,MAAM,IAAKA,EAAK,EAAK,EACrBA,IAAQ,mBACP,KAAK,EAAG,4CAA8C,EAAC,CAAC,IAC5D,KAAK,EAAG,4CAA4C,EAAG,KAAM,WAAY,YACzE,KAAK,EAAG,4CAA4C,EAAG,IAAK,mBAAoB,UAInF,MACD,IAAK,yBACL,IAAK,yBACCZ,OAAG,EAAE,aAAe,EAAC,IAAG,IAAO,OACnC,KAAK,oBAAoBY,CAAG,EAAI,GAEjC,MACD,IAAK,mBACJkF,EAAgB,GAChB,KACD,CACD,GAAKlF,GAAO,UAAY,CACvB,KAAK,aAAc,KAAK,EAAG,sBAAsB,EAAG,IAAG,EAAI,GAAM,UAAW,CAC3EhB,EAAM,SAAQ,CAClB,GACG,MACA,CACD,GAAKgB,IAAQ,yBAA2B,CACvC,KAAK,aAAc,KAAK,EAAG,qCAAqC,EAAG,IAAG,EAAI,GAAM,UAAW,CAC1FhB,EAAM,SAAQ,CAClB,GACG,MACA,CACKkG,GACL,KAAK,SAAQ,CAEd,CAED,UAAW,CACV,IAAIlG,EAAQ,KACRkD,EAAS,KAAK,oBAClB,KAAK,IAAI,qBAAsBA,EAAQ,CACtC,SAAU,SAAUtC,EAAS,CAC5BZ,EAAM,eAAgBY,EACtB,CACJ,EACE,CAED,eAAgBA,EAAS,CACxB,KAAK,eAAc,EACnB,KAAK,aAAcA,EACnB,CAED,eAAgBuF,EAAY,CAC3B,OAAO,gBAAiB,OAAO,OAAQ,KAAK,sBAAsB,EAAG,IAAK/E,GAAQA,EAAK,CAAC,CAAG,EAAE+E,CAAS,CACtG,CAED,aAAcvF,EAAS,CACtB,KAAK,eAAgB,IACrB,IAAIG,EAAaH,EAAO,WAAY,EAAGA,EAAO,WAAY,EAAC,CAAC,EAAI,GAC3DG,GAAcA,EAAW,eAAgB,OAAO,IACpDA,EAAaA,EAAW,OAEzB,IAAIqG,EAAa,CAAA,EACZ,EAAE,KAAMrG,CAAU,EAAK,EAC3B,KAAK,EAAG,WAAa,EAAC,SAAU,OAAO,EAEvC,KAAK,EAAG,WAAa,EAAC,YAAa,OAAO,EAE3C,QAAUC,KAAOD,EAChB,GAAMA,EAAW,eAAgBC,GAGjC,KAAIC,EAQJ,GAPK,KAAK,EAAG,aAAeD,EAAM,YAAY,EAAG,CAAC,EACjDC,EAAY,KAAK,EAAG,aAAeD,EAAM,YAAY,EAC1C,KAAK,EAAG,cAAgBA,EAAM,YAAY,EAAG,CAAC,EACzDC,EAAY,KAAK,EAAG,cAAgBD,EAAM,YAAc,EAAC,QAAS,kBACvD,KAAK,EAAG,gBAAkBA,EAAM,YAAY,EAAG,CAAC,IAC3DC,EAAY,KAAK,EAAG,gBAAkBD,EAAM,YAAY,GAEpDC,EAAY,CAEhBA,EAAU,SAAU,aACpB,IAAIC,EACC,EAAE,QAASH,EAAWC,CAAG,CAAC,EAC9BE,EAAeH,EAAWC,CAAG,EAAE,CAAC,EAEhCE,EAAeH,EAAWC,CAAG,EAG9B,IAAI6C,EAAU,IAAIwD,QAAkBpG,EAAU,IAAI,CAAC,EAAG,CACrD,MAASC,EACT,UAAa,QACb,SAAY,IAAMF,CACvB,CAAK,EAED6C,EAAQ,KAAI,EAEZ,KAAK,uBAAuB7C,CAAG,EAAIC,EACnCmG,EAAW,KAAMnG,EAAU,KAAM,WAAa,CAAA,CAC9C,EAEF,GAAKmG,EAAW,OAAS,EAAI,CAC5BA,EAAW,KAAI,EACf,IAAIE,EACAtG,EAAMoG,EAAW,CAAC,EACjB,KAAK,EAAG,oBAAsBpG,EAAM,IAAI,EAAG,CAAC,EAChDsG,EAAmB,KAAK,EAAG,oBAAsBtG,EAAM,IAAI,EAChD,KAAK,EAAG,qBAAuBA,EAAM,IAAI,EAAG,CAAC,EACxDsG,EAAmB,KAAK,EAAG,qBAAuBtG,EAAM,IAAI,EACjD,KAAK,EAAG,uBAAyBA,EAAM,IAAI,EAAG,CAAC,IAC1DsG,EAAmB,KAAK,EAAG,uBAAyBtG,EAAM,IAAI,GAE/D,IAAIuG,EAAOnH,OAAG,cACdmH,EAAK,GAAI,mEAAoE,SAAUlH,EAAI,EACrFA,EAAE,MAAQ,GAAKA,EAAE,MAAQ,aAAeA,EAAE,MAAQ,cAAgBA,EAAE,MAAQ,cAChFkH,EAAK,KAAI,CAEd,GACQD,GACJC,EAAK,QAAS,CAAE,UAAWD,EAAiB,OAAQ,EAAC,KAAM,YAAc,EAAC,OAAM,EAAG,GAAK,EAAE,OAAQ,UAAW,CAC5GC,EAAK,IAAK,mEACf,EAEG,CACD,CAED,aAAcvD,EAAKsC,EAAShG,EAAW,CACtC,IAAIN,EAAQ,KACZA,EAAM,EAAG,uBAAyB,EAAC,aAAc,SAAS,EACrD,CAACgE,GAAOA,IAAQ,MAAQA,IAAQ,KACpChE,EAAM,iBAAmB,GACzBA,EAAM,cAAe,WAAY,CAAA,IAEjC,KAAK,YAAY,WAAY,WAAYgE,EAAK,CAC7C,SAAU,SAAUhB,EAAM,CACzBA,EAAMA,EAAI,YACJA,IACLA,EAAM,CAAA,GAEPhD,EAAM,iBAAmB,OAAO,iBAAkBgD,CAAG,EAChDsD,GAAWtG,EAAM,iBAAiB,OAAS,IAC/CA,EAAM,oBAAoB,SAAWA,EAAM,iBAAiB,CAAC,EAAE,MAC/DA,EAAM,MAAM,IAAK,WAAYA,EAAM,iBAAiB,CAAC,EAAE,OACvDA,EAAM,EAAG,uBAAyB,EAAC,IAAKA,EAAM,oBAAoB,WAEnEA,EAAM,cAAe,WAAYgD,GAC5B1C,GACJA,GAED,CACL,EAEE,CAED,aAAc0D,EAAKsC,EAAShG,EAAW,CACtC,IAAIN,EAAQ,KACZA,EAAM,EAAG,sCAAwC,EAAC,aAAc,SAAS,EACpE,CAACgE,GAAOA,IAAQ,MAAQA,IAAQ,KACpChE,EAAM,iBAAmB,GACzBA,EAAM,cAAe,0BAA2B,CAAA,IAEhD,KAAK,YAAY,WAAY,WAAYgE,EAAK,CAC7C,SAAU,SAAUhB,EAAM,CACzBA,EAAMA,EAAI,YACJA,IACLA,EAAM,CAAA,GAGPhD,EAAM,iBAAmB,OAAO,iBAAkBgD,CAAG,EAChDsD,GAAWtG,EAAM,iBAAiB,OAAS,IAC/CA,EAAM,oBAAoB,wBAA0BA,EAAM,iBAAiB,CAAC,EAAE,MAC9EA,EAAM,MAAM,IAAK,0BAA2BA,EAAM,iBAAiB,CAAC,EAAE,OACtEA,EAAM,EAAG,sCAAwC,EAAC,IAAKA,EAAM,oBAAoB,0BAElFA,EAAM,cAAe,0BAA2BgD,GAC3C1C,GACJA,GAED,CACL,EAEE,CAED,oBAAqB,CACpB,OAAO,SAAW,OAAO,WAAY,KAAM,GAAM,IAAO,QAAQ,gBAAiB,wBAAwB,EACzG,eAAe,cAAe,CAAA,EAC9B,CAED,kBAAmB,CAClB,OAAO,SAAW,OAAO,WAAY,KAAM,GAAM,IAAO,QAAQ,gBAAiB,wBAAwB,EACzG,eAAe,cAAe,CAAA,EAC9B,CAED,aAAc,CACb,KAAK,eAAgB,IACrB,IAAIN,EAAQ,KAIZ,KAAK,IAAI,gBAAiB,KAAK,oBAAqB,CACnD,SAAU,SAAUY,EAAS,CACvBA,GAAUA,EAAO,WACrBZ,EAAM,WAAa,KACnBA,EAAM,UAAWI,OAAE,KAAK,EAAG,6BAA6B,EAAI,CAC3D,MAAO,CACN,OAAU,oBACV,MAAS,SACT,CACP,GACKJ,EAAM,IAAI,gBAAiB,CAC1B,SAAU,SAAUY,EAAS,CACvBA,GAAUA,EAAO,WACrBZ,EAAM,EAAG,UAAY,EAAC,YAAa,OAAO,EAC1CA,EAAM,uBAAyB,GAC/B,eAAe,mBAAoBY,EAAO,UAAS,EAAG,CAAC,CAAC,EACxD,oBAAoB,SAAS,OAAO,WAAW,OAAM,IAGrDZ,EAAM,eAAgBY,GACtB,YAAY,aAAY,EAEzB,CACP,IAEKZ,EAAM,aAAcY,EAErB,CACJ,EACE,CAED,eAAgBA,EAAS,CACxB,IAAImD,EAAUnD,EAAO,aAEhBmD,EAAQ,eAAgB,OAAO,EAG9BA,IACLA,EAAUnD,EAAO,kBAElB,IAAIM,EAAe,GAEd,OAAO,QAAS6C,CAAS,GAAI,OAAOA,GAAY,SAEpD3D,OAAE,KAAM2D,EAAS,SAAUqC,EAAOpC,EAAM,CAElCA,EAAI,eAAgB,WACxBA,EAAMA,EAAI,OAGX,QAAUhD,KAAOgD,EAChB9C,EAAeA,EAAe8C,EAAIhD,CAAG,EAAI,MAE9C,GAGGE,EAAe6C,EAGhB,KAAK,UAAW7C,EAChB,CAED,UAAWiC,EAASpD,EAAU,CAC7B,oBAAoB,SAAS,OAAO,aAAcoD,EAASpD,CAAO,CAClE,CAED,iBAAkB,EAAI,CACrB,KAAK,eAAgB,GACrBK,OAAG,iBAAkB,EAAE,aAAa,EAAG,YAAa,+CACpD,WAAY,UAAW,CACtBA,OAAG,EAAE,aAAe,EAAC,YAAa,4BAA4B,CAC9D,EAAE,GAAG,CACN,CAED,eAAgB,EAAI,CACnB,IAAIoH,EAAoBpH,OAAG,EAAE,aAAa,EAAG,KAAM,MAC/CqH,EAAS,IAAMD,EACnB,KAAK,EAAGC,CAAQ,EAAC,YAAa,wBAAwB,CACtD,CAED,oBAAqB,CACpB,IAAIC,EAAgB,CACnB,yBAA0B,wBAAyB,sBACtD,EACE,QAAU1G,KAAO0G,EAChB,KAAK,aAAcA,EAAc1G,CAAG,CAAC,CAEtC,CAED,0BAA2B,CAO1B,KAAK,aAAc,oBAAqB,CAAE,QAAS,EAAI,CAAA,EACvD,KAAK,aAAc,wBAAyB,CAAE,QAAS,EAAI,CAAA,EAC3D,KAAK,aAAc,sBAAuB,CAAE,QAAS,EAAI,CAAA,EACzD,KAAK,aAAc,uBAAwB,CAAE,QAAS,EAAI,CAAA,EAC1D,KAAK,aAAc,yBAA0B,CAAE,QAAS,EAAI,CAAA,CAC5D,CAED,wBAAyB,CACxB,KAAK,aAAc,iBACnB,CAED,qBAAsB,CACrB,KAAK,aAAc,WACnB,CAED,aAAc2G,EAAa5H,EAAU,CACpC,IAAIC,EAAQ,KACZ,OAAS2H,EAAW,CACnB,IAAK,iBACJ,IAAIC,EAAc,CACjB,YAAexH,OAAE,KAAK,EAAG,aAAe,EACxC,aAAgBA,OAAE,KAAK,EAAG,MAAQ,CACvC,EACI,KAAK,YAAauH,EAAaC,GAC/B,MACD,IAAK,WACJ,IAAIA,EAAc,CACjB,KAAQxH,OAAE,KAAK,EAAG,MAAQ,EAC1B,aAAgBA,OAAE,KAAK,EAAG,eAAiB,CAChD,EACI,KAAK,YAAauH,EAAaC,EAAa7H,CAAO,EACnD,MACD,IAAK,oBACL,IAAK,wBACL,IAAK,yBACL,IAAK,sBACL,IAAK,uBACJ,IAAI2E,EAAO,CAAA,EACPC,EAAc,CAAA,EAClBA,EAAY,QAAU,CAAC5E,EAAQ,OAAO,EACtC2E,EAAK,YAAcC,EACnBD,EAAK,eAAiB,CACrB,GAAM,GACN,KAAQ,EACb,EACI,KAAK,kBAAkB,iBAAkBA,EAAM,GAAM,CACpD,SAAU,SAAU9D,EAAS,CAC5B,IAAIoC,EAAMpC,EAAO,YACjB,GAAKoC,IAAQ,IAAQhD,EAAM,yBAA0B2H,CAAa,IAAK,GAAQ,CAC9E3H,EAAM,EAAG,IAAM2H,EAAc,QAAU,EAAC,OAAQ,EAAC,OAAM,EAAG,IAAK,UAAW,MAAM,EAChF,MACP,MACO3H,EAAM,wBAAuB,EAC7BA,EAAM,cAAe2H,EAAa,SAAUC,EAAc,CACzD5H,EAAM,YAAa2H,EAAaC,EACxC,EAEM,CACN,GACI,MACD,QACC,KAAK,cAAeD,EAAa,SAAUC,EAAc,CACxD5H,EAAM,YAAa2H,EAAaC,EACrC,GACI,KACD,CACD,CAED,yBAA0B,CACzB,KAAK,EAAG,wBAA0B,EAAC,KAAI,CACvC,CAED,yBAA0BD,EAAc,CACvC,IAAIE,EACJ,OAASF,EAAW,CACnB,IAAK,oBACJE,EAAY,KAAK,gCAAgC,eAAgB,OAAS,GAAI,KAAK,gCAAgC,QAAU,GAC7H,MACD,IAAK,wBACJA,EAAY,KAAK,gCAAgC,eAAgB,WAAa,GAAI,KAAK,gCAAgC,YAAc,GACrI,MACD,IAAK,yBACJA,EAAY,KAAK,gCAAgC,eAAgB,YAAc,GAAI,KAAK,gCAAgC,aAAe,GACvI,MACD,IAAK,sBACJA,EAAY,KAAK,gCAAgC,eAAgB,SAAW,GAAI,KAAK,gCAAgC,UAAY,GACjI,MACD,IAAK,uBACJA,EAAY,KAAK,gCAAgC,eAAgB,UAAY,GAAI,KAAK,gCAAgC,WAAa,GACnI,KACD,CACD,OAAOA,CACP,CAED,eAAgBnB,EAAc,CAE7B,IAAI3G,EAAU,CAAA,EACdA,EAAQ,YAAc,CACrB,GAAI2G,CACP,EACE3G,EAAQ,OAAS,GACjB,KAAK,aAAc,WAAYA,EAI/B,CAED,cAAe4H,EAAahE,EAAW,CAEtC,IAAImE,EAAS,MAAQH,EAAc,UACnC,KAAK,IAAIG,CAAM,EAAG,UAAW,CAC5B,SAAU,SAAUC,EAAiB,CACpC,IAAIC,EAAsBD,EAAe,YACpCpE,GACJA,EAAUqE,CAAmB,CAE9B,CACJ,EACE,CAED,YAAaL,EAAaM,EAAiBlI,EAAU,CACpD,IAAIC,EAAQ,KACRiD,EAAS,CAAA,EACbA,EAAO,YAAc,GACrBA,EAAO,YAAc,GAErBA,EAAO,sBAAwB,EAC/BA,EAAO,YAAc,EAChB,OAAO,MAAOlD,CAAS,GAAI,OAAO,MAAOA,EAAQ,eACrDkD,EAAO,YAAclD,EAAQ,aAE9B,KAAK,IAAI,MAAQ4H,CAAW,EAAG1E,EAAQ,GAAM,CAC5C,SAAU,SAAUrC,EAAS,CAC5B,IAAIgC,EAAchC,EAAO,YACrBoF,EAAY,IAAM2B,EAAc,SAIpC,IAHK,CAAC,OAAO,MAAO5H,IAAe,OAAO,MAAOA,CAAS,GAAI,CAACA,EAAQ,SACtEC,EAAM,EAAGgG,CAAW,EAAC,MAAK,EAEtB,CAAC,OAAO,QAASpD,CAAa,GAAI,CAAG,OAAO,OAAQ5C,EAAM,UAAU,EACxEA,EAAM,EAAGgG,CAAW,EAAC,KAAM,yBAA2B5F,OAAE,KAAK,EAAG,8CAA0D,EAAG,OAAO,MAKpI,SAAUY,KAAO4B,EAChB5C,EAAM,YAAa2H,EAAaM,EAAiBrF,EAAY5B,CAAG,EAGlE,CACJ,EACE,CAED,YAAa2G,EAAaM,EAAiBC,EAAY,CACtD,IAAIlI,EAAQ,KACRmI,EAAiB,IAAI,SAAS,MAAOD,CAAS,EAC9CE,EAAYT,EAAc,oBAC1BU,EAAmB,KACnBC,EACJ,OAASX,EAAW,CACnB,IAAK,yBACJU,EAAmB,KAAK,0BACxB,MACD,IAAK,wBACJA,EAAmB,KAAK,iBACxB,MACD,IAAK,uBACJA,EAAmB,KAAK,gBACxB,MACD,IAAK,oBACJA,EAAmB,KAAK,aACxBC,EAA2B,KAAK,gCAAgC,MAChE,MACD,IAAK,wBACJD,EAAmB,KAAK,iBACxBC,EAA2B,KAAK,gCAAgC,UAChE,MACD,IAAK,yBACJD,EAAmB,KAAK,kBACxBC,EAA2B,KAAK,gCAAgC,WAChE,MACD,IAAK,sBACJD,EAAmB,KAAK,eACxBC,EAA2B,KAAK,gCAAgC,QAChE,MACD,IAAK,uBACJD,EAAmB,KAAK,gBACxBC,EAA2B,KAAK,gCAAgC,SAChE,KAGD,CAED,OAASF,EAAS,CACjB,IAAK,0CACJ,IAAIG,EAAa,wCACjB,MACD,IAAK,yCACJ,IAAIA,EAAa,uCACjB,MACD,IAAK,wCACJ,IAAIA,EAAa,sCACjB,MACD,IAAK,qCACJ,IAAIA,EAAa,mCACjB,MACD,IAAK,oCACJ,IAAIA,EAAa,kCACjB,MACD,IAAK,yCACJ,IAAIA,EAAa,uCACjB,MACD,IAAK,0CACJ,IAAIA,EAAa,wCACjB,MACD,IAAK,uCACJ,IAAIA,EAAa,qCACjB,MACD,IAAK,wCACJ,IAAIA,EAAa,sCACjB,MACD,IAAK,kCACJ,IAAIA,EAAa,gCACjB,MACD,IAAK,4BACJ,IAAIA,EAAa,0BACjB,KAED,CAEyB,IAAIA,EAAY,CAEvC,gBAAiBvI,EAAM,EAAG,IAAM2H,EAAc,QAAU,EACxD,MAAOQ,EACP,YAAaR,EACb,UAAW3H,EACX,iBAAkBqI,EAClB,yBAA0BC,EAC1B,gBAAiBL,CACtB,CAAQ,CACN,CAED,kBAAmB,EAAI,CACtB,IAAIjI,EAAQ,KACRwH,EAAoBpH,OAAG,EAAE,aAAa,EAAG,KAAM,MAC/CuH,EAAcH,EAAkB,MAAO,GAAK,EAAC,CAAC,EAClD,OAASG,EAAW,CACnB,IAAK,iBACJ,IAAIC,EAAc,CACjB,YAAexH,OAAE,KAAK,EAAG,aAAe,EACxC,aAAgBA,OAAE,KAAK,EAAG,MAAQ,CACvC,EACIJ,EAAM,uBAAwB2H,EAAaC,GAC3C,MACD,IAAK,WACJ,IAAIA,EAAc,CACjB,KAAQxH,OAAE,KAAK,EAAG,MAAQ,EAC1B,aAAgBA,OAAE,KAAK,EAAG,eAAiB,CAChD,EACIJ,EAAM,uBAAwB2H,EAAaC,GAC3C,MACD,QACC,KAAK,cAAeD,EAAa,SAAUC,EAAc,CACxD5H,EAAM,uBAAwB2H,EAAaC,EAChD,GACI,KACD,CACD,CAED,uBAAwBD,EAAaM,EAAkB,CACtD,IAAIjI,EAAQ,KACZ,GAAK2H,IAAgB,iBAAmB,CACvC,KAAK,mBAAkB,EACvB,MACA,CACD,KAAK,IAAI,MAAQA,EAAc,aAAa,EAAG,CAC9C,SAAU,SAAU/G,EAAS,CAC5B,IAAIgC,EAAchC,EAAO,YAIzBZ,EAAM,YAAa2H,EAAaM,EAAiBrF,CAAW,CAC5D,CACJ,EACE,CAED,mCAAoCqF,EAAkB,CACrD,IAAIO,EAAgB,CAAA,EACpBA,EAAc,SAAW,GACzBA,EAAc,GAAK,GACnBA,EAAc,SAAW,GACzBA,EAAc,OAAS,GACvBA,EAAc,WAAa,GAC3BA,EAAc,UAAY,GAC1BA,EAAc,eAAiB,GAY/B,QAAUxH,KAAOiH,EAChBO,EAAcxH,CAAG,EAAI,GAGtB,OAAOwH,CACP,CAEF,CAEA,wBAAwB,cAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qJCzhCjC,MAAM,0BAA0B,SAAS,MAAO,CACtD,YAAazI,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CACpB,WAAY,KACZ,WAAY,KACZ,OAAQ,CACP,GAAI,eACJ,aAAc,eACd,YAAa,UACb,CACJ,GAEE,MAAOA,CAAO,CACd,CAED,WAAY,QAAU,CAGhB,KAAM,UAAY,QAAU,gBAAgB,IAAO,YACvD,yBAAyB,SAAU,QAEpC,CAED,SAAUG,EAAM,CACf,IAAIuI,EAAU,OAAO,aAErB,OAAO,gBAAiBA,EAAU,uBAClC,CAGD,aAAcC,EAAW,CACxB,IAAI1I,EAAQ,KACR0E,EAAO,CAAA,EACPiE,EACAC,EACAC,EAEJ,GAAK,OAAO,kBAAoB,CAC/B,OAAO,kBAAoB,GAC3B,OAAO,SAAS,SAChB,MACA,CAqCD,GAnCKH,IACJhE,EAAO,OAAO,YAAagE,EAAS,MAAO,GAAG,IAE1CA,GAAYA,EAAS,QAAS,IAAI,GAAM,EAC5CC,EAAU,OAAO,eAAgBjE,EAAK,CAAC,EAEvCiE,EAAU,mBAGX,eAAe,oBAAsBD,EAErC,eAAe,cAAehE,GAEzB,eAAe,kBACb,eAAe,cAAe,EAAC,eAAgB,YAAY,IAChE,UAAU,IAAK,kBAAmB,gBAClC,UAAU,KAAM,KAAM,KAAM,UAAW,CACjCvE,uBAAuBA,sBAAoB,UAAYA,sBAAoB,SAAS,OACxFA,sBAAoB,SAAS,OAAO,aAAcC,OAAE,KAAK,EAAG,iBAAiB,GAE7E,cAAc,UAAWA,OAAE,KAAK,EAAG,iBAAiB,EAE1D,GAEI,WAAY,UAAW,CAEtB,UAAU,QAAS,kBAAmB,eACtC,EAAE,GAAI,IAITwI,EAAUlE,EAAK,GAEfmE,EAASnE,EAAK,EAET,eAAe,uBAAyBiE,EAAU,CAEtD,GAAK,eAAe,iCAEnB,GAAKE,EAAS,CACb,OAASA,EAAM,CACd,IAAK,QAGC,CAAC,eAAe,gCAAgC,WAClD,eAAe,gCAAgC,qBAChD,eAAe,gCAAgC,oBAAoB,IAAMD,IAGrE,eAAe,+BAAiC,QACpDE,EAAcF,CAAO,EAIvB,MACD,IAAK,MACE,eAAe,gCAAgC,WACpDE,IAGD,MACD,IAAK,OAEJ,OAASH,EAAO,CACf,IAAK,iBACCjE,EAAK,IAAM,WACV,CAAC,eAAe,gCAAgC,WAClD,CAACqE,EAAU,IACbD,EAAcF,EAAS,IAEblE,EAAK,IAAM,YACjB,CAAC,eAAe,gCAAgC,WAClD,eAAe,gCAAgC,oCAAoC,IAAMkE,IAC3FE,EAAcF,EAAS,IAGzB,MACD,SACM,CAAC,eAAe,gCAAgC,WAClD,eAAe,gCAAgC,oBAAoB,IAAMA,IAC3EE,EAAcF,EAAS,IAExB,KACD,CAEF,CAED,MACL,SACU,eAAe,gCAAgC,WACnD,eAAe,gCAAgC,oBAAsB,CAErE,GAAK,eAAe,gCAAgC,SAAW,aACzD,eAAe,gCAAgC,gBACnD,OAIF,eAAe,gCAAgC,iBAAkB,IACjE,eAAe,gCAAgC,iBAC/C,KAAK,kBAAiB,CAEtB,EAIH,MAEH,KAOG,QANA,eAAe,2BAA6BA,EAEvCC,IACJ,eAAe,6BAA+BA,GAGtCF,EAAO,CACf,IAAK,YACL,IAAK,WACCjE,EAAK,OACT,eAAe,oBAAsBA,EAAK,MAE3C,KAED,CAIF,IAAIsE,EAEJ,GADAA,EAAgB,EACX,eAAe,wBACnBC,QAEA,KAAIC,EAAmB,YAAa,UAAW,CACzCF,GAAiB,KACrB,cAAeE,CAAgB,EAEhCF,EAAgBA,EAAgB,EAC3B,eAAe,0BACnBC,IACA,cAAeC,CAAgB,EAEhC,EAAE,GAAG,EAGP,SAASD,GAA4B,CAEpC9I,sBAAoB,UAAW,UAAW,CAKzC,GAJAC,OAAG,MAAM,EAAG,YAAa,UAAU,EAEnC,OAAO,eAAgB,mEAA0E,UAAU,eAAe,mBAErH,CAACJ,EAAM,WACXA,EAAM,WAAa,IAAI,qBACvBI,OAAG,eAAe,EAAG,KAAMJ,EAAM,WAAW,IAC5CmJ,YAEKnJ,EAAM,WAAW,aAAeA,EAAM,WAAW,YAAY,WAAa,CAC9EA,EAAM,iBAAkBI,OAAE,KAAK,EAAG,gGAAgG,EAAI,CACrI,MAAO,GACP,QAAS,CACR,CACC,MAAO,KAAM,QAAS,GAAM,SAAU,SAAUC,EAAI,CACnDL,EAAM,SAAU,4BAA8B,eAAe,cAAa,EAAG,WAAY,CACxF,QAAS,GACT,QAAS,EACpB,EAEU,CACD,EACD,CACC,MAAO,MAAO,SAAU,SAAUK,EAAI,CACrCL,EAAM,iBAAgB,EACtBoJ,IACAD,GACA,CACD,CACD,CACR,GACM,MACN,MACMC,IACAD,GAGN,EACG,CAED,SAASC,GAAe,CACvBpJ,EAAM,WAAW,yBAA2B,KAC5CA,EAAM,WAAW,YAAc,KAC/BA,EAAM,WAAW,QACjB,CAED,SAASmJ,GAAqB,CAe7B,OAbA,YAAY,UAAW,CACtB,OAAO,aAAc,EAAC,IAAK,UAAW,OAAO,EAC7C,OAAO,gBAAiB,EAAC,IAAK,UAAW,OAAO,EAEhD,OAAO,cAAa,CACpB,GAAC,KAAM,MAAQ,IAQPR,EAAO,CACf,IAAK,yBACJ,OAAO,qCAAuC,qCAC9C,MACD,IAAK,mBACJ,OAAO,+BAAiC,+BACxC,MACD,IAAK,YACJ,OAAO,wBAA0B,wBACjC,MACD,IAAK,mBACJ,OAAO,+BAAiC,+BACxC,KACD,CAED,yBAAyB,SAAUA,EACnC,CAED,SAASI,GAAW,CAEnB,GAAK,OAAO,QAAS,eAAe,gCAAgC,mBAAmB,EACtF,QAAUnH,EAAI,EAAGA,EAAI,eAAe,gCAAgC,oBAAoB,OAAQA,IAAM,CACrG,IAAIR,EAAO,eAAe,gCAAgC,oBAAoBQ,CAAC,EAE/E,GAAKR,EAAK,KAAOwH,EAChB,MAAO,EAER,SAEDxH,EAAO,eAAe,gCAAgC,oBACjDA,EAAK,KAAOwH,EAChB,MAAO,GAIT,MAAO,EACP,CAED,SAASE,EAAcF,EAASS,EAAY,CAC3C,IAAIC,EACJ,OAASX,EAAO,CACf,IAAK,iBACJW,EAAO5E,EAAK,EACZ,IAAItD,EAAO,CAAA,EACNkI,IAAS,UACblI,EAAK,GAAKwH,GAEVxH,EAAK,UAAYwH,EACjBxH,EAAK,eAAiB,IAEvB,eAAe,gCAAgC,YAAaA,GAC5D,MAED,IAAK,YACJkI,EAAO5E,EAAK,EAEN2E,EAOAT,GACJ,eAAe,gCAAgC,YAAaA,EAASU,CAAI,EAPrEV,EACJ,eAAe,gCAAgC,YAAaA,EAASU,CAAI,EAEzE,eAAe,gCAAgC,aAQjD,MACD,QAEOD,EAOAT,GACJ,eAAe,gCAAgC,YAAaA,GAPxDA,EACJ,eAAe,gCAAgC,YAAaA,GAE5D,eAAe,gCAAgC,aAQjD,KACD,CACD,CAED,CAID,mBAAoB,CACnB,IAAIW,EAAW,OAAO,iBAAkB,EAAC,SAAQ,EAEjD,GAAKA,EAAS,OAAS,EACtB,QAAU3H,EAAI,EAAGA,EAAI2H,EAAS,OAAQ3H,IAErC,GAAI,CAEH,GAAKxB,OAAGmJ,EAAS3H,CAAC,CAAG,EAAC,KAAM,QAAW,eAAe,gCAAgC,MACrF,SAEA2H,EAAS3H,CAAC,EAAE,QAGb,MAAa,CAEb,CAIH,CAED,qBAAsB,CACrB,OAAO,iBAAgB,EAAG,YAAa,mBAAmB,EAC1D,OAAO,iBAAgB,EAAG,SAAU,+BAA+B,EACnE,OAAO,aAAY,EAAG,SAAU,2BAA2B,CAE3D,CAED,YAAa,CACZ,OAAO,WAAY,gDACd,mBACJ,kBAAkB,SAAQ,CAG3B,CAED,cAAe4H,EAASzJ,EAAU,CAE5BK,OAAG,YAAY,EAAG,SAAU,MAAM,GACtC,KAAK,cAAa,EAClB,WAAY,UAAW,CACtBqJ,GACA,EAAE,GAAG,GAENA,IAGD,SAASA,GAAS,CAEjB,GADA,CAAC1J,IAAaA,EAAU,CAAE,MAAO,MAAO,QAAS,CAAE,CAAA,GAC9CK,OAAG,cAAe,OAAS,EAAI,CACnC,IAAIsJ,EAAY,IAAI,UAAU,MAAO,SAAS,eAAgB,aAAe,CAC5E,SAAU,QACf,GACIA,EAAU,KAAI,CACd,CACDtJ,OAAG,iBAAmB,EAAC,KAAML,EAAQ,KAAK,EAC1CK,OAAG,gBAAgB,EAAG,KAAMoJ,CAAO,EAC9BzJ,EAAQ,QAAQ,OAAS,IAC7BK,OAAG,oBAAqB,QACxBA,OAAE,KAAML,EAAQ,QAAS,SAAUqG,EAAOhF,EAAO,CAChD,IAAIuI,EAASvJ,OAAG,+CAChBgB,EAAK,SAAWuI,EAAO,KAAM,kBAAmB,OAAO,EACvDA,EAAO,KAAMvI,EAAK,OAClBA,EAAK,OAASuI,EAAO,SAAUvI,EAAK,KAAK,EACzC,CAACA,EAAK,OAASuI,EAAO,SAAU,aAAa,EACxCvI,EAAK,WACJA,EAAK,SACThB,OAAG,yBAAyB,EAAG,OAAQ,OAAO,EAAG,KAAM,QAASgB,EAAK,SAAS,KAAM,IAAM,CAAA,EAE3FuI,EAAO,OAAQ,OAAS,EAAC,KAAM,QAASvI,EAAK,SAAS,KAAM,IAAI,IAEjEhB,OAAG,kBAAkB,EAAG,OAAQuJ,CAAM,CAC3C,IAGG,IAAIC,EAAaxJ,OAAG,YAAc,EAAC,KAAM,YAAY,EAChDwJ,EAAW,OAAS,GACxBA,EAAW,OAAQ,QAAQ,EAAG,KAAM,SAAU,SAAUC,EAAQ,CAC/D,IAAIvH,EAAYlC,OAAG,YAAc,EAAC,KAAM,YAAY,EAC/CkC,EAAU,OAAS,GACvBA,EAAU,IAAKuH,EAAM,OAAO,MAAM,CAAC,EAAE,KAE3C,EAEG,CACD,CAED,aAAcL,EAASzJ,EAAU,CAChC,IAAIC,EAAQ,KACPI,OAAG,WAAW,EAAG,SAAU,MAAM,GACrC,KAAK,aAAY,EACjB,WAAY,UAAW,CACtBqJ,GACA,EAAE,GAAG,GAENA,IAGD,SAASA,GAAS,CAGjB,GAFA,CAAC1J,IAAaA,EAAU,CAAE,MAAO,MAAO,QAAS,GAAI,MAAO,CAAE,CAAA,GAC9DK,OAAG,0BAA4B,EAAC,IAAKL,EAAQ,KAAK,EAC7CK,OAAG,aAAc,OAAS,EAAI,CAClC,IAAI0J,EAAW,IAAI,UAAU,MAAO,SAAS,eAAgB,UAAU,GACvEA,EAAS,KAAI,CACb,CACD1J,OAAG,eAAe,EAAG,KAAMoJ,CAAO,EAClCxJ,EAAM,iBAAgB,CACtB,CACD,CAED,iBAAkBwJ,EAASzJ,EAAU,CAE/BK,OAAG,eAAe,EAAG,GAAI,UAAU,GACvC,KAAK,iBAAgB,EACrB,WAAY,UAAW,CACtBqJ,GACA,EAAE,GAAG,GAENA,IAGD,SAASA,GAAS,CAEjB,GADA,CAAC1J,IAAaA,EAAU,CAAE,MAAO,MAAO,QAAS,CAAE,CAAA,GAC9CK,OAAG,iBAAkB,OAAS,EAAI,CACtC,IAAI2J,EAAe,IAAI,UAAU,MAAO,SAAS,eAAgB,gBAAkB,CAClF,SAAU,QACf,GACIA,EAAa,KAAI,CACjB,CACD3J,OAAG,oBAAsB,EAAC,KAAML,EAAQ,KAAK,EAC7CK,OAAG,mBAAmB,EAAG,KAAMoJ,CAAO,EACjCzJ,EAAQ,QAAQ,OAAS,IAC7BK,OAAG,uBAAwB,QAC3BA,OAAE,KAAML,EAAQ,QAAS,SAAUqG,EAAOhF,EAAO,CAChD,IAAIuI,EAASvJ,OAAG,+CAChBgB,EAAK,SAAWuI,EAAO,KAAM,kBAAmB,OAAO,EACvDA,EAAO,KAAMvI,EAAK,OAClBA,EAAK,OAASuI,EAAO,SAAUvI,EAAK,KAAK,EACzC,CAACA,EAAK,OAASuI,EAAO,SAAU,aAAa,EACxCvI,EAAK,UACTuI,EAAO,OAAQ,OAAS,EAAC,KAAM,QAASvI,EAAK,SAAS,KAAM,IAAI,GAEjEhB,OAAG,qBAAqB,EAAG,OAAQuJ,CAAM,CAC9C,GAEG,CACD,CAED,gBAAiBH,EAASzJ,EAAU,CAE9BK,OAAG,cAAc,EAAG,SAAU,MAAM,GACxC,KAAK,gBAAe,EACpB,WAAY,UAAW,CACtBqJ,GACA,EAAE,GAAG,GAENA,IAGD,SAASA,GAAS,CAEjB,GADA,CAAC1J,IAAaA,EAAU,CAAE,MAAO,MAAO,QAAS,CAAE,CAAA,GAC9CK,OAAG,gBAAiB,OAAS,EAAI,CACrC,IAAI4J,EAAc,IAAI,UAAU,MAAO,SAAS,eAAgB,eAAiB,CAChF,SAAU,QACf,GACIA,EAAY,KAAI,CAChB,CACD5J,OAAG,mBAAqB,EAAC,KAAML,EAAQ,KAAK,EAC5CK,OAAG,kBAAkB,EAAG,KAAMoJ,CAAO,EAChCzJ,EAAQ,QAAQ,OAAS,IAC7BK,OAAG,sBAAuB,QAC1BA,OAAE,KAAML,EAAQ,QAAS,SAAUqG,EAAOhF,EAAO,CAChD,IAAIuI,EAASvJ,OAAG,+CAChBgB,EAAK,SAAWuI,EAAO,KAAM,kBAAmB,OAAO,EACvDA,EAAO,KAAMvI,EAAK,OAClBA,EAAK,OAASuI,EAAO,SAAUvI,EAAK,KAAK,EACzC,CAACA,EAAK,OAASuI,EAAO,SAAU,aAAa,EACxCvI,EAAK,WACJA,EAAK,SACThB,OAAG,2BAA2B,EAAG,OAAQ,OAAO,EAAG,KAAM,QAASgB,EAAK,SAAS,KAAM,IAAM,CAAA,EAE7FuI,EAAO,OAAQ,OAAS,EAAC,KAAM,QAASvI,EAAK,SAAS,KAAM,IAAI,IAEjEhB,OAAG,oBAAoB,EAAG,OAAQuJ,CAAM,CAC7C,GAEG,CACD,CAED,kBAAmB,CAClB,IAAI3J,EAAQ,KACZ,WAAY,UAAW,CACtBA,EAAM,aAAY,CAClB,EAAE,GAAI,CACP,CAED,cAAe,CACd,IAAI8J,EAAW,UAAU,MAAM,YAAa,SAAS,eAAgB,UAAU,GAC1EA,GACJA,EAAS,KAAI,CAEd,CAED,eAAgB,CACf,IAAIJ,EAAY,UAAU,MAAM,YAAa,SAAS,eAAgB,WAAW,GAC5EA,GACJA,EAAU,KAAI,CAEf,CAED,iBAAkB,CACjB,IAAIM,EAAc,UAAU,MAAM,YAAa,SAAS,eAAgB,aAAa,GAChFA,GACJA,EAAY,KAAI,CAEjB,CAED,kBAAmB,CAClB,IAAID,EAAe,UAAU,MAAM,YAAa,SAAS,eAAgB,cAAc,GAClFA,GACJA,EAAa,KAAI,CAElB,CAED,kBAAmBpG,EAAW,CACxB,eAAe,oCACnBsG,EAAO,eAAe,mCACtB,eAAe,kCAAoC,MAG/C,eAAe,iCACd,eAAe,gCAAgC,WACnDA,EAAO,eAAe,iCAEvB,OAAO,mBAAmB,QAC1B,eAAe,gCAAgC,oBAAqBtG,IAG/D,OAAO,MAAOA,IAClBA,IAIF,SAASsG,EAAOC,EAAiB,CAChCA,EAAe,eAAc,EAExBA,EAAe,WACnBA,EAAe,UAAU,SAE1BA,EAAe,wBAA0B,KACzCA,EAAe,iBAAmB,GAClCA,EAAe,kCAAoC,GACnDA,EAAe,wBAA0B,GACzCA,EAAe,uBAAyB,GACxC,eAAe,6BAA+B,EAC9C,CACD,CAEF,CAEO,IAAA,sBAAA,MAAM/J,UAA4B,SAAS,IAAK,CACtD,YAAaJ,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CACpB,GAAI,OACJ,OAAQ,IACX,GAEE,MAAOA,CAAO,CACd,CAED,WAAYA,EAAU,CACrB,KAAK,OAAS,IAAI,kBAKlB,KAAK,OAAO,WAAa,KAEnB,SAAS,QAAQ,SACtB,SAAS,QAAQ,QAGlBI,EAAoB,SAAW,IAE/B,CAEF,EAEAA,sBAAoB,UAAY,SAAUG,EAAW,CACpD,IAAI6J,EAAiB,UAAW,OAAO,gBAAiB,CAAA,EACpDC,EAAa,eAAe,eAC3BD,GAAkBA,EAAe,QAAU,IAAMC,GAAcA,EAAW,cAAgB,GAE9FjK,sBAAoB,uBAAwBgK,EAAgB7J,GAE5DA,GAEF,EAEAH,sBAAoB,uBAAyB,SAAUQ,EAAYL,EAAW,CAE7E,GAAK,eAAe,mBAAoB,IAAK,KAAO,CACnD,IAAIN,EAAQ,KAEZ,eAAe,aAAcW,GAC7B,UAAW,OAAO,gBAAiB,EAAEA,CAAU,EAE/C,KAAK,YAAc,GAEnB,KAAK,iBAAmB,MAAM,sBAC9B,KAAK,iBAAiB,gBAAiB,CACtC,SAAU,SAAUC,EAAS,CACvBA,GAAUA,EAAO,WACrB,eAAe,mBAAoBA,EAAO,UAAS,EAAG,CAAC,CAAC,EAGzDZ,EAAM,YAAc,GAEfM,GACJA,GAED,CACJ,EACA,MACEA,GAEF,EAEAH,sBAAoB,SAAW,SAAUiI,EAAWnF,EAAS,CAE5D7C,OAAG,IAAMgI,CAAW,EAAC,SAAU,eAAe,EAC9C,eAAe,kCAAoCnF,EAGnD,YAAY,SAAUmF,EAAW,GAElC,EAEAjI,sBAAoB,oBAAsB,SAAUkK,EAAa,CAChE,IAAIjC,EACJ,OAASiC,EAAU,CAClB,IAAK,aACJjC,EAAY,YACZ,MACD,IAAK,WACJA,EAAY,iBACZ,MACD,IAAK,WACJA,EAAY,UACZ,MACD,IAAK,sBACJjI,sBAAoB,aAAc,eAAe,gCAAiC,kBAAkB,EACpG,OACD,QACC,IAAImK,EAAM,MACVlC,EAAYiC,EAAW,QAASC,EAAK,EAAE,EACvC,KACD,CAED,YAAY,SAAUlC,EAAW,GAElC,EAEAjI,sBAAoB,WAAa,SAAUoK,EAAYC,EAAa7G,EAAW,CAG9E,OAFA,qBAAqB,aAAe6G,EACpC,qBAAqB,UAAY7G,EACxB4G,EAAU,CAClB,QAEC,OAAO,UAAWA,GAClB,OAAO,eAAgBA,EAAYA,EAAa,gBAAiB,UAAW,CAC3E,qBAAqB,WAAYA,EAAYA,EAAa,OAAO,CACrE,GACG,KACD,CAEF,EAEApK,sBAAoB,WAAa,SAAU,uBAAwB,UAAW,GAAK,CAClF,IAAI,gBAAkB,KAQtB,OANK,eAAe,gCACnB,eAAe,+BAA+B,iBAG/C,YAAY,YAAW,EAEd,UAAS,CACjB,QACC,OAAO,eAAgB,UAAW,UAAY,oBAAqB,UAAW,CAE7E,gBAAkB,KAAM,OAAS,UAAY,4CAA4C,EAEzF,gBAAgB,uBAAyB,uBACzC,gBAAgB,aAAY,EAE5B,IAAI,YAAc,OAAO,SAAS,KAC7B,YAAY,QAAS,KAAK,EAAK,IACnC,YAAc,YAAY,UAAW,EAAG,YAAY,QAAS,KAAK,IAEnE,YAAc,YAAc,OAAS,UAEhC,eAAe,0CACnB,YAAc,YAAc,QAAU,eAAe,yCAEtD,OAAO,gBAAiB,YAE5B,GACG,KACD,CAEF,EAGAA,sBAAoB,aAAe,SAAU,uBAAwB,UAAW,GAAK,CACpF,IAAI,gBAAkB,KAEtB,GAAK,CAAC,kBAAkB,wBAAyB,SAAS,GAAM,YAAc,MAAQ,CACrF,cAAc,UAAW,qBACzB,MACA,CAUD,OAFA,OAAO,UAAW,WAET,UAAS,CAEjB,QACC,OAAO,eAAgB,UAAW,UAAY,oBAAqB,UAAW,CAE7E,gBAAkB,KAAM,OAAS,UAAY,4CAA4C,EAEzF,gBAAgB,uBAAyB,uBACzC,gBAAgB,aAAc,IAE9B,IAAI,YAAc,OAAO,SAAS,KAC7B,YAAY,QAAS,KAAK,EAAK,IACnC,YAAc,YAAY,UAAW,EAAG,YAAY,QAAS,KAAK,IAE9D,GACJ,YAAc,YAAc,OAAS,UAAY,QAAU,GAE3D,YAAc,YAAc,OAAS,UAGtC,OAAO,gBAAiB,aAExB,eAAe,kCAAoC,eAEvD,GACG,KAED,CAEF,EAEAA,sBAAoB,SAAW,KCzyBxB,MAAM,iCAAiC,cAAe,CAC5D,YAAaJ,EAAU,GAAK,CAC3B,EAAE,SAAUA,EAAS,CACpB,qBAAsB,GACtB,WAAY,KAGZ,OAAQ,CACP,oBAAqB,gBACrB,8BAA+B,kBAG/B,2BAA4B,aAE5B,2BAA4B,YAC5B,CACJ,GAEE,MAAOA,CAAO,CACd,CAED,WAAYA,EAAU,CACrB,OAAO,UAAY0K,YACnB,MAAM,WAAY1K,GAElB,KAAK,QAASA,GAGd,KAAK,YAAc,MAAM,iBACzB,eAAe,gCAAkC,KACjD,KAAK,KAAI,EACT,KAAK,SAAUA,EAEf,CAOD,SAAU,CAGT,CAED,MAAO,CAGN,CAED,UAAW,CAGV,CAED,QAAS,CACR,IAAIC,EAAQ,KACZ,YAAY,YAAW,EACvB,KAAK,YAAa,UAAW,CAC5BA,EAAM,OAAM,CACf,GAEEI,OAAG,QAAS,IAAK,QAAQ,EAAG,GAAI,SAAU,OAAO,SAAU,UAAW,CAChEJ,EAAM,WAAY,oBACtBA,EAAM,SAAQ,CAElB,EAAK,GAAK,CAAA,CACR,CAED,WAAY0K,EAAa,CACxB,IAAIlB,EAAUpJ,OAAGsK,GAEjB,GAAKlB,EAAQ,SAAW,GAAK,CAACA,EAAQ,GAAI,YACzC,MAAO,GAGR,IAAImB,EAAWnB,EAAQ,CAAC,EAAE,sBAAqB,EAE/C,OAAKmB,EAAS,KAAO,GAAKA,EAAS,MAAQ,GAAKA,EAAS,QAAW,OAAO,YAAc,SAAS,gBAAgB,cAAiBA,EAAS,SAAY,OAAO,aAAe,SAAS,gBAAgB,aAKvM,CAED,WAAY,EAAI,CACV,EAAE,UAAY,IAClB,KAAK,cAAa,CAEnB,CAED,YAAarK,EAAW,CACvB,KAAK,mBAAoBA,EACzB,CAED,mBAAoBA,EAAW,CAC9B,IAAIN,EAAQ,KACZ,KAAK,YAAY,WAAY,UAAW,CACvC,SAAU,SAAUY,EAAS,CAC5B,IAAIA,EAASA,EAAO,YACpBZ,EAAM,EAAG,UAAU,EAAG,OAAQI,OAAG,mBAAqB,EAAC,KAAM,QAAS,EAAE,EAAG,KAAM,WAAY,UAAY,EAAC,KAAMA,OAAE,KAAK,EAAG,eAAiB,CAAA,GAC3IA,OAAE,KAAMQ,EAAQ,SAAUsE,EAAOC,EAAQ,CACxCnF,EAAM,EAAG,UAAY,EAAC,OAAQI,OAAG,mBAAmB,EAAG,KAAM,QAAS8E,CAAK,EAAG,KAAM9E,OAAE,KAAK,EAAG+E,CAAO,CAAA,EAC1G,GACInF,EAAM,EAAG,UAAY,EAAC,aAAY,EAClCA,EAAM,EAAG,WAAa,EAAC,aAAY,EACnCM,GACA,CACJ,EACE,CAED,iBAAkB,CACjB,KAAK,aAAc,KAAK,EAAG,sBAAwB,EAAC,IAAG,EACvD,CAED,aAAc0D,EAAM,CACnB,IAAIhE,EAAQ,KAEZ,GADAA,EAAM,EAAG,WAAa,EAAC,aAAc,SAAS,EACzC,CAACgE,EAAM,CACXhE,EAAM,EAAG,WAAW,EAAG,KAAMI,OAAG,mBAAqB,EAAC,KAAM,QAAS,EAAE,EAAG,KAAM,WAAY,UAAY,EAAC,KAAMA,OAAE,KAAK,EAAG,qBAAuB,CAAA,GAChJJ,EAAM,EAAG,WAAa,EAAC,aAAY,EACnC,MACA,CACD,KAAK,YAAY,WAAY,WAAYgE,EAAK,CAC7C,SAAU,SAAUpD,EAAS,CAC5BA,EAASA,EAAO,YACVA,IACLA,EAAS,CAAA,GAEVZ,EAAM,EAAG,WAAW,EAAG,KAAMI,OAAG,mBAAqB,EAAC,KAAM,QAAS,EAAE,EAAG,KAAM,WAAY,UAAY,EAAC,KAAMA,OAAE,KAAK,EAAG,qBAAuB,CAAA,GAChJA,OAAE,KAAMQ,EAAQ,SAAUsE,EAAOC,EAAQ,CACxCnF,EAAM,EAAG,WAAa,EAAC,OAAQI,OAAG,mBAAmB,EAAG,KAAM,QAAS8E,CAAK,EAAG,KAAM9E,OAAE,KAAK,EAAG+E,CAAO,CAAA,EAC3G,GACInF,EAAM,EAAG,WAAa,EAAC,aAAY,CACnC,CACJ,EACE,CAED,UAAW,CACV,KAAK,cAAe,CACnB,YAAa,MAChB,EACE,CAED,sBAAuB,CACtB,CAED,cAAeD,EAAU,CACxB,IAAIC,EAAQ,KACRiD,EAAS,CAAA,EACb,KAAK,qBAAoB,EAEpB,OAAOlD,EAAW,MACtBA,EAAU,CAAA,GAEN,OAAOA,EAAQ,YAAe,KAClC,KAAK,EAAG,yBAA2B,EAAC,MAAK,EAE1C,KAAK,mBAAqB,KAAK,EAAG,yBAAyB,EAC3D,KAAK,SAAW,KAAK,EAAG,sBAAsB,EAC9C,KAAK,SAAS,OAAQ,OAAO,EAAG,KAAM,QAAS,UAAW,CACzDC,EAAM,SAAQ,CACjB,GACEiD,EAAO,YAAc,GACrBA,EAAO,YAAc,GACrBA,EAAO,sBAAwB,EAI1B,KAAK,EAAG,OAAO,EAAG,IAAK,GAAI,KAAK,EAAG,OAAO,EAAG,IAAG,GAAM,KAC1DA,EAAO,YAAY,KAAU,KAAK,EAAG,OAAO,EAAG,OAE3C,KAAK,EAAG,UAAU,EAAG,IAAK,GAAI,KAAK,EAAG,UAAU,EAAG,IAAG,GAAM,KAChEA,EAAO,YAAY,QAAa,KAAK,EAAG,UAAU,EAAG,OAEjD,KAAK,EAAG,WAAW,EAAG,IAAK,GAAI,KAAK,EAAG,WAAW,EAAG,IAAG,GAAM,KAClEA,EAAO,YAAY,SAAc,KAAK,EAAG,WAAW,EAAG,OAEnD,KAAK,EAAG,OAAO,EAAG,IAAK,GAAI,KAAK,EAAG,OAAO,EAAG,IAAG,GAAM,KAC1DA,EAAO,YAAY,KAAU,KAAK,EAAG,OAAO,EAAG,OAE3C,KAAK,YACJlD,EAAQ,cAAgB,OAC5BkD,EAAO,YAAc,KAAK,WAAW,UAKtCA,EAAO,YAAc,EAIjB,eAAe,iBAAmB,eAAe,gBAAgB,eAAgB,eACrFA,EAAO,YAAY,UAAe,eAAe,cAAe,EAAC,WAGlE,KAAK,IAAI,MAAQ,KAAK,IAAI,QAAQ,EAAGA,EAAQ,GAAO,CACnD,SAAU,SAAUrC,EAAS,CAC5BZ,EAAM,WAAaY,EAAO,eAC1B,IAAIgC,EAAchC,EAAO,YACrBgK,EAAkB5K,EAAM,mBAAmB,KAAM,yBAAyB,EAI9E,IAHK4K,EAAgB,CAAC,GAAO5K,EAAM,YAAcA,EAAM,WAAW,gBACjEA,EAAM,mBAAmB,QAEpB,OAAO,QAAS4C,GAIrB,QAAUhB,EAAI,EAAGA,EAAIgB,EAAY,OAAQhB,IAAM,CAC9C,IAAId,EAAM8B,EAAYhB,CAAC,EACnBiJ,EAAgB,IAAI,SAAS,MAAO/J,CAAG,EACvCgK,EAAc,IAAI,8BAA+B,CAAE,MAAOD,CAAe,CAAA,EAC7E7K,EAAM,mBAAmB,OAAQ8K,EAAY,EAAE,CAC/C,KAToC,CACrC,IAAIC,EAAiB3K,OAAG,uCAAyCA,OAAE,KAAK,EAAG,oBAAuB,UAClGJ,EAAM,mBAAmB,KAAM+K,EACpC,CASS,CAAC/K,EAAM,YAAcA,EAAM,WAAW,cAAgB4C,IAAgB,GAC1E5C,EAAM,SAAS,OAEfA,EAAM,SAAS,OAEX,OAAOD,EAAQ,SAAY,KAC/BA,EAAQ,SAAQ,CAEjB,EACD,QAAS,UAAY,CAIpB,OAAO,SAAS,QAChB,CACJ,EACE,CAED,cAAe,EAAI,CAClB,IAAI6E,EAAOxE,OAAG,EAAE,aAAe,EAAC,OAAQ,EAAC,KAAM,UAC/C,GAAK,SAAS,YAAc,CAC3B,IAAI,EAAI,SAAS,YAAa,aAAa,EAC3C,EAAE,eAAgB,YAAa,GAAM,GAAM,OAAQ,EAAG,EAAG,EAAG,EAAG,EAAG,GAAO,GAAO,GAAO,GAAO,EAAG,MACjGwE,EAAK,CAAC,EAAE,cAAe,CAAC,CAC3B,MAAc,QAAQ,WACnBA,EAAK,CAAC,EAAE,UAAW,aAAa,CAEjC,CACF,CAEA,yBAAyB,SAAW,SAAU+D,EAAU,CACvD,OAAO,eAAgBA,EAASA,EAAU,YAAa,SAAU/H,EAAS,CACzE,IAAIoK,EAAW,EAAE,SAAUpK,CAAQ,EAAA,EACnC,OAAO,oBAAsBT,sBAC7B,OAAO,iBAAgB,EAAG,KAAM6K,CAAQ,EAExC,eAAe,qBAAuBrC,EAEtCvI,OAAG,eAAgB,SAEnB,OAAO,UAAWuI,EAAS,eAAe,4BAA4B,CACxE,EAEA"}