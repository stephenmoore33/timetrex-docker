{"version":3,"file":"TImage-D3G3HRb1.bundle.js","sources":["../../global/widgets/filebrowser/TImage.js"],"sourcesContent":["( function( $ ) {\n\n\t$.fn.TImage = function( options ) {\n\n\t\tGlobal.addCss( 'global/widgets/filebrowser/TImageBrowser.css' );\n\t\tvar opts = $.extend( {}, $.fn.TImage.defaults, options );\n\n\t\tvar $this = this;\n\t\tvar field;\n\n\t\tthis.clearErrorStyle = function() {\n\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValue = function() {\n\t\t\treturn null;\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\t\t\tif ( !val ) {\n\t\t\t\tthis.attr( 'src', '' );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar d = new Date();\n\t\t\tthis.attr( 'src', val + '&t=' + d.getTime() );\n\n\t\t};\n\n\t\tthis.each( function() {\n\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\n\t\t\tfield = o.field;\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.TImage.defaults = {};\n\n\t$( document ).on( 'mouseover', '.file-browser img', function( e ) {\n\t\tvar $this_image_widget = $( e.target ).parents( '.file-browser' );\n\n\t\tif ( !$( '.file_browser_overlay' )[0] && $( e.target ).attr( 'enable-delete' ) == 1 ) {\n\t\t\tvar height = $( e.target ).height();\n\t\t\tvar top = ( height - 32 ) / 2;\n\t\t\tvar left = top;\n\n\t\t\tvar file_browser_overlay = $( '<div class=\"file_browser_overlay\"><img src=\"theme/default/images/delete-512.png\" style=\"position:absolute;width:32px;height:32px;top:' + top + 'px;left:' + left + 'px;\"></div>' );\n\t\t\tfile_browser_overlay.css( 'position', 'absolute' );\n\t\t\tfile_browser_overlay.css( 'top', '0px' );\n\t\t\tfile_browser_overlay.css( 'left', '0' );\n\t\t\tfile_browser_overlay.css( 'cursor', 'pointer' );\n\t\t\tfile_browser_overlay.css( 'height', height + 'px' );\n\t\t\tfile_browser_overlay.css( 'width', '100%' );\n\t\t\tfile_browser_overlay.css( 'background', 'rgba(255,255,255,0.85)' );\n\n\t\t\t$( e.target ).parents( '.file-browser' ).append( file_browser_overlay );\n\n\t\t\t$( document ).on( 'click', '.file_browser_overlay', function( e ) {\n\t\t\t\tvar img_src = $( e.target ).parent().find( 'img' ).attr( 'src' );\n\t\t\t\tTAlertManager.showConfirmAlert( $.i18n._( 'This will permanently delete the image. Are you sure?' ), '', function( flag ) {\n\t\t\t\t\tif ( flag ) {\n\t\t\t\t\t\tvar e = { type: 'deleteClick', message: 'Delete image clicked.', time: new Date() };\n\t\t\t\t\t\t$this_image_widget.trigger( e );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t$( document ).on( 'mouseleave', '.file-browser', function() {\n\t\t\t\t$( document ).off( 'click', '.file_browser_overlay' );\n\t\t\t\tif ( $( '.file_browser_overlay' )[0] ) {\n\t\t\t\t\tvar file_browser_overlay = $( this ).find( '.file_browser_overlay' );\n\t\t\t\t\tfile_browser_overlay.off().remove();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n\n} )( jQuery );"],"names":["$","options","opts","field","val","d","o","e","$this_image_widget","height","top","left","file_browser_overlay","flag","jQuery"],"mappings":"iDAAE,SAAUA,EAAI,CAEfA,EAAE,GAAG,OAAS,SAAUC,EAAU,CAEjC,OAAO,OAAQ,gDACf,IAAIC,EAAOF,EAAE,OAAQ,CAAE,EAAEA,EAAE,GAAG,OAAO,SAAUC,GAG3CE,EAEJ,YAAK,gBAAkB,UAAW,CAEpC,EAEE,KAAK,SAAW,UAAW,CAC1B,OAAOA,CACV,EAEE,KAAK,SAAW,UAAW,CAC1B,OAAO,IACV,EAEE,KAAK,SAAW,SAAUC,EAAM,CAC/B,GAAK,CAACA,EAAM,CACX,KAAK,KAAM,MAAO,IAClB,MACA,CACD,IAAIC,EAAI,IAAI,KACZ,KAAK,KAAM,MAAOD,EAAM,MAAQC,EAAE,QAAO,EAE5C,EAEE,KAAK,KAAM,UAAW,CAErB,IAAIC,EAAIN,EAAE,KAAOA,EAAE,OAAQ,CAAA,EAAIE,EAAMF,EAAG,IAAI,EAAG,KAAM,CAAA,EAAKE,EAE1DC,EAAQG,EAAE,KAEb,GAES,IAET,EAECN,EAAE,GAAG,OAAO,SAAW,CAAA,EAEvBA,EAAG,QAAQ,EAAG,GAAI,YAAa,oBAAqB,SAAUO,EAAI,CACjE,IAAIC,EAAqBR,EAAGO,EAAE,MAAM,EAAG,QAAS,iBAEhD,GAAK,CAACP,EAAG,uBAAyB,EAAC,CAAC,GAAKA,EAAGO,EAAE,MAAM,EAAG,KAAM,eAAe,GAAM,EAAI,CACrF,IAAIE,EAAST,EAAGO,EAAE,MAAQ,EAAC,OAAM,EAC7BG,GAAQD,EAAS,IAAO,EACxBE,EAAOD,EAEPE,EAAuBZ,EAAG,wIAA0IU,EAAM,WAAaC,EAAO,eAClMC,EAAqB,IAAK,WAAY,YACtCA,EAAqB,IAAK,MAAO,OACjCA,EAAqB,IAAK,OAAQ,KAClCA,EAAqB,IAAK,SAAU,WACpCA,EAAqB,IAAK,SAAUH,EAAS,IAAI,EACjDG,EAAqB,IAAK,QAAS,QACnCA,EAAqB,IAAK,aAAc,0BAExCZ,EAAGO,EAAE,QAAS,QAAS,iBAAkB,OAAQK,GAEjDZ,EAAG,QAAQ,EAAG,GAAI,QAAS,wBAAyB,SAAUO,EAAI,CACnDP,EAAGO,EAAE,MAAM,EAAG,OAAM,EAAG,KAAM,KAAK,EAAG,KAAM,KAAQ,EACjE,cAAc,iBAAkBP,EAAE,KAAK,EAAG,uDAAyD,EAAE,GAAI,SAAUa,EAAO,CACzH,GAAKA,EAAO,CACX,IAAIN,EAAI,CAAE,KAAM,cAAe,QAAS,wBAAyB,KAAM,IAAI,MAC3EC,EAAmB,QAASD,EAC5B,CACN,EACA,GAEGP,EAAG,QAAU,EAAC,GAAI,aAAc,gBAAiB,UAAW,CAE3D,GADAA,EAAG,QAAU,EAAC,IAAK,QAAS,uBAAuB,EAC9CA,EAAG,yBAA0B,CAAC,EAAI,CACtC,IAAIY,EAAuBZ,EAAG,IAAM,EAAC,KAAM,uBAAuB,EAClEY,EAAqB,MAAM,QAC3B,CACL,EACG,CACH,EAEA,GAAKE,CAAQ"}