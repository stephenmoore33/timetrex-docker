{"version":3,"file":"MyJobApplicationViewController-B6L29qlb.bundle.js","sources":["../../views/portal/hr/my_jobapplication/MyJobApplicationViewController.js"],"sourcesContent":["import { TTAPI } from '@/services/TimeTrexClientAPI';\nimport { BaseViewController } from '@/views/BaseViewController';\n\nexport class MyJobApplicationViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#my_job_application_view',\n\t\t\tevents: {\n\t\t\t\t'click #available_jobs': 'availableJobsClick',\n\t\t\t}\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinitialize( options ) {\n\t\tsuper.initialize( options );\n\n\t\tthis.viewId = 'MyJobApplication';\n\t\tthis.api = TTAPI.APIJobApplicantPortal;\n\t\tthis.$( '.search-result .content' ).empty();\n\t\tthis.search();\n\t}\n\n\tavailableJobsClick() {\n\t\twindow.location = Global.getBaseURL( null, true, true ).replace(/#!m=.*?(&|$)/g, '#!m=PortalJobVacancy$1'); //Be sure to include any other URL args.\n\t\tLocalCacheData.setAllURLArgs( {} );\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\t\tvar column_filter = {};\n\t\tcolumn_filter.id = true;\n\t\tcolumn_filter.job_vacancy = true;\n\t\tcolumn_filter.job_vacancy_id = true;\n\t\tcolumn_filter.interview_date = true;\n\t\tcolumn_filter.created_date = true;\n\n\t\treturn column_filter;\n\t}\n\n\tsearch( page_action, page_number, callBack ) {\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\t// this.addSearchResultPanel();\n\t\tthis.vacancy_list_panel = this.$( '.search-result .content' );\n\t\tthis.more_btn = this.$( '.search-result .more' );\n\t\tthis.more_btn.unbind( 'click' ).bind( 'click', function() {\n\t\t\t$this.loadMore();\n\t\t} );\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_sort = {};\n\t\tfilter.filter_columns = this.getFilterColumnsFromDisplayColumns();\n\t\tfilter.filter_items_per_page = 0; // Default to 0 to load user preference defined\n\t\tif ( this.pager_data ) {\n\t\t\tif ( page_action === 'next' ) {\n\t\t\t\tfilter.filter_page = this.pager_data.next_page;\n\t\t\t} else {\n\t\t\t\tfilter.filter_page = 1;\n\t\t\t}\n\t\t} else {\n\t\t\tfilter.filter_page = 1;\n\t\t}\n\t\tthis.api['getJobApplication']( filter, false, { // paging or none\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t// if ( !$this.pager_data ) {\n\t\t\t\t// \t$this.vacancy_list_panel.empty();\n\t\t\t\t// }\n\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\tvar no_result_span = $( '<span class=\"vacancy-list-no-result\">' + $.i18n._( 'No Results Found' ) + '</span>' );\n\t\t\t\t\t$this.vacancy_list_panel.append( no_result_span );\n\t\t\t\t\t$this.vacancy_list_panel.css( 'text-align', 'center' );\n\t\t\t\t\t$this.more_btn.hide();\n\t\t\t\t} else {\n\t\t\t\t\tfor ( var i = 0; i < result_data.length; i++ ) {\n\t\t\t\t\t\tvar row_data = result_data[i];\n\t\t\t\t\t\tvar row_template = Global.loadWidget( 'views/portal/hr/my_jobapplication/MyJobApplicationRow.html' );\n\t\t\t\t\t\tvar args = {\n\t\t\t\t\t\t\tjob_vacancy: $.i18n._( row_data['job_vacancy'] ),\n\t\t\t\t\t\t\tcreated_date: $.i18n._( row_data['created_date'] )\n\t\t\t\t\t\t};\n\t\t\t\t\t\trow_template = $( _.template( row_template )( args ) );\n\t\t\t\t\t\tvar url = Global.getBaseURL( null, true, true ).replace(/#!m=.*?(&|$)/g, '#!m=PortalJobVacancyDetail&id=' + row_data['job_vacancy_id'] + '$1'); //Be sure to include any other URL args.\n\t\t\t\t\t\t$( row_template ).find( '.row-vacancy-title > span > a' ).attr( 'href', url );\n\t\t\t\t\t\t$this.vacancy_list_panel.append( row_template );\n\t\t\t\t\t}\n\t\t\t\t\t$this.pager_data = result.getPagerData();\n\n\t\t\t\t\tif ( $this.pager_data.is_last_page ) {\n\t\t\t\t\t\t$this.more_btn.hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.more_btn.show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tloadMore() {\n\t\tthis.search( 'next' );\n\t}\n}\n\nMyJobApplicationViewController.html_template = `\n<div id=\"my_job_application_view\">\n\t<div class=\"job-applicant-navbar\">\n\t\t<div class=\"container\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-3 col-sm-12 col-xs-12\">\n\t\t\t\t\t<button id=\"available_jobs\" class=\"btn btn-block btn-default w-100\"><span class=\"glyphicon glyphicon-menu-left\"></span> <%= $.i18n._('Available Jobs') %></button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class=\"search-result\">\n\t\t<div class=\"content container\">\n\t\t</div>\n\t\t<div class=\"more container\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<button type=\"button\" class=\"btn btn-primary btn-lg btn-block\"><%= $.i18n._('Loading') %>...</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n`;\n"],"names":["MyJobApplicationViewController","BaseViewController","options","_","TTAPI","column_filter","page_action","page_number","callBack","$this","filter","result","result_data","i","row_data","row_template","args","$","url","no_result_span"],"mappings":"qHAGO,MAAMA,UAAuCC,CAAmB,CACtE,YAAaC,EAAU,GAAK,CAC3BC,EAAE,SAAUD,EAAS,CACpB,GAAI,2BACJ,OAAQ,CACP,wBAAyB,oBACzB,CACJ,GAEE,MAAOA,CAAO,CACd,CAED,WAAYA,EAAU,CACrB,MAAM,WAAYA,GAElB,KAAK,OAAS,mBACd,KAAK,IAAME,EAAM,sBACjB,KAAK,EAAG,yBAA2B,EAAC,MAAK,EACzC,KAAK,OAAM,CACX,CAED,oBAAqB,CACpB,OAAO,SAAW,OAAO,WAAY,KAAM,GAAM,IAAO,QAAQ,gBAAiB,wBAAwB,EACzG,eAAe,cAAe,CAAA,EAC9B,CAED,oCAAqC,CACpC,IAAIC,EAAgB,CAAA,EACpB,OAAAA,EAAc,GAAK,GACnBA,EAAc,YAAc,GAC5BA,EAAc,eAAiB,GAC/BA,EAAc,eAAiB,GAC/BA,EAAc,aAAe,GAEtBA,CACP,CAED,OAAQC,EAAaC,EAAaC,EAAW,CAC5C,IAAIC,EAAQ,KACRC,EAAS,CAAA,EAEb,KAAK,mBAAqB,KAAK,EAAG,yBAAyB,EAC3D,KAAK,SAAW,KAAK,EAAG,sBAAsB,EAC9C,KAAK,SAAS,OAAQ,OAAO,EAAG,KAAM,QAAS,UAAW,CACzDD,EAAM,SAAQ,CACjB,GACEC,EAAO,YAAc,GACrBA,EAAO,YAAc,GACrBA,EAAO,eAAiB,KAAK,qCAC7BA,EAAO,sBAAwB,EAC1B,KAAK,YACJJ,IAAgB,OACpBI,EAAO,YAAc,KAAK,WAAW,UAKtCA,EAAO,YAAc,EAEtB,KAAK,IAAI,kBAAsBA,EAAQ,GAAO,CAC7C,SAAU,SAAUC,EAAS,CAC5B,IAAIC,EAAcD,EAAO,YAIzB,GAAM,OAAO,QAASC,GAKf,CACN,QAAUC,EAAI,EAAGA,EAAID,EAAY,OAAQC,IAAM,CAC9C,IAAIC,EAAWF,EAAYC,CAAC,EACxBE,EAAe,OAAO,WAAY,4DAA4D,EAC9FC,EAAO,CACV,YAAaC,EAAE,KAAK,EAAGH,EAAS,WAAgB,EAChD,aAAcG,EAAE,KAAK,EAAGH,EAAS,YAAiB,CACzD,EACMC,EAAeE,EAAGd,EAAE,SAAUY,CAAc,EAAEC,CAAI,GAClD,IAAIE,EAAM,OAAO,WAAY,KAAM,GAAM,EAAI,EAAG,QAAQ,gBAAiB,iCAAmCJ,EAAS,eAAoB,IAAI,EAC7IG,EAAGF,CAAc,EAAC,KAAM,+BAAiC,EAAC,KAAM,OAAQG,GACxET,EAAM,mBAAmB,OAAQM,EACjC,CACDN,EAAM,WAAaE,EAAO,eAErBF,EAAM,WAAW,aACrBA,EAAM,SAAS,OAEfA,EAAM,SAAS,MAEhB,KAzBqC,CACrC,IAAIU,EAAiBF,EAAG,wCAA0CA,EAAE,KAAK,EAAG,oBAAuB,WACnGR,EAAM,mBAAmB,OAAQU,GACjCV,EAAM,mBAAmB,IAAK,aAAc,QAAQ,EACpDA,EAAM,SAAS,MACpB,CAqBI,CACJ,EACE,CAED,UAAW,CACV,KAAK,OAAQ,OACb,CACF,CAEAT,EAA+B,cAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;"}