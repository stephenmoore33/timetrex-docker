import{_ as s,j as a}from"./vendor-tTApdY0Y.bundle.js";import"./FormulaBuilder-C7dDDUu-.bundle.js";class b extends BaseViewController{constructor(e={}){s.defaults(e,{el:"#pay_stub_entry_account_view_container",type_array:null,status_array:null,accrual_type_array:null,api_general_ledger_summary_report:null}),super(e)}init(e){this.edit_view_tpl="PayStubEntryAccountEditView.html",this.permission_id="pay_stub_account",this.viewId="PayStubEntryAccount",this.script_name="PayStubEntryAccountView",this.table_name_key="pay_stub_entry_account",this.context_menu_name=a.i18n._("Pay Stub Accounts"),this.navigation_label=a.i18n._("Pay Stub Account"),this.api=TTAPI.APIPayStubEntryAccount,this.api_general_ledger_summary_report=TTAPI.APIGeneralLedgerSummaryReport,this.render(),this.buildContextMenu(),this.initData()}initOptions(){var e=[{option_name:"type",api:this.api},{option_name:"status",api:this.api},{option_name:"accrual_type",api:this.api}];this.initDropDownOptions(e)}onFormItemChange(e,l){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var _=e.getField(),r=e.getValue();this.current_edit_record[_]=r,_==="type_id"&&this.onTypeChange(),_==="accrual_pay_stub_entry_account_id"&&this.onAccrualPayStubEntryAccountChange(),l||this.validate()}setEditViewDataDone(){super.setEditViewDataDone(),this.onTypeChange(),this.onAccrualPayStubEntryAccountChange()}onTypeChange(){this.current_edit_record.type_id==50?(this.detachElement("accrual_pay_stub_entry_account_id"),this.detachElement("accrual_type_id")):(this.attachElement("accrual_pay_stub_entry_account_id"),this.onAccrualPayStubEntryAccountChange()),this.editFieldResize()}onAccrualPayStubEntryAccountChange(){TTUUID.isUUID(this.current_edit_record.accrual_pay_stub_entry_account_id)&&this.current_edit_record.accrual_pay_stub_entry_account_id!=TTUUID.zero_id?this.attachElement("accrual_type_id"):this.detachElement("accrual_type_id"),this.editFieldResize()}getCustomContextMenuModel(){var e={exclude:[],include:[{label:"",id:"other_header",menu_align:"right",action_group:"other",action_group_header:!0,vue_icon:"tticon tticon-more_vert_black_24dp"},{label:a.i18n._("Migrate PS Accounts"),id:"migrate_pay_stub_account",menu_align:"right",action_group:"other"}]};return e}onCustomContextClick(e){switch(e){case"migrate_pay_stub_account":this.onWizardClick();break}}onWizardClick(){IndexViewController.openWizard("PayStubAccountWizard",null,function(){})}buildEditViewUI(){super.buildEditViewUI();var e=this,l={tab_pay_stub_account:{label:a.i18n._("Pay Stub Account")},tab_audit:!0};this.setTabModel(l),this.navigation.AComboBox({api_class:TTAPI.APIPayStubEntryAccount,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_PayStubAccount",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var _=this.edit_view_tab.find("#tab_pay_stub_account"),r=_.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(r);var t=Global.loadWidgetByName(FormItemType.COMBO_BOX);t.TComboBox({field:"status_id",set_empty:!1}),t.setSourceData(e.status_array),this.addEditFieldToColumn(a.i18n._("Status"),t,r,""),t=Global.loadWidgetByName(FormItemType.COMBO_BOX),t.TComboBox({field:"type_id",set_empty:!1}),t.setSourceData(e.type_array),this.addEditFieldToColumn(a.i18n._("Type"),t,r),t=Global.loadWidgetByName(FormItemType.TEXT_INPUT),t.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn(a.i18n._("Name"),t,r),t.parent().width("45%"),t=Global.loadWidgetByName(FormItemType.TEXT_INPUT),t.TTextInput({field:"ps_order",width:359}),this.addEditFieldToColumn(a.i18n._("Order"),t,r);var c={},d={};d.type_id=[50,80],c.filter_data=d,t=Global.loadWidgetByName(FormItemType.AWESOME_BOX),t.AComboBox({api_class:TTAPI.APIPayStubEntryAccount,allow_multiple_selection:!1,layout_name:"global_PayStubAccount",show_search_inputs:!0,set_empty:!0,field:"accrual_pay_stub_entry_account_id"}),t.setDefaultArgs(c),this.addEditFieldToColumn(a.i18n._("Accrual"),t,r,"",null,!0),t=Global.loadWidgetByName(FormItemType.COMBO_BOX),t.TComboBox({field:"accrual_type_id",set_empty:!1}),t.setSourceData(e.accrual_type_array),this.addEditFieldToColumn(a.i18n._("Accrual Type"),t,r,"",null,!0),t=Global.loadWidgetByName(FormItemType.FORMULA_BUILDER),t.FormulaBuilder({field:"debit_account",width:"350px",field_type:"text_input",text_label:a.i18n._("Variables"),onFormulaBtnClick:Global.debounce(function(){e.api_general_ledger_summary_report.getOptions("debit_credit_variables",{onResult:function(o){var u=o.getResult(),i={};i.do_not_validate=!0,i.do_not_show_functions=!0,i.variables=Global.buildRecordArray(u),i.formula=e.current_edit_record.debit_account,i.current_edit_record=Global.clone(e.current_edit_record),i.api=e.api_general_ledger_summary_report,IndexViewController.openWizard("FormulaBuilderWizard",i,function(n){e.current_edit_record.debit_account=n,e.edit_view_ui_dic.debit_account.setValue(n)})}})})}),e.addEditFieldToColumn(a.i18n._("Debit Account"),t,r,"",null,!0,!0),t=Global.loadWidgetByName(FormItemType.FORMULA_BUILDER),t.FormulaBuilder({field:"credit_account",width:"350px",field_type:"text_input",text_label:a.i18n._("Variables"),onFormulaBtnClick:Global.debounce(function(){e.api_general_ledger_summary_report.getOptions("debit_credit_variables",{onResult:function(o){var u=o.getResult(),i={};i.do_not_validate=!0,i.do_not_show_functions=!0,i.variables=Global.buildRecordArray(u),i.formula=e.current_edit_record.credit_account,i.current_edit_record=Global.clone(e.current_edit_record),i.api=e.api_general_ledger_summary_report,IndexViewController.openWizard("FormulaBuilderWizard",i,function(n){e.current_edit_record.credit_account=n,e.edit_view_ui_dic.credit_account.setValue(n)})}})})}),e.addEditFieldToColumn(a.i18n._("Credit Account"),t,r,"",null,!0,!0)}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:a.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:a.i18n._("Type"),in_column:1,field:"type_id",multiple:!0,basic_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:a.i18n._("Debit Account"),in_column:1,field:"debit_account",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:a.i18n._("Credit Account"),in_column:1,field:"credit_account",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:a.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:a.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX})]}}export{b as PayStubEntryAccountViewController};
//# sourceMappingURL=PayStubEntryAccountViewController-BpjuUbI1.bundle.js.map
