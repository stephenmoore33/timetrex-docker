{"version":3,"file":"UserReviewControlViewController-CENzIc66.bundle.js","sources":["../../views/hr/kpi/UserReviewControlViewController.js"],"sourcesContent":["export class UserReviewControlViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#user_review_control_view_container',\n\n\n\n\t\t\ttype_array: null,\n\t\t\tstatus_array: null,\n\t\t\tterm_array: null,\n\t\t\tseverity_array: null,\n\n\t\t\tkpi_group_array: null,\n\t\t\toriginal_user_review_data: [],\n\n\t\t\tdocument_object_type_id: null,\n\n\t\t\tkpi_group_api: null,\n\n\t\t\tuser_review_api: null,\n\n\t\t\tkpi_api: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'UserReviewControlEditView.html';\n\t\tthis.permission_id = 'user_review';\n\t\tthis.viewId = 'UserReviewControl';\n\t\tthis.script_name = 'UserReviewControlView';\n\t\tthis.table_name_key = 'user_review_control';\n\t\tthis.context_menu_name = $.i18n._( 'Reviews' );\n\t\tthis.navigation_label = $.i18n._( 'Review' );\n\t\tthis.api = TTAPI.APIUserReviewControl;\n\t\tthis.kpi_group_api = TTAPI.APIKPIGroup;\n\t\tthis.user_review_api = TTAPI.APIUserReview;\n\t\tthis.kpi_api = TTAPI.APIKPI;\n\t\tthis.document_object_type_id = 220;\n\t\tthis.render();\n\n\t\tif ( this.sub_view_mode ) {\n\t\t\tthis.buildContextMenu( true );\n\t\t} else {\n\t\t\tthis.buildContextMenu();\n\t\t}\n\n\t\t//call init data in parent view\n\t\tif ( !this.sub_view_mode ) {\n\t\t\tthis.initData();\n\t\t}\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: ['mass_edit'],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Print' ),\n\t\t\t\t\tid: 'pdf_review_print',\n\t\t\t\t\tvue_icon: 'tticon tticon-print_black_24dp',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\tsort_order: 100\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tvar options = [\n\t\t\t{ option_name: 'type', api: this.api },\n\t\t\t{ option_name: 'status', api: this.api },\n\t\t\t{ option_name: 'term', api: this.api },\n\t\t\t{ option_name: 'severity', api: this.api },\n\t\t];\n\n\t\tthis.initDropDownOptions( options );\n\n\t\tthis.kpi_group_api.getKPIGroup( false, false, false, {\n\t\t\tonResult: function( res ) {\n\t\t\t\tres = Global.clone( res.getResult() );\n\n\t\t\t\t//Error: Uncaught TypeError: Cannot set property 'name' of undefined in /interface/html5/#!m=Employee&a=edit&id=41499&tab=Reviews line 60\n\t\t\t\tif ( !res || !res[0] ) {\n\t\t\t\t\t$this.kpi_group_array = [];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tres[0].name = '-- ' + $.i18n._( 'Add KPIs' ) + ' --';\n\n\t\t\t\tvar all = {};\n\t\t\t\tall.name = '-- ' + $.i18n._( 'All' ) + ' --';\n\t\t\t\tall.level = 1;\n\t\t\t\tall.id = TTUUID.not_exist_id;\n\n\t\t\t\tif ( res.hasOwnProperty( '0' ) && res[0].hasOwnProperty( 'children' ) ) {\n\t\t\t\t\tres[0].children.unshift( all );\n\t\t\t\t} else {\n\t\t\t\t\tres = [\n\t\t\t\t\t\t{ children: [all], id: 0, level: 0, name: '-- ' + $.i18n._( 'Add KPIs' ) + ' --' }\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\tres = Global.buildTreeRecord( res );\n\n\t\t\t\t$this.kpi_group_array = res;\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_review': {\n\t\t\t\t'label': $.i18n._( 'Review' ),\n\t\t\t\t'html_template': this.getUserReviewTabHtml(),\n\t\t\t\t'is_multi_column': true\n\t\t\t},\n\t\t\t'tab_attachment': true,\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUserReviewControl,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_kpi_review_control',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_review = this.edit_view_tab.find( '#tab_review' );\n\n\t\tvar tab_review_column1 = tab_review.find( '.first-column' );\n\t\tvar tab_review_column2 = tab_review.find( '.second-column' );\n\t\tvar tab_review_column4 = tab_review.find( '.forth-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_review_column1 );\n\t\tthis.edit_view_tabs[0].push( tab_review_column2 );\n\n\t\t// Employee\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'user_id'\n\t\t} );\n\n\t\tvar default_args = {};\n\t\tdefault_args.permission_section = 'user_review';\n\t\tform_item_input.setDefaultArgs( default_args );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee' ), form_item_input, tab_review_column1, '' );\n\n\t\t// Reviewer\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'reviewer_user_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Reviewer' ), form_item_input, tab_review_column1 );\n\n\t\t// Status\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'status_id' } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_review_column1 );\n\n\t\t// Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'type_id' } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab_review_column1 );\n\n\t\t// Terms\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'term_id' } );\n\t\tform_item_input.setSourceData( $this.term_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Terms' ), form_item_input, tab_review_column1 );\n\n\t\t// Rating\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'rating', width: 50 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Rating' ), form_item_input, tab_review_column1, '' );\n\n\t\t// Severity\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'severity_id' } );\n\t\tform_item_input.setSourceData( $this.severity_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Severity' ), form_item_input, tab_review_column2, '' );\n\n\t\t// Start Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'start_date' } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Start Date' ), form_item_input, tab_review_column2, '', null );\n\n\t\t// End Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'end_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'End Date' ), form_item_input, tab_review_column2, '', null );\n\n\t\t// Due Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'due_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Due Date' ), form_item_input, tab_review_column2, '', null );\n\n\t\t//Tags\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TAG_INPUT );\n\n\t\tform_item_input.TTagInput( { field: 'tag', object_type_id: 320 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Tags' ), form_item_input, tab_review_column2, '', null, null, true );\n\n\t\tif ( this.is_add || this.is_edit ) {\n\t\t\t// Add KPIs from Groups\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\ttree_mode: true,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\tset_empty: true,\n\t\t\t\tfield: 'group_id'\n\t\t\t} );\n\t\t\tform_item_input.setSourceData( $this.kpi_group_array );\n\n\t\t\tvar tab_review_column3 = tab_review.find( '.third-column' ).css( {\n\t\t\t\t'float': 'left',\n\t\t\t\t'margin-top': '10px',\n\t\t\t\t'margin-bottom': '10px'\n\t\t\t} );\n\t\t\ttab_review_column3.find( '.column-form-item-label' ).css( {\n\t\t\t\t'float': 'left',\n\t\t\t\t'margin-right': '10px',\n\t\t\t\t'margin-top': '5px'\n\t\t\t} ).text( $.i18n._( 'Add KPIs from Groups' ) );\n\t\t\ttab_review_column3.find( '.column-form-item-input' ).css( { 'float': 'left' } ).append( form_item_input );\n\n\t\t\tthis.edit_view_ui_dic[form_item_input.getField()] = form_item_input;\n\n\t\t\tform_item_input.bind( 'formItemChange', function( e, target, doNotValidate ) {\n\t\t\t\t$this.onFormItemChange( target, doNotValidate );\n\t\t\t} );\n\t\t}\n\n\t\t// Note\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\n\t\tform_item_input.TTextArea( { field: 'note', width: '100%', height: 66 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Note' ), form_item_input, tab_review_column4, 'first_last', null, null, true );\n\t}\n\n\tinitInsideEditorUI() {\n\t\t//Inside editor\n\t\tvar tab_review = this.edit_view_tab.find( '#tab_review' );\n\n\t\tvar inside_editor_div = tab_review.find( '.inside-editor-div' );\n\n\t\tvar args = {\n\t\t\tserial: '#',\n\t\t\tname: $.i18n._( 'Key Performance Indicator' ) + '<br>(' + $.i18n._('Hover for Description') + ')',\n\t\t\trating: $.i18n._( 'Result' ),\n\t\t\tnote: $.i18n._( 'Note' )\n\t\t};\n\n\t\tthis.editor = Global.loadWidgetByName( FormItemType.INSIDE_EDITOR );\n\n\t\tthis.editor.InsideEditor( {\n\t\t\taddRow: this.insideEditorAddRow,\n\t\t\tremoveRow: this.insideEditorRemoveRow,\n\t\t\tgetValue: this.insideEditorGetValue,\n\t\t\tsetValue: this.insideEditorSetValue,\n\t\t\tonFormItemChange: this.onInsideFormItemChange,\n\t\t\tparent_controller: this,\n\t\t\tapi: this.user_review_api,\n\t\t\trender: getRender(),\n\t\t\trender_args: args,\n\t\t\trender_inline_html: true,\n\t\t\trow_render: getRowRender()\n\n\t\t} );\n\n\t\tfunction getRender() {\n\t\t\treturn `\n\t\t\t<table class=\"inside-editor-render\">\n\t\t\t\t<tr class=\"title\" style=\"font-weight: bold\">\n\t\t\t\t\t<td style=\"width: 50px\"><%= serial %></td>\n\t\t\t\t\t<td style=\"width: 820px\"><%= name %></td>\n\t\t\t\t\t<td style=\"width: 70px\"><%= rating %></td>\n\t\t\t\t\t<td style=\"width: 300px;\"><%= note %></td>\n\t\t\t\t</tr>\n\t\t\t</table>`;\n\t\t}\n\n\t\tfunction getRowRender() {\n\t\t\treturn `\n\t\t\t<tr class=\"inside-editor-row data-row\">\n\t\t\t\t<td></td>\n\t\t\t\t<td></td>\n\t\t\t\t<td></td>\n\t\t\t\t<td></td>\n\t\t\t</tr>`;\n\t\t}\n\n\t\tinside_editor_div.append( this.editor );\n\t}\n\n\t/* jshint ignore:start */\n\n\taddEditFieldToColumn( label, widgets, column, firstOrLastRecord, widgetContainer, saveFormItemDiv, setResizeEvent, saveFormItemDivKey, hasKeyEvent, customLabelWidget ) {\n\n\t\tvar $this = this;\n\t\tvar form_item = $( Global.loadWidgetByName( WidgetNamesDic.EDIT_VIEW_FORM_ITEM ) );\n\t\tvar form_item_label_div = form_item.find( '.edit-view-form-item-label-div' );\n\t\tvar form_item_label = form_item.find( '.edit-view-form-item-label' );\n\t\tvar form_item_input_div = form_item.find( '.edit-view-form-item-input-div' );\n\n\t\tif ( customLabelWidget ) {\n\t\t\tform_item_label.parent().append( customLabelWidget );\n\t\t\tform_item_label.remove();\n\t\t} else {\n\t\t\tform_item_label.text( $.i18n._( label ) );\n\t\t}\n\n\t\tvar widget = widgets;\n\n\t\tif ( Global.isArray( widgets ) ) {\n\n\t\t\tfor ( var i = 0; i < widgets.length; i++ ) {\n\t\t\t\twidget = widgets[i];\n\t\t\t\twidget.css( 'opacity', 0 );\n\n\t\t\t\tthis.edit_view_ui_dic[widget.getField()] = widget;\n\n\t\t\t\twidget.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target, doNotValidate ) {\n\t\t\t\t\t$this.onFormItemChange( target, doNotValidate );\n\t\t\t\t} );\n\n\t\t\t\tif ( hasKeyEvent ) {\n\t\t\t\t\twidget.unbind( 'formItemKeyUp' ).bind( 'formItemKeyUp', function( e, target ) {\n\t\t\t\t\t\t$this.onFormItemKeyUp( target );\n\t\t\t\t\t} );\n\n\t\t\t\t\twidget.unbind( 'formItemKeyDown' ).bind( 'formItemKeyDown', function( e, target ) {\n\t\t\t\t\t\t$this.onFormItemKeyDown( target );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\twidget.css( 'opacity', 0 );\n\n\t\t\tthis.edit_view_ui_dic[widget.getField()] = widget;\n\n\t\t\twidget.bind( 'formItemChange', function( e, target, doNotValidate ) {\n\t\t\t\t$this.onFormItemChange( target, doNotValidate );\n\t\t\t} );\n\n\t\t\tif ( hasKeyEvent ) {\n\t\t\t\twidget.bind( 'formItemKeyUp', function( e, target ) {\n\t\t\t\t\t$this.onFormItemKeyUp( target );\n\t\t\t\t} );\n\n\t\t\t\twidget.bind( 'formItemKeyDown', function( e, target ) {\n\t\t\t\t\t$this.onFormItemKeyDown( target );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t}\n\n\t\tif ( Global.isSet( widgetContainer ) ) {\n\t\t\tform_item_input_div.append( widgetContainer );\n\n\t\t} else {\n\t\t\tform_item_input_div.append( widget );\n\t\t}\n\n\t\tif ( setResizeEvent ) {\n\n\t\t\tif ( widget.getField() === 'note' ) {\n\n\t\t\t\tform_item_input_div.css( 'width', '80%' );\n\t\t\t\tform_item_label_div.css( 'height', '80' );\n\t\t\t\twidget.css( { 'width': '100%', 'resize': 'none' } );\n\n\t\t\t} else {\n\n\t\t\t\tform_item.bind( 'resize', function() {\n\n\t\t\t\t\tif ( form_item_label_div.height() !== form_item.height() && form_item.height() !== 0 ) {\n\t\t\t\t\t\tform_item_label_div.css( 'height', form_item.height() );\n\t\t\t\t\t\tform_item.unbind( 'resize' );\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\t// This causes extreme (10x) performance degradation on Bootstrap 5.1.0 and later. (Related TText setResizeEvent call)\n\t\t\t\t// widget.bind( 'setSize', function() {\n\t\t\t\t// \tform_item_label_div.css( 'height', widget.height() + 5 );\n\t\t\t\t// } );\n\t\t\t}\n\n\t\t}\n\n\t\tif ( saveFormItemDiv ) {\n\n\t\t\tif ( Global.isArray( widgets ) ) {\n\t\t\t\tthis.edit_view_form_item_dic[widgets[0].getField()] = form_item;\n\t\t\t} else {\n\t\t\t\tthis.edit_view_form_item_dic[widget.getField()] = form_item;\n\t\t\t}\n\n\t\t}\n\n\t\tcolumn.append( form_item );\n\t\t//column.append( \"<div class='clear-both-div'></div>\" );\n\t}\n\n\t/* jshint ignore:end */\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\n\t\tvar default_args = {};\n\t\tdefault_args.permission_section = 'user_review';\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tdefault_args: default_args,\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Reviewer' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'reviewer_user_id',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Tags' ),\n\t\t\t\tfield: 'tag',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tobject_type_id: 320,\n\t\t\t\tform_item_type: FormItemType.TAG_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Terms' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'term_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Severity' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'severity_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Start Date' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'start_date',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.DATE_PICKER\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'End Date' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'end_date',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.DATE_PICKER\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Due Date' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'due_date',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.DATE_PICKER\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'KPI' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'kpi_id',\n\t\t\t\tlayout_name: 'global_kpi',\n\t\t\t\tapi_class: TTAPI.APIKPI,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tremoveEditView() {\n\t\tsuper.removeEditView();\n\t\tthis.editor = null;\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\t\tthis.initInsideEditorData();\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tvar $this = this;\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\t\tswitch ( key ) {\n\t\t\tcase 'group_id':\n\t\t\t\tvar filter = {};\n\t\t\t\tfilter.filter_data = {};\n\t\t\t\t// why need [c_value, -1], -1 will return all, the filter won't work correct if send -1,remove for testting\n\t\t\t\tfilter.filter_data.group_id = [c_value];\n\t\t\t\tthis.kpi_api['get' + this.kpi_api.key_name]( filter, false, true, {\n\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\t$this.setInsideEditorData( res );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.current_edit_record[key] = c_value;\n\t\t\t\tif ( !doNotValidate ) {\n\t\t\t\t\tthis.validate();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonInsideFormItemChange( target, doNotValidate ) {\n\t\ttarget.clearErrorStyle();\n\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\t\tswitch ( key ) {\n\t\t\tcase 'rating':\n\t\t\t\tvar minimum_rate = parseInt( target.attr( 'minimum_rate' ) );\n\t\t\t\tvar maximum_rate = parseInt( target.attr( 'maximum_rate' ) );\n\t\t\t\tif ( c_value !== '' ) {\n\t\t\t\t\tc_value = parseInt( c_value );\n\t\t\t\t\tif ( c_value >= minimum_rate && c_value <= maximum_rate ) {\n\t\t\t\t\t\ttarget.clearErrorStyle();\n\t\t\t\t\t\tthis.parent_controller.setEditMenu();\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget.setErrorStyle( $.i18n._( 'Rating must between' ) + ' ' + minimum_rate + ' ' + $.i18n._( 'and' ) + ' ' + maximum_rate, true );\n\t\t\t\t\t\tthis.parent_controller.setErrorMenu();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tinitInsideEditorData() {\n\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\targs.filter_data = {};\n\n\t\tif ( this.current_edit_record.id ) {\n\n\t\t\targs.filter_data.user_review_control_id = this.current_edit_record['id'];\n\n\t\t\t$this.user_review_api['get' + $this.user_review_api.key_name]( args, true, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tif ( !$this.edit_view ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t$this.setInsideEditorData( res );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\t/* jshint ignore:start */\n\n\tsetInsideEditorData( res ) {\n\t\tvar data = res.getResult();\n\t\tvar len = data.length;\n\n\t\tif ( len > 0 ) {\n\n\t\t\tif ( !this.editor ) {\n\t\t\t\tthis.initInsideEditorUI();\n\t\t\t}\n\n\t\t\tvar serial = 1;\n\t\t\tfor ( var key in data ) {\n\t\t\t\tvar row = data[key];\n\t\t\t\tvar is_existed = false;\n\t\t\t\tif ( !row.kpi_id ) {\n\t\t\t\t\trow.kpi_id = row.id;\n\t\t\t\t\trow.id = false;\n\t\t\t\t}\n\t\t\t\t// the row.kpi_id if existed in this.editor.editor_data?\n\t\t\t\tif ( this.editor.editor_data ) {\n\n\t\t\t\t\tfor ( var i = 0; i < this.editor.editor_data.length; i++ ) {\n\t\t\t\t\t\tvar item = this.editor.editor_data[i];\n\t\t\t\t\t\tif ( row.kpi_id === item.kpi_id ) {\n\t\t\t\t\t\t\tis_existed = true; // the current row has already displayed.\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !is_existed ) {\n\t\t\t\t\t\tserial = this.editor.editor_data.length + 1;\n\t\t\t\t\t\trow.serial = serial;\n\t\t\t\t\t\tthis.editor.editor_data.push( row );\n\t\t\t\t\t}\n\n//\t\t\t\t\tserial++;\n\n\t\t\t\t} else {\n\t\t\t\t\trow.serial = serial;\n\t\t\t\t\tdata[key] = row;\n\t\t\t\t\tserial++;\n\t\t\t\t}\n\n\t\t\t\tif ( !is_existed ) {\n\t\t\t\t\tthis.editor.addRow( row );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( !this.editor.editor_data ) {\n\t\t\t\tthis.original_user_review_data = _.map( data, _.clone );\n\t\t\t\tfor ( let i = 0; i < this.original_user_review_data.length; i++ ) {\n\t\t\t\t\t//Need to convert these jQuery objects to their values so thwt future data change comparisons do not fail.\n\t\t\t\t\tif ( this.original_user_review_data[i].hasOwnProperty( 'rating' ) && this.original_user_review_data[i].rating !== false ) {\n\t\t\t\t\t\tthis.original_user_review_data[i].rating = this.original_user_review_data[i].rating.getValue();\n\t\t\t\t\t}\n\t\t\t\t\tif ( this.original_user_review_data[i].hasOwnProperty( 'note' ) && this.original_user_review_data[i].note !== false ) {\n\t\t\t\t\t\tthis.original_user_review_data[i].note = this.original_user_review_data[i].note.getValue();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.editor.editor_data = data;\n\t\t\t}\n\n\t\t}\n\n//\t\t$this.editor.setValue( data );\n\t}\n\n\t/* jshint ignore:end */\n\n//\tinsideEditorSetValue( val ) {\n//\t\tvar len = val.length;\n//\t\tthis.removeAllRows();\n//\n//\t\tif ( len > 0 ) {\n//\t\t\tvar serial = 1;\n//\t\t\tfor ( var i = 0; i < val.length; i++ ) {\n//\t\t\t\tif ( Global.isSet( val[i] ) ) {\n//\t\t\t\t\tvar row = val[i];\n//\t\t\t\t\trow.serial = serial;\n//\t\t\t\t\tthis.addRow( row );\n//\t\t\t\t\tserial++;\n//\t\t\t\t}\n//\t\t\t}\n//\t\t}\n//\n//\t},\n\n\tinsideEditorAddRow( data ) {\n\t\tvar $this = this;\n\t\tif ( !data ) {\n//\t\t\tthis.getDefaultData();\n\t\t} else {\n\t\t\tvar row = this.getRowRender(); //Get Row render\n\t\t\tvar render = this.getRender(); //get render, should be a table\n\t\t\tvar widgets = data; //Save each row's widgets\n\n\t\t\t//Build row widgets\n\n\t\t\t// #\n\t\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\tform_item_input.TText( { field: 'serial', width: 50 } );\n\t\t\tform_item_input.setValue( data.serial ? data.serial : null );\n//\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\t\trow.children().eq( 0 ).append( form_item_input );\n\n\t\t\t// Key Performance Indicator\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\tform_item_input.TText( { field: 'name', width: 600 } );\n\t\t\tform_item_input.setValue( data.name ? data.name : null );\n\t\t\tform_item_input.attr( 'title', data.description ? data.description : $.i18n._( 'No Description' ) );\n\n\t\t\trow.children().eq( 1 ).append( form_item_input );\n\n\t\t\t// Rating\n\t\t\tif ( data.type_id == 10 ) {\n\t\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\t\tform_item_input.TTextInput( { field: 'rating', width: 40 } );\n\t\t\t\tform_item_input.setValue( data.rating ? data.rating : null );\n\t\t\t\tform_item_input.attr( { 'minimum_rate': data.minimum_rate, 'maximum_rate': data.maximum_rate } );\n\t\t\t\tform_item_input.bind( 'formItemChange', function( e, target, doNotValidate ) {\n\t\t\t\t\t$this.onFormItemChange( target, doNotValidate );\n\t\t\t\t} );\n\t\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\t\t\trow.children().eq( 2 ).append( form_item_input );\n\n\t\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t\t} else if ( data.type_id == 20 ) {\n\t\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\t\t\tform_item_input.TCheckbox( { field: 'rating' } );\n\t\t\t\tform_item_input.setValue( data.rating ? ( data.rating >= 1 ? true : false ) : null ); //Rating is numeric, so make sure we pass true/false to TCheckbox.\n\t\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\t\t\trow.children().eq( 2 ).append( form_item_input );\n\n\t\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\t\t\t}\n\n\t\t\t// Note\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\t\tform_item_input.TTextArea( {\n\t\t\t\tfield: 'note',\n\t\t\t\tstyle: { width: '300px', height: '20px', 'min-height': '10px' }\n\t\t\t} );\n\t\t\tform_item_input.setValue( data.note ? data.note : null );\n\t\t\twidgets[form_item_input.getField()] = form_item_input;\n\t\t\trow.children().eq( 3 ).css( 'text-align', 'right' ).append( form_item_input );\n\t\t\tthis.setWidgetEnableBaseOnParentController( form_item_input );\n\n\t\t\t// end\n\n\t\t\tif ( this.rows_widgets_array.length === 0 ) {\n\t\t\t\t$( render ).append( row );\n\t\t\t} else {\n\t\t\t\t// Get all rows and insert new row according to it's display_order\n\t\t\t\tlet rows = render.find( 'tr' ).get();\n\n\t\t\t\tdata.display_order = parseInt( data.display_order ) || 0;\n\n\t\t\t\tfor ( let i = 0; i < rows.length; i++ ) {\n\t\t\t\t\t// Loop looks for the correct spot to insert the new row based on the value of display_order.\n\t\t\t\t\t// If the last row is undefined or the value of display_order is less than the row to be inserted and the row after this is undefined or has a higher display_order, insert it there.\n\t\t\t\t\tif ( ( i === 0 || $( rows[i] ).attr( 'data-order' ) <= data.display_order ) && ( rows[i + 1] === undefined || $( rows[i + 1] ).attr( 'data-order' ) >= data.display_order ) ) {\n\t\t\t\t\t\t$( rows[i] ).after( row );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Now that the rows are in the correct order, renumber them.\n\t\t\t\trows = render.find( 'tr' ).get();\n\t\t\t\tlet order_number = 1;\n\t\t\t\tfor ( let i = 0; i < rows.length; i++ ) {\n\t\t\t\t\tif ( i !== 0 ) {\n\t\t\t\t\t\t$( rows[i] ).find( \"td:first\" ).text( order_number );\n\t\t\t\t\t\torder_number++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( this.parent_controller.is_viewing ) {\n\t\t\t\trow.find( '.control-icon' ).hide();\n\t\t\t}\n\n\t\t\tthis.rows_widgets_array.push( widgets );\n\n\t\t\tthis.addIconsEvent( row ); //Bind event to add and minus icon\n\t\t\tthis.removeLastRowLine();\n\n\t\t\t// Attach display_order to the <tr> for easy reordering after adding new KPI groups.\n\t\t\trow.attr('data-order', data.display_order);\n\t\t}\n\t}\n\n\tinsideEditorRemoveRow( row ) {\n\t\tvar index = row[0].rowIndex - 1;\n\t\tvar remove_id = this.rows_widgets_array[index].current_edit_item.id;\n\t\tif ( TTUUID.isUUID( remove_id ) && remove_id != TTUUID.zero_id && remove_id != TTUUID.not_exist_id ) {\n\t\t\tthis.delete_ids.push( remove_id );\n\t\t}\n\t\trow.remove();\n\t\tthis.rows_widgets_array.splice( index, 1 );\n\t\tthis.removeLastRowLine();\n\t}\n\n\tonSaveResult( result ) {\n\t\tvar $this = this;\n\t\tif ( result && result.isValid() ) {\n\t\t\tvar result_data = result.getResult();\n\t\t\tif ( result_data === true ) {\n\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\t\t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t$this.refresh_id = result_data;\n\t\t\t}\n\n\t\t\t$this.saveInsideEditorData( function() {\n\t\t\t\t$this.search();\n\t\t\t\t$this.onSaveDone( result );\n\n\t\t\t\t$this.removeEditView();\n\t\t\t} );\n\n\t\t} else {\n\t\t\t$this.setErrorMenu();\n\t\t\t$this.setErrorTips( result );\n\n\t\t}\n\t}\n\n\t// onSaveAndContinueResult( result ) {\n\t// \tvar $this = this;\n\t// \tif ( result.isValid() ) {\n\t// \t\tvar result_data = result.getResult();\n\t// \t\tif ( result_data === true ) {\n\t// \t\t\t$this.refresh_id = $this.current_edit_record.id;\n\t//\n\t// \t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t// \t\t\t$this.refresh_id = result_data;\n\t// \t\t}\n\t//\n\t// \t\t$this.saveInsideEditorData( function() {\n\t// \t\t\t$this.search( false );\n\t// \t\t\t$this.onEditClick( $this.refresh_id, true );\n\t//\n\t// \t\t\t$this.onSaveAndContinueDone( result );\n\t// \t\t} );\n\t//\n\t// \t} else {\n\t// \t\t$this.setErrorTips( result );\n\t// \t\t$this.setErrorMenu();\n\t// \t}\n\t// },\n\n\tonEditClick( editId, noRefreshUI ) {\n\t\tvar $this = this;\n\t\tif ( $this.editor ) {\n\t\t\t$this.editor.remove();\n\t\t\t$this.editor = null;\n\t\t}\n\n\t\tsuper.onEditClick( editId, noRefreshUI );\n\t}\n\n\tsaveInsideEditorData( callBack ) {\n\t\tvar $this = this;\n\n\t\tif ( !this.editor ) {\n\t\t\tcallBack();\n\t\t} else {\n\t\t\tvar data = this.editor.getValue( this.refresh_id );\n\t\t\tlet changed_data = this.getChangedRecords( data, this.original_user_review_data, [] );\n\n\t\t\tif ( Array.isArray( changed_data ) && changed_data.length > 0 ) {\n\t\t\t\tthis.user_review_api.setUserReview( changed_data, {\n\t\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t\tcallBack();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tcallBack();\n\t\t\t}\n\n\t\t}\n\t}\n\n\tinsideEditorGetValue( current_edit_item_id ) {\n\t\tvar len = this.rows_widgets_array.length;\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar row = this.rows_widgets_array[i];\n\t\t\tif ( row.rating ) {\n\t\t\t\trow.rating = row.rating.getValue();\n\t\t\t}\n\t\t\trow.note = row.note.getValue();\n\n\t\t\trow.user_review_control_id = current_edit_item_id;\n\n\t\t\tthis.rows_widgets_array[i] = row;\n\t\t}\n\n\t\treturn this.rows_widgets_array;\n\t}\n\n\t_continueDoCopyAsNew() {\n\n\t\tvar $this = this;\n\t\tthis.is_add = true;\n\n\t\tLocalCacheData.current_doing_context_action = 'copy_as_new';\n\n\t\tif ( Global.isSet( this.edit_view ) ) {\n\n\t\t\tthis.current_edit_record.id = '';\n\t\t\tvar navigation_div = this.edit_view.find( '.navigation-div' );\n\t\t\tnavigation_div.css( 'display', 'none' );\n\t\t\tif ( this.editor ) {\n\t\t\t\tthis.editor.remove();\n\t\t\t\tthis.editor = null;\n\t\t\t}\n\t\t\tthis.setEditMenu();\n\t\t\tthis.setTabStatus();\n\t\t\tthis.is_changed = false;\n\t\t\tProgressBar.closeOverlay();\n\n\t\t} else {\n\t\t\tsuper._continueDoCopyAsNew();\n\t\t}\n\t}\n\n\tonSaveAndNewResult( result ) {\n\t\tvar $this = this;\n\t\tif ( result && result.isValid() ) {\n\t\t\tvar result_data = result.getResult();\n\t\t\tif ( result_data === true ) {\n\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\n\t\t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t$this.refresh_id = result_data;\n\t\t\t}\n\n\t\t\t$this.saveInsideEditorData( function() {\n\t\t\t\t$this.search( false );\n\t\t\t\tif ( $this.editor ) {\n\t\t\t\t\t$this.editor.remove();\n\t\t\t\t\t$this.editor = null;\n\t\t\t\t}\n\t\t\t\t$this.onAddClick( true );\n\t\t\t} );\n\n\t\t} else {\n\t\t\t$this.setErrorTips( result );\n\t\t\t$this.setErrorMenu();\n\t\t}\n\t}\n\n\tonSaveAndCopyResult( result ) {\n\t\tvar $this = this;\n\t\tif ( result && result.isValid() ) {\n\t\t\tvar result_data = result.getResult();\n\t\t\tif ( result_data === true ) {\n\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\n\t\t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t$this.refresh_id = result_data;\n\t\t\t}\n\n\t\t\t$this.saveInsideEditorData( function() {\n\t\t\t\t$this.search( false );\n\t\t\t\tif ( $this.editor ) {\n\t\t\t\t\t$this.editor.remove();\n\t\t\t\t\t$this.editor = null;\n\t\t\t\t}\n\t\t\t\t$this.onCopyAsNewClick();\n\t\t\t} );\n\n\t\t} else {\n\t\t\t$this.setErrorTips( result );\n\t\t\t$this.setErrorMenu();\n\t\t}\n\t}\n\n\t// onSaveAndNextResult( result ) {\n\t// \tvar $this = this;\n\t// \tif ( result.isValid() ) {\n\t// \t\tvar result_data = result.getResult();\n\t// \t\tif ( result_data === true ) {\n\t// \t\t\t$this.refresh_id = $this.current_edit_record.id;\n\t// \t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t// \t\t\t$this.refresh_id = result_data;\n\t// \t\t}\n\t//\n\t// \t\t$this.saveInsideEditorData( function() {\n\t// \t\t\t$this.onRightArrowClick();\n\t// \t\t\t$this.search( false );\n\t// \t\t\t$this.onSaveAndNextDone( result );\n\t// \t\t} );\n\t//\n\t// \t} else {\n\t// \t\t$this.setErrorTips( result );\n\t// \t\t$this.setErrorMenu();\n\t// \t}\n\t// },\n\n\tonRightArrowClick() {\n\t\tif ( this.editor ) {\n\t\t\tthis.editor.remove();\n\t\t\tthis.editor = null;\n\t\t}\n\t\tsuper.onRightArrowClick();\n\t}\n\n\tonLeftArrowClick() {\n\t\tif ( this.editor ) {\n\t\t\tthis.editor.remove();\n\t\t\tthis.editor = null;\n\t\t}\n\t\tsuper.onLeftArrowClick();\n\t}\n\n\tsearchDone() {\n\t\tsuper.searchDone();\n\t\tTTPromise.resolve( 'ReviewView', 'init' );\n\t}\n\n\tsetDefaultMenuReportRelatedIcons( context_btn, grid_selected_length, pId ) {\n\t\tif ( !this.payStubReportIconsValidate() ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\n\t\tif ( grid_selected_length > 0 && this.viewOwnerOrChildPermissionValidate() ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsetCustomDefaultMenuIcon( id, context_btn, grid_selected_length ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'pdf_review_print':\n\t\t\t\tif ( grid_selected_length > 0 && this.viewOwnerOrChildPermissionValidate() ) {\n\t\t\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t\t\t} else {\n\t\t\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tdoFormIFrameCall( postData ) {\n\t\tGlobal.APIFileDownload( 'APIKPIReport', 'getKPIReport', postData );\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tvar $this = this;\n\n\t\tswitch ( id ) {\n\t\t\tcase 'pdf_review_print':\n\t\t\t\tvar grid_selected_id_array;\n\n\t\t\t\tvar ids = [];\n\t\t\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\t\t\tids.push( $this.current_edit_record.id );\n\t\t\t\t} else {\n\t\t\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\t\t\tids.push( grid_selected_row.id );\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tthis.doFormIFrameCall( { 0: { 'user_review_control_id': ids }, 1: 'pdf_review_print' } );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tgetUserReviewTabHtml() {\n\t\treturn `<div id=\"tab_review\" class=\"edit-view-tab-outside\">\n\t\t\t\t\t<div class=\"edit-view-tab\" id=\"tab_review_content_div\">\n\t\t\t\t\t\t<div class=\"first-column\"></div>\n\t\t\t\t\t\t<div class=\"second-column\"></div>\n\t\t\t\t\t\t<div class=\"third-column full-width-column\">\n\t\t\t\t\t\t\t<div class=\"third-column-form-item\" style=\"margin-left: 40%\">\n\t\t\t\t\t\t\t\t<div class=\"column-form-item-label\"></div>\n\t\t\t\t\t\t\t\t<div class=\"column-form-item-input\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"inside-editor-div full-width-column\"></div>\n\t\t\t\t\t\t<div class=\"forth-column full-width-column border-column\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t}\n}\n\nUserReviewControlViewController.loadSubView = function( container, beforeViewLoadedFun, afterViewLoadedFun ) {\n\tGlobal.loadViewSource( 'UserReviewControl', 'SubUserReviewControlView.html', function( result ) {\n\t\tvar args = {};\n\t\tvar template = _.template( result );\n\n\t\tif ( Global.isSet( beforeViewLoadedFun ) ) {\n\t\t\tbeforeViewLoadedFun();\n\t\t}\n\t\tif ( Global.isSet( container ) ) {\n\t\t\tcontainer.html( template( args ) );\n\t\t\tif ( Global.isSet( afterViewLoadedFun ) ) {\n\t\t\t\tTTPromise.wait( 'BaseViewController', 'initialize', function() {\n\t\t\t\t\tafterViewLoadedFun( sub_user_review_control_view_controller );\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t} );\n};"],"names":["UserReviewControlViewController","options","_","$","context_menu_model","$this","res","all","tab_model","tab_review","tab_review_column1","tab_review_column2","tab_review_column4","form_item_input","default_args","tab_review_column3","e","target","doNotValidate","inside_editor_div","args","getRender","getRowRender","label","widgets","column","firstOrLastRecord","widgetContainer","saveFormItemDiv","setResizeEvent","saveFormItemDivKey","hasKeyEvent","customLabelWidget","form_item","form_item_label_div","form_item_label","form_item_input_div","widget","i","key","c_value","filter","minimum_rate","maximum_rate","data","len","serial","row","is_existed","item","render","rows","order_number","index","remove_id","result","result_data","editId","noRefreshUI","callBack","changed_data","current_edit_item_id","navigation_div","context_btn","grid_selected_length","pId","id","postData","grid_selected_id_array","ids","value","grid_selected_row","container","beforeViewLoadedFun","afterViewLoadedFun","template"],"mappings":"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"}