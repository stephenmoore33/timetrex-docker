{"version":3,"file":"LogViewController-BdYBU2Io.bundle.js","sources":["../../views/core/log/LogViewController.js"],"sourcesContent":["export class LogViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#log_view_container',\n\t\t\ttables: {\n\t\t\t\t'product': ['product', 'product_price'],\n\t\t\t\t'user_contact': ['user_contact'],\n\t\t\t\t'users': ['users', 'user_preference', 'user_wage', 'authentication'],\n\t\t\t\t'user_wage': ['user_wage'],\n\t\t\t\t'user_title': ['user_title'],\n\t\t\t\t'user_preference': ['user_preference'],\n\t\t\t\t'user_preference_notification': ['user_preference_notification'],\n\t\t\t\t'ui_kit': ['ui_kit'],\n\t\t\t\t'ui_kit_child': ['ui_kit_child'],\n\t\t\t\t'bank_account': ['bank_account'],\n\t\t\t\t'user_default': ['user_default'],\n\t\t\t\t'user_group': ['user_group'],\n\t\t\t\t'company': ['company'],\n\t\t\t\t'pay_period_schedule': ['pay_period_schedule', 'pay_period', 'pay_period_schedule_user'],\n\t\t\t\t'pay_period': ['pay_period'],\n\t\t\t\t'branch': ['branch'],\n\t\t\t\t'department': ['department'],\n\t\t\t\t'hierarchy_control': ['hierarchy_control', 'hierarchy_object_type', 'hierarchy_user', 'hierarchy_level'],\n\t\t\t\t'wage_group': ['wage_group'],\n\t\t\t\t'ethnic_group': ['ethnic_group'],\n\t\t\t\t'currency': ['currency'],\n\t\t\t\t'currency_rate': ['currency_rate'],\n\t\t\t\t'permission_control': ['permission_control', 'permission_user'],\n\t\t\t\t'custom_field': ['custom_field'],\n\t\t\t\t'station': ['station', 'station_user_group', 'station_branch', 'station_department', 'station_include_user', 'station_exclude_user'],\n\t\t\t\t'pay_stub_amendment': ['pay_stub_amendment'],\n\t\t\t\t'recurring_ps_amendment': ['recurring_ps_amendment', 'recurring_ps_amendment_user'],\n\t\t\t\t'pay_stub_entry_account': ['pay_stub_entry_account'],\n\t\t\t\t'company_deduction': ['company_deduction', 'user_deduction', 'company_deduction_pay_stub_entry_account'],\n\t\t\t\t'user_expense': ['user_expense'],\n\t\t\t\t'round_interval_policy': ['round_interval_policy'],\n\t\t\t\t'meal_policy': ['meal_policy'],\n\t\t\t\t'break_policy': ['break_policy'],\n\t\t\t\t'over_time_policy': ['over_time_policy'],\n\t\t\t\t'absence_policy': ['absence_policy'],\n\t\t\t\t'recurring_holiday': ['recurring_holiday'],\n\t\t\t\t'holiday_policy': ['holiday_policy', 'holiday_policy_recurring_holiday'],\n\t\t\t\t'holidays': ['holidays'],\n\t\t\t\t'premium_policy': ['premium_policy'],\n\t\t\t\t'policy_group': ['policy_group', 'policy_group_user'],\n\t\t\t\t'document': ['document', 'document_revision'],\n\t\t\t\t'document_group': ['document_group'],\n\t\t\t\t'document_revision': ['document_revision'],\n\t\t\t\t'schedule_policy': ['schedule_policy'],\n\t\t\t\t'accrual_policy': ['accrual_policy', 'accrual_policy_milestone', 'accrual_policy_user_modifier'],\n\t\t\t\t'client': ['client', 'client_contact', 'client_payment'],\n\t\t\t\t'report_custom_column': ['report_custom_column'],\n\t\t\t\t'client_contact': ['client_contact'],\n\t\t\t\t'client_payment': ['client_payment'],\n\t\t\t\t'invoice_transaction': ['invoice_transaction'],\n\t\t\t\t'invoice': ['invoice'],\n\t\t\t\t'job': ['job', 'job_exclude_job_item', 'job_exclude_user', 'job_include_job_item', 'job_include_user', 'job_job_item_group', 'job_user_branch', 'job_user_group', 'job_user_department'],\n\t\t\t\t'client_group': ['client_group'],\n\t\t\t\t'product_group': ['product_group'],\n\t\t\t\t'job_item': ['job_item'],\n\t\t\t\t'job_group': ['job_group'],\n\t\t\t\t'job_item_group': ['job_item_group'],\n\t\t\t\t'report_schedule': ['report_schedule'],\n\t\t\t\t'accrual_policy_account': ['accrual_policy_account'],\n\t\t\t\t'accrual': ['accrual'],\n\t\t\t\t'accrual_balance': ['accrual_balance'],\n\t\t\t\t'schedule': ['schedule'],\n\t\t\t\t'recurring_schedule_control': ['recurring_schedule_control'], //, 'recurring_schedule_user'\n\t\t\t\t'recurring_schedule_template_control': ['recurring_schedule_template_control', 'recurring_schedule_template'],\n\t\t\t\t'punch': ['punch', 'punch_control'],\n\t\t\t\t'kpi': ['kpi'],\n\t\t\t\t'kpi_group': ['kpi_group'],\n\t\t\t\t'qualification': ['qualification'],\n\t\t\t\t'qualification_group': ['qualification_group'],\n\t\t\t\t'user_skill': ['user_skill'],\n\t\t\t\t'user_education': ['user_education'],\n\t\t\t\t'user_membership': ['user_membership'],\n\t\t\t\t'user_license': ['user_license'],\n\t\t\t\t'user_language': ['user_language'],\n\t\t\t\t'job_vacancy': ['job_vacancy'],\n\t\t\t\t'job_application': ['job_application'],\n\t\t\t\t'job_applicant': ['job_applicant'],\n\t\t\t\t'invoice_district': ['invoice_district'],\n\t\t\t\t'job_applicant_employment': ['job_applicant_employment'],\n\t\t\t\t'job_applicant_reference': ['job_applicant_reference'],\n\t\t\t\t'job_applicant_location': ['job_applicant_location'],\n\t\t\t\t'job_applicant_skill': ['job_applicant_skill'],\n\t\t\t\t'job_applicant_education': ['job_applicant_education'],\n\t\t\t\t'job_applicant_license': ['job_applicant_license'],\n\t\t\t\t'job_applicant_membership': ['job_applicant_membership'],\n\t\t\t\t'job_applicant_language': ['job_applicant_language'],\n\t\t\t\t'tax_policy': ['tax_policy'],\n\t\t\t\t'area_policy': ['area_policy'],\n\t\t\t\t'shipping_policy': ['shipping_policy'],\n\t\t\t\t'payment_gateway': ['payment_gateway'],\n\t\t\t\t'request': ['request'],\n\t\t\t\t'exception_policy_control': ['exception_policy_control', 'exception_policy'],\n\t\t\t\t'user_review_control': ['user_review_control', 'user_review'],\n\t\t\t\t'roe': ['roe'],\n\t\t\t\t'expense_policy': ['expense_policy'],\n\t\t\t\t'user_report_data': ['user_report_data'],\n\t\t\t\t'regular_time_policy': ['regular_time_policy'],\n\t\t\t\t'pay_code': ['pay_code'],\n\t\t\t\t'pay_formula_policy': ['pay_formula_policy'],\n\t\t\t\t'contributing_pay_code_policy': ['contributing_pay_code_policy'],\n\t\t\t\t'contributing_shift_policy': ['contributing_shift_policy'],\n\t\t\t\t'accrual_policy_user_modifier': ['accrual_policy_user_modifier'],\n\t\t\t\t'job_item_amendment': ['job_item_amendment'],\n\t\t\t\t'user_date_total': ['user_date_total'],\n\t\t\t\t'pay_stub': ['pay_stub', 'pay_stub_entry'],\n\t\t\t\t'legal_entity': ['legal_entity'],\n\t\t\t\t'payroll_remittance_agency': ['payroll_remittance_agency'],\n\t\t\t\t'payroll_remittance_agency_event': ['payroll_remittance_agency_event'],\n\t\t\t\t'remittance_source_account': ['remittance_source_account'],\n\t\t\t\t'remittance_destination_account': ['remittance_destination_account'],\n\t\t\t\t'geo_fence': ['geo_fence']\n\t\t\t},\n\t\t\tlog_detail_grid: null,\n\t\t\tlog_detail_script_name: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'LogEditView.html';\n\t\tthis.context_menu_name = $.i18n._( 'Audit' );\n\t\tthis.navigation_label = $.i18n._( 'Audit' );\n\t\tthis.viewId = 'Log';\n\t\tthis.script_name = 'LogView';\n\t\tthis.log_detail_script_name = 'LogDetailView';\n\t\tthis.api = TTAPI.APILog;\n\t\tthis.noticeDiv = $( '.audit-info' );\n\n\t\tthis.render();\n\n\t\tif ( this.sub_view_mode ) {\n\t\t\tthis.buildContextMenu( true );\n\t\t} else {\n\t\t\tthis.buildContextMenu();\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\n\t\tvar tab_model = {\n\t\t\t'tab_audit_details': {\n\t\t\t\t'label': $.i18n._( 'Audit Details' ),\n\t\t\t\t'html_template': this.getAuditLogTabHtml()\n\t\t\t},\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APILog,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_log',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\tvar tab_audit_details = this.edit_view_tab.find( '#tab_audit_details' );\n\t\tvar tab_audit_details_column1 = tab_audit_details.find( '.first-row' );\n\t\t// tab_audit_details column1\n\n\t\t// Date\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( {\n\t\t\tfield: 'date'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Date' ), form_item_input, tab_audit_details_column1, '' );\n\n\t\t// Action\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( {\n\t\t\tfield: 'action'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Action' ), form_item_input, tab_audit_details_column1 );\n\n\t\t// Employee\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\n\t\tform_item_input.TText( {\n\t\t\tfield: 'user_name'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee' ), form_item_input, tab_audit_details_column1 );\n\n\t\t// Description\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( {\n\t\t\tfield: 'description'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Description' ), form_item_input, tab_audit_details_column1, '' );\n\n\t\t// set the log details information.\n\t\tthis.initLogDetailsView();\n\t}\n\n\tsearch( set_default_menu, page_action, page_number, callBack ) {\n\n\t\tif ( !Global.isSet( set_default_menu ) ) {\n\t\t\tset_default_menu = true;\n\t\t}\n\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_sort = {};\n\t\tfilter.filter_columns = this.getFilterColumnsFromDisplayColumns();\n\t\tfilter.filter_items_per_page = 0; // Default to 0 to load user preference defined\n\n\t\tif ( this.pager_data ) {\n\n\t\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\t\tif ( page_action === 'next' ) {\n\t\t\t\t\tfilter.filter_page = this.pager_data.next_page;\n\t\t\t\t} else {\n\t\t\t\t\tfilter.filter_page = 1;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tswitch ( page_action ) {\n\t\t\t\t\tcase 'next':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.next_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'last':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.previous_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'start':\n\t\t\t\t\t\tfilter.filter_page = 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.last_page_number;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'go_to':\n\t\t\t\t\t\tfilter.filter_page = page_number;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.current_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\t\t\tfilter.filter_page = 1;\n\t\t}\n\n\t\tif ( this.select_layout && this.select_layout.data ) {\n\t\t\tif ( this.sub_view_mode && this.parent_key ) {\n\t\t\t\tthis.select_layout.data.filter_data[this.parent_key] = this.parent_value;\n\t\t\t}\n\n\t\t\t//If sub view controller set custom filters, get it\n\t\t\tif ( Global.isSet( this.getSubViewFilter ) ) {\n\t\t\t\tthis.select_layout.data.filter_data = this.getSubViewFilter( this.select_layout.data.filter_data );\n\t\t\t}\n\n\t\t\t//select_layout will not be null, it's set in setSelectLayout function\n\t\t\tfilter.filter_data = Global.convertLayoutFilterToAPIFilter( this.select_layout );\n\t\t\tfilter.filter_sort = this.select_layout.data.filter_sort;\n\t\t}\n\n\t\tif ( TTUUID.isUUID( this.refresh_id ) ) {\n\t\t\tfilter.filter_data = {};\n\t\t\tfilter.filter_data.id = [this.refresh_id];\n\n\t\t\tthis.last_select_ids = filter.filter_data.id;\n\t\t} else {\n\t\t\tthis.last_select_ids = this.getGridSelectIdArray();\n\t\t}\n\n\t\tthis.api['get' + this.api.key_name]( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tvar len;\n\n\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\t$this.showNoResultCover();\n\t\t\t\t} else {\n\t\t\t\t\t$this.removeNoResultCover();\n\t\t\t\t\tif ( Global.isSet( $this.__createRowId ) ) {\n\t\t\t\t\t\tresult_data = $this.__createRowId( result_data );\n\t\t\t\t\t}\n\n\t\t\t\t\tresult_data = Global.formatGridData( result_data, $this.api.key_name );\n\n\t\t\t\t\tlen = result_data.length;\n\t\t\t\t}\n\t\t\t\t$this.setAuditInfo();\n\t\t\t\tif ( TTUUID.isUUID( $this.refresh_id ) ) {\n\t\t\t\t\t$this.refresh_id = null;\n\t\t\t\t\tvar grid_source_data = $this.grid.grid.getGridParam( 'data' );\n\t\t\t\t\tlen = grid_source_data.length;\n\n\t\t\t\t\tif ( $.type( grid_source_data ) !== 'array' ) {\n\t\t\t\t\t\tgrid_source_data = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tvar found = false;\n\t\t\t\t\tvar new_record = result_data[0];\n\n\t\t\t\t\t//Error: Uncaught TypeError: Cannot read property 'id' of undefined in /interface/html5/views/BaseViewController.js?v=7.4.3-20140924-084605 line 4851\n\t\t\t\t\tif ( new_record ) {\n\t\t\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\t\t\tvar record = grid_source_data[i];\n\n\t\t\t\t\t\t\t//Fixed === issue. The id set by jQGrid is string type.\n\t\t\t\t\t\t\t// if ( !isNaN( parseInt( record.id ) ) ) {\n\t\t\t\t\t\t\t// \trecord.id = parseInt( record.id );\n\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\tif ( record.id == new_record.id ) {\n\t\t\t\t\t\t\t\t$this.grid.grid.setRowData( new_record.id, new_record );\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( !found ) {\n\t\t\t\t\t\t\tgrid_source_data.push( new_record );\n\t\t\t\t\t\t\t$this.grid.setData( grid_source_data );\n\n\t\t\t\t\t\t\t// if ( $this.sub_view_mode && Global.isSet( $this.resizeSubGrid ) ) {\n\t\t\t\t\t\t\t// \tlen = Global.isSet( len ) ? len : 0;\n\t\t\t\t\t\t\t// \t$this.resizeSubGrid( len + 1 );\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\t//Set Page data to widget, next show display info when setDefault Menu\n\t\t\t\t\t$this.pager_data = result.getPagerData();\n\n\t\t\t\t\t//CLick to show more mode no need this step\n\t\t\t\t\tif ( LocalCacheData.paging_type !== 0 ) {\n\t\t\t\t\t\t$this.paging_widget.setPagerData( $this.pager_data );\n\t\t\t\t\t\t$this.paging_widget_2.setPagerData( $this.pager_data );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( LocalCacheData.paging_type === 0 && page_action === 'next' ) {\n\t\t\t\t\t\tvar current_data = $this.grid.getGridParam( 'data' );\n\t\t\t\t\t\tresult_data = current_data.concat( result_data );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Process result_data if necessary, this always needs override.\n\t\t\t\t\tresult_data = $this.processResultData( result_data );\n\n\t\t\t\t\tif ( $this.grid ) {\n\t\t\t\t\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\t\t\t\t\tif ( !$this.pager_data || $this.pager_data.is_last_page ) {\n\t\t\t\t\t\t\t\t$this.paging_widget.css( 'display', 'none' );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$this.paging_widget.css( 'display', 'block' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$this.grid.setData( result_data );\n\t\t\t\t\t\t$this.setGridColumnsWidth();\n\t\t\t\t\t\tif ( $this.sub_view_mode && Global.isSet( $this.baseViewSubTabGridResize ) ) {\n\t\t\t\t\t\t\t$this.baseViewSubTabGridResize( 'tab_audit' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$this.reSelectLastSelectItems();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$this.setGridCellBackGround(); //Set cell background for some views\n\n\t\t\t\tProgressBar.closeOverlay(); //Add this in initData\n\n\t\t\t\tif ( set_default_menu ) {\n\t\t\t\t\t$this.setDefaultMenu( true );\n\t\t\t\t}\n\n\t\t\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\t\t\tif ( !$this.pager_data || $this.pager_data.is_last_page ) {\n\t\t\t\t\t\t$this.paging_widget.css( 'display', 'none' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.paging_widget.css( 'display', 'block' );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( callBack ) {\n\t\t\t\t\tcallBack( result );\n\t\t\t\t}\n\n\t\t\t\t// when call this from save and new result, we don't call auto open, because this will call onAddClick twice\n\t\t\t\tif ( set_default_menu ) {\n\t\t\t\t\t$this.autoOpenEditViewIfNecessary();\n\t\t\t\t}\n\n\t\t\t\t$this.searchDone();\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetGridSetup() {\n\t\tvar $this = this;\n\t\treturn {\n\t\t\tcontainer_selector: this.sub_view_mode ? '.edit-view-tab-bar' : 'body',\n\t\t\tsub_grid_mode: this.sub_view_mode,\n\t\t\tonResizeGrid: true,\n\t\t\tmultiselect: false,\n\t\t\tonSelectRow: function() {\n\t\t\t\t$this.onGridSelectRow();\n\t\t\t},\n\t\t\tonCellSelect: function() {\n\t\t\t\t$this.onGridSelectRow();\n\t\t\t},\n\t\t\tonSelectAll: function() {\n\t\t\t\t$this.onGridSelectAll();\n\t\t\t},\n\t\t\tondblClickRow: function( e ) {\n\t\t\t\t$this.onGridDblClickRow( e );\n\t\t\t},\n\t\t\tonRightClickRow: function( rowId ) {\n\t\t\t\tvar id_array = $this.getGridSelectIdArray();\n\t\t\t\tif ( id_array.indexOf( rowId ) < 0 ) {\n\t\t\t\t\t$this.grid.grid.resetSelection();\n\t\t\t\t\t$this.grid.grid.setSelection( rowId );\n\t\t\t\t\t$this.onGridSelectRow();\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetGridSize: function() {\n\t\t\t\t$this.baseViewSubTabGridResize( 'tab_audit' ); //Works for Edit Employee -> Audit tab\n\t\t\t}\n\t\t};\n\t}\n\n\t_setGridSizeGridHeight( header_size ) {\n\t\t// if ( !this.sub_view_mode ) {\n\t\t// \tthis.grid.setGridHeight( ($( this.el ).height() - (this.search_panel && this.search_panel.is( ':visible' ) ? this.search_panel.height() : 0) - 68 - header_size) );\n\t\t// } else if ( !Global.isSet( this.resizeSubGrid ) ) {\n\t\tif ( this.pager_data && this.pager_data.last_page_number > 1 ) {\n\t\t\tthis.grid.setGridHeight( $( this.el ).parent().parent().parent().height() - 101 - header_size );\n\t\t} else {\n\t\t\tthis.grid.setGridHeight( $( this.el ).parent().parent().parent().height() - 78 - header_size );\n\t\t}\n\n\t\t// }\n\t}\n\n\tsetAuditInfo() {\n\t\tvar updated_info = ( this.parent_edit_record['updated_date'] || $.i18n._( 'N/A' ) ) + ' ' + $.i18n._( 'by' ) + ' ' + ( this.parent_edit_record['updated_by'] || $.i18n._( 'N/A' ) ) + ' ';\n\t\tvar created_info = ( this.parent_edit_record['created_date'] || $.i18n._( 'N/A' ) ) + ' ' + $.i18n._( 'by' ) + ' ' + ( this.parent_edit_record['created_by'] || $.i18n._( 'N/A' ) ) + ' ';\n\t\tthis.noticeDiv.find( '.left > .info' ).text( updated_info );\n\t\tthis.noticeDiv.find( '.right > .info' ).text( created_info );\n\t}\n\n\tautoOpenEditViewIfNecessary() {\n\t\t//Auto open edit view. Should set in IndexController\n\t\tswitch ( LocalCacheData.current_doing_context_action ) {\n\t\t\tcase 'view':\n\t\t\t\tif ( LocalCacheData.edit_id_for_next_open_view ) {\n\t\t\t\t\tthis.onViewClick( LocalCacheData.edit_id_for_next_open_view );\n\t\t\t\t\tLocalCacheData.edit_id_for_next_open_view = null;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.autoOpenEditOnlyViewIfNecessary();\n\t}\n\n\tinitLogDetailsView( column_start_from ) {\n\n\t\tvar grid = this.edit_view.find( '#grid' );\n\n\t\tif ( grid ) {\n\t\t\tgrid.attr( 'id', this.log_detail_script_name + '_grid' );  //Grid's id is ScriptName + _grid\n\t\t}\n\n\t\t//grid = this.edit_view.find( '#' + this.log_detail_script_name + '_grid' );\n\n\t\tvar column_info_array = [];\n\t\tvar display_columns = [\n\t\t\t{ label: $.i18n._( 'Field' ), value: 'display_field' },\n\t\t\t{ label: $.i18n._( 'Before' ), value: 'old_value' },\n\t\t\t{ label: $.i18n._( 'After' ), value: 'new_value' }\n\t\t];\n\n\t\t//Set Data Grid on List view\n\t\tvar len = display_columns.length;\n\n\t\tvar start_from = 0;\n\n\t\tif ( Global.isSet( column_start_from ) && column_start_from > 0 ) {\n\t\t\tstart_from = column_start_from;\n\t\t}\n\n\t\tfor ( var i = start_from; i < len; i++ ) {\n\t\t\tvar view_column_data = display_columns[i];\n\n\t\t\tvar column_info = {\n\t\t\t\tname: view_column_data.value,\n\t\t\t\tindex: view_column_data.value,\n\t\t\t\tlabel: view_column_data.label,\n\t\t\t\twidth: 100,\n\t\t\t\tsortable: false,\n\t\t\t\ttitle: false\n\t\t\t};\n\t\t\tcolumn_info_array.push( column_info );\n\t\t}\n\n\t\tvar grid_setup = {\n\t\t\tcontainer_selector: this.sub_view_mode ? '.edit-view-tab-bar' : 'body',\n\t\t\tsub_grid_mode: this.sub_view_mode,\n\t\t\tonResizeGrid: true,\n\t\t\tmultiselect: false,\n\t\t};\n\n\t\tthis.log_detail_grid = new TTGrid( this.log_detail_script_name + '_grid', grid_setup, column_info_array );\n\t}\n\n\tinitEditViewData() {\n\t\tsuper.initEditViewData();\n\t\tif ( Global.getProductEdition() >= 15 ) {\n\t\t\tthis.edit_view_tab.find( '#tab_audit_details' ).find( '.detail-grid-row' ).css( 'display', 'block' );\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'none' );\n\t\t} else {\n\t\t\tthis.edit_view_tab.find( '#tab_audit_details' ).find( '.detail-grid-row' ).css( 'display', 'none' );\n\t\t\tthis.edit_view.find( '.permission-defined-div' ).css( 'display', 'block' );\n\t\t\tthis.edit_view.find( '.permission-message' ).html( Global.getUpgradeMessage() );\n\t\t}\n\n\t\tthis.log_detail_grid.setGridColumnsWidth();\n\t}\n\n\tonGridDblClickRow() {\n\t\tthis.onViewDetailClick();\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'user_name':\n\t\t\t\t\t\twidget.setValue( this.current_edit_record['first_name'] + ' ' + this.current_edit_record['last_name'] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'details':\n\t\t\t\t\t\tthis.setLogDetailsViewData( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tsetLogDetailsViewData( log_detail_data ) {\n\n\t\tvar $this = this;\n\n\t\tif ( !Global.isArray( log_detail_data ) ) {\n\t\t\t$this.showDetailNoResultCover();\n\t\t} else {\n\t\t\t$this.removeNoResultCover();\n\t\t}\n\n\t\tlog_detail_data = Global.formatGridData( log_detail_data );\n\n\t\t$this.log_detail_grid.setData( log_detail_data );\n\n\t\t$this.setLogDetailGridSize();\n\t}\n\n\tsetLogDetailGridSize() {\n\n\t\tif ( !this.log_detail_grid || !$( this.log_detail_grid.grid ).is( ':visible' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar tab_audit_details = this.edit_view.find( '#tab_audit_details_content_div' );\n\t\tvar first_row = this.edit_view.find( '.first-row' );\n\t\tthis.log_detail_grid.grid.setGridWidth( tab_audit_details.width() );\n\t\tthis.log_detail_grid.grid.setGridHeight( tab_audit_details.height() - first_row.height() );\n\t}\n\n\tshowDetailNoResultCover() {\n\t\tthis.removeNoResultCover();\n\t\tthis.no_result_box = Global.loadWidgetByName( WidgetNamesDic.NO_RESULT_BOX );\n\t\tthis.no_result_box.NoResultBox( { related_view_controller: this, is_new: false } );\n\n\t\tvar grid_div = this.edit_view.find( '.grid-div' );\n\n\t\tgrid_div.append( this.no_result_box );\n\t}\n\n\tshowNoResultCover() {\n\t\tsuper.showNoResultCover( false );\n\t}\n\n\tonEditClick( editId, noRefreshUI ) {\n\n\t\tthis.onViewDetailClick( editId, noRefreshUI );\n\t}\n\n\tonViewDetailClick( editId ) {\n\n\t\tvar $this = this;\n\t\tthis.setCurrentEditViewState( 'view_detail' );\n\t\t$this.openEditView();\n\n\t\tvar filter = {};\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\tvar selectedId;\n\t\tif ( Global.isSet( editId ) ) {\n\t\t\tselectedId = editId;\n\t\t} else {\n\n\t\t\tif ( this.is_viewing ) {\n\t\t\t\tselectedId = this.current_edit_record.id;\n\t\t\t} else if ( grid_selected_length > 0 ) {\n\t\t\t\tselectedId = grid_selected_id_array[0];\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = [selectedId];\n\t\t//If sub view controller set custom filters, get it\n\t\tif ( Global.isSet( this.getSubViewFilter ) ) {\n\n\t\t\tfilter.filter_data = this.getSubViewFilter( filter.filter_data );\n\n\t\t}\n\t\tfilter.filter_columns = this.getFilterColumnsForViewDetails();\n\n\t\tthis.api['get' + this.api.key_name]( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\tif ( !result_data ) {\n\t\t\t\t\tresult_data = [];\n\t\t\t\t}\n\n\t\t\t\tresult_data = result_data[0];\n\n\t\t\t\tif ( $this.sub_view_mode && $this.parent_key ) {\n\t\t\t\t\tresult_data[$this.parent_key] = $this.parent_value;\n\t\t\t\t}\n\n\t\t\t\t$this.current_edit_record = result_data;\n\n\t\t\t\t$this.initEditView();\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\t\tvar column_filter = {};\n\t\tcolumn_filter.id = true;\n\t\tcolumn_filter.table_name = true;\n\n\t\t// Error: Unable to get property 'getGridParam' of undefined or null reference\n\t\tvar display_columns = [];\n\t\tif ( this.grid ) {\n\t\t\tdisplay_columns = this.grid.getGridParam( 'colModel' );\n\t\t}\n\n\t\tif ( display_columns ) {\n\t\t\tvar len = display_columns.length;\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar column_info = display_columns[i];\n\t\t\t\tcolumn_filter[column_info.name] = true;\n\t\t\t}\n\t\t}\n\n\t\treturn column_filter;\n\t}\n\n\tgetFilterColumnsForViewDetails() {\n\t\tvar display_columns = this.grid.getGridParam( 'colModel' );\n\n\t\tvar column_filter = {};\n\t\tcolumn_filter.id = true;\n\t\tcolumn_filter.table_name = true;\n\t\tcolumn_filter.details = true;\n\n\t\tvar len = display_columns.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar column_info = display_columns[i];\n\t\t\tcolumn_filter[column_info.name] = true;\n\t\t}\n\n\t\treturn column_filter;\n\t}\n\n\tsetCustomDefaultMenuIcon( id, context_btn, grid_selected_length ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'view_detail':\n\t\t\t\tif ( grid_selected_length === 1 ) {\n\t\t\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t\t\t} else {\n\t\t\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'view_detail':\n\t\t\t\tthis.onViewDetailClick();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetCustomEditMenuIcon( id, context_btn ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'view_detail':\n\t\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: ['default'],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'View Details' ),\n\t\t\t\t\tid: 'view_detail',\n\t\t\t\t\tgroup: 'editor',\n\t\t\t\t\t},\n\t\t\t\t'cancel'\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tgetSubViewFilter( filter ) {\n\t\tif ( Global.isSet( this.table_name_key ) ) {\n\t\t\tfilter['table_name'] = this.tables[this.table_name_key];\n\t\t}\n\n\t\treturn filter;\n\t}\n\n\tsearchDone() {\n\t\t$( 'window' ).trigger( 'resize' );\n\t\tTTPromise.resolve( 'initSubAudit', 'init' );\n\t\tsuper.searchDone();\n\n\t}\n\n\tgetAuditLogTabHtml() {\n\t\treturn `\n\t\t<div id=\"tab_audit_details\" class=\"edit-view-tab-outside\">\n\t\t\t<div class=\"edit-view-tab\" id=\"tab_audit_details_content_div\">\n\t\t\t\t<div class=\"first-row full-width-column\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"detail-grid-row\">\n\t\t\t\t\t<div class=\"grid-div\">\n\t\t\t\t\t\t<table id=\"grid\"></table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"save-and-continue-div permission-defined-div\" style=\"top: 240px\">\n\t\t\t\t\t<span class=\"message permission-message\"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>`;\n\t}\n\n}\n\nLogViewController.loadSubView = function( container, beforeViewLoadedFun, afterViewLoadedFun ) {\n\n\tGlobal.loadViewSource( 'Log', 'LogView.html', function( result ) {\n\n\t\tvar args = {\n\t\t\tupdated: $.i18n._( 'Updated' ),\n\t\t\tcreated: $.i18n._( 'Created' )\n\t\t};\n\n\t\tvar template = _.template( result );\n\n\t\tif ( Global.isSet( beforeViewLoadedFun ) ) {\n\t\t\tbeforeViewLoadedFun();\n\t\t}\n\t\tif ( Global.isSet( container ) ) {\n\t\t\tcontainer.html( template( args ) );\n\t\t\tif ( Global.isSet( afterViewLoadedFun ) ) {\n\t\t\t\tafterViewLoadedFun( sub_log_view_controller );\n\t\t\t}\n\t\t}\n\t} );\n};\n\nLogViewController.html_template = `\n\t<div class=\"view sub-view logView\" id=\"log_view_container\">\n\t<div class=\"audit-info\">\n\t\t<div class=\"left\">\n\t\t\t<div class=\"label-div\"><span class=\"label\"><%= updated %>:</span></div>\n\t\t\t<div class=\"info\"></div>\n\t\t</div>\n\t\t<div class=\"right\">\n\t\t\t<div class=\"label-div\"><span class=\"label\"><%= created %>:</span></div>\n\t\t\t<div class=\"info\"></div>\n\t\t</div>\n\t</div>\n\t\t<div class=\"clear-both-div\"></div>\n\t\t<div class=\"grid-div\">\n\t\t\t<div class=\"grid-top-border\"></div>\n\t\t\t<div class=\"sub-grid-view-div\">\n\t\t\t\t<table id=\"grid\"></table>\n\t\t\t</div>\n\t\t\t<div class=\"bottom-div\">\n\t\t\t\t<div class=\"grid-bottom-border\"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`;"],"names":["LogViewController","options","_","$","tab_model","tab_audit_details","tab_audit_details_column1","form_item_input","set_default_menu","page_action","page_number","callBack","$this","filter","result","result_data","len","grid_source_data","found","new_record","i","record","current_data","e","rowId","id_array","header_size","updated_info","created_info","column_start_from","grid","column_info_array","display_columns","start_from","view_column_data","column_info","grid_setup","key","widget","log_detail_data","first_row","grid_div","editId","noRefreshUI","grid_selected_id_array","grid_selected_length","selectedId","column_filter","id","context_btn","context_menu_model","container","beforeViewLoadedFun","afterViewLoadedFun","args","template"],"mappings":"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"}