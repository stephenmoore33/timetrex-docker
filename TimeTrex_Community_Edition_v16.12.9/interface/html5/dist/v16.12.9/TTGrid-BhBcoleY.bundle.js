import{j as jQuery}from"./vendor-tTApdY0Y.bundle.js";/**
 * @license jqGrid 4.15.5-pre - free jqGrid: https://github.com/free-jqgrid/jqGrid
 * Copyright (c) 2008-2014, Tony Tomov, tony@trirand.com
 * Copyright (c) 2014-2018, Oleg Kiriljuk, oleg.kiriljuk@ok-soft-gmbh.com
 * Dual licensed under the MIT and GPL licenses
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 * Date: 2018-08-12
 */(function(e,t){t(jQuery,e.document)})(typeof window<"u"?window:void 0,function($,document){var englishLanguageDefaults={name:"English (United States)",nameEnglish:"English (United States)",isRTL:!1,defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}",pgfirst:"First Page",pglast:"Last Page",pgnext:"Next Page",pgprev:"Previous Page",pgrecs:"Records per Page",showhide:"Toggle Expand Collapse Grid",savetext:"Saving..."},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:[{oper:"eq",text:"equal"},{oper:"ne",text:"not equal"},{oper:"lt",text:"less"},{oper:"le",text:"less or equal"},{oper:"gt",text:"greater"},{oper:"ge",text:"greater or equal"},{oper:"bw",text:"begins with"},{oper:"bn",text:"does not begin with"},{oper:"in",text:"is in"},{oper:"ni",text:"is not in"},{oper:"ew",text:"ends with"},{oper:"en",text:"does not end with"},{oper:"cn",text:"contains"},{oper:"nc",text:"does not contain"},{oper:"nu",text:"is null"},{oper:"nn",text:"is not null"}],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],addGroupTitle:"Add subgroup",deleteGroupTitle:"Delete group",addRuleTitle:"Add rule",deleteRuleTitle:"Delete rule",operandTitle:"Click to select search operation.",resetTitle:"Reset Search Value"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row",savetext:"",savetitle:"Save row",canceltext:"",canceltitle:"Cancel row editing"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(e){var t=["st","nd","rd","th"];return e<11||e>13?t[Math.min((e-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",masks:{ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",YearMonth:"F, Y"}}}};$.jgrid=$.jgrid||{};var jgrid=$.jgrid;jgrid.locales=jgrid.locales||{};var locales=jgrid.locales,COMPONENT_NAMES={GRID_BOX_DIV:0,GRID_OVERLAY_DIV:1,LOADING_DIV:2,DIALOG_ALERT_DIV:3,DIALOG_SEARCH_DIV:4,DIALOG_VIEW_DIV:5,DIALOG_EDIT_DIV:6,DIALOG_DELETE_DIV:7,GRID_VIEW_DIV:8,TITLE_BAR_DIV:9,UPPER_TOOLBAR_DIV:10,TOP_PAGER_DIV:11,HEADER_DIV:12,HEADER_BOX_DIV:13,HEADER_TABLE:14,HEADER_COLS_ROW:15,HEADER_COLS:16,HEADER_ROWS:47,HEADER_TH:48,HEADER_SORTABLE_DIV:49,HEADER_RESIZABLE_SPAN:50,HEADER_SELECT_ALL_ROWS_CHECKBOX:45,SEARCH_TOOLBAR:17,BODY_DIV:18,BODY_SCROLL_FULL_DIV:19,BODY_SCROLL_TOP_DIV:20,BODY_TABLE:21,GRID:21,BODY_COLS_ROW:22,BODY_COLS:23,BODY_DATA_ROWS:24,FOOTER_DIV:25,FOOTER_BOX_DIV:26,FOOTER_TABLE:27,FOOTER_DATA_ROWS:28,BOTTOM_TOOLBAR_DIV:29,FROZEN_HEADER_DIV:30,FROZEN_HEADER_TABLE:31,FROZEN_HEADER_COLS_ROW:32,FROZEN_HEADER_COLS:33,FROZEN_SEARCH_TOOLBAR:34,FROZEN_FOOTER_DIV:35,FROZEN_FOOTER_TABLE:36,FROZEN_FOOTER_DATA_ROWS:37,FROZEN_BODY_DIV:38,FROZEN_BODY_TABLE:39,FROZEN_BODY_COLS_ROW:40,FROZEN_BODY_COLS:41,FROZEN_BODY_DATA_ROWS:42,COLUMN_RESIZER_DIV:43,BOTTOM_PAGER_DIV:44,SEARCH_OPERATION_MENU_UL:46};(jgrid.defaults==null||$.isEmptyObject(locales)||locales["en-US"]===void 0)&&(locales["en-US"]===void 0&&$.extend(!0,jgrid,{locales:{"en-US":englishLanguageDefaults}}),jgrid.defaults=jgrid.defaults||{},jgrid.defaults.locale===void 0&&(jgrid.defaults.locale="en-US")),jgrid.defaults=jgrid.defaults||{};var defaults=jgrid.defaults;$.extend(!0,jgrid,{version:"4.15.5-pre",productName:"free jqGrid",defaults:{},search:{},edit:{},view:{},del:{},nav:{},col:{},errors:{},formatter:{unused:""},icons:{jQueryUI:{common:"ui-icon",pager:{first:"ui-icon-seek-first",prev:"ui-icon-seek-prev",next:"ui-icon-seek-next",last:"ui-icon-seek-end"},sort:{asc:"ui-icon-triangle-1-n",desc:"ui-icon-triangle-1-s"},gridMinimize:{visible:"ui-icon-circle-triangle-n",hidden:"ui-icon-circle-triangle-s"},nav:{edit:"ui-icon-pencil",add:"ui-icon-plus",del:"ui-icon-trash",search:"ui-icon-search",refresh:"ui-icon-refresh",view:"ui-icon-document",save:"ui-icon-disk",cancel:"ui-icon-cancel",newbutton:"ui-icon-newwin"},actions:{edit:"ui-icon-pencil",del:"ui-icon-trash",save:"ui-icon-disk",cancel:"ui-icon-cancel"},form:{close:"ui-icon-closethick",prev:"ui-icon-triangle-1-w",next:"ui-icon-triangle-1-e",save:"ui-icon-disk",undo:"ui-icon-close",del:"ui-icon-scissors",cancel:"ui-icon-cancel",resizableLtr:"ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se"},search:{search:"ui-icon-search",reset:"ui-icon-arrowreturnthick-1-w",query:"ui-icon-comment"},subgrid:{plus:"ui-icon-plus",minus:"ui-icon-minus",openLtr:"ui-icon-caret-1-sw",openRtl:"ui-icon-caret-1-se"},grouping:{plus:"ui-icon-circlesmall-plus",minus:"ui-icon-circlesmall-minus"},treeGrid:{minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off",plusLtr:"ui-icon-triangle-1-e",plusRtl:"ui-icon-triangle-1-w"}},fontAwesome:{common:"fa",pager:{common:"fa-fw",first:"fa-step-backward",prev:"fa-backward",next:"fa-forward",last:"fa-step-forward"},sort:{common:"fa-lg",asc:"fa-sort-asc",desc:"fa-sort-desc"},gridMinimize:{visible:"fa-chevron-circle-up",hidden:"fa-chevron-circle-down"},nav:{common:"fa-lg fa-fw",edit:"fa-pencil",add:"fa-plus",del:"fa-trash-o",search:"fa-search",refresh:"fa-refresh",view:"fa-file-o",save:"fa-floppy-o",cancel:"fa-ban",newbutton:"fa-external-link"},actions:{common:"fa-fw",edit:"fa-pencil",del:"fa-trash-o",save:"fa-floppy-o",cancel:"fa-ban"},form:{close:"fa-times",prev:"fa-caret-left",next:"fa-caret-right",save:"fa-floppy-o",undo:"fa-undo",del:"fa-trash-o",cancel:"fa-ban",resizableLtr:"fa-rss fa-rotate-270"},search:{search:"fa-search",reset:"fa-undo",query:"fa-comments-o"},subgrid:{common:"fa-fw",plus:"fa-plus",minus:"fa-minus",openLtr:"fa-reply fa-rotate-180",openRtl:"fa-share fa-rotate-180"},grouping:{common:"fa-fw",plus:"fa-plus-square-o",minus:"fa-minus-square-o"},treeGrid:{common:"fa-fw",minus:"fa-lg fa-sort-desc",leaf:"fa-dot-circle-o",plusLtr:"fa-lg fa-caret-right",plusRtl:"fa-lg fa-caret-left"},checkbox:{checkedClasses:"fa-check-square-o",checked:"fa-check-square-o fa-lg",unchecked:"fa-square-o fa-lg"}},fontAwesome5:{pager:{common:"fa-fw",first:"fa-step-backward",prev:"fa-backward",next:"fa-forward",last:"fa-step-forward"},sort:{common:"fa-lg",asc:"fa-sort-up",desc:"fa-sort-down"},gridMinimize:{visible:"fa-chevron-circle-up",hidden:"fa-chevron-circle-down"},nav:{common:"fa-lg fa-fw",edit:"fa-pencil-alt",add:"fa-plus",del:"fa-trash-alt",search:"fa-search",refresh:"fa-sync",view:"fa-file",save:"fa-save",cancel:"fa-ban",newbutton:"fa-external-link-alt"},actions:{common:"fa-fw",edit:"fa-pencil-alt",del:"fa-trash-alt",save:"fa-save",cancel:"fa-ban"},form:{close:"fa-times",prev:"fa-caret-left",next:"fa-caret-right",save:"fa-save",undo:"fa-undo",del:"fa-trash-alt",cancel:"fa-ban",resizableLtr:"fa-rss fa-lg fa-rotate-270"},search:{search:"fa-search",reset:"fa-undo",query:"fa-comments"},subgrid:{common:"fa-fw",plus:"fa-plus",minus:"fa-minus",openLtr:"fa-reply fa-rotate-180",openRtl:"fa-share fa-rotate-180"},grouping:{common:"fa-fw",plus:"fa-plus-square",minus:"fa-minus-square"},treeGrid:{common:"fa-fw",minus:"fa-lg fa-sort-down",leaf:"fa-dot-circle",plusLtr:"fa-lg fa-caret-right",plusRtl:"fa-lg fa-caret-left"},checkbox:{ignoreParents:!0,checkedClasses:"fa-check-square",checked:"far fa-check-square fa-lg",unchecked:"far fa-square fa-lg"}},fontAwesomeBrands:{baseIconSet:"fontAwesome5",common:"fab"},fontAwesomeLight:{baseIconSet:"fontAwesome5",common:"fal"},fontAwesomeRegular:{baseIconSet:"fontAwesome5",common:"far"},fontAwesomeSolid:{baseIconSet:"fontAwesome5",common:"fas"},fontAwesomeSVG:{baseIconSet:"fontAwesome5",common:"fas"},glyph:{common:"glyphicon",pager:{common:"",first:"glyphicon-step-backward",prev:"glyphicon-backward",next:"glyphicon-forward",last:"glyphicon-step-forward"},sort:{common:"",asc:"glyphicon-triangle-top",desc:"glyphicon-triangle-bottom"},gridMinimize:{visible:"glyphicon-circle-arrow-up",hidden:"glyphicon-circle-arrow-down"},nav:{common:"",edit:"glyphicon-edit",add:"glyphicon-plus",del:"glyphicon-trash",search:"glyphicon-search",refresh:"glyphicon-refresh",view:"glyphicon-file",save:"glyphicon-save",cancel:"glyphicon-ban-circle",newbutton:"glyphicon-new-window"},actions:{common:"",edit:"glyphicon-edit",del:"glyphicon-trash",save:"glyphicon-save",cancel:"glyphicon-ban-circle"},form:{close:"glyphicon-remove-circle",prev:"glyphicon-step-backward",next:"glyphicon-step-forward",save:"glyphicon-save",undo:"glyphicon-repeat",del:"glyphicon-trash",cancel:"glyphicon-ban-circle",resizableLtr:"glyphicon-import"},search:{search:"glyphicon-search",reset:"glyphicon-repeat",query:"glyphicon-cog"},subgrid:{common:"",plus:"glyphicon-zoom-in",minus:"glyphicon-zoom-out",openLtr:"glyphicon-indent-left",openRtl:"glyphicon-indent-left"},grouping:{common:"",plus:"glyphicon-expand",minus:"glyphicon-collapse-down"},treeGrid:{common:"",minus:"glyphicon-triangle-bottom",leaf:"glyphicon-record",plusLtr:"glyphicon-triangle-right",plusRtl:"glyphicon-triangle-left"},checkbox:{checkedClasses:"glyphicon-check",checked:"glyphicon-check",unchecked:"glyphicon-unchecked"}}},guiStyles:{jQueryUI:{gBox:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all",gView:"",overlay:"ui-widget-overlay",loading:"ui-state-default ui-state-active",hDiv:"ui-state-default ui-corner-top",hTable:"",colHeaders:"ui-state-default",states:{select:"ui-state-highlight",disabled:"ui-state-disabled ui-jqgrid-disablePointerEvents",hover:"ui-state-hover",error:"ui-state-error",active:"ui-state-active",textOfClickable:"ui-state-default"},dialog:{header:"ui-widget-header ui-dialog-titlebar ui-corner-all ui-helper-clearfix",window:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all ui-front",document:"",subdocument:"",body:"",footer:"",content:"ui-widget-content",hr:"ui-widget-content",closeButton:"ui-corner-all",fmButton:"ui-state-default",dataField:"ui-widget-content ui-corner-all",viewCellLabel:"ui-widget-content",viewLabel:"",viewCellData:"ui-widget-content",viewData:"",leftCorner:"ui-corner-left",rightCorner:"ui-corner-right",defaultCorner:"ui-corner-all"},filterToolbar:{dataField:"ui-widget-content"},subgrid:{thSubgrid:"ui-state-default",rowSubTable:"ui-widget-content",row:"ui-widget-content",tdStart:"",tdWithIcon:"ui-widget-content",buttonDiv:"",button:"",tdData:"ui-widget-content",legacyTable:""},grid:"",gridRow:"ui-widget-content",rowNum:"ui-state-default",gridFooter:"",rowFooter:"ui-widget-content",gridTitle:"ui-widget-header ui-corner-top",gridError:"ui-state-error",gridErrorText:"",titleButton:"ui-corner-all",toolbarUpper:"ui-state-default",toolbarBottom:"ui-state-default",actionsDiv:"ui-widget-content",actionsButton:"ui-corner-all",pager:{pager:"ui-state-default",pagerButton:"ui-corner-all",pagerInput:"ui-widget-content",pagerSelect:"ui-widget-content"},navButton:"ui-corner-all",searchDialog:{operator:"ui-corner-all",label:"ui-corner-all",elem:"ui-corner-all",operationGroup:"",addRuleButton:"ui-corner-all",deleteRuleButton:"ui-corner-all",operationSelect:"ui-corner-all",addGroupButton:"ui-corner-all",deleteGroupButton:"ui-corner-all"},searchToolbar:{menu:"ui-menu-jqueryui ui-menu ui-widget ui-widget-content ui-corner-all",menuItem:"ui-menu-item",menuItemButton:"ui-corner-all",operButton:"ui-corner-all",clearButton:"ui-corner-all"},top:"ui-corner-top",bottom:"ui-corner-bottom",resizer:"ui-widget-header"},bootstrap:{gBox:"ui-jqgrid-bootstrap",gView:"panel-info",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-condensed table-bordered",colHeaders:"",states:{select:"success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"hidden",closeButton:"btn btn-xs btn-default",fmButton:"btn btn-default",dataField:"form-control",viewCellLabel:"",viewLabel:"control-label",viewCellData:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-default",actionsDiv:"",actionsButton:"btn btn-xs btn-default",toolbarUpper:"",toolbarBottom:"",pager:{pager:"panel-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-default",deleteRuleButton:"btn btn-xs btn-default",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-default",deleteGroupButton:"btn btn-xs btn-default"},searchToolbar:{menu:"dropdown-menu",menuItem:"",menuItemButton:"ui-corner-all",operButton:"btn btn-xs btn-default",clearButton:"btn btn-xs btn-default"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"},bootstrapPrimary:{baseGuiStyle:"bootstrap",dialog:{closeButton:"btn btn-xs close",fmButton:"btn btn-primary"},searchDialog:{addRuleButton:"btn btn-xs btn-primary",deleteRuleButton:"btn btn-xs btn-primary",addGroupButton:"btn btn-xs btn-primary",deleteGroupButton:"btn btn-xs btn-primary"}},bootstrap4:{gBox:"ui-jqgrid-bootstrap",gView:"card",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-sm table-bordered",colHeaders:"",states:{select:"table-success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",hoverTh:"table-active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"d-none",closeButton:"btn btn-xs btn-outline-primary",fmButton:"btn btn-outline-secondary",dataField:"form-control",viewCellLabel:"",viewLabel:"control-label",viewCellData:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-outline-primary",actionsDiv:"",actionsButton:"btn btn-xs btn-outline-secondary",toolbarUpper:"",toolbarBottom:"",pager:{pager:"card-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-default",deleteRuleButton:"btn btn-xs btn-default",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-default",deleteGroupButton:"btn btn-xs btn-default"},searchToolbar:{menu:"dropdown-menu",menuItem:"",menuItemButton:"dropdown-item",operButton:"btn btn-xs btn-outline-secondary",clearButton:"btn btn-xs btn-outline-secondary"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"}},htmlDecode:function(e){return e&&(e==="&nbsp;"||e==="&#160;"||e.length===1&&e.charCodeAt(0)===160)?"":e&&String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/").replace(/&#39;/g,"'").replace(/&#47;/g,"/").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},htmlEncode:function(e){return e&&String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},oldEncodePostedData:function(e){return e&&String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},oldDecodePostedData:function(e){return e&&(e==="&nbsp;"||e==="&#160;"||e.length===1&&e.charCodeAt(0)===160)?"":e&&String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},clearArray:function(e){for(;e.length>0;)e.pop()},format:function(e){var t=$.makeArray(arguments).slice(1);return e==null&&(e=""),e.replace(/\{(\d+)\}/g,function(r,i){return t[i]})},template:function(e){var t=$.makeArray(arguments).slice(1),r,i=t.length;return e==null&&(e=""),e.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((\.*?)?\))?)?\}/g,function(a,o){var s,u;if(!isNaN(parseInt(o,10)))return t[parseInt(o,10)];for(r=0;r<i;r++)if($.isArray(t[r])){for(s=t[r],u=s.length;u--;)if(o===s[u].nm)return s[u].v}})},msie:navigator.appName==="Microsoft Internet Explorer",msiever:function(){var e=-1,t;return navigator.appName==="Microsoft Internet Explorer"?(t=/(MSIE) ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent),t!=null&&t.length===3&&(e=parseFloat(t[2]||-1))):navigator.appName==="Netscape"&&(t=/rv:([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent),t!=null&&t.length===2&&(e=parseFloat(t[1]||-1))),e},fixMaxHeightOfDiv:function(e){return navigator.appName==="Microsoft Internet Explorer"?Math.min(e,1533917):/(Firefox)/.exec(navigator.userAgent)!=null?Math.min(e,17895696):e},getRelativeRect:function(e){var t=e instanceof $&&e.length>0?e[0]:e,r=$(t).outerHeight(),i=$(this).closest(".ui-jqgrid")[0],a,o;return i?(a=t.getBoundingClientRect!=null?t.getBoundingClientRect():$(t).offset(),o=i.getBoundingClientRect!=null?i.getBoundingClientRect():$(i).offset(),{top:a.top+r-o.top,left:a.left-o.left}):{top:0,left:0}},getCellIndex:function(e){var t=$(e);return t.is("tr")||(t=(!t.is("td")&&!t.is("th")?t.closest("td,th"):t)[0],t==null)?-1:jgrid.msie?$.inArray(t,t.parentNode.cells):t.cellIndex},stripHtml:function(e){return e=String(e),e&&(e=e.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""),e&&e!=="&nbsp;"&&e!=="&#160;"?e.replace(/"/g,"'"):"")},stripPref:function(e,t){var r=$.type(e);return(r==="string"||r==="number")&&(e=String(e),t=e!==""?String(t).replace(String(e),""):t),t},getRes:function(e,t){var r=t.split("."),i=r.length,a;if(e!=null){for(a=0;a<i;a++){if(!r[a])return null;if(e=e[r[a]],e===void 0)break;if(typeof e=="string")return e}return e}},parseDate:function(e,t,r,i){var a=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,o,s,u,f=0,c=0,h=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[\-+]\d{4})?)\b/g,g=/[^\-+\dA-Z]/g,p=typeof t=="string"?t.match(/^\/Date\((([\-+])?[0-9]+)(([\-+])([0-9]{2})([0-9]{2}))?\)\/$/):null,m=function(O,N){for(O=String(O),N=parseInt(N,10)||2;O.length<N;)O="0"+O;return O},b={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},v=function(O,N){return O===0?N===12&&(N=0):N!==12&&(N+=12),N},j=function(O,N){var z=["AmPm","dayNames","masks","monthNames","userLocalTime","parseRe","S","srcformat"],I=N||{},Q=(jgrid.formatter||{}).date||{},ie=((locales[(O||$.jgrid.defaults).locale]||{}).formatter||{}).date,X,re=z.length,ee={},Z;for(X=0;X<re;X++)Z=z[X],I[Z]!==void 0?ee[Z]=I[Z]:Q[Z]!==void 0?ee[Z]=Q[Z]:ie[Z]!==void 0&&(ee[Z]=ie[Z]);return ee};if(i=j(this.p,i),i.parseRe===void 0&&(i.parseRe=/[#%\\\/:_;.,\t\s\-]/),i.masks.hasOwnProperty(e)&&(e=i.masks[e]),t&&t!=null)if(!isNaN(t)&&String(e).toLowerCase()==="u")f=new Date(parseFloat(t)*1e3);else if(!isNaN(t)&&String(e).toLowerCase()==="u1000")f=new Date(parseFloat(t));else if(t.constructor===Date)f=t;else if(p!==null)f=new Date(parseInt(p[1],10)),p[3]&&(c=Number(p[5])*60+Number(p[6]),c*=p[4]==="-"?1:-1,c-=f.getTimezoneOffset(),f.setTime(Number(Number(f)+c*60*1e3)));else{for(i.srcformat==="ISO8601Long"&&t.charAt(t.length-1)==="Z"&&(c-=new Date().getTimezoneOffset()),t=String(t).replace(/\T/g,"#").replace(/\t/,"%").split(i.parseRe),e=e.replace(/\T/g,"#").replace(/\t/,"%").split(i.parseRe),s=0,u=Math.min(e.length,t.length);s<u;s++){switch(e[s]){case"M":o=$.inArray(t[s],i.monthNames),o!==-1&&o<12&&(t[s]=o+1,b.m=t[s]);break;case"F":o=$.inArray(t[s],i.monthNames,12),o!==-1&&o>11&&(t[s]=o+1-12,b.m=t[s]);break;case"n":b.m=parseInt(t[s],10);break;case"j":b.d=parseInt(t[s],10);break;case"g":b.h=parseInt(t[s],10);break;case"a":o=$.inArray(t[s],i.AmPm),o!==-1&&o<2&&t[s]===i.AmPm[o]&&(t[s]=o,b.h=v(t[s],b.h));break;case"A":o=$.inArray(t[s],i.AmPm),o!==-1&&o>1&&t[s]===i.AmPm[o]&&(t[s]=o-2,b.h=v(t[s],b.h));break}t[s]!==void 0&&t[s]!==""&&!isNaN(t[s])&&(b[e[s].toLowerCase()]=parseInt(t[s],10))}if(b.f&&(b.m=b.f),b.m===0&&b.y===0&&b.d===0)return"&#160;";b.m=parseInt(b.m,10)-1;var y=b.y;y>=70&&y<=99?b.y=1900+b.y:y>=0&&y<=69&&(b.y=2e3+b.y),f=new Date(b.y,b.m,b.d,b.h,b.i,b.s,b.u),c!==0&&f.setTime(Number(Number(f)+c*60*1e3))}else f=new Date(b.y,b.m,b.d,b.h,b.i,b.s,b.u);if(i.userLocalTime&&c===0&&(c-=new Date().getTimezoneOffset(),c!==0&&f.setTime(Number(Number(f)+c*60*1e3))),r===void 0)return f;if(i.masks.hasOwnProperty(r)?r=i.masks[r]:r||(r="Y-m-d"),r.toLowerCase()==="u1000")return f.getTime();var S=f.getHours(),C=f.getMinutes(),w=f.getDate(),x=f.getMonth()+1,G=f.getTimezoneOffset(),l=f.getSeconds(),R=f.getMilliseconds(),B=f.getDay(),T=f.getFullYear(),H=(B+6)%7+1,P=(new Date(T,x-1,w)-new Date(T,0,1))/864e5,V=H<5?Math.floor((P+H-1)/7)+1:Math.floor((P+H-1)/7)||((new Date(T-1,0,1).getDay()+6)%7<4?53:52),k={d:m(w),D:i.dayNames[B],j:w,l:i.dayNames[B+7],N:H,S:i.S(w),w:B,z:P,W:V,F:i.monthNames[x-1+12],m:m(x),M:i.monthNames[x-1],n:x,t:"?",L:"?",o:"?",Y:T,y:String(T).substring(2),a:S<12?i.AmPm[0]:i.AmPm[1],A:S<12?i.AmPm[2]:i.AmPm[3],B:"?",g:S%12||12,G:S,h:m(S%12||12),H:m(S),i:m(C),s:m(l),u:R,e:"?",I:"?",O:(G>0?"-":"+")+m(Math.floor(Math.abs(G)/60)*100+Math.abs(G)%60,4),P:"?",T:(String(f).match(h)||[""]).pop().replace(g,""),Z:"?",c:"?",r:"?",U:Math.floor(f/1e3)};return r.replace(a,function(O){return k.hasOwnProperty(O)?k[O]:O.substring(1)})},parseDateToNumber:function(e,t){var r=jgrid.parseDate.call(this,e,t);return r instanceof Date?r.getTime():0},jqID:function(e){return String(e).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},getGridComponentId:function(e){var t=this;if(t.p==null||!t.p.id)return"";var r=t.p.id;switch(e){case COMPONENT_NAMES.GRID:return r;case COMPONENT_NAMES.GRID_BOX_DIV:return"gbox_"+r;case COMPONENT_NAMES.GRID_VIEW_DIV:return"gview_"+r;case COMPONENT_NAMES.DIALOG_ALERT_DIV:return"alertmod_"+r;case COMPONENT_NAMES.COLUMN_RESIZER_DIV:return"rs_m"+r;case COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX:return"cb_"+r;case COMPONENT_NAMES.SEARCH_OPERATION_MENU_UL:return"sopt_menu";default:return""}},getGridComponentIdSelector:function(e){var t=jgrid.getGridComponentId.call(this,e);return t?"#"+jgrid.jqID(t):""},isHTMLElement:function(e){return typeof HTMLElement=="object"||typeof HTMLElement=="function"?e instanceof HTMLElement:e!=null&&typeof e=="object"&&e.nodeType===1&&typeof e.nodeName=="string"},getGridComponent:function(e,t){var r;if(t instanceof $||t.length>0)r=t[0];else if(jgrid.isHTMLElement(t))r=t,t=$(r);else return $();switch(e){case COMPONENT_NAMES.BODY_TABLE:return t.hasClass("ui-jqgrid-bdiv")?t.children("div").children(".ui-jqgrid-btable"):$();case COMPONENT_NAMES.HEADER_TABLE:return t.hasClass("ui-jqgrid-hdiv")?t.children("div").children(".ui-jqgrid-htable"):$();case COMPONENT_NAMES.FOOTER_TABLE:return t.hasClass("ui-jqgrid-sdiv")?t.children("div").children(".ui-jqgrid-ftable"):$();case COMPONENT_NAMES.FROZEN_HEADER_TABLE:return t.hasClass("ui-jqgrid-hdiv")?t.children(".ui-jqgrid-htable"):$();case COMPONENT_NAMES.FROZEN_FOOTER_TABLE:return t.hasClass("ui-jqgrid-sdiv")?t.children(".ui-jqgrid-ftable"):$();case COMPONENT_NAMES.BODY_DIV:return t.hasClass("ui-jqgrid-btable")&&r.grid!=null?$(r.grid.bDiv):$();case COMPONENT_NAMES.HEADER_DIV:return t.hasClass("ui-jqgrid-btable")&&r.grid!=null?$(r.grid.hDiv):$();case COMPONENT_NAMES.FOOTER_DIV:return t.hasClass("ui-jqgrid-btable")&&r.grid!=null?$(r.grid.sDiv):$();default:return $()}},fixScrollOffsetAndhBoxPadding:function(){var e=this,t=e.grid;if(t){var r=e.p,i=t.bDiv,a=function(o){var s=$(o).children("div").first();s.css(s.hasClass("ui-jqgrid-hbox-rtl")?"padding-left":"padding-right",r.scrollOffset),o.scrollLeft=i.scrollLeft};$(i).width()>0&&(r.scrollOffset=i.offsetWidth-i.clientWidth,a(t.hDiv),t.sDiv&&a(t.sDiv))}},mergeCssClasses:function(){var e=$.makeArray(arguments),t={},r,i,a,o,s=[];for(r=0;r<e.length;r++)for(a=String(e[r]).replace(/[\t\r\n\f]/g," ").split(" "),i=0;i<a.length;i++)o=a[i],o!==""&&!t.hasOwnProperty(o)&&(t[o]=!0,s.push(o));return s.join(" ")},hasOneFromClasses:function(e,t){var r=$(e),i=String(t).replace(/[\t\r\n\f]/g," ").split(" "),a=i.length,o;for(o=0;o<a;o++)if(r.hasClass(i[o]))return!0;return!1},hasAllClasses:function(e,t){var r=$(e),i=String(t).replace(/[\t\r\n\f]/g," ").split(" "),a=i.length,o;for(o=0;o<a;o++)if(!r.hasClass(i[o]))return!1;return!0},detectRowEditing:function(e){return!this.grid||this.p==null||this.p.editingInfo==null||this.p.editingInfo[e]==null?null:this.p.editingInfo[e]},getCell:function(e,t){var r=this.grid,i=this.p,a,o;return!r||!i||((e instanceof $||e.length>0)&&(e=e[0]),!((typeof HTMLTableRowElement=="object"||typeof HTMLTableRowElement=="function")&&e instanceof HTMLTableRowElement)||e.cells==null)?$():(o=$(e.cells[t]),a=r.fbRows,a!=null&&t<a[0].cells.length?o.add(a[e.rowIndex].cells[t]):o)},getDataFieldOfCell:function(e,t){var r=this.p,i=jgrid.getCell.call(this,e,t),a;return r.treeGrid&&i.children("div.tree-wrap").length>0&&(i=i.children("span.cell-wrapperleaf,span.cell-wrapper")),r.colModel[t].autoResizable?(a=i.children("span."+r.autoResizing.wrapperClassName),a.length===0&&(a=i)):a=i,a},enumEditableCells:function(e,t,r){var i=this,a=i.grid,o=i.rows,s=i.p;if(a==null||o==null||s==null||e==null||e.rowIndex==null||!e.id||!$.isFunction(r))return null;var u,f=s.colModel,c=f.length,h,g,p,m,b,v,j,y=e.rowIndex,S,C,w,x=a.fbRows,G=x!=null,l=G?x[y]:null;for(G&&(e=i.rows[y]),u=0;u<c&&(h=f[u],g=h.name,!(g!=="cb"&&g!=="subgrid"&&g!=="rn"&&(G&&!h.frozen&&(G=!1),S=(G?l:e).cells[u],C=$(S),!C.hasClass("not-editable-cell")&&(w=C.width(),s.treeGrid===!0&&g===s.ExpandColumn?(w-=C.children("div.tree-wrap").outerWidth(),C=C.children("span.cell-wrapperleaf,span.cell-wrapper").first()):w=0,m=stripPref(s.idPrefix,e.id),p={rowid:e.id,id:m,iCol:u,iRow:y,cmName:g,cm:h,mode:t,td:S,tr:e,trFrozen:l,dataElement:C[0],dataWidth:w},s.datatype==="local"&&(b=s._index[m],v=b!=null?s.data[b]:void 0,v&&(p.item=v)),h.edittype||(h.edittype="text"),((s.editingInfo[e.id]||{}).editable||{}).hasOwnProperty(g)?j=s.editingInfo[e.id].editable[g]:(j=h.editable,j=$.isFunction(j)?j.call(i,p):j),(j===!0||j==="hidden")&&(p.editable=j,r.call(i,p)===!1)))));u++);},getEditedValue:function(e,t,r,i){var a,o,s,u,f,c,h=t.formatoptions||{},g=t.editoptions||{},p=g.custom_value,m="[name="+jgrid.jqID(t.name)+"]",b=this,v=$(b);if(i==="hidden"||i==="readonly")return $(b).jqGrid("getCell",e.closest("tr.jqgrow").attr("id"),t.name);switch(t.edittype){case"checkbox":o=["Yes","No"],typeof g.value=="string"&&(o=g.value.split(":")),a=e.find("input[type=checkbox]").is(":checked")?o[0]:o[1];break;case"text":case"password":case"textarea":case"button":u=e.find("input"+m+",textarea"+m),a=u.val(),u.prop("type")==="date"&&String(a).split("-").length===3&&(s=h.newformat||v.jqGrid("getGridRes","formatter.date.newformat"),a=jgrid.parseDate.call(b,"Y-m-d",a,s));break;case"select":u=e.find("select option:selected"),g.multiple?(f=[],c=[],u.each(function(){f.push($(this).val()),c.push($(this).text())}),a=f.join(","),r.text=c.join(",")):(a=u.val(),r.text=u.text()),r.value=a;break;case"custom":try{if($.isFunction(p)){if(a=p.call(b,e.find(".customelement"),"get"),a===void 0)throw"e2"}else throw"e1"}catch(C){var j,y=jgrid.info_dialog,S=function(w){v.jqGrid("getGridRes",w)};switch(String(C)){case"e1":j="function 'custom_value' "+S("edit.msg.nodefined");break;case"e2":break;default:j=C.message;break}y&&$.isFunction(y)?y.call(b,S("errors.errcap"),j,S("edit.bClose")):($.isFunction(defaults.fatalError)?defaults.fatalError:alert)(j)}break;default:a=e.find("*"+m).text();break}return a},guid:1,uidPref:"jqg",randId:function(e){return(e||jgrid.uidPref)+jgrid.guid++},getAccessor:function(e,t){var r,i,a=[],o;if($.isFunction(t))return t(e);if(e!=null&&e.hasOwnProperty(t))return e[t];try{if(typeof t=="string"&&(a=t.split(".")),o=a.length,o)for(r=e;r!=null&&o--;)i=a.shift(),r.hasOwnProperty(i)?r=r[i]:r=void 0}catch{}return r},getXmlData:function(e,t,r){var i=typeof t=="string"?t.match(/^(.*)\[(\w+)\]$/):null;if($.isFunction(t))return t(e);if(i&&i[2])return i[1]?$(i[1],e).attr(i[2]):$(e).attr(i[2]);if(e!==void 0){var a=$(e).find(t);return r?a:a.length>0?$(a).text():void 0}},cellWidth:function(){var e=$("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div></div></div>"),t=e.appendTo("body").find("td").width();return e.remove(),Math.abs(t-5)>.1},isCellClassHidden:function(e){if(e==null||e==="")return!1;var t=$("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;' class='"+(e||"")+"'></td></tr></table></div></div></div>"),r=t.appendTo("body").find("td").is(":hidden");return t.remove(),r},cell_width:!0,ajaxOptions:{},from:function(source){var context=this,QueryObject=function(d,q){var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],toString=Object.prototype.toString;if(typeof d=="object"&&d.push){if(d.length>0&&typeof d[0]!="object")throw"data items are not objects"}else throw"data provides is not an array";return this._hasData=function(){return _data===null?!1:_data.length!==0},this._getStr=function(e){var t=[];return _trim&&t.push("jQuery.trim("),t.push("String("+e+" || '')"),_trim&&t.push(")"),_usecase||t.push(".toUpperCase()"),t.join("")},this._strComp=function(e){return typeof e=="string"?".toString()":""},this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}},this._toStr=function(e){return _trim&&(e=$.trim(e)),e=e.toString().replace(/\\/g,"\\\\").replace(/"/g,'\\"'),_usecase?e:e.toUpperCase()},this._funcLoop=function(e){var t=[];return $.each(_data,function(r,i){t.push(e(i))}),t},this._append=function(e){var t;for(_query===null?_query="":_query+=_queuedOperator===""?" && ":_queuedOperator,t=0;t<_orDepth;t++)_query+="(";_negate&&(_query+="!"),_query+="("+e+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(e,t){_lastCommand=e,_lastField=t},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(e,t){return _lastCommand===null?self:e!==null&&t!==null?_lastCommand(e,t):_lastField===null?_lastCommand(e):_lastCommand(_lastField,e)},this._equals=function(e,t){return self._compare(e,t,1)===0},this._compare=function(e,t,r){return r===void 0&&(r=1),e===void 0&&(e=null),t===void 0&&(t=null),e===null&&t===null?0:e===null&&t!==null?1:e!==null&&t===null?-1:(toString.call(e)==="[object Date]"&&toString.call(t)==="[object Date]"||!_usecase&&typeof e!="number"&&typeof t!="number"&&(e=String(e),t=String(t)),e<t?-r:e>t?r:0)},this._performSort=function(){_sorting.length!==0&&(_data=self._doSort(_data,0))},this._doSort=function(e,t){var r=_sorting[t].by,i=_sorting[t].dir,a=_sorting[t].type,o=_sorting[t].datefmt,s=_sorting[t].sfunc;if(t===_sorting.length-1)return self._getOrder(e,r,i,a,o,s);t++;var u=self._getGroup(e,r,i,a,o),f=[],c,h,g;for(c=0;c<u.length;c++)for(g=self._doSort(u[c].items,t),h=0;h<g.length;h++)f.push(g[h]);return f},this._getOrder=function(e,t,r,i,a,o){var s=[],u=[],f=r==="a"?1:-1,c,h,g;i===void 0&&(i="text"),i==="float"||i==="number"||i==="currency"||i==="numeric"?g=function(b){var v=parseFloat(String(b).replace(_stripNum,""));return isNaN(v)?Number.NEGATIVE_INFINITY:v}:i==="int"||i==="integer"?g=function(b){return b!=null?parseFloat(String(b).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}:i==="date"||i==="datetime"?g=function(b){return jgrid.parseDateToNumber.call(context,a,b)}:$.isFunction(i)?g=i:g=function(b){return b=b!=null?$.trim(String(b)):"",_usecase?b:b.toUpperCase()},$.each(e,function(b,v){h=t!==""?jgrid.getAccessor(v,t):v,h===void 0&&(h=""),h=g.call(context,h,v),u.push({vSort:h,data:v,index:b})}),$.isFunction(o)?u.sort(function(b,v){return o.call(context,b.vSort,v.vSort,f,b.data,v.data)}):u.sort(function(b,v){return self._compare(b.vSort,v.vSort,f)});for(var p=0,m=e.length;p<m;)c=u[p].index,s.push(e[c]),p++;return s},this._getGroup=function(e,t,r,i,a){var o=[],s=null,u=null;return $.each(self._getOrder(e,t,r,i,a),function(f,c){var h=jgrid.getAccessor(c,t);h==null&&(h=""),self._equals(u,h)||(u=h,s!==null&&o.push(s),s=self._group(t,h)),s.items.push(c)}),s!==null&&o.push(s),o},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return match===null||($.each(_data,function(){(function(){var localMath=`(function (context) {
var yesObject = { 1: 1, x: 1, "true": 1, yes: 1, y: 1, on: 1 },noObject = { 0: 1, "false": 1, no: 1, n: 1, off: 1 },normilizeBoolean = function (v) {
if (typeof v === "string") {
if (noObject[v.toLowerCase()]) { return false; } else if (yesObject[v.toLowerCase()]) { return true; } }
return !!v;
},intFunc = function (jQuery, self) { return `+match+"; }; return intFunc.call(context.item, context.jQuery, context.context); }(this))";eval(localMath)&&results.push(this.item)}).call({item:this,jQuery:$,context})}),_data=results),self},this.data=function(){return _data},this.select=function(e){if(self.execute(),$.isFunction(e)){var t=[];return $.each(_data,function(r,i){t.push(e(i))}),t}return self._hasData()?(self._performSort(),_data):[]},this.hasMatch=function(){return self._hasData()?(self.execute(),_data.length>0):!1},this.andNot=function(e,t,r){return _negate=!_negate,self.and(e,t,r)},this.orNot=function(e,t,r){return _negate=!_negate,self.or(e,t,r)},this.not=function(e,t,r){return self.andNot(e,t,r)},this.and=function(e,t,r){return _queuedOperator=" && ",e===void 0?self:self._repeatCommand(e,t,r)},this.or=function(e,t,r){return _queuedOperator=" || ",e===void 0?self:self._repeatCommand(e,t,r)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return _query!==null&&(_query+=")"),self},this.isNot=function(e){return _negate=!_negate,self.is(e)},this.is=function(e){return self._append("this."+e),self._resetNegate(),self},this._compareValues=function(e,t,r,i,a){var o=t;r===void 0&&(r=null);var s=r,u=a.stype===void 0?"text":a.stype;if(r!==null)switch(u){case"int":case"integer":s=String(s).replace(_stripNum,""),s=isNaN(Number(s))||s===""?"0":Number(s),o="parseInt("+o+"||0,10)",s=String(parseInt(s,10));break;case"boolean":o="normilizeBoolean("+o+")",s="normilizeBoolean("+String(s)+")";break;case"float":case"number":case"currency":case"numeric":s=String(s).replace(_stripNum,""),s=isNaN(Number(s))||s===""?"0":Number(s),o="parseFloat("+o+"||0)",s=String(s);break;case"date":case"datetime":s=String(jgrid.parseDateToNumber.call(context,a.newfmt||"Y-m-d",s)),o='jQuery.jgrid.parseDateToNumber.call(self,"'+a.srcfmt+'",'+o+")";break;default:o=self._getStr(o),s=self._getStr('"'+self._toStr(s)+'"')}return self._append(o+" "+i+" "+s),self._setCommand(e,t),self._resetNegate(),self},this.equals=function(e,t,r){return self._compareValues(self.equals,e,t,"==",r)},this.notEquals=function(e,t,r){return self._compareValues(self.equals,e,t,"!==",r)},this.isNull=function(e,t,r){return self._compareValues(self.equals,e,null,"===",r)},this.greater=function(e,t,r){return self._compareValues(self.greater,e,t,">",r)},this.less=function(e,t,r){return self._compareValues(self.less,e,t,"<",r)},this.greaterOrEquals=function(e,t,r){return self._compareValues(self.greaterOrEquals,e,t,">=",r)},this.lessOrEquals=function(e,t,r){return self._compareValues(self.lessOrEquals,e,t,"<=",r)},this.startsWith=function(e,t){var r=t??e,i=_trim?$.trim(r.toString()).length:r.toString().length;return self._append(self._getStr(e)+".substr(0,"+i+") == "+self._getStr('"'+self._toStr(t)+'"')),self._setCommand(self.startsWith,e),self._resetNegate(),self},this.endsWith=function(e,t){var r=t??e,i=_trim?$.trim(r.toString()).length:r.toString().length;return self._append(self._getStr(e)+".substr("+self._getStr(e)+".length-"+i+","+i+') == "'+self._toStr(t)+'"'),self._setCommand(self.endsWith,e),self._resetNegate(),self},this.contains=function(e,t){return self._append(self._getStr(e)+'.indexOf("'+self._toStr(t)+'",0) > -1'),self._setCommand(self.contains,e),self._resetNegate(),self},this.groupBy=function(e,t,r,i){return self._hasData()?self._getGroup(_data,e,t,r,i):null},this.orderBy=function(e,t,r,i,a){return t=t==null?"a":$.trim(t.toString().toLowerCase()),r==null&&(r="text"),i==null&&(i="Y-m-d"),a==null&&(a=!1),(t==="desc"||t==="descending")&&(t="d"),(t==="asc"||t==="ascending")&&(t="a"),_sorting.push({by:e,dir:t,type:r,datefmt:i,sfunc:a}),self},this.inSet=function(e,t,r){var i=t===void 0?null:t,a=r.stype===void 0?"text":r.stype;return i=self._getStr('"'+self._toStr(i)+'"'),a!=="text"?self._compareValues(self.equals,e,t,"==",r):(self._append("jQuery.inArray("+self._getStr(e)+","+i+".split('"+(context.p.inFilterSeparator||",")+"')) >= 0"),self._setCommand(self.inSet,e),self._resetNegate(),self)},this.custom=function(e,t,r){return self._append("self.p.customSortOperations."+e+'.filter.call(self,{item:this,cmName:"'+t+'",iCol:self.p.iColByName["'+t+'"]>=0 ? self.p.iColByName["'+t+'"] : self.p.iPropByName["'+t+'"],isAddProp:self.p.iColByName["'+t+'"]<0,searchValue:"'+r+'"})'),self._setCommand(self.custom,t),self._resetNegate(),self},self};return new QueryObject(source,null)},serializeFeedback:function(e,t,r){var i=this,a;return i instanceof $&&i.length>0&&(i=i[0]),typeof r=="string"?r:(a=$(i).triggerHandler(t,r),typeof a=="string"?a:((a==null||typeof a!="object")&&(a=r),$.isFunction(e)?e.call(i,a):a))},fullBoolFeedback:function(e,t){var r=this,i=$.makeArray(arguments).slice(2),a=$(r).triggerHandler(t,i);if(a=!(a===!1||a==="stop"),$.isFunction(e)){var o=e.apply(r,i);(o===!1||o==="stop")&&(a=!1)}return a},feedback:function(e,t,r,i){var a=this;if(a instanceof $&&a.length>0&&(a=a[0]),e==null||typeof i!="string"||i.length<2)return null;var o=i.substring(0,2)==="on"?"jqGrid"+t+i.charAt(2).toUpperCase()+i.substring(3):"jqGrid"+t+i.charAt(0).toUpperCase()+i.substring(1),s=$.makeArray(arguments).slice(4),u=e[i+r];return s.unshift(o),s.unshift(u),jgrid.fullBoolFeedback.apply(a,s)},builderSortIcons:function(e){var t=this,r=t.p,i=$(t),a=i.jqGrid("getGuiStyles","states.disabled"),o=function(s){var u=r.colModel[e],f=u!=null&&$.isFunction(u.sortIconName)?u.sortIconName:r.sortIconName,c=$.isFunction(f)?f.call(t,{order:s,iCol:e,cm:u}):i.jqGrid("getIconRes","sort."+s);return jgrid.mergeCssClasses("ui-grid-ico-sort","ui-icon-"+s,r.viewsortcols[1]==="horizontal"?"ui-i-"+s:"",a,c,"ui-sort-"+r.direction)};return"<span class='s-ico"+(r.sortIconsBeforeText?" jqgrid-icons-first":"")+"' style='display:none'><span class='"+o("asc")+"'></span><span class='"+o("desc")+"'></span></span>"},builderFmButon:function(e,t,r,i,a){var o=this.p,s=$(this),u=function(f){return s.jqGrid("getGuiStyles","dialog."+f)};return o==null?"":"<a id='"+e+"' class='"+jgrid.mergeCssClasses("fm-button",u("fmButton"),u(a==="right"?"rightCorner":a==="left"?"leftCorner":"defaultCorner"),i==="right"?"fm-button-icon-right":i==="left"?"fm-button-icon-left":"")+"' role='button' tabindex='0'>"+(r?"<span class='fm-button-icon "+(s.jqGrid("getIconRes",r)||r)+"'></span>":"")+(t?"<span class='fm-button-text'>"+t+"</span>":"")+"</a>"},convertOnSaveLocally:function(e,t,r,i,a,o){var s=this,u=s.p;if(u==null)return e;if($.isFunction(t.convertOnSave))return t.convertOnSave.call(this,{newValue:e,cm:t,oldValue:r,id:i,item:a,iCol:o});if(typeof r!="boolean"&&typeof r!="number")return e;if(typeof r=="boolean"&&(t.edittype==="checkbox"||t.formatter==="checkbox")){var f=String(e).toLowerCase(),c=t.editoptions!=null&&typeof t.editoptions.value=="string"?t.editoptions.value.split(":"):["yes","no"];$.inArray(f,["1","true",c[0].toLowerCase()])>=0?e=!0:$.inArray(f,["0","false",c[1].toLowerCase()])>=0&&(e=!1)}else typeof r=="number"&&!isNaN(e)&&(t.formatter==="number"||t.formatter==="currency"?e=parseFloat(e):t.formatter==="integer"&&(e=parseInt(e,10)));return e},parseDataToHtml:function(e,t,r,i,a,o,s){var u=this,f=u.p,c=$(u),h,g,p,m,b,v,j,y,S,C=!1,w=[],x=[],G=f.altRows===!0&&!c.jqGrid("isBootstrapGuiStyle")?f.altclass:"",l=f.groupingView,R=!1,B=parseInt(f.rowNum,10),T,H=$.fn.jqGrid,P=f.treeGrid===!0&&f.treeANode>-1?u.rows[f.treeANode].rowIndex+1:u.rows.length,V=u.formatCol,k=function(z,I,Q,ie,X,re){var ee=u.formatter(z,I,Q,X,"add",re);return"<td role='gridcell' "+V(Q,ie,ee,X,z,re)+">"+ee+"</td>"},O=function(z,I,Q,ie,X){var re="&nbsp;",ee=!0,Z={rowid:z,iRow:Q,iCol:I,data:X,checked:ie};return $.isFunction(f.hasMultiselectCheckBox)&&(ee=f.hasMultiselectCheckBox.call(u,Z)),ee&&(re=$.isFunction(f.checkboxHtml)?f.checkboxHtml.call(u,Z):"<input type='checkbox' id='jqg_"+f.id+"_"+z+"' class='cbox' name='jqg_"+f.id+"_"+z+"'"+(ie?" checked='checked' aria-checked='true'":" aria-checked='false'")+"/>"),"<td role='gridcell' "+V(I,Q,"",null,z,!0)+">"+re+"</td>"},N=function(z,I,Q,ie){var X=(parseInt(Q,10)-1)*parseInt(ie,10)+1+I;return"<td role='gridcell' class='"+H.getGuiStyles.call(c,"rowNum","jqgrid-rownum")+"' "+V(z,I,X,null,I,!0)+">"+X+"</td>"};for(P<=1&&(f.rowIndexes={}),(f.datatype==="local"&&!f.deselectAfterSort||f.multiPageSelection)&&(C=!0),o&&(B*=o+1),h=0;h<Math.min(e,B);h++){for(v=t[h],j=r[h],y=i!=null?i[h]:j,p=a===1?0:a,m=(p+h)%2===1?G:"",C?f.multiselect?(b=$.inArray(v,f.selarrrow)!==-1,b&&f.selrow===null&&(f.selrow=v)):b=v===f.selrow:b=!1,S=w.length,w.push(""),g=0;g<f.colModel.length;g++)switch(T=f.colModel[g].name,T){case"rn":w.push(N(g,h,f.page,f.rowNum));break;case"cb":w.push(O(v,g,h,b,j));break;case"subgrid":w.push(H.addSubGridCell.call(c,g,h+a,v,j));break;default:w.push(k(v,j[T],g,h+a,y,j))}f.grouping&&(H.groupingPrepare&&!l._locgr&&H.groupingPrepare.call(c,j,h),R=$.isFunction(l.groupCollapse)?l.groupCollapse.call(u,{group:l.groups[l.groups.length-1],rowid:v,data:j}):l.groupCollapse),w[S]=u.constructTr(v,R,m,j,y,b),w.push("</tr>"),f.rowIndexes[v]=P,P++,f.grouping&&(x.push(w),w=[]),w.length>f.maxItemsToJoin&&(w=[w.join("")])}return f.grouping&&H.groupingRender&&(s&&(l._locgr=!0),w=[H.groupingRender.call(c,x,B)],jgrid.clearArray(x)),w},fillSelectOptions:function(e,t,r,i,a,o){var s,u,f,c,h,g=[],p,m,b,v=!1,j=function(y,S){if(S>0)return y};if(t){if(typeof t=="function"&&(t=t()),typeof t=="string")for(u=t.split(i),s=0;s<u.length;s++)f=u[s].split(r),f.length>2&&(f[1]=$.map(f,j).join(r)),g.push({value:f[0],innerHtml:f[1],selectValue:$.trim(f[0]),selectText:$.trim(f[1]),selected:!1}),f[0]===""&&(v=!0);else if(typeof t=="object")for(m in t)t.hasOwnProperty(m)&&g.push({value:m,innerHtml:t[m],selectValue:$.trim(m),selectText:$.trim(t[m]),selected:!1}),m===""&&(v=!0);if(typeof o=="string"){for(b=a?$.map(o.split(","),function(y){return $.trim(y)}):[$.trim(o)],o=$.trim(o),s=0;s<g.length;s++)h=g[s],!a&&h.selectValue===o&&(h.selected=!0,p=!0),a&&$.inArray(h.selectValue,b)>-1&&(h.selected=!0,p=!0);if(!p)for(s=0;s<g.length;s++)h=g[s],!a&&h.selectText===o&&(h.selected=!0),a&&$.inArray(h.selectText,b)>-1&&(h.selected=!0)}for(s=0;s<g.length;s++)h=g[s],c=document.createElement("option"),c.value=h.value,c.innerHTML=h.innerHtml,h.selected&&(c.selected=!0),e.appendChild(c);return v}},getMethod:function(e){return this.getAccessor($.fn.jqGrid,e)},extend:function(e){$.extend($.fn.jqGrid,e),this.no_legacy_api||$.fn.extend(e)}});var clearArray=jgrid.clearArray,jqID=jgrid.jqID,getGridComponentIdSelector=jgrid.getGridComponentIdSelector,getGridComponentId=jgrid.getGridComponentId,getGridComponent=jgrid.getGridComponent,stripPref=jgrid.stripPref,randId=jgrid.randId,getAccessor=jgrid.getAccessor,convertOnSaveLocally=jgrid.convertOnSaveLocally,stripHtml=jgrid.stripHtml,htmlEncode=jgrid.htmlEncode,htmlDecode=jgrid.htmlDecode,mergeCssClasses=jgrid.mergeCssClasses,hasOneFromClasses=jgrid.hasOneFromClasses,feedback=function(){var e=$.makeArray(arguments);return e.unshift(""),e.unshift(""),e.unshift(this.p),jgrid.feedback.apply(this,e)};$.fn.jqGrid=function(e){var t=$.fn.jqGrid,r;if(typeof e=="string"){if(r=t[e],!r)throw"jqGrid - No such method: "+e;return r.apply(this,$.makeArray(arguments).slice(1))}return this.each(function(){if(!this.grid){var i=this,a,o,s=$(i),u=$.isFunction,f=$.isArray,c=$.extend,h=$.inArray,g=$.trim,p=$.each,m=t.setSelection,b=t.getGridRes,v=u(defaults.fatalError)?defaults.fatalError:alert,j=e.locale||defaults.locale||"en-US",y=locales[j]!=null&&typeof locales[j].isRTL=="boolean"&&locales[j].isRTL?"rtl":"ltr",S=e.iconSet||defaults.iconSet||((e.guiStyle||defaults.guiStyle)==="bootstrap"||(e.guiStyle||defaults.guiStyle)==="bootstrapPrimary"?"glyph":"jQueryUI"),C=e.guiStyle||defaults.guiStyle||"jQueryUI",w=function(D){return t.getIconRes.call(i,D)},x=function(D,_){return s.jqGrid("getGuiStyles",D,_)},G=function(D,_,F){if(_!=="abort"&&F!=="abort"){var E=D.getResponseHeader("Content-Type"),A=D.responseText||"",M=function(Y){var L=document.createElement("div"),ae,$e,se;for(se=/<body[^>]*>([\s\S]*)<\/body\s*>/gim.exec(Y),L.innerHTML=se!=null&&se.length===2?se[1]:Y,ae=L.getElementsByTagName("script"),$e=ae.length;$e--;)ae[$e].parentNode.removeChild(ae[$e]);Y=L.innerHTML;try{$.trim($(Y).text())===""&&(Y="")}catch{}return Y},W=function(Y){try{var L=$.parseJSON(Y),ae=[],$e;for($e in L)L.hasOwnProperty($e)&&$e!=="StackTrace"&&ae.push($e+": "+L[$e]);Y=ae.join("<br />")}catch{}return Y};E==="text/html"?A=M(A):(E==="application/json"||E==="text/plain")&&(A=W(A)),D.status!==500&&D.status!==0&&(A=(_||F)+(F&&F!==_?": "+F:"")+" "+D.status+" "+D.statusText+(A!==""?"<hr />":"")+A),s.jqGrid("displayErrorMessage",A||_||F)}};e==null&&(e={datatype:"local"}),e.datastr!==void 0&&f(e.datastr)&&(o=e.datastr,e.datastr=[]),e.data!==void 0&&(a=e.data,e.data=[]),(jgrid.formatter==null||jgrid.formatter.unused==null)&&v(`CRITICAL ERROR!!!


One uses probably

	$.extend($.jgrid.defaults, {...});

to set default settings of jqGrid instead of the usage the DEEP version of jQuery.extend (with true as the first parameter):

	$.extend(true, $.jgrid.defaults, {...});

One other possible reason:

you included some OLD version of language file (grid.locale-en.js for example) AFTER jquery.jqGrid.min.js. For example all language files of jqGrid 4.7.0 uses non-deep call of jQuery.extend.


Some options of jqGrid could still work, but another one will be broken.`),e.datatype===void 0&&e.dataType!==void 0&&(e.datatype=e.dataType,delete e.dataType),e.mtype===void 0&&e.type!==void 0&&(e.mtype=e.type,delete e.type),i.p={iconSet:S};var l=c(!0,{height:"auto",page:1,rowNum:20,maxRowNum:1e4,pagingDuringEditing:"prevent",sortingDuringEditing:"prevent",reloadingDuringEditing:"prevent",autoresizeOnLoad:!1,columnsToReResizing:[],autoResizing:{wrapperClassName:"ui-jqgrid-cell-wrapper",minColWidth:33,maxColWidth:300,adjustGridWidth:!0,compact:!1,fixWidthOnShrink:!1},doubleClickSensitivity:250,minResizingWidth:10,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],additionalProperties:[],arrayReader:[],rowList:[],colNames:[],sortorder:"asc",threeStateSort:!1,sortname:"",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],editingInfo:{},shrinkToFit:!0,xmlReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,singleSelectClickMode:"toggle",selectOnContextMenu:!0,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:G,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,forceClientSorting:!1,multiselect:!1,multikey:!1,editurl:"clientArray",search:!1,caption:"",hidegrid:!0,hiddengrid:!1,useUnformattedDataForCellAttr:!0,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",filters:"filters",nd:"nd",id:"id",idold:"idOld",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,iCol:-1,iRow:-1,nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,resetPageAfterSort:!0,multiPageSelection:!1,selectAllMode:"filtered",scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:16,multiselectWidth:16,multiselectPosition:"left",gridview:!0,rownumWidth:25,rownumbers:!1,pagerpos:"center",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!0,autoEncodeOnEdit:!1,remapColumns:[],cmNamesInputOrder:[],ajaxGridOptions:{},direction:y,toppager:!1,headertitles:!1,scrollTimeout:40,maxItemsToJoin:32768,data:[],lastSelectedData:[],quickEmpty:"quickest",_index:{},indexByColumnData:{},dataIndexById:{},iColByName:{},iPropByName:{},reservedColumnNames:["rn","cb","subgrid"],grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,useDefaultValuesOnGrouping:!0,summary:[],displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1,commonIconClass:w("grouping.common"),plusicon:w("grouping.plus"),minusicon:w("grouping.minus")},ignoreCase:!0,cmTemplate:{},idPrefix:"",iconSet:S,guiStyle:C,locale:j,multiSort:!1,showSortOrder:!0,sortOrderPosition:"afterSortIcons",multiSortOrder:"lastClickedFirstSorted",maxSortColumns:3,treeIcons:{commonIconClass:w("treeGrid.common"),plusLtr:w("treeGrid.plusLtr"),plusRtl:w("treeGrid.plusRtl"),minus:w("treeGrid.minus"),leaf:w("treeGrid.leaf")}},defaults,{navOptions:c(!0,{commonIconClass:w("nav.common"),editicon:w("nav.edit"),addicon:w("nav.add"),delicon:w("nav.del"),searchicon:w("nav.search"),refreshicon:w("nav.refresh"),viewicon:w("nav.view"),saveicon:w("nav.save"),cancelicon:w("nav.cancel"),buttonicon:w("nav.newbutton")},jgrid.nav||{}),actionsNavOptions:c(!0,{commonIconClass:w("actions.common"),editicon:w("actions.edit"),delicon:w("actions.del"),saveicon:w("actions.save"),cancelicon:w("actions.cancel")},jgrid.actionsNav||{}),formEditing:c(!0,{commonIconClass:w("form.common"),prevIcon:w("form.prev"),nextIcon:w("form.next"),saveicon:[!0,"left",w("form.save")],closeicon:[!0,"left",w("form.undo")]},jgrid.edit||{}),searching:c(!0,{commonIconClass:w("search.common"),findDialogIcon:w("search.search"),resetDialogIcon:w("search.reset"),queryDialogIcon:w("search.query")},jgrid.search||{}),formViewing:c(!0,{commonIconClass:w("form.common"),prevIcon:w("form.prev"),nextIcon:w("form.next"),closeicon:[!0,"left",w("form.cancel")]},jgrid.view||{}),formDeleting:c(!0,{commonIconClass:w("form.common"),delicon:[!0,"left",w("form.del")],cancelicon:[!0,"left",w("form.cancel")]},jgrid.del||{})},e||{}),R=function(D){return b.call(s,D)},B=function(D){var _=jgrid.getRes(l,D);return _!==void 0?_:b.call(s,"defaults."+D)};if(l.recordpos=l.recordpos||(l.direction==="rtl"?"left":"right"),l.autoResizing.widthOfVisiblePartOfSortIcon=l.autoResizing.widthOfVisiblePartOfSortIcon!==void 0?l.autoResizing.widthOfVisiblePartOfSortIcon:l.iconSet==="fontAwesome"?13:12,l.datatype=l.datatype!==void 0?l.datatype:a!==void 0||l.url==null?"local":l.jsonReader!=null&&typeof l.jsonReader=="object"?"json":"xml",l.jsonReader=l.jsonReader||{},l.url=l.url||"",l.cellsubmit=l.cellsubmit!==void 0?l.cellsubmit:l.cellurl===void 0?"clientArray":"remote",l.gridview=l.gridview!==void 0?l.gridview:l.afterInsertRow==null,a!==void 0&&(l.data=a,e.data=a),o!==void 0&&(l.datastr=o,e.datastr=o),i.tagName.toUpperCase()!=="TABLE"){v("Element is not a table!");return}if(i.id===""&&s.attr("id",randId()),document.documentMode!==void 0&&document.documentMode<=5){v("Grid can not be used in this ('quirks') mode!");return}s.empty().attr("tabindex","0"),i.p=l,l.id=i.id,l.idSel="#"+jqID(i.id),l.gBoxId=getGridComponentId.call(i,COMPONENT_NAMES.GRID_BOX_DIV),l.gBox=getGridComponentIdSelector.call(i,COMPONENT_NAMES.GRID_BOX_DIV),l.gViewId=getGridComponentId.call(i,COMPONENT_NAMES.GRID_VIEW_DIV),l.gView=getGridComponentIdSelector.call(i,COMPONENT_NAMES.GRID_VIEW_DIV),l.rsId=getGridComponentId.call(i,COMPONENT_NAMES.COLUMN_RESIZER_DIV),l.rs=getGridComponentIdSelector.call(i,COMPONENT_NAMES.COLUMN_RESIZER_DIV),l.cbId=getGridComponentId.call(i,COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX),l.cb=getGridComponentIdSelector.call(i,COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX);var T=jgrid.fixScrollOffsetAndhBoxPadding,H=function(D){var _={},F,E=D.length;for(F=0;F<E;F++)_[D[F].name]=F;return _},P=function(){var D={},_,F=l.colModel,E=F.length,A;for(_=0;_<E;_++)A=F[_],(A.createColumnIndex||l.createColumnIndex&&A.createColumnIndex!==!1||A.stype==="select"&&(A.searchoptions||{}).generateValue||A.edittype==="select"&&(A.editoptions||{}).generateValue)&&(D[F[_].name]={});return D},V=function(D){var _={},F,E=D.length,A;for(F=0;F<E;F++)A=D[F],_[typeof A=="string"?A:A.name]=F;return _},k=function(){var D={},_,F;for(this.p.rowIndexes=D,F=0;F<this.rows.length;F++)_=this.rows[F],$(_).hasClass("jqgrow")&&(D[_.id]=_.rowIndex)},O=function(){var D,_=l.colModel,F=l.cmNamesInputOrder,E=l.additionalProperties,A=F.length,M,W,Y,L;for(l.arrayReaderInfos={},M=l.arrayReaderInfos,L=0;L<A;L++)W=F[L],h(W,l.reservedColumnNames)<0&&!M.hasOwnProperty(W)&&(Y=l.iColByName[W],Y!==void 0?M[W]={name:W,index:Y,order:L,type:0}:(Y=l.iPropByName[W],Y!==void 0?M[W]={name:W,index:Y,order:L,type:1}:W===(l.prmNames.rowidName||"rowid")&&(M[W]={index:Y,type:2})));for(A=_.length,D=0;D<A;D++)W=_[D].name,h(W,l.reservedColumnNames)<0&&!M.hasOwnProperty(W)&&(M[W]={name:W,index:D,order:L,type:0},L++);for(A=E.length,D=0;D<A;D++)W=E[D],W!=null&&!M.hasOwnProperty(W)&&(typeof W=="object"&&$.type(W.name)==="string"&&(W=W.name),M[W]={name:W,index:D,order:L,type:1},L++)},N=function(D){var _=$(this).data("pageX");_?(_=String(_).split(";"),_=_[_.length-1],$(this).data("pageX",_+";"+D.pageX)):$(this).data("pageX",D.pageX)},z=function(D,_){return D=parseInt(D,10),isNaN(D)?_||0:D},I={headers:[],cols:[],footers:[],dragStart:function(D,_,F,E){var A=this,M=$(A.bDiv),W=M.closest(l.gBox).offset(),Y=E.offset().left+(l.direction==="rtl"?0:A.headers[D].width+(jgrid.cell_width?0:z(l.cellLayout,0))-2);A.resizing={idx:D,startX:Y,sOL:Y,moved:!1,delta:Y-_.pageX},A.curGbox=$(l.rs),A.curGbox.prependTo("body"),A.curGbox.css({display:"block",left:Y,top:F[1]+W.top+1,height:F[2]}),A.curGbox.css("height",F[2]-(A.curGbox.outerHeight()-A.curGbox.height())+"px"),A.curGbox.data("idx",D),A.curGbox.data("delta",Y-_.pageX),N.call(this.curGbox,_),feedback.call(getGridComponent(COMPONENT_NAMES.BODY_TABLE,M)[0],"resizeStart",_,D),document.onselectstart=function(){return!1},$(document).on("mousemove.jqGrid",function(L){if(I.resizing)return I.dragMove(L),!1}).on("mouseup.jqGrid"+l.id,function(){if(I.resizing)return I.dragEnd(),!1})},dragMove:function(D){var _=this,F=_.resizing;if(F){var E=D.pageX+F.delta-F.startX,A=_.headers,M=A[F.idx],W=l.direction==="ltr"?M.width+E:M.width-E,Y,L,ae=((l.colModel[F.idx]||{}).autoResizing||{}).minColWidth||l.minResizingWidth;F.moved=!0,W>ae&&(_.curGbox==null&&(_.curGbox=$(l.rs)),_.curGbox.css({left:F.sOL+E}),l.forceFit===!0?(Y=A[F.idx+l.nv],L=l.direction==="ltr"?Y.width-E:Y.width+E,L>l.autoResizing.minColWidth&&(M.newWidth=W,Y.newWidth=L)):(_.newWidth=l.direction==="ltr"?l.tblwidth+E:l.tblwidth-E,M.newWidth=W))}},resizeColumn:function(D,_,F){var E=this,A=E.headers,M=E.footers,W=A[D],Y,L=W.newWidth||W.width,ae=getGridComponent(COMPONENT_NAMES.BODY_TABLE,E.bDiv),$e=getGridComponent(COMPONENT_NAMES.HEADER_TABLE,E.hDiv),se=$e.children("thead").children("tr").first()[0].cells;L=parseInt(L,10),l.colModel[D].width=L,W.width=L,se[D].style.width=L+"px",E.cols[D].style.width=L+"px",E.fbRows&&($(E.fbRows[0].cells[D]).css("width",L),$(getGridComponent(COMPONENT_NAMES.FROZEN_HEADER_TABLE,E.fhDiv)[0].rows[0].cells[D]).css("width",L),l.footerrow&&$(getGridComponent(COMPONENT_NAMES.FROZEN_FOOTER_TABLE,E.fsDiv)[0].rows[0].cells[D]).css("width",L)),M.length>0&&(M[D].style.width=L+"px"),F!==!0&&T.call(ae[0]),l.forceFit===!0?(Y=A[D+l.nv],L=Y.newWidth||Y.width,Y.width=L,se[D+l.nv].style.width=L+"px",E.cols[D+l.nv].style.width=L+"px",M.length>0&&(M[D+l.nv].style.width=L+"px"),l.colModel[D+l.nv].width=L):(l.tblwidth=E.newWidth||l.tblwidth,F!==!0&&(E.hDiv.scrollLeft=E.bDiv.scrollLeft,l.footerrow&&(E.sDiv.scrollLeft=E.bDiv.scrollLeft))),!l.autowidth&&(l.widthOrg===void 0||l.widthOrg==="auto"||l.widthOrg==="100%")&&F!==!0&&t.setGridWidth.call(ae,E.newWidth+l.scrollOffset,!1),_||feedback.call(ae[0],"resizeStop",L,D)},dragEnd:function(){var D=this;D.hDiv.style.cursor="default",D.resizing&&(D.resizing!==null&&D.resizing.moved===!0&&($(D.headers[D.resizing.idx].el).removeData("autoResized"),D.resizeColumn(D.resizing.idx,!1)),$(l.rs).removeData("pageX"),D.resizing=!1,setTimeout(function(){$(l.rs).css("display","none").prependTo(l.gBox)},l.doubleClickSensitivity)),D.curGbox=null,document.onselectstart=function(){return!0},$(document).off("mousemove.jqGrid mouseup.jqGrid"+l.id)},populateVisible:function(){var D=this,_=$(D),F=D.grid,E=F.bDiv,A=$(E);F.timer&&clearTimeout(F.timer),F.timer=null;var M=A.height();if(M){var W,Y;if(D.rows.length)try{W=D.rows[1],Y=W&&$(W).outerHeight()||F.prevRowHeight}catch{Y=F.prevRowHeight}if(Y){F.prevRowHeight=Y;var L=l.rowNum;F.scrollTop=E.scrollTop;var ae=F.scrollTop,$e=Math.round(_.position().top)-ae,se=$e+_.height(),le=Y*L,ge,fe,ye;if(se<M&&$e<=0&&(l.lastpage===void 0||(parseInt((se+ae+le-1)/le,10)||0)<=l.lastpage)&&(fe=parseInt((M-se+le-1)/le,10)||1,se>=0||fe<2||l.scroll===!0?(ge=(Math.round((se+ae)/le)||0)+1,$e=-1):$e=1),$e>0&&(ge=(parseInt(ae/le,10)||0)+1,fe=(parseInt((ae+M)/le,10)||0)+2-ge,ye=!0),fe){if(l.lastpage&&(ge>l.lastpage||l.lastpage===1||ge===l.page&&ge===l.lastpage))return;F.hDiv.loading?F.timer=setTimeout(function(){F.populateVisible.call(D)},l.scrollTimeout):(l.page=ge,ye&&(F.selectionPreserver.call(D),F.emptyRows.call(D,!1,!1)),F.populate.call(D,fe))}}}},scrollGrid:function(){if(l.scroll){var D=this.scrollTop;I.scrollTop===void 0&&(I.scrollTop=0),D!==I.scrollTop&&(I.scrollTop=D,I.timer&&clearTimeout(I.timer),I.timer=setTimeout(function(){I.populateVisible.call(i)},l.scrollTimeout))}return I.hDiv.scrollLeft=this.scrollLeft,l.footerrow&&(I.sDiv.scrollLeft=this.scrollLeft),!1},selectionPreserver:function(){var D=this,_=$(D),F=l.selrow,E=l.selarrrow?$.makeArray(l.selarrrow):null,A=D.grid.bDiv,M=A.scrollLeft,W=function(){var Y;if(l.selrow=null,!l.multiPageSelection){if(clearArray(l.selarrrow),l.multiselect&&E&&E.length>0)for(Y=0;Y<E.length;Y++)E[Y]!==F&&m.call(_,E[Y],!1,null);F&&m.call(_,F,!1,null)}A.scrollLeft=M,_.off(".selectionPreserver",W)};_.on("jqGridGridComplete.selectionPreserver",W)}};i.grid=I,feedback.call(i,"beforeInitGrid"),l.iColByName=H(l.colModel),l.iPropByName=V(l.additionalProperties),jgrid.msie=jgrid.msiever()>0;var Q=$("<div class='"+x("gView","ui-jqgrid-view")+"' role='grid' aria-multiselectable='"+!!l.multiselect+"'></div>"),ie=jgrid.msie,X;l.direction=g(l.direction.toLowerCase()),h(l.direction,["ltr","rtl"])===-1&&(l.direction="ltr"),X=l.direction,$(Q).insertBefore(i),s.removeClass("scroll").appendTo(Q);var re=$("<div class='"+x("gBox","ui-jqgrid")+"'></div>");$(re).attr({id:l.gBoxId,dir:X}).insertBefore(Q),$(Q).attr("id",l.gViewId).appendTo(re),$("<div class='"+x("overlay","jqgrid-overlay")+"' id='lui_"+l.id+"'></div>").insertBefore(Q),$("<div class='"+x("loading","loading")+"' id='load_"+l.id+"'>"+B("loadtext")+"</div>").insertBefore(Q),s.attr({role:"presentation","aria-labelledby":"gbox_"+i.id});var ee=["shiftKey","altKey","ctrlKey"],Z=function(){var D=l.remapColumns,_=l.colModel,F=_.length,E=[],A,M,W;for(A=0;A<F;A++)W=_[A].name,h(W,l.reservedColumnNames)<0&&E.push(W);if(D!=null)for(M=E.slice(),A=0;A<D.length;A++)E[A]=M[D[A]];l.cmNamesInputOrder=E},te=function(D){return stripPref(l.idPrefix,D)},J=function(D,_,F,E,A,M){var W=l.colModel[D],Y,L=W.autoResizable?"<span class='"+l.autoResizing.wrapperClassName+"'>":"",ae=W.autoResizable?F.substring(L.length,F.length-7):F,$e=l.useUnformattedDataForCellAttr&&M!=null?M[W.name]:W.autoResizable?ae:F,se,le=W.classes,ge=W.align?"text-align:"+W.align+";":"",fe,ye,Ce,we,ze=function(ot){return typeof ot=="string"?ot.replace(/'/g,"&#39;"):ot},Ne=" aria-describedby='"+l.id+"_"+W.name+"'";if(W.hidden===!0&&(ge+="display:none;"),_===0)ge+="width: "+I.headers[D].width+"px;";else if((u(W.cellattr)||typeof W.cellattr=="string"&&jgrid.cellattr!=null&&u(jgrid.cellattr[W.cellattr]))&&(Y=u(W.cellattr)?W.cellattr:jgrid.cellattr[W.cellattr],fe=Y.call(i,A,$e,E,W,M,ae),typeof fe=="string"))for(fe=fe.replace(/\n/g,"&#xA;");;){if(ye=/^\s*(\w+[\w|\-]*)\s*=\s*([\"|\'])(.*?)\2(.*)/.exec(fe),ye===null||ye.length<5)return!we&&W.title&&(we=$e),Ne+" style='"+ze(ge)+"'"+(le?" class='"+ze(le)+"'":"")+(we?" title='"+ze(we)+"'":"");switch(Ce=ye[3],fe=ye[4],ye[1].toLowerCase()){case"class":le?le+=" "+Ce:le=Ce;break;case"title":we=Ce;break;case"style":ge+=Ce;break;default:Ne+=" "+ye[1]+"="+ye[2]+Ce+ye[2];break}}return se=ge!==""?"style='"+ge+"'":"",se+=(le!==void 0?" class='"+le+"'":"")+(W.title&&$e?" title='"+stripHtml(F).replace(/'/g,"&apos;")+"'":""),se+=Ne,se},he=function(D){return D==null||D===""?"&#160;":l.autoencode?htmlEncode(D):String(D)},pe=function(D){var _=l.treeReader,F=_.loaded,E=_.leaf_field,A=_.expanded_field,M=function(L){return L===!0||L==="true"||L==="1"};if(l.treeGridModel==="nested"&&!D[E]){var W=parseInt(D[_.left_field],10),Y=parseInt(D[_.right_field],10);D[E]=Y===W+1}D[F]!==void 0&&(D[F]=M(D[F])),D[E]=M(D[E]),D[A]=M(D[A])},Fe=function(D,_,F,E,A,M){var W=l.colModel[F],Y;if(W.formatter!==void 0){D=String(l.idPrefix)!==""?te(D):D;var L={rowId:D,colModel:W,gid:l.id,pos:F,rowData:M||E};u(W.cellBuilder)?Y=W.cellBuilder.call(i,_,L,E,A):u(W.formatter)?Y=W.formatter.call(i,_,L,E,A):$.fmatter?Y=$.fn.fmatter.call(i,W.formatter,_,L,E,A):Y=he(_)}else Y=he(_);if(Y=W.autoResizable&&W.formatter!=="actions"?"<span class='"+l.autoResizing.wrapperClassName+"'>"+Y+"</span>":Y,l.treeGrid&&A!=="edit"&&(l.ExpandColumn==null&&F===0||l.ExpandColumn===W.name)){M==null&&(M=l.data[l._index[D]]);var ae=parseInt(M[l.treeReader.level_field]||0,10),$e=18,se=parseInt(l.tree_root_level,10),le=se===0?ae:ae-1,ge=M[l.treeReader.leaf_field],fe=M[l.treeReader.expanded_field],ye=M[l.treeReader.icon_field],Ce=ge?(ye!=null&&ye!==""?ye:l.treeIcons.leaf)+" tree-leaf":fe?l.treeIcons.minus+" tree-minus":l.treeIcons.plus+" tree-plus";if(!ge&&ye&&typeof ye=="string"){var we=ye.split(",");we.length===2&&(Ce=fe?we[0]:we[1])}Y="<div class='tree-wrap' style='width:"+(le+1)*$e+"px;'><div class='"+mergeCssClasses(l.treeIcons.commonIconClass,Ce,"treeclick")+"' style='"+(l.ExpandColClick===!0?"cursor:pointer;":"")+(l.direction==="rtl"?"margin-right:":"margin-left:")+le*$e+"px;'></div></div><span class='cell-wrapper"+(ge?"leaf":"")+"'"+(l.ExpandColClick?" style='cursor:pointer;'":"")+">"+Y+"</span>"}return Y},be=function(D,_){var F=this,E=I.bDiv,A=I.fbDiv!=null?I.fbDiv.children(".ui-jqgrid-btable")[0]:null,M=function(W){if(W){var Y=W.rows,L=Y[0];if(l.deepempty)Y&&$(Y).slice(1).remove();else if(l.quickEmpty)if(l.quickEmpty==="quickest")W.replaceChild(document.createElement("tbody"),W.tBodies[0]),W.firstChild.appendChild(L);else for(;Y.length>1;)W.deleteRow(Y.length-1);else $(W.firstChild).empty().append(L)}};$(F).off(".jqGridFormatter"),M(F),M(A),D&&l.scroll&&($(E.firstChild).css({height:"auto"}),$(E.firstChild.firstChild).css({height:0,display:"none"}),E.scrollTop!==0&&(E.scrollTop=0)),_===!0&&l.treeGrid&&(clearArray(l.data),clearArray(l.lastSelectedData),l._index={},l.dataIndexById={},l.indexByColumnData={}),l.rowIndexes={},l.iRow=-1,l.iCol=-1},ue=function(D,_){var F,E;for(F in l.indexByColumnData)l.indexByColumnData.hasOwnProperty(F)&&(E=D[F],D.hasOwnProperty(F)&&E!==void 0&&E!==""&&(l.ignoreCase&&(E=String(E).toLowerCase()),l.indexByColumnData[F][E]===void 0&&(l.indexByColumnData[F][E]={}),l.indexByColumnData[F][E][_]=D[F],l.dataIndexById[_]===void 0&&(l.dataIndexById[_]={}),l.dataIndexById[_][F]===void 0&&(l.dataIndexById[_][F]={}),l.dataIndexById[_][F][E]=l.indexByColumnData[F][E]))},ve=function(D){var _,F,E,A=l.dataIndexById[D];if(A!=null){for(_ in A)if(A.hasOwnProperty(_)){F=A[_];for(E in F)F.hasOwnProperty(E)&&(delete l.indexByColumnData[_][E][D],$.isEmptyObject(l.indexByColumnData[_][E])&&delete l.indexByColumnData[_][E])}delete l.dataIndexById[D]}},_e=function(){var D=l.data,_=D.length,F,E,A,M,W,Y,L,ae,$e=l.localReader,se=l.additionalProperties,le=$e.cell,ge,fe,ye,Ce,we=l.arrayReaderInfos;if(l.datatype!=="local"||$e.repeatitems!==!0){if(l.treeGrid)for(F=0;F<_;F++)pe(D[F]);return}for(M=l.keyName===!1?u($e.id)?$e.id.call(i,D):$e.id:l.keyName,isNaN(M)?u(M)||l.arrayReaderInfos[M]!=null&&(W=l.arrayReaderInfos[M].order):W=Number(M),F=0;F<_;F++){E=D[F],A=le&&getAccessor(E,le)||E,fe=f(A),L={};for(ge in we)we.hasOwnProperty(ge)&&(Ce=we[ge],Y=getAccessor(A,fe?Ce.order:Ce.name),Ce.type===1&&(ye=se[Ce.index],ye!=null&&u(ye.convert)&&(Y=ye.convert(Y,A))),Y!==void 0&&(L[ge]=Y));L[M]!==void 0?ae=L[M]!==void 0?L[M]:randId():(ae=getAccessor(E,f(E)?W:M),ae===void 0&&(ae=getAccessor(A,f(A)?W:M)),ae===void 0&&(ae=randId())),ae=String(ae),L[$e.id]=ae,l.treeGrid&&pe(L),c(D[F],L)}},Oe=function(){var D=l.data.length,_,F,E,A;for(l.keyName===!1||l.loadonce&&l.dataTypeOrg?_=l.localReader.id:_=l.keyName,l._index={},l.dataIndexById={},l.indexByColumnData=P(),F=0;F<D;F++)A=l.data[F],E=getAccessor(A,_),E===void 0&&(E=String(randId()),A[_]===void 0&&(A[_]=E)),l._index[E]=F,ue.call(this,A,E)},Ie=function(D,_,F,E,A,M){var W="-1",Y="",L,ae=_?"display:none;":"",$e=this,se=x("gridRow","jqgrow ui-row-"+l.direction)+(F?" "+F:"")+(M?" "+x("states.select"):""),le=$($e).triggerHandler("jqGridRowAttr",[E,A,D]);if(typeof le!="object"&&(le=u(l.rowattr)?l.rowattr.call($e,E,A,D):typeof l.rowattr=="string"&&jgrid.rowattr!=null&&u(jgrid.rowattr[l.rowattr])?jgrid.rowattr[l.rowattr].call($e,E,A,D):{}),le!=null&&!$.isEmptyObject(le)){le.hasOwnProperty("id")&&(D=le.id,delete le.id),le.hasOwnProperty("tabindex")&&(W=le.tabindex,delete le.tabindex),le.hasOwnProperty("style")&&(ae+=le.style,delete le.style),le.hasOwnProperty("class")&&(se+=" "+le.class,delete le.class);try{delete le.role}catch{}for(L in le)le.hasOwnProperty(L)&&(Y+=" "+L+"="+le[L])}if(l.treeGrid&&parseInt(E[l.treeReader.level_field],10)!==parseInt(l.tree_root_level,10)){var ge=t.getNodeParent.call($(this),E),fe=ge&&ge.hasOwnProperty(l.treeReader.expanded_field)?ge[l.treeReader.expanded_field]:!0;!fe&&!_&&(ae+="display:none;")}return"<tr role='row' id='"+D+"' tabindex='"+W+"' class='"+se+"'"+(ae===""?"":" style='"+ae+"'")+Y+">"},Pe=function(){var D,_,F=$.fn.fmatter;for(D=0;D<l.colModel.length;D++)_=l.colModel[D].formatter,typeof _=="string"&&F!=null&&u(F[_])&&u(F[_].pageFinalization)&&F[_].pageFinalization.call(this,D)},Je=function(D,_){var F,E,A=l.colModel,M=A.length,W,Y=function(ae){return ae==null||ae===""?"&#160;":htmlEncode(ae)},L=function(ae){return ae==null||ae===""?"&#160;":String(ae)};for(F=0;F<M;F++)E=A[F],E.cellBuilder=null,D||(W={colModel:E,gid:l.id,pos:F},E.formatter===void 0?E.cellBuilder=l.autoencode?Y:L:typeof E.formatter=="string"&&$.fn.fmatter!=null&&u($.fn.fmatter.getCellBuilder)?E.cellBuilder=$.fn.fmatter.getCellBuilder.call(i,E.formatter,W,"add"):u(E.getCellBuilder)&&(E.cellBuilder=E.getCellBuilder.call(i,W,"add")))},Ve=function(D,_,F,E){var A=this,M=$(A),W=new Date,Y=l.datatype,L=Y!=="local"&&l.loadonce||Y==="xmlstring"||Y==="jsonstring",ae=(Y==="xmlstring"||Y==="xml")&&$.isXMLDoc(D),$e="_id_",se=l.localReader,le=getAccessor;if(D){if(Y==="xml"&&!ae)return;l.treeANode===-1&&!l.scroll?(I.emptyRows.call(A,!1,!0),_=1):_=_>1?_:1}else return;switch(L&&(clearArray(l.data),clearArray(l.lastSelectedData),l._index={},l.grouping&&l.groupingView!=null&&(l.groupingView.groups=[],l.groupingView._locgr=!1),l.localReader.id=$e),l.reccount=0,Y){case"xml":case"xmlstring":se=l.xmlReader,le=jgrid.getXmlData;break;case"json":case"jsonp":case"jsonstring":se=l.jsonReader;break}var ge,fe,ye,Ce,we,ze,Ne={},ot,bt=l.colModel,et=bt.length,Re,Se,Ae,Me,oe,Ue=l.arrayReaderInfos,at,ut={},ct=function(mt){return function(Ke){var yt=Ke!=null&&u(Ke.getAttribute)?Ke.getAttribute(mt):null;return yt!==null?yt:void 0}},_t=function(mt){return function(){var Ke=ut[mt],yt;if(Ke!=null)return yt=Ke.childNodes,yt.length>0?yt[0].nodeValue:void 0}};l.page=z(le(D,se.page),l.page),l.lastpage=z(le(D,se.total),1),l.records=z(le(D,se.records)),u(se.userdata)?l.userData=se.userdata.call(A,D)||{}:ae?le(D,se.userdata,!0).each(function(){l.userData[this.getAttribute("name")]=$(this).text()}):l.userData=le(D,se.userdata)||{},Je();var Ye={},Rt,ht,vt,kt,Wt=l.additionalProperties,ti=function(mt,Ke){ae&&typeof Ke=="string"&&(/^\w+$/.test(Ke)?Ye[mt]=_t(Ke):/^\[\w+\]$/.test(Ke)&&(Ye[mt]=ct(Ke.substring(1,Ke.length-1))))},ii=function(mt){var Ke=mt.name,yt=ae?mt.xmlmap||Ke:(Y==="local"&&!l.dataTypeOrg||Y==="jsonstring"||Y==="json"||Y==="jsonp")&&mt.jsonmap||Ke;l.keyName!==!1&&mt.key===!0&&(l.keyName=Ke),(typeof yt=="string"||u(yt))&&(Ye[Ke]=yt),u(yt)||ti(Ke,yt)};for(ge=0;ge<et;ge++)ii(bt[ge]);for(et=Wt.length,ge=0;ge<et;ge++)vt=Wt[ge],typeof vt=="object"&&vt!=null?ii(vt):ti(vt,vt);if(we=l.keyName===!1?u(se.id)?se.id.call(A,D):se.id:l.keyName,isNaN(we)?u(we)||(Ue[we]&&(ze=Ue[we].order),ae&&l.keyName===!1&&(typeof we=="string"&&/^\[\w+\]$/.test(we)?we=ct(we.substring(1,we.length-1)):typeof we=="string"&&/^\w+$/.test(we)&&(we=_t(we)))):ze=Number(we),Ce=le(D,se.root,!0),se.row)if(Ce.length===1&&typeof se.row=="string"&&/^\w+$/.test(se.row)){for(kt=[],Ae=Ce[0].childNodes,Me=Ae.length,Se=0;Se<Me;Se++)oe=Ae[Se],oe.nodeType===1&&oe.nodeName===se.row&&kt.push(oe);Ce=kt}else Ce=le(Ce,se.row,!0);Ce==null&&f(D)&&(Ce=D),Ce||(Ce=[]),ye=Ce.length,ye>0&&l.page<=0&&(l.page=1);var At=parseInt(l.rowNum,10);E&&(At*=E+1);var Ut=[],Yt=[],wt,Nt;for(kt=[],ge=0;ge<ye;ge++){if(Nt=Ce[ge],fe=se.repeatitems&&se.cell&&le(Nt,se.cell,!0)||Nt,Rt=se.repeatitems&&(ae||f(fe)),Ne={},ut={},ae&&!Rt&&fe!=null)for(Ae=fe.childNodes,Me=Ae.length,Se=0;Se<Me;Se++)oe=Ae[Se],oe.nodeType===1&&(ut[oe.nodeName]=oe);for(Re in Ue)Ue.hasOwnProperty(Re)&&(at=Ue[Re],Rt?(ht=fe[at.order],ae&&ht!=null&&(ht=ht.textContent||ht.text)):Ye[Re]!=null&&typeof Ye[Re]!="string"?ht=Ye[Re].call(A,fe,{cmName:Re,iItem:ge}):ht=le(fe,typeof Ye[Re]=="string"?Ye[Re]:at.name),at.type===1&&(vt=Wt[at.index],vt!=null&&u(vt.convert)&&(ht=vt.convert(ht,fe))),ht!==void 0&&(Ne[Re]=ht));if(Ne[we]!==void 0?wt=Ne[we]!==void 0?Ne[we]:randId():(wt=le(Nt,f(Nt)?ze:we),wt===void 0&&(wt=le(fe,f(fe)?ze:we)),wt===void 0&&(wt=randId())),Ne[we]===void 0&&(Ne[we]=wt),wt=String(wt),ot=l.idPrefix+wt,l.treeGrid&&pe(Ne),ge<At)Yt.push(ot),Ut.push(fe),kt.push(Ne);else if(!L)break;(L||l.treeGrid===!0)&&(Ne[$e]=wt,l.data.push(Ne),ue(Ne,wt),l._index[Ne[$e]]=l.data.length-1)}if(L&&l.treeGrid!==!0){if(l.forceClientSorting)return;l.lastSelectedData=l.data.slice()}var Mt=jgrid.parseDataToHtml.call(A,ye,Yt,kt,Ut,_,E,L);Je(!0);var Pt=l.treeANode>-1?l.treeANode:0,Qt=$(A.tBodies[0]);if(l.treeGrid===!0&&Pt>0?$(A.rows[Pt]).after(Mt.join("")):l.scroll?Qt.append(Mt.join("")):A.firstElementChild==null||document.documentMode!==void 0&&document.documentMode<=9?(Qt.html(Qt.html()+Mt.join("")),A.grid.cols=A.rows[0].cells):(A.firstElementChild.innerHTML+=Mt.join(""),A.grid.cols=A.rows[0].cells),l.grouping){k.call(A);var ai=function(mt){var Ke=$(this).closest("tr.jqgroup").attr("id");return M.jqGrid("groupingToggle",Ke,this,mt),!1},Xt;for(ge=0;ge<A.rows.length;ge++)Xt=$(A.rows[ge]),Xt.hasClass("jqgroup")&&Xt.children("td").children("span.tree-wrap").click(ai)}if(l.subGrid===!0)try{t.addSubGrid.call(M,l.iColByName.subgrid)}catch{}if(l.gridview===!1||u(l.afterInsertRow))for(ge=0;ge<Math.min(ye,At);ge++)feedback.call(A,"afterInsertRow",Yt[ge],kt[ge],Ut[ge]);if(l.totaltime=new Date-W,ge>0&&l.records===0&&(l.records=ye),clearArray(Mt),l.treeGrid===!0)try{t.setTreeNode.call(M,Pt+1,ge+Pt+1)}catch{}l.reccount=Math.min(ye,At),l.treeANode=-1,l.userDataOnFooter&&t.footerData.call(M,"set",l.userData,!0),L&&(l.records=ye,l.lastpage=Math.ceil(ye/At)),F||A.updatepager(!1,!0),Pe.call(A)},Qe=function(){var D=$(this),_=l.multiSort?[]:"",F={},E=!1,A={},M=[],W=[],Y=R("formatter.date.srcformat"),L=R("formatter.date.newformat");if(!f(l.data))return{};l.multiSort&&ne(_,F);var ae=l.grouping?l.groupingView:!1,$e,se,le=function(oe,Ue,at){var ut,ct,_t=oe.index||oe.name,Ye=oe.sorttype||"text";if(A[oe.name]={reader:l.dataTypeOrg?oe.name:oe.jsonmap||oe.name,iCol:Ue,stype:Ye,srcfmt:"",newfmt:"",sfunc:oe.sortfunc||null,isAddProp:at===!0},(Ye==="date"||Ye==="datetime")&&(oe.formatter&&typeof oe.formatter=="string"&&oe.formatter==="date"?(oe.formatoptions&&oe.formatoptions.srcformat?ut=oe.formatoptions.srcformat:ut=Y,oe.formatoptions&&oe.formatoptions.newformat?ct=oe.formatoptions.newformat:ct=L):ut=ct=oe.datefmt||"Y-m-d",A[oe.name].srcfmt=ut,A[oe.name].newfmt=ct),l.grouping)for(se=0,$e=ae.groupField.length;se<$e;se++)oe.name===ae.groupField[se]&&(M[se]=A[_t],W[se]=_t);l.multiSort||!E&&(oe.index===l.sortname||oe.name===l.sortname)&&(_=oe.name,E=!0)};if(p(l.colModel,function(oe){le(this,oe)}),p(l.additionalProperties,function(oe){le(typeof this=="string"?{name:this}:this,oe,!0)}),l.treeGrid)return t.SortTree.call(D,_,l.sortorder,A[_]!=null&&A[_].stype?A[_].stype:"text",A[_]!=null&&A[_].srcfmt?A[_].srcfmt:""),!1;var ge={eq:function(oe){return oe.equals},ne:function(oe){return oe.notEquals},lt:function(oe){return oe.less},le:function(oe){return oe.lessOrEquals},gt:function(oe){return oe.greater},ge:function(oe){return oe.greaterOrEquals},cn:function(oe){return oe.contains},nc:function(oe,Ue){return Ue==="OR"?oe.orNot().contains:oe.andNot().contains},bw:function(oe){return oe.startsWith},bn:function(oe,Ue){return Ue==="OR"?oe.orNot().startsWith:oe.andNot().startsWith},en:function(oe,Ue){return Ue==="OR"?oe.orNot().endsWith:oe.andNot().endsWith},ew:function(oe){return oe.endsWith},ni:function(oe,Ue){return Ue==="OR"?oe.orNot().inSet:oe.andNot().inSet},in:function(oe){return oe.inSet},nu:function(oe){return oe.isNull},nn:function(oe,Ue){return Ue==="OR"?oe.orNot().isNull:oe.andNot().isNull}},fe=jgrid.from.call(this,l.data);l.ignoreCase&&(fe=fe.ignoreCase());function ye(oe){var Ue=0,at,ut,ct,_t,Ye,Rt,ht;if(oe.groups!=null){for(ut=oe.groups.length&&oe.groupOp.toString().toUpperCase()==="OR",ut&&fe.orBegin(),at=0;at<oe.groups.length;at++){Ue>0&&ut&&fe.or();try{ye(oe.groups[at])}catch(vt){v(vt)}Ue++}ut&&fe.orEnd()}if(oe.rules!=null)try{for(ct=oe.rules.length&&oe.groupOp.toString().toUpperCase()==="OR",ct&&fe.orBegin(),at=0;at<oe.rules.length;at++)Ye=oe.rules[at],_t=oe.groupOp.toString().toUpperCase(),ge[Ye.op]&&Ye.field?(Ue>0&&_t&&_t==="OR"&&(fe=fe.or()),ht=A[Ye.field],ht!=null&&(Rt=ht.reader,fe=ge[Ye.op](fe,_t)(u(Rt)?'jQuery.jgrid.getAccessor(this,jQuery("'+l.idSel+'")[0].p.colModel['+ht.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+Rt+"')",Ye.data,A[Ye.field]))):l.customSortOperations!=null&&l.customSortOperations[Ye.op]!=null&&u(l.customSortOperations[Ye.op].filter)&&(fe=fe.custom(Ye.op,Ye.field,Ye.data)),Ue++;ct&&fe.orEnd()}catch(vt){v(vt)}}if(l.search===!0){var Ce=l.postData[(l.searching||{}).sFilter||l.prmNames.filters];if(Ce)typeof Ce=="string"&&(Ce=$.parseJSON(Ce)),ye(Ce);else try{var we=A[l.postData.searchField];fe=ge[l.postData.searchOper](fe)(u(we.reader)?'jQuery.jgrid.getAccessor(this,jQuery("'+l.idSel+'")[0].p.colModel['+we.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+we.reader+"')",l.postData.searchString,A[l.postData.searchField])}catch{}}if(l.grouping)for(se=0;se<$e&&se<W.length&&se<M.length;se++)fe.orderBy(W[se],ae.groupOrder[se],M[se].stype,M[se].srcfmt);l.multiSort?p(_,function(){fe.orderBy(this,F[this],A[this].stype,A[this].srcfmt,A[this].sfunc)}):_&&l.sortorder&&E&&fe.orderBy(l.sortname,l.sortorder.toUpperCase()==="DESC"?"d":"a",A[_].stype,A[_].srcfmt,A[_].sfunc),l.lastSelectedData=fe.select();var ze=parseInt(l.rowNum,10),Ne=l.lastSelectedData.length,ot=parseInt(l.page,10),bt=Math.ceil(Ne/ze),et={};if(l.grouping&&l.groupingView._locgr){l.groupingView.groups=[];var Re,Se,Ae;if(l.footerrow&&l.userDataOnFooter){for(Se in l.userData)l.userData.hasOwnProperty(Se)&&(l.userData[Se]=0);Ae=!0}for(Re=0;Re<Ne;Re++){if(Ae)for(Se in l.userData)l.userData.hasOwnProperty(Se)&&(l.userData[Se]+=parseFloat(l.lastSelectedData[Re][Se]||0));t.groupingPrepare.call(D,l.lastSelectedData[Re],Re,ze)}}fe=null,A=null;var Me=l.localReader;return et[Me.total]=bt,et[Me.page]=ot,et[Me.records]=Ne,et[Me.root]=l.lastSelectedData.slice((ot-1)*ze,ot*ze),et[Me.userdata]=l.userData,et},tt=function(D){var _=this,F=D.outerWidth(),E;return F<=0&&(E=$(_).closest(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",$(document.body).append("<div id='testpg' class='"+x("gBox","ui-jqgrid")+"' style='font-size:"+E+";visibility:hidden;margin:0;padding:0;' ></div>"),$(D).clone().appendTo("#testpg"),F=$("#testpg>.ui-pg-table").width(),$("#testpg").remove()),F>0&&D.parent().width(F),F},lt=function(D,_){var F=this,E=$(F),A=F.grid,M,W,Y,L,ae,$e,se,le=l.pager||"",ge,fe=l.pager?"_"+l.pager.substr(1):"",ye=A.bDiv,Ce=$.fmatter?$.fmatter.NumberFormat:null,we=l.toppager?"_"+l.toppager.substr(1):"",ze=x("states.hover"),Ne=x("states.disabled");if(Y=parseInt(l.page,10)-1,Y<0&&(Y=0),Y=Y*parseInt(l.rowNum,10),ae=Y+l.reccount,l.scroll){var ot=$(getGridComponent(COMPONENT_NAMES.BODY_TABLE,ye)[0].rows).slice(1);Y=ae-ot.length,l.reccount=ot.length;var bt=ot.outerHeight()||A.prevRowHeight;if(bt){var et=Y*bt,Re=jgrid.fixMaxHeightOfDiv.call(F,parseInt(l.records,10)*bt);$(ye).children("div").first().css({height:Re+"px"}).children("div").first().css({height:et+"px",display:et+"px"?"":"none"}),ye.scrollTop===0&&l.page>1&&(ye.scrollTop=l.rowNum*(l.page-1)*bt)}ye.scrollLeft=A.hDiv.scrollLeft}if(le+=l.toppager?(le?",":"")+l.toppager:"",le){if(se=R("formatter.integer")||{},M=z(l.page),W=z(l.lastpage),$(".selbox",le).prop("disabled",!1),l.pginput===!0){var Se=$(".ui-pg-input",le),Ae=String(l.page).length;Se.val(l.page),Se.each(function(){var Me=parseInt($(this).attr("size"),10);Me>0&&Me<Ae&&$(this).attr("size",Ae)}),ge=l.toppager?"#sp_1"+fe+",#sp_1"+we:"#sp_1"+fe,$(ge).html($.fmatter?Ce(l.lastpage,se):l.lastpage).closest(".ui-pg-table").each(function(){tt.call(F,$(this))})}l.viewrecords&&(l.reccount===0?$(".ui-paging-info",le).html(B("emptyrecords")):(L=Y+1,$e=l.records,$.fmatter&&(L=Ce(L,se),ae=Ce(ae,se),$e=Ce($e,se)),$(".ui-paging-info",le).html(jgrid.format(B("recordtext"),L,ae,$e)))),l.pgbuttons===!0&&(W<=0&&(M=0),M<=0&&(M=W=0),M===1||M===0?($("#first"+fe+", #prev"+fe).addClass(Ne).removeClass(ze),l.toppager&&$("#first_t"+we+", #prev_t"+we).addClass(Ne).removeClass(ze)):($("#first"+fe+", #prev"+fe).removeClass(Ne),l.toppager&&$("#first_t"+we+", #prev_t"+we).removeClass(Ne)),M===W||M===0?($("#next"+fe+", #last"+fe).addClass(Ne).removeClass(ze),l.toppager&&$("#next_t"+we+", #last_t"+we).addClass(Ne).removeClass(ze)):($("#next"+fe+", #last"+fe).removeClass(Ne),l.toppager&&$("#next_t"+we+", #last_t"+we).removeClass(Ne)))}D===!0&&l.rownumbers===!0&&$(">td.jqgrid-rownum",F.rows).each(function(Me){$(this).html(Y+1+Me)}),_&&l.jqgdnd&&E.jqGrid("gridDnD","updateDnD"),feedback.call(F,"gridComplete"),E.triggerHandler("jqGridAfterGridComplete")},dt=function(){var D=this;D.grid.hDiv.loading=!0,!l.hiddengrid&&t.progressBar.call($(D),{method:"show",loadtype:l.loadui,htmlcontent:B("loadtext")})},it=function(){var D=this;D.grid.hDiv.loading=!1,t.progressBar.call($(D),{method:"hide",loadtype:l.loadui})},Le=function(D){var _=this,F=$(_),E=_.grid;if(!E.hDiv.loading){var A=l.scroll&&D===!1,M={},W,Y,L=l.prmNames;l.page<=0&&(l.page=Math.min(1,l.lastpage)),L.search!==null&&(M[L.search]=l.search),L.nd!==null&&(M[L.nd]=new Date().getTime()),(isNaN(parseInt(l.rowNum,10))||parseInt(l.rowNum,10)<=0)&&(l.rowNum=l.maxRowNum),L.rows!==null&&(M[L.rows]=l.rowNum),L.page!==null&&(M[L.page]=l.page),L.sort!==null&&(M[L.sort]=l.sortname),L.order!==null&&(M[L.order]=l.sortorder),l.rowTotal!==null&&L.totalrows!==null&&(M[L.totalrows]=l.rowTotal);var ae=u(l.loadComplete),$e=ae?l.loadComplete:null,se=0;if(D=D||1,D>1?L.npage!==null?(M[L.npage]=D,se=D-1,D=1):$e=function(Se){l.page++,E.hDiv.loading=!1,ae&&l.loadComplete.call(_,Se),Le.call(_,D-1)}:L.npage!==null&&delete l.postData[L.npage],l.grouping&&t.groupingSetup){t.groupingSetup.call(F);var le=l.groupingView,ge,fe="",ye,Ce,we;for(ge=0;ge<le.groupField.length;ge++){for(ye=le.groupField[ge],Ce=0;Ce<l.colModel.length;Ce++)we=l.colModel[Ce],we.name===ye&&we.index&&(ye=we.index);fe+=ye+" "+le.groupOrder[ge]+", "}M[L.sort]=fe+M[L.sort]}c(l.postData,M);var ze=l.scroll?_.rows.length-1:1,Ne=function(){T.call(_),!l.autowidth&&(l.widthOrg===void 0||l.widthOrg==="auto"||l.widthOrg==="100%")&&t.setGridWidth.call(F,l.tblwidth+l.scrollOffset,!1)},ot=function(){var Se;if(l.autoresizeOnLoad)t.autoResizeAllColumns.call(F),clearArray(l.columnsToReResizing),l.autowidth&&t.setGridWidth.call(F,F.closest(".ui-jqgrid").parent().width(),!0);else{for(Se=0;Se<l.columnsToReResizing.length;Se++)t.autoResizeColumn.call(F,l.columnsToReResizing[Se]);clearArray(l.columnsToReResizing)}},bt=function(){feedback.call(_,"loadComplete",Y),ot(),F.triggerHandler("jqGridAfterLoadComplete",[Y]),it.call(_),l.datatype="local",l.datastr=null,Ne()},et=function(Se){F.triggerHandler("jqGridLoadComplete",[Se]),$e&&$e.call(_,Se),ot(),F.triggerHandler("jqGridAfterLoadComplete",[Se]),A&&E.populateVisible.call(_),D===1&&it.call(_),Ne()},Re=function(){var Se=Qe.call(_);Ve.call(_,Se,ze,D>1,se),et(Se)};if(!feedback.call(_,"beforeRequest"))return;if(u(l.datatype)){l.datatype.call(_,l.postData,"load_"+l.id,ze,D,se);return}switch(W=l.datatype.toLowerCase(),$(I.eDiv).hide(),W){case"json":case"jsonp":case"xml":case"script":$.ajax(c({url:l.url,type:l.mtype,dataType:W,data:jgrid.serializeFeedback.call(i,l.serializeGridData,"jqGridSerializeGridData",l.postData),success:function(Se,Ae,Me){if(l.jqXhr=null,$(I.eDiv).hide(),u(l.beforeProcessing)&&l.beforeProcessing.call(_,Se,Ae,Me)===!1){it.call(_);return}Ve.call(_,Se,ze,D>1,se),et(Se),(l.loadonce||l.treeGrid)&&(l.dataTypeOrg=l.datatype,l.datatype="local",l.forceClientSorting&&Re())},error:function(Se,Ae,Me){l.jqXhr=null,u(l.loadError)&&l.loadError.call(_,Se,Ae,Me),D===1&&it.call(_)},beforeSend:function(Se,Ae){var Me=!0;if(u(l.loadBeforeSend)&&(Me=l.loadBeforeSend.call(_,Se,Ae)),Me===void 0&&(Me=!0),Me===!1)return!1;l.jqXhr=Se,dt.call(_)}},jgrid.ajaxOptions,l.ajaxGridOptions));break;case"xmlstring":dt.call(_),Y=typeof l.datastr=="string"?$.parseXML(l.datastr):l.datastr,Ve.call(_,Y),bt(),l.forceClientSorting&&Re();break;case"jsonstring":dt.call(_),Y=l.datastr&&typeof l.datastr=="string"?$.parseJSON(l.datastr):l.datastr,Ve.call(_,Y),bt(),l.forceClientSorting&&Re();break;case"local":case"clientside":dt.call(_),l.datatype="local",Re();break}}},De=function(D){var _=this,F=_.grid;$(l.cb,F.hDiv).prop("checked",D),l.frozenColumns&&$(l.cb,F.fhDiv).prop("checked",D)},U=function(D){var _,F;for(_=0;_<l.savedRow.length;_++)F=l.savedRow[_],D==="save"?F.hasOwnProperty("ic")?s.jqGrid("saveCell",F.id,F.ic):s.jqGrid("saveRow",F.id):F.hasOwnProperty("ic")?s.jqGrid("restoreCell",F.id,F.ic):s.jqGrid("restoreRow",F.id)},K=function(D,_){var F=x("states.hover"),E=x("states.disabled"),A="<td class='ui-pg-button "+E+"'><span class='ui-separator'></span></td>",M="",W=l.pagerpos==="left"?"margin-right:auto;":l.pagerpos==="right"?"margin-left:auto;":"margin-left:auto;margin-right:auto;",Y="<table style='table-layout:auto;white-space: pre;"+W+"' class='ui-pg-table'><tbody><tr>",L="",ae,$e,se,le,ge,fe,ye=function(Re,Se,Ae){return l.savedRow.length>0&&l.pagingDuringEditing==="prevent"||!feedback.call(i,"onPaging",Re,{newPage:Se,currentPage:z(l.page,1),lastPage:z(l.lastpage,1),currentRowNum:z(l.rowNum,10),newRowNum:Ae})?!1:(l.selrow=null,l.multiselect&&(l.multiPageSelection||clearArray(l.selarrrow),De.call(i,!1)),U(l.pagingDuringEditing),!0)};if(_+="_"+D,ae="pg_"+D,$e=D+"_left",se=D+"_center",le=D+"_right",$("#"+jqID(D)).append("<div id='"+ae+"' class='ui-pager-control' role='group'><table class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;'><tbody><tr><td id='"+$e+"' class='ui-jqgrid-pg-left'"+(l.pagerLeftWidth!==void 0?" style='width:"+l.pagerLeftWidth+"px;'":"")+"></td><td id='"+se+"' class='ui-jqgrid-pg-center'"+(l.pagerCenterWidth!==void 0?" style='width:"+l.pagerCenterWidth+"px;'":"")+"></td><td id='"+le+"' class='ui-jqgrid-pg-right'"+(l.pagerRightWidth!==void 0?" style='width:"+l.pagerRightWidth+"px;'":"")+"></td></tr></tbody></table></div>").attr("dir","ltr"),ae="#"+jqID(ae),l.rowList.length>0){L="<td dir='"+X+"'>";var Ce=B("pgrecs");L+="<select class='"+x("pager.pagerSelect","ui-pg-selbox")+"' "+(Ce?"title='"+Ce+"'":"")+">";var we;for(fe=0;fe<l.rowList.length;fe++)we=l.rowList[fe].toString().split(":"),we.length===1&&(we[1]=we[0]),L+="<option value='"+we[0]+"'"+(z(l.rowNum,0)===z(we[0],0)?" selected='selected'":"")+">"+we[1]+"</option>";L+="</select></td>"}if(X==="rtl"&&(Y+=L),l.pginput===!0&&(M="<td dir='"+X+"'>"+jgrid.format(B("pgtext")||"","<input aria-label='Page No.' class='"+x("pager.pagerInput","ui-pg-input")+"' type='text' size='2' maxlength='7' value='0'/>","<span id='sp_1_"+D+"'>0</span>")+"</td>"),D="#"+jqID(D),l.pgbuttons===!0){var ze=["first","prev","next","last"],Ne=ze.slice(),ot=x("pager.pagerButton","ui-pg-button"),bt=function(Re,Se){var Ae=B("pg"+Re);return"<td role='button' tabindex='0' id='"+Re+_+"' class='"+ot+"' "+(Ae?"title='"+Ae+"'":"")+"><span class='"+w("pager."+Se)+"'></span></td>"};for(X==="rtl"&&ze.reverse(),fe=0;fe<ze.length;fe++)Y+=bt(ze[fe],Ne[fe]),fe===1&&(Y+=M!==""?A+M+A:"")}else M!==""&&(Y+=M);X==="ltr"&&(Y+=L),Y+="</tr></tbody></table>",l.viewrecords===!0&&$("td"+D+"_"+l.recordpos,ae).append("<span dir='"+X+"' style='text-align:"+l.recordpos+"' class='ui-paging-info'></span>");var et=$("td"+D+"_"+l.pagerpos,ae);et.append(Y),ge=tt.call(this,et.children(".ui-pg-table")),l._nvtd=[],l._nvtd[0]=Math.floor(ge?(l.width-ge)/2:l.width/3),l._nvtd[1]=0,Y=null,$(".ui-pg-selbox",ae).on("change",function(){var Re=z(this.value,10),Se=Math.round(l.rowNum*(l.page-1)/Re-.5)+1;return ye("records",Se,Re)&&(l.page=Se,l.rowNum=Re,l.pager&&$(".ui-pg-selbox",l.pager).val(Re),l.toppager&&$(".ui-pg-selbox",l.toppager).val(Re),Le.call(i)),!1}),l.pgbuttons===!0&&($(".ui-pg-button",ae).hover(function(){hasOneFromClasses(this,E)?this.style.cursor="default":($(this).addClass(F),this.style.cursor="pointer")},function(){hasOneFromClasses(this,E)||($(this).removeClass(F),this.style.cursor="default")}),$("#first"+jqID(_)+", #prev"+jqID(_)+", #next"+jqID(_)+", #last"+jqID(_)).click(function(){if(hasOneFromClasses(this,E))return!1;var Re=z(l.page,1),Se=Re,Ae=this.id,Me=z(l.lastpage,1),oe=!1,Ue=!0,at=!0,ut=!0,ct=!0;return Me===0||Me===1?(Re<=1&&(Ue=!1,at=!1),ut=!1,ct=!1):Me>1&&Re>=1?Re===1?(Ue=!1,at=!1):Re===Me&&(ut=!1,ct=!1):Me>1&&Re===0&&(ut=!1,ct=!1,Re=Me-1),this.id==="first"+_&&Ue&&(Ae="first",Se=1,oe=!0),this.id==="prev"+_&&at&&(Ae="prev",Se=Re-1,oe=!0),this.id==="next"+_&&ut&&(Ae="next",Se=Re+1,oe=!0),this.id==="last"+_&&ct&&(Ae="last",Se=Me,oe=!0),ye(Ae,Se,z(l.rowNum,10))&&(l.page=Se,oe&&Le.call(i)),!1})),l.pginput===!0&&$("input.ui-pg-input",ae).on("keypress.jqGrid",function(Re){var Se=Re.charCode||Re.keyCode||0,Ae=z($(this).val(),1);return Se===13?(ye("user",Ae,z(l.rowNum,10))&&($(this).val(Ae),l.page=$(this).val()>0?$(this).val():l.page,Le.call(i)),!1):this}),et.children(".ui-pg-table").on("keydown.jqGrid",function(Re){var Se;Re.which===13&&(Se=et.find(":focus"),Se.length>0&&Se.trigger("click"))})},ne=function(D,_,F){if(p((l.sortname+" "+l.sortorder).split(","),function(){var A=$.trim(this).split(" ");A.length===2&&D.push(A[0])}),F!=null){var E=$.inArray(F.index||F.name,D);F.lso!==""&&E<0?D.push(F.index||F.name):F.lso===""&&E>=0&&D.splice(E,1)}p(l.colModel,function(){var A=this.index||this.name,M;this.lso&&(M=this.lso.split("-"),$.inArray(A,D)<0&&D.push(A),_[A]=M[M.length-1])})},ce=function(D,_){var F="",E=l.colModel[D],A,M=x("states.disabled"),W=l.frozenColumns?$(i.grid.headers[D].el).add($(_)):$(i.grid.headers[D].el),Y=W.find("span.s-ico"),L=Y.children("span.ui-icon-asc"),ae=Y.children("span.ui-icon-desc"),$e=L,se=ae,le=[],ge={};if(W.find("span.ui-grid-ico-sort").addClass(M),W.attr("aria-selected","false"),E.lso?(Y.show(),A=E.lso.split("-"),A=A[A.length-1],A==="desc"&&($e=ae,se=L),$e.removeClass(M).css("display",""),l.showOneSortIcon&&se.hide(),W.attr("aria-selected","true")):l.viewsortcols[0]||Y.hide(),ne(le,ge,E),typeof l.sortname=="string"&&l.sortname!==""&&l.sortname.split(",").length<le.length){var fe=function(ye){p(l.colModel,function(){var Ce,we="#jqgh_"+jgrid.jqID(l.id+"_"+this.name),ze=$(we);if(this.lso&&(this.index||this.name)===ye){if(typeof le.indexOf=="function")Ce=le.indexOf(ye);else{for(Ce=0;Ce<le.length&&le[Ce]!==ye;Ce++);Ce===le.length&&(Ce=-1)}Ce>=0&&(le.splice(Ce,1),this.lso="")}l.frozenColumns&&(ze=ze.add($(I.fhDiv).find(we))),ze.children(".s-ico")[this.lso?"show":"hide"]()})};if(l.multiSortOrder==="lastClickedFirstSorted"&&le.length>1)for(le.unshift(le[le.length-1]),le.pop();le.length>l.maxSortColumns;)fe(le[le.length-1]);else u(l.multiSortOrder)&&(le=l.multiSortOrder.call(i,{sortNames:le,cm:E,sortDirs:ge,removeSorting:fe})||le)}p(le,function(){F.length>0&&(F+=", "),F+=this+" "+ge[this],l.sortorder=ge[this]}),l.sortname=F.substring(0,F.length-l.sortorder.length-1),l.showSortOrder&&p(l.colModel,function(){if(this.sortable){var ye=h(this.name,le),Ce="#jqgh_"+jgrid.jqID(l.id+"_"+this.name),we=$(Ce);l.frozenColumns&&(we=we.add($(I.fhDiv).find(Ce))),we.children(".ui-jqgrid-sort-order").html(ye<0?"&nbsp;":u(l.formatSortOrder)?l.formatSortOrder.call(i,{cm:this,sortIndex:ye}):ye+1)}})},de=function(D,_,F,E,A,M){var W=this,Y=W.grid,L=l.colModel[_],ae=x("states.disabled");if(!(L==null||!L.sortable)&&!(l.savedRow.length>0&&l.sortingDuringEditing==="prevent")){if(l.lastsort===_&&l.sortname!==""?l.sortorder==="asc"?l.sortorder="desc":l.sortorder==="desc"?l.sortorder="asc":l.sortorder=L.firstsortorder||"asc":l.sortorder=L.firstsortorder||"asc",L.lso?L.lso==="asc"?L.lso+="-desc":L.lso==="desc"?L.lso+="-asc":(L.lso==="asc-desc"||L.lso==="desc-asc")&&(l.threeStateSort||l.multiSort)&&(L.lso=""):L.lso=L.firstsortorder||"asc",!F&&l.resetPageAfterSort&&(l.page=1),l.multiSort)ce(_,A);else{if(E){if(l.lastsort===_&&l.sortorder===E&&!F)return;l.sortorder=E}var $e=Y.headers,se=Y.fhDiv,le=$e[l.lastsort]?$($e[l.lastsort].el):$(),ge=l.frozenColumns?$(A):$($e[_].el),fe=ge.find("span.s-ico"),ye=fe.children(".ui-icon-"+l.sortorder),Ce=fe.children(".ui-icon-"+(l.sortorder==="asc"?"desc":"asc"));L=l.colModel[l.lastsort],le.find(".ui-grid-ico-sort").addClass(ae),le.attr("aria-selected","false"),l.frozenColumns&&(se.find(".ui-grid-ico-sort").addClass(ae),se.find("th").attr("aria-selected","false")),l.viewsortcols[0]||(l.lastsort!==_?(l.frozenColumns&&se.find("span.s-ico").hide(),le.find("span.s-ico").hide(),fe.show()):l.sortname===""&&fe.show()),l.lastsort!==_&&le.data("autoResized")==="true"&&(L!=null&&L.autoResizing!=null&&L.autoResizing.compact||l.autoResizing.compact)&&l.columnsToReResizing.push(l.lastsort),L=l.colModel[_],fe.css("display",""),L.lso!==""?(ye.removeClass(ae).css("display",""),l.showOneSortIcon&&Ce.removeClass(ae).hide(),ge.attr("aria-selected","true")):(ge.attr("aria-selected","false"),l.threeStateSort&&(l.sortorder="",l.viewsortcols[0]||fe.hide())),l.lastsort!==_&&ge.data("autoResized")==="true"&&(L!=null&&L.autoResizing!=null&&L.autoResizing.compact||l.autoResizing.compact)&&l.columnsToReResizing.push(_),l.sortname=L.index||D}if(!feedback.call(W,"onSortCol",l.sortname,_,l.sortorder,M||{})){l.lastsort=_;return}if(l.datatype==="local"?l.deselectAfterSort&&!l.multiPageSelection&&t.resetSelection.call($(W)):l.multiPageSelection||(l.selrow=null,l.multiselect&&(De.call(W,!1),clearArray(l.selarrrow))),U(l.sortingDuringEditing),l.scroll){var we=Y.bDiv.scrollLeft;I.emptyRows.call(W,!0,!1),Y.hDiv.scrollLeft=we}l.subGrid&&l.datatype==="local"&&$("td.sgexpanded","#"+jqID(l.id)).each(function(){$(this).trigger("click")}),Le.call(W),l.lastsort=_,l.sortname!==D&&_&&(l.lastsort=_)}},qe=function(){var D=0,_=jgrid.cell_width?0:z(l.cellLayout,0),F=0,E,A=z(l.scrollOffset,0),M,W=!1,Y,L=0,ae,$e=jgrid.isCellClassHidden;p(l.colModel,function(){if(this.hidden===void 0&&(this.hidden=!1),l.grouping&&l.autowidth){var se=h(this.name,l.groupingView.groupField);se>=0&&l.groupingView.groupColumnShow.length>se&&(this.hidden=!l.groupingView.groupColumnShow[se])}this.widthOrg=M=z(this.width,0),this.hidden===!1&&!$e(this.classes)&&(D+=M+_,this.fixed?L+=M+_:F++)}),isNaN(l.width)&&(l.width=D+(l.shrinkToFit===!1&&!isNaN(l.height)?A:0)),I.width=l.width,l.tblwidth=D,l.shrinkToFit===!1&&l.forceFit===!0&&(l.forceFit=!1),l.shrinkToFit===!0&&F>0&&(Y=I.width-_*F-L,isNaN(l.height)||(Y-=A,W=!0),D=0,p(l.colModel,function(se){this.hidden===!1&&!$e(this.classes)&&!this.fixed&&(M=Math.round(Y*this.width/(l.tblwidth-_*F-L)),this.width=M,D+=M,E=se)}),ae=0,W?I.width-L-(D+_*F)!==A&&(ae=I.width-L-(D+_*F)-A):!W&&Math.abs(I.width-L-(D+_*F))!==1&&(ae=I.width-L-(D+_*F)),l.colModel[E].width+=ae,l.tblwidth=D+ae+_*F+L,l.tblwidth>l.width&&(l.colModel[E].width-=l.tblwidth-parseInt(l.width,10),l.tblwidth=l.width))},Ge=function(D){var _=D,F=D,E;for(E=D+1;E<l.colModel.length;E++)if(l.colModel[E].hidden!==!0){F=E;break}return F-_},Be=function(D){return l.iColByName[(D.id||"").substring(l.id.length+1)]},xe;h(l.multikey,ee)===-1&&(l.multikey=!1),l.keyName=!1,l.sortorder=l.sortorder.toLowerCase(),jgrid.cell_width=jgrid.cellWidth();var Ze=jgrid.cmTemplate,je,me;for(je=0;je<l.colModel.length;je++)me=l.colModel[je],xe=typeof me.template=="string"?Ze!=null&&(typeof Ze[me.template]=="object"||u(Ze[me.template]))?Ze[me.template]:{}:me.template,u(xe)&&(xe=xe.call(i,{cm:me,iCol:je})),me=c(!0,{},l.cmTemplate,xe||{},me),l.keyName===!1&&me.key===!0&&(l.keyName=me.name),l.colModel[je]=me;for(l.indexByColumnData=P(),je=0;je<l.additionalProperties.length;je++)me=l.additionalProperties[je],l.keyName===!1&&me.key===!0&&(l.keyName=me.name);if(l.colNames.length===0)for(je=0;je<l.colModel.length;je++)l.colNames[je]=l.colModel[je].label!==void 0?l.colModel[je].label:l.colModel[je].name;if(l.colNames.length!==l.colModel.length){v(R("errors.model"));return}if(l.grouping===!0&&(l.scroll=!1,l.rownumbers=!1,l.treeGrid=!1,l.gridview=!0),l.subGrid&&u(t.setSubGrid))try{t.setSubGrid.call(s)}catch{}if(l.multiselect&&(l.multiselectPosition==="left"||l.multiselectPosition==="right")){var Te=l.multiselectPosition==="left"?"unshift":"push";l.colNames[Te]("<input id='"+l.cbId+"' class='cbox' type='checkbox' aria-checked='false'/>"),l.colModel[Te]({name:"cb",width:jgrid.cell_width?l.multiselectWidth+l.cellLayout:l.multiselectWidth,labelClasses:"jqgh_cbox",classes:"td_cbox",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})}if(l.rownumbers&&(l.colNames.unshift(""),l.colModel.unshift({name:"rn",width:jgrid.cell_width?l.rownumWidth+l.cellLayout:l.rownumWidth,labelClasses:"jqgh_rn",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),l.iColByName=H(l.colModel),l.xmlReader=c(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},l.xmlReader),l.jsonReader=c(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},l.jsonReader),l.localReader=c(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},l.localReader),l.scroll&&(l.pgbuttons=!1,l.pginput=!1,l.rowList=[]),l.treeGrid===!0){try{t.setTreeGrid.call(s)}catch{}l.datatype!=="local"&&(l.localReader={id:"_id_"}),l.iPropByName=V(l.additionalProperties)}if(Z(),O(),l.data.length&&(_e.call(i),Oe.call(i)),l.shrinkToFit===!0&&l.forceFit===!0){for(je=l.colModel.length-1;je>=0;je--)if(l.colModel[je].hidden!==!0){l.colModel[je].resizable=!1;break}}var ke,He,nt,We,ft,Ee,Xe,st=[],Gt=[],rt=[],gt="<thead><tr class='ui-jqgrid-labels' role='row'>",pt,$t="<tbody><tr style='display:none;'>",jt=x("states.hover"),Tt=x("states.hoverTh")||jt,Dt=x("states.disabled");if(l.multiSort){st=l.sortname.split(",");var St;for(St=0;St<st.length;St++)rt=g(st[St]).split(" "),st[St]=g(rt[0]),Gt[St]=rt[1]?g(rt[1]):l.sortorder||"asc"}for(je=0;je<l.colNames.length;je++){switch(me=l.colModel[je],ft=l.headertitles||me.headerTitle?" title='"+stripHtml(typeof me.headerTitle=="string"?me.headerTitle:l.colNames[je])+"'":"",gt+="<th id='"+l.id+"_"+me.name+"' class='"+x("colHeaders","ui-th-column ui-th-"+X+" "+(me.labelClasses||""))+"'"+ft+">",ke=me.index||me.name,me.labelAlign){case"left":Ee="text-align:left;";break;case"right":Ee="text-align:right;";break;case"likeData":Ee=me.align===void 0||me.align==="left"?"text-align:left;":me.align==="right"?"text-align:right;":"";break;default:Ee=""}gt+="<div id='jqgh_"+l.id+"_"+me.name+"'"+(ie?" class='ui-th-div-ie'":"")+(Ee===""?"":" style='"+Ee+"'")+" role='columnheader'>",pt=me.autoResizable&&me.formatter!=="actions"||me.rotated?"<span class='"+l.autoResizing.wrapperClassName+"'>"+l.colNames[je]+"</span>":l.colNames[je],l.sortIconsBeforeText?(gt+=(l.builderSortIcons||jgrid.builderSortIcons).call(i,je),gt+=pt):(gt+=pt,gt+=(l.builderSortIcons||jgrid.builderSortIcons).call(i,je)),gt+="</div></th>",$t+="<td></td>",me.width=me.width?parseInt(me.width,10):150,typeof me.title!="boolean"&&(me.title=!0),me.lso="",ke===l.sortname&&(l.lastsort=je,me.lso=l.sortorder||me.firstsortorder||"asc"),l.multiSort&&(rt=h(ke,st),rt!==-1&&(me.lso=Gt[rt]))}gt+="</tr></thead>",$t+="</tr></tbody>";var Ct=$("<table class='"+x("hTable","ui-jqgrid-htable")+"' style='width:1px' role='presentation' aria-labelledby='gbox_"+l.id+"'>"+gt+$t+"</table>");if($(Ct[0].tHead).children("tr").children("th").hover(function(){$(this).addClass(Tt)},function(){$(this).removeClass(Tt)}),l.multiselect&&$(l.cb,Ct).on("click",function(){var D=x("states.select"),_,F=[],E=l.iColByName.cb,A=function(se,le){$(se)[le?"addClass":"removeClass"](D).attr(le?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"}),E!==void 0&&$(se.cells[E]).children("input.cbox").prop("checked",le)},M=I.fbRows,W=Dt+" ui-subgrid jqgroup jqfoot jqgfirstrow jqgskipselect",Y,L=l._index,ae;if(clearArray(l.selarrrow),this.checked){if(_=!0,l.selrow=i.rows.length>1?i.rows[i.rows.length-1].id:null,l.multiPageSelection&&(l.datatype==="local"||l.treeGrid)){if(l.selectAllMode==="filtered"&&l.lastSelectedData!=null&&l.lastSelectedData.length>0)for(l.selarrrow=[],ae=0;ae<l.lastSelectedData.length;ae++)l.lastSelectedData[ae].hasOwnProperty(l.localReader.id)&&l.selarrrow.push(l.idPrefix+l.lastSelectedData[ae][l.localReader.id]);else if(l.data!=null&&l.data.length>0&&L!=null)for(Y in L)L.hasOwnProperty(Y)&&l.selarrrow.push(l.idPrefix+Y)}}else _=!1,l.selrow=null;var $e=_?l.selarrrow:F;$(i.rows).each(function(se){hasOneFromClasses(this,W)||(A(this,_),$.inArray(this.id,$e)<0&&$e.push(this.id),M&&A(M[se],_))}),feedback.call(i,"onSelectAll",_?l.selarrrow:F,_)}),l.autowidth===!0){var Et=Math.floor($(re).innerWidth());l.width=Et>0?Et:"nw"}isNaN(l.width)?isNaN(parseFloat(l.width))||(l.width=parseFloat(l.width)):l.width=Number(l.width),l.widthOrg=l.width,qe(),$(re).css("width",I.width+"px").append("<div class='"+x("resizer","ui-jqgrid-resize-mark")+"' id='"+l.rsId+"'>&#160;</div>"),$(l.rs).on("selectstart",function(){return!1}).click(N).dblclick(function(D){var _=$(this).data("idx"),F=$(this).data("pageX"),E=l.colModel[_];if(F==null||E==null)return!1;var A=String(F).split(";"),M=parseFloat(A[0]),W=parseFloat(A[1]);return A.length===2&&(Math.abs(M-W)>5||Math.abs(D.pageX-M)>5||Math.abs(D.pageX-W)>5)||(feedback.call(i,"resizeDblClick",_,E,D)&&E.autoResizable&&t.autoResizeColumn.call(s,_),feedback.call(i,"afterResizeDblClick",{iCol:_,cm:E,cmName:E.name})),!1}),$(Q).css("width",I.width+"px");var Ft="";l.footerrow&&(Ft+="<table role='presentation' style='width:1px' class='"+x("gridFooter","ui-jqgrid-ftable")+"'><tbody><tr role='row' class='"+x("rowFooter","footrow footrow-"+X)+"'>");var Bt="<tr class='"+x("gridRow","jqgfirstrow ui-row-"+l.direction)+"' role='row' style='height:auto'>";if(l.disableClick=!1,$("th",Ct[0].tHead.rows[0]).each(function(D){var _=l.colModel[D],F=_.name,E=$(this),A=E.children("div"),M=A.children("span.s-ico"),W=l.showOneSortIcon;He=_.width,_.resizable===void 0&&(_.resizable=!0),_.resizable?(nt=document.createElement("span"),$(nt).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+X).on("selectstart",function(){return!1}),E.addClass(l.resizeclass)):nt="",E.css("width",He+"px").prepend(nt),nt=null;var Y="";if(_.hidden===!0&&(E.css("display","none"),Y="display:none;"),Bt+="<td role='gridcell' "+(_.classes?"class='"+_.classes+"' ":"")+"style='height:0;width:"+He+"px;"+Y+"'></td>",I.headers[D]={width:He,el:this},We=_.sortable,typeof We!="boolean"&&(_.sortable=!0,We=!0),!(F==="cb"||F==="subgrid"||F==="rn")&&We&&l.viewsortcols[2]&&A.addClass("ui-jqgrid-sortable"),We)if(l.multiSort){var L=_.lso==="desc"?"asc":"desc";l.viewsortcols[0]?(M.css("display",""),_.lso&&(M.children("span.ui-icon-"+_.lso).removeClass(Dt),W&&M.children("span.ui-icon-"+L).hide())):_.lso&&(M.css("display",""),M.children("span.ui-icon-"+_.lso).removeClass(Dt),W&&M.children("span.ui-icon-"+L).hide()),l.showSortOrder&&(rt=h(F,st),M[l.sortOrderPosition==="beforeSortIcons"?"before":"after"]("<span class='ui-jqgrid-sort-order'>"+(rt<0?"&nbsp;":u(l.formatSortOrder)?l.formatSortOrder.call(i,{cm:this,sortIndex:rt}):rt+1)+"</span>"))}else{var ae=l.sortorder==="desc"?"asc":"desc";l.viewsortcols[0]?(M.css("display",""),D===l.lastsort&&(M.children("span.ui-icon-"+l.sortorder).removeClass(Dt),W&&M.children("span.ui-icon-"+ae).hide())):D===l.lastsort&&_.lso!==""&&(M.css("display",""),M.children("span.ui-icon-"+l.sortorder).removeClass(Dt),W&&M.children("span.ui-icon-"+ae).hide())}l.footerrow&&(Ft+="<td role='gridcell' "+J(D,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(D){var _=$(this),F=_.closest(".ui-jqgrid-hdiv").hasClass("frozen-div"),E=function(){var M=[_.position().left+_.outerWidth()];return l.direction==="rtl"&&(M[0]=l.width-M[0]),M[0]-=F?0:I.bDiv.scrollLeft,M.push($(I.hDiv).position().top),M.push($(I.bDiv).offset().top-$(I.hDiv).offset().top+$(I.bDiv).height()+(I.sDiv?$(I.sDiv).height():0)),M},A;if($(D.target).closest("th>span.ui-jqgrid-resize").length===1)return A=Be(this),A!=null&&(l.forceFit===!0&&(l.nv=Ge(A)),I.dragStart(A,D,E(),_)),!1}).click(function(D){if(l.disableClick)return l.disableClick=!1,!1;var _="th.ui-th-column>div",F,E;l.viewsortcols[2]?_+=".ui-jqgrid-sortable":_+=">span.s-ico>span.ui-grid-ico-sort";var A=$(D.target).closest(_);if(A.length===1){l.viewsortcols[2]||(F=!0,E=A.hasClass("ui-icon-desc")?"asc":"desc");var M=Be(this);return M!=null&&de.call(i,$("div",this)[0].id.substring(5+l.id.length+1),M,F,E,this,D),!1}}),l.sortable&&u(t.sortableColumns))try{t.sortableColumns.call(s,$(Ct[0].tHead.rows[0]))}catch{}l.footerrow&&(Ft+="</tr></tbody></table>"),Bt+="</tr>",s.html("<tbody>"+Bt+"</tbody>"),s.addClass(x("grid","ui-jqgrid-btable"+(l.altRows===!0&&s.jqGrid("isBootstrapGuiStyle")?" table-striped":"")));var xt=!!(l.caption&&l.hiddengrid===!0),Ot=$("<div class='ui-jqgrid-hbox"+(X==="rtl"?"-rtl":"")+"'></div>"),Jt=x("top"),zt=x("bottom");if(I.hDiv=document.createElement("div"),$(I.hDiv).css({width:I.width+"px"}).addClass(x("hDiv","ui-jqgrid-hdiv")).append(Ot).scroll(function(){var D=$(this).next(".ui-jqgrid-bdiv")[0];return D&&(D.scrollLeft=this.scrollLeft),!1}),$(Ot).append(Ct),Ct=null,xt&&$(I.hDiv).hide(),l.rowNum=parseInt(l.rowNum,10),(isNaN(l.rowNum)||l.rowNum<=0)&&(l.rowNum=l.maxRowNum),l.pager){var qt,It;typeof l.pager=="string"&&l.pager.substr(0,1)!=="#"?(It=l.pager,qt=$("#"+jqID(l.pager))):l.pager===!0?(It=randId(),qt=$("<div id='"+It+"'></div>"),qt.appendTo("body"),l.pager="#"+jqID(It)):(qt=$(l.pager),It=qt.attr("id")),qt.length>0?(qt.css({width:I.width+"px"}).addClass(x("pager.pager","ui-jqgrid-pager "+zt)).appendTo(re),xt&&qt.hide(),K.call(i,It,""),l.pager="#"+jqID(It)):l.pager=""}l.cellEdit===!1&&l.hoverrows===!0&&s.on("mouseover.jqGrid",function(D){Xe=$(D.target).closest("tr.jqgrow"),$(Xe).attr("class")!=="ui-subgrid"&&$(Xe).addClass(jt)}).on("mouseout.jqGrid",function(D){Xe=$(D.target).closest("tr.jqgrow"),$(Xe).removeClass(jt)});var Lt=function(D){var _,F,E;do if(_=$(D).closest("td"),_.length>0){if(F=_.parent(),E=F.parent().parent(),F.is(".jqgrow")&&(E[0]===this||E.is("table.ui-jqgrid-btable")&&(E[0].id||"").replace("_frozen","")===this.id))break;D=_.parent()}while(_.length>0);return _};s.before(I.hDiv).click(function(D){var _=x("states.select"),F=D.target,E=Lt.call(i,F),A=E.parent();if(!(A.length===0||hasOneFromClasses(A,Dt))){var M=A[0].id,W=E[0].cellIndex,Y=$(F).hasClass("cbox")&&$(F).is(":enabled")&&!hasOneFromClasses(F,Dt),L=feedback.call(i,"beforeSelectRow",M,D),ae=!1,$e=jgrid.detectRowEditing.call(i,M),se=$e!=null&&$e.mode!=="cellEditing";if(!(F.tagName==="A"||se&&!Y)){if(feedback.call(i,"onCellSelect",M,W,E.html(),D),l.cellEdit===!0){if(L&&l.multiselect&&Y){if(m.call(s,M,!0,D),Y&&!l.noCellSelection)return;ae=!0}try{t.editCell.call(s,A[0].rowIndex,W,!0)}catch{}if(!l.multiselect||!l.noCellSelection||l.multiboxonly&&ae)return}if(!L){Y&&$(F).prop("checked",!1);return}if(l.multikey)D[l.multikey]&&!ae?m.call(s,M,!0,D):l.multiselect&&Y&&(Y=$("#jqg_"+jqID(l.id)+"_"+M).is(":checked"),$("#jqg_"+jqID(l.id)+"_"+M).prop("checked",!Y));else if(l.multiselect&&l.multiboxonly)if(Y&&!ae)m.call(s,M,!0,D);else{var le=l.frozenColumns?l.id+"_frozen":"";$(l.selarrrow).each(function(fe,ye){var Ce=t.getGridRowById.call(s,ye);Ce&&$(Ce).removeClass(_),$("#jqg_"+jqID(l.id)+"_"+jqID(ye)).prop("checked",!1),le&&($("#"+jqID(ye),"#"+jqID(le)).removeClass(_),$("#jqg_"+jqID(l.id)+"_"+jqID(ye),"#"+jqID(le)).prop("checked",!1))}),clearArray(l.selarrrow),ae||m.call(s,M,!0,D)}else{var ge=l.selrow;ae||m.call(s,M,!0,D),l.singleSelectClickMode==="toggle"&&!l.multiselect&&ge===M&&(i.grid.fbRows&&(A=A.add(i.grid.fbRows[A[0].rowIndex]===A[0]?i.rows[A[0].rowIndex]:i.grid.fbRows[A[0].rowIndex])),A.removeClass(_).attr({"aria-selected":"false",tabindex:"-1"}),l.selrow=null)}}}}).on("reloadGrid",function(D,_){var F=this,E=F.grid,A=$(this),M=F.p;if(M.savedRow.length>0&&M.reloadingDuringEditing==="prevent")return!1;if(M.treeGrid===!0&&(M.datatype=M.treedatatype),_=c({},defaults.reloadGridOptions||{},M.reloadGridOptions||{},_||{}),M.datatype==="local"&&M.dataTypeOrg&&M.loadonce&&_.fromServer&&(M.datatype=M.dataTypeOrg,delete M.dataTypeOrg),_.current&&E.selectionPreserver.call(F),M.datatype==="local"?(M.multiPageSelection||t.resetSelection.call(A),M.data.length&&(_e.call(F),Oe.call(F))):!M.treeGrid&&!M.multiPageSelection&&(M.selrow=null,M.multiselect&&(clearArray(M.selarrrow),De.call(F,!1)),clearArray(M.savedRow),M.editingInfo={}),U(M.reloadingDuringEditing),M.iRow=-1,M.iCol=-1,M.scroll&&I.emptyRows.call(F,!0,!1),_.page){var W=parseInt(_.page,10);W>M.lastpage&&(W=M.lastpage),W<1&&(W=1),M.page=W,E.prevRowHeight?E.bDiv.scrollTop=(W-1)*E.prevRowHeight*M.rowNum:E.bDiv.scrollTop=0}return E.prevRowHeight&&M.scroll&&_.page===void 0?(delete M.lastpage,E.populateVisible.call(F)):E.populate.call(F),M._inlinenav===!0&&A.jqGrid("showAddEditButtons",!1),!1}).dblclick(function(D){var _=Lt.call(i,D.target),F=_.parent();if(_.length>0&&!feedback.call(i,"ondblClickRow",F.attr("id"),F[0].rowIndex,_[0].cellIndex,D))return!1}).on("contextmenu",function(D){var _=Lt.call(i,D.target),F=_.parent(),E=F.attr("id");if(_.length!==0&&(!l.multiselect&&l.selrow!==E&&l.selectOnContextMenu===!0&&m.call(s,E,!0,D),!feedback.call(i,"onRightClickRow",E,F[0].rowIndex,_[0].cellIndex,D)))return!1}),I.bDiv=document.createElement("div"),ie&&String(l.height).toLowerCase()==="auto"&&(l.height="100%"),$(I.bDiv).append($("<div style='position:relative;'></div>").append("<div></div>").append(i)).addClass("ui-jqgrid-bdiv").css({height:l.height+(isNaN(l.height)?"":"px"),width:I.width+"px"}).scroll(I.scrollGrid),l.maxHeight&&$(I.bDiv).css("max-height",l.maxHeight+(isNaN(l.maxHeight)?"":"px")),s.css({width:"1px"}),$.support.tbody||$(">tbody",i).length===2&&$(">tbody:gt(0)",i).remove(),l.multikey&&$(I.bDiv).on(jgrid.msie?"selectstart":"mousedown",function(){return!1}),xt&&$(I.bDiv).hide(),I.cDiv=document.createElement("div");var Vt=w("gridMinimize.visible"),Kt=w("gridMinimize.hidden"),Zt=B("showhide"),Ht=l.hidegrid===!0?$("<a role='link' class='"+x("titleButton","ui-jqgrid-titlebar-close")+"'"+(Zt?" title='"+Zt+"'":"")+"/>").hover(function(){Ht.addClass(jt)},function(){Ht.removeClass(jt)}).append("<span class='"+Vt+"'></span>"):"";if($(I.cDiv).append("<span class='ui-jqgrid-title'>"+l.caption+"</span>").append(Ht).addClass(x("gridTitle","ui-jqgrid-titlebar ui-jqgrid-caption"+(X==="rtl"?"-rtl ":" ")+Jt)),$(I.cDiv).insertBefore(I.hDiv),l.toolbar[0]){I.uDiv=document.createElement("div"),l.toolbar[1]==="top"?$(I.uDiv).insertBefore(I.hDiv):l.toolbar[1]==="bottom"&&$(I.uDiv).insertAfter(I.hDiv);var ei=x("toolbarUpper","ui-userdata");l.toolbar[1]==="both"?(I.ubDiv=document.createElement("div"),$(I.uDiv).addClass(ei).attr("id","t_"+l.id).insertBefore(I.hDiv),$(I.ubDiv).addClass(x("toolbarBottom","ui-userdata")).attr("id","tb_"+l.id).insertAfter(I.hDiv),xt&&$(I.ubDiv).hide()):$(I.uDiv).width(I.width).addClass(ei).attr("id","t_"+l.id),xt&&$(I.uDiv).hide()}if(typeof l.datatype=="string"&&(l.datatype=l.datatype.toLowerCase()),l.toppager?(l.toppager=l.id+"_toppager",I.topDiv=$("<div id='"+l.toppager+"'></div>")[0],$(I.topDiv).addClass(x("pager.pager","ui-jqgrid-toppager"+(l.caption?"":" "+Jt))).css({width:I.width+"px"}).insertBefore(I.hDiv),K.call(i,l.toppager,"_t"),l.toppager="#"+jqID(l.toppager)):l.pager===""&&!l.scroll&&(l.rowNum=l.maxRowNum),l.footerrow&&(I.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],Ot=$("<div class='ui-jqgrid-hbox"+(X==="rtl"?"-rtl":"")+"'></div>"),$(I.sDiv).append(Ot).width(I.width).insertAfter(I.hDiv),$(Ot).append(Ft),I.footers=$(".ui-jqgrid-ftable",I.sDiv)[0].rows[0].cells,l.rownumbers&&(I.footers[0].className=x("rowNum","jqgrid-rownum")),xt&&$(I.sDiv).hide()),Ot=null,l.caption){var ri=l.datatype;l.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",I.cDiv).click(function(D){var _=".ui-jqgrid-bdiv,.ui-jqgrid-hdiv,.ui-jqgrid-pager,.ui-jqgrid-sdiv",F=this;l.toolbar[0]===!0&&(l.toolbar[1]==="both"&&(_+=",#"+jqID($(I.ubDiv).attr("id"))),_+=",#"+jqID($(I.uDiv).attr("id")));var E=$(_,l.gView).length;return l.toppager&&(_+=","+l.toppager),l.gridstate==="visible"?$(_,l.gBox).slideUp("fast",function(){E--,E===0&&($("span",F).removeClass(Vt).addClass(Kt),l.gridstate="hidden",$(l.gBox).hasClass("ui-resizable")&&$(".ui-resizable-handle",l.gBox).hide(),$(I.cDiv).addClass(zt),xt||feedback.call(i,"onHeaderClick",l.gridstate,D))}):l.gridstate==="hidden"&&($(I.cDiv).removeClass(zt),$(_,l.gBox).slideDown("fast",function(){E--,E===0&&($("span",F).removeClass(Kt).addClass(Vt),xt&&(l.datatype=ri,Le.call(i),xt=!1),l.gridstate="visible",$(l.gBox).hasClass("ui-resizable")&&$(".ui-resizable-handle",l.gBox).show(),xt||feedback.call(i,"onHeaderClick",l.gridstate,D))})),!1}),xt&&(l.datatype="local",$(".ui-jqgrid-titlebar-close",I.cDiv).trigger("click")))}else $(I.cDiv).hide(),$(I.cDiv).nextAll("div:visible").first().addClass("ui-corner-top");$(I.hDiv).after(I.bDiv),I.eDiv=$("<div class='"+x("gridError","ui-jqgrid-errorbar ui-jqgrid-errorbar-"+X)+"' style='display:none;'><span class='"+x("gridErrorText","ui-jqgrid-error")+"'></span></div>")[0],$(I.hDiv).after(I.eDiv),$(re).click(N).dblclick(function(D){var _=$(l.rs),F=_.offset(),E=_.data("idx"),A=_.data("delta"),M=l.colModel[E],W=$(this).data("pageX")||_.data("pageX");if(W==null||M==null)return!1;var Y=String(W).split(";"),L=parseFloat(Y[0]),ae=parseFloat(Y[1]);return Y.length===2&&(Math.abs(L-ae)>5||Math.abs(D.pageX-L)>5||Math.abs(D.pageX-ae)>5)||(feedback.call(i,"resizeDblClick",E,M)&&F.left-1<=D.pageX+A&&D.pageX+A<=F.left+_.outerWidth()+1&&M.autoResizable&&t.autoResizeColumn.call(s,E),feedback.call(i,"afterResizeDblClick",{iCol:E,cm:M,cmName:M.name})),!1}),l.pager||$(I.cDiv).nextAll("div:visible").filter(":last").addClass(zt),$(".ui-jqgrid-labels",I.hDiv).on("selectstart",function(){return!1}),i.formatCol=J,i.sortData=de,i.updatepager=lt,i.refreshIndex=Oe,i.addItemDataToColumnIndex=ue,i.removeItemDataFromColumnIndex=ve,i.generateValueFromColumnIndex=function(D,_,F){var E=$(this).jqGrid("getUniqueValueFromColumnIndex",D),A="",M,W;if(E!=null)for(F=F||";",_=_||":",M=0,W=E.length;M<W;M++)A!==""&&(A+=F||";"),A+=E[M]+(_||":")+E[M];return A},i.setHeadCheckBox=De,i.fixScrollOffsetAndhBoxPadding=T,i.constructTr=Ie,i.formatter=Fe,c(I,{populate:Le,emptyRows:be,beginReq:dt,endReq:it}),i.addXmlData=Ve,i.addJSONData=Ve,i.rebuildRowIndexes=k,i.grid.cols=i.rows[0].cells,feedback.call(i,"onInitGrid"),l.treeGrid&&l.datatype==="local"&&l.data!=null&&l.data.length>0&&(l.datatype="jsonstring",l.datastr=l.data,l.data=[]),Le.call(i),l.hiddengrid=!1}})};var base=$.fn.jqGrid;jgrid.extend({getGridRes:function(e){var t=this[0];if(!t||!t.grid||!t.p)return null;var r=jgrid.getRes(locales[t.p.locale],e)||jgrid.getRes(locales["en-US"],e),i=jgrid.getRes(jgrid,e);return typeof r=="object"&&r!==null&&!$.isArray(r)?$.extend(!0,{},r,i||{}):i!==void 0?i:r},getGuiStyles:function(e,t){var r=this instanceof $&&this.length>0?this[0]:this;if(!r||!r.grid||!r.p)return"";var i=r.p,a=i.guiStyle||jgrid.defaults.guiStyle||"jQueryUI",o=jgrid.getRes(jgrid.guiStyles[a],e),s;return o===void 0&&(s=jgrid.getRes(jgrid.guiStyles[a],"baseGuiStyle"),typeof s=="string"&&(o=jgrid.getRes(jgrid.guiStyles[s],e))),jgrid.mergeCssClasses(o||"",t||"")},isBootstrapGuiStyle:function(){return $.inArray("ui-jqgrid-bootstrap",$(this).jqGrid("getGuiStyles","gBox").split(" "))>=0},displayErrorMessage:function(e){var t=this instanceof $&&this.length>0?this[0]:this;if(!(!t||!t.grid||!t.p||!e)){var r=$(t.grid.eDiv),i=r.children(".ui-jqgrid-error");i.html(e),r.show(),t.p.errorDisplayTimeout&&setTimeout(function(){i.empty(),r.hide()},t.p.errorDisplayTimeout)}},getIconRes:function(e){var t=this instanceof $&&this.length>0?this[0]:this;if(!t||!t.p)return"";var r=t.p,i=jgrid.icons[r.iconSet],a=function(s,u,f){var c=u.split("."),h,g=c.length,p,m,b=[];if(s=typeof s=="string"?jgrid.icons[s]:s,s==null)return"";for(h=s,h.common?b.push(h.common):f&&f.common&&b.push(f.common),m=0;m<g&&(p=c[m],!!p);m++){if(m+1===g&&h.ignoreParents&&(b=[]),h=h[p],h===void 0){if(p==="common")break;return""}if(typeof h=="string"){b.push(h);break}h!=null&&h.common&&b.push(h.common)}return jgrid.mergeCssClasses.apply(this,b)};if(i==null)return"";var o=a(r.iconSet,e);return o===""&&i.baseIconSet!=null&&(o=a(i.baseIconSet,e,jgrid.icons[r.iconSet])),o||""},isInCommonIconClass:function(e){var t=this instanceof $&&this.length>0?this[0]:this;if(!t||!t.p)return"";var r=t.p,i=jgrid.icons[r.iconSet];if(i==null)return!1;var a=i.common;if(a===void 0){if(i.baseIconSet==null||(i=jgrid.icons[i.baseIconSet],i==null))return!1;a=i.common}return typeof a=="string"&&$.inArray(e,a.split(" "))>=0},getUniqueValueFromColumnIndex:function(e){var t=this[0];if(!t||!t.grid)return null;var r=[],i="",a,o=t.p.indexByColumnData[e];if(o!=null){for(i in o)if(o.hasOwnProperty(i)){for(a in o[i])if(o[i].hasOwnProperty(a)){i=String(o[i][a]);break}r.push(i)}t.p.ignoreCase?typeof String.prototype.localeCompare>"u"?r.sort(function(s,u){var f=s.toLowerCase(),c=u.toLowerCase();return f===c?0:f>c?1:-1}):r.sort(function(s,u){return String(s).toLowerCase().localeCompare(String(u).toLowerCase())}):r.sort()}return r},generateDatalistFromColumnIndex:function(e){if(!this[0]||!this[0].grid)return null;var t=this.jqGrid("getUniqueValueFromColumnIndex",e),r,i,a=$("<datalist></datalist>");if(t!=null&&t.length>0)for(r=0,i=t.length;r<i;r++)a.append($("<option></option>").attr("value",t[r]));else return $();return a},getGridParam:function(e){var t=this[0];return!t||!t.grid?null:e?t.p[e]!==void 0?t.p[e]:null:t.p},setGridParam:function(e,t){return this.each(function(){var r=this;t==null&&(t=!1),r.grid&&typeof e=="object"&&(t===!0?$.extend(r.p,e):$.extend(!0,r.p,e))})},abortAjaxRequest:function(){return this.each(function(){var e=this;e.p.jqXhr!=null&&e.p.jqXhr.abort(),e.grid.endReq.call(e)})},getGridRowById:function(e){if(e==null)return null;var t,r=e.toString();return this.each(function(){var i,a=this.rows,o,s;if(this.p.rowIndexes!=null&&(s=this.p.rowIndexes[r],o=a[s],o&&o.id===r&&(t=o)),!t)try{for(i=a.length;i--;)if(o=a[i],r===o.id){t=o;break}}catch{t=$(this.grid.bDiv).find("#"+jqID(e)),t=t.length>0?t[0]:null}}),t},getDataIDs:function(){var e=[];return this.each(function(){var t=this.rows,r=t.length,i,a;if(r&&r>0)for(i=0;i<r;i++)a=t[i],$(a).hasClass("jqgrow")&&e.push(a.id)}),e},setSelection:function(e,t,r){return this.each(function(){var i=this,a=$(i),o=i.p,s,u,f,c,h,g,p,m,b=base.getGuiStyles,v=base.getGridRowById,j=b.call(a,"states.select"),y=b.call(a,"states.disabled"),S=i.grid.fbRows,C=function(x,G){var l=G?"addClass":"removeClass",R=o.iColByName.cb,B=G?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"},T=function(H){$(H)[l](j).attr(B),R!==void 0&&$(H.cells[R]).children("input.cbox").prop("checked",G)};T(x),S&&T(S[x.rowIndex])};if(e===void 0||(t=t!==!1,r!=null&&(p=$(r.target).closest("tr.jqgrow"),p.length>0&&(u=p[0],S&&(u=i.rows[u.rowIndex]))),u==null&&(u=v.call(a,e)),!u||!u.className||u.className.indexOf(y)>-1))return;function w(x,G){var l=G.clientHeight,R=G.scrollTop,B=$(x).position().top,T=x.clientHeight;B+T>=l+R?G.scrollTop=B-(l+R)+T+R:B<l+R&&B<R&&(G.scrollTop=B)}o.scrollrows===!0&&(f=v.call(a,e),f!=null&&(f=f.rowIndex,f>=0&&w(i.rows[f],i.grid.bDiv))),o.multiselect?(i.setHeadCheckBox(!1),o.selrow=u.id,m=jgrid.detectRowEditing.call(i,u.id),c=$.inArray(o.selrow,o.selarrrow),c===-1?(s=!0,o.selarrrow.push(o.selrow)):m!==null&&(m.mode==="inlineEditing"||!$(r.target).hasClass("cbox"))?s=!0:(s=!1,o.selarrrow.splice(c,1),h=o.selarrrow[0],o.selrow=h===void 0?null:h),u.className!=="ui-subgrid"&&C(u,s),t&&feedback.call(i,"onSelectRow",u.id,s,r||{})):u.className!=="ui-subgrid"&&(o.selrow!==u.id?(o.selrow!==null&&(g=v.call(a,o.selrow),g&&C(g,!1)),C(u,!0),s=!0):s=!1,o.selrow=u.id,t&&feedback.call(i,"onSelectRow",u.id,s,r||{}))})},resetSelection:function(e){return this.each(function(){var t=this,r=$(this),i=t.p,a,o=base.getGuiStyles,s=base.getGridRowById,u=o.call(r,"states.select"),f="edit-cell "+u,c="selected-row "+o.call(r,"states.hover"),h=i.iColByName.cb,g=h!==void 0,p=t.grid.fbRows,m=function(v){var j="removeClass",y,S={"aria-selected":"false",tabindex:"-1"};$(v)[j](u).attr(S),g&&$(v.cells[h]).children("input.cbox").prop("checked",!1),p&&(y=p[v.rowIndex],$(y)[j](u).attr(S),g&&$(y.cells[h]).children("input.cbox").prop("checked",!1))};if(e!==void 0){if(a=s.call(r,e),m(a),g){t.setHeadCheckBox(!1);var b=$.inArray(e,i.selarrrow);b!==-1&&i.selarrrow.splice(b,1)}}else i.multiselect?($(t.rows).each(function(){var v=$.inArray(this.id,i.selarrrow);v!==-1&&(m(this),i.selarrrow.splice(v,1))}),t.setHeadCheckBox(!1),i.multiPageSelection||clearArray(i.selarrrow),i.selrow=null):i.selrow&&(a=s.call(r,i.selrow),m(a),i.selrow=null);i.cellEdit===!0&&parseInt(i.iCol,10)>=0&&parseInt(i.iRow,10)>=0&&(a=t.rows[i.iRow],a!=null&&($(a.cells[i.iCol]).removeClass(f),$(a).removeClass(c)),p&&(a=p[i.iRow],a!=null&&($(a.cells[i.iCol]).removeClass(f),$(a).removeClass(c))))})},isCellEditing:function(e,t,r){var i=this[0],a=jgrid.detectRowEditing.call(i,e);if(a!=null&&(a.mode==="inlineEditing"||a.mode==="cellEditing"&&a.savedRow.ic===t)){t=isNaN(t)?i.p.iColByName[t]:parseInt(t,10);var o=r!=null&&r.id===e?r:base.getGridRowById.call($(i),e),s=i.p.colModel[t],u=s.editable;if($.isFunction(u)&&(u=u.call(i,{rowid:e,id:stripPref(i.p.idPrefix,e),iCol:t,iRow:o.rowIndex,cmName:s.name,cm:s,mode:a.mode,td:o.cells[t],tr:o,dataElement:jgrid.getDataFieldOfCell.call(i,o,t)[0]})),u===!0)return!0}return!1},getRowData:function(e,t){var r={},i;return typeof e=="object"&&(t=e,e=void 0),t=t||{},this.each(function(){var a=this,o=a.p,s=!1,u,f=1,c,h=a.rows,g,p,m,b,v;if(e===void 0)s=!0,i=[],f=h.length;else if(u=base.getGridRowById.call($(a),e),!u)return r;for(c=0;c<f;c++)if(s&&(u=h[c]),$(u).hasClass("jqgrow")){for(jgrid.detectRowEditing.call(a,e),p=$(u).find("td[role=gridcell]"),g=0;g<p.length;g++)if(m=o.colModel[g],b=m.name,$.inArray(b,o.reservedColumnNames)<0&&m.formatter!=="actions"&&(!t.skipHidden||!m.hidden))if(v=p[g],base.isCellEditing.call($(a),e,g,u))r[b]=jgrid.getEditedValue.call(a,jgrid.getDataFieldOfCell.call(a,u,g),m,{},m.editable);else if(o.treeGrid===!0&&b===o.ExpandColumn)r[b]=htmlDecode($("span",v).first().html());else try{r[b]=$.unformat.call(a,v,{rowId:e,colModel:m},g)}catch{r[b]=htmlDecode($(v).html())}t.includeId&&(o.keyName===!1||r[o.keyName]==null)&&(r[o.prmNames.id]=stripPref(o.idPrefix,u.id)),s&&(i.push(r),r={})}}),i||r},delRowData:function(e){var t=!1;return this.each(function(){var r=this,i=r.p,a=$.jgrid.detectRowEditing.call(r,e),o,s,u;if(o=base.getGridRowById.call($(r),e),!o)return!1;if(i.subGrid&&(u=$(o).next(),u.hasClass("ui-subgrid")&&u.remove()),a!=null)try{a.mode==="inlineEditing"&&base.restoreRow!=null?base.restoreRow.call($(r),e):a.mode==="cellEditing"&&base.restoreCell!=null&&base.restoreCell.call($(r),a.savedRow.id,a.savedRow.ic)}catch{}if(o.rowIndex===i.iRow&&(i.iRow=-1,i.iCol=-1),$(o).remove(),i.records--,i.reccount--,r.updatepager(!0,!1),t=!0,i.multiselect&&(s=$.inArray(e,i.selarrrow),s!==-1&&i.selarrrow.splice(s,1)),i.multiselect&&i.selarrrow.length>0?i.selrow=i.selarrrow[i.selarrrow.length-1]:i.selrow===e&&(i.selrow=null),i.datatype==="local"){var f=stripPref(i.idPrefix,e),c=i._index[f];c!==void 0&&(r.removeItemDataFromColumnIndex(f),i.data.splice(c,1),r.refreshIndex())}if(r.rebuildRowIndexes(),i.altRows===!0&&t&&!$(r).jqGrid("isBootstrapGuiStyle")){var h=i.altclass,g=r.grid.fbRows;$(r.rows).each(function(p){var m=$(this);g&&(m=m.add(g[this.rowIndex])),m[p%2===0?"addClass":"removeClass"](h)})}feedback.call(r,"afterDelRow",e)}),t},setRowData:function(e,t,r){var i=!0;return this.each(function(){var a=this,o=a.p,s,u=typeof r,f={};if(!a.grid||(s=base.getGridRowById.call($(a),e),!s))return!1;if(t)try{var c=stripPref(o.idPrefix,e),h,g=o._index[c],p={},m=g!=null?o.data[g]:void 0;if($(o.colModel).each(function(b){var v=this,j=v.name,y=getAccessor(t,j);y!==void 0&&(o.datatype==="local"&&m!=null&&(y=convertOnSaveLocally.call(a,y,v,m[j],c,m,b),$.isFunction(v.saveLocally)?v.saveLocally.call(a,{newValue:y,newItem:f,oldItem:m,id:c,cm:v,cmName:j,iCol:b}):f[j]=y),p[j]=y)}),$(o.colModel).each(function(b){var v=this,j=v.name,y,S=getAccessor(t,j),C=$(s.cells[b]);if(S!==void 0){o.datatype==="local"&&m!=null&&(S=f[j]),y=v.title?{title:S}:{},S=a.formatter(e,S,b,t,"edit",p),v.formatter==="select"&&(y=v.title?{title:stripHtml(S)}:{});var w=C;o.treeGrid===!0&&j===o.ExpandColumn&&(w=w.children("span.cell-wrapperleaf,span.cell-wrapper").first()),w.html(S),C.attr(y),o.frozenColumns&&(w=$(a.grid.fbRows[s.rowIndex].cells[b]),o.treeGrid===!0&&j===o.ExpandColumn&&(w=w.children("span.cell-wrapperleaf,span.cell-wrapper").first()),w.html(S).attr(y))}}),o.datatype==="local"){if(o.treeGrid)for(h in o.treeReader)o.treeReader.hasOwnProperty(h)&&delete f[o.treeReader[h]];m!==void 0&&(o.data[g]=$.extend(!0,m,f),a.removeItemDataFromColumnIndex(c),a.addItemDataToColumnIndex(o.data[g],c))}feedback.call(a,"afterSetRow",{rowid:e,inputData:t,iData:g,iRow:s.rowIndex,tr:s,localData:f,cssProp:r})}catch{i=!1}i&&(u==="string"?$(s).addClass(r):r!==null&&u==="object"&&$(s).css(r))}),i},changeRowid:function(e,t){return this.each(function(){var r=this,i=$(r),a=r.p,o,s,u,f,c,h,g;if(!(!r.grid||!a||e===t)&&(f=i.jqGrid("getGridRowById",e),!(!f||i.jqGrid("getGridRowById",t)!=null))){var p=jgrid.stripPref(a.idPrefix,e),m=jgrid.stripPref(a.idPrefix,t),b=a.keyName===!1?a.prmNames.id:a.keyName,v=function(){var j=this.id,y=j.length-p.length;y>0&&j.substr(y)===p&&$(this).attr("id",j.substr(0,y)+m)};for(a.iColByName[b]>=0&&i.jqGrid("setCell",e,b,m),a.datatype==="local"&&a._index[p]!==void 0&&(a._index[m]=a._index[p],o=a.data[a._index[p]],delete a._index[p],o.hasOwnProperty(b)&&(o[b]=m)),a.rowIndexes[t]=f.rowIndex,delete a.rowIndexes[e],c=r.grid.fbRows==null?$(f):$(f).add(r.grid.fbRows[f.rowIndex]),c.attr("id",t),a.selrow===e&&(a.selrow=t),$.isArray(a.selarrrow)&&(s=$.inArray(e,a.selarrrow),s>=0&&(a.selarrrow[s]=t)),a.multiselect&&(u="jqg_"+a.id+"_"+t,c.find("input.cbox").attr("id",u).attr("name",u)),s=0;s<a.colModel.length;s++)h=a.colModel[s],h.formatter==="actions"?c.find(".ui-jqgrid-actions .ui-pg-div").each(v):(h.formatter==="showlink"||h.unformat!=null&&h.formatter!=null)&&(g=i.jqGrid("getCell",t,s),i.jqGrid("setCell",t,s,g,!1,!1,!0));feedback.call(r,"afterChangeRowid",{rowid:t,oldRowid:e,iRow:f.rowIndex,tr:f})}})},addRowData:function(e,t,r,i){$.inArray(r,["first","last","before","after","afterSelected","beforeSelected"])<0&&(r="last");var a=!1,o,s,u,f,c,h,g,p,m,b,v;return t&&($.isArray(t)?(h=!0,g=e):(t=[t],h=!1),this.each(function(){var j=this,y=j.p,S=t.length,C=$(j),w=j.rows,x=0,G=base.getGridRowById,l=y.colModel,R,B=y.additionalProperties,T;for(h||(e!==void 0?e=String(e):(e=randId(),y.keyName!==!1&&(g=y.keyName,t[0][g]!==void 0&&(e=t[0][g])))),p=y.altclass;x<S;){if(m=t[x],s=[],h)try{e=m[g],e===void 0&&(e=randId())}catch{e=randId()}for(v=jgrid.stripPref(y.idPrefix,e),R={},f=0;f<l.length;f++)b=l[f],o=b.name,o!=="rn"&&o!=="cb"&&o!=="subgrid"&&(c=convertOnSaveLocally.call(j,m[o],b,void 0,v,{},f),$.isFunction(b.saveLocally)?b.saveLocally.call(j,{newValue:c,newItem:R,oldItem:{},id:v,rowid:e,cm:b,cmName:o,iCol:f}):c!==void 0&&(R[o]=c));for(f=0;f<B.length;f++)o=B[f],typeof o=="object"&&o.hasOwnProperty("name")&&(o=o.name),c=getAccessor(m,o),c!==void 0&&(R[o]=c);if(y.datatype==="local"&&(R[y.localReader.id]=v,y._index[v]=y.data.length,y.data.push(R),j.addItemDataToColumnIndex(R,v)),T=y.grouping,y.grouping=!1,s=jgrid.parseDataToHtml.call(j,1,[e],[m]),y.grouping=T,s=s.join(""),w.length===0)$(j.tBodies[0]).append(s);else switch((r==="afterSelected"||r==="beforeSelected")&&(i===void 0&&y.selrow!==null?(i=y.selrow,r=r==="afterSelected"?"after":"before"):r=r==="afterSelected"?"last":"first"),r){case"last":$(w[w.length-1]).after(s),u=w.length-1;break;case"first":$(w[0]).after(s),u=1;break;case"after":u=G.call(C,i),u&&($(w[u.rowIndex+1]).hasClass("ui-subgrid")?($(w[u.rowIndex+1]).after(s),u=u.rowIndex+2):($(u).after(s),u=u.rowIndex+1));break;case"before":u=G.call(C,i),u&&($(u).before(s),u=u.rowIndex-1);break}y.subGrid===!0&&base.addSubGrid.call(C,y.iColByName.subgrid,u),y.records++,y.reccount++,y.lastpage===0&&(y.lastpage=1),feedback.call(j,"afterAddRow",{rowid:e,inputData:t,position:r,srcRowid:i,iRow:u,tr:w[u],localData:R,iData:y.data.length-1}),x++}y.altRows===!0&&!h&&!C.jqGrid("isBootstrapGuiStyle")&&(r==="last"?(w.length-1)%2===0&&$(w[w.length-1]).addClass(p):$(w).each(function(H){H%2===1?$(this).addClass(p):$(this).removeClass(p)})),j.rebuildRowIndexes(),j.updatepager(!0,!0),a=!0})),a},footerData:function(e,t,r){var i=!1,a={};function o(s){var u;for(u in s)if(s.hasOwnProperty(u))return!1;return!0}return e==null&&(e="get"),typeof r!="boolean"&&(r=!0),e=e.toLowerCase(),this.each(function(){var s=this,u=s.p,f,c,h,g;if(!s.grid||!u.footerrow||e==="set"&&o(t))return!1;i=!0;var p=$(s.grid.sDiv).children(".ui-jqgrid-hbox"+(u.direction==="rtl"?"-rtl":"")).children(".ui-jqgrid-ftable")[0];if(p==null||p.rows==null)return!1;var m=p.rows[0].cells,b=u.colModel,v=s.grid.fsDiv==null?{}:s.grid.fsDiv.children(".ui-jqgrid-ftable")[0].rows[0].cells;if(e==="get")for(g=0;g<b.length;g++)h=b[g].name,$.inArray(h,u.reservedColumnNames)<0&&(t!==!1?(f=$(m[g]).text(),$.trim(f)&&(a[h]=f)):a[h]=$(m[g]).html());else if(e==="set")for(h in t)g=u.iColByName[h],t.hasOwnProperty(h)&&g!==void 0&&(f=r?s.formatter("",t[h],g,t,"edit"):t[h],c=$(m[g]).add(v[g]),c.html(f),b[g].title&&c.attr({title:stripHtml(f)}))}),e==="get"?a:i},resetColumnResizerHeight:function(){return this.each(function(){if($.jgrid.msie){var e,t,r,i=this.grid.headers,a;for(r=0;r<i.length;r++)e=$(i[r].el),a=e.height(),a&&(t=e.children(".ui-jqgrid-resize"),t.length>0&&Math.abs(a-t.height())>.5&&e.children(".ui-jqgrid-resize").height(a))}})},rotateColumnHeaders:function(e,t){return this.each(function(){var r=$(this),i=this.p,a,o,s,u,f,c,h,g,p,m,b,v,j,y,S,C,w=i.frozenColumns&&$.isFunction(base.getNumberOfFrozenColumns)?r.jqGrid("getNumberOfFrozenColumns"):0,x=function(){g.detach(),m.detach()},G=function(){h.each(function(l){l<g.length&&$(this).append(g[l]),l<m.length&&$(this).append(m[l])})};for($.isArray(e)||(e=[e]),a=0;a<e.length;a++)c=e[a],o=isNaN(c)?i.iColByName[c]:parseInt(c,10),o>=0&&(s=this.grid.headers[o].el,u=o<w?$(s).add($(this.grid.fhDiv.find("#"+jqID(s.id)))):$(s),h=u.children("div"),g=h.children("span.s-ico"),m=h.children("span.ui-jqgrid-sort-order"),p=h.children("span."+i.autoResizing.wrapperClassName),p.length<1&&(x(),h.wrapInner("<span class='"+i.autoResizing.wrapperClassName+"'></span>"),p=h.children("span."+i.autoResizing.wrapperClassName),G()),b=g.outerWidth(!0),v=p.outerWidth(),S=parseFloat(u.css("padding-top")||0),C=parseFloat(u.css("padding-bottom")||0),j=parseFloat(u.css("padding-left")||0),y=parseFloat(u.css("padding-right")||0),i.showSortOrder&&(b+=b*.5),f=t===void 0||t===0?v+b+j+y:t,u.height(f),u.css({paddingTop:y+"px",paddingBottom:j+"px",paddingLeft:S+"px",paddingRight:C+"px"}),h.css("min-width",f-j-y+"px").addClass("ui-jqgrid-rotate").css({bottom:0}),i.colModel[o].rotated=!0);r.jqGrid("resetColumnResizerHeight"),i.frozenColumns&&setTimeout(function(){r.triggerHandler("jqGridResetFrozenHeights",{header:{resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:-1,iRowEnd:-1}}})},0)})},showHideCol:function(e,t,r){return this.each(function(){var i=this,a=$(i),o=i.grid,s=!1,u=i.p,f=jgrid.cell_width?0:u.cellLayout,c;if(o){typeof e=="string"&&(e=[e]),t=t!=="none"&&t!==!1?"":"none",r=r||{};var h=t==="",g=u.groupHeader,p=g&&(typeof g=="object"||$.isFunction(g));if(p&&!r.skipSetGroupHeaders&&base.destroyGroupHeader.call(a,!1),$(u.colModel).each(function(j){var y=function(S){var C,w,x,G,l,R,B,T,H,P,V,k,O,N,z;for(C=0,w=S.length;C<w;C++)x=S[C],G=x.cells[j],(!$(x).hasClass("jqgroup")||G!=null&&G.colSpan===1)&&(l=$(G),C===0&&$(x).hasClass("jqgfirstrow")?(l.css("height","1px"),l.css("display",t),l.css("height","0")):l.css("display",t),h&&G!=null&&G.tagName.toUpperCase()==="TH"&&l.hasClass("ui-th-column")&&(R=l.children("div"),R.hasClass("ui-jqgrid-rotate")&&(B=R.children("span.s-ico"),T=R.children("span."+u.autoResizing.wrapperClassName),T.outerHeight(),H=T.outerWidth(),B.outerHeight(),P=B.outerWidth(!0),T.length>0&&(k=parseFloat(l.css("padding-top")||0),O=parseFloat(l.css("padding-bottom")||0),N=parseFloat(l.css("padding-left")||0),z=parseFloat(l.css("padding-right")||0),u.showSortOrder&&(P+=P*.5),V=H+P+N+z,l.height(V),l.css({paddingTop:z+"px",paddingBottom:N+"px",paddingLeft:k+"px",paddingRight:O+"px"}),R.css("min-width",V-N-z+"px").css({bottom:0})))))};if($.inArray(this.name,e)!==-1&&this.hidden===h){if(u.frozenColumns===!0&&this.frozen===!0&&!r.notSkipFrozen)return!0;y($(o.hDiv).find(".ui-jqgrid-htable>thead>tr")),u.frozenColumns===!0&&o.fhDiv!=null&&y($(o.fhDiv).find(".ui-jqgrid-htable>thead>tr")),y(i.rows),u.frozenColumns===!0&&o.fbRows!=null&&y(i.rows),u.footerrow&&(y($(o.sDiv).find("tr.footrow")),u.frozenColumns===!0&&o.fsDiv!=null&&y($(o.fsDiv).find("tr.footrow"))),c=parseInt(this.width,10),t==="none"?u.tblwidth-=c+f:u.tblwidth+=c+f,this.hidden=!h,s=!0,r.skipFeedback?(r.toReport=r.toReport||{},r.toReport[this.name]=h):feedback.call(i,"onShowHideCol",h,this.name,j,r)}}),s===!0){var m=!u.autowidth&&(u.widthOrg===void 0||u.widthOrg==="auto"||u.widthOrg==="100%")?u.tblwidth+parseInt(u.scrollOffset,10):u.width;r.skipSetGridWidth?r.newGridWidth=m:base.setGridWidth.call(a,m)}if(p&&!r.skipSetGroupHeaders)if(u.pivotOptions!=null&&u.pivotOptions.colHeaders!=null&&u.pivotOptions.colHeaders.length>1){var b,v=u.pivotOptions.colHeaders;for(b=0;b<v.length;b++)v[b]&&v[b].groupHeaders.length&&base.setGroupHeaders.call(a,v[b])}else base.setGroupHeaders.call(a,u.groupHeader)}})},hideCol:function(e,t){return this.each(function(){base.showHideCol.call($(this),e,"none",t)})},showCol:function(e,t){return this.each(function(){base.showHideCol.call($(this),e,"",t)})},remapColumns:function(e,t,r){var i=this[0],a=i.p,o=i.grid,s,u,f=$.makeArray,c=a.frozenColumns===!0,h,g=this.jqGrid("getNumberOfFrozenColumns"),p;function m(){var j=[],y=[],S,C=e.length;for(S=0;S<C;S++)c&&e[S]<g?j.push(e[S]):y.push(e[S]);return j.concat(y)}function b(j){var y=j.length?f(j):$.extend({},j);$.each(p,function(S){j[S]=y[this]})}function v(j,y){var S=y?j.children(y):j.children();S.each(function(){var C=this,w=f(C.cells);$.each(p,function(x){var G=w[this],l=C.cells[x];G!=null&&l!=null&&G.cellIndex!==x&&G.parentNode.insertBefore(G,l)})})}if(!(o==null||a==null)){for(p=m(),b(a.colModel),b(a.colNames),b(o.headers),h=$(o.hDiv).children("div").children("table.ui-jqgrid-htable").children("thead"),c&&o.fhDiv!=null&&(h=h.add(o.fhDiv.children("table.ui-jqgrid-htable").children("thead"))),v(h,r&&":not(.ui-jqgrid-labels)"),t&&(h=$(i.tBodies[0]),c&&o.fbDiv!=null&&(h=h.add(o.fbDiv.children("table.ui-jqgrid-btable").children("tbody").first())),v(h,"tr.jqgfirstrow,tr.jqgrow,tr.jqfoot")),a.footerrow&&(h=$(o.sDiv).children("div").children("table.ui-jqgrid-ftable").children("tbody").first(),c&&o.fsDiv!=null&&(h=h.add(o.fsDiv.children("table.ui-jqgrid-ftable").children("tbody").first())),v(h)),a.remapColumns&&(a.remapColumns.length?b(a.remapColumns):a.remapColumns=f(p)),a.lastsort=$.inArray(a.lastsort,p),a.iColByName={},s=0,u=a.colModel.length;s<u;s++)a.iColByName[a.colModel[s].name]=s;feedback.call(i,"onRemapColumns",p,t,r)}},remapColumnsByName:function(e,t,r){var i=this[0],a=i.p,o=[],s,u,f=e.slice(),c=$.inArray;for(a.subGrid&&c("subgrid",f)<0&&f.unshift("subgrid"),a.multiselect&&c("cb",f)<0&&f.unshift("cb"),a.rownumbers&&c("rn",f)<0&&f.unshift("rn"),s=0,u=f.length;s<u;s++)o.push(a.iColByName[f[s]]);return base.remapColumns.call(this,o,t,r),this},setGridWidth:function(e,t){return this.each(function(){var r=this,i=r.p,a,o=r.grid,s=0,u,f=0,c=!1,h,g=0,p,m=jgrid.isCellClassHidden,b=e;if(!(!o||i==null)){r.fixScrollOffsetAndhBoxPadding();var v=i.colModel,j,y=i.scrollOffset,S=jgrid.cell_width?0:i.cellLayout,C,w=o.headers,x=o.footers,G=o.bDiv,l=o.hDiv,R=o.sDiv,B=o.cols,T,H,P,V=$(l).find(">div>.ui-jqgrid-htable>thead>tr").first()[0].cells,k=function(N){o.width=i.width=N,$(i.gBox).css("width",N+"px"),$(i.gView).css("width",N+"px"),$(G).css("width",N+"px"),$(l).css("width",N+"px"),i.pager&&$(i.pager).css("width",N+"px"),i.toppager&&$(i.toppager).css("width",N+"px"),i.toolbar[0]===!0&&($(o.uDiv).css("width",N+"px"),i.toolbar[1]==="both"&&$(o.ubDiv).css("width",N+"px")),i.footerrow&&$(R).css("width",N+"px")};if(typeof t!="boolean"&&(t=i.shrinkToFit),!isNaN(b)){if(b=parseInt(b,10),k(b),t===!1&&i.forceFit===!0&&(i.forceFit=!1),t===!0){if($.each(v,function(){this.hidden===!1&&!m(this.classes)&&(a=this.widthOrg,s+=a+S,this.fixed?g+=this.width+S:f++)}),f===0||(i.tblwidth=parseInt(s,10),h=b-S*f-g,isNaN(i.height)||(G.clientHeight<G.scrollHeight||r.rows.length===1)&&(c=!0,h-=y),P=h/(i.tblwidth-S*f-g),P<0)||(s=0,H=B.length>0,$.each(v,function(N){this.hidden===!1&&!m(this.classes)&&!this.fixed&&(a=Math.round(this.widthOrg*P),this.width=a,s+=a,w[N].width=a,V[N].style.width=a+"px",i.footerrow&&(x[N].style.width=a+"px"),H&&(B[N].style.width=a+"px"),u=N)}),!u))return;p=0,c?b-g-(s+S*f)!==y&&(p=b-g-(s+S*f)-y):Math.abs(b-g-(s+S*f))!==1&&(p=b-g-(s+S*f)),j=v[u],j.width+=p,i.tblwidth=parseInt(s+p+S*f+g,10),i.tblwidth>b&&(T=i.tblwidth-parseInt(b,10),i.tblwidth=b,j.width=j.width-T),a=j.width,C=w[u],C.width=a,V[u].style.width=a+"px",H&&(B[u].style.width=a+"px"),i.footerrow&&(x[u].style.width=a+"px"),i.tblwidth+(c?y:0)<i.width&&k(i.tblwidth+(c?y:0)),G.offsetWidth>G.clientWidth&&!i.autowidth&&(i.widthOrg===void 0||i.widthOrg==="auto"||i.widthOrg==="100%")&&k(G.offsetWidth)}i.tblwidth&&(i.tblwidth=parseInt(i.tblwidth,10),b=i.tblwidth,l.scrollLeft=G.scrollLeft,T=Math.abs(b-i.width),i.shrinkToFit&&!t&&T<3&&T>0&&(b<i.width&&k(b),G.offsetWidth>G.clientWidth&&!i.autowidth&&(i.widthOrg===void 0||i.widthOrg==="auto"||i.widthOrg==="100%")&&k(G.offsetWidth))),r.fixScrollOffsetAndhBoxPadding();var O={resizeDiv:!0,resizedRows:{iRowStart:t?0:-1,iRowEnd:-1}};$(r).triggerHandler("jqGridResetFrozenHeights",[{header:O,resizeFooter:!0,body:O}])}}})},setGridHeight:function(e){return this.each(function(){var t=this,r=t.grid,i=t.p;if(r){var a=$(r.bDiv);a.css({height:e+(isNaN(e)?"":"px")}),i.frozenColumns===!0&&$(i.idSel+"_frozen").parent().height(a.height()-16),i.height=e,i.scroll&&r.populateVisible.call(t),t.fixScrollOffsetAndhBoxPadding(),$(t).triggerHandler("jqGridResetFrozenHeights")}})},setCaption:function(e){return this.each(function(){var t=this,r=t.grid.cDiv;t.p.caption=e,$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",r).html(e),$(r).show(),$(r).nextAll("div").removeClass(base.getGuiStyles.call(t,"top")),$(this).triggerHandler("jqGridResetFrozenHeights")})},setLabel:function(e,t,r,i){return this.each(function(){var a=this,o,s=a.p,u;if(a.grid){if(isNaN(e)){if(o=s.iColByName[e],o===void 0)return}else o=parseInt(e,10);o>=0&&(u=$(a.grid.headers[o].el),s.frozenColumns&&(u=u.add(a.grid.fhDiv.find("#"+jqID(u)))),t&&(u.each(function(){var f=$("[id^=jqgh_]",this),c=f.children("span.ui-jqgrid-cell-wrapper");if(c.length>0)c.html(t);else{var h=$(".s-ico",this);f.empty().html(t)[s.sortIconsBeforeText?"prepend":"append"](h)}}),s.colNames[o]=t),r&&(typeof r=="string"?u.addClass(r):u.css(r)),typeof i=="object"&&u.attr(i))}})},setCell:function(e,t,r,i,a,o){return this.each(function(){var s=this,u=s.p,f=-1,c=u.colModel,h,g,p,m,b,v,j,y,S={},C,w;if(s.grid&&(f=isNaN(t)?u.iColByName[t]:parseInt(t,10),f>=0&&(b=base.getGridRowById.call($(s),e),b))){if(v=jgrid.getCell.call(s,b,f),r!==""||o===!0){if(p=c[f],u.datatype==="local"&&(C=stripPref(u.idPrefix,e),w=u._index[C],w!==void 0&&(m=u.data[w])),m==null){for(g=0;g<b.cells.length;g++)if(g!==f&&(j=jgrid.getDataFieldOfCell.call(s,b,g),j.length>0)){try{y=$.unformat.call(s,j,{rowId:e,colModel:c[g]},g)}catch{y=htmlDecode(j[0].innerHTML)}S[c[g].name]=y}}else S=m;S[p.name]=r,h=s.formatter(e,r,f,S,"edit");var x=v;u.treeGrid===!0&&p.name===u.ExpandColumn&&(x=x.children("span.cell-wrapperleaf,span.cell-wrapper").first()),x.html(h),p.title&&v.attr({title:r}),m!=null&&(h=convertOnSaveLocally.call(s,r,p,m[p.name],C,m,f),$.isFunction(p.saveLocally)?p.saveLocally.call(s,{newValue:h,newItem:m,oldItem:m,id:C,cm:p,cmName:p.name,iCol:f}):m[p.name]=h)}(i||a)&&(v=jgrid.getCell.call(s,b,f),i&&v[typeof i=="string"?"addClass":"css"](i),typeof a=="object"&&v.attr(a))}})},getCell:function(e,t){var r=!1;return this.each(function(){var i=this,a,o=i.p,s,u,f;if(i.grid&&(a=isNaN(t)?o.iColByName[t]:parseInt(t,10),a>=0&&(s=base.getGridRowById.call($(i),e),s))){u=jgrid.getDataFieldOfCell.call(i,s,a).first(),f=o.colModel[a];try{base.isCellEditing.call($(i),e,a,s)?r=jgrid.getEditedValue.call(i,u,f,{},f.editable):r=$.unformat.call(i,u,{rowId:s.id,colModel:f},a)}catch{r=htmlDecode(u.html())}}}),r},getCol:function(e,t,r){var i=[],a,o=0,s,u,f;return t=typeof t!="boolean"?!1:t,r===void 0&&(r=!1),this.each(function(){var c=this,h,g=c.p,p;if(c.grid&&(h=isNaN(e)?g.iColByName[e]:parseInt(e,10),h>=0)){var m=c.rows,b=m.length,v=0,j=0,y,S=g.colModel[h],C;if(b&&b>0){for(;v<b;){if(y=m[v],$(y).hasClass("jqgrow")){p=jgrid.getDataFieldOfCell.call(c,y,h).first(),C=y.id;try{base.isCellEditing.call($(c),C,h,y)?a=jgrid.getEditedValue.call(c,p,S,{},S.editable):a=$.unformat.call(c,p,{rowId:C,colModel:S},h)}catch{a=htmlDecode(p.html())}r?(f=parseFloat(a),isNaN(f)||(o+=f,u===void 0&&(u=s=f),s=Math.min(s,f),u=Math.max(u,f),j++)):t?i.push({id:C,value:a}):i.push(a)}v++}if(r)switch(r.toLowerCase()){case"sum":i=o;break;case"avg":i=o/j;break;case"count":i=b-1;break;case"min":i=s;break;case"max":i=u;break}}}}),i},clearGridData:function(e){return this.each(function(){var t=this,r=t.p,i=t.rows,a=t.grid;!a||!r||!i||(typeof e!="boolean"&&(e=!1),$(t).off(".jqGridFormatter"),a.emptyRows.call(t,!1,!0),r.footerrow&&e&&$(".ui-jqgrid-ftable td",a.sDiv).html("&#160;"),r.selrow=null,clearArray(r.selarrrow),clearArray(r.savedRow),r.editingInfo={},clearArray(r.data),clearArray(r.lastSelectedData),r._index={},r.rowIndexes={},r.dataIndexById={},r.indexByColumnData={},r.records=0,r.page=1,r.lastpage=0,r.reccount=0,t.updatepager(!0,!1))})},getInd:function(e,t){var r=base.getGridRowById.call($(this),e);return r?t===!0?r:r.rowIndex:!1},bindKeys:function(e){var t=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},e||{});return this.each(function(){var r=this,i=r.p,a=$(r);i.scrollrows=t.scrollingRows,a.on("keydown.jqGrid",function(o){var s=$(this).find("tr[tabindex=0]")[0],u=jgrid.detectRowEditing.call(r,$(o.target).closest("tr.jqgrow").attr("id")),f=function(g){do if(s=s[g],s===null)return;while($(s).is(":hidden")||!$(s).hasClass("jqgrow"));base.setSelection.call(a,s.id,!0),o.preventDefault()},c=function(g,p){var m=t["on"+g+(p||"")];a.triggerHandler("jqGridKey"+g,[i.selrow]),$.isFunction(m)&&m.call(r,i.selrow)},h=function(g){if(i.treeGrid){var p=i.data[i._index[stripPref(i.idPrefix,s.id)]][i.treeReader.expanded_field];g==="Right"&&(p=!p),p&&$(s).find("div.treeclick").trigger("click")}c(g,"Key")};if(s&&u===null)switch(o.keyCode){case 38:f("previousSibling");break;case 40:f("nextSibling");break;case 37:h("Left");break;case 39:h("Right");break;case 13:c("Enter");break;case 32:c("Space");break}})})},unbindKeys:function(){return this.each(function(){$(this).off("keydown.jqGrid")})},getLocalRow:function(e){var t=!1,r;return this.each(function(){var i=this.p;e!==void 0&&i!=null&&i._index!=null&&i.data!=null&&(r=i._index[stripPref(i.idPrefix,e)],r>=0&&(t=i.data[r]))}),t},progressBar:function(e){return e=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},e||{}),this.each(function(){var t=e.method==="show",r=jqID(this.p.id),i=$("#load_"+r);switch(e.htmlcontent!==""&&i.html(e.htmlcontent),e.loadtype){case"disable":break;case"enable":i.toggle(t);break;case"block":$("#lui_"+r).toggle(t),i.toggle(t);break}})},setColWidth:function(e,t,r,i){return this.each(function(){var a=this,o=$(a),s=a.grid,u=a.p,f;if(typeof e=="string"){if(e=u.iColByName[e],e===void 0)return}else if(typeof e!="number")return;f=s.headers[e],f!=null&&(f.newWidth=t,s.newWidth=u.tblwidth+t-f.width,s.resizeColumn(e,!u.frozenColumns,i),r!==!1&&!i&&(a.fixScrollOffsetAndhBoxPadding(),base.setGridWidth.call(o,s.newWidth+u.scrollOffset,!1)))})},getAutoResizableWidth:function(e){var t=this;if(t.length===0)return-1;t=t[0];var r=t.rows,i,a,o,s,u,f=t.p,c=f.colModel[e],h=$(t.grid.headers[e].el),g=h.children("div"),p=parseFloat(h.css(c.rotated?"padding-top":"padding-left")||0),m=parseFloat(h.css(c.rotated?"padding-bottom":"padding-right")||0),b=g.children("span.s-ico"),v=g.children(".ui-jqgrid-sort-order"),j=g.children("."+f.autoResizing.wrapperClassName),y=c.rotated?j.outerHeight():j.outerWidth(),S=parseFloat(j.css(c.rotated?"height":"width")||0),C=0,w=0,x=c.autoResizing!=null&&c.autoResizable.compact!==void 0?c.autoResizable.compact:f.autoResizing.compact,G=f.autoResizing.wrapperClassName;if(c==null||!c.autoResizable||j.length===0||c.hidden||jgrid.isCellClassHidden(c.classes)||c.fixed)return-1;for((!x||b.is(":visible")||b.css("display")!=="none")&&(w=c.rotated?b.outerHeight(!0):b.outerWidth(!0)+(v.length>0?v.outerWidth(!0):0),f.sortIconsBeforeText||(w-=f.direction==="rtl"?parseFloat(b.css("padding-left")||0)+parseFloat(b.css("margin-left")||0):parseFloat(b.css("padding-right")||0)+parseFloat(b.css("margin-right")||0))),c.rotated?w=Math.max(w,y+p+m):w+=y+p+(S===y?p+m:0)+parseFloat(g.css("margin-left")||0)+parseFloat(g.css("margin-right")||0),o=0,r=t.rows;o<r.length;o++)i=r[o],a=i.cells[e],s=$(i.cells[e]),a!=null&&($(i).hasClass("jqgrow")&&i.style.display!=="none"&&a.style.display!=="none"||$(i).hasClass("jqgroup")&&a.colSpan===1)?(u=$(a.firstChild),u.hasClass(G)?w=Math.max(w,u.outerWidth()+C):f.treeGrid&&f.ExpandColumn===c.name&&(u=s.children(".cell-wrapper,.cell-wrapperleaf"),w=Math.max(w,u.outerWidth()+C+s.children(".tree-wrap").outerWidth()))):$(i).hasClass("jqgfirstrow")&&(C=(jgrid.cell_width?parseFloat(s.css("padding-left")||0)+parseFloat(s.css("padding-right")||0):0)+parseFloat(s.css("border-right")||0)+parseFloat(s.css("border-left")||0));return w=Math.max(w,c.autoResizing!=null&&c.autoResizing.minColWidth!==void 0?c.autoResizing.minColWidth:f.autoResizing.minColWidth),Math.min(w,c.autoResizing!=null&&c.autoResizing.maxColWidth!==void 0?c.autoResizing.maxColWidth:f.autoResizing.maxColWidth)},autoResizeColumn:function(e,t){return this.each(function(){var r=this,i=$(this),a=r.p,o=a.colModel[e],s,u=$(r.grid.headers[e].el),f=base.getAutoResizableWidth.call(i,e),c=(o.autoResizing||{}).resetWidthOrg;o==null||f<0||f===o.width||(base.setColWidth.call(i,e,f,a.autoResizing.adjustGridWidth&&!a.autoResizing.fixWidthOnShrink&&!t,t),a.autoResizing.fixWidthOnShrink&&a.shrinkToFit&&!t&&(o.fixed=!0,s=o.widthOrg,o.widthOrg=o.width,base.setGridWidth.call(i,a.width,!0),o.widthOrg=s,o.fixed=!1),(c||c===void 0&&a.autoResizing.resetWidthOrg)&&(o.widthOrg=o.width),u.data("autoResized","true"))})},autoResizeAllColumns:function(){return this.each(function(){var e=this,t=$(e),r=e.p,i=r.colModel,a=i.length,o,s,u=r.shrinkToFit,f=r.autoResizing.adjustGridWidth,c=r.autoResizing.fixWidthOnShrink,h=parseInt(r.widthOrg,10),g=e.grid,p=base.autoResizeColumn;for(r.shrinkToFit=!1,r.autoResizing.adjustGridWidth=!0,r.autoResizing.fixWidthOnShrink=!1,o=0;o<a;o++)s=i[o],s.autoResizable&&s.formatter!=="actions"&&p.call(t,o,!0);g.hDiv.scrollLeft=g.bDiv.scrollLeft,r.footerrow&&(g.sDiv.scrollLeft=g.bDiv.scrollLeft),e.fixScrollOffsetAndhBoxPadding(),isNaN(h)?f&&base.setGridWidth.call(t,g.newWidth+r.scrollOffset,!1):base.setGridWidth.call(t,h,!1),r.autoResizing.fixWidthOnShrink=c,r.autoResizing.adjustGridWidth=f,r.shrinkToFit=u})}});var getTdByColumnIndex=function(e,t){var r=this,i=r.grid.fbRows;return e=i!=null&&i[0].cells.length>t?i[e.rowIndex]:e,e!=null&&e.cells!=null?$(e.cells[t]):$()},safeHeightSet=function(e,t){var r=e.height();Math.abs(r-t)>=1&&t>0&&(e.height(t),r=e.height(),Math.abs(t-r)>=1&&e.height(t+Math.round(t-r)))};jgrid.extend({editCell:function(e,t,r){return this.each(function(){var i=this,a=$(i),o=i.p,s,u,f,c,h=i.rows;if(!(!i.grid||o.cellEdit!==!0||h==null||h[e]==null)&&(e=parseInt(e,10),t=parseInt(t,10),!(isNaN(e)||isNaN(t)))){var g=h[e],p=g!=null?g.id:null,m=$(g),b,v=parseInt(o.iCol,10),j=parseInt(o.iRow,10),y=$(h[j]),S=o.savedRow;if(p!=null){if(o.selrow=p,o.knv||a.jqGrid("GridNav"),S.length>0&&y.length>0){if(r===!0&&e===j&&t===v)return;a.jqGrid("saveCell",S[0].id,S[0].ic)}else setTimeout(function(){$("#"+jgrid.jqID(o.knv)).attr("tabindex","-1").focus()},1);if(c=o.colModel[t],s=c.name,!(s==="subgrid"||s==="cb"||s==="rn")){f=getTdByColumnIndex.call(i,g,t);var C=c.editable,w="cell";$.isFunction(C)&&(C=C.call(i,{rowid:p,iCol:t,iRow:e,cmName:s,cm:c,mode:w}));var x=a.jqGrid("getGuiStyles","states.select","edit-cell"),G=a.jqGrid("getGuiStyles","states.hover","selected-row");if(C===!0&&r===!0&&!f.hasClass("not-editable-cell")){o.noCellSelection||(v>=0&&j>=0&&(getTdByColumnIndex.call(i,y[0],v).removeClass(x),y.removeClass(G)),f.addClass(x),m.addClass(G)),c.edittype||(c.edittype="text"),b=c.edittype;try{u=$.unformat.call(i,f,{rowId:p,colModel:c},t)}catch{u=b==="textarea"?f.text():f.html()}if(o.autoEncodeOnEdit&&(u=jgrid.oldDecodePostedData(u)),(u==="&nbsp;"||u==="&#160;"||u.length===1&&u.charCodeAt(0)===160)&&(u=""),$.isFunction(o.formatCell)){var l=o.formatCell.call(i,p,s,u,e,t);l!==void 0&&(u=l)}feedback.call(i,"beforeEditCell",p,s,u,e,t),S.push({id:e,ic:t,name:s,v:u}),o.editingInfo[p]={mode:"cellEditing",savedRow:S[S.length-1],editable:{}},o.editingInfo[p].editable[s]=C;var R=$.extend({},c.editoptions||{},{id:e+"_"+s,name:s,rowId:p,mode:w,cm:c,iCol:t}),B=jgrid.createEl.call(i,b,R,u,!0,$.extend({},jgrid.ajaxOptions,o.ajaxSelectOptions||{})),T=f,H=o.treeGrid===!0&&s===o.ExpandColumn;H&&(T=f.children("span.cell-wrapperleaf,span.cell-wrapper")),T.html("").append(B).attr("tabindex","0"),H&&$(B).width(f.width()-f.children("div.tree-wrap").outerWidth()),jgrid.bindEv.call(i,B,R),o.frozenColumns&&t<a.jqGrid("getNumberOfFrozenColumns")&&safeHeightSet($(i.rows[g.rowIndex].cells[t]),f.height()),setTimeout(function(){$(B).focus()},0),$("input, select, textarea",f).on("keydown",function(P){if(P.keyCode===27&&($("input.hasDatepicker",f).length>0?$(".ui-datepicker").is(":hidden")?a.jqGrid("restoreCell",e,t):$("input.hasDatepicker",f).datepicker("hide"):a.jqGrid("restoreCell",e,t)),P.keyCode===13&&!P.shiftKey)return a.jqGrid("saveCell",e,t),!1;if(P.keyCode===9)if(!i.grid.hDiv.loading)P.shiftKey?a.jqGrid("prevCell",e,t):a.jqGrid("nextCell",e,t);else return!1;P.stopPropagation()}),feedback.call(i,"afterEditCell",p,s,u,e,t)}else o.noCellSelection||(v>=0&&j>=0&&(getTdByColumnIndex.call(i,y[0],v).removeClass(x),y.removeClass(G)),f.addClass(x),m.addClass(G)),u=f.html().replace(/&#160;/ig,""),feedback.call(i,"onSelectCell",p,s,u,e,t);o.iCol=t,o.iRow=e}}}})},saveCell:function(e,t){return this.each(function(){var r=this,i=$(r),a=r.p,o=r.grid,s=jgrid.info_dialog,u=jgrid.jqID;if(!(!o||a.cellEdit!==!0)){var f=i.jqGrid("getGridRes","errors"),c=f.errcap,h=i.jqGrid("getGridRes","edit"),g=h.bClose,p=a.savedRow,m=p.length>=1?0:null;if(m!==null){var b=r.rows[e],v=b!=null?b.id:null,j=b!=null?$(b):$(),y=a.colModel[t],S=y.name,C,w=getTdByColumnIndex.call(r,b,t),x={},G=jgrid.getEditedValue.call(r,w,y,x);if(G!==p[m].v){C=i.triggerHandler("jqGridBeforeSaveCell",[v,S,G,e,t]),C!==void 0&&(G=C),$.isFunction(a.beforeSaveCell)&&(C=a.beforeSaveCell.call(r,v,S,G,e,t),C!==void 0&&(G=C));var l=jgrid.checkValues.call(r,G,t,void 0,void 0,{oldValue:p[m].v,newValue:G,cmName:S,rowid:v,iCol:t,iRow:e,cm:y,tr:b,td:w,mode:"cell"}),R=y.formatoptions||{};if(l==null||l===!0||l[0]===!0){var B=i.triggerHandler("jqGridBeforeSubmitCell",[v,S,G,e,t])||{};if($.isFunction(a.beforeSubmitCell)&&(B=a.beforeSubmitCell.call(r,v,S,G,e,t),B||(B={})),$("input.hasDatepicker",w).length>0&&$("input.hasDatepicker",w).datepicker("hide"),y.formatter==="date"&&R.sendFormatted!==!0&&(G=$.unformat.date.call(r,G,y)),a.cellsubmit==="remote")if(a.cellurl){var T={};T[S]=G;var H=a.prmNames,P=H.id,V=H.oper;T[P]=jgrid.stripPref(a.idPrefix,v),T[V]=H.editoper,T=$.extend(B,T),a.autoEncodeOnEdit&&$.each(T,function(k,O){$.isFunction(O)||(T[k]=jgrid.oldEncodePostedData(O))}),i.jqGrid("progressBar",{method:"show",loadtype:a.loadui,htmlcontent:i.jqGrid("getGridRes","defaults.savetext")||"Saving..."}),o.hDiv.loading=!0,$.ajax($.extend({url:$.isFunction(a.cellurl)?a.cellurl.call(r,a.cellurl,e,t,v,G,S):a.cellurl,data:jgrid.serializeFeedback.call(r,a.serializeCellData,"jqGridSerializeCellData",T),type:"POST",complete:function(k){if(o.endReq.call(r),(k.status<300||k.status===304)&&(k.status!==0||k.readyState!==4)){var O=i.triggerHandler("jqGridAfterSubmitCell",[r,k,T.id,S,G,e,t])||[!0,""];(O===!0||O[0]===!0&&$.isFunction(a.afterSubmitCell))&&(O=a.afterSubmitCell.call(r,k,T.id,S,G,e,t)),O==null||O===!0||O[0]===!0?(i.jqGrid("setCell",v,t,G,!1,!1,!0),w.addClass("dirty-cell"),j.addClass("edited"),feedback.call(r,"afterSaveCell",v,S,G,e,t),p.splice(0,1),delete a.editingInfo[v]):(s.call(r,c,O[1],g),i.jqGrid("restoreCell",e,t))}},error:function(k,O,N){i.triggerHandler("jqGridErrorCell",[k,O,N]),$.isFunction(a.errorCell)?(a.errorCell.call(r,k,O,N),i.jqGrid("restoreCell",e,t)):(s.call(r,c,k.status+" : "+k.statusText+"<br/>"+O,g),i.jqGrid("restoreCell",e,t))}},jgrid.ajaxOptions,a.ajaxCellOptions||{}))}else try{s.call(r,c,f.nourl,g),i.jqGrid("restoreCell",e,t)}catch{}if(a.cellsubmit==="clientArray"){if(i.jqGrid("setCell",v,t,y.edittype==="select"&&y.formatter!=="select"?x.text:G,!1,!1,!0),w.addClass("dirty-cell"),j.addClass("edited"),feedback.call(r,"afterSaveCell",v,S,G,e,t),a.frozenColumns&&t<i.jqGrid("getNumberOfFrozenColumns"))try{r.rows[b.rowIndex].cells[t].style.height=""}catch{}p.splice(0,1),delete a.editingInfo[v]}}else try{setTimeout(function(){var k=jgrid.getRelativeRect.call(r,w);s.call(r,c,G+" "+l[1],g,{top:k.top,left:k.left+$(r).closest(".ui-jqgrid").offset().left})},50),i.jqGrid("restoreCell",e,t)}catch{}}else i.jqGrid("restoreCell",e,t)}setTimeout(function(){$("#"+u(a.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(e,t){return this.each(function(){var r=this,i=r.p,a=r.rows[e],o=a.id,s,u,f;if(!(!r.grid||i.cellEdit!==!0)){var c=i.savedRow,h=getTdByColumnIndex.call(r,a,t);if(c.length>=1){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker",h).datepicker("hide")}catch{}if(u=i.colModel[t],i.treeGrid===!0&&u!=null&&u.name===i.ExpandColumn?h.children("span.cell-wrapperleaf,span.cell-wrapper").empty():h.empty(),h.attr("tabindex","-1"),s=c[0].v,u!=null&&(f=u.formatoptions||{},u.formatter==="date"&&f.sendFormatted!==!0&&(s=$.unformat.date.call(r,s,u)),$(r).jqGrid("setCell",o,t,s,!1,!1,!0),i.frozenColumns&&t<$(r).jqGrid("getNumberOfFrozenColumns")))try{r.rows[a.rowIndex].cells[t].style.height=""}catch{}feedback.call(r,"afterRestoreCell",o,s,e,t),c.splice(0,1),delete i.editingInfo[o]}setTimeout(function(){$("#"+i.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(e,t){return this.each(function(){var r=this,i=$(r),a=r.p,o=!1,s,u,f,c=r.rows;if(!(!r.grid||a.cellEdit!==!0||c==null||c[e]==null)){for(s=t+1;s<a.colModel.length;s++)if(f=a.colModel[s],u=f.editable,$.isFunction(u)&&(u=u.call(r,{rowid:c[e].id,iCol:s,iRow:e,cmName:f.name,cm:f,mode:"cell"})),u===!0){o=s;break}o!==!1?i.jqGrid("editCell",e,o,!0):a.savedRow.length>0&&i.jqGrid("saveCell",e,t)}})},prevCell:function(e,t){return this.each(function(){var r=this,i=$(r),a=r.p,o=!1,s,u,f,c=r.rows;if(!(!r.grid||a.cellEdit!==!0||c==null||c[e]==null)){for(s=t-1;s>=0;s--)if(f=a.colModel[s],u=f.editable,$.isFunction(u)&&(u=u.call(r,{rowid:c[e].id,iCol:s,iRow:e,cmName:f.name,cm:f,mode:"cell"})),u===!0){o=s;break}o!==!1?i.jqGrid("editCell",e,o,!0):a.savedRow.length>0&&i.jqGrid("saveCell",e,t)}})},GridNav:function(){return this.each(function(){var e=this,t=$(e),r=e.p,i=e.grid,a,o;if(!i||r.cellEdit!==!0)return;var s=i.bDiv;r.knv=r.id+"_kn";var u=$("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+r.knv+"'></div></div>");function f(h,g,p){var m=e.rows[h];if(p.substr(0,1)==="v"){var b=s.clientHeight,v=s.scrollTop,j=m.offsetTop+m.clientHeight,y=m.offsetTop;p==="vd"&&j>=v+b&&(s.scrollTop=s.scrollTop+m.clientHeight),p==="vu"&&y<v&&(s.scrollTop=s.scrollTop-m.clientHeight)}if(p==="h"){var S=s.clientWidth,C=s.scrollLeft,w=m.cells[g],x=w.offsetLeft+w.clientWidth,G=w.offsetLeft;x>=S+parseInt(C,10)?s.scrollLeft=s.scrollLeft+w.clientWidth:G<C&&(s.scrollLeft=s.scrollLeft-w.clientWidth)}}function c(h,g){var p=0,m,b=r.colModel;if(g==="lft"){for(p=h+1,m=h;m>=0;m--)if(b[m].hidden!==!0){p=m;break}}if(g==="rgt"){for(p=h-1,m=h;m<b.length;m++)if(b[m].hidden!==!0){p=m;break}}return p}$(u).insertBefore(i.cDiv),$("#"+r.knv).focus().keydown(function(h){var g=parseInt(r.iRow,10),p=parseInt(r.iCol,10);switch(o=h.keyCode,r.direction==="rtl"&&(o===37?o=39:o===39&&(o=37)),o){case 38:g-1>0&&(f(g-1,p,"vu"),t.jqGrid("editCell",g-1,p,!1));break;case 40:g+1<=e.rows.length-1&&(f(g+1,p,"vd"),t.jqGrid("editCell",g+1,p,!1));break;case 37:p-1>=0&&(a=c(p-1,"lft"),f(g,a,"h"),t.jqGrid("editCell",g,a,!1));break;case 39:p+1<=r.colModel.length-1&&(a=c(p+1,"rgt"),f(g,a,"h"),t.jqGrid("editCell",g,a,!1));break;case 13:p>=0&&g>=0&&t.jqGrid("editCell",g,p,!0);break;default:return!0}return!1})})},getChangedCells:function(e){var t=[];return e||(e="all"),this.each(function(){var r=this,i=r.p,a=jgrid.htmlDecode,o=r.rows;!r.grid||i.cellEdit!==!0||$(o).each(function(s){var u={};if($(this).hasClass("edited")){var f=this;$(this.cells).each(function(c){var h=i.colModel[c],g=h.name,p=getTdByColumnIndex.call(r,f,c);if(g!=="cb"&&g!=="subgrid"&&g!=="rn"&&(e!=="dirty"||p.hasClass("dirty-cell")))try{u[g]=$.unformat.call(r,p[0],{rowId:o[s].id,colModel:h},c)}catch{u[g]=a(p.html())}}),u.id=this.id,t.push(u)}})}),t}});var getGuiStyles=base.getGuiStyles,getGridRes=base.getGridRes;jgrid.jqModal=jgrid.jqModal||{},$.extend(!0,jgrid.jqModal,{toTop:!0}),$.extend(jgrid,{showModal:function(e){e.w.show()},closeModal:function(e){e.w.hide().attr("aria-hidden","true"),e.o&&e.o.remove()},hideModal:function(e,t){t=$.extend({jqm:!0,gb:"",removemodal:!1},t||{});var r=t.gb&&typeof t.gb=="string"&&t.gb.substr(0,6)==="#gbox_"?$("#"+t.gb.substr(6))[0]:!1,i=$(e);if(t.onClose){var a=r?t.onClose.call(r,e):t.onClose(e);if(typeof a=="boolean"&&!a)return}if($.fn.jqm&&t.jqm===!0)i.attr("aria-hidden","true").jqmHide();else{if(t.gb!=="")try{$(">.jqgrid-overlay",t.gb).first().hide()}catch{}i.hide().attr("aria-hidden","true")}t.removemodal&&i.remove()},createModal:function(e,t,r,i,a,o,s){var u=jgrid.jqID,f=this.p;r=$.extend(!0,{resizingRightBottomIcon:base.getIconRes.call(this,"form.resizableLtr")},jgrid.jqModal||{},f!=null?f.jqModal||{}:{},r);var c=document.createElement("div"),h="#"+u(e.themodal),g=$(r.gbox).attr("dir")==="rtl",p=e.resizeAlso?"#"+u(e.resizeAlso):!1;s=$.extend({},s||{}),c.className=getGuiStyles.call(this,"dialog.window","ui-jqdialog"),c.id=e.themodal,c.dir=g?"rtl":"ltr";var m=document.createElement("div");m.className=getGuiStyles.call(this,"dialog.document"),$(m).attr("role","document");var b=document.createElement("div");b.className=getGuiStyles.call(this,"dialog.subdocument"),m.appendChild(b),c.appendChild(m);var v=document.createElement("div");v.className=getGuiStyles.call(this,"dialog.header","ui-jqdialog-titlebar "+(g?"ui-jqdialog-titlebar-rtl":"ui-jqdialog-titlebar-ltr")),v.id=e.modalhead,$(v).append("<span class='ui-jqdialog-title'>"+r.caption+"</span>");var j=getGuiStyles.call(this,"states.hover"),y=$("<a aria-label='Close' class='"+getGuiStyles.call(this,"dialog.closeButton","ui-jqdialog-titlebar-close")+"'></a>").hover(function(){y.addClass(j)},function(){y.removeClass(j)}).append("<span class='"+base.getIconRes.call(this,"form.close")+"'></span>");$(v).append(y);var S=document.createElement("div");$(S).addClass(getGuiStyles.call(this,"dialog.content","ui-jqdialog-content")).attr("id",e.modalcontent),$(S).append(t),b.appendChild(S),$(b).prepend(v),o===!0?$("body").append(c):typeof o=="string"?$(o).append(c):$(c).insertBefore(i),$(c).css(s),r.jqModal===void 0&&(r.jqModal=!0);var C={};if($.fn.jqm&&r.jqModal===!0?(r.left===0&&r.top===0&&r.overlay&&(r=$(a).offset(),r.left+=4,r.top+=4),C.top=r.top+"px",C.left=r.left):(r.left!==0||r.top!==0)&&(C.left=r.left,C.top=r.top+"px"),$("a.ui-jqdialog-titlebar-close",v).click(function(){var x=$(h).data("onClose")||r.onClose,G=$(h).data("gbox")||r.gbox;return jgrid.hideModal(h,{gb:G,jqm:r.jqModal,onClose:x,removemodal:r.removemodal||!1}),!1}),(r.width===0||!r.width)&&(r.width=300),(r.height===0||!r.height)&&(r.height=200),!r.zIndex){var w=$(i).parents("*[role=dialog]").first().css("z-index");w?(r.zIndex=parseInt(w,10)+2,r.toTop=!0):r.zIndex=950}if(C.left&&(C.left+="px"),$(c).css($.extend({width:isNaN(r.width)?"auto":r.width+"px",height:isNaN(r.height)?"auto":r.height+"px",zIndex:r.zIndex},C)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":e.modalhead,"aria-hidden":"true"}),r.drag===void 0&&(r.drag=!0),r.resize===void 0&&(r.resize=!0),r.drag)if($.fn.jqDrag)$(v).css("cursor","move"),$(c).jqDrag(v);else try{$(c).draggable({handle:$("#"+u(v.id))})}catch{}if(r.resize)if($.fn.jqResize)$(S).append("<div class='jqResize ui-resizable-handle ui-resizable-se "+r.resizingRightBottomIcon+"'></div>"),$(h).jqResize(".jqResize",p);else try{$(c).resizable({handles:"se, sw",alsoResize:p})}catch{}r.closeOnEscape===!0&&$(c).keydown(function(x){if(x.which===27){var G=$(h).data("onClose")||r.onClose;jgrid.hideModal(h,{gb:r.gbox,jqm:r.jqModal,onClose:G,removemodal:r.removemodal||!1,formprop:!r.recreateForm||!1,form:r.form||""})}})},viewModal:function(e,t){if(t=$.extend(!0,{overlay:30,modal:!1,overlayClass:getGuiStyles.call(this,"overlay"),onShow:jgrid.showModal,onHide:jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},jgrid.jqModal||{},t||{}),$.fn.jqm&&t.jqm===!0)t.jqM?$(e).attr("aria-hidden","false").jqm(t).jqmShow():$(e).attr("aria-hidden","false").jqmShow();else{t.gbox!==""&&($(">.jqgrid-overlay",t.gbox).first().show(),$(e).data("gbox",t.gbox)),$(e).show().attr("aria-hidden","false");try{$(":input:visible",e)[0].focus()}catch{}}},info_dialog:function(e,t,r,i){var a=this,o=a.p,s=$.extend(!0,{width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},jgrid.jqModal||{},o!=null?o.jqModal||{}:{},{caption:"<b>"+e+"</b>"},i||{}),u=s.jqModal;$.fn.jqm&&!u&&(u=!1);var f="",c,h=getGuiStyles.call(a,"states.hover");if(s.buttons.length>0)for(c=0;c<s.buttons.length;c++)s.buttons[c].id===void 0&&(s.buttons[c].id="info_button_"+c),f+=jgrid.builderFmButon.call(a,s.buttons[c].id,s.buttons[c].text);var g=isNaN(s.dataheight)?s.dataheight:s.dataheight+"px",p="text-align:"+s.align+";",m=$("#info_dialog"),b="<div id='info_id'>";b+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+g+";"+p+"'>"+t+"</div>",(r||f!=="")&&(b+="<hr class='"+getGuiStyles.call(a,"dialog.hr")+"' style='margin:1px'/><div style='text-align:"+s.buttonalign+";padding:.8em 0 .5em 0;background-image:none;border-width: 1px 0 0 0;'>"+(r?jgrid.builderFmButon.call(a,"closedialog",r):"")+f+"</div>"),b+="</div>";try{m.attr("aria-hidden")==="false"&&jgrid.hideModal("#info_dialog",{jqm:u}),m.remove()}catch{}jgrid.createModal.call(a,{themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",resizeAlso:"infocnt"},b,s,"","",!0),m=$("#info_dialog"),f&&$.each(s.buttons,function(){$("#"+jgrid.jqID(this.id),"#info_id").on("click",{click:this.onClick},function(v){return $.isFunction(v.data.click)&&v.data.click.call(a,v,m),!1})}),$("#closedialog","#info_id").click(function(){return jgrid.hideModal("#info_dialog",{jqm:u,onClose:m.data("onClose")||s.onClose,gb:m.data("gbox")||s.gbox}),!1}),$(".fm-button","#info_dialog").hover(function(){$(this).addClass(h)},function(){$(this).removeClass(h)}),$.isFunction(s.beforeOpen)&&s.beforeOpen(),jgrid.viewModal.call(a,"#info_dialog",{onHide:function(v){v.w.hide().remove(),v.o&&v.o.remove()},modal:s.modal,jqm:u}),$.isFunction(s.afterOpen)&&s.afterOpen();try{m.focus()}catch{}},bindEv:function(e,t){var r=this;$.isFunction(t.dataInit)&&t.dataInit.call(r,e,t),t.dataEvents&&$.each(t.dataEvents,function(){this.data!==void 0?$(e).on(this.type,typeof this.data=="object"&&this.data!==null?$.extend(!0,{},t,this.data):this.data,this.fn):$(e).on(this.type,t,this.fn)})},createEl:function(e,t,r,i,a){var o="",s=this,u=s.p,f=jgrid.info_dialog,c=function(R){return getGridRes.call($(s),R)},h=c("errors.errcap"),g=c("edit"),p=g.msg,m=g.bClose;function b(R,B,T){var H=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","generateValue","postData","selectFilled","rowId","column","mode","cm","iCol"];T!==void 0&&$.isArray(T)&&$.merge(H,T),$.each(B,function(P,V){$.inArray(P,H)===-1&&$(R).attr(P,V)}),B.hasOwnProperty("id")||$(R).attr("id",jgrid.randId())}if(t==null)return"";switch(e){case"textarea":o=document.createElement("textarea"),i?t.cols||$(o).css({width:"100%","box-sizing":"border-box"}):t.cols||(t.cols=19),t.rows||(t.rows=2),(r==="&nbsp;"||r==="&#160;"||r.length===1&&r.charCodeAt(0)===160)&&(r=""),o.value=r,b(o,t),$(o).attr({role:"textbox"});break;case"checkbox":if(o=document.createElement("input"),o.type="checkbox",(r===""||r==null)&&(r=t.hasOwnProperty("defaultValue")?$.isFunction(t.defaultValue)?t.defaultValue.call(s,{cellValue:r,options:t}):t.defaultValue:"false"),t.value){var j=t.value.split(":");r===j[0]&&(o.checked=!0,o.defaultChecked=!0),o.value=r,$(o).data("offval",j[1])}else{var v=String(r).toLowerCase();v.search(/(false|f|0|no|n|off|undefined)/i)<0&&v!==""?(o.checked=!0,o.defaultChecked=!0,o.value=r):o.value="on",$(o).data("offval","off")}b(o,t,["value"]),$(o).attr({role:"checkbox","aria-checked":o.checked?"true":"false"});break;case"select":o=document.createElement("select");var y,S=[],C=null;t.multiple===!0||t.multiple==="multiple"?(y=!0,o.multiple="multiple",$(o).attr("aria-multiselectable","true"),S=r.split(","),S=$.map(S,function(R){return $.trim(R)})):(y=!1,S[0]=$.trim(r)),t.size===void 0&&(t.size=y?3:1);try{C=t.rowId}catch{}if(u&&u.idPrefix&&(C=jgrid.stripPref(u.idPrefix,C)),t.dataUrl===void 0&&t.generateValue&&u.indexByColumnData[t.cm.name]!=null&&(t.value=s.generateValueFromColumnIndex(t.cm.name,t.separator,t.delimiter)),t.dataUrl!==void 0){var w=t.postData||a.postData,x={elem:o,options:t,cm:t.cm,mode:t.mode,rowid:C,iCol:t.iCol,ovm:S};b(o,t,w?["postData"]:void 0),$.ajax($.extend({url:$.isFunction(t.dataUrl)?t.dataUrl.call(s,C,r,String(t.name),x):t.dataUrl,type:"GET",dataType:"html",data:$.isFunction(w)?w.call(s,C,r,String(t.name)):w,context:x,success:function(R,B,T){var H=this.ovm,P=this.elem,V=this.cm,k=this.iCol,O=$.extend({},this.options),N=this.rowid,z=this.mode,I=$.isFunction(O.buildSelect)?O.buildSelect.call(s,R,T,V,k):R;typeof I=="string"&&(I=$($.trim(I)).html()),I&&($(P).append(I),setTimeout(function(){var Q;$("option",P).each(function(ie){ie===0&&P.multiple&&(this.selected=!1),$.inArray($.trim($(this).val()),H)>-1&&(this.selected=!0,Q=!0)}),Q||$("option",P).each(function(){$.inArray($.trim($(this).text()),H)>-1&&(this.selected=!0)}),jgrid.fullBoolFeedback.call(s,O.selectFilled,"jqGridSelectFilled",{elem:P,options:O,cm:V,rowid:N,mode:z,cmName:V!=null?V.name:O.name,iCol:k})},0))}},a||{}))}else t.value&&(jgrid.fillSelectOptions(o,t.value,t.separator===void 0?":":t.separator,t.delimiter===void 0?";":t.delimiter,y,r),b(o,t,["value"]),jgrid.fullBoolFeedback.call(s,t.selectFilled,"jqGridSelectFilled",{elem:o,options:t,cm:t.cm,rowid:C,mode:t.mode,cmName:t.cm!=null?t.cm.name:t.name,iCol:t.iCol}));break;case"text":case"password":case"button":var G;e==="button"?G="button":G="textbox",o=document.createElement("input"),o.type=e,b(o,t),o.value=r,e!=="button"&&(i?t.size||$(o).css({width:"100%","box-sizing":"border-box"}):t.size||(t.size=20)),$(o).attr("role",G);break;case"image":case"file":o=document.createElement("input"),o.type=e,b(o,t);break;case"custom":o=document.createElement("span");try{if($.isFunction(t.custom_element)){var l=t.custom_element.call(s,r,t);if(l instanceof jQuery||jgrid.isHTMLElement(l)||typeof l=="string")l=$(l).addClass("customelement").attr({id:t.id,name:t.name}),$(o).empty().append(l);else throw"editoptions.custom_element returns value of a wrong type"}else throw"editoptions.custom_element is not a function"}catch(R){R==="e1"&&f.call(s,h,"function 'custom_element' "+p.nodefined,m),R==="e2"?f.call(s,h,"function 'custom_element' "+p.novalue,m):f.call(s,h,typeof R=="string"?R:R.message,m)}break}return o},checkDate:function(e,t){var r=function(m){return m%4===0&&(m%100!==0||m%400===0)?29:28},i={},a;if(e=e.toLowerCase(),e.indexOf("/")!==-1?a="/":e.indexOf("-")!==-1?a="-":e.indexOf(".")!==-1?a=".":a="/",e=e.split(a),t=t.split(a),t.length!==3)return!1;var o=-1,s,u=-1,f=-1,c,h;for(c=0;c<e.length;c++)h=isNaN(t[c])?0:parseInt(t[c],10),i[e[c]]=h,s=e[c],s.indexOf("y")!==-1&&(o=c),s.indexOf("m")!==-1&&(f=c),s.indexOf("d")!==-1&&(u=c);e[o]==="y"||e[o]==="yyyy"?s=4:e[o]==="yy"?s=2:s=-1;var g,p=[0,31,29,31,30,31,30,31,31,30,31,30,31];return!(o===-1||(g=i[e[o]].toString(),s===2&&g.length===1&&(s=1),g.length!==s||i[e[o]]===0&&t[o]!=="00")||f===-1||(g=i[e[f]].toString(),g.length<1||i[e[f]]<1||i[e[f]]>12)||u===-1||(g=i[e[u]].toString(),g.length<1||i[e[u]]<1||i[e[u]]>31||i[e[f]]===2&&i[e[u]]>r(i[e[o]])||i[e[u]]>p[i[e[f]]]))},isEmpty:function(e){return!!(e.match(/^\s+$/)||e==="")},checkTime:function(e){var t=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/,r;if(!jgrid.isEmpty(e))if(r=e.match(t),r){if(r[3]){if(r[1]<1||r[1]>12)return!1}else if(r[1]>23)return!1;if(r[2]>59)return!1}else return!1;return!0},checkValues:function(e,t,r,i,a){var o,s,u,f=this,c=f.p,h=c.colModel,g,p=jgrid.isEmpty,m=getGridRes.call($(f),"edit.msg"),b,v=function(C){var w=o[C];return $.isFunction(w)?w.call(f,a):w},j=getGridRes.call($(f),"formatter.date.masks");if(r===void 0){if(typeof t=="string"&&(t=c.iColByName[t]),t===void 0||t<0)return[!0,"",""];g=h[t],o=g.editrules,g.formoptions!=null&&(s=g.formoptions.label)}else o=r,s=i===void 0?"_":i,g=h[t];if(o){if(s||(s=c.colNames!=null?c.colNames[t]:g.label),v("required")===!0&&p(e))return[!1,s+": "+m.required,""];var y=v("required")!==!1;if(v("number")===!0&&!(y===!1&&p(e))&&isNaN(e))return[!1,s+": "+m.number,""];if(o.minValue!==void 0&&!isNaN(o.minValue)&&parseFloat(e)<parseFloat(o.minValue))return[!1,s+": "+m.minValue+" "+o.minValue,""];if(o.maxValue!==void 0&&!isNaN(o.maxValue)&&parseFloat(e)>parseFloat(o.maxValue))return[!1,s+": "+m.maxValue+" "+o.maxValue,""];var S;if(v("email")===!0&&!(y===!1&&p(e))&&(S=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,!S.test(e)))return[!1,s+": "+m.email,""];if(v("integer")===!0&&!(y===!1&&p(e))){if(isNaN(e))return[!1,s+": "+m.integer,""];if(e%1!==0||e.indexOf(".")!==-1)return[!1,s+": "+m.integer,""]}if(v("date")===!0&&!(y===!1&&p(e))&&(g.formatoptions&&g.formatoptions.newformat?(u=g.formatoptions.newformat,j.hasOwnProperty(u)&&(u=j[u])):u=h[t].datefmt||"Y-m-d",!jgrid.checkDate(u,e)))return[!1,s+": "+m.date+" - "+u,""];if(v("time")===!0&&!(y===!1&&p(e))&&!jgrid.checkTime(e))return[!1,s+": "+m.date+" - hh:mm (am/pm)",""];if(v("url")===!0&&!(y===!1&&p(e))&&(S=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,!S.test(e)))return[!1,s+": "+m.url,""];if(o.custom===!0){if(!(y===!1&&p(e)))return $.isFunction(o.custom_func)?(b=o.custom_func.call(f,e,s,t),$.isArray(b)?b:[!1,m.customarray,""]):[!1,m.customfcheck,""]}else if($.isFunction(o.custom)&&!(y===!1&&p(e)))return b=o.custom.call(f,a),$.isArray(b)?b:[!1,m.customarray,""]}return[!0,"",""]}}),jgrid.extend({getColProp:function(e){var t={},r=this[0],i;return r!=null&&r.grid&&(i=r.p.iColByName[e],i!==void 0)?r.p.colModel[i]:t},setColProp:function(e,t){return this.each(function(){var r=this,i=r.p,a;r.grid&&i!=null&&t&&(a=i.iColByName[e],a!==void 0&&$.extend(!0,i.colModel[a],t))})},sortGrid:function(e,t,r){return this.each(function(){var i=this,a=i.grid,o=i.p,s=o.colModel,u=s.length,f,c,h=!1,g;if(a){for(e||(e=o.sortname),typeof t!="boolean"&&(t=!1),c=0;c<u;c++)if(f=s[c],f.index===e||f.name===e){o.frozenColumns===!0&&f.frozen===!0&&(h=a.fhDiv.find("#"+jqID(o.id+"_"+e))),(!h||h.length===0)&&(h=a.headers[c].el),g=f.sortable,(typeof g!="boolean"||g)&&i.sortData(f.index||f.name,c,t,r,h);break}}})},clearBeforeUnload:function(){return this.each(function(){var e=this,t=e.p,r=e.grid,i,a=jgrid.clearArray,o=Object.prototype.hasOwnProperty;$.isFunction(r.emptyRows)&&r.emptyRows.call(e,!0,!0),$(document).off("mousemove.jqGrid mouseup.jqGrid"+t.id),$(e).off();var s,u=r.headers.length;for(s=0;s<u;s++)r.headers[s].el=null;for(i in r)r.hasOwnProperty(i)&&(r.propOrMethod=null);var f=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","clearToolbar","fixScrollOffsetAndhBoxPadding","rebuildRowIndexes","modalAlert","toggleToolbar","triggerToolbar","formatter","addXmlData","addJSONData","ftoolbar","_inlinenav","nav","grid","p"];for(u=f.length,s=0;s<u;s++)o.call(e,f[s])&&(e[f[s]]=null);e._index={},a(t.data),a(t.lastSelectedData),a(t.selarrrow),a(t.savedRow),t.editingInfo={}})},GridDestroy:function(){return this.each(function(){var e=this,t=e.p;if(e.grid&&t!=null){t.pager&&$(t.pager).remove();try{$("#alertmod_"+jqID(t.id)).remove(),$(e).jqGrid("clearBeforeUnload"),$(t.gBox).remove()}catch{}}})},GridUnload:function(){return this.each(function(){var e=this,t=$(e),r=e.p,i=$.fn.jqGrid;e.grid&&(t.removeClass(i.getGuiStyles.call(t,"grid","ui-jqgrid-btable")),r.pager&&(r.pager.substr(1,$.jgrid.uidPref.length)===$.jgrid.uidPref?$(r.pager).remove():$(r.pager).empty().removeClass(i.getGuiStyles.call(t,"pager.pager","ui-jqgrid-pager "+i.getGuiStyles.call(t,"bottom"))).removeAttr("style").removeAttr("dir")),t.jqGrid("clearBeforeUnload"),t.removeAttr("style").removeAttr("tabindex").removeAttr("role").removeAttr("aria-labelledby").removeAttr("style"),t.empty(),t.insertBefore(r.gBox).show(),$(r.pager).insertBefore(r.gBox).show(),$(r.gBox).remove())})},setGridState:function(e){return this.each(function(){var t=this,r=t.p,i=t.grid,a=i.cDiv,o=$(i.uDiv),s=$(i.ubDiv);if(!(!i||r==null)){var u=function(h){return base.getIconRes.call(t,"gridMinimize."+h)},f=u("visible"),c=u("hidden");e==="hidden"?($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv",r.gView).slideUp("fast"),r.pager&&$(r.pager).slideUp("fast"),r.toppager&&$(r.toppager).slideUp("fast"),r.toolbar[0]===!0&&(r.toolbar[1]==="both"&&s.slideUp("fast"),o.slideUp("fast")),r.footerrow&&$(".ui-jqgrid-sdiv",r.gBox).slideUp("fast"),$(".ui-jqgrid-titlebar-close span",a).removeClass(f).addClass(c),r.gridstate="hidden"):e==="visible"&&($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv",r.gView).slideDown("fast"),r.pager&&$(r.pager).slideDown("fast"),r.toppager&&$(r.toppager).slideDown("fast"),r.toolbar[0]===!0&&(r.toolbar[1]==="both"&&s.slideDown("fast"),o.slideDown("fast")),r.footerrow&&$(".ui-jqgrid-sdiv",r.gBox).slideDown("fast"),$(".ui-jqgrid-titlebar-close span",a).removeClass(c).addClass(f),r.gridstate="visible")}})},filterToolbar:function(e){return this.each(function(){var t=this,r=t.grid,i=$(t),a=t.p,o=jgrid.info_dialog,s=jgrid.htmlEncode;if(!this.ftoolbar){var u=$.extend(!0,{autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:a.prmNames.filters,stringResult:!1,groupOp:"AND",defaultSearch:"bw",idMode:"new",searchOperators:!1,resetIcon:"&times;",applyLabelClasses:!0,loadFilterDefaults:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^",in:"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},jgrid.search,a.searching||{},e||{}),f=a.colModel,c=function(O){return getGridRes.call(i,O)},h=c("errors.errcap"),g=c("edit.bClose"),p=c("edit.msg"),m=getGuiStyles.call(t,"states.hover"),b=getGuiStyles.call(t,"states.select"),v=getGuiStyles.call(t,"filterToolbar.dataField"),j={},y=function(O){var N="gs_";switch(u.idMode){case"compatibility":N+=a.idPrefix;break;case"new":N+=a.id+"_";break}return N+O},S=function(O){return"#"+jqID(y(O))},C=function(O){var N=(O.value||"").split(":");return{on:N[0]||"on",off:N[1]||"off"}},w=function(O){var N,z,I=a.postData[u.sFilter],Q={},ie,X,re=a.iColByName,ee,Z;if(O)for(z=0;z<f.length;z++)ee=f[z],ee.search!==!1&&(Z=ee.searchoptions||{},Q[ee.name]={op:Z.sopt?Z.sopt[0]:ee.stype==="select"||ee.stype==="checkbox"?"eq":u.defaultSearch,data:Z.defaultValue!==void 0?Z.defaultValue:""});if(!I||!a.search)return Q;if(typeof I=="string")try{I=$.parseJSON(I)}catch{I={}}else I=I||{};if(ie=I.rules||{},I==null||I.groupOp!=null&&u.groupOp!=null&&I.groupOp.toUpperCase()!==u.groupOp.toUpperCase()||ie==null||ie.length===0||I.groups!=null&&I.groups.length>0)return Q;for(z=0;z<ie.length;z++)for(X=ie[z],ee=f[re[X.field]],N=0;N<f.length;N++)if(ee=f[N],!((ee.index||ee.name)!==X.field||ee.search===!1)){if(Z=ee.searchoptions||{},Z.sopt){if($.inArray(X.op,Z.sopt)<0)continue}else if(ee.stype==="select"||ee.stype==="checkbox"){if(X.op!=="eq")continue}else if(X.op!==u.defaultSearch)continue;Q[ee.name]={op:X.op,data:X.data}}return Q},x=function(O,N){switch(N){case 1:O.data("state",1).prop({checked:!0,indeterminate:!1});break;case 0:O.data("state",0).prop({checked:!1,indeterminate:!1});break;default:O.data("state",-1).prop({checked:!1,indeterminate:!0});break}},G=function(){var O={},N=0,z={};$.each(f,function(){var ee=this,Z=ee.index||ee.name,te,J,he=ee.searchoptions||{},pe=$(S(ee.name),ee.frozen===!0&&a.frozenColumns===!0?r.fhDiv:r.hDiv),Fe=function(Oe,Ie){var Pe=ee.formatoptions||{};return Pe[Oe]!==void 0?Pe[Oe]:c("formatter."+(Ie||ee.formatter)+"."+Oe)},be=function(Oe){var Ie=Fe("thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return Oe.replace(new RegExp(Ie,"g"),"")};if(u.searchOperators?J=pe.parent().prev().children("a").data("soper")||u.defaultSearch:J=he.sopt?he.sopt[0]:ee.stype==="select"||ee.stype==="checkbox"?"eq":u.defaultSearch,ee.stype==="custom"&&$.isFunction(he.custom_value)&&pe.length>0&&pe[0].nodeName.toUpperCase()==="SPAN")te=he.custom_value.call(t,pe.children(".customelement").first(),"get");else if(ee.stype==="select")pe.prop("multiple")?(te=pe.val(),te==null||te.length===0?te="":te=te.join(a.inFilterSeparator||",")):te=pe.val();else if(ee.stype==="checkbox"){var ue=C(he);switch(pe.data("state")){case-1:te="";break;case 0:te=ue.off;break;default:te=ue.on;break}}else switch(te=$.trim(pe.val()),ee.formatter){case"integer":te=be(te).replace(Fe("decimalSeparator","number"),"."),te!==""&&(te=String(parseInt(te,10)));break;case"number":te=be(te).replace(Fe("decimalSeparator"),"."),te!==""&&String(te).charAt(0)==="0"&&(te=String(parseFloat(te)));break;case"currency":var ve=Fe("prefix"),_e=Fe("suffix");ve&&ve.length&&te.substr(0,ve.length)===ve&&(te=te.substr(ve.length)),_e&&_e.length&&te.length>_e.length&&te.substr(te.length-_e.length,_e.length)===_e&&(te=te.substr(0,te.length-_e.length)),te=be(te).replace(Fe("decimalSeparator"),"."),te!==""&&(te=String(parseFloat(te)));break}if(te||J==="nu"||J==="nn"||$.inArray(J,a.customUnaryOperations)>=0)O[Z]=te,z[Z]=J,N++;else if(O.hasOwnProperty(Z)&&delete O[Z],!(u.stringResult||u.searchOperators||a.datatype==="local"))try{a.postData!=null&&a.postData.hasOwnProperty(Z)&&delete a.postData[Z]}catch{}});var I=N>0;if(u.stringResult||u.searchOperators||a.datatype==="local"){var Q='{"groupOp":"'+u.groupOp+'","rules":[',ie=0;$.each(O,function(ee,Z){ie>0&&(Q+=","),Q+='{"field":"'+ee+'",',Q+='"op":"'+z[ee]+'",',Z+="",Q+='"data":"'+Z.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',ie++}),Q+="]}",a.postData[u.sFilter]=Q,$.each([u.sField,u.sValue,u.sOper],function(ee,Z){a.postData.hasOwnProperty(Z)&&delete a.postData[Z]})}else $.extend(a.postData,O);var X;a.searchurl&&(X=a.url,i.jqGrid("setGridParam",{url:a.searchurl}));var re=i.triggerHandler("jqGridToolbarBeforeSearch")==="stop";!re&&$.isFunction(u.beforeSearch)&&(re=u.beforeSearch.call(t)),re||i.jqGrid("setGridParam",{search:I}).trigger("reloadGrid",[$.extend({page:1},u.reloadGridSearchOptions||{})]),X&&i.jqGrid("setGridParam",{url:X}),i.triggerHandler("jqGridToolbarAfterSearch"),$.isFunction(u.afterSearch)&&u.afterSearch.call(t)},l=function(O){var N={},z=0,I;O=typeof O!="boolean"?!0:O,$.each(f,function(){var Z,te=this,J=$(S(te.name),te.frozen===!0&&a.frozenColumns===!0?r.fhDiv:r.hDiv),he,pe=te.searchoptions||{};switch(pe.defaultValue!==void 0&&(Z=pe.defaultValue),I=te.index||te.name,te.stype){case"checkbox":x(J,-1);break;case"select":if(he=J.length>0?!J[0].multiple:!0,J.find("option").each(function(Fe){if(this.selected=Fe===0&&he,$(this).val()===Z)return this.selected=!0,!1}),Z!==void 0)N[I]=Z,z++;else try{delete a.postData[I]}catch{}break;case"text":if(J.val(Z||""),Z!==void 0)N[I]=Z,z++;else try{delete a.postData[I]}catch{}break;case"custom":$.isFunction(pe.custom_value)&&J.length>0&&J[0].nodeName.toUpperCase()==="SPAN"&&(Z===void 0&&(Z=""),pe.custom_value.call(t,J.children(".customelement").first(),"set",Z));break}});var Q=z>0;if(a.resetsearch=!0,u.stringResult||u.searchOperators||a.datatype==="local"){var ie='{"groupOp":"'+u.groupOp+'","rules":[',X=0;$.each(N,function(Z,te){X>0&&(ie+=","),ie+='{"field":"'+Z+'",',ie+='"op":"eq",',te+="",ie+='"data":"'+te.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',X++}),ie+="]}",a.postData[u.sFilter]=ie,$.each([u.sField,u.sValue,u.sOper],function(Z,te){a.postData.hasOwnProperty(te)&&delete a.postData[te]})}else $.extend(a.postData,N);var re;a.searchurl&&(re=a.url,i.jqGrid("setGridParam",{url:a.searchurl}));var ee=i.triggerHandler("jqGridToolbarBeforeClear")==="stop";!ee&&$.isFunction(u.beforeClear)&&(ee=u.beforeClear.call(t)),ee||O&&i.jqGrid("setGridParam",{search:Q}).trigger("reloadGrid",[$.extend({page:1},u.reloadGridResetOptions||{})]),re&&i.jqGrid("setGridParam",{url:re}),i.triggerHandler("jqGridToolbarAfterClear"),$.isFunction(u.afterClear)&&u.afterClear.call(t)},R=function(){var O=$("tr.ui-search-toolbar",r.hDiv),N=a.frozenColumns===!0?$("tr.ui-search-toolbar",r.fhDiv):!1;O.css("display")==="none"?(O.show(),N&&N.show()):(O.hide(),N&&N.hide()),a.frozenColumns===!0&&(i.jqGrid("destroyFrozenColumns"),i.jqGrid("setFrozenColumns"))},B=c("search.odata")||[],T=a.customSortOperations,H=function(O,N,z){$("#sopt_menu").remove(),N=parseInt(N,10),z=parseInt(z,10)+18;var I,Q,ie=0,X=[],re=$(O).data("soper"),ee=$(O).data("colname"),Z=$(".ui-jqgrid-view").css("font-size")||"11px",te="<ul id='sopt_menu' class='"+getGuiStyles.call(t,"searchToolbar.menu","ui-search-menu")+"' role='menu' tabindex='0' style='z-index:9999;display:block;font-size:"+Z+";left:"+N+"px;top:"+z+"px;'>";if(ie=a.iColByName[ee],ie!==void 0){var J=f[ie],he=$.extend({},J.searchoptions),pe,Fe,be,ue,ve;for(he.sopt||(he.sopt=[],he.sopt[0]=J.stype==="select"||J.stype==="checkbox"?"eq":u.defaultSearch),$.each(B,function(){X.push(this.oper)}),T!=null&&$.each(T,function(_e){X.push(_e)}),ie=0;ie<he.sopt.length;ie++)be=he.sopt[ie],Q=$.inArray(be,X),Q!==-1&&(pe=B[Q],pe!==void 0?(ue=u.operands[be],ve=pe.text):T!=null&&(Fe=T[be],ue=Fe.operand,ve=Fe.text),I=re===be?b:"",te+='<li class="'+getGuiStyles.call(t,"searchToolbar.menuItem","ui-jqgrid-menu-item "+I)+'" role="presentation"><a class="'+getGuiStyles.call(t,"searchToolbar.menuItemButton","g-menu-item")+'" tabindex="0" role="menuitem" value="'+s(be)+'" data-oper="'+s(ue)+'"><table><tr><td style="width:25px">'+s(ue)+"</td><td>"+s(ve)+"</td></tr></table></a></li>");te+="</ul>",$("body").append(te),$("#sopt_menu > li > a").hover(function(){$(this).addClass(m)},function(){$(this).removeClass(m)}).click(function(){var _e=$(this).attr("value"),Oe=$(this).data("oper");if(i.triggerHandler("jqGridToolbarSelectOper",[_e,Oe,O]),$("#sopt_menu").hide(),$(O).data("soper",_e).text(Oe),u.autosearch===!0){var Ie=$(O).parent().next().children()[0];($(Ie).val()||_e==="nu"||_e==="nn"||$.inArray(_e,a.customUnaryOperations)>=0)&&G()}})}},P,V=[],k=$("<tr></tr>",{class:"ui-search-toolbar",role:"row form"});u.loadFilterDefaults&&(j=w()||{}),$.each(f,function(O){var N=this,z,I="filter",Q,ie,X,re,ee=N.searchoptions||{},Z=N.editoptions||{},te=$("<th></th>",{class:getGuiStyles.call(t,"colHeaders","ui-th-column ui-th-"+a.direction+" "+(u.applyLabelClasses&&N.labelClasses||"")),role:"gridcell","aria-describedby":a.id+"_"+N.name}),J=$("<div></div>"),he,pe,Fe=$("<table class='ui-search-table'><tbody><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear' style='width:1px'></td></tr></tbody></table>"),be=Fe.children("tbody").children("tr").children("td"),ue=be.eq(0),ve=be.eq(1),_e=be.eq(2);if(this.hidden===!0&&te.css("display","none"),this.search=this.search!==!1,this.stype===void 0&&(this.stype="text"),z=$.extend({mode:I,name:N.name,cm:N,iCol:O,id:y(N.name)},ee),this.search){if(u.searchOperators){for(a.search&&j[this.name]!=null?X=j[this.name].op:X=z.sopt?z.sopt[0]:N.stype==="select"||N.stype==="checkbox"?"eq":u.defaultSearch,re=0;re<B.length;re++)if(B[re].oper===X){ie=u.operands[X]||"";break}if(ie===void 0&&T!=null){var Oe;for(Oe in T)if(T.hasOwnProperty(Oe)&&Oe===X){ie=T[Oe].operand;break}}ie===void 0&&(ie="="),ue.append("<a title='"+(z.searchtitle!=null?z.searchtitle:c("search.operandTitle"))+"' data-soper='"+X+"' class='"+getGuiStyles.call(t,"searchToolbar.operButton","soptclass")+"' data-colname='"+this.name+"'>"+ie+"</a>")}if(ue.data("colindex",O),(z.sopt==null||z.sopt.length===1)&&ue.hide(),a.search&&j[this.name]!=null&&(z.defaultValue=j[this.name].data),z.clearSearch===void 0&&(z.clearSearch=this.stype==="text"),z.clearSearch){var Ie=$.isFunction(u.resetTitle)?u.resetTitle.call(t,{options:u,cm:N,cmName:N.name,iCol:O}):(c("search.resetTitle")||"Clear Search Value")+" "+jgrid.stripHtml(a.colNames[O]);_e.append("<a title='"+Ie+"' aria-label='"+Ie+"' class='"+getGuiStyles.call(t,"searchToolbar.clearButton","clearsearchclass")+"'><span>"+u.resetIcon+"</span></a>")}else _e.hide();switch(J.append(Fe),this.stype){case"checkbox":var Pe=z.defaultValue!==void 0?z.defaultValue:"-1";pe=$("<input role='search' type='checkbox' class='"+v+"' name='"+(N.index||N.name)+"' id='"+y(N.name)+"' aria-labelledby='jqgh_"+a.id+"_"+N.name+"' data-state='"+Pe+"'/>"),Pe==="-1"?pe.prop("indeterminate",!0):Pe==="1"&&pe.prop("checked",!0),pe.click(function(){var De=$(this);switch(De.data("state")){case-1:x(De,1);break;case 0:x(De,-1);break;default:x(De,0);break}u.autosearch===!0&&G()}),ve.append(pe),z.attr&&pe.attr(z.attr),V.push({elem:pe[0],options:z});break;case"select":if(Q=this.surl||z.dataUrl,Q)$.ajax($.extend({url:Q,context:{$tdInput:ve,options:z,cm:N,iCol:O},dataType:"html",success:function(De,U,K){var ne=this.cm,ce=this.iCol,de=this.options,qe,Ge,Be=this.$tdInput,xe;de.buildSelect!==void 0?(qe=de.buildSelect.call(t,De,K,ne,ce),qe&&Be.append(qe)):Be.append(De),xe=Be.children("select"),xe.attr({name:ne.index||ne.name,id:y(ne.name)}),de.attr&&xe.attr(de.attr),xe.addClass(v),xe.css({width:"100%"}),xe.find("option[value='']").length===0&&typeof z.noFilterText=="string"&&(Ge=document.createElement("option"),Ge.value="",Ge.innerHTML=z.noFilterText,xe.prepend(Ge),$(xe[0].options[xe[0].selectedIndex]).attr("selected")==null&&!xe[0].multiple&&(xe[0].selectedIndex=0)),xe[0].multiple&&xe.find("option[selected]").length===0&&xe[0].selectedIndex!==-1&&(xe[0].options[xe[0].selectedIndex].selected=!1),de.defaultValue!==void 0&&xe.val(de.defaultValue),jgrid.bindEv.call(t,xe[0],de),jgrid.fullBoolFeedback.call(t,de.selectFilled,"jqGridSelectFilled",{elem:xe[0],options:de,cm:ne,cmName:ne.name,iCol:ce,mode:I}),u.autosearch===!0&&xe.change(function(){return G(),!1})}},jgrid.ajaxOptions,a.ajaxSelectOptions||{}));else{var Je,Ve,Qe;if(N.searchoptions?(Je=ee.value===void 0?Z.value||"":ee.value,Ve=ee.separator===void 0?Z.separator||":":ee.separator,Qe=ee.delimiter===void 0?Z.delimiter||";":ee.delimiter):N.editoptions&&(Je=Z.value===void 0?"":Z.value,Ve=Z.separator===void 0?":":Z.separator,Qe=Z.delimiter===void 0?";":Z.delimiter),ee.generateValue&&a.indexByColumnData[N.name]!=null&&(Je=t.generateValueFromColumnIndex(N.name,Ve,Qe)),Je){he=document.createElement("select"),he.style.width="100%",pe=$(he).attr({name:N.index||N.name,role:"search",id:y(N.name),"aria-describedby":a.id+"_"+N.name}),z.attr&&pe.attr(z.attr);var tt=jgrid.fillSelectOptions(he,Je,Ve,Qe,z.attr!=null&&z.attr.multiple);if(!tt&&typeof z.noFilterText=="string"){var lt=document.createElement("option");lt.value="",lt.innerHTML=z.noFilterText,lt.selected=!0,pe.prepend(lt)}z.defaultValue!==void 0&&pe.val(z.defaultValue),pe.addClass(v),V.push({elem:he,options:z}),ve.append(he),jgrid.fullBoolFeedback.call(t,z.selectFilled,"jqGridSelectFilled",{elem:he,options:N.searchoptions||Z,cm:N,cmName:N.name,iCol:O,mode:I}),u.autosearch===!0&&pe.change(function(){return G(),!1})}}break;case"text":if(pe=$("<input role='search' type='text' class='"+v+"' name='"+(N.index||N.name)+"' id='"+y(N.name)+"' aria-labelledby='jqgh_"+a.id+"_"+N.name+"' value='"+(z.defaultValue!==void 0?z.defaultValue:"")+"'/>"),ve.append(pe),N.createColumnIndex&&z.generateDatalist){var dt="dl_"+y(N.name),it=i.jqGrid("generateDatalistFromColumnIndex",N.name);it!=null&&it.length>0&&(pe.attr("list",dt),ve.append(it.attr("id",dt)))}z.attr&&pe.attr(z.attr),V.push({elem:pe[0],options:z}),u.autosearch===!0&&(u.searchOnEnter?pe.keypress(function(De){var U=De.charCode||De.keyCode||0;return U===13?(G(),!1):this}):pe.keydown(function(De){var U=De.which;switch(U){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:P&&clearTimeout(P),P=setTimeout(function(){G()},u.autosearchDelay)}}));break;case"custom":ve.append("<span style='width:100%;padding:0;box-sizing:border-box;' name='"+(N.index||N.name)+"' id='"+y(N.name)+"'/>");try{if($.isFunction(z.custom_element)){var Le=z.custom_element.call(t,z.defaultValue!==void 0?z.defaultValue:"",z);if(Le)Le=$(Le).addClass("customelement"),J.find("span[name='"+(N.index||N.name)+"']").append(Le);else throw"e2"}else throw"e1"}catch(De){De==="e1"&&o.call(t,h,"function 'custom_element' "+p.nodefined,g),De==="e2"?o.call(t,h,"function 'custom_element' "+p.novalue,g):o.call(t,h,typeof De=="string"?De:De.message,g)}break}}te.append(J),te.find(".ui-search-oper .soptclass,.ui-search-clear .clearsearchclass").hover(function(){$(this).addClass(m)},function(){$(this).removeClass(m)}),k.append(te),u.searchOperators||ue.hide()}),$(r.hDiv).find(">div>.ui-jqgrid-htable>thead").append(k),$.each(V,function(){jgrid.bindEv.call(t,this.elem,this.options)}),u.searchOperators&&($(".soptclass",k).click(function(O){var N=$(this).offset(),z=N.left,I=N.top;H(this,z,I),O.stopPropagation()}),$("body").on("click",function(O){O.target.className!=="soptclass"&&$("#sopt_menu").hide()})),$(".clearsearchclass",k).click(function(){var O=$(this).closest(".ui-search-clear"),N=O.siblings(".ui-search-oper"),z=N.children("a"),I=z.data("soper"),Q,ie,X=parseInt(N.data("colindex"),10),re=O.siblings(".ui-search-input"),ee=f[X],Z=$.extend({},ee.searchoptions||{}),te=Z.defaultValue||"";switch(ee.stype){case"select":te?re.find("select").val(te):re.find("select")[0].selectedIndex=0;break;case"checkbox":x(re.find("input[type=checkbox]"),-1);break;default:re.find("input").val(te);break}(I==="nu"||I==="nn"||$.inArray(I,a.customUnaryOperations)>=0)&&(Q=Z.sopt?Z.sopt[0]:ee.stype==="select"||ee.stype==="checkbox"?"eq":u.defaultSearch,ie=T!=null&&T[Q]!=null?T[Q].operand:u.operands[Q]||"",z.data("soper",Q).text(ie)),u.autosearch===!0&&G()}),t.ftoolbar=!0,t.triggerToolbar=G,t.clearToolbar=l,t.toggleToolbar=R,a.frozenColumns===!0&&(i.jqGrid("destroyFrozenColumns"),i.jqGrid("setFrozenColumns")),i.on("jqGridRefreshFilterValues.filterToolbar"+(u.loadFilterDefaults?" jqGridAfterLoadComplete.filterToolbar":""),function(){var O,N,z=w(!0)||{},I,Q,ie,X,re;if(!(!u.stringResult&&!u.searchOperators&&a.datatype!=="local"&&a.search)){for(O in z)if(z.hasOwnProperty(O)&&(N=z[O],I=$(S(O)),X=I.closest("th.ui-th-column"),I.length>0&&X.length>0)){if(re=(a.colModel[X[0].cellIndex]||{}).searchoptions||{},I[0].tagName.toUpperCase()==="SELECT"&&I[0].multiple)I.val(N.data.split(a.inFilterSeparator||","));else if(I.is("input[type=checkbox]")){var ee=C(re);x(I,N.data===ee.on?1:N.data===ee.off?0:-1)}else if(I.find(".customelement").length>0&&$.isFunction(re.custom_value)){var Z=re.custom_value.call(t,I.find(".customelement").first(),"get");N.data===""&&re.defaultValue!==void 0&&(N.data=re.defaultValue),Z===void 0&&(Z=""),N.data!==Z&&String(N.data)!==String(Z)&&re.custom_value.call(t,I.find(".customelement").first(),"set",N.data)}else N.data===""&&re.defaultValue!==void 0&&(N.data=re.defaultValue),$.trim(I.val())!==String(N.data)&&I.val(N.data);Q=I.closest(".ui-search-input").siblings(".ui-search-oper").children(".soptclass"),Q.data("soper",N.op),Q.text(u.operands[N.op]||(a.customSortOperations[N.op]||{}).operand)}for(ie=0;ie<a.colModel.length;ie++)O=a.colModel[ie].name,z.hasOwnProperty(O)||$(S(O)).val("")}})}})},destroyFilterToolbar:function(){return this.each(function(){var e=this;e.ftoolbar&&(e.triggerToolbar=null,e.clearToolbar=null,e.toggleToolbar=null,e.ftoolbar=!1,$(e.grid.hDiv).find("table thead tr.ui-search-toolbar").remove(),e.p.frozenColumns===!0&&$(e).jqGrid("destroyFrozenColumns").jqGrid("setFrozenColumns"))})},destroyGroupHeader:function(e){return e===void 0&&(e=!0),this.each(function(){var t=this,r,i,a,o,s=t.grid,u=t.p.colModel,f,c=$("table.ui-jqgrid-htable thead",s.hDiv);if(s){$(t).off(".setGroupHeaders");var h=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),g=s.headers;for(r=0,i=g.length;r<i;r++){f=u[r].hidden?"none":"",a=$(g[r].el).width(g[r].width).css("display",f);try{a.removeAttr("rowSpan")}catch{a.attr("rowSpan",1)}h.append(a),o=a.children("span.ui-jqgrid-resize"),o.length>0&&(o[0].style.height=""),a.children("div")[0].style.top=""}$(c).children("tr.ui-jqgrid-labels").remove(),$(c).prepend(h),e===!0&&$(t).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(e){return e=$.extend({useColSpanStyle:!1,applyLabelClasses:!0,groupHeaders:[]},e||{}),this.each(function(){this.p.groupHeader=e;var t=this,r,i,a=0,o,s,u,f,c,h,g,p,m,b,v=t.p,j=v.colModel,y=j.length,S=t.grid.headers,C,w,x=$("table.ui-jqgrid-htable",t.grid.hDiv),G=jgrid.isCellClassHidden,l=x.children("thead").children("tr.ui-jqgrid-labels"),R=l.last().addClass("jqg-second-row-header"),B=x.children("thead"),T=x.find(".jqg-first-row-header");T[0]===void 0?T=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):T.empty();var H=function(P,V){var k;for(k=0;k<V.length;k++)if(V[k].startColumnName===P)return V[k];return 0};for($(t).prepend(B),o=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),r=0;r<y;r++)if(u=S[r].el,f=$(u),i=j[r],c={height:"0",width:S[r].width+"px",display:i.hidden?"none":""},$("<th>",{role:"gridcell"}).css(c).addClass("ui-first-th-"+v.direction+(e.applyLabelClasses?" "+(i.labelClasses||""):"")).appendTo(T),u.style.width="",w=getGuiStyles.call(t,"colHeaders","ui-th-column-header ui-th-"+v.direction+" "+(e.applyLabelClasses&&i.labelClasses||"")),g=H(i.name,e.groupHeaders),g){for(p=g.numberOfColumns,m=g.titleText,b=0,h=0;h<p&&r+h<y;h++)!j[r+h].hidden&&!G(j[r+h].classes)&&b++;s=$("<th>").addClass(w).html(m||"&nbsp;"),b>0&&s.attr("colspan",String(b)),v.headertitles&&s.attr("title",s.text()),b===0&&s.hide(),f.before(s),o.append(u),a=p-1}else a===0?e.useColSpanStyle?f.attr("rowspan",l.length+1):($("<th>").addClass(w).css({display:i.hidden?"none":"","border-top":"0 none"}).insertBefore(f),o.append(u)):(o.append(u),a--);C=$(t).children("thead"),C.prepend(T),o.insertAfter(R),x.prepend(C),$(t).triggerHandler("jqGridAfterSetGroupHeaders")})},getNumberOfFrozenColumns:function(){var e=this;if(e.length===0)return 0;e=e[0];var t=e.p.colModel,r=t.length,i=-1,a;for(a=0;a<r&&t[a].frozen===!0;a++)i=a;return i+1},setFrozenColumns:function(e){return e=e||{},this.each(function(){var t=this,r=$(t),i=t.p,a=t.grid;if(!(!a||i==null||i.frozenColumns===!0)){var o=i.colModel,s,u=o.length,f=-1,c=!1,h=[],g,p=jqID(i.id),m=getGuiStyles.call(t,"states.hover");if(!(i.subGrid===!0||i.treeGrid===!0||i.scroll)){for(s=0;s<u&&o[s].frozen===!0;s++)c=!0,f=s,h.push("#jqgh_"+p+"_"+jqID(o[s].name));if(i.sortable){g=$(a.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");try{g.sortable("destroy")}catch{}r.jqGrid("setGridParam",{sortable:{options:{items:h.length>0?">th:not(:has("+h.join(",")+"),:hidden)":">th:not(:hidden)"}}}),r.jqGrid("sortableColumns",g)}if(f>=0&&c){var b=i.caption?$(a.cDiv).outerHeight():0,v=$(".ui-jqgrid-htable",i.gView).height();i.toppager&&(b=b+$(a.topDiv).outerHeight()),i.toolbar[0]===!0&&i.toolbar[1]!=="bottom"&&(b=b+$(a.uDiv).outerHeight()),a.fhDiv=$("<div style='position:absolute;overflow:hidden;"+(i.direction==="rtl"?"right:0;border-top-left-radius:0;":"left:0;border-top-right-radius:0;")+"top:"+b+"px;height:"+v+"px;' class='"+getGuiStyles.call(t,"hDiv","frozen-div ui-jqgrid-hdiv")+"'></div>"),a.fbDiv=$("<div style='position:absolute;overflow:hidden;"+(i.direction==="rtl"?"right:0;":"left:0;")+"top:"+(parseInt(b,10)+parseInt(v,10)+1)+"px;overflow:hidden;' class='frozen-bdiv ui-jqgrid-bdiv'></div>"),$(i.gView).append(a.fhDiv);var j=$(".ui-jqgrid-htable",i.gView).clone(!0),y=j[0].tHead.rows;if(i.groupHeader){$(y[0].cells).filter(":gt("+f+")").remove(),$(y).filter(".jqg-third-row-header").each(function(){$(this).children("th[id]").each(function(){var k=$(this).attr("id"),O;k&&k.substr(0,t.id.length+1)===t.id+"_"&&(O=k.substr(t.id.length+1),i.iColByName[O]>f&&$(this).remove())})});var S=-1,C=-1,w,x;$(y).filter(".jqg-second-row-header").children("th").each(function(){if(w=parseInt($(this).attr("colspan")||1,10),x=parseInt($(this).attr("rowspan")||1,10),x>1?(S++,C++):w&&(S=S+w,C++),S===f)return!1}),S!==f&&(C=f),$(y).filter(".jqg-second-row-header,.ui-search-toolbar").each(function(){$(this).children(":gt("+C+")").remove()})}else $(y).each(function(){$(this).children(":gt("+f+")").remove()});if($(j).width(1),$(a.fhDiv).append(j).scroll(function(){this.scrollLeft=0}),i.footerrow){var G=$(".ui-jqgrid-bdiv",i.gView).height();a.fsDiv=$("<div style='position:absolute;"+(i.direction==="rtl"?"right:0;":"left:0;")+"top:"+(parseInt(b,10)+parseInt(v,10)+parseInt(G,10)+1)+"px;' class='frozen-sdiv ui-jqgrid-sdiv'></div>"),$(i.gView).append(a.fsDiv);var l=$(".ui-jqgrid-ftable",i.gView).clone(!0);$("tr",l).each(function(){$("td:gt("+f+")",this).remove()}),$(l).width(1),$(a.fsDiv).append(l)}$(i.gView).append(a.fbDiv),$(a.bDiv).scroll(function(){$(a.fbDiv).scrollTop($(this).scrollTop())}),$(a.fbDiv).on("mousewheel.setFrozenColumns DOMMouseScroll.setFrozenColumns",function(k){a.bDiv.scrollTop+=$.isFunction(e.mouseWheel)?e.mouseWheel.call(t,k):k.type==="mousewheel"?-k.originalEvent.wheelDelta/10:k.originalEvent.detail*6}),i.hoverrows===!0&&$(i.idSel).off("mouseover.jqGrid mouseout.jqGrid");var R=function(k,O){var N=k.height();Math.abs(N-O)>=1&&O>0&&(k.height(O),N=k.height(),Math.abs(O-N)>=1&&k.height(O+Math.round(O-N)))},B=function(k,O){var N=k.width();Math.abs(N-O)>=1&&(k.width(O),N=k.width(),Math.abs(O-N)>=1&&k.width(O+Math.round(O-N)))},T=function(k,O,N,z){var I,Q,ie,X,re,ee,Z,te,J,he,pe=$(O).position().top,Fe,be,ue;if(k!=null&&k.length>0){if(k[0].scrollTop=O.scrollTop,k.css(i.direction==="rtl"?{top:pe,right:0}:{top:pe,left:0}),ie=k.children("table").children("thead").children("tr"),X=$(O).children("div").children("table").children("thead").children("tr"),X.length===0&&k.children("table").length>0&&(ie=$(k.children("table")[0].rows),X=$($(O).children("div").children("table")[0].rows)),Q=Math.min(ie.length,X.length),Fe=Q>0?$(ie[0]).position().top:0,be=Q>0?$(X[0]).position().top:0,N>=0){for(z>=0&&(Q=Math.min(z+1,Q)),I=N;I<Q;I++)if(re=$(X[I]),re.css("display")!=="none"&&re.is(":visible")){if(pe=re.position().top,ee=$(ie[I]),Z=ee.position().top,te=re.height(),i.groupHeader!=null&&i.groupHeader.useColSpanStyle)for(ue=re[0].cells,s=0;s<ue.length;s++)he=ue[s],he!=null&&he.nodeName.toUpperCase()==="TH"&&(te=Math.max(te,$(he).height()));J=te+(pe-be)+(Fe-Z),R(ee,J)}}R(k,O.clientHeight)}},H={resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},P={header:H,resizeFooter:!0,body:H};r.on("jqGridAfterGridComplete.setFrozenColumns",function(){$(i.idSel+"_frozen").remove(),$(a.fbDiv).height(a.hDiv.clientHeight);var k=$(this).clone(!0),O=k[0].rows,N=r[0].rows;if($(O).filter("tr[role=row]").each(function(){$(this.cells).filter("td[role=gridcell]:gt("+f+")").remove()}),a.fbRows=O,k.width(1).attr("id",i.id+"_frozen"),k.appendTo(a.fbDiv),i.hoverrows===!0){var z=function(I,Q,ie){$(I)[Q](m),$(ie[I.rowIndex])[Q](m)};$(O).filter(".jqgrow").hover(function(){z(this,"addClass",N)},function(){z(this,"removeClass",N)}),$(N).filter(".jqgrow").hover(function(){z(this,"addClass",O)},function(){z(this,"removeClass",O)})}T(a.fhDiv,a.hDiv,0,-1),T(a.fbDiv,a.bDiv,0,-1),a.sDiv&&T(a.fsDiv,a.sDiv,0,-1)});var V=function(k){$(a.fbDiv).scrollTop($(a.bDiv).scrollTop()),k.header.resizeDiv&&T(a.fhDiv,a.hDiv,k.header.resizedRows.iRowStart,k.header.resizedRows.iRowEnd),k.body.resizeDiv&&T(a.fbDiv,a.bDiv,k.body.resizedRows.iRowStart,k.body.resizedRows.iRowEnd),k.resizeFooter&&a.sDiv&&k.resizeFooter&&T(a.fsDiv,a.sDiv,0,-1);var O=a.fhDiv[0].clientWidth;k.header.resizeDiv&&a.fhDiv!=null&&a.fhDiv.length>=1&&R($(a.fhDiv),a.hDiv.clientHeight),k.body.resizeDiv&&a.fbDiv!=null&&a.fbDiv.length>0&&B($(a.fbDiv),O),k.resizeFooter&&a.fsDiv!=null&&a.fsDiv.length>=0&&B($(a.fsDiv),O)};$(i.gBox).on("resizestop.setFrozenColumns",function(){setTimeout(function(){V(P)},50)}),r.on("jqGridInlineEditRow.setFrozenColumns jqGridInlineAfterRestoreRow.setFrozenColumns jqGridInlineAfterSaveRow.setFrozenColumns jqGridAfterEditCell.setFrozenColumns jqGridAfterRestoreCell.setFrozenColumns jqGridAfterSaveCell.setFrozenColumns jqGridResizeStop.setFrozenColumns",function(k,O){var N=r.jqGrid("getInd",O);V({header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:N,iRowEnd:N}}})}),r.on("jqGridResizeStop.setFrozenColumns",function(){V(P)}),r.on("jqGridResetFrozenHeights.setFrozenColumns",function(k,O){V(O||P)}),a.hDiv.loading||setTimeout(function(){r.triggerHandler("jqGridAfterGridComplete")},0),i.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){var e=this,t=$(e),r=e.grid,i=e.p,a=jqID(i.id);if(r&&i.frozenColumns===!0){if($(r.fhDiv).remove(),$(r.fbDiv).off(".setFrozenColumns"),$(r.fbDiv).remove(),r.fhDiv=null,r.fbDiv=null,r.fbRows=null,i.footerrow&&($(r.fsDiv).remove(),r.fsDiv=null),t.off(".setFrozenColumns"),i.hoverrows===!0){var o,s=getGuiStyles.call(e,"states.hover");t.on("mouseover.jqGrid",function(f){o=$(f.target).closest("tr.jqgrow"),$(o).attr("class")!=="ui-subgrid"&&$(o).addClass(s)}).on("mouseout.jqGrid",function(f){o=$(f.target).closest("tr.jqgrow"),$(o).removeClass(s)})}if(i.frozenColumns=!1,i.sortable){var u=$(r.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");u.sortable("destroy"),t.jqGrid("setGridParam",{sortable:{options:{items:">th:not(:has(#jqgh_"+a+"_cb,#jqgh_"+a+"_rn,#jqgh_"+a+"_subgrid),:hidden)"}}}),t.jqGrid("sortableColumns",u)}}})}}),$.fn.jqFilter=function(e){if(typeof e=="string"){var t=$.fn.jqFilter[e];if(!t)throw"jqFilter - No such method: "+e;var r=$.makeArray(arguments).slice(1);return t.apply(this,r)}var i=$.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},jgrid.filter,e||{});return this.each(function(){if(!this.filter){this.p=i,(i.filter===null||i.filter===void 0)&&(i.filter={groupOp:i.groupOps[0].op,rules:[],groups:[]});var a,o=i.columns.length,s,u=/msie/i.test(navigator.userAgent)&&!window.opera,f=$.isFunction,c=jgrid.defaults!=null&&f(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert,h=function(){return $("#"+jgrid.jqID(i.id))[0]||null},g=function(y,S){return $(h()).jqGrid("getGuiStyles",y,S||"")},p=function(y){return $(h()).jqGrid("getGridRes","search."+y)},m=function(y){var S=h(),C=S.p.iColByName[y];return C!==void 0?{cm:S.p.colModel[C],iCol:C}:(C=S.p.iPropByName[y],C!==void 0?{cm:S.p.additionalProperties[C],iCol:C,isAddProp:!0}:{cm:null,iCol:-1})},b=g("states.error"),v=g("dialog.content");if(i.initFilter=$.extend(!0,{},i.filter),!!o){for(a=0;a<o;a++)s=i.columns[a],s.stype?s.inputtype=s.stype:s.inputtype||(s.inputtype="text"),s.sorttype?s.searchtype=s.sorttype:s.searchtype||(s.searchtype="string"),s.hidden===void 0&&(s.hidden=!1),s.label||(s.label=s.name),s.cmName=s.name,s.index&&(s.name=s.index),s.hasOwnProperty("searchoptions")||(s.searchoptions={}),s.hasOwnProperty("searchrules")||(s.searchrules={});i.showQuery&&$(this).append("<table class='queryresult "+v+"' style='display:block;max-width:440px;border:0px none;' dir='"+i.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var j=function(y,S){var C=[!0,""],w=h();if(f(S.searchrules))C=S.searchrules.call(w,y,S);else if(jgrid&&jgrid.checkValues)try{C=jgrid.checkValues.call(w,y,-1,S.searchrules,S.label)}catch{}C&&C.length&&C[0]===!1&&(i.error=!C[0],i.errmsg=C[1])};this.onchange=function(){return i.error=!1,i.errmsg="",f(i.onChange)?i.onChange.call(h(),i,this):!1},this.reDraw=function(){$("table.group:first",this).remove();var y=this.createTableForGroup(i.filter,null);$(this).append(y),f(i.afterRedraw)&&i.afterRedraw.call(h(),i,this)},this.createTableForGroup=function(y,S){var C=this,w,x=$("<table class='"+g("searchDialog.operationGroup","group")+"' style='border:0px none;'><tbody></tbody></table>"),G="left";i.direction==="rtl"&&(G="right",x.attr("dir","rtl")),S===null&&x.append("<tr class='error' style='display:none;'><th colspan='5' class='"+b+"' align='"+G+"'></th></tr>");var l=$("<tr></tr>");x.append(l);var R=$("<th colspan='5' align='"+G+"'></th>");if(l.append(R),i.ruleButtons===!0){var B=$("<select class='"+g("searchDialog.operationSelect","opsel")+"'></select>");R.append(B);var T="",H;for(w=0;w<i.groupOps.length;w++)H=y.groupOp===C.p.groupOps[w].op?" selected='selected'":"",T+="<option value='"+C.p.groupOps[w].op+"'"+H+">"+C.p.groupOps[w].text+"</option>";B.append(T).on("change",function(){y.groupOp=$(B).val(),C.onchange()})}var P="<span></span>";if(i.groupButton&&(P=$("<input type='button' value='+ {}' title='"+p("addGroupTitle")+"' class='"+g("searchDialog.addGroupButton","add-group")+"'/>"),P.on("click",function(){return y.groups===void 0&&(y.groups=[]),y.groups.push({groupOp:i.groupOps[0].op,rules:[],groups:[]}),C.reDraw(),C.onchange(),!1})),R.append(P),i.ruleButtons===!0){var V=$("<input type='button' value='+' title='"+p("addRuleTitle")+"' class='"+g("searchDialog.addRuleButton","add-rule ui-add")+"'/>"),k;V.on("click",function(){var Q,ie,X;for(y.rules===void 0&&(y.rules=[]),w=0;w<C.p.columns.length;w++)if(Q=C.p.columns[w].search===void 0?!0:C.p.columns[w].search,ie=C.p.columns[w].hidden===!0,X=C.p.columns[w].searchoptions.searchhidden===!0,X&&Q||Q&&!ie){k=C.p.columns[w];break}var re;return k.searchoptions.sopt?re=k.searchoptions.sopt:C.p.sopt?re=C.p.sopt:$.inArray(k.searchtype,C.p.strarr)!==-1?re=C.p.stropts:re=C.p.numopts,y.rules.push({field:k.name,op:re[0],data:""}),C.reDraw(),!1}),R.append(V)}if(S!==null){var O=$("<input type='button' value='-' title='"+p("deleteGroupTitle")+"' class='"+g("searchDialog.deleteGroupButton","delete-group")+"'/>");R.append(O),O.on("click",function(){for(w=0;w<S.groups.length;w++)if(S.groups[w]===y){S.groups.splice(w,1);break}return C.reDraw(),C.onchange(),!1})}if(y.groups!==void 0){var N,z,I;for(w=0;w<y.groups.length;w++)N=$("<tr></tr>"),x.append(N),z=$("<td class='first'></td>"),N.append(z),I=$("<td colspan='4'></td>"),I.append(this.createTableForGroup(y.groups[w],y)),N.append(I)}if(y.groupOp===void 0&&(y.groupOp=C.p.groupOps[0].op),y.rules!==void 0)for(w=0;w<y.rules.length;w++)x.append(this.createTableRowForRule(y.rules[w],y));return x},this.createTableRowForRule=function(y,S){var C=this,w=h(),x=$("<tr></tr>"),G,l,R,B="",T;x.append("<td class='first'></td>");var H=$("<td class='columns'></td>");x.append(H);var P=$("<select class='"+g("searchDialog.label","selectLabel")+"'></select>"),V,k=[];H.append(P),P.on("change",function(){y.field=$(P).val();var ue=$(this).parents("tr:first"),ve,_e;for(_e=0;_e<C.p.columns.length;_e++)if(C.p.columns[_e].name===y.field){ve=C.p.columns[_e];break}if(ve){var Oe=$.extend({},ve.editoptions||{});delete Oe.readonly,delete Oe.disabled;var Ie=$.extend({},Oe||{},ve.searchoptions||{},m(ve.cmName),{id:jgrid.randId(),name:ve.name,mode:"search"});Ie.column=ve,u&&ve.inputtype==="text"&&(Ie.size||(Ie.size=10));var Pe=jgrid.createEl.call(w,ve.inputtype,$.extend({},Ie,Ie.attr||{}),"",!0,C.p.ajaxSelectOptions||{},!0);$(Pe).addClass(g("searchDialog.elem","input-elm")),Ie.sopt?l=Ie.sopt:C.p.sopt?l=C.p.sopt:$.inArray(ve.searchtype,C.p.strarr)!==-1?l=C.p.stropts:l=C.p.numopts;var Je="",Ve=0,Qe,tt,lt;for(k=[],$.each(C.p.ops,function(){k.push(this.oper)}),C.p.cops&&$.each(C.p.cops,function(De){k.push(De)}),_e=0;_e<l.length;_e++)tt=l[_e],V=$.inArray(l[_e],k),V!==-1&&(Qe=C.p.ops[V],lt=Qe!==void 0?Qe.text:C.p.cops[tt].text,Ve===0&&(y.op=tt),Je+="<option value='"+tt+"'>"+lt+"</option>",Ve++);if($(".selectopts",ue).empty().append(Je),$(".selectopts",ue)[0].selectedIndex=0,jgrid.msie&&jgrid.msiever()<9){var dt=parseInt($("select.selectopts",ue)[0].offsetWidth,10)+1;$(".selectopts",ue).width(dt),$(".selectopts",ue).css("width","auto")}if($(".data",ue).empty().append(Pe),ve.createColumnIndex&&Ie.generateDatalist){var it="dl_"+Pe.id,Le=$(w).jqGrid("generateDatalistFromColumnIndex",ve.name);Le!=null&&Le.length>0&&($(Pe).attr("list",it),$(".data",ue).append(Le.attr("id",it)))}jgrid.bindEv.call(w,Pe,Ie),$(".input-elm",ue).on("change",Ie,function(De){var U=De.target,K=De.data.column;y.data=K&&K.inputtype==="custom"&&f(K.searchoptions.custom_value)?K.searchoptions.custom_value.call(w,$(this).find(".customelement").first(),"get"):U.value,$(U).is("input[type=checkbox]")&&!$(U).is(":checked")&&(y.data=$(U).data("offval")),C.onchange()}),setTimeout(function(){y.data=$(Pe).val(),C.onchange()},0)}});var O=0,N,z,I;for(G=0;G<C.p.columns.length;G++)N=C.p.columns[G].search===void 0?!0:C.p.columns[G].search,z=C.p.columns[G].hidden===!0,I=C.p.columns[G].searchoptions.searchhidden===!0,(I&&N||N&&!z)&&(T="",y.field===C.p.columns[G].name&&(T=" selected='selected'",O=G),B+="<option value='"+C.p.columns[G].name+"'"+T+">"+C.p.columns[G].label+"</option>");P.append(B);var Q=$("<td class='operators'></td>");x.append(Q),R=i.columns[O],u&&R.inputtype==="text"&&(R.searchoptions.size||(R.searchoptions.size=10));var ie=$.extend({},R.editoptions||{});delete ie.readonly,delete ie.disabled;var X=$.extend({},ie,R.searchoptions||{},m(R.cmName),{id:jgrid.randId(),name:R.name,mode:"search"});X.column=R;var re=jgrid.createEl.call(w,R.inputtype,$.extend({},X,X.attr||{}),y.data,!0,C.p.ajaxSelectOptions||{},!0);(y.op==="nu"||y.op==="nn"||$.inArray(y.op,w.p.customUnaryOperations)>=0)&&($(re).attr("readonly","true"),$(re).attr("disabled","true"));var ee=$("<select class='"+g("searchDialog.operator","selectopts")+"'></select>");Q.append(ee),ee.on("change",function(){y.op=$(ee).val();var ue=$(this).parents("tr:first"),ve=$(".input-elm",ue)[0];y.op==="nu"||y.op==="nn"||$.inArray(y.op,w.p.customUnaryOperations)>=0?(y.data="",ve.tagName.toUpperCase()!=="SELECT"&&(ve.value=""),ve.setAttribute("readonly","true"),ve.setAttribute("disabled","true")):(ve.tagName.toUpperCase()==="SELECT"&&(y.data=ve.value),ve.removeAttribute("readonly"),ve.removeAttribute("disabled")),C.onchange()}),R.searchoptions.sopt?l=R.searchoptions.sopt:C.p.sopt?l=C.p.sopt:$.inArray(R.searchtype,C.p.strarr)!==-1?l=C.p.stropts:l=C.p.numopts,B="";var Z,te;for($.each(C.p.ops,function(){k.push(this.oper)}),C.p.cops&&$.each(C.p.cops,function(ue){k.push(ue)}),G=0;G<l.length;G++)te=l[G],V=$.inArray(l[G],k),V!==-1&&(Z=C.p.ops[V],T=y.op===te?" selected='selected'":"",B+="<option value='"+te+"'"+T+">"+(Z!==void 0?Z.text:C.p.cops[te].text)+"</option>");ee.append(B);var J=$("<td class='data'></td>");if(x.append(J),J.append(re),R.createColumnIndex&&R.searchoptions.generateDatalist){var he="dl_"+re.id,pe=$(w).jqGrid("generateDatalistFromColumnIndex",R.name);pe!=null&&pe.length>0&&($(re).attr("list",he),J.append(pe.attr("id",he)))}jgrid.bindEv.call(w,re,R.searchoptions),$(re).addClass(g("searchDialog.elem","input-elm")).on("change",function(){y.data=R.inputtype==="custom"?R.searchoptions.custom_value.call(w,$(this).find(".customelement").first(),"get"):$(this).val(),$(this).is("input[type=checkbox]")&&!$(this).is(":checked")&&(y.data=$(this).data("offval")),$.isArray(y.data)&&(y.data=y.data.join(i.inFilterSeparator||",")),C.onchange()});var Fe=$("<td></td>");if(x.append(Fe),i.ruleButtons===!0){var be=$("<input type='button' value='-' title='"+p("deleteRuleTitle")+"' class='"+g("searchDialog.deleteRuleButton","delete-rule ui-del")+"'/>");Fe.append(be),be.on("click",function(){for(G=0;G<S.rules.length;G++)if(S.rules[G]===y){S.rules.splice(G,1);break}return C.reDraw(),C.onchange(),!1})}return x},this.getStringForGroup=function(y){var S="(",C;if(y.groups!==void 0)for(C=0;C<y.groups.length;C++){S.length>1&&(S+=" "+y.groupOp+" ");try{S+=this.getStringForGroup(y.groups[C])}catch(w){c(w)}}if(y.rules!==void 0)try{for(C=0;C<y.rules.length;C++)S.length>1&&(S+=" "+y.groupOp+" "),S+=this.getStringForRule(y.rules[C])}catch(w){c(w)}return S+=")",S==="()"?"":S},this.getStringForRule=function(y){var S="",C="",w,x,G,l=y.data,R,B=["int","integer","float","number","currency"];for(w=0;w<i.ops.length;w++)if(i.ops[w].oper===y.op){S=i.operands.hasOwnProperty(y.op)?i.operands[y.op]:"",C=i.ops[w].oper;break}if(C===""&&i.cops!=null){for(R in i.cops)if(i.cops.hasOwnProperty(R)&&(C=R,S=i.cops[R].operand,f(i.cops[R].buildQueryValue)))return i.cops[R].buildQueryValue.call(i,{cmName:y.field,searchValue:l,operand:S})}for(w=0;w<i.columns.length;w++)if(i.columns[w].name===y.field){x=i.columns[w];break}return x==null?"":((C==="bw"||C==="bn")&&(l=l+"%"),(C==="ew"||C==="en")&&(l="%"+l),(C==="cn"||C==="nc")&&(l="%"+l+"%"),(C==="in"||C==="ni")&&(l=" ("+l+")"),i.errorcheck&&j(y.data,x),$.inArray(x.searchtype,B)!==-1||C==="nn"||C==="nu"||$.inArray(C,h().p.customUnaryOperations)>=0?G=y.field+" "+S+" "+l:G=y.field+" "+S+' "'+l+'"',G)},this.resetFilter=function(){i.filter=$.extend(!0,{},i.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){$("th."+b,this).html(""),$("tr.error",this).hide()},this.showError=function(){$("th."+b,this).html(i.errmsg),$("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(i.filter)},this.toString=function(){var y=this;function S(w){if(y.p.errorcheck){var x,G;for(x=0;x<y.p.columns.length;x++)if(y.p.columns[x].name===w.field){G=y.p.columns[x];break}G&&j(w.data,G)}return w.op+"(item."+w.field+",'"+w.data+"')"}function C(w){var x="(",G;if(w.groups!==void 0)for(G=0;G<w.groups.length;G++)x.length>1&&(w.groupOp==="OR"?x+=" || ":x+=" && "),x+=C(w.groups[G]);if(w.rules!==void 0)for(G=0;G<w.rules.length;G++)x.length>1&&(w.groupOp==="OR"?x+=" || ":x+=" && "),x+=S(w.rules[G]);return x+=")",x==="()"?"":x}return C(i.filter)},this.reDraw(),i.showQuery&&this.onchange(),this.filter=!0}}})},$.extend($.fn.jqFilter,{toSQLString:function(){var e="";return this.each(function(){e=this.toUserFriendlyString()}),e},filterData:function(){var e;return this.each(function(){e=this.p.filter}),e},getParameter:function(e){return e!==void 0&&this.p.hasOwnProperty(e)?this.p[e]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(e){typeof e=="string"&&(e=$.parseJSON(e)),this.each(function(){this.p.filter=e,this.reDraw(),this.onchange()})}});var xmlJsonClass={xml2json:function(e,t){e.nodeType===9&&(e=e.documentElement);var r=this.removeWhite(e),i=this.toObj(r),a=this.toJson(i,e.nodeName,"	");return`{
`+t+(t?a.replace(/\t/g,t):a.replace(/\t|\n/g,""))+`
}`},json2xml:function(e,t){var r=function(o,s,u){var f="",c,h,g,p,m;if(o instanceof Array)if(o.length===0)f+=u+"<"+s+">__EMPTY_ARRAY_</"+s+`>
`;else for(c=0,h=o.length;c<h;c+=1)g=u+r(o[c],s,u+"	")+`
`,f+=g;else if(typeof o=="object"){p=!1,f+=u+"<"+s;for(m in o)o.hasOwnProperty(m)&&(m.charAt(0)==="@"?f+=" "+m.substr(1)+'="'+o[m].toString()+'"':p=!0);if(f+=p?">":"/>",p){for(m in o)o.hasOwnProperty(m)&&(m==="#text"?f+=o[m]:m==="#cdata"?f+="<![CDATA["+o[m]+"]]>":m.charAt(0)!=="@"&&(f+=r(o[m],m,u+"	")));f+=(f.charAt(f.length-1)===`
`?u:"")+"</"+s+">"}}else typeof o=="function"?f+=u+"<"+s+"><![CDATA["+o+"]]></"+s+">":(o===void 0&&(o=""),o.toString()==='""'||o.toString().length===0?f+=u+"<"+s+">__EMPTY_STRING_</"+s+">":f+=u+"<"+s+">"+o.toString()+"</"+s+">");return f},i="",a;for(a in e)e.hasOwnProperty(a)&&(i+=r(e[a],a,""));return t?i.replace(/\t/g,t):i.replace(/\t|\n/g,"")},toObj:function(e){var t={},r=/function/i,i,a=0,o=0,s=!1,u;if(e.nodeType===1){if(e.attributes.length)for(i=0;i<e.attributes.length;i+=1)t["@"+e.attributes[i].nodeName]=(e.attributes[i].nodeValue||"").toString();if(e.firstChild){for(u=e.firstChild;u;u=u.nextSibling)u.nodeType===1?s=!0:u.nodeType===3&&u.nodeValue.match(/[^ \f\n\r\t\v]/)?a+=1:u.nodeType===4&&(o+=1);if(s)if(a<2&&o<2)for(this.removeWhite(e),u=e.firstChild;u;u=u.nextSibling)u.nodeType===3?t["#text"]=this.escape(u.nodeValue):u.nodeType===4?r.test(u.nodeValue)?t[u.nodeName]=[t[u.nodeName],u.nodeValue]:t["#cdata"]=this.escape(u.nodeValue):t[u.nodeName]?t[u.nodeName]instanceof Array?t[u.nodeName][t[u.nodeName].length]=this.toObj(u):t[u.nodeName]=[t[u.nodeName],this.toObj(u)]:t[u.nodeName]=this.toObj(u);else e.attributes.length?t["#text"]=this.escape(this.innerXml(e)):t=this.escape(this.innerXml(e));else if(a)e.attributes.length?t["#text"]=this.escape(this.innerXml(e)):(t=this.escape(this.innerXml(e)),t==="__EMPTY_ARRAY_"?t="[]":t==="__EMPTY_STRING_"&&(t=""));else if(o)if(o>1)t=this.escape(this.innerXml(e));else for(u=e.firstChild;u;u=u.nextSibling){if(r.test(e.firstChild.nodeValue)){t=e.firstChild.nodeValue;break}t["#cdata"]=this.escape(u.nodeValue)}}!e.attributes.length&&!e.firstChild&&(t=null)}else e.nodeType===9?t=this.toObj(e.documentElement):($.jgrid!=null&&$.jgrid.defaults!=null&&$.isFunction($.jgrid.defaults.fatalError)?$.jgrid.defaults.fatalError:alert)("unhandled node type: "+e.nodeType);return t},toJson:function(e,t,r,i){i===void 0&&(i=!0);var a=t?'"'+t+'"':"",o="	",s=`
`,u,f,c=[],h=[],g;if(i||(o="",s=""),e==="[]")a+=t?":[]":"[]";else if(e instanceof Array){for(f=0,u=e.length;f<u;f+=1)c[f]=this.toJson(e[f],"",r+o,i);a+=(t?":[":"[")+(c.length>1?s+r+o+c.join(","+s+r+o)+s+r:c.join(""))+"]"}else if(e===null)a+=(t&&":")+"null";else if(typeof e=="object"){for(g in e)e.hasOwnProperty(g)&&(h[h.length]=this.toJson(e[g],g,r+o,i));a+=(t?":{":"{")+(h.length>1?s+r+o+h.join(","+s+r+o)+s+r:h.join(""))+"}"}else typeof e=="string"?a+=(t&&":")+'"'+e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':a+=(t&&":")+e.toString();return a},innerXml:function(e){var t="",r,i=function(a){var o="",s,u;if(a.nodeType===1){for(o+="<"+a.nodeName,s=0;s<a.attributes.length;s+=1)o+=" "+a.attributes[s].nodeName+'="'+(a.attributes[s].nodeValue||"").toString()+'"';if(a.firstChild){for(o+=">",u=a.firstChild;u;u=u.nextSibling)o+=i(u);o+="</"+a.nodeName+">"}else o+="/>"}else a.nodeType===3?o+=a.nodeValue:a.nodeType===4&&(o+="<![CDATA["+a.nodeValue+"]]>");return o};if(e.hasOwnProperty("innerHTML"))t=e.innerHTML;else for(r=e.firstChild;r;r=r.nextSibling)t+=i(r);return t},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();for(var t=e.firstChild,r;t;)t.nodeType===3?t.nodeValue.match(/[^ \f\n\r\t\v]/)?t=t.nextSibling:(r=t.nextSibling,e.removeChild(t),t=r):(t.nodeType===1&&this.removeWhite(t),t=t.nextSibling);return e}};window.xmlJsonClass=xmlJsonClass;var jgridFeedback=jgrid.feedback,fullBoolFeedback=jgrid.fullBoolFeedback,builderFmButon=jgrid.builderFmButon,addFormIcon=function(e,t,r){var i;t[0]===!0&&(i="<span class='"+mergeCssClasses("fm-button-icon",r,t[2])+"'></span>",t[1]==="right"?e.addClass("fm-button-icon-right").append(i):e.addClass("fm-button-icon-left").prepend(i))},getGuiStateStyles=function(e){return getGuiStyles.call(this,"states."+e)},hideRowsWithoutVissibleCells=function(e){e.find("tr[data-rowpos]").each(function(){var t=0;$(this).children("td").each(function(){$(this).css("visibility")!=="hidden"&&t++}),t||$(this).hide()})},isEmptyString=function(e){return e==="&nbsp;"||e==="&#160;"||e.length===1&&e.charCodeAt(0)===160};jgrid.extend({searchGrid:function(e){return this.each(function(){var t=this,r=$(t),i=t.p;if(!t.grid||i==null)return;var a=$.extend(!0,{drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:i.prmNames.filters,loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,removemodal:!0,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE",in:"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},base.getGridRes.call(r,"search"),jgrid.search||{},i.searching||{},e||{}),o="fbox_"+i.id,s=a.commonIconClass,u={themodal:"searchmod"+o,modalhead:"searchhd"+o,modalcontent:"searchcnt"+o,resizeAlso:o},f="#"+jqID(u.themodal),c=i.gBox,h=i.gView,g=$.each,p=i.postData[a.sFilter],m=function(){var P=$.makeArray(arguments);return P.unshift("Search"),P.unshift("Filter"),P.unshift(a),jgridFeedback.apply(t,P)},b=function(){jgrid.hideModal(f,{gb:c,jqm:a.jqModal,onClose:a.onClose,removemodal:a.removemodal})};typeof p=="string"&&(p=$.trim(p)!==""?$.parseJSON(p):void 0),$(f).remove();function v(P){m("beforeShow",P)&&($(f).data("onClose",a.onClose),jgrid.viewModal.call(t,f,{gbox:c,jqm:a.jqModal,overlay:a.overlay,modal:a.modal,overlayClass:a.overlayClass,toTop:a.toTop,onHide:function(V){V.w.remove(),V.o&&V.o.remove()}}),m("afterShow",P))}if($(f)[0]!==void 0)v($("#fbox_"+jqID(i.id)));else{var j=$("<div><div id='"+o+"' class='"+getGuiStyles.call(t,"dialog.body","searchFilter")+"' style='overflow:auto'></div></div>").insertBefore(h);i.direction==="rtl"&&j.attr("dir","rtl");var y="",S="",C,w=!1,x,G=-1,l=$.extend([],i.colModel),R=builderFmButon.call(t,o+"_search",a.Find,mergeCssClasses(s,a.findDialogIcon),"right"),B=builderFmButon.call(t,o+"_reset",a.Reset,mergeCssClasses(s,a.resetDialogIcon),"left");if(a.showQuery&&(y=builderFmButon.call(t,o+"_query","Query",mergeCssClasses(s,a.queryDialogIcon),"left")+"&#160;"),a.searchForAdditionalProperties&&g(i.additionalProperties,function(){var P=typeof this=="string"?{name:this}:this;P.label||(P.label=P.name),P.isAddProp=!0,l.push(P)}),a.columns.length?(l=a.columns,G=0,C=l[0].index||l[0].name):g(l,function(P,V){if(V.label||(V.label=V.isAddProp?V.name:i.colNames[P]),!w){var k=V.search===void 0?!0:V.search,O=V.hidden===!0,N=V.searchoptions&&V.searchoptions.searchhidden===!0;(N&&k||k&&!O)&&(w=!0,C=V.index||V.name,G=P)}}),!p&&C||a.multipleSearch===!1){var T="eq";G>=0&&l[G].searchoptions&&l[G].searchoptions.sopt?T=l[G].searchoptions.sopt[0]:a.sopt&&a.sopt.length&&(T=a.sopt[0]),p={groupOp:"AND",rules:[{field:C,op:T,data:""}]}}w=!1,a.tmplNames&&a.tmplNames.length&&(w=!0,S=a.tmplLabel,S+="<select class='ui-template'>",S+="<option value='default'>Default</option>",g(a.tmplNames,function(P,V){S+="<option value='"+P+"'>"+V+"</option>"}),S+="</select>"),x="<div class='"+getGuiStyles.call(t,"dialog.footer")+"'><table class='EditTable' style='border:0px none;margin-top:5px' id='"+o+"_2'><tbody><tr><td colspan='2'><hr class='"+getGuiStyles.call(t,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+i.direction+"'  style='float:"+(i.direction==="rtl"?"right":"left")+";'>"+B+S+"</td><td class='EditButton EditButton-"+i.direction+"'>"+y+R+"</td></tr></tbody></table></div>",o=jqID(o),a.gbox=c,a.height="auto",o="#"+o,$(o).jqFilter({columns:l,filter:a.loadDefaults?p:null,showQuery:a.showQuery,errorcheck:a.errorcheck,sopt:a.sopt,groupButton:a.multipleGroup,ruleButtons:a.multipleSearch,afterRedraw:a.afterRedraw,ops:a.odata,cops:i.customSortOperations,operands:a.operands,ajaxSelectOptions:i.ajaxSelectOptions,groupOps:a.groupOps,onChange:function(P,V){P.showQuery&&$(".query",V).text(V.toUserFriendlyString()),fullBoolFeedback.call(t,a.afterChange,"jqGridFilterAfterChange",$(o),a,P,V)},direction:i.direction,id:i.id}),j.append(x),w&&a.tmplFilters&&a.tmplFilters.length&&$(".ui-template",j).on("change",function(){var P=$(this).val();return P==="default"?$(o).jqFilter("addFilter",p):$(o).jqFilter("addFilter",a.tmplFilters[parseInt(P,10)]),!1}),a.multipleGroup===!0&&(a.multipleSearch=!0),m("onInitialize",$(o)),a.layer?jgrid.createModal.call(t,u,j,a,h,$(c)[0],"#"+jqID(a.layer),{position:"relative"}):jgrid.createModal.call(t,u,j,a,h,$(c)[0]),(a.searchOnEnter||a.closeOnEscape)&&$(f).keydown(function(P){var V=$(P.target);if(a.searchOnEnter&&P.which===13&&!V.hasClass("add-group")&&!V.hasClass("add-rule")&&!V.hasClass("delete-group")&&!V.hasClass("delete-rule")&&(!V.hasClass("fm-button")||!V.is("[id$=_query]")))return $(o+"_search").click(),!1;if(a.closeOnEscape&&P.which===27)return $("#"+jqID(u.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1}),y&&$(o+"_query").on("click",function(){return $(".queryresult",j).toggle(),!1}),a.stringResult===void 0&&(a.stringResult=a.multipleSearch),$(o+"_search").on("click",function(){var P={},V="",k,O=$(o),N=O.find(".input-elm");if(N.filter(":focus")&&(N=N.filter(":focus")),N.change(),k=O.jqFilter("filterData"),a.errorcheck&&(O[0].hideError(),a.showQuery||O.jqFilter("toSQLString"),O[0].p.error))return O[0].showError(),!1;if(a.stringResult||i.datatype==="local"){try{V=JSON.stringify(k)}catch{}typeof V=="string"&&(P[a.sFilter]=V,g([a.sField,a.sValue,a.sOper],function(){P[this]=""}))}else a.multipleSearch?(P[a.sFilter]=k,g([a.sField,a.sValue,a.sOper],function(){P[this]=""})):(P[a.sField]=k.rules[0].field,P[a.sValue]=k.rules[0].data,P[a.sOper]=k.rules[0].op,P[a.sFilter]="");return $.extend(i.postData,P),fullBoolFeedback.call(t,a.onSearch,"jqGridFilterSearch",i.filters)&&(i.search=!0,r.trigger("reloadGrid",[$.extend({page:1},a.reloadGridSearchOptions||{})])),a.closeAfterSearch&&b(),!1}),$(o+"_reset").on("click",function(){var P={},V=$(o);return i.search=!1,i.resetsearch=!0,a.multipleSearch===!1?P[a.sField]=P[a.sValue]=P[a.sOper]="":P[a.sFilter]="",V[0].resetFilter(),w&&$(".ui-template",j).val("default"),$.extend(i.postData,P),fullBoolFeedback.call(t,a.onReset,"jqGridFilterReset")&&r.trigger("reloadGrid",[$.extend({page:1},a.reloadGridResetOptions||{})]),a.closeAfterReset&&b(),!1}),v($(o));var H=getGuiStateStyles.call(t,"hover");$(".fm-button:not(."+getGuiStateStyles.call(t,"disabled").split(" ").join(".")+")",j).hover(function(){$(this).addClass(H)},function(){$(this).removeClass(H)})}})},editGridRow:function(e,t){return this.each(function(){var r=this,i=$(r),a=r.p;if(!r.grid||a==null||!e)return;var o=a.id,s=base.getGridRes,u=base.setSelection,f=$.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",labelswidth:"",savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:getGuiStyles.call(this,"overlay"),removemodal:!0,skipPostTypes:["image","file"],saveui:"enable",savetext:s.call(i,"defaults.savetext")||"Saving..."},s.call(i,"edit"),jgrid.edit,a.formEditing||{},t||{}),c="FrmGrid_"+o,h=c,g="TblGrid_"+o,p="#"+jqID(g),m=p+"_2",b={themodal:"editmod"+o,modalhead:"edithd"+o,modalcontent:"editcnt"+o,resizeAlso:c},v="#"+jqID(b.themodal),j=a.gBox,y=a.colModel,S=a.iColByName,C=1,w=0,x,G,l,R=f.commonIconClass,B=function(){jgrid.hideModal(v,{gb:j,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal})},T=s.call(i,"errors.errcap"),H=function(){var U=$.makeArray(arguments);return U.unshift(""),U.unshift("AddEdit"),U.unshift(f),jgridFeedback.apply(r,U)},P=getGuiStateStyles.call(r,"hover"),V=getGuiStateStyles.call(r,"disabled"),k=getGuiStateStyles.call(r,"select"),O=getGuiStateStyles.call(r,"active"),N=getGuiStateStyles.call(r,"error");$(v).remove(),c="#"+jqID(c),e==="new"?(e="_empty",l="add",f.caption=f.addCaption):(f.caption=f.editCaption,l="edit");var z=!0;f.checkOnUpdate&&(f.jqModal===!0||f.jqModal===void 0)&&!f.modal&&(z=!1);function I(){return $(p+" > tbody > tr > td .FormElement").each(function(){var U=$(".customelement",this),K=U.length?U.attr("name"):this.name,ne=S[K],ce=ne!==void 0?y[ne]||{}:{},de=ce.editoptions||{},qe,Ge,Be;if(U.length&&$.isFunction(de.custom_value)){try{if(x[K]=de.custom_value.call(r,$("#"+jqID(K),p),"get"),x[K]===void 0)throw"e1"}catch(je){je==="e1"?jgrid.info_dialog.call(r,T,"function 'custom_value' "+f.msg.novalue,f.bClose):jgrid.info_dialog.call(r,T,je.message,f.bClose)}return!0}else switch(Be=$(this)[0].type,Be){case"checkbox":var xe=typeof de.value=="string"?de.value.split(":"):["Yes","No"];x[K]=$(this).is(":checked")?xe[0]:xe[1];break;case"select-one":x[K]=$("option:selected",this).val();break;case"select-multiple":x[K]=$(this).val(),x[K]=x[K]?x[K].join(","):"";var Ze=[];$("option:selected",this).each(function(je,me){Ze[je]=$(me).text()});break;case"date":x[K]=$(this).val(),String(x[K]).split("-").length===3&&(qe=ce.formatoptions||{},Ge=qe.newformat||s.call(i,"formatter.date.newformat"),x[K]=jgrid.parseDate.call(i[0],"Y-m-d",x[K],Ge));break;default:Be!==void 0&&$.inArray(Be,f.skipPostTypes)<0&&(x[K]=$(this).val());break}}),!0}function Q(U,K,ne){var ce=0,de=[],qe=!1,Ge=$(K),Be=String(f.labelswidth)+(!f.labelswidth||isNaN(f.labelswidth)?"":"px"),xe="<td class='CaptionTD"+(Be?"' style='width:"+Be+";":"")+"'>&#160;</td><td class='DataTD'>&#160;</td>",Ze="",je;for(je=1;je<=ne;je++)Ze+=xe;if(U!=="_empty"&&(qe=base.getInd.call(i,U)),$(y).each(function(Te){var ke=this,He=ke.name,nt,We,ft,Ee,Xe,st=ke.editable,Gt=!1,rt=!1,gt=U==="_empty"?"addForm":"editForm";switch($.isFunction(st)&&(st=st.call(r,{rowid:U,iCol:Te,iRow:qe,cmName:He,cm:ke,mode:gt})),ke.editrules&&ke.editrules.edithidden===!0?We=!1:We=ke.hidden===!0||st==="hidden",String(st).toLowerCase()){case"hidden":st=!0;break;case"disabled":st=!0,Gt=!0;break;case"readonly":st=!0,rt=!0;break}if(He!=="cb"&&He!=="subgrid"&&st===!0&&He!=="rn"){if(qe===!1)Ee="";else{nt=$(r.rows[qe].cells[Te]);try{Ee=$.unformat.call(r,nt,{rowId:U,colModel:ke},Te)}catch{Ee=ke.edittype&&ke.edittype==="textarea"?nt.text():nt.html()}isEmptyString(Ee)&&(Ee="")}var pt=$.extend({},ke.editoptions||{},{id:He,name:He,rowId:U,mode:gt,cm:ke,iCol:Te}),$t=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},ke.formoptions||{}),jt=parseInt($t.rowpos,10)||ce+1,Tt=parseInt((parseInt($t.colpos,10)||1)*2,10);if(U==="_empty"&&pt.defaultValue&&(Ee=$.isFunction(pt.defaultValue)?pt.defaultValue.call(r):pt.defaultValue),ke.edittype||(ke.edittype="text"),a.autoEncodeOnEdit&&(Ee=jgrid.oldDecodePostedData(Ee)),Xe=jgrid.createEl.call(r,ke.edittype,pt,Ee,!1,$.extend({},jgrid.ajaxOptions,a.ajaxSelectOptions||{})),(f.checkOnSubmit||f.checkOnUpdate)&&(f._savedData[He]=Ee),$(Xe).addClass("FormElement"),$.inArray(ke.edittype,["text","textarea","checkbox","password","select"])>-1&&$(Xe).addClass(getGuiStyles.call(r,"dialog.dataField")),ft=Ge.find("tr[data-rowpos="+jt+"]"),$t.rowabove){var Dt=$("<tr><td class='contentinfo' colspan='"+ne*2+"'>"+$t.rowcontent+"</td></tr>");Ge.append(Dt),Dt[0].rp=jt}ft.length===0&&(ft=$("<tr data-rowpos='"+jt+"'></tr>").addClass("FormData").attr("id","tr_"+He),$(ft).append(Ze),Ge.append(ft),ft[0].rp=jt);var St=$("td:eq("+(Tt-2)+")",ft[0]),Ct=$("td:eq("+(Tt-1)+")",ft[0]);St.html($t.label===void 0?a.colNames[Te]:$t.label||"&#160;");var Et=Ct[isEmptyString(Ct.html())?"html":"append"]($t.elmprefix);if(Et.append(Xe).append($t.elmsuffix),Xe.tagName.toUpperCase()==="INPUT"&&ke.createColumnIndex&&pt.generateDatalist){var Ft=i.jqGrid("generateDatalistFromColumnIndex",ke.name);Ft!=null&&Ft.length>0&&($(Xe).attr("list","dl_"+Xe.id),Et.append(Ft.attr("id","dl_"+Xe.id)))}Gt?(St.addClass(V),Ct.addClass(V),$(Xe).prop("readonly",!0),$(Xe).prop("disabled",!0)):rt&&$(Xe).prop("readonly",!0),ke.edittype==="custom"&&$.isFunction(pt.custom_value)&&pt.custom_value.call(r,$("#"+jqID(He),c),"set",Ee),jgrid.bindEv.call(r,Xe,pt),We&&St.add(Ct).css("visibility","hidden"),de[ce]=Te,ce++}}),hideRowsWithoutVissibleCells(Ge),ce>0){var me=$("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(ne*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+o+"_id' value='"+U+"'/></td></tr>");me[0].rp=ce+999,Ge.append(me),(f.checkOnSubmit||f.checkOnUpdate)&&(f._savedData[o+"_id"]=U)}return de}function ie(U,K){var ne,ce=0,de,qe,Ge,Be;(f.checkOnSubmit||f.checkOnUpdate)&&(f._savedData={},f._savedData[o+"_id"]=U);var xe=a.colModel;if(U==="_empty"){$(xe).each(function(){ne=this.name,qe=$.extend({},this.editoptions||{}),de=$("#"+jqID(ne),K),de&&de.length&&de[0]!==null&&(Ge="",this.edittype==="custom"&&$.isFunction(qe.custom_value)?qe.custom_value.call(r,de,"set",Ge):qe.defaultValue?(Ge=$.isFunction(qe.defaultValue)?qe.defaultValue.call(r):qe.defaultValue,de[0].type==="checkbox"?(Be=Ge.toLowerCase(),Be.search(/(false|f|0|no|n|off|undefined)/i)<0&&Be!==""?(de[0].checked=!0,de[0].defaultChecked=!0,de[0].value=Ge):(de[0].checked=!1,de[0].defaultChecked=!1)):de.val(Ge)):de[0].type==="checkbox"?(de[0].checked=!1,de[0].defaultChecked=!1,Ge=$(de).data("offval")):de[0].type&&de[0].type.substr(0,6)==="select"?de[0].selectedIndex=0:de.val(Ge),(f.checkOnSubmit===!0||f.checkOnUpdate)&&(f._savedData[ne]=Ge))}),$("#id_g",K).val(U);return}var Ze=base.getInd.call(i,U,!0);Ze&&($(Ze.cells).filter("td[role=gridcell]").each(function(je){var me;if(ne=xe[je].name,ne!=="cb"&&ne!=="subgrid"&&ne!=="rn"&&xe[je].editable===!0){try{me=$.unformat.call(r,$(this),{rowId:U,colModel:xe[je]},je)}catch{me=xe[je].edittype==="textarea"?$(this).text():$(this).html()}switch(a.autoEncodeOnEdit&&(me=jgrid.oldDecodePostedData(me)),(f.checkOnSubmit===!0||f.checkOnUpdate)&&(f._savedData[ne]=me),ne="#"+jqID(ne),xe[je].edittype){case"password":case"text":case"button":case"image":case"textarea":isEmptyString(me)&&(me=""),$(ne,K).val(me);break;case"select":var Te=me.split(",");Te=$.map(Te,function(ke){return $.trim(ke)}),$(ne+" option",K).each(function(){var ke=this,He=$(ke),nt=$.trim(He.val()),We;if(!xe[je].editoptions.multiple&&Te[0]===nt?(Te.splice(0,1),ke.selected=!0):xe[je].editoptions.multiple?(We=$.inArray(nt,Te),We>-1?(Te.splice(We,1),ke.selected=!0):ke.selected=!1):ke.selected=!1,Te.length===0)return!1}),Te.length>0&&$(ne+" option",K).each(function(){var ke=this,He=$(ke),nt=$.trim(He.text()),We;if(!xe[je].editoptions.multiple&&($.trim(me)===nt||Te[0]===nt)?(Te.splice(0,1),ke.selected=!0):xe[je].editoptions.multiple&&(We=$.inArray(nt,Te),We>-1&&(Te.splice(We,1),ke.selected=!0)),Te.length===0)return!1});break;case"checkbox":me=String(me),xe[je].editoptions&&xe[je].editoptions.value?me=xe[je].editoptions.value.split(":")[0]===me:(me=me.toLowerCase(),me=me.search(/(false|f|0|no|n|off|undefined)/i)<0&&me!==""),$(ne,K).prop({checked:me,defaultChecked:me});break;case"custom":try{if(xe[je].editoptions&&$.isFunction(xe[je].editoptions.custom_value))xe[je].editoptions.custom_value.call(r,$(ne,K),"set",me);else throw"e1"}catch(ke){ke==="e1"?jgrid.info_dialog.call(r,T,"function 'custom_value' "+f.msg.nodefined,f.bClose):jgrid.info_dialog.call(r,T,ke.message,f.bClose)}break}ce++}}),ce>0&&$("#id_g",p).val(U))}function X(){var U=f.url||a.editurl;$.each(y,function(K,ne){var ce=ne.name;x.hasOwnProperty(ce)&&(ne.formatter==="date"&&(ne.formatoptions==null||ne.formatoptions.sendFormatted!==!0)&&(x[ce]=$.unformat.date.call(r,x[ce],ne)),U!=="clientArray"&&ne.editoptions&&ne.editoptions.NullIfEmpty===!0&&x[ce]===""&&(x[ce]="null"))})}function re(){var U=[!0,"",""],K=U,ne={},ce=a.prmNames,de,qe,Ge,Be,xe,Ze,je,me,Te=base.getInd.call(i,e),ke=Te===!1?null:r.rows[Te],He=i.triggerHandler("jqGridAddEditBeforeCheckValues",[x,$(c),l]);He&&typeof He=="object"&&(x=He),Te=Te===!1?-1:Te,$.isFunction(f.beforeCheckValues)&&(He=f.beforeCheckValues.call(r,x,$(c),l),He&&typeof He=="object"&&(x=He));for(Ge in x)if(x.hasOwnProperty(Ge)&&(me=a.iColByName[Ge],K=jgrid.checkValues.call(r,x[Ge],Ge,void 0,void 0,{oldValue:e==="_empty"?null:base.getCell.call(i,e,me),newValue:x[Ge],cmName:Ge,rowid:e,cm:y[me],iCol:me,iRow:Te,tr:ke,td:ke==null?null:ke.cells[me],mode:e==="_empty"?"addForm":"editForm"}),(K==null||K===!0)&&(K=U),K[0]===!1))break;if(X(),K[0]&&(ne=i.triggerHandler("jqGridAddEditClickSubmit",[f,x,l]),ne===void 0&&$.isFunction(f.onclickSubmit)&&(ne=f.onclickSubmit.call(r,f,x,l)||{}),K=i.triggerHandler("jqGridAddEditBeforeSubmit",[x,$(c),l]),(K==null||K===!0)&&(K=U),K[0]&&$.isFunction(f.beforeSubmit)&&(K=f.beforeSubmit.call(r,x,$(c),l),(K==null||K===!0)&&(K=U))),K[0]&&!f.processing){if(f.processing=!0,$("#sData",m).addClass(O),Ze=f.url||a.editurl,qe=ce.oper,de=Ze==="clientArray"&&a.keyName!==!1?a.keyName:ce.id,x[qe]=$.trim(x[o+"_id"])==="_empty"?ce.addoper:ce.editoper,(x[qe]!==ce.addoper||x[de]===void 0)&&(x[de]=x[o+"_id"]),delete x[o+"_id"],x=$.extend(x,f.editData,ne),a.treeGrid===!0){if(x[qe]===ce.addoper){Be=a.selrow;var nt=a.treeGridModel==="adjacency"?a.treeReader.parent_id_field:"parent_id";x[nt]=Be}for(xe in a.treeReader)if(a.treeReader.hasOwnProperty(xe)&&(je=a.treeReader[xe],x.hasOwnProperty(je))){if(x[qe]===ce.addoper&&xe==="parent_id_field")continue;delete x[je]}}x[de]=jgrid.stripPref(a.idPrefix,x[de]),a.autoEncodeOnEdit&&$.each(x,function(Ee,Xe){$.isFunction(Xe)||(x[Ee]=jgrid.oldEncodePostedData(Xe))});var We=$.extend({url:$.isFunction(Ze)?Ze.call(r,x[de],l,x,f):Ze,type:$.isFunction(f.mtype)?f.mtype.call(r,l,f,x[de],x):f.mtype,data:jgrid.serializeFeedback.call(r,$.isFunction(f.serializeEditData)?f.serializeEditData:a.serializeEditData,"jqGridAddEditSerializeEditData",x),complete:function(Ee,Xe){if(i.jqGrid("progressBar",{method:"hide",loadtype:f.saveui}),$("#sData",m).removeClass(O),x[de]=$("#id_g",p).val(),Ee.status>=300&&Ee.status!==304||Ee.status===0&&Ee.readyState===4?(K[0]=!1,K[1]=i.triggerHandler("jqGridAddEditErrorTextFormat",[Ee,l]),$.isFunction(f.errorTextFormat)?K[1]=f.errorTextFormat.call(r,Ee,l):K[1]=Xe+" Status: '"+Ee.statusText+"'. Error code: "+Ee.status):(K=i.triggerHandler("jqGridAddEditAfterSubmit",[Ee,x,l]),(K==null||K===!0)&&(K=U),K[0]&&$.isFunction(f.afterSubmit)&&(K=f.afterSubmit.call(r,Ee,x,l),(K==null||K===!0)&&(K=U))),K[0]===!1)$("#FormError>td",p).html(K[1]),$("#FormError",p).show();else{a.autoEncodeOnEdit&&$.each(x,function(gt,pt){x[gt]=jgrid.oldDecodePostedData(pt)});var st=[$.extend({},f.reloadGridOptions||{})];if(x[qe]===ce.addoper?(K[2]||(K[2]=jgrid.randId()),x[de]==null||x[de]==="_empty"||x[qe]===ce.addoper?x[de]=K[2]:K[2]=x[de],f.reloadAfterSubmit?i.trigger("reloadGrid",st):a.treeGrid===!0?base.addChildNode.call(i,K[2],Be,x):base.addRowData.call(i,K[2],x,f.addedrow),f.closeAfterAdd?(a.treeGrid!==!0&&u.call(i,K[2]),B()):f.clearAfterAdd&&ie("_empty",c)):(f.reloadAfterSubmit?(i.trigger("reloadGrid",st),f.closeAfterEdit||setTimeout(function(){u.call(i,x[de])},1e3)):a.treeGrid===!0?base.setTreeRow.call(i,x[de],x):base.setRowData.call(i,x[de],x),f.closeAfterEdit&&B()),$.isFunction(f.afterComplete)){var Gt=Ee;setTimeout(function(){i.triggerHandler("jqGridAddEditAfterComplete",[Gt,x,$(c),l]),f.afterComplete.call(r,Gt,x,$(c),l),Gt=null},50)}if((f.checkOnSubmit||f.checkOnUpdate)&&($(c).data("disabled",!1),f._savedData[o+"_id"]!=="_empty")){var rt;for(rt in f._savedData)f._savedData.hasOwnProperty(rt)&&x[rt]&&(f._savedData[rt]=x[rt])}}f.processing=!1;try{$(c).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()}catch{}}},jgrid.ajaxOptions,f.ajaxEditOptions);if(!We.url&&!f.useDataProxy&&($.isFunction(a.dataProxy)?f.useDataProxy=!0:(K[0]=!1,K[1]+=" "+jgrid.errors.nourl)),K[0])if(i.jqGrid("progressBar",{method:"show",loadtype:f.saveui,htmlcontent:f.savetext}),f.useDataProxy){var ft=a.dataProxy.call(r,We,"set_"+o);ft===void 0&&(ft=[!0,""]),ft[0]===!1?(K[0]=!1,K[1]=ft[1]||"Error deleting the selected row!"):(We.data.oper===ce.addoper&&f.closeAfterAdd&&B(),We.data.oper===ce.editoper&&f.closeAfterEdit&&B())}else We.url==="clientArray"?(f.reloadAfterSubmit=!1,x=We.data,We.complete({status:200,statusText:""},"")):$.ajax(We)}K[0]===!1&&($("#FormError>td",p).html(K[1]),$("#FormError",p).show())}function ee(U,K){var ne=!1,ce;for(ce in U)if(U.hasOwnProperty(ce)&&String(U[ce])!==String(K[ce])){ne=!0;break}return ne}function Z(){var U=!0;return $("#FormError",p).hide(),f.checkOnUpdate&&(x={},I(),G=ee(x,f._savedData),G&&($(c).data("disabled",!0),$(".confirm",v).show(),U=!1)),U}function te(){var U=jgrid.detectRowEditing.call(r,e);if(U!=null)if(U.mode==="inlineEditing")base.restoreRow.call(i,e);else{var K=U.savedRow,ne=r.rows[K.id];base.restoreCell.call(i,K.id,K.ic),$(ne.cells[K.ic]).removeClass("edit-cell "+k),$(ne).addClass(k).attr({"aria-selected":"true",tabindex:"0"})}}function J(U,K){var ne=K[1].length-1;U===0||K[1][U-1]!==void 0&&hasOneFromClasses($("#"+jqID(K[1][U-1])),V)?$("#pData",m).addClass(V):$("#pData",m).removeClass(V),U===ne||K[1][U+1]!==void 0&&hasOneFromClasses($("#"+jqID(K[1][U+1])),V)?$("#nData",m).addClass(V):$("#nData",m).removeClass(V)}function he(){var U=base.getDataIDs.call(i),K=$("#id_g",p).val(),ne=$.inArray(K,U);return[ne,U]}var pe=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",Fe=isNaN(f.datawidth)?f.datawidth:f.datawidth+"px",be=$("<form name='FormPost' id='"+h+"' class='FormGrid' onSubmit='return false;' style='width:"+Fe+";overflow:auto;position:relative;height:"+pe+";'></form>").data("disabled",!1),ue=$("<table id='"+g+"' class='EditTable'><tbody></tbody></table>");$(y).each(function(){var U=this.formoptions;C=Math.max(C,U&&U.colpos||0),w=Math.max(w,U&&U.rowpos||0)}),$(be).append(ue);var ve=$("<tr id='FormError' style='display:none'><td class='"+N+"' colspan='"+C*2+"'>&#160;</td></tr>");if(ve[0].rp=0,$(ue).append(ve),ve=$("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+C*2+"'>"+(f.topinfo||"&#160;")+"</td></tr>"),ve[0].rp=0,$(ue).append(ve),!!H("beforeInitData",be,l)){te();var _e=a.direction==="rtl",Oe=_e?"nData":"pData",Ie=_e?"pData":"nData";Q(e,ue,C);var Pe=builderFmButon.call(r,Oe,"",mergeCssClasses(R,f.prevIcon),"","left"),Je=builderFmButon.call(r,Ie,"",mergeCssClasses(R,f.nextIcon),"","right"),Ve=builderFmButon.call(r,"sData",f.bSubmit),Qe=builderFmButon.call(r,"cData",f.bCancel),tt="<div class='"+getGuiStyles.call(r,"dialog.footer")+"'><table class='EditTable' id='"+g+"_2'><tbody><tr><td colspan='2'><hr class='"+getGuiStyles.call(r,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+a.direction+"'>"+(_e?Je+Pe:Pe+Je)+"</td><td class='EditButton EditButton-"+a.direction+"'>"+Ve+"&#160;"+Qe+"</td></tr>";if(tt+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+(f.bottominfo||"&#160;")+"</td></tr>",tt+="</tbody></table></div>",w>0){var lt=[];$.each($(ue)[0].rows,function(U,K){lt[U]=K}),lt.sort(function(U,K){return U.rp>K.rp?1:U.rp<K.rp?-1:0}),$.each(lt,function(U,K){$("tbody",ue).append(K)})}f.gbox=j;var dt=!1;f.closeOnEscape===!0&&(f.closeOnEscape=!1,dt=!0);var it=$("<div></div>").append($("<div class='"+getGuiStyles.call(r,"dialog.body")+"'></div>").append(be)).append(tt);if(jgrid.createModal.call(r,b,it,f,a.gView,$(j)[0]),f.topinfo&&$(".tinfo",p).show(),f.bottominfo&&$(".binfo",m).show(),it=null,tt=null,$(v).keydown(function(U){var K=(U.target.tagName||"").toUpperCase(),ne,ce;if($(c).data("disabled")===!0)return!1;if(U.which===13&&K!=="TEXTAREA"){if(ne=$(m).find(":focus"),ce=ne.attr("id"),ne.length>0&&$.inArray(ce,["pData","nData","cData"])>=0)return ne.trigger("click"),!1;if(f.savekey[0]===!0&&f.savekey[1]===13)return $("#sData",m).trigger("click"),!1}if(f.savekey[0]===!0&&U.which===f.savekey[1]&&K!=="TEXTAREA")return $("#sData",m).trigger("click"),!1;if(U.which===27)return Z()&&dt&&B(),!1;if(f.navkeys[0]===!0){if($("#id_g",p).val()==="_empty")return!0;if(U.which===f.navkeys[1])return $("#pData",m).trigger("click"),!1;if(U.which===f.navkeys[2])return $("#nData",m).trigger("click"),!1}}),f.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span",v).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close",v).off("click").click(function(){return Z()&&B(),!1})),addFormIcon($("#sData",m),f.saveicon,R),addFormIcon($("#cData",m),f.closeicon,R),f.checkOnSubmit||f.checkOnUpdate){Ve=builderFmButon.call(r,"sNew",f.bYes),Je=builderFmButon.call(r,"nNew",f.bNo),Qe=builderFmButon.call(r,"cNew",f.bExit);var Le=f.zIndex||999;Le++,$("<div class='"+f.overlayClass+" jqgrid-overlay confirm' style='z-index:"+Le+";display:none;'>&#160;</div><div class='"+getGuiStyles.call(r,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+(Le+1)+"'>"+f.saveData+"<br/><br/>"+Ve+Je+Qe+"</div>").insertAfter(c),$("#sNew",v).click(function(){return re(),$(c).data("disabled",!1),$(".confirm",v).hide(),!1}),$("#nNew",v).click(function(){return $(".confirm",v).hide(),$(c).data("disabled",!1),setTimeout(function(){$(c).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()},0),!1}),$("#cNew",v).click(function(){return $(".confirm",v).hide(),$(c).data("disabled",!1),B(),!1})}H("onInitializeForm",$(c),l),e==="_empty"||!f.viewPagerButtons?$("#pData,#nData",m).hide():$("#pData,#nData",m).show(),H("beforeShowForm",$(c),l),$(v).data("onClose",f.onClose),jgrid.viewModal.call(r,v,{gbox:j,jqm:f.jqModal,overlay:f.overlay,modal:f.modal,overlayClass:f.overlayClass,toTop:f.toTop,onHide:function(U){U.w.remove(),U.o&&U.o.remove()}}),z||$("."+jqID(f.overlayClass)).click(function(){return Z()&&B(),!1}),$(".fm-button",v).hover(function(){$(this).addClass(P)},function(){$(this).removeClass(P)}),$("#sData",m).click(function(){return x={},$("#FormError",p).hide(),I(),x[o+"_id"]==="_empty"?re():f.checkOnSubmit===!0?(G=ee(x,f._savedData),G?($(c).data("disabled",!0),$(".confirm",v).show()):re()):re(),!1}),$("#cData",m).click(function(){return Z()&&B(),!1}),$("#nData",m).click(function(){if(!Z())return!1;$("#FormError",p).hide();var U=he();if(U[0]=parseInt(U[0],10),U[0]!==-1&&U[1][U[0]+1]){if(!H("onclickPgButtons","next",$(c),U[1][U[0]]))return!1;ie(U[1][U[0]+1],c),u.call(i,U[1][U[0]+1]),H("afterclickPgButtons","next",$(c),U[1][U[0]+1]),J(U[0]+1,U)}return!1}),$("#pData",m).click(function(){if(!Z())return!1;$("#FormError",p).hide();var U=he();if(U[0]!==-1&&U[1][U[0]-1]){if(!H("onclickPgButtons","prev",$(c),U[1][U[0]])||hasOneFromClasses($("#"+jqID(U[1][U[0]-1])),V))return!1;ie(U[1][U[0]-1],c),u.call(i,U[1][U[0]-1]),H("afterclickPgButtons","prev",$(c),U[1][U[0]-1]),J(U[0]-1,U)}return!1}),H("afterShowForm",$(c),l);var De=he();J(De[0],De)}})},viewGridRow:function(e,t){return this.each(function(){var r=this,i=$(r),a=r.p;if(!r.grid||a==null||!e)return;var o=a.id,s=$.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,closeOnEscape:!1,labelswidth:"",navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,removemodal:!0},base.getGridRes.call(i,"view"),jgrid.view||{},a.formViewing||{},t||{}),u="#ViewGrid_"+jqID(o),f="#ViewTbl_"+jqID(o),c=f+"_2",h="ViewGrid_"+o,g="ViewTbl_"+o,p=s.commonIconClass,m={themodal:"viewmod"+o,modalhead:"viewhd"+o,modalcontent:"viewcnt"+o,resizeAlso:h},b="#"+jqID(m.themodal),v=a.gBox,j=a.colModel,y=1,S=0,C=function(){var J=$.makeArray(arguments);return J.unshift(""),J.unshift("View"),J.unshift(s),jgridFeedback.apply(r,J)},w=function(){jgrid.hideModal(b,{gb:v,jqm:s.jqModal,onClose:s.onClose,removemodal:s.removemodal})},x=getGuiStateStyles.call(r,"hover"),G=getGuiStateStyles.call(r,"disabled");function l(){(s.closeOnEscape===!0||s.navkeys[0]===!0)&&setTimeout(function(){$("#cData").focus()},0)}function R(J,he,pe){var Fe,be,ue,ve=0,_e,Oe=[],Ie=base.getInd.call(i,J),Pe,Je=getGuiStyles.call(r,"dialog.viewData"),Ve=$(he),Qe=getGuiStyles.call(r,"dialog.viewLabel"),tt=String(s.labelswidth)+(!s.labelswidth||isNaN(s.labelswidth)?"":"px"),lt="<td class='"+getGuiStyles.call(r,"dialog.viewCellLabel","CaptionTD form-view-label")+(tt?"' style='width:"+tt+";":"")+"'>&#160;</td><td class='"+getGuiStyles.call(r,"dialog.viewCellData","DataTD form-view-data")+"'>&#160;</td>",dt="",it=["integer","number","currency"],Le=0,De=0,U,K,ne;for(Pe=0;Pe<pe;Pe++)dt+=lt;if($(j).each(function(){var de=this;de.editrules&&de.editrules.edithidden===!0?be=!1:be=de.hidden===!0,!be&&de.align==="right"&&(de.formatter&&$.inArray(de.formatter,it)!==-1?Le=Math.max(Le,parseInt(de.width,10)):De=Math.max(De,parseInt(de.width,10)))}),U=Le!==0?Le:De!==0?De:0,$(j).each(function(de){var qe=this;if(Fe=qe.name,K=!1,qe.editrules&&qe.editrules.edithidden===!0?be=!1:be=qe.hidden===!0,ne=typeof qe.viewable!="boolean"?!0:qe.viewable,Fe!=="cb"&&Fe!=="subgrid"&&Fe!=="rn"&&ne){_e=Ie===!1?"":jgrid.getDataFieldOfCell.call(r,r.rows[Ie],de).html(),K=qe.align==="right"&&U!==0;var Ge=$.extend({},{rowabove:!1,rowcontent:""},qe.formoptions||{}),Be=parseInt(Ge.rowpos,10)||ve+1,xe=parseInt((parseInt(Ge.colpos,10)||1)*2,10);if(Ge.rowabove){var Ze=$("<tr><td class='contentinfo' colspan='"+pe*2+"'>"+Ge.rowcontent+"</td></tr>");Ve.append(Ze),Ze[0].rp=Be}ue=Ve.find("tr[data-rowpos="+Be+"]"),ue.length===0&&(ue=$("<tr data-rowpos='"+Be+"'></tr>").addClass("FormData").attr("id","trv_"+Fe),ue.append(dt),Ve.append(ue),ue[0].rp=Be);var je=Ge.label===void 0?a.colNames[de]:Ge.label,me=$("td:eq("+(xe-1)+")",ue[0]),Te=$("td:eq("+(xe-2)+")",ue[0]);Te.html("<label for='"+Fe+"'"+(Qe?" class='"+Qe+"'>":">")+(je||"&nbsp;")+"</label>"),me[isEmptyString(me.html())?"html":"append"]("<span id='"+Fe+"'"+(Je?" class='"+Je+"'>":">")+(_e||"&nbsp;")+"</span>").attr("id","v_"+Fe),K&&$("td:eq("+(xe-1)+") span",ue[0]).css({"text-align":"right",width:U+"px"}),be&&Te.add(me).css("visibility","hidden"),Oe[ve]=de,ve++}}),hideRowsWithoutVissibleCells(Ve),ve>0){var ce=$("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(pe*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+J+"'/></td></tr>");ce[0].rp=ve+99,Ve.append(ce)}return Oe}function B(J){var he,pe=0,Fe=base.getInd.call(i,J,!0),be;Fe&&($("td",Fe).each(function(ue){be=j[ue],he=be.name,he!=="cb"&&he!=="subgrid"&&he!=="rn"&&(he=jqID("v_"+he),$("#"+he+" span",f).html(jgrid.getDataFieldOfCell.call(r,Fe,ue).html()),pe++)}),pe>0&&$("#id_g",f).val(J))}function T(J,he){var pe=he[1].length-1;J===0||he[1][J-1]!==void 0&&hasOneFromClasses($("#"+jqID(he[1][J-1])),G)?$("#pData",c).addClass(G):$("#pData",c).removeClass(G),J===pe||he[1][J+1]!==void 0&&hasOneFromClasses($("#"+jqID(he[1][J+1])),G)?$("#nData",c).addClass(G):$("#nData",c).removeClass(G)}function H(){var J=base.getDataIDs.call(i),he=$("#id_g",f).val(),pe=$.inArray(he,J);return[pe,J]}var P=isNaN(s.dataheight)?s.dataheight:s.dataheight+"px",V=isNaN(s.datawidth)?s.datawidth:s.datawidth+"px",k=$("<div class='"+getGuiStyles.call(r,"dialog.body")+"'><form name='FormPost' id='"+h+"' class='FormGrid' style='width:"+V+";overflow:auto;position:relative;height:"+P+";'></form></div>"),O=k.children("form.FormGrid"),N=$("<table id='"+g+"' class='EditTable'><tbody></tbody></table>");if($(b).remove(),$(j).each(function(){var J=this.formoptions;y=Math.max(y,J&&J.colpos||0),S=Math.max(S,J&&J.rowpos||0)}),O.append(N),!!C("beforeInitData",O)){R(e,N,y);var z=a.direction==="rtl",I=z?"nData":"pData",Q=z?"pData":"nData",ie=builderFmButon.call(r,I,"",mergeCssClasses(p,s.prevIcon),"","left"),X=builderFmButon.call(r,Q,"",mergeCssClasses(p,s.nextIcon),"","right"),re=builderFmButon.call(r,"cData",s.bClose);if(S>0){var ee=[];$.each($(N)[0].rows,function(J,he){ee[J]=he}),ee.sort(function(J,he){return J.rp>he.rp?1:J.rp<he.rp?-1:0}),$.each(ee,function(J,he){$("tbody",N).append(he)})}s.gbox=v;var Z=$("<div></div>").append(k).append("<div class='"+getGuiStyles.call(r,"dialog.footer")+"'><table border='0' class='EditTable' id='"+g+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+a.direction+"' width='"+(s.labelswidth||"auto")+"'>"+(z?X+ie:ie+X)+"</td><td class='EditButton EditButton-"+a.direction+"'>"+re+"</td></tr></tbody></table></div>");jgrid.createModal.call(r,m,Z,s,a.gView,$(a.gView)[0]),s.viewPagerButtons||$("#pData, #nData",c).hide(),Z=null,$(b).keydown(function(J){var he,pe;if($(u).data("disabled")===!0)return!1;if(J.which===13&&(he=$(c).find(":focus"),pe=he.attr("id"),he.length>0&&$.inArray(pe,["pData","nData","cData"])>=0))return he.trigger("click"),!1;if(J.which===27)return s.closeOnEscape&&w(),!1;if(s.navkeys[0]===!0){if(J.which===s.navkeys[1])return $("#pData",c).trigger("click"),!1;if(J.which===s.navkeys[2])return $("#nData",c).trigger("click"),!1}}),addFormIcon($("#cData",c),s.closeicon,p),C("beforeShowForm",$(u)),jgrid.viewModal.call(r,b,{gbox:v,jqm:s.jqModal,overlay:s.overlay,toTop:s.toTop,modal:s.modal,onHide:function(J){J.w.remove(),J.o&&J.o.remove()}}),$(".fm-button:not(."+G.split(" ").join(".")+")",c).hover(function(){$(this).addClass(x)},function(){$(this).removeClass(x)}),l(),$("#cData",c).click(function(){return w(),!1}),$("#nData",c).click(function(){$("#FormError",f).hide();var J=H();if(J[0]=parseInt(J[0],10),J[0]!==-1&&J[1][J[0]+1]){if(!C("onclickPgButtons","next",$(u),J[1][J[0]]))return!1;B(J[1][J[0]+1]),base.setSelection.call(i,J[1][J[0]+1]),C("afterclickPgButtons","next",$(u),J[1][J[0]+1]),T(J[0]+1,J)}return l(),!1}),$("#pData",c).click(function(){$("#FormError",f).hide();var J=H();if(J[0]!==-1&&J[1][J[0]-1]){if(!C("onclickPgButtons","prev",$(u),J[1][J[0]]))return!1;B(J[1][J[0]-1]),base.setSelection.call(i,J[1][J[0]-1]),C("afterclickPgButtons","prev",$(u),J[1][J[0]-1]),T(J[0]-1,J)}return l(),!1});var te=H();T(te[0],te)}})},delGridRow:function(e,t){return this.each(function(){var r=this,i=r.p,a=$(r);if(!(!r.grid||i==null||!e)){var o=i.id,s=$.extend(!0,{top:0,left:0,width:240,removemodal:!0,height:"auto",dataheight:"auto",datawidth:"auto",drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:!1,delData:{},idSeparator:",",onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1,delui:"disable",deltext:base.getGridRes.call(a,"defaults.deltext")||"Deleting..."},base.getGridRes.call(a,"del"),jgrid.del||{},i.formDeleting||{},t||{}),u="DelTbl_"+o,f="#DelTbl_"+jqID(o),c,h,g,p,m={themodal:"delmod"+o,modalhead:"delhd"+o,modalcontent:"delcnt"+o,resizeAlso:u},b="#"+jqID(m.themodal),v=i.gBox,j=s.commonIconClass,y=function(){var T=$.makeArray(arguments);return T.unshift(""),T.unshift("Delete"),T.unshift(s),jgridFeedback.apply(r,T)},S=getGuiStateStyles.call(r,"hover"),C=getGuiStateStyles.call(r,"active"),w=getGuiStateStyles.call(r,"error");if($.isArray(e)||(e=[String(e)]),$(b)[0]!==void 0){if(!y("beforeInitData",$(f)))return;$("#DelData>td",f).text(e.join(s.idSeparator)).data("rowids",e),$("#DelError",f).hide(),s.processing===!0&&(s.processing=!1,$("#dData",f).removeClass(C)),y("beforeShowForm",$(f)),jgrid.viewModal.call(r,b,{gbox:v,jqm:s.jqModal,jqM:!1,overlay:s.overlay,toTop:s.toTop,modal:s.modal}),y("afterShowForm",$(f))}else{var x=isNaN(s.dataheight)?s.dataheight:s.dataheight+"px",G=isNaN(s.datawidth)?s.datawidth:s.datawidth+"px",l="<div class='"+getGuiStyles.call(r,"dialog.body")+"'><div id='"+u+"' class='formdata' style='width:"+G+";overflow:auto;position:relative;height:"+x+";'>";l+="<table class='DelTable'><tbody>",l+="<tr id='DelError' style='display:none'><td class='"+w+"'></td></tr>",l+="<tr id='DelData' style='display:none'><td >"+e.join(s.idSeparator)+"</td></tr>",l+="<tr><td class='delmsg'>"+s.msg+"</td></tr>",l+="</tbody></table></div></div>";var R=builderFmButon.call(r,"dData",s.bSubmit),B=builderFmButon.call(r,"eData",s.bCancel);if(l+="<div class='"+getGuiStyles.call(r,"dialog.footer")+"'><table class='EditTable' id='"+u+"_2'><tbody><tr><td><hr class='"+getGuiStyles.call(r,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+i.direction+"'>"+R+"&#160;"+B+"</td></tr></tbody></table></div>",s.gbox=v,jgrid.createModal.call(r,m,l,s,i.gView,$(i.gView)[0]),$("#DelData>td",f).data("rowids",e),!y("beforeInitData",$(l)))return;$(".fm-button",f+"_2").hover(function(){$(this).addClass(S)},function(){$(this).removeClass(S)}),addFormIcon($("#dData",f+"_2"),s.delicon,j),addFormIcon($("#eData",f+"_2"),s.cancelicon,j),$("#dData",f+"_2").click(function(){var T=[!0,""],H,P=$("#DelData>td",f),V=P.text(),k=P.data("rowids"),O={};if($.isFunction(s.onclickSubmit)&&(O=s.onclickSubmit.call(r,s,V,k)||{}),$.isFunction(s.beforeSubmit)&&(T=s.beforeSubmit.call(r,V,k)||T),T[0]&&!s.processing){if(s.processing=!0,g=i.prmNames,c=$.extend({},s.delData,O),p=g.oper,c[p]=g.deloper,h=g.id,V=k.slice(),!V.length)return!1;for(H in V)V.hasOwnProperty(H)&&(V[H]=jgrid.stripPref(i.idPrefix,V[H]));c[h]=V.join(s.idSeparator),$(this).addClass(C);var N=s.url||i.editurl,z=$.extend({url:$.isFunction(N)?N.call(r,c[h],c,s,k):N,type:s.mtype,data:$.isFunction(s.serializeDelData)?s.serializeDelData.call(r,c,k):c,complete:function(Q,ie){var X;if(a.jqGrid("progressBar",{method:"hide",loadtype:s.delui}),$("#dData",f+"_2").removeClass(C),Q.status>=300&&Q.status!==304||Q.status===0&&Q.readyState===4?(T[0]=!1,$.isFunction(s.errorTextFormat)?T[1]=s.errorTextFormat.call(r,Q):T[1]=ie+" Status: '"+Q.statusText+"'. Error code: "+Q.status):$.isFunction(s.afterSubmit)&&(T=s.afterSubmit.call(r,Q,c,k)||[!0]),T[0]===!1)$("#DelError>td",f).html(T[1]),$("#DelError",f).show();else{if(i.datatype==="local"||i.treeGrid===!0||!s.reloadAfterSubmit)if(i.treeGrid===!0)try{base.delTreeNode.call(a,k[0])}catch{}else for(k=k.slice(),X=0;X<k.length;X++)base.delRowData.call(a,k[X]);s.reloadAfterSubmit&&a.trigger("reloadGrid",[$.extend({},s.reloadGridOptions||{})]),setTimeout(function(){y("afterComplete",Q,V,$(f),k)},50)}s.processing=!1,T[0]&&jgrid.hideModal(b,{gb:v,jqm:s.jqModal,onClose:s.onClose,removemodal:s.removemodal})}},jgrid.ajaxOptions,s.ajaxDelOptions);if(!z.url&&!s.useDataProxy&&($.isFunction(i.dataProxy)?s.useDataProxy=!0:(T[0]=!1,T[1]+=" "+jgrid.errors.nourl)),T[0])if(a.jqGrid("progressBar",{method:"show",loadtype:s.delui,htmlcontent:s.deltext}),s.useDataProxy){var I=i.dataProxy.call(r,z,"del_"+o);I===void 0&&(I=[!0,""]),I[0]===!1?(T[0]=!1,T[1]=I[1]||"Error deleting the selected row!"):jgrid.hideModal(b,{gb:v,jqm:s.jqModal,onClose:s.onClose,removemodal:s.removemodal})}else z.url==="clientArray"?(c=z.data,z.complete({status:200,statusText:""},"")):$.ajax(z)}return T[0]===!1&&($("#DelError>td",f).html(T[1]),$("#DelError",f).show()),!1}),$("#eData",f+"_2").click(function(){return jgrid.hideModal(b,{gb:v,jqm:s.jqModal,onClose:s.onClose,removemodal:s.removemodal}),!1}),y("beforeShowForm",$(f)),jgrid.viewModal.call(r,b,{gbox:v,jqm:s.jqModal,overlay:s.overlay,toTop:s.toTop,modal:s.modal}),y("afterShowForm",$(f))}s.closeOnEscape===!0&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+jqID(m.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(e,t,r,i,a,o,s){return typeof e=="object"&&(s=o,o=a,a=i,i=r,r=t,t=e,e=void 0),i=i||{},r=r||{},s=s||{},a=a||{},o=o||{},this.each(function(){var u=this,f=u.p,c=$(u);if(!(!u.grid||f==null||u.nav&&$(e).find(".navtable").length>0)){var h=f.id,g=$.extend({edit:!0,add:!0,del:!0,search:!0,refresh:!0,refreshstate:"firstpage",view:!1,closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,hideEmptyPagerParts:!0,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:!0,alertleft:null,alertzIndex:null,iconsOverText:!1},base.getGridRes.call(c,"nav"),jgrid.nav||{},f.navOptions||{},t||{});g.position=g.position||(f.direction==="rtl"?"right":"left");var p,m,b=f.idSel,v=f.gBox,j=g.commonIconClass,y={themodal:"alertmod_"+h,modalhead:"alerthd_"+h,modalcontent:"alertcnt_"+h},S=function(){return function(){var be=document.documentElement,ue=window,ve=1024,_e=768,Oe=c.closest(".ui-jqgrid").offset();$("#"+jqID(y.themodal))[0]===void 0&&(!g.alerttop&&!g.alertleft&&(ue.innerWidth!==void 0?(ve=ue.innerWidth,_e=ue.innerHeight):be!=null&&be.clientWidth!==void 0&&be.clientWidth!==0&&(ve=be.clientWidth,_e=be.clientHeight),ve=ve/2-parseInt(g.alertwidth,10)/2-Oe.left+(ue.pageXOffset!==void 0?ue.pageXOffset:(be||document.body.parentNode||document.body).scrollLeft),_e=_e/2-25-Oe.top+(ue.pageYOffset!==void 0?ue.pageYOffset:(be||document.body.parentNode||document.body).scrollTop)),jgrid.createModal.call(u,y,"<div class='"+getGuiStyles.call(u,"dialog.body")+"'><div>"+g.alerttext+"</div></div>",{gbox:v,jqModal:g.jqModal,drag:!0,resize:!0,caption:g.alertcap,top:g.alerttop!=null?g.alerttop:_e,left:g.alertleft!=null?g.alertleft:ve,width:g.alertwidth,height:g.alertheight,closeOnEscape:g.closeOnEscape,zIndex:g.alertzIndex,removemodal:g.removemodal},f.gView,$(v)[0],!1)),jgrid.viewModal.call(u,"#"+jqID(y.themodal),{gbox:v,toTop:g.alertToTop,jqm:g.jqModal});var Ie=$("#"+jqID(y.modalhead)).find(".ui-jqdialog-titlebar-close");Ie.attr({tabindex:"0",href:"#",role:"button"}),setTimeout(function(){Ie.focus()},50)}},C=S(),w,x=function(be){var ue;if(be.which===13&&(ue=$(this).find(".ui-pg-button").filter(":focus"),ue.length>0)){var ve=ue[0].id,_e=ve.substr(0,$(this).closest(".ui-jqgrid-toppager").length>0?ve.length-h.length-5:ve.length-h.length-1),Oe=_e+"mod"+f.id,Ie=$(".ui-jqdialog").filter(":visible").map(function(){return this.id});if($.inArray(Oe,Ie)<0)return ue.trigger("click"),!1}},G=getGuiStateStyles.call(u,"hover"),l=getGuiStateStyles.call(u,"disabled"),R=getGuiStyles.call(u,"navButton","ui-pg-button");if(u.grid){u.modalAlert=C,e===void 0&&(f.pager?(e=f.pager,f.toppager&&(g.cloneToTop=!0)):f.toppager&&(e=f.toppager));var B=1,T,H,P,V,k,O,N,z=["left","center","right"],I=getGuiStyles.call(u,"navButton","ui-pg-button "+getGuiStateStyles.call(u,"disabled")),Q="<div class='"+I+"'><span class='ui-separator'></span></div>",ie=function(){hasOneFromClasses(this,l)||$(this).addClass(G)},X=function(){$(this).removeClass(G)},re=function(){return hasOneFromClasses(this,l)||($.isFunction(g.addfunc)?g.addfunc.call(u,i):base.editGridRow.call(c,"new",i)),!1},ee=function(be,ue,ve){if(!hasOneFromClasses(this,l)){var _e=f.selrow;_e?$.isFunction(be)?be.call(u,_e,ve):base[ue].call(c,_e,ve):C()}return!1},Z=function(){return ee.call(this,g.editfunc,"editGridRow",r)},te=function(){return ee.call(this,g.viewfunc,"viewGridRow",s)},J=function(){var be;return hasOneFromClasses(this,l)||(f.multiselect?(be=f.selarrrow,be.length===0&&(be=null)):be=f.selrow,be?$.isFunction(g.delfunc)?g.delfunc.call(u,be,a):base.delGridRow.call(c,be,a):C()),!1},he=function(){return hasOneFromClasses(this,l)||($.isFunction(g.searchfunc)?g.searchfunc.call(u,o):base.searchGrid.call(c,o)),!1},pe=function(){if(!hasOneFromClasses(this,l)){$.isFunction(g.beforeRefresh)&&g.beforeRefresh.call(u),f.search=!1,f.resetsearch=!0;try{if(g.refreshstate!=="currentfilter"){f.postData.filters="";try{$("#fbox_"+b).jqFilter("resetFilter")}catch{}$.isFunction(u.clearToolbar)&&u.clearToolbar(!1)}}catch{}switch(g.refreshstate){case"firstpage":c.trigger("reloadGrid",[$.extend({},g.reloadGridOptions||{},{page:1})]);break;case"current":case"currentfilter":c.trigger("reloadGrid",[$.extend({},g.reloadGridOptions||{},{current:!0})]);break}$.isFunction(g.afterRefresh)&&g.afterRefresh.call(u)}return!1},Fe=function(be,ue,ve){var _e=$("<div class='"+R+"' tabindex='0' role='button'></div>"),Oe=g[be+"icon"],Ie=$.trim(g[be+"text"]);return _e.append("<div class='ui-pg-div'><span class='"+(g.iconsOverText?mergeCssClasses("ui-pg-button-icon-over-text",j,Oe):mergeCssClasses(j,Oe))+"'></span>"+(Ie?"<span class='ui-pg-button-text"+(g.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+Ie+"</span>":"")+"</div>"),$(w).append(_e),_e.attr({title:g[be+"title"]||"",id:ue||be+"_"+V}).click(ve).hover(ie,X),_e};for(g.cloneToTop&&f.toppager&&(B=2),T=0;T<B;T++){if(w=$("<div class='ui-pg-table navtable' role='toolbar' style='float:"+(f.direction==="rtl"?"right":"left")+";table-layout:auto;'></div>"),T===0?(P=e,V=h,P===f.toppager&&(V+="_top",B=1)):(P=f.toppager,V=h+"_top"),g.add&&Fe("add",i.id,re),g.edit&&Fe("edit",r.id,Z),g.view&&Fe("view",s.id,te),g.del&&Fe("del",a.id,J),(g.add||g.edit||g.del||g.view)&&$(w).append(Q),g.search&&(H=Fe("search",o.id,he),o.showOnLoad&&o.showOnLoad===!0&&$(H,w).click()),g.refresh&&Fe("refresh","",pe),m=$(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",$("body").append("<div id='testpg2' class='"+getGuiStyles.call(u,"gBox","ui-jqgrid")+"' style='font-size:"+m+";visibility:hidden;' ></div>"),p=$(w).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),$(P+"_"+g.position,P).append(w),g.hideEmptyPagerParts)for(k=0;k<z.length;k++)z[k]!==g.position&&(N=$(P+"_"+z[k],P),N.length===0||N[0].childNodes.length===0?N.hide():N[0].childNodes.length===1&&(O=N[0].firstChild,$(O).is("table.ui-pg-table")&&(O.rows===0||O.rows[0].cells.length===0)&&N.hide()));f._nvtd&&(p>f._nvtd[0]&&($(P+"_"+g.position,P).width(p),f._nvtd[0]=p),f._nvtd[1]=p),u.nav=!0,w.on("keydown.jqGrid",x)}c.triggerHandler("jqGridResetFrozenHeights")}}})},navButtonAdd:function(e,t){return typeof e=="object"&&(t=e,e=void 0),this.each(function(){var r=this,i=r.p;if(r.grid){var a=$.extend({caption:"newButton",title:"",onClickButton:null,position:"last",iconsOverText:!1},base.getGridRes.call($(r),"nav"),jgrid.nav||{},i.navOptions||{},t||{}),o=a.id,s=getGuiStateStyles.call(r,"hover"),u=getGuiStateStyles.call(r,"disabled"),f=getGuiStyles.call(r,"navButton","ui-pg-button");if(e===void 0)if(i.pager)if(base.navButtonAdd.call($(r),i.pager,a),i.toppager)e=i.toppager,o&&(o+="_top");else return;else i.toppager&&(e=i.toppager);typeof e=="string"&&e.indexOf("#")!==0&&(e="#"+jqID(e));var c=$(".navtable",e),h=a.commonIconClass;if(c.length>0){if(o&&c.find("#"+jqID(o)).length>0)return;var g=$("<div tabindex='0' role='button'></div>");a.buttonicon.toString().toUpperCase()==="NONE"?$(g).addClass(f).append("<div class='ui-pg-div'>"+(a.caption?"<span class='ui-pg-button-text"+(a.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+a.caption+"</span>":"")+"</div>"):$(g).addClass(f).append("<div class='ui-pg-div'><span class='"+(a.iconsOverText?mergeCssClasses("ui-pg-button-icon-over-text",h,a.buttonicon):mergeCssClasses(h,a.buttonicon))+"'></span>"+(a.caption?"<span class='ui-pg-button-text"+(a.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+a.caption+"</span>":"")+"</div>"),o&&$(g).attr("id",o),a.position==="first"&&c.children("div.ui-pg-button").length>0?c.children("div.ui-pg-button").first().before(g):c.append(g),$(g,c).attr("title",a.title||"").click(function(p){return hasOneFromClasses(this,u)||$.isFunction(a.onClickButton)&&a.onClickButton.call(r,a,p),!1}).hover(function(){hasOneFromClasses(this,u)||$(this).addClass(s)},function(){$(this).removeClass(s)}),$(r).triggerHandler("jqGridResetFrozenHeights")}}})},navSeparatorAdd:function(e,t){return t=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},t||{}),this.each(function(){if(this.grid){var r=this,i=r.p,a=getGuiStyles.call(r,"navButton","ui-pg-button "+getGuiStateStyles.call(r,"disabled"));if(e===void 0)if(i.pager)if(base.navSeparatorAdd.call($(r),i.pager,t),i.toppager)e=i.toppager;else return;else i.toppager&&(e=i.toppager);typeof e=="string"&&e.indexOf("#")!==0&&(e="#"+jqID(e));var o=$(".navtable",e);if(o.length>0){var s="<div class='"+a+"'><span class='"+t.sepclass+"'></span>"+t.sepcontent+"</div>";t.position==="first"?o.children("div.ui-pg-button").length===0?o.append(s):o.children("div.ui-pg-button").first().before(s):o.append(s)}}})},GridToForm:function(e,t){return this.each(function(){var r=this,i,a,o,s;if(r.grid){var u=base.getRowData.call($(r),e);if(u){for(i in u)if(u.hasOwnProperty(i))if(a=$("[name="+jqID(i)+"]",t),a.is("input:radio")||a.is("input:checkbox"))for(o=0;o<a.length;o++)s=$(a[o]),s.prop("checked",s.val()===String(u[i]));else a.val(isEmptyString(u[i])?"":u[i])}}})},FormToGrid:function(e,t,r,i){return this.each(function(){var a=this;if(a.grid){r||(r="set"),i||(i="first");var o=$(t).serializeArray(),s={};$.each(o,function(u,f){s[f.name]=f.value}),r==="add"?base.addRowData.call($(a),e,s,i):r==="set"&&base.setRowData.call($(a),e,s)}})}}),jgrid.extend({groupingSetup:function(){return this.each(function(){var e=this,t,r,i,a=e.p,o=a.colModel,s=a.groupingView,u,f,c=function(){return""};if(s!==null&&(typeof s=="object"||$.isFunction(s)))if(!s.groupField.length)a.grouping=!1;else{for(s.visibiltyOnNextGrouping===void 0&&(s.visibiltyOnNextGrouping=[]),s.lastvalues=[],s._locgr||(s.groups=[]),s.counters=[],t=0;t<s.groupField.length;t++)s.groupOrder[t]||(s.groupOrder[t]="asc"),s.groupText[t]||(s.groupText[t]="{0}"),typeof s.groupColumnShow[t]!="boolean"&&(s.groupColumnShow[t]=!0),typeof s.groupSummary[t]!="boolean"&&(s.groupSummary[t]=!1),s.groupSummaryPos[t]||(s.groupSummaryPos[t]="footer"),u=o[a.iColByName[s.groupField[t]]],s.groupColumnShow[t]===!0?(s.visibiltyOnNextGrouping[t]=!0,u!=null&&u.hidden===!0&&base.showCol.call($(e),s.groupField[t])):(s.visibiltyOnNextGrouping[t]=$("#"+jgrid.jqID(a.id+"_"+s.groupField[t])).is(":visible"),u!=null&&u.hidden!==!0&&base.hideCol.call($(e),s.groupField[t]));for(s.summary=[],s.hideFirstGroupCol&&(s.formatDisplayField[0]=function(h){return h}),r=0,i=o.length;r<i;r++)u=o[r],s.hideFirstGroupCol&&!u.hidden&&s.groupField[0]===u.name&&(u.formatter=c),u.summaryType&&(f={nm:u.name,st:u.summaryType,v:"",sr:u.summaryRound,srt:u.summaryRoundType||"round"},u.summaryDivider&&(f.sd=u.summaryDivider,f.vd=""),s.summary.push(f))}else a.grouping=!1})},groupingPrepare:function(e,t){return this.each(function(){var r=this,i=r.p,a=i.groupingView,o=a.groups,s=a.counters,u=a.lastvalues,f=a.isInTheSameGroup,c=a.groupField.length,h,g,p,m,b,v,j,y,S,C=!1,w=base.groupingCalculations.handler,x=function(){var l,R,B;for(l=0;l<b.summary.length;l++)R=b.summary[l],B=$.isArray(R.st)?R.st[m.idx]:R.st,$.isFunction(B)?R.v=B.call(r,R.v,R.nm,e,m):(R.v=w.call($(r),B,R.v,R.nm,R.sr,R.srt,e),B.toLowerCase()==="avg"&&R.sd&&(R.vd=w.call($(r),B,R.vd,R.sd,R.sr,R.srt,e)));return b.summary},G=function(l,R){if(l==null&&a.useDefaultValuesOnGrouping){var B=i.iColByName[R]!==void 0?i.colModel[i.iColByName[R]]:i.additionalProperties[i.iPropByName[R]],T;B!=null&&B.formatter!=null&&(B.formatoptions!=null&&B.formatoptions.defaultValue!==void 0?l=B.formatoptions.defaultValue:typeof B.formatter=="string"&&(T=$(r).jqGrid("getGridRes","formatter."+B.formatter+".defaultValue"),T!==void 0&&(l=T)))}return l};for(h=0;h<c;h++)if(v=a.groupField[h],j=G(e[v],v),y=a.displayField[h],S=y==null?null:G(e[y],y),S==null&&(S=j),j!==void 0){for(p=[],g=0;g<=h;g++)p.push(e[a.groupField[g]]);for(m={idx:h,dataIndex:v,value:j,displayValue:S,startRow:t,cnt:1,keys:p,summary:[]},b={cnt:1,pos:o.length,summary:$.extend(!0,[],a.summary)},t===0?(o.push(m),u[h]=j,s[h]=b):typeof j!="object"&&($.isArray(f)&&$.isFunction(f[h])?!f[h].call(r,u[h],j,h,a):u[h]!==j)?(o.push(m),u[h]=j,C=!0,s[h]=b):C?(o.push(m),u[h]=j,s[h]=b):(b=s[h],b.cnt+=1,o[b.pos].cnt=b.cnt),o[b.pos].summary=x(),g=b.pos-1;g>=0;g--)if(o[g].idx<o[b.pos].idx){o[b.pos].parentGroupIndex=g,o[b.pos].parentGroup=o[g];break}}}),this},getGroupHeaderIndex:function(e,t){var r=this,i=r[0],a=i.p,o=t?$(t).closest("tr.jqgroup"):$("#"+jgrid.jqID(e)),s=parseInt(o.data("jqgrouplevel"),10),u=a.id+"ghead_"+s+"_";return isNaN(s)||!o.hasClass("jqgroup")||e.length<=u.length?-1:parseInt(e.substring(u.length),10)},groupingToggle:function(e,t){return this.each(function(){var r=this,i=r.p,a=i.groupingView,o=a.minusicon,s=a.plusicon,u=t?$(t).closest("tr.jqgroup"):$("#"+jgrid.jqID(e)),f=function(y){return y.find(">td>span.tree-wrap")},c,h,g=!0,p,m=!1,b=[],v=function(y){var S,C=y.length;for(S=0;S<C;S++)b.push(y[S])},j=parseInt(u.data("jqgrouplevel"),10);for(i.frozenColumns&&u.length>0&&(h=u[0].rowIndex,u=$(r.rows[h]),u=u.add(r.grid.fbRows[h])),p=f(u),jgrid.hasAllClasses(p,o)?(p.removeClass(o).addClass(s),m=!0):p.removeClass(s).addClass(o),u=u.next();u.length;u=u.next())if(u.hasClass("jqfoot")){if(c=parseInt(u.data("jqfootlevel"),10),m){if(c=parseInt(u.data("jqfootlevel"),10),(!a.showSummaryOnHide&&c===j||c>j)&&v(u),c<j)break}else if((c===j||a.showSummaryOnHide&&c===j+1)&&v(u),c<=j)break}else if(u.hasClass("jqgroup"))if(c=parseInt(u.data("jqgrouplevel"),10),m){if(c<=j)break;v(u)}else{if(c<=j)break;c===j+1&&(f(u).removeClass(o).addClass(s),v(u)),g=!1}else(m||g)&&v(u);$(b).css("display",m?"none":""),i.frozenColumns&&$(r).triggerHandler("jqGridResetFrozenHeights",[{header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!1,body:{resizeDiv:!0,resizedRows:{iRowStart:h,iRowEnd:u.length?u[0].rowIndex-1:-1}}}]),r.fixScrollOffsetAndhBoxPadding(),$(r).triggerHandler("jqGridGroupingClickGroup",[e,m]),$.isFunction(i.onClickGroup)&&i.onClickGroup.call(r,e,m)}),!1},groupingRender:function(e,t){var r="",i=this[0],a=i.p,o=0,s=[],u=a.groupingView,f=$.makeArray(u.groupSummary),c=u.groupField.length,h=u.groups,g=a.colModel,p=g.length,m=a.page,b="jqGridShowHideCol.groupingRender",v=function(C){return base.getGuiStyles.call(i,"gridRow",C)},j=v("jqgroup ui-row-"+a.direction),y=v("jqfoot ui-row-"+a.direction);function S(C,w,x,G,l){var R=h[C],B,T,H="",P,V,k,O,N,z=0,I,Q,ie,X,re,ee,Z=!0;if(w!==0&&h[C].idx!==0){for(B=C;B>=0;B--)if(h[B].idx===h[C].idx-w){R=h[B];break}}for(T=R.cnt,X=l===void 0?G:0;X<p;X++){for(P="&#160;",ie=g[X],I=0;I<R.summary.length;I++)if(Q=R.summary[I],re=$.isArray(Q.st)?Q.st[x.idx]:Q.st,ee=$.isArray(ie.summaryTpl)?ie.summaryTpl[x.idx]:ie.summaryTpl||"{0}",Q.nm===ie.name){typeof re=="string"&&re.toLowerCase()==="avg"&&(Q.sd&&Q.vd?Q.v=Q.v/Q.vd:Q.v&&T>0&&(Q.v=Q.v/T));try{Q.groupCount=R.cnt,Q.groupIndex=R.dataIndex,Q.groupValue=R.value,O=i.formatter("",Q.v,X,Q)}catch{O=Q.v}P=jgrid.format(ee,O),ie.summaryFormat&&(P=ie.summaryFormat.call(i,x,P,O,ie,Q));break}if(V=!1,k=!1,l!==void 0&&Z&&(ie.hidden||(P=l,Z=!1,G>1&&(V=!0,z=G-1),k=ie.align,ie.align=a.direction==="rtl"?"right":"left",u.iconColumnName=ie.name)),N=!1,z>0&&!ie.hidden&&P==="&#160;"){N=!0,k&&(ie.align=k),z--;continue}H+="<td role='gridcell' "+i.formatCol(X,1,"")+(V?"colspan='"+G+"'":"")+">"+P+"</td>",V=!1,k&&(ie.align=k),N&&(ie.hidden=!1,z--)}return H}return $.each(g,function(C,w){var x;for(x=0;x<c;x++)if(u.groupField[x]===w.name){s[x]=C;break}}),f.reverse(),$.each(h,function(C,w){var x,G=a.id+"ghead_"+w.idx,l=G+"_"+C,R=$.isFunction(u.groupCollapse)?u.groupCollapse.call(i,{group:w,rowid:l}):u.groupCollapse,B,T,H,P=1,V=0,k,O,N,z,I=c-1===w.idx,Q=w.parentGroup!=null?w.parentGroup.collapsed:!1,ie="<span style='cursor:pointer;margin-"+(a.direction==="rtl"?"right:":"left:")+w.idx*12+"px;' class='"+u.commonIconClass+" "+(R?u.plusicon:u.minusicon)+" tree-wrap'></span>";if(u._locgr&&!(w.startRow+w.cnt>(m-1)*t&&w.startRow<m*t))return!0;Q&&(R=!0),R!==void 0&&(w.collapsed=R),o++;try{$.isArray(u.formatDisplayField)&&$.isFunction(u.formatDisplayField[w.idx])?(w.displayValue=u.formatDisplayField[w.idx].call(i,w.displayValue,w.value,g[s[w.idx]],w.idx,w,C),x=w.displayValue):x=i.formatter(l,w.displayValue,s[w.idx],w.value,w)}catch{x=w.displayValue}if(r+="<tr id='"+l+"' data-jqgrouplevel='"+w.idx+"' "+(R&&Q?"style='display:none;' ":"")+"role='row' class='"+j+" "+G+"'>",z=$.isFunction(u.groupText[w.idx])?u.groupText[w.idx].call(i,x,w.cnt,w.summary):jgrid.template(u.groupText[w.idx],x,w.cnt,w.summary),typeof z!="string"&&typeof z!="number"&&(z=x),u.groupSummaryPos[w.idx]==="header"?(P=1,(g[0].name==="cb"||g[1].name==="cb")&&P++,(g[0].name==="subgrid"||g[1].name==="subgrid")&&P++,r+=S(C,0,w,P,ie+"<span class='cell-wrapper'>"+z+"</span>")):r+="<td role='gridcell' style='padding-left:"+w.idx*12+"px;' colspan='"+p+"'>"+ie+z+"</td>",r+="</tr>",I){for(O=h[C+1],k=w.startRow,N=O!==void 0?O.startRow:h[C].startRow+h[C].cnt,u._locgr&&(V=(m-1)*t,V>w.startRow&&(k=V)),T=k;T<N&&e[T-V];T++)r+=e[T-V].join("");if(u.groupSummaryPos[w.idx]!=="header"){if(O!==void 0){for(B=0;B<u.groupField.length&&O.dataIndex!==u.groupField[B];B++);o=u.groupField.length-B}for(H=0;H<o;H++)f[H]&&(r+="<tr data-jqfootlevel='"+(w.idx-H)+(R&&(w.idx-H>0||!u.showSummaryOnHide)?"' style='display:none;'":"'")+" role='row' class='"+y+"'>",r+=S(C,H,h[w.idx-H],0),r+="</tr>");o=B}}}),this.off(b).on(b,function(){var C=a.iColByName[u.iconColumnName],w,x,G,l;if($.inArray("header",u.groupSummaryPos)>=0){for(l=0;l<g.length;l++)if(!g[l].hidden){G=l;break}if(G===void 0||C===G)return;for(w=0;w<i.rows.length;w++)x=i.rows[w],$(x).hasClass("jqgroup")&&($(x.cells[G]).html(x.cells[C].innerHTML),$(x.cells[C]).html("&nbsp;"));u.iconColumnName=g[G].name}}),r},groupingGroupBy:function(e,t){return this.each(function(){var r=this,i=r.p,a=i.groupingView,o,s;for(typeof e=="string"&&(e=[e]),i.grouping=!0,a._locgr=!1,a.visibiltyOnNextGrouping===void 0&&(a.visibiltyOnNextGrouping=[]),o=0;o<a.groupField.length;o++)s=i.colModel[i.iColByName[a.groupField[o]]],!a.groupColumnShow[o]&&a.visibiltyOnNextGrouping[o]&&s!=null&&s.hidden===!0&&base.showCol.call($(r),a.groupField[o]);for(o=0;o<e.length;o++)a.visibiltyOnNextGrouping[o]=$(i.idSel+"_"+jgrid.jqID(e[o])).is(":visible");i.groupingView=$.extend(i.groupingView,t||{}),a.groupField=e,$(r).trigger("reloadGrid")})},groupingRemove:function(e){return this.each(function(){var t=this,r=t.p,i=t.tBodies[0],a=r.groupingView,o;if(e===void 0&&(e=!0),r.grouping=!1,e===!0){for(o=0;o<a.groupField.length;o++)!a.groupColumnShow[o]&&a.visibiltyOnNextGrouping[o]&&base.showCol.call($(t),a.groupField);$("tr.jqgroup, tr.jqfoot",i).remove(),$("tr.jqgrow",i).filter(":hidden").show()}else $(t).trigger("reloadGrid")})},groupingCalculations:{handler:function(e,t,r,i,a,o){var s={sum:function(){return parseFloat(t||0)+parseFloat(o[r]||0)},min:function(){return t===""?parseFloat(o[r]||0):Math.min(parseFloat(t),parseFloat(o[r]||0))},max:function(){return t===""?parseFloat(o[r]||0):Math.max(parseFloat(t),parseFloat(o[r]||0))},count:function(){return t===""&&(t=0),o.hasOwnProperty(r)?t+1:0},avg:function(){return s.sum()}},u,f;if(!s[e])throw"jqGrid Grouping No such method: "+e;return u=s[e](),i!=null&&(a==="fixed"?u=u.toFixed(i):(f=Math.pow(10,i),u=Math.round(u*f)/f)),u}}}),$.jgrid.extend({jqGridImport:function(e){return e=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},e||{}),this.each(function(){var t=this,r=function(o,s){var u=$(s.xmlGrid.config,o)[0],f=$(s.xmlGrid.data,o)[0],c,h,g,p;if(xmlJsonClass.xml2json){c=xmlJsonClass.xml2json(u," "),c=$.parseJSON(c);for(g in c)c.hasOwnProperty(g)&&(h=c[g]);h!==void 0&&(f?(p=c.grid.datatype,c.grid.datatype="xmlstring",c.grid.datastr=o,$(t).jqGrid(h).jqGrid("setGridParam",{datatype:p})):$(t).jqGrid(h))}else(jgrid.defaults!=null&&$.isFunction(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert)("xml2json or parse are not present")},i=function(o,s){if(o&&typeof o=="string"){var u=$.parseJSON(o),f=u[s.jsonGrid.config],c=u[s.jsonGrid.data],h;c?(h=f.datatype,f.datatype="jsonstring",f.datastr=c,$(t).jqGrid(f).jqGrid("setGridParam",{datatype:h})):$(t).jqGrid(f)}},a;switch(e.imptype){case"xml":$.ajax($.extend({url:e.impurl,type:e.mtype,data:e.impData,dataType:"xml",context:e,complete:function(o){(o.status<300||o.status===304)&&(o.status!==0||o.readyState!==4)&&(r(o.responseXML,this),$(t).triggerHandler("jqGridImportComplete",[o,this]),$.isFunction(this.importComplete)&&this.importComplete(o))}},e.ajaxOptions));break;case"xmlstring":e.impstring&&typeof e.impstring=="string"&&(a=$.parseXML(e.impstring),a&&(r(a,e),$(t).triggerHandler("jqGridImportComplete",[a,e]),$.isFunction(e.importComplete)&&e.importComplete(a),e.impstring=null));break;case"json":$.ajax($.extend({url:e.impurl,type:e.mtype,data:e.impData,dataType:"json",context:e,complete:function(o){try{(o.status<300||o.status===304)&&(o.status!==0||o.readyState!==4)&&(i(o.responseText,this),$(t).triggerHandler("jqGridImportComplete",[o,this]),$.isFunction(this.importComplete)&&this.importComplete(o))}catch{}}},e.ajaxOptions));break;case"jsonstring":e.impstring&&typeof e.impstring=="string"&&(i(e.impstring,e),$(t).triggerHandler("jqGridImportComplete",[e.impstring,e]),$.isFunction(e.importComplete)&&e.importComplete(e.impstring),e.impstring=null);break}})},jqGridExport:function(e){e=$.extend({exptype:"xmlstring",root:"grid",ident:"	"},e||{});var t=null;return this.each(function(){if(this.grid){var r,i=$.extend(!0,{},$(this).jqGrid("getGridParam"));if(i.rownumbers&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.multiselect&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.subGrid&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.knv=null,i.treeGrid)for(r in i.treeReader)i.treeReader.hasOwnProperty(r)&&(i.colNames.splice(i.colNames.length-1),i.colModel.splice(i.colModel.length-1));switch(e.exptype){case"xmlstring":t="<"+e.root+">"+xmlJsonClass.json2xml(i,e.ident)+"</"+e.root+">";break;case"jsonstring":t="{"+xmlJsonClass.toJson(i,e.root,e.ident,!1)+"}",i.postData.filters!==void 0&&(t=t.replace(/filters":"/,'filters":'),t=t.replace(/\}\]\}"/,"}]}"));break}}}),t},excelExport:function(e){return e=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},e||{}),this.each(function(){var t;this.grid&&e.exptype==="remote"&&(t=$.extend({},this.p.postData,e.exportOptions),t[e.oper]=e.tag,window.location=e.url+(e.url!=null&&e.url.indexOf("?")>=0?"&":"?")+$.param(t))})}});var editFeedback=function(e){var t=$.makeArray(arguments).slice(1);return t.unshift(""),t.unshift("Inline"),t.unshift(e),jgrid.feedback.apply(this,t)};jgrid.inlineEdit=jgrid.inlineEdit||{},jgrid.extend({editRow:function(e,t,r,i,a,o,s,u,f,c){var h={},g=$.makeArray(arguments).slice(1);return $.type(g[0])==="object"?h=g[0]:(t!==void 0&&(h.keys=t),$.isFunction(r)&&(h.oneditfunc=r),$.isFunction(i)&&(h.successfunc=i),a!==void 0&&(h.url=a),o!=null&&(h.extraparam=o),$.isFunction(s)&&(h.aftersavefunc=s),$.isFunction(u)&&(h.errorfunc=u),$.isFunction(f)&&(h.afterrestorefunc=f),$.isFunction(c)&&(h.beforeEditRow=c)),this.each(function(){var p=this,m=$(p),b=p.p,v=0,j=null,y={},S={},C=b.colModel,w=b.prmNames;if(p.grid){var x=$.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeEditRow:null,focusField:!0},jgrid.inlineEdit,b.inlineEditing||{},h),G=m.jqGrid("getInd",e,!0),l=x.focusField,R=typeof l=="object"&&l!=null?$(l.target||l).closest("tr.jqgrow>td")[0]:null;if(G!==!1&&!(x.extraparam[w.oper]!==w.addoper&&!editFeedback.call(p,x,"beforeEditRow",x,e))&&($(G).attr("editable")||"0")==="0"&&!$(G).hasClass("not-editable-row")){var B=jgrid.detectRowEditing.call(p,e);if(B!=null&&B.mode==="cellEditing"){var T=B.savedRow,H=p.rows[T.id],P=getGuiStateStyles.call(p,"select");m.jqGrid("restoreCell",T.id,T.ic),$(H.cells[T.ic]).removeClass("edit-cell "+P),$(H).addClass(P).attr({"aria-selected":"true",tabindex:"0"})}if(jgrid.enumEditableCells.call(p,G,$(G).hasClass("jqgrid-new-row")?"add":"edit",function(k){var O=k.cm,N=$(k.dataElement),z=k.dataWidth,I,Q,ie,X=O.name,re=O.edittype,ee=k.iCol,Z=O.editoptions||{};if(S[X]=k.editable,k.editable!=="hidden"){try{I=$.unformat.call(this,k.td,{rowId:e,colModel:O},ee)}catch{I=re==="textarea"?N.text():N.html()}y[X]=I,N.html(""),Q=$.extend({},Z,{id:e+"_"+X,name:X,rowId:e,mode:k.mode,cm:O,iCol:ee}),(I==="&nbsp;"||I==="&#160;"||I.length===1&&I.charCodeAt(0)===160)&&(I=""),ie=jgrid.createEl.call(p,re,Q,I,!0,$.extend({},jgrid.ajaxOptions,b.ajaxSelectOptions||{})),$(ie).addClass("editable"),N.append(ie),z&&$(ie).width(k.dataWidth),jgrid.bindEv.call(p,ie,Q),re==="select"&&Z.multiple===!0&&Z.dataUrl===void 0&&jgrid.msie&&$(ie).width($(ie).width()),j===null&&(j=ee),v++}}),v>0){if(y.id=e,b.savedRow.push(y),b.editingInfo[e]={mode:"inlineEditing",savedRow:y,editable:S},$(G).attr("editable","1"),l&&(typeof l=="number"&&parseInt(l,10)<=C.length?j=l:typeof l=="string"?j=b.iColByName[l]:R!=null&&(j=R.cellIndex),setTimeout(function(){var k=m.jqGrid("getNumberOfFrozenColumns"),O=function(Q){return b.frozenColumns&&k>0&&j<k?p.grid.fbRows[G.rowIndex].cells[Q]:G.cells[Q]},N=function(Q){return $(Q).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)")},z=function(){return N(b.frozenColumns&&k>0?p.grid.fbRows[G.rowIndex]:G).first()},I=N(O(j));I.length>0?I.first().focus():typeof x.defaultFocusField=="number"||typeof x.defaultFocusField=="string"?(I=N(O(typeof x.defaultFocusField=="number"?x.defaultFocusField:b.iColByName[x.defaultFocusField])),I.length===0&&(I=z()),I.first().focus()):z().focus()},0)),x.keys===!0){var V=$(G);b.frozenColumns&&(V=V.add(p.grid.fbRows[G.rowIndex])),V.on("keydown",function(k){if(k.keyCode===27)return m.jqGrid("restoreRow",e,x.afterrestorefunc),!1;if(k.keyCode===13){var O=k.target;return O.tagName==="TEXTAREA"?!0:(m.jqGrid("saveRow",e,x),!1)}})}fullBoolFeedback.call(p,x.oneditfunc,"jqGridInlineEditRow",e,x)}}}})},saveRow:function(e,t,r,i,a,o,s,u){var f=$.makeArray(arguments).slice(1),c={},h=this[0],g=$(h),p=h!=null?h.p:null,m,b=jgrid.info_dialog,v=$.isFunction,j=jgrid.defaults!=null&&v(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert;if(!(!h.grid||p==null)){$.type(f[0])==="object"?c=f[0]:(v(t)&&(c.successfunc=t),r!==void 0&&(c.url=r),i!==void 0&&(c.extraparam=i),v(a)&&(c.aftersavefunc=a),v(o)&&(c.errorfunc=o),v(s)&&(c.afterrestorefunc=s),v(u)&&(c.beforeSaveRow=u));var y=function(X){return g.jqGrid("getGridRes",X)};c=$.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:y("defaults.savetext")||"Saving..."},jgrid.inlineEdit,p.inlineEditing||{},c);var S={},C={},w={},x,G,l,R,B,T,H=g.jqGrid("getInd",e,!0),P=$(H),V=p.prmNames,k=y("errors.errcap"),O=y("edit.bClose"),N,z,I=function(X,re){try{var ee=jgrid.getRelativeRect.call(h,re);b.call(h,k,X,O,{top:ee.top,left:ee.left+$(h).closest(".ui-jqgrid").offset().left})}catch{j(X)}};if(H!==!1&&(m=c.extraparam[V.oper]===V.addoper?"add":"edit",!!editFeedback.call(h,c,"beforeSaveRow",c,e,m)&&(x=P.attr("editable"),c.url=c.url||p.editurl,N=c.url!=="clientArray",x==="1"))){if(T=$.jgrid.detectRowEditing.call(h,e),jgrid.enumEditableCells.call(h,H,P.hasClass("jqgrid-new-row")?"add":"edit",function(X){var re=X.cm,ee=re.formatter,Z=re.editoptions||{},te=re.formatoptions||{},J={},he=jgrid.getEditedValue.call(h,$(X.dataElement),re,J,X.editable);if(re.edittype==="select"&&re.formatter!=="select"&&(C[re.name]=J.text),B=jgrid.checkValues.call(h,he,X.iCol,void 0,void 0,$.extend(X,{oldValue:T!=null?T.savedRow[re.name]:null,newValue:he,oldRowData:T!=null?T.savedRow:null})),B!=null&&B[0]===!1)return z=!0,I(B[1],X.td),!1;ee==="date"&&te.sendFormatted!==!0&&(he=$.unformat.date.call(h,he,re)),N&&Z.NullIfEmpty===!0&&he===""&&(he="null"),S[re.name]=he}),z)return;var Q;V=p.prmNames,p.keyName===!1?Q=V.id:Q=p.keyName,S&&(S[V.oper]=V.editoper,(S[Q]===void 0||S[Q]==="")&&(S[Q]=jgrid.stripPref(p.idPrefix,e)),S=$.extend({},S,p.inlineData||{},c.extraparam));var ie={options:c,rowid:e,tr:H,iRow:H.rowIndex,savedRow:T.savedRow,newData:S,mode:m};if(!editFeedback.call(h,c,"saveRowValidation",ie)){ie.errorText&&I(ie.errorText,H);return}if(N)g.jqGrid("progressBar",{method:"show",loadtype:c.saveui,htmlcontent:c.savetext}),w=$.extend({},S,w),w[Q]=jgrid.stripPref(p.idPrefix,w[Q]),p.autoEncodeOnEdit&&$.each(w,function(X,re){v(re)||(w[X]=jgrid.oldEncodePostedData(re))}),H.id!==p.idPrefix+w[Q]&&V.idold!=null&&!w.hasOwnProperty(V.idold)&&(w[V.idold]=jgrid.stripPref(p.idPrefix,H.id)),$.ajax($.extend({url:v(c.url)?c.url.call(h,w[Q],m,w,c):c.url,data:jgrid.serializeFeedback.call(h,v(c.serializeSaveData)?c.serializeSaveData:p.serializeRowData,"jqGridInlineSerializeSaveData",w),type:v(c.mtype)?c.mtype.call(h,m,c,w[Q],w):c.mtype,complete:function(X,re){if(g.jqGrid("progressBar",{method:"hide",loadtype:c.saveui}),(X.status<300||X.status===304)&&(X.status!==0||X.readyState!==4)){var ee,Z,te;if(Z=g.triggerHandler("jqGridInlineSuccessSaveRow",[X,e,c,m,w]),(Z==null||Z===!0)&&(Z=[!0,S]),Z[0]&&v(c.successfunc)&&(Z=c.successfunc.call(h,X,e,c,m,w)),$.isArray(Z)?(ee=Z[0],S=Z[1]||S):ee=Z,ee===!0){for(p.autoEncodeOnEdit&&$.each(S,function(J,he){S[J]=jgrid.oldDecodePostedData(he)}),S=$.extend({},S,C),g.jqGrid("setRowData",e,S),P.attr("editable","0"),te=0;te<p.savedRow.length;te++)if(String(p.savedRow[te].id)===String(e)){l=te;break}l>=0&&(p.savedRow.splice(l,1),delete p.editingInfo[e]),fullBoolFeedback.call(h,c.aftersavefunc,"jqGridInlineAfterSaveRow",e,X,S,c),Z[2]!=null?g.jqGrid("changeRowid",e,p.idPrefix+Z[2]):H.id!==p.idPrefix+S[Q]&&g.jqGrid("changeRowid",H.id,p.idPrefix+S[Q]),P.removeClass("jqgrid-new-row").off("keydown")}else fullBoolFeedback.call(h,c.errorfunc,"jqGridInlineErrorSaveRow",e,X,re,null,c),c.restoreAfterError===!0&&g.jqGrid("restoreRow",e,c.afterrestorefunc)}},error:function(X,re,ee){if(g.triggerHandler("jqGridInlineErrorSaveRow",[e,X,re,ee,c]),v(c.errorfunc))c.errorfunc.call(h,e,X,re,ee);else{var Z=X.responseText||X.statusText;try{b.call(h,k,'<div class="'+getGuiStateStyles.call(h,"error")+'">'+Z+"</div>",O,{buttonalign:"right"})}catch{j(Z)}}c.restoreAfterError===!0&&g.jqGrid("restoreRow",e,c.afterrestorefunc)}},jgrid.ajaxOptions,p.ajaxRowOptions,c.ajaxSaveOptions||{}));else{for(S=$.extend({},S,C),R=g.jqGrid("setRowData",e,S),P.attr("editable","0"),G=0;G<p.savedRow.length;G++)if(String(p.savedRow[G].id)===String(e)){l=G;break}l>=0&&(p.savedRow.splice(l,1),delete p.editingInfo[e]),fullBoolFeedback.call(h,c.aftersavefunc,"jqGridInlineAfterSaveRow",e,R,S,c),P.removeClass("jqgrid-new-row").off("keydown"),H.id!==p.idPrefix+S[Q]&&g.jqGrid("changeRowid",H.id,p.idPrefix+S[Q])}}}},restoreRow:function(e,t){var r=$.makeArray(arguments).slice(1),i={};return $.type(r[0])==="object"?i=r[0]:$.isFunction(t)&&(i.afterrestorefunc=t),this.each(function(){var a=this,o=$(a),s=a.p,u=-1,f={},c;if(a.grid){var h=$.extend(!0,{},jgrid.inlineEdit,s.inlineEditing||{},i),g=o.jqGrid("getInd",e,!0);if(g!==!1&&editFeedback.call(a,h,"beforeCancelRow",h,e)){for(c=0;c<s.savedRow.length;c++)if(String(s.savedRow[c].id)===String(e)){u=c;break}if(u>=0){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker","#"+jgrid.jqID(g.id)).datepicker("hide")}catch{}$.each(s.colModel,function(){var p=this.name;s.savedRow[u].hasOwnProperty(p)&&(f[p]=s.savedRow[u][p],this.formatter&&this.formatter==="date"&&(this.formatoptions==null||this.formatoptions.sendFormatted!==!0)&&(f[p]=$.unformat.date.call(a,f[p],this)))}),o.jqGrid("setRowData",e,f),$(g).attr("editable","0").off("keydown"),s.savedRow.splice(u,1),delete s.editingInfo[e],$("#"+jgrid.jqID(e),a).hasClass("jqgrid-new-row")&&setTimeout(function(){o.jqGrid("delRowData",e),o.jqGrid("showAddEditButtons",!1)},0)}fullBoolFeedback.call(a,h.afterrestorefunc,"jqGridInlineAfterRestoreRow",e)}}})},addRow:function(e){return this.each(function(){if(this.grid){var t=this,r=$(t),i=t.p,a=$.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,beforeAddRow:null,addRowParams:{extraparam:{}}},jgrid.inlineEdit,i.inlineEditing||{},e||{});if(editFeedback.call(t,a,"beforeAddRow",a.addRowParams))if(a.rowID=$.isFunction(a.rowID)?a.rowID.call(t,a):a.rowID!=null?a.rowID:jgrid.randId(),a.useDefValues===!0&&$(i.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var u=this.editoptions.defaultValue;a.initdata[this.name]=$.isFunction(u)?u.call(t,a):u}}),a.rowID=i.idPrefix+a.rowID,r.jqGrid("addRowData",a.rowID,a.initdata,a.position),$("#"+jgrid.jqID(a.rowID),t).addClass("jqgrid-new-row"),a.useFormatter)$("#"+jgrid.jqID(a.rowID)+" .ui-inline-edit",t).click();else{var o=i.prmNames,s=o.oper;a.addRowParams.extraparam[s]=o.addoper,r.jqGrid("editRow",a.rowID,a.addRowParams),r.jqGrid("setSelection",a.rowID)}}})},inlineNav:function(e,t){return typeof e=="object"&&(t=e,e=void 0),this.each(function(){var r=this,i=$(r),a=r.p;if(!(!this.grid||a==null)){var o,s=e===a.toppager?a.idSel+"_top":a.idSel,u=e===a.toppager?a.id+"_top":a.id,f=getGuiStateStyles.call(r,"disabled"),c=$.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:!1,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},i.jqGrid("getGridRes","nav"),jgrid.nav||{},a.navOptions||{},jgrid.inlineNav||{},a.inlineNavOptions||{},t||{}),h=function(){r.modalAlert()};if(e===void 0)if(a.pager)if(i.jqGrid("inlineNav",a.pager,c),a.toppager)e=a.toppager,s=a.idSel+"_top",u=a.id+"_top";else return;else a.toppager&&(e=a.toppager,s=a.idSel+"_top",u=a.id+"_top");if(e!==void 0&&(o=$(e),!(o.length<=0))){if(o.find(".navtable").length<=0&&i.jqGrid("navGrid",e,{add:!1,edit:!1,del:!1,search:!1,refresh:!1,view:!1}),a._inlinenav=!0,c.addParams.useFormatter===!0){var g=a.colModel,p,m,b;for(p=0;p<g.length;p++)if(g[p].formatter&&g[p].formatter==="actions"){g[p].formatoptions&&(m={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},b=$.extend(m,g[p].formatoptions),c.addParams.addRowParams={keys:b.keys,oneditfunc:b.onEdit,successfunc:b.onSuccess,url:b.url,extraparam:b.extraparam,aftersavefunc:b.afterSave,errorfunc:b.onError,afterrestorefunc:b.afterRestore});break}}c.add&&i.jqGrid("navButtonAdd",e,{caption:c.addtext,title:c.addtitle,commonIconClass:c.commonIconClass,buttonicon:c.addicon,iconsOverText:c.iconsOverText,id:u+"_iladd",onClickButton:function(){hasOneFromClasses(this,f)||i.jqGrid("addRow",c.addParams)}}),c.edit&&i.jqGrid("navButtonAdd",e,{caption:c.edittext,title:c.edittitle,commonIconClass:c.commonIconClass,buttonicon:c.editicon,iconsOverText:c.iconsOverText,id:u+"_iledit",onClickButton:function(){if(!hasOneFromClasses(this,f)){var v=a.selrow;v?i.jqGrid("editRow",v,c.editParams):h()}}}),c.save&&(i.jqGrid("navButtonAdd",e,{caption:c.savetext,title:c.savetitle,commonIconClass:c.commonIconClass,buttonicon:c.saveicon,iconsOverText:c.iconsOverText,id:u+"_ilsave",onClickButton:function(){if(!hasOneFromClasses(this,f)&&a.savedRow.length>0){var v=a.savedRow[0].id;if(v){var j=a.prmNames,y=j.oper,S=c.editParams;$("#"+jgrid.jqID(v),r).hasClass("jqgrid-new-row")?(c.addParams.addRowParams.extraparam[y]=j.addoper,S=c.addParams.addRowParams):(c.editParams.extraparam||(c.editParams.extraparam={}),c.editParams.extraparam[y]=j.editoper),i.jqGrid("saveRow",v,S)}else h()}}}),$(s+"_ilsave").addClass(f)),c.cancel&&(i.jqGrid("navButtonAdd",e,{caption:c.canceltext,title:c.canceltitle,commonIconClass:c.commonIconClass,buttonicon:c.cancelicon,iconsOverText:c.iconsOverText,id:u+"_ilcancel",onClickButton:function(){if(!hasOneFromClasses(this,f)&&a.savedRow.length>0){var v=a.savedRow[0].id,j=c.editParams;v?($("#"+jgrid.jqID(v),r).hasClass("jqgrid-new-row")&&(j=c.addParams.addRowParams),i.jqGrid("restoreRow",v,j)):h()}}}),$(s+"_ilcancel").addClass(f)),c.restoreAfterSelect===!0&&i.on("jqGridSelectRow",function(v,j){if(a.savedRow.length>0&&a._inlinenav===!0){var y=a.savedRow[0].id;j!==y&&typeof y!="number"&&i.jqGrid("restoreRow",y,c.editParams)}}),i.on("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",function(){i.jqGrid("showAddEditButtons",!1)}),i.on("jqGridInlineEditRow",function(v,j){i.jqGrid("showAddEditButtons",!0,j)})}}})},showAddEditButtons:function(e){return this.each(function(){var t=this;if(t.grid){var r=t.p,i=r.idSel,a=getGuiStateStyles.call(t,"disabled"),o=i+"_ilsave,"+i+"_ilcancel"+(r.toppager?","+i+"_top_ilsave,"+i+"_top_ilcancel":""),s=i+"_iladd,"+i+"_iledit"+(r.toppager?","+i+"_top_iladd,"+i+"_top_iledit":"");$(e?s:o).addClass(a),$(e?o:s).removeClass(a)}})}});var $UiMultiselect=$.ui!=null?$.ui.multiselect:null,reorderSelectedColumns=function(e){if(this.grid!=null&&this.grid.p!=null){var t=this,r=this.grid.p,i,a,o,s,u=this.gh,f=this.selectedList,c=this.inGroup,h=f.find("li"),g,p=h.length-1,m=function(C,w,x){var G,l,R=f.find("li");for(w===void 0&&(w=x?R.length-1:0),G=w;x?G>=0:G<R.length;x?G--:G++)if(l=$(R[G]).data("optionLink"),l&&C.call(R[G],parseInt(l.val(),10),G))return G},b=function(){a=$.inArray(r.colModel[e].name,t.newColOrder),a>=0&&t.newColOrder.splice(a,1),h=f.find("li"),i=0,m(function(C,w){if(C===e){for(p=w;i>=0&&i<r.colModel.length&&i!==e&&(r.colModel[i].hidden||r.colModel[i].hidedlg)&&(c==null||c[i]===c[e]);)i++;return t.newColOrder.splice(i,0,r.colModel[e].name),!0}i=$.inArray(r.colModel[C].name,t.newColOrder,i),i<0&&(i=$.inArray(r.colModel[C].name,t.newColOrder)),i++})},v=function(C){if(c[C]===c[e])return $(this).after(h[p]),b(),!0},j=function(C){if(c[C]===c[e])return $(this).before(h[p]),b(),!0},y=function(C){if(c[C]===c[e]&&c[C]!==void 0)return u[c[C]].startColumnName=r.colModel[C].name,!0};if(b(),u&&u[c[e]]!==void 0){for(s=u[c[e]],a=0;a<s.numberOfColumns;a++)if(i=r.iColByName[s.startColumnName]+a,!r.colModel[i].hidden&&!r.colModel[i].hidedlg){m(v,p-1,!0),m(j,p+1),m(y);break}}else if(u){if(h=f.find("li"),a=m(function(C){if(C===e)return!0}),a+1>=h.length||a<0)return;if(g=$(h[a+1]).data("optionLink"),g&&(o=c[parseInt(g.val(),10)],o!==void 0&&(g=$(h[a-1]).data("optionLink"),g&&c[parseInt(g.val(),10)]===o))){var S=m(function(C){if(c[C]!==o)return!0},a+1);$(h[S===void 0||S>=h.length?h.length-1:S-1]).after(h[p]),b()}}}};if(jgrid.msie&&jgrid.msiever()===8&&($.expr[":"].hidden=function(e){return e.offsetWidth===0||e.offsetHeight===0||e.style.display==="none"}),jgrid._multiselect=!1,$UiMultiselect){if($UiMultiselect.prototype._setSelected){var setSelected=$UiMultiselect.prototype._setSelected;$UiMultiselect.prototype._setSelected=function(e,t){var r=setSelected.call(this,e,t),i=this.element,a=parseInt(e.data("optionLink").val(),10);return t&&this.selectedList&&(reorderSelectedColumns.call(this,a),this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(i)})),r}}$UiMultiselect.prototype.destroy&&($UiMultiselect.prototype.destroy=function(){var e=this;e.element.show(),e.container.remove(),$.Widget===void 0?$.widget.prototype.destroy.apply(e,arguments):$.Widget.prototype.destroy.apply(e,arguments)}),jgrid._multiselect=!0}jgrid.extend({sortableColumns:function(e){return this.each(function(){var t=this,r=t.p,i=jqID(r.id);if(!r||!r.sortable||!$.isFunction($.fn.sortable))return;function a(){r.disableClick=!0}var o={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+i+"_cb,#jqgh_"+i+"_rn,#jqgh_"+i+"_subgrid),:hidden)",placeholder:{element:function(c){var h=$(document.createElement(c[0].nodeName)).addClass(c[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return h},update:function(c,h){h.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),h.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}},start:function(){t.grid.hDiv.scrollLeft=t.grid.bDiv.scrollLeft},update:function(c,h){var g=$(">th",$(h.item).parent()),p=r.id+"_",m=[];g.each(function(){var b=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(p,""),v=r.iColByName[b];v!==void 0&&m.push(v)}),$(t).jqGrid("remapColumns",m,!0,!0),$.isFunction(r.sortable.update)&&r.sortable.update(m),setTimeout(function(){r.disableClick=!1},50)}};if(r.sortable.options?$.extend(o,r.sortable.options):$.isFunction(r.sortable)&&(r.sortable={update:r.sortable}),o.start){var s=o.start;o.start=function(c,h){a(),s.call(this,c,h)}}else o.start=a;r.sortable.exclude&&(o.items+=":not("+r.sortable.exclude+")");var u=e.sortable(o),f=u.data("sortable")||u.data("uiSortable")||u.data("ui-sortable");f!=null&&(f.floating=!0)})},columnChooser:function(e){var t=this,r=t[0],i=r.p,a,o,s,u,f,c,h,g=i.colModel,p=g.length,m=i.colNames,b=function(R){return $UiMultiselect&&$UiMultiselect.prototype&&R.data($UiMultiselect.prototype.widgetFullName||$UiMultiselect.prototype.widgetName)||R.data("ui-multiselect")||R.data("multiselect")};if($("#colchooser_"+jqID(i.id)).length)return;a=$('<div id="colchooser_'+i.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),o=$("select",a);function v(R,B){R&&(typeof R=="string"?$.fn[R]&&$.fn[R].apply(B,$.makeArray(arguments).slice(2)):$.isFunction(R)&&R.apply(B,$.makeArray(arguments).slice(2)))}if(e=$.extend({width:400,height:240,classname:null,done:function(R){R&&t.jqGrid("remapColumns",R,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(R){var B={};return B[R.bSubmit]=function(){R.apply_perm(),R.cleanup(!1)},B[R.bCancel]=function(){R.cleanup(!0)},$.extend(!0,{buttons:B,close:function(){R.cleanup(!0)},modal:R.modal||!1,resizable:R.resizable||!0,width:R.width+70,resize:function(){var T=b(o),H=T.container.closest(".ui-dialog-content");H.length>0&&typeof H[0].style=="object"?H[0].style.width="":H.css("width",""),T.selectedList.height(Math.max(T.selectedContainer.height()-T.selectedActions.outerHeight()-1,1)),T.availableList.height(Math.max(T.availableContainer.height()-T.availableActions.outerHeight()-1,1))}},R.dialog_opts||{})},apply_perm:function(){var R=new Array(i.colModel.length),B,T,H={notSkipFrozen:e.notSkipFrozen===void 0?!1:e.notSkipFrozen,skipSetGridWidth:!0,skipSetGroupHeaders:!0};for(B=0;B<i.colModel.length;B++)R[B]=i.iColByName[c.newColOrder[B]];if($("option",o).each(function(){$(this).is(":selected")?t.jqGrid("showCol",g[this.value].name,H):t.jqGrid("hideCol",g[this.value].name,H)}),e.done&&e.done.call(t,R),i.groupHeader&&(typeof i.groupHeader=="object"||$.isFunction(i.groupHeader)))if(t.jqGrid("destroyGroupHeader",!1),i.groupHeader.groupHeaders=c.gh,i.pivotOptions!=null&&i.pivotOptions.colHeaders!=null&&i.pivotOptions.colHeaders.length>1)for(T=i.pivotOptions.colHeaders,B=0;B<T.length;B++)T[B]&&T[B].groupHeaders.length&&t.jqGrid("setGroupHeaders",T[B]);else t.jqGrid("setGroupHeaders",i.groupHeader);var P=!i.autowidth&&(i.widthOrg===void 0||i.widthOrg==="auto"||i.widthOrg==="100%")?i.tblwidth:i.width;P!==i.width&&t.jqGrid("setGridWidth",P,i.shrinkToFit)},cleanup:function(R){v(e.dlog,a,"destroy"),v(e.msel,o,"destroy"),a.remove(),R&&e.done&&e.done.call(t)},msel_opts:{}},t.jqGrid("getGridRes","col"),jgrid.col,e||{}),$.ui&&$UiMultiselect&&$UiMultiselect.defaults){if(!jgrid._multiselect){(jgrid.defaults!=null&&$.isFunction(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert)("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}e.msel_opts=$.extend($UiMultiselect.defaults,e.msel_opts)}e.caption&&a.attr("title",e.caption),e.classname&&(a.addClass(e.classname),o.addClass(e.classname)),e.width&&($(">div",a).css({width:e.width,margin:"0 auto"}),o.css("width",e.width)),e.height&&($(">div",a).css("height",e.height),o.css("height",e.height-10)),o.empty();var j=i.groupHeader!=null?i.groupHeader.groupHeaders:0,y={},S,C,w,x;if(j)for(S=0;S<j.length;S++)for(x=j[S],C=0;C<x.numberOfColumns;C++)w=i.iColByName[x.startColumnName]+C,y[w]=$.isFunction(e.buildItemText)?e.buildItemText.call(t[0],{iCol:w,cm:g[w],cmName:g[w].name,colName:m[w],groupTitleText:x.titleText}):$.jgrid.stripHtml(x.titleText)+": "+$.jgrid.stripHtml(m[w]===""?g[w].name:m[w]);for(w=0;w<p;w++)y[w]===void 0&&(y[w]=$.isFunction(e.buildItemText)?e.buildItemText.call(t[0],{iCol:w,cm:g[w],cmName:g[w].name,colName:m[w],groupTitleText:null}):$.jgrid.stripHtml(m[w]));if($.each(g,function(R){this.hidedlg||o.append("<option value='"+R+"'"+(i.headertitles||this.headerTitle?" title='"+jgrid.stripHtml(typeof this.headerTitle=="string"?this.headerTitle:y[R])+"'":"")+(this.hidden?"":" selected='selected'")+">"+y[R]+"</option>")}),s=$.isFunction(e.dlog_opts)?e.dlog_opts.call(t,e):e.dlog_opts,v(e.dlog,a,s),u=$.isFunction(e.msel_opts)?e.msel_opts.call(t,e):e.msel_opts,v(e.msel,o,u),f=$("#colchooser_"+jqID(i.id)),f.css({margin:"auto"}),f.find(">div").css({width:"100%",height:"100%",margin:"auto"}),c=b(o),c){if(c.grid=r,j){c.gh=$.extend(!0,[],j),c.inGroup=new Array(i.colModel.length);var G,l;for(G=0;G<j.length;G++)for(l=j[G],w=0;w<l.numberOfColumns;w++)c.inGroup[i.iColByName[l.startColumnName]+w]=G}c.newColOrder=$.map(g,function(R){return R.name}),c.container.css({width:"100%",height:"100%",margin:"auto"}),c.selectedContainer.css({width:c.options.dividerLocation*100+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),c.availableContainer.css({width:100-c.options.dividerLocation*100+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),c.selectedList.css("height","auto"),c.availableList.css("height","auto"),h=Math.max(c.selectedList.height(),c.availableList.height()),h=Math.min(h,$(window).height()),c.selectedList.css("height",h),c.availableList.css("height",h),c.options!=null&&c.options.sortable&&c.selectedList.on("sortupdate",function(R,B){reorderSelectedColumns.call(c,parseInt(B.item.data("optionLink").val(),10)),B.item.css({width:"",height:""}),$.isFunction(e.sortUpdate)&&e.sortUpdate.call(r,R,B)}),$.isFunction(e.init)&&e.init.call(r,c)}},sortableRows:function(e){return this.each(function(){var t=this,r=t.grid,i=t.p;r&&(i.treeGrid||$.fn.sortable&&(e=$.extend({cursor:"move",axis:"y",items:">tbody>.jqgrow"},e||{}),e.start&&$.isFunction(e.start)?(e._start_=e.start,delete e.start):e._start_=!1,e.update&&$.isFunction(e.update)?(e._update_=e.update,delete e.update):e._update_=!1,e.start=function(a,o){if($(o.item).css("border-width","0"),$("td",o.item).each(function(u){this.style.width=r.cols[u].style.width}),i.subGrid){var s=$(o.item).attr("id");try{$(t).jqGrid("collapseSubGridRow",s)}catch{}}e._start_&&e._start_.apply(this,[a,o])},e.update=function(a,o){$(o.item).css("border-width",""),i.rownumbers===!0&&$("td.jqgrid-rownum",t.rows).each(function(s){$(this).html(s+1+(parseInt(i.page,10)-1)*parseInt(i.rowNum,10))}),e._update_&&e._update_.apply(this,[a,o])},$(t).sortable(e)))})},gridDnD:function(e){return this.each(function(){var t=this,r,i;if(!t.grid||t.p.treeGrid||!$.fn.draggable||!$.fn.droppable)return;function a(){var s=$.data(t,"dnd");$("tr.jqgrow:not(.ui-draggable)",t).draggable($.isFunction(s.drag)?s.drag.call($(t),s):s.drag)}var o="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if($("#jqgrid_dnd")[0]===void 0&&$("body").append(o),typeof e=="string"&&e==="updateDnD"&&t.p.jqgdnd===!0){a();return}if(e=$.extend({drag:function(s){return $.extend({start:function(u,f){var c,h;if(t.p.subGrid){h=$(f.helper).attr("id");try{$(t).jqGrid("collapseSubGridRow",h)}catch{}}for(c=0;c<$.data(t,"dnd").connectWith.length;c++)$($.data(t,"dnd").connectWith[c]).jqGrid("getGridParam","reccount")===0&&$($.data(t,"dnd").connectWith[c]).jqGrid("addRowData","jqg_empty_row",{});f.helper.addClass("ui-state-highlight"),$("td",f.helper).each(function(g){this.style.width=t.grid.headers[g].width+"px"}),s.onstart&&$.isFunction(s.onstart)&&s.onstart.call($(t),u,f)},stop:function(u,f){var c,h;for(f.helper.dropped&&!s.dragcopy&&(h=$(f.helper).attr("id"),h===void 0&&(h=$(this).attr("id")),$(t).jqGrid("delRowData",h)),c=0;c<$.data(t,"dnd").connectWith.length;c++)$($.data(t,"dnd").connectWith[c]).jqGrid("delRowData","jqg_empty_row");s.onstop&&$.isFunction(s.onstop)&&s.onstop.call($(t),u,f)}},s.drag_opts||{})},drop:function(s){return $.extend({accept:function(u){if(!$(u).hasClass("jqgrow"))return u;var f=$(u).closest("table.ui-jqgrid-btable");if(f.length>0&&$.data(f[0],"dnd")!==void 0){var c=$.data(f[0],"dnd").connectWith;return $.inArray("#"+jqID(this.id),c)!==-1}return!1},drop:function(u,f){if($(f.draggable).hasClass("jqgrow")){var c=$(f.draggable).attr("id"),h=f.draggable.parent().parent(),g=h.jqGrid("getRowData",c);if(!s.dropbyname){var p={},m,b,v,j,y=h.jqGrid("getGridParam","colModel"),S=$("#"+jqID(this.id)).jqGrid("getGridParam","colModel");try{for(m=0,b=0;m<y.length&&b<S.length;m++)if(v=y[m].name,!(v==="cb"||v==="rn"||v==="subgrid")){for(;b<S.length;b++)if(j=S[b].name,!(j==="cb"||j==="rn"||j==="subgrid")){p[j]=g[v];break}b++}g=p}catch{}}if(f.helper.dropped=!0,s.beforedrop&&$.isFunction(s.beforedrop)){var C=s.beforedrop.call(this,u,f,g,$("#"+jqID(t.p.id)),$(this));C!=null&&typeof C=="object"&&(g=C)}if(f.helper.dropped){var w;s.autoid&&($.isFunction(s.autoid)?w=s.autoid.call(this,g,{rowid:c,ev:u,ui:f}):(w=Math.ceil(Math.random()*1e3),w=s.autoidprefix+w)),$("#"+jqID(this.id)).jqGrid("addRowData",w,g,s.droppos),g[t.p.localReader.id]=w}s.ondrop&&$.isFunction(s.ondrop)&&s.ondrop.call(this,u,f,g)}}},s.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},e||{}),!!e.connectWith)for(e.connectWith=e.connectWith.split(","),e.connectWith=$.map(e.connectWith,function(s){return $.trim(s)}),$.data(t,"dnd",e),t.p.reccount!==0&&!t.p.jqgdnd&&a(),t.p.jqgdnd=!0,r=0;r<e.connectWith.length;r++)i=e.connectWith[r],$(i).droppable($.isFunction(e.drop)?e.drop.call($(t),e):e.drop)})},gridResize:function(e){return this.each(function(){var t=this,r=t.grid,i=t.p,a=i.gView+">.ui-jqgrid-bdiv",o=!1,s,u=i.height;if(!(!r||!$.fn.resizable)){if(e=$.extend({},e||{}),e.alsoResize?(e._alsoResize_=e.alsoResize,delete e.alsoResize):e._alsoResize_=!1,e.stop&&$.isFunction(e.stop)?(e._stop_=e.stop,delete e.stop):e._stop_=!1,e.stop=function(c,h){$(t).jqGrid("setGridWidth",h.size.width,e.shrinkToFit),$(i.gView+">.ui-jqgrid-titlebar").css("width",""),o?($(s).each(function(){$(this).css("height","")}),(u==="auto"||u==="100%")&&$(r.bDiv).css("height",u)):$(t).jqGrid("setGridParam",{height:$(a).height()}),t.fixScrollOffsetAndhBoxPadding&&t.fixScrollOffsetAndhBoxPadding(),e._stop_&&e._stop_.call(t,c,h)},s=a,(u==="auto"||u==="100%")&&e.handles===void 0&&(e.handles="e,w"),e.handles){var f=$.map(String(e.handles).split(","),function(c){return $.trim(c)});f.length===2&&(f[0]==="e"&&f[1]==="w"||f[1]==="e"&&f[1]==="w")&&(s=i.gView+">div:not(.frozen-div)",o=!0,i.pager&&(s+=","+i.pager))}e._alsoResize_?e.alsoResize=s+","+e._alsoResize_:e.alsoResize=s,delete e._alsoResize_,$(i.gBox).resizable(e)}})}});function Aggregation(e,t,r){if(!(this instanceof Aggregation))return new Aggregation(e);this.aggregator=e,this.finilized=!1,this.context=t,this.pivotOptions=r}Aggregation.prototype.calc=function(e,t,r,i,a){var o=this;if(e!==void 0)switch(o.result=o.result||0,e=parseFloat(e),o.aggregator){case"sum":o.result+=e;break;case"count":o.result++;break;case"avg":o.finilized?(o.count=o.count||0,o.result=(o.result*o.count+e)/(o.count+1),o.count++):(o.result+=e,o.count=o.count||0,o.count++);break;case"min":o.result=Math.min(o.result,e);break;case"max":o.result=Math.max(o.result,e);break;default:$.isFunction(o.aggregator)&&(o.result=o.aggregator.call(o.context,{previousResult:o.result,value:e,fieldName:t,item:r,iItem:i,items:a}));break}},Aggregation.prototype.getResult=function(e,t,r){var i=this;(i.result!==void 0||r)&&(r&&i.result!==void 0&&(i.result=0,i.count=0),i.result!==void 0&&!i.finilized&&i.aggregator==="avg"&&(i.result=i.result/i.count,i.finilized=!0),e[t]=i.result)};function ArrayOfFieldsets(e,t,r,i,a){var o,s=i.length,u,f=this,c=function(p,m){var b=p,v=m;if(b==null&&(b=""),v==null&&(v=""),b=String(b),v=String(v),this.caseSensitive||(b=b.toUpperCase(),v=v.toUpperCase()),b===v){if(p===m)return 0;if(p===void 0)return-1;if(m===void 0)return 1;if(p===null)return-1;if(m===null)return 1}return b<v?-1:1},h=function(p,m){return p=Number(p),m=Number(m),p===m?0:p<m?-1:1},g=function(p,m){return p=Math.floor(Number(p)),m=Math.floor(Number(m)),p===m?0:p<m?-1:1};for(f.items=[],f.indexesOfSourceData=[],f.trimByCollect=e,f.caseSensitive=t,f.skipSort=r,f.fieldLength=s,f.fieldNames=new Array(s),f.fieldSortDirection=new Array(s),f.fieldCompare=new Array(s),o=0;o<s;o++){switch(u=i[o],f.fieldNames[o]=u[a||"dataName"],u.sorttype){case"integer":case"int":f.fieldCompare[o]=g;break;case"number":case"currency":case"float":f.fieldCompare[o]=h;break;default:f.fieldCompare[o]=$.isFunction(u.compare)?u.compare:c;break}f.fieldSortDirection[o]=u.sortorder==="desc"?-1:1}}ArrayOfFieldsets.prototype.compareVectorsEx=function(e,t){var r=this,i=r.fieldLength,a,o;for(a=0;a<i;a++)if(o=r.fieldCompare[a](e[a],t[a]),o!==0)return{index:a,result:o};return{index:-1,result:0}},ArrayOfFieldsets.prototype.getIndexOfDifferences=function(e,t){return t===null||e===null?0:this.compareVectorsEx(e,t).index},ArrayOfFieldsets.prototype.compareVectors=function(e,t){var r=this.compareVectorsEx(e,t),i=r.index>=0?this.fieldSortDirection[r.index]:1;return i>0?r.result:-r.result},ArrayOfFieldsets.prototype.getItem=function(e){return this.items[e]},ArrayOfFieldsets.prototype.getIndexLength=function(){return this.items.length},ArrayOfFieldsets.prototype.getIndexesOfSourceData=function(e){return this.indexesOfSourceData[e]},ArrayOfFieldsets.prototype.createDataIndex=function(e){var t=this,r,i=e.length,a=t.fieldLength,o,s,u=t.fieldNames,f=t.indexesOfSourceData,c,h,g,p,m=t.items,b,v;for(r=0;r<i;r++){for(p=e[r],o=new Array(a),c=0;c<a;c++)s=p[u[c]],s!==void 0&&(typeof s=="string"&&t.trimByCollect&&(s=$.trim(s)),o[c]=s);if(b=0,v=m.length-1,v<0){m.push(o),f.push([r]);continue}if(h=t.compareVectors(o,m[v]),h===0){f[v].push(r);continue}if(h===1||t.skipSort){m.push(o),f.push([r]);continue}if(h=t.compareVectors(m[0],o),h===1){m.unshift(o),f.unshift([r]);continue}if(h===0){f[0].push(r);continue}for(;;){if(v-b<2){m.splice(v,0,o),f.splice(v,0,[r]);break}if(g=Math.floor((b+v)/2),h=t.compareVectors(m[g],o),h===0){f[g].push(r);break}h===1?v=g:b=g}}},jgrid.extend({pivotSetup:function(e,t){var r=this[0],i=$.isArray,a={},o={groupField:[],groupSummary:[],groupSummaryPos:[]},s={grouping:!0,groupingView:o},u=$.extend({totals:!1,useColSpanStyle:!1,trimByCollect:!0,skipSortByX:!1,skipSortByY:!1,caseSensitive:!1,footerTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1,defaultFormatting:!0,data:e},t||{}),f,c,h,g=e.length,p,m,b,v,j,y,S,C,w,x=u.xDimension,G=u.yDimension,l=u.aggregates,R,B=u.totalText||u.totals||u.rowTotals||u.totalHeader,T,H,P=i(x)?x.length:0,V=i(G)?G.length:0,k=i(l)?l.length:0,O=V-(k===1?1:0),N=[],z=[],I=[],Q=[],ie=["pivotInfos"],X=new Array(k),re=new Array(V),ee,Z,te,J,he,pe,Fe,be,ue,ve,_e,Oe,Ie,Pe,Je=function(De,U,K){var ne=new ArrayOfFieldsets(u.trimByCollect,u.caseSensitive,U,De);return $.isFunction(K)&&(ne.compareVectorsEx=K),ne.createDataIndex(e),ne},Ve=function(De,U,K,ne,ce){var de,qe,Ge;switch(De){case 1:de=G[ne].totalText||"{0} {1} {2}",qe="y"+ce+"t"+ne;break;case 2:de=u.totalText||"{0}",qe="t";break;default:de=k>1?U.label||"{0}":$.isFunction(G[ne].label)?G[ne].label:Ie.getItem(ce)[ne],qe="y"+ce;break}return Ge=$.extend({},U,{name:qe+(k>1?"a"+K:""),label:$.isFunction(de)?de.call(r,De===2?{aggregate:U,iAggregate:K,pivotOptions:u}:De===1?{yIndex:Ie.getItem(ce),aggregate:U,iAggregate:K,yLevel:ne,pivotOptions:u}:{yData:Ie.getItem(ce)[ne],yIndex:Ie.getItem(ce),yLevel:ne,pivotOptions:u}):jgrid.template.apply(r,De===2?[String(de),U.aggregator,U.member,K]:[String(de),U.aggregator,U.member,Ie.getItem(ce)[ne],ne])}),delete Ge.member,delete Ge.aggregator,Ge},Qe=function(De,U,K){var ne,ce;for(ne=0;ne<k;ne++)ce=l[ne],ce.template===void 0&&ce.formatter===void 0&&u.defaultFormatting&&(ce.template=ce.aggregator==="count"?"integer":"number"),I.push(Ve(De,ce,ne,U,K))},tt=function(De,U,K){var ne,ce,de,qe;for(ne=O-1;ne>=U;ne--)if(z[ne]){for(ce=0;ce<=ne;ce++)ve=N[ce].groupHeaders,ve[ve.length-1].numberOfColumns+=k;for(m=G[ne],de=m.totalHeader,qe=m.headerOnTop,ce=ne+1;ce<=O-1;ce++)N[ce].groupHeaders.push({titleText:qe&&ce===ne+1||!qe&&ce===O-1?$.isFunction(de)?de.call(r,K,ne):jgrid.template.call(r,String(de||""),K[ne],ne):"",startColumnName:"y"+(De-1)+"t"+ne+(k===1?"":"a0"),numberOfColumns:k})}},lt=function(De){var U=new Aggregation(l[De].aggregator==="count"?"sum":l[De].aggregator,r,t);return U.groupInfo={iRows:[],rows:[],ys:[],iYs:[]},U},dt=function(){var De,U;for(De=O-1;De>=0;De--)if(z[De])for(re[De]==null&&(re[De]=new Array(k)),U=0;U<k;U++)re[De][U]=lt(U)},it=function(De,U,K,ne){var ce,de=Ie.getIndexOfDifferences(U,K),qe,Ge;if(K!==null)for(de=Math.max(de,0),ce=O-1;ce>=de;ce--)qe="y"+De+"t"+ce+(k>1?"a"+ne:""),z[ce]&&be[qe]===void 0&&(Ge=re[ce][ne],Ge.getResult(be,qe),be.pivotInfos[qe]={colType:1,iA:ne,a:l[ne],level:ce,iRows:Ge.groupInfo.iRows,rows:Ge.groupInfo.rows,ys:Ge.groupInfo.ys,iYs:Ge.groupInfo.iYs},U!==K&&(re[ce][ne]=lt(ne)))},Le=function(De,U,K,ne,ce,de,qe){var Ge,Be,xe;if(De!==U)for(Ge=O-1;Ge>=0;Ge--)z[Ge]&&(Be=re[Ge][ne],Be.calc(ce[K.member],K.member,ce,de,e),xe=Be.groupInfo,$.inArray(qe,xe.iYs)<0&&(xe.iYs.push(qe),xe.ys.push(De)),$.inArray(de,xe.iRows)<0&&(xe.iRows.push(de),xe.rows.push(ce)))};if(P===0||k===0)throw"xDimension or aggregates options are not set!";for(Oe=Je(x,u.skipSortByX,u.compareVectorsByX),Ie=Je(G,u.skipSortByY,u.compareVectorsByY),t.xIndex=Oe,t.yIndex=Ie,c=0;c<P;c++)p=x[c],b={name:"x"+c,label:p.label!=null?$.isFunction(p.label)?p.label.call(r,p,c,u):p.label:p.dataName,frozen:u.frozenStaticCols},c<P-1&&!p.skipGrouping&&!p.additionalProperty&&(o.groupField.push(b.name),o.groupSummary.push(u.groupSummary),o.groupSummaryPos.push(u.groupSummaryPos)),b=$.extend(b,p),delete b.dataName,delete b.footerText,p.additionalProperty?ie.push(b.name):(I.push(b),s.sortname=b.name);for(P<2&&(s.grouping=!1),o.hideFirstGroupCol=!0,c=0;c<V;c++)m=G[c],z.push(!!(m.totals||m.rowTotals||m.totalText||m.totalHeader));for(ue=Ie.getItem(0),Qe(0,V-1,0),Pe=Ie.getIndexLength(),te=1;te<Pe;te++){for(J=Ie.getItem(te),c=Ie.getIndexOfDifferences(J,ue),h=O-1;h>=c;h--)z[h]&&Qe(1,h,te-1);ue=J,Qe(0,V-1,te)}for(c=O-1;c>=0;c--)z[c]&&Qe(1,c,Pe-1);for(B&&Qe(2),ue=Ie.getItem(0),h=0;h<O;h++)N.push({useColSpanStyle:u.useColSpanStyle,groupHeaders:[{titleText:$.isFunction(G[h].label)?G[h].label.call(r,{yData:ue[h],yIndex:ue,yLevel:h,pivotOptions:u}):ue[h],startColumnName:k===1?"y0":"y0a0",numberOfColumns:k}]});for(te=1;te<Pe;te++){for(J=Ie.getItem(te),c=Ie.getIndexOfDifferences(J,ue),tt(te,c,ue),h=O-1;h>=c;h--)N[h].groupHeaders.push({titleText:$.isFunction(G[h].label)?G[h].label.call(r,{yData:J[h],yIndex:J,yLevel:h,pivotOptions:u}):J[h],startColumnName:"y"+te+(k===1?"":"a0"),numberOfColumns:k});for(h=0;h<c;h++)ve=N[h].groupHeaders,ve[ve.length-1].numberOfColumns+=k;ue=J}if(tt(Pe,0,ue),B)for(c=0;c<O;c++)N[c].groupHeaders.push({titleText:c<O-1?"":u.totalHeader||"",startColumnName:"t"+(k===1?"":"a0"),numberOfColumns:k});for(ee=Oe.getIndexLength(),y=0;y<ee;y++){for(S=Oe.getItem(y),C={iX:y,x:S},be={pivotInfos:C},c=0;c<P;c++)be["x"+c]=S[c];if(Z=Oe.getIndexesOfSourceData(y),B)for(h=0;h<k;h++)X[h]=lt(h);for(ue=null,dt(),te=0;te<Pe;te++){for(J=Ie.getItem(te),he=Ie.getIndexesOfSourceData(te),h=0;h<k;h++){for(ue!==null&&it(te-1,J,ue,h),pe=[],c=0;c<he.length;c++)_e=he[c],$.inArray(_e,Z)>=0&&pe.push(_e);if(pe.length>0){for(w=new Array(pe.length),Fe=l[h],R=new Aggregation(Fe.aggregator,r,t),v=0;v<pe.length;v++)c=pe[v],f=e[c],w[v]=f,R.calc(f[Fe.member],Fe.member,f,c,e),B&&(T=X[h],T.calc(f[Fe.member],Fe.member,f,c,e),H=T.groupInfo,$.inArray(c,H.iYs)<0&&(H.iYs.push(te),H.ys.push(J)),$.inArray(c,H.iRows)<0&&(H.iRows.push(c),H.rows.push(f))),Le(J,ue,Fe,h,f,c,te);j="y"+te+(k===1?"":"a"+h),R.getResult(be,j),C[j]={colType:0,iY:te,y:J,iA:h,a:Fe,iRows:pe,rows:w}}}ue=J}if(ue!==null)for(h=0;h<k;h++)it(Pe-1,ue,ue,h);if(B)for(h=0;h<k;h++)j="t"+(k===1?"":"a"+h),T=X[h],T.getResult(be,j),H=T.groupInfo,C[j]={colType:2,iA:h,a:l[h],iRows:H.iRows,rows:H.rows,iYs:H.iYs,ys:H.ys};Q.push(be)}if(u.footerTotals||u.colTotals){for(g=Q.length,c=0;c<P;c++)a["x"+c]=x[c].footerText||"";for(c=P;c<I.length;c++){for(j=I[c].name,R=new Aggregation(u.footerAggregator||"sum",r,t),v=0;v<g;v++)be=Q[v],R.calc(be[j],j,be,v,Q);R.getResult(a,j)}}return t.colHeaders=N,{colModel:I,additionalProperties:ie,options:t,rows:Q,groupOptions:s,groupHeaders:N,summary:a}},jqPivot:function(e,t,r,i){return this.each(function(){var a=this,o=$(a),s=$.fn.jqGrid;function u(){var f=s.pivotSetup.call(o,e,t),c=f.groupHeaders,h=function(v){var j=0,y;for(y in v)v.hasOwnProperty(y)&&j++;return j},g=h(f.summary)>0,p=f.groupOptions.groupingView,m=jgrid.from.call(a,f.rows),b;if(!t.skipSortByX)for(b=0;b<p.groupField.length;b++)m.orderBy(p.groupField[b],r!=null&&r.groupingView&&r.groupingView.groupOrder!=null&&r.groupingView.groupOrder[b]==="desc"?"d":"a","text","");if(t.data=e,s.call(o,$.extend(!0,{datastr:$.extend(m.select(),g?{userdata:f.summary}:{}),datatype:"jsonstring",footerrow:g,userDataOnFooter:g,colModel:f.colModel,additionalProperties:f.additionalProperties,pivotOptions:f.options,viewrecords:!0,sortname:t.xDimension[0].dataName},f.groupOptions,r||{})),c.length)for(b=0;b<c.length;b++)c[b]&&c[b].groupHeaders.length&&s.setGroupHeaders.call(o,c[b]);t.frozenStaticCols&&s.setFrozenColumns.call(o)}typeof e=="string"?$.ajax($.extend({url:e,dataType:"json",success:function(f){e=jgrid.getAccessor(f,i&&i.reader?i.reader:"rows"),u()}},i||{})):u()})}});var subGridFeedback=function(){var e=$.makeArray(arguments);return e[0]="subGrid"+e[0].charAt(0).toUpperCase()+e[0].substring(1),e.unshift(""),e.unshift(""),e.unshift(this.p),jgrid.feedback.apply(this,e)},collapseOrExpand=function(e,t){return this.each(function(){if(this.grid&&e!=null&&this.p.subGrid===!0){var r=$(this).jqGrid("getInd",e,!0);$(r).find(">td."+t).trigger("click")}})};jgrid.extend({setSubGrid:function(){return this.each(function(){var e=this.p,t=$(this),r=e.subGridModel[0],i,a=function(o){return t.jqGrid("getIconRes",o)};if(e.subGridOptions=$.extend({commonIconClass:a("subgrid.common"),plusicon:a("subgrid.plus"),minusicon:a("subgrid.minus"),openicon:e.direction==="rtl"?a("subgrid.openRtl"):a("subgrid.openLtr"),expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},e.subGridOptions||{}),e.colNames.unshift(""),e.colModel.unshift({name:"subgrid",width:jgrid.cell_width?e.subGridWidth+e.cellLayout:e.subGridWidth,labelClasses:"jqgh_subgrid",sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0,frozen:!0}),r)for(r.align=$.extend([],r.align||[]),i=0;i<r.name.length;i++)r.align[i]=r.align[i]||"left"})},addSubGridCell:function(e,t,r,i){var a=this[0],o=a.p.subGridOptions,s=$.isFunction(o.hasSubgrid)?o.hasSubgrid.call(a,{rowid:r,iRow:t,iCol:e,data:i}):!0;return a.p==null?"":"<td role='gridcell' class='"+base.getGuiStyles.call(this,"subgrid.tdStart",s?"ui-sgcollapsed sgcollapsed":"")+"' "+a.formatCol(e,t)+">"+(s?"<div class='"+base.getGuiStyles.call(this,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(this,"subgrid.button","sgbutton")+"'><span class='"+jgrid.mergeCssClasses(o.commonIconClass,o.plusicon)+"'></span></a></div>":"&nbsp;")+"</td>"},addSubGrid:function(e,t){return this.each(function(){var r=this,i=r.p,a=i.subGridModel[0],o=function(G,l){return base.getGuiStyles.call(r,"subgrid."+G,l||"")},s=o("thSubgrid","ui-th-subgrid ui-th-column ui-th-"+i.direction),u=o("rowSubTable","ui-subtblcell"),f=o("row","ui-subgrid ui-row-"+i.direction),c=o("tdWithIcon","subgrid-cell"),h=o("tdData","subgrid-data"),g=function(G,l,R){var B=a.align[R],T=$("<td"+(B?" style='text-align:"+B+";'":"")+"></td>").html(l);G.append(T)},p=function(G,l){var R=i.xmlReader.subgrid;$(R.root+" "+R.row,G).each(function(){var B,T,H=$("<tr class='"+u+"'></tr>");if(R.repeatitems===!0)$(R.cell,this).each(function(P){g(H,$(this).text()||"&#160;",P)});else if(B=a.mapping||a.name,B)for(T=0;T<B.length;T++)g(H,jgrid.getXmlData(this,B[T])||"&#160;",T);l.append(H)})},m=function(G,l){var R,B,T,H,P,V=i.jsonReader.subgrid,k=jgrid.getAccessor(G,V.root);if(k!=null)for(B=0;B<k.length;B++){if(P=k[B],R=$("<tr class='"+u+"'></tr>"),V.repeatitems===!0)for(V.cell&&(P=P[V.cell]),T=0;T<P.length;T++)g(R,P[T]||"&#160;",T);else if(H=a.mapping||a.name,H.length)for(T=0;T<H.length;T++)g(R,jgrid.getAccessor(P,H[T])||"&#160;",T);l.append(R)}},b=function(G,l,R){var B,T,H=o("legacyTable","ui-jqgrid-legacy-subgrid"+(i.altRows===!0&&$(r).jqGrid("isBootstrapGuiStyle")?" table-striped":"")),P=$("<table"+(H?" style='width:1px' role='presentation' class='"+H+"'":"")+"><thead></thead><tbody></tbody></table>"),V=$("<tr></tr>");for(r.grid.endReq.call(r),T=0;T<a.name.length;T++)B=$("<th class='"+s+"'></th>").html(a.name[T]).width(a.width[T]),V.append(B);return V.appendTo(P[0].tHead),R(G,$(P[0].tBodies[0])),$("#"+jqID(i.id+"_"+l)).append(P),!1},v=function(G){var l=$(G).attr("id"),R={nd_:new Date().getTime()},B,T;if(R[i.prmNames.subgridid]=l,!a)return!1;if(a.params)for(T=0;T<a.params.length;T++)B=i.iColByName[a.params[T]],B!==void 0&&(R[i.colModel[B].name]=$(G.cells[B]).text().replace(/\&#160\;/ig,""));if(!r.grid.hDiv.loading)switch(r.grid.beginReq.call(r),i.subgridtype||(i.subgridtype=i.datatype),$.isFunction(i.subgridtype)?i.subgridtype.call(r,R):i.subgridtype=i.subgridtype.toLowerCase(),i.subgridtype){case"xml":case"json":$.ajax($.extend({type:i.mtype,url:$.isFunction(i.subGridUrl)?i.subGridUrl.call(r,R):i.subGridUrl,dataType:i.subgridtype,context:l,data:jgrid.serializeFeedback.call(r,i.serializeSubGridData,"jqGridSerializeSubGridData",R),success:function(H){b(H,this,i.subgridtype==="xml"?p:m)},error:function(H,P,V){var k=i.loadSubgridError===void 0?i.loadError:i.loadSubgridError;r.grid.endReq.call(r),$.isFunction(k)&&k.call(r,H,P,V),i.subGridOptions.noEmptySubgridOnError||b(null,this,i.subgridtype==="xml"?p:m)}},jgrid.ajaxOptions,i.ajaxSubgridOptions||{}));break}return!1},j=function(){var G=$(this).parent("tr")[0],l=G.nextSibling,R=G.id,B=i.id+"_"+R,T,H=function(V){return jgrid.mergeCssClasses(i.subGridOptions.commonIconClass,i.subGridOptions[V])},P=1;if($.each(i.colModel,function(){(this.hidden===!0||this.name==="rn"||this.name==="cb")&&P++}),$(this).hasClass("sgcollapsed")){if(i.subGridOptions.reloadOnExpand===!0||i.subGridOptions.reloadOnExpand===!1&&!$(l).hasClass("ui-subgrid")){if(T=e>=1?"<td colspan='"+e+"'>&#160;</td>":"",!subGridFeedback.call(r,"beforeExpand",B,R))return;$(G).after("<tr role='row' class='"+f+"'>"+T+"<td class='"+c+"'><span class='"+H("openicon")+"'></span></td><td colspan='"+parseInt(i.colNames.length-P,10)+"' class='"+h+"'><div id='"+B+"' class='tablediv'></div></td></tr>"),$(r).triggerHandler("jqGridSubGridRowExpanded",[B,R]),$.isFunction(i.subGridRowExpanded)?i.subGridRowExpanded.call(r,B,R):v(G)}else $(l).show();$(this).html("<div class='"+base.getGuiStyles.call(r,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(r,"subgrid.button","sgbutton")+"'><span class='"+H("minusicon")+"'></span></a></div>").removeClass("sgcollapsed").addClass("sgexpanded"),i.subGridOptions.selectOnExpand&&$(r).jqGrid("setSelection",R)}else if($(this).hasClass("sgexpanded")){if(!subGridFeedback.call(r,"beforeCollapse",B,R))return;i.subGridOptions.reloadOnExpand===!0?$(l).remove(".ui-subgrid"):$(l).hasClass("ui-subgrid")&&$(l).hide(),$(this).html("<div class='"+base.getGuiStyles.call(r,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(r,"subgrid.button","sgbutton")+"'><span class='"+H("plusicon")+"'></span></a></div>").removeClass("sgexpanded").addClass("sgcollapsed"),i.subGridOptions.selectOnCollapse&&$(r).jqGrid("setSelection",R)}return!1},y,S,C,w=1;if(r.grid){for(y=r.rows.length,t!==void 0&&t>0&&(w=t,y=t+1);w<y;)S=r.rows[w],$(S).hasClass("jqgrow")&&(C=$(S.cells[e]),C.hasClass("ui-sgcollapsed")&&(i.scroll&&C.off("click"),C.on("click",j))),w++;if(i.subGridOptions.expandOnLoad===!0){var x=i.iColByName.subgrid;$(r.rows).filter(".jqgrow").each(function(G,l){$(l.cells[x]).filter(".sgcollapsed").children(".sgbutton-div").children(".sgbutton").click()})}r.subGridXml=function(G,l){return b(G,l,p)},r.subGridJson=function(G,l){return b(G,l,m)}}})},expandSubGridRow:function(e){return collapseOrExpand.call(this,e,"sgcollapsed")},collapseSubGridRow:function(e){return collapseOrExpand.call(this,e,"sgexpanded")},toggleSubGridRow:function(e){return collapseOrExpand.call(this,e,"ui-sgcollapsed")}}),window.tableToGrid=function(e,t){$(e).each(function(){var r=this,i=$(this),a,o,s,u,f,c,h,g,p=[],m=[],b=[],v=[],j=[];if(!r.grid){for(i.width("99%"),a=i.width(),o=$("tr td:first-child input[type=checkbox]:first",i),s=$("tr td:first-child input[type=radio]:first",i),u=o.length>0,f=!u&&s.length>0,c=u||f,$("th",i).each(function(){p.length===0&&c?(p.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),m.push("__selection__")):(p.push({name:$(this).attr("id")||$.trim($.jgrid.stripHtml($(this).html())).split(" ").join("_"),index:$(this).attr("id")||$.trim($.jgrid.stripHtml($(this).html())).split(" ").join("_"),width:$(this).width()||150}),m.push($(this).html()))}),$("tbody > tr",i).each(function(){var y={},S=0;$("td",$(this)).each(function(){if(S===0&&c){var C=$("input",$(this)),w=C.attr("value");v.push(w||b.length),C.is(":checked")&&j.push(w),y[p[S].name]=C.attr("value")}else y[p[S].name]=$(this).html();S++}),S>0&&b.push(y)}),i.empty(),i.jqGrid($.extend({datatype:"local",width:a,colNames:m,colModel:p,multiselect:u},t||{})),h=0;h<b.length;h++)g=null,v.length>0&&(g=v[h],g&&g.replace&&(g=encodeURIComponent(g).replace(/[.\-%]/g,"_"))),g===null&&(g=$.jgrid.randId()),i.jqGrid("addRowData",g,b[h]);for(h=0;h<j.length;h++)i.jqGrid("setSelection",j[h])}})};var treeGridFeedback=function(){var e=$.makeArray(arguments);return e[0]="treeGrid"+e[0].charAt(0).toUpperCase()+e[0].substring(1),e.unshift(""),e.unshift(""),e.unshift(this.p),jgrid.feedback.apply(this,e)},getNodeIcons=function(e,t){var r=t[e.treeReader.icon_field],i=e.treeIcons,a=i.plus+" tree-plus",o=i.minus+" tree-minus";return r&&typeof r=="string"&&(r=r.split(","),r.length===2&&(o=r[0],a=r[1])),{expanded:o,collapsed:a,common:i.commonIconClass}};jgrid.extend({setTreeNode:function(){return this.each(function(){var e=this,t=$(e),r=e.p;if(!(!e.grid||!r.treeGrid)){var i=r.treeReader.expanded_field,a=r.treeReader.leaf_field,o=function(s,u,f){if(f!=null){var c=$(f.target),h=c.closest("tr.jqgrow>td"),g=h.parent(),p=function(){var m=r.data[r._index[stripPref(r.idPrefix,u)]],b=m[i]?"collapse":"expand";m[a]||(base[b+"Row"].call(t,m,g),base[b+"Node"].call(t,m,g))};return(c.is("div.treeclick")||r.ExpandColClick&&h.length>0&&c.closest("span.cell-wrapper",h).length>0)&&p(),!0}};t.off("jqGridBeforeSelectRow.setTreeNode"),t.on("jqGridBeforeSelectRow.setTreeNode",o)}})},setTreeGrid:function(){return this.each(function(){var e=this,t=e.p,r,i,a,o=[],s=["leaf_field","expanded_field","loaded"];if(t.treeGrid){t.treedatatype||$.extend(e.p,{treedatatype:t.datatype}),t.subGrid=!1,t.altRows=!1,t.pgbuttons=!1,t.pginput=!1,t.gridview=!0,t.rowTotal===null&&(t.rowNum=t.maxRowNum),t.rowList=[],t.treeIcons.plus=t.direction==="rtl"?t.treeIcons.plusRtl:t.treeIcons.plusLtr,t.treeGridModel==="nested"?t.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},t.treeReader):t.treeGridModel==="adjacency"&&(t.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},t.treeReader));for(i in t.colModel)if(t.colModel.hasOwnProperty(i)){r=t.colModel[i].name;for(a in t.treeReader)t.treeReader.hasOwnProperty(a)&&t.treeReader[a]===r&&o.push(r)}$.each(t.treeReader,function(u){var f=String(this);f&&$.inArray(f,o)===-1&&($.inArray(u,s)>=0?t.additionalProperties.push({name:f,search:!1,convert:function(c){return c===!0||String(c).toLowerCase()==="true"||String(c)==="1"?!0:c}}):t.additionalProperties.push(f))})}})},expandRow:function(e){this.each(function(){var t=this,r=$(t),i=t.p;if(!(!t.grid||!i.treeGrid)){var a=i.treeReader.expanded_field,o=e[i.localReader.id];if(treeGridFeedback.call(t,"beforeExpandRow",{rowid:o,item:e})){var s=base.getNodeChildren.call(r,e);$(s).each(function(){var u=i.idPrefix+getAccessor(this,i.localReader.id);$(base.getGridRowById.call(r,u)).css("display",""),this[a]&&base.expandRow.call(r,this)}),treeGridFeedback.call(t,"afterExpandRow",{rowid:o,item:e})}}})},collapseRow:function(e){this.each(function(){var t=this,r=$(t),i=t.p;if(!(!t.grid||!i.treeGrid)){var a=i.treeReader.expanded_field,o=e[i.localReader.id];if(treeGridFeedback.call(t,"beforeCollapseRow",{rowid:o,item:e})){var s=base.getNodeChildren.call(r,e);$(s).each(function(){var u=i.idPrefix+getAccessor(this,i.localReader.id);$(base.getGridRowById.call(r,u)).css("display","none"),this[a]&&base.collapseRow.call(r,this)}),treeGridFeedback.call(t,"afterCollapseRow",{rowid:o,item:e})}}})},getRootNodes:function(){var e=[];return this.each(function(){var t=this,r=t.p;if(!(!t.grid||!r.treeGrid))switch(r.treeGridModel){case"nested":var i=r.treeReader.level_field;$(r.data).each(function(){parseInt(this[i],10)===parseInt(r.tree_root_level,10)&&e.push(this)});break;case"adjacency":var a=r.treeReader.parent_id_field;$(r.data).each(function(){(this[a]===null||String(this[a]).toLowerCase()==="null")&&e.push(this)});break}}),e},getNodeDepth:function(e){var t=null;return this.each(function(){var r=this,i=r.p;if(!(!r.grid||!i.treeGrid))switch(i.treeGridModel){case"nested":var a=i.treeReader.level_field;t=parseInt(e[a],10)-parseInt(i.tree_root_level,10);break;case"adjacency":t=base.getNodeAncestors.call($(r),e).length;break}}),t},getNodeParent:function(e){var t=this[0];if(!t||!t.grid||t.p==null||!t.p.treeGrid||e==null)return null;var r=t.p,i=r.treeReader,a=i.parent_id_field,o=e[a];if(r.treeGridModel==="nested"){var s=null,u=i.left_field,f=i.right_field,c=i.level_field,h=parseInt(e[u],10),g=parseInt(e[f],10),p=parseInt(e[c],10);return $(r.data).each(function(){if(parseInt(this[c],10)===p-1&&parseInt(this[u],10)<h&&parseInt(this[f],10)>g)return s=this,!1}),s}if(o===null||o==="null")return null;var m=r._index[o];return m!==void 0?r.data[m]:null},getNodeChildren:function(e){var t=[];return this.each(function(){var r=this,i=r.p;if(!(!r.grid||!i.treeGrid))switch(i.treeGridModel){case"nested":var a=i.treeReader.left_field,o=i.treeReader.right_field,s=i.treeReader.level_field,u=parseInt(e[a],10),f=parseInt(e[o],10),c=parseInt(e[s],10);$(i.data).each(function(){parseInt(this[s],10)===c+1&&parseInt(this[a],10)>u&&parseInt(this[o],10)<f&&t.push(this)});break;case"adjacency":var h=i.treeReader.parent_id_field,g=i.localReader.id;$(i.data).each(function(){String(this[h])===String(e[g])&&t.push(this)});break}}),t},getFullTreeNode:function(e){var t=[];return this.each(function(){var r=this,i=r.p,a;if(!(!r.grid||!i.treeGrid))switch(i.treeGridModel){case"nested":var o=i.treeReader.left_field,s=i.treeReader.right_field,u=i.treeReader.level_field,f=parseInt(e[o],10),c=parseInt(e[s],10),h=parseInt(e[u],10);$(i.data).each(function(){parseInt(this[u],10)>=h&&parseInt(this[o],10)>=f&&parseInt(this[o],10)<=c&&t.push(this)});break;case"adjacency":if(e){t.push(e);var g=i.treeReader.parent_id_field,p=i.localReader.id;$(i.data).each(function(){var m;for(a=t.length,m=0;m<a;m++)if(String(t[m][p])===String(this[g])){t.push(this);break}})}break}}),t},getNodeAncestors:function(e){var t=[];return this.each(function(){var r=this,i=$(r),a=base.getNodeParent;if(!(!r.grid||!r.p.treeGrid))for(var o=a.call(i,e);o;)t.push(o),o=a.call(i,o)}),t},isVisibleNode:function(e){var t=!0;return this.each(function(){var r=this,i=r.p;if(!(!r.grid||!i.treeGrid)){var a=base.getNodeAncestors.call($(r),e),o=i.treeReader.expanded_field;$(a).each(function(){if(t=t&&this[o],!t)return!1})}}),t},isNodeLoaded:function(e){var t;return this.each(function(){var r=this,i=r.p;if(!(!r.grid||!i.treeGrid)){var a=i.treeReader.leaf_field,o=i.treeReader.loaded;e!==void 0?e[o]!==void 0?t=e[o]:e[a]||base.getNodeChildren.call($(r),e).length>0?t=!0:t=!1:t=!1}}),t},expandNode:function(e){return this.each(function(){var t=this,r=t.p,i,a,o;if(!(!t.grid||!r.treeGrid)){var s=r.treeReader;if(!e[s.expanded_field]){if(i=getAccessor(e,r.localReader.id),!treeGridFeedback.call(t,"beforeExpandNode",{rowid:i,item:e}))return;a=$("#"+r.idPrefix+jqID(i),t.grid.bDiv)[0],e[s.expanded_field]=!0,o=getNodeIcons(r,e),$("div.treeclick",a).removeClass(o.collapsed).addClass(o.common).addClass(o.expanded),r.treedatatype!=="local"&&!base.isNodeLoaded.call($(t),r.data[r._index[i]])&&!t.grid.hDiv.loading&&(r.treeANode=a.rowIndex,r.datatype=r.treedatatype,base.setGridParam.call($(t),{postData:r.treeGridModel==="nested"?{nodeid:i,n_level:e[s.level_field],n_left:e[s.left_field],n_right:e[s.right_field]}:{nodeid:i,n_level:e[s.level_field],parentid:e[s.parent_id_field]}}),$(t).trigger("reloadGrid"),e[s.loaded]=!0,base.setGridParam.call($(t),{postData:r.treeGridModel==="nested"?{nodeid:"",n_level:"",n_left:"",n_right:""}:{nodeid:"",n_level:"",parentid:""}})),treeGridFeedback.call(t,"afterExpandNode",{rowid:i,item:e})}}})},collapseNode:function(e){return this.each(function(){var t=this,r=t.p,i;if(!(!t.grid||!r.treeGrid)){var a=r.treeReader.expanded_field;if(e[a]){var o=getAccessor(e,r.localReader.id);if(!treeGridFeedback.call(t,"beforeCollapseNode",{rowid:o,item:e}))return;e[a]=!1,i=getNodeIcons(r,e),$("#"+r.idPrefix+jqID(o),t.grid.bDiv).find("div.treeclick").removeClass(i.expanded).addClass(i.common).addClass(i.collapsed),(r.unloadNodeOnCollapse===!0||$.isFunction(r.unloadNodeOnCollapse)&&r.unloadNodeOnCollapse.call(t,e))&&(e[r.treeReader.loaded]=!1,$(t).jqGrid("delTreeNode",o,!0)),treeGridFeedback.call(t,"afterCollapseNode",{rowid:o,item:e})}}})},SortTree:function(e,t,r,i){return this.each(function(){var a=this,o=a.p,s=$(a);if(!(!a.grid||!o.treeGrid)){var u,f,c,h=[],g=base.getRootNodes.call(s),p=jgrid.from.call(a,g);p.orderBy(e,t,r,i);var m=p.select();for(u=0,f=m.length;u<f;u++)c=m[u],h.push(c),base.collectChildrenSortTree.call(s,h,c,e,t,r,i);$.each(h,function(b){var v=getAccessor(this,o.localReader.id);$(a.rows[b]).after(s.find(">tbody>tr#"+jqID(v)))})}})},collectChildrenSortTree:function(e,t,r,i,a,o){return this.each(function(){var s=this,u=$(s);if(!(!s.grid||!s.p.treeGrid)){var f,c,h,g=base.getNodeChildren.call(u,t),p=jgrid.from.call(s,g);p.orderBy(r,i,a,o);var m=p.select();for(f=0,c=m.length;f<c;f++)h=m[f],e.push(h),base.collectChildrenSortTree.call(u,e,h,r,i,a,o)}})},setTreeRow:function(e,t){var r=!1;return this.each(function(){var i=this;!i.grid||!i.p.treeGrid||(r=base.setRowData.call($(i),e,t))}),r},delTreeNode:function(e,t){return this.each(function(){var r=this,i=r.p,a,o,s,u,f=i.localReader.id,c,h=$(r),g=i.treeReader.left_field,p=i.treeReader.right_field;if(!(!r.grid||!i.treeGrid)){var m=i._index[e];if(m!==void 0){a=parseInt(i.data[m][p],10),o=a-parseInt(i.data[m][g],10)+1;var b=base.getFullTreeNode.call(h,i.data[m]);if(b.length>0)for(c=0;c<b.length;c++)(!t||e!==b[c][f])&&base.delRowData.call(h,b[c][f]);if(i.treeGridModel==="nested"){if(s=jgrid.from.call(r,i.data).greater(g,a,{stype:"integer"}).select(),s.length)for(u in s)s.hasOwnProperty(u)&&(s[u][g]=parseInt(s[u][g],10)-o);if(s=jgrid.from.call(r,i.data).greater(p,a,{stype:"integer"}).select(),s.length)for(u in s)s.hasOwnProperty(u)&&(s[u][p]=parseInt(s[u][p],10)-o)}}}})},addChildNode:function(e,t,r,i){return this.each(function(){if(r){var a=this,o=a.p,s=$(a),u=base.getInd,f=o.treeIcons.minus+" tree-minus",c,h,g,p,m,b=t,v,j,y=o.treeReader.expanded_field,S=o.treeReader.leaf_field,C=o.treeReader.level_field,w=o.treeReader.parent_id_field,x=o.treeReader.left_field,G=o.treeReader.right_field,l=o.treeReader.loaded;i===void 0&&(i=!1),e==null&&(e=jgrid.randId());var R=u.call(s,t);if(v=!1,t==null||t==="")t=null,b=null,c="last",p=o.tree_root_level;else{c="after",h=o._index[t],g=o.data[h],t=g[o.localReader.id],m=u.call(s,t),p=parseInt(g[C],10)+1;var B=base.getFullTreeNode.call(s,g);if(B.length){var T,H,P;for(T=0;T<B.length;T++)P=B[T][o.localReader.id],H=u.call(s,P),H>m&&(m=H,b=P)}g[S]&&(v=!0,g[y]=!0,$(a.rows[R]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(o.treeIcons.leaf+" tree-leaf").addClass(o.treeIcons.commonIconClass).addClass(f),o.data[h][S]=!1,g[l]=!0)}if(r[y]===void 0&&(r[y]=!1),r[l]===void 0&&(r[l]=!1),r[C]=p,r[S]===void 0&&(r[S]=!0),o.treeGridModel==="adjacency"&&(r[w]=t),o.treeGridModel==="nested"){var V,k,O;if(t!==null){if(j=parseInt(g[G],10),V=jgrid.from.call(a,o.data),V=V.greaterOrEquals(G,j,{stype:"integer"}),k=V.select(),k.length)for(O in k)k.hasOwnProperty(O)&&(k[O][x]=k[O][x]>j?parseInt(k[O][x],10)+2:k[O][x],k[O][G]=k[O][G]>=j?parseInt(k[O][G],10)+2:k[O][G]);r[x]=j,r[G]=j+1}else{if(j=parseInt(base.getCol.call(s,G,!1,"max"),10),k=jgrid.from.call(a,o.data).greater(x,j,{stype:"integer"}).select(),k.length)for(O in k)k.hasOwnProperty(O)&&(k[O][x]=parseInt(k[O][x],10)+2);if(k=jgrid.from.call(a,o.data).greater(G,j,{stype:"integer"}).select(),k.length)for(O in k)k.hasOwnProperty(O)&&(k[O][G]=parseInt(k[O][G],10)+2);r[x]=j+1,r[G]=j+2}}(t===null||base.isNodeLoaded.call(s,g)||v)&&base.addRowData.call(s,e,r,c,b),g&&!g[y]&&i&&$(a.rows[R]).find("div.treeclick").click()}})}});var namespace=".jqGrid",mouseDown="mousedown",mouseMove="mousemove",mouseUp="mouseup",getMouseCoordinates=function(e){var t=e.originalEvent,r=t.targetTouches;return r?(r=r[0],{x:r.pageX,y:r.pageY}):{x:e.pageX,y:e.pageY}},jqDnR={drag:function(e){var t=e.data,r=t.e,i=t.dnr,a=t.ar,o=t.dnrAr,s=getMouseCoordinates(e);return i.k==="move"?r.css({left:i.X+s.x-i.pX,top:i.Y+s.y-i.pY}):(r.css({width:Math.max(s.x-i.pX+i.W,0),height:Math.max(s.y-i.pY+i.H,0)}),o&&a.css({width:Math.max(s.x-o.pX+o.W,0),height:Math.max(s.y-o.pY+o.H,0)})),!1},stop:function(){$(document).off(mouseMove,jqDnR.drag).off(mouseUp,jqDnR.stop)}},init=function(e,t,r,i){return e.each(function(){t=t?$(t,e):e,t.on(mouseDown,{e,k:r},function(a){var o=a.data,s={},u,f,c,h,g,p=function(y,S){return parseInt(y.css(S),10)||!1},m=function(y){return p(f,y)},b=function(y){return p(h,y)},v=getMouseCoordinates(a),j;if(!($(a.target).hasClass("ui-jqdialog-titlebar-close")||$(a.target).parent().hasClass("ui-jqdialog-titlebar-close"))){if(f=o.e,h=i?$(i):!1,f.css("position")!=="relative")try{f.position(s)}catch{}if(c={X:s.left||m("left")||0,Y:s.top||m("top")||0,W:m("width")||f[0].scrollWidth||0,H:m("height")||f[0].scrollHeight||0,pX:v.x,pY:v.y,k:o.k},h&&o.k!=="move"?g={X:s.left||b("left")||0,Y:s.top||b("top")||0,W:h[0].offsetWidth||b("width")||0,H:h[0].offsetHeight||b("height")||0,pX:v.x,pY:v.y,k:o.k}:g=!1,u=f.find("input.hasDatepicker"),u.length>0)try{u.datepicker("hide")}catch{}return j={e:f,dnr:c,ar:h,dnrAr:g},$(document).on(mouseMove,j,jqDnR.drag),$(document).on(mouseUp,j,jqDnR.stop),!1}})})};window.PointerEvent?(mouseDown+=namespace+" pointerdown"+namespace,mouseMove+=namespace+" pointermove"+namespace,mouseUp+=namespace+" pointerup"+namespace):window.MSPointerEvent?(mouseDown+=namespace+" mspointerdown"+namespace,mouseMove+=namespace+" mspointermove"+namespace,mouseUp+=namespace+" mspointerup"):(mouseDown+=namespace+" touchstart"+namespace,mouseMove+=namespace+" touchmove"+namespace,mouseUp+=namespace+" touchend"+namespace),$.jqDnR=jqDnR,$.fn.jqDrag=function(e){return init(this,e,"move")},$.fn.jqResize=function(e,t){return init(this,e,"resize",t)};var jqmHashLength=0,jqmHash,createdModals=[],setFocusOnFirstVisibleInput=function(e){try{$(":input:visible",e.w).first().focus()}catch{}},setFocus=function(e){setFocusOnFirstVisibleInput(e)},keyOrMouseEventHandler=function(e){var t=jqmHash[createdModals[createdModals.length-1]],r=!$(e.target).parents(".jqmID"+t.s)[0],i=$(e.target).offset(),a=e.pageX!==void 0?e.pageX:i.left,o=e.pageY!==void 0?e.pageY:i.top,s=function(){var u=!1;return $(".jqmID"+t.s).each(function(){var f=$(this),c=f.offset();if(c.top<=o&&o<=c.top+f.height()&&c.left<=a&&a<=c.left+f.width())return u=!0,!1}),u};return e.type!=="mousedown"&&s()?!0:(e.type==="mousedown"&&r&&(s()&&(r=!1),r&&!$(e.target).is(":input")&&setFocusOnFirstVisibleInput(t)),!r)},bindOrUnbindEvents=function(e){$(document)[e]("keypress keydown mousedown",keyOrMouseEventHandler)},registerHideOrShow=function(e,t,r){return e.each(function(){var i=this._jqm;$(t).each(function(){this[r]||(this[r]=[],$(this).click(function(){var a,o,s,u=["jqmShow","jqmHide"];for(a=0;a<u.length;a++){o=u[a];for(s in this[o])this[o].hasOwnProperty(s)&&jqmHash[this[o][s]]&&jqmHash[this[o][s]].w[o](this)}return!1})),this[r].push(i)})})};$.fn.jqm=function(e){var t={overlay:50,closeoverlay:!1,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:!1,ajaxText:"",target:!1,modal:!1,toTop:!1,onShow:!1,onHide:!1,onLoad:!1};return this.each(function(){if(this._jqm)return jqmHash[this._jqm].c=$.extend({},jqmHash[this._jqm].c,e),jqmHash[this._jqm].c;jqmHashLength++,this._jqm=jqmHashLength,jqmHash[jqmHashLength]={c:$.extend(t,$.jqm.params,e),a:!1,w:$(this).addClass("jqmID"+jqmHashLength),s:jqmHashLength},t.trigger&&$(this).jqmAddTrigger(t.trigger)})},$.fn.jqmAddClose=function(e){return registerHideOrShow(this,e,"jqmHide")},$.fn.jqmAddTrigger=function(e){return registerHideOrShow(this,e,"jqmShow")},$.fn.jqmShow=function(e){return this.each(function(){$.jqm.open(this._jqm,e)})},$.fn.jqmHide=function(e){return this.each(function(){$.jqm.close(this._jqm,e)})},$.jqm={hash:{},open:function(e,t){var r=jqmHash[e],i,a,o,s=r.c,u=r.w.parent().offset(),f,c,h="."+s.closeClass,g=parseInt(r.w.css("z-index"),10);return g=g>0?g:3e3,i=$("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":g-1,opacity:s.overlay/100}),r.a||(r.t=t,r.a=!0,r.w.css("z-index",g),$(r.w[0].ownerDocument).data("ui-dialog-overlays")&&r.w.addClass("ui-dialog"),s.modal?(createdModals[0]||setTimeout(function(){bindOrUnbindEvents("bind")},1),createdModals.push(e)):s.overlay>0?s.closeoverlay&&r.w.jqmAddClose(i):i=!1,r.o=i?i.addClass(s.overlayClass).prependTo("body"):!1,s.ajax?(a=s.target||r.w,o=s.ajax,a=typeof a=="string"?$(a,r.w):$(a),o=o.substr(0,1)==="@"?$(t).attr(o.substring(1)):o,a.html(s.ajaxText).load(o,function(){s.onLoad&&s.onLoad.call(this,r),h&&r.w.jqmAddClose($(h,r.w)),setFocus(r)})):h&&r.w.jqmAddClose($(h,r.w)),s.toTop&&r.o&&(u=r.w.parent().offset(),f=parseFloat(r.w.css("left")||0),c=parseFloat(r.w.css("top")||0),r.w.before('<span id="jqmP'+r.w[0]._jqm+'"></span>').insertAfter(r.o),r.w.css({top:u.top+c,left:u.left+f})),s.onShow?s.onShow(r):r.w.show(),setFocus(r)),!1},close:function(e){var t=jqmHash[e];return t.a&&(t.a=!1,createdModals[0]&&(createdModals.pop(),createdModals[0]||bindOrUnbindEvents("unbind")),t.c.toTop&&t.o&&$("#jqmP"+t.w[0]._jqm).after(t.w).remove(),t.c.onHide?t.c.onHide(t):(t.w.hide(),t.o&&t.o.remove())),!1},params:{}},jqmHash=$.jqm.hash,$.fmatter=$.fmatter||{};var fmatter=$.fmatter,getOptionByName=function(e,t){var r=e.formatoptions||{};return r.hasOwnProperty(t)?r[t]:(e.editoptions||{})[t]},encodeAttr=function(e){return String(e).replace(/\'/g,"&#39;")},parseCheckboxOptions=function(e){var t=e.colModel||e.cm,r,i,a=t.title!==!1?" title='"+encodeAttr(e.colName||t.name)+"'":"",o=function(j){return getOptionByName(t,j)},s=o("checkedClass"),u=o("uncheckedClass"),f=o("value"),c=typeof f=="string"&&f.split(":")[0]||"Yes",h=typeof f=="string"&&f.split(":")[1]||"No",g=function(j){return"<i class='"+encodeAttr(j)+"'"+a+"></i>"},p=o("disabled");p===void 0&&(p=jgrid.formatter.checkbox.disabled);var m=base.getIconRes.call(this,"checkbox.checked"),b=base.getIconRes.call(this,"checkbox.checkedClasses"),v=base.getIconRes.call(this,"checkbox.unchecked");return p===!0&&(s||u||m||v)?(r=g(s||m),i=g(u||v),s=b||s||m):(s="",a+=p===!0?" disabled='disabled'":"",r="<input type='checkbox' checked='checked'"+a+" />",i="<input type='checkbox'"+a+" />"),{checkedClasses:s,checked:r,unchecked:i,yes:c,no:h}},yesObject={1:1,x:1,true:1,yes:1,y:1,on:1},noObject={0:1,false:1,no:1,n:1,off:1};$.extend(!0,jgrid,{formatter:{date:{parseRe:/[#%\\\/:_;.,\t\s\-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO"},reformatAfterEdit:!0,userLocalTime:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0,defaultValue:!1},idName:"id"},cmTemplate:{integerStr:{formatter:"integer",align:"right",sorttype:"integer",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},integer:{formatter:"integer",align:"right",sorttype:"integer",convertOnSave:function(e){var t=e.newValue;return isNaN(t)?t:parseInt(t,10)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},numberStr:{formatter:"number",align:"right",sorttype:"number",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},number:{formatter:"number",align:"right",sorttype:"number",convertOnSave:function(e){var t=e.newValue;return isNaN(t)?t:parseFloat(t)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},booleanCheckbox:{align:"center",formatter:"checkbox",sorttype:"boolean",edittype:"checkbox",editoptions:{value:"true:false",defaultValue:"false"},convertOnSave:function(e){var t=e.newValue,r=parseCheckboxOptions.call(this,e),i=String(t).toLowerCase();return yesObject[i]||i===r.yes.toLowerCase()?t=!0:(noObject[i]||i===r.no.toLowerCase())&&(t=!1),t},stype:"checkbox",searchoptions:{sopt:["eq"],value:"true:false"}},actions:function(){var e=this.p;return{formatter:"actions",width:(e!=null&&(base.isInCommonIconClass.call(this,"fa")||base.isInCommonIconClass.call(this,"glyphicon"))?$(this).jqGrid("isBootstrapGuiStyle")?45:39:40)+(jgrid.cellWidth()?5:0),align:"center",label:"",autoResizable:!1,title:!1,frozen:!0,fixed:!0,hidedlg:!0,resizable:!1,sortable:!1,search:!1,editable:!1,viewable:!1}}}}),jgrid.cmTemplate.booleanCheckboxFa=jgrid.cmTemplate.booleanCheckbox,$.extend(fmatter,{isObject:function(e){return e&&(typeof e=="object"||$.isFunction(e))||!1},isNumber:function(e){return typeof e=="number"&&isFinite(e)},isValue:function(e){return this.isObject(e)||typeof e=="string"||this.isNumber(e)||typeof e=="boolean"},isEmpty:function(e){return typeof e!="string"&&this.isValue(e)?!1:this.isValue(e)?(e=$.trim(e).replace(/&nbsp;/ig,"").replace(/&#160;/ig,""),e===""):!0},NumberFormat:function(e,t){var r=fmatter.isNumber;if(r(e)||(e*=1),r(e)){var i=e<0,a=String(e),o=t.decimalSeparator||".",s;if(r(t.decimalPlaces)){var u=t.decimalPlaces;if(a=String(+(Math.round(e+"e"+u)+"e-"+u)),s=a.lastIndexOf("."),u>0)for(s<0?(a+=o,s=a.length-1):o!=="."&&(a=a.replace(".",o));a.length-1-s<u;)a+="0"}if(t.thousandsSeparator){var f=t.thousandsSeparator;s=a.lastIndexOf(o),s=s>-1?s:a.length;var c=t.decimalSeparator===void 0?"":a.substring(s),h=-1,g;for(g=s;g>0;g--)h++,h%3===0&&g!==s&&(!i||g>1)&&(c=f+c),c=a.charAt(g-1)+c;a=c}return a}return e}});var $FnFmatter=function(e,t,r,i,a){var o=t;r=$.extend({},getGridRes.call($(this),"formatter"),r);try{o=$.fn.fmatter[e].call(this,t,r,i,a)}catch{}return o};$.fn.fmatter=$FnFmatter,$FnFmatter.getCellBuilder=function(e,t,r){var i=$.fn.fmatter[e]!=null?$.fn.fmatter[e].getCellBuilder:null;return $.isFunction(i)?i.call(this,$.extend({},getGridRes.call($(this),"formatter"),t),r):null},$FnFmatter.defaultFormat=function(e,t){return fmatter.isValue(e)&&e!==""?e:t.defaultValue||"&#160;"};var defaultFormat=$FnFmatter.defaultFormat,formatCheckboxValue=function(e,t,r){if(e===void 0||fmatter.isEmpty(e)){var i=getOptionByName(r,"defaultValue");i===void 0&&(i=t.no),e=i}return e=String(e).toLowerCase(),yesObject[e]||e===t.yes.toLowerCase()?t.checked:t.unchecked};$FnFmatter.email=function(e,t){return fmatter.isEmpty(e)?defaultFormat(e,t):"<a href='mailto:"+encodeAttr(e)+"'>"+e+"</a>"},$FnFmatter.checkbox=function(e,t){var r=parseCheckboxOptions.call(this,t);return formatCheckboxValue(e,r,t.colModel)},$FnFmatter.checkbox.getCellBuilder=function(e){var t,r=e.colModel;return e.colName=e.colName||this.p.colNames[e.pos],t=parseCheckboxOptions.call(this,e),function(i){return formatCheckboxValue(i,t,r)}},$FnFmatter.checkbox.unformat=function(e,t,r){var i=parseCheckboxOptions.call(this,t),a=$(r);return(i.checkedClasses?jgrid.hasAllClasses(a.children("i,svg"),i.checkedClasses):a.children("input").is(":checked"))?i.yes:i.no},$FnFmatter.checkboxFontAwesome4=$FnFmatter.checkbox,$FnFmatter.checkboxFontAwesome4.getCellBuilder=$FnFmatter.checkbox.getCellBuilder,$FnFmatter.checkboxFontAwesome4.unformat=$FnFmatter.checkbox.unformat,$FnFmatter.link=function(e,t){var r=t.colModel,i="",a={target:t.target};return r!=null&&(a=$.extend({},a,r.formatoptions||{})),a.target&&(i="target="+a.target),fmatter.isEmpty(e)?defaultFormat(e,a):"<a "+i+" href='"+encodeAttr(e)+"'>"+e+"</a>"},$FnFmatter.showlink=function(e,t,r){var i=this,a=t.colModel,o={baseLinkUrl:t.baseLinkUrl,showAction:t.showAction,addParam:t.addParam||"",target:t.target,idName:t.idName,hrefDefaultValue:"#"},s="",u,f,c,h=function(g){return $.isFunction(g)?g.call(i,{cellValue:e,rowid:t.rowId,rowData:r,options:o}):g||""};return a!=null&&(o=$.extend({},o,a.formatoptions||{})),o.target&&(s="target="+h(o.target)),u=h(o.baseLinkUrl)+h(o.showAction),f=o.idName?encodeURIComponent(h(o.idName))+"="+encodeURIComponent(h(o.rowId)||t.rowId):"",c=h(o.addParam),typeof c=="object"&&c!==null&&(c=(f!==""?"&":"")+$.param(c)),u+=!f&&!c?"":"?"+f+c,u===""&&(u=h(o.hrefDefaultValue)),typeof e=="string"||fmatter.isNumber(e)||$.isFunction(o.cellValue)?"<a "+s+" href='"+encodeAttr(u)+"'>"+($.isFunction(o.cellValue)?h(o.cellValue):e)+"</a>":defaultFormat(e,o)},$FnFmatter.showlink.getCellBuilder=function(e){var t={baseLinkUrl:e.baseLinkUrl,showAction:e.showAction,addParam:e.addParam||"",target:e.target,idName:e.idName,hrefDefaultValue:"#"},r=e.colModel;return r!=null&&(t=$.extend({},t,r.formatoptions||{})),function(i,a,o){var s=this,u=a.rowId,f="",c,h,g,p=function(m){return $.isFunction(m)?m.call(s,{cellValue:i,rowid:u,rowData:o,options:t}):m||""};return t.target&&(f="target="+p(t.target)),c=p(t.baseLinkUrl)+p(t.showAction),h=t.idName?encodeURIComponent(p(t.idName))+"="+encodeURIComponent(p(u)||a.rowId):"",g=p(t.addParam),typeof g=="object"&&g!==null&&(g=(h!==""?"&":"")+$.param(g)),c+=!h&&!g?"":"?"+h+g,c===""&&(c=p(t.hrefDefaultValue)),typeof i=="string"||fmatter.isNumber(i)||$.isFunction(t.cellValue)?"<a "+f+" href='"+encodeAttr(c)+"'>"+($.isFunction(t.cellValue)?p(t.cellValue):i)+"</a>":defaultFormat(i,t)}},$FnFmatter.showlink.pageFinalization=function(e){var t=$(this),r=this.p,i=r.colModel[e],a=r.autoResizing.wrapperClassName,o,s=this.rows,u=s.length,f,c,h=function(g){var p=$(this).closest("tr.jqgrow>td"),m=p.parent(),b=p[0].cellIndex,v=r.colModel[b];if(m.length>0)return v.formatoptions.onClick.call(t[0],{iCol:b,iRow:m[0].rowIndex,rowid:m.attr("id"),cm:v,cmName:v.name,cellValue:$(this).text(),a:this,event:g})};if(i.formatoptions!=null&&$.isFunction(i.formatoptions.onClick))for(o=0;o<u;o++)f=s[o],$(f).hasClass("jqgrow")&&(c=f.cells[e],i.autoResizable&&c!=null&&$(c.firstChild).hasClass(a)&&(c=c.firstChild),c!=null&&$(c.firstChild).on("click",h))};var insertPrefixAndSuffix=function(e,t){return e=t.prefix?t.prefix+e:e,t.suffix?e+t.suffix:e},numberHelper=function(e,t,r){var i=t.colModel,a=$.extend({},t[r]);return i!=null&&(a=$.extend({},a,i.formatoptions||{})),fmatter.isEmpty(e)?insertPrefixAndSuffix(a.defaultValue,a):insertPrefixAndSuffix(fmatter.NumberFormat(e,a),a)};$FnFmatter.integer=function(e,t){return numberHelper(e,t,"integer")},$FnFmatter.number=function(e,t){return numberHelper(e,t,"number")},$FnFmatter.currency=function(e,t){return numberHelper(e,t,"currency")};var numberCellBuilder=function(e,t){var r=e.colModel,i=$.extend({},e[t]);r!=null&&(i=$.extend({},i,r.formatoptions||{}));var a=fmatter.NumberFormat,o=i.defaultValue?insertPrefixAndSuffix(i.defaultValue,i):"";return function(s){return fmatter.isEmpty(s)?o:insertPrefixAndSuffix(a(s,i),i)}};$FnFmatter.integer.getCellBuilder=function(e){return numberCellBuilder(e,"integer")},$FnFmatter.number.getCellBuilder=function(e){return numberCellBuilder(e,"number")},$FnFmatter.currency.getCellBuilder=function(e){return numberCellBuilder(e,"currency")},$FnFmatter.date=function(e,t,r,i){var a=t.colModel,o=$.extend({},t.date);return a!=null&&(o=$.extend({},o,a.formatoptions||{})),!o.reformatAfterEdit&&i==="edit"||fmatter.isEmpty(e)?defaultFormat(e,o):jgrid.parseDate.call(this,o.srcformat,e,o.newformat,o)},$FnFmatter.date.getCellBuilder=function(e,t){var r=$.extend({},e.date);e.colModel!=null&&(r=$.extend({},r,e.colModel.formatoptions||{}));var i=jgrid.parseDate,a=r.srcformat,o=r.newformat;return!r.reformatAfterEdit&&t==="edit"?function(s){return defaultFormat(s,r)}:function(s){return fmatter.isEmpty(s)?defaultFormat(s,r):i.call(this,a,s,o,r)}},$FnFmatter.select=function(e,t){var r=[],i=t.colModel,a,o=$.extend({},i.editoptions||{},i.formatoptions||{}),s=typeof o.value=="function"?o.value():o.value,u=o.separator||":",f=o.delimiter||";";if(s){var c=o.multiple===!0,h=[],g,p=function(j,y){if(y>0)return j};if(c&&(h=$.map(String(e).split(","),function(j){return $.trim(j)})),typeof s=="string"){var m=s.split(f),b,v;for(b=0;b<m.length;b++)if(g=m[b].split(u),g.length>2&&(g[1]=$.map(g,p).join(u)),v=$.trim(g[0]),o.defaultValue===v&&(a=g[1]),c)$.inArray(v,h)>-1&&r.push(g[1]);else if(v===$.trim(e)){r=[g[1]];break}}else fmatter.isObject(s)&&(a=s[o.defaultValue],c?r=$.map(h,function(j){return s[j]}):r=[s[e]===void 0?"":s[e]])}return e=r.join(", "),e!==""?e:o.defaultValue!==void 0?a:defaultFormat(e,o)},$FnFmatter.select.getCellBuilder=function(e){var t=e.colModel,r=$FnFmatter.defaultFormat,i=$.extend({},t.editoptions||{},t.formatoptions||{}),a=typeof i.value=="function"?i.value():i.value,o=i.separator||":",s=i.delimiter||";",u,f=i.defaultValue!==void 0,c=i.multiple===!0,h,g,p,m,b={},v=function(j,y){if(y>0)return j};if(typeof a=="string")for(g=a.split(s),m=g.length,p=m-1;p>=0;p--)h=g[p].split(o),h.length>2&&(h[1]=$.map(h,v).join(o)),b[$.trim(h[0])]=h[1];else if(fmatter.isObject(a))b=a;else return function(j){return j?String(j):r(j,i)};return f&&(u=b[i.defaultValue]),c?function(j){var y=[],S,C=$.map(String(j).split(","),function(w){return $.trim(w)});for(S=0;S<C.length;S++)j=C[S],b.hasOwnProperty(j)&&y.push(b[j]);return j=y.join(", "),j!==""?j:f?u:r(j,i)}:function(j){var y=b[String(j)];return y!==""&&y!==void 0?y:f?u:r(j,i)}},$FnFmatter.rowactions=function(e,t){var r=$(this).closest("tr.jqgrow>td"),i=r.parent(),a=i.attr("id"),o=$(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),s=$("#"+jgrid.jqID(o)),u=s[0],f=u.p,c,h,g,p,m=jgrid.getRelativeRect.call(u,i).top,b=f.colModel[r[0].cellIndex],v=$.extend(!0,{extraparam:{}},jgrid.actionsNav||{},f.actionsNavOptions||{},b.formatoptions||{});switch(f.editOptions!==void 0&&(v.editOptions=$.extend(!0,v.editOptions||{},f.editOptions)),f.delOptions!==void 0&&(v.delOptions=f.delOptions),i.hasClass("jqgrid-new-row")&&(v.extraparam[f.prmNames.oper]=f.prmNames.addoper),p={keys:v.keys,oneditfunc:v.onEdit,successfunc:v.onSuccess,url:v.url,extraparam:v.extraparam,aftersavefunc:v.afterSave,errorfunc:v.onError,afterrestorefunc:v.afterRestore,restoreAfterError:v.restoreAfterError,mtype:v.mtype},!f.multiselect&&a!==f.selrow||f.multiselect&&$.inArray(a,f.selarrrow)<0?s.jqGrid("setSelection",a,!0,e):jgrid.fullBoolFeedback.call(u,"onSelectRow","jqGridSelectRow",a,!0,e),t){case"edit":s.jqGrid("editRow",a,p);break;case"save":s.jqGrid("saveRow",a,p);break;case"cancel":s.jqGrid("restoreRow",a,v.afterRestore);break;case"del":v.delOptions=v.delOptions||{},v.delOptions.top===void 0&&(v.delOptions.top=m),s.jqGrid("delGridRow",a,v.delOptions);break;case"formedit":v.editOptions=v.editOptions||{},v.editOptions.top===void 0&&(v.editOptions.top=m,v.editOptions.recreateForm=!0),s.jqGrid("editGridRow",a,v.editOptions);break;default:if(v.custom!=null&&v.custom.length>0)for(h=v.custom.length,c=0;c<h;c++)g=v.custom[c],g.action===t&&$.isFunction(g.onClick)&&g.onClick.call(u,{rowid:a,event:e,action:t,options:g})}return e.stopPropagation&&e.stopPropagation(),!1},$FnFmatter.actions=function(e,t,r,i){var a=t.rowId,o="",s=this,u=$(s),f,c,h,g={},p=getGridRes.call(u,"edit")||{},m=$.extend({editbutton:!0,delbutton:!0,editformbutton:!1,commonIconClass:"ui-icon",editicon:"ui-icon-pencil",delicon:"ui-icon-trash",saveicon:"ui-icon-disk",cancelicon:"ui-icon-cancel",savetitle:p.bSubmit||"",canceltitle:p.bCancel||""},getGridRes.call(u,"nav")||{},jgrid.nav||{},s.p.navOptions||{},getGridRes.call(u,"actionsNav")||{},jgrid.actionsNav||{},s.p.actionsNavOptions||{},(t.colModel||{}).formatoptions||{}),b=function(S){return jgrid.mergeCssClasses(m.commonIconClass,m[S+"icon"])},v=[{action:"edit",actionName:"formedit",display:m.editformbutton},{action:"edit",display:!m.editformbutton&&m.editbutton},{action:"del",idPrefix:"Delete",display:m.delbutton},{action:"save",display:m.editformbutton||m.editbutton,hidden:!0},{action:"cancel",display:m.editformbutton||m.editbutton,hidden:!0}],j=function(S){var C=S.action,w=S.actionName||C,x=S.idPrefix!==void 0?S.idPrefix:C.charAt(0).toUpperCase()+C.substring(1);return"<div title='"+encodeAttr(m[C+"title"])+(S.hidden?"' style='display:none;":"")+"' class='"+encodeAttr(u.jqGrid("getGuiStyles","actionsButton","ui-pg-div ui-inline-"+C))+"' "+(x!==null?"id='j"+encodeAttr(x+"Button_"+a):"")+`' data-jqactionname="`+w+'" '+(S.noHovering?"":`' data-jqhovering="1" `)+"><span class='"+encodeAttr(b(C))+"'></span></div>"},y=m.custom!=null?m.custom.length-1:-1;if(a===void 0||fmatter.isEmpty(a))return"";if($.isFunction(m.isDisplayButtons))try{g=m.isDisplayButtons.call(this,m,r,i)||{}}catch{}for(;y>=0;)h=m.custom[y--],v[h.position==="first"?"unshift":"push"](h);for(f=0,y=v.length;f<y;f++)c=$.extend({},v[f],g[v[f].action]||{}),c.display!==!1&&(o+=j(c));return"<div class='"+encodeAttr(u.jqGrid("getGuiStyles","actionsDiv","ui-jqgrid-actions"))+"'>"+o+"</div>"},$FnFmatter.actions.pageFinalization=function(e){var t=$(this),r=this.p,i=r.colModel[e],a=r.autoResizing.wrapperClassName,o=t.jqGrid("getGuiStyles","states.hover"),s,u=this.rows,f=this.grid.fbRows,c=u.length,h,g=function(C){return function(w,x){var G=0,l,R=r.colModel,B=R.length,T,H=r.iColByName[C];for(T=0;T<B&&R[T].frozen===!0;T++)G=T;x!=null&&x.cells!=null&&(l=$(x.cells[H]).children(".ui-jqgrid-actions"),R[H].frozen&&r.frozenColumns&&H<=G&&(l=l.add($(t[0].grid.fbRows[x.rowIndex].cells[H]).children(".ui-jqgrid-actions"))),w?(l.find(">.ui-inline-edit,>.ui-inline-del").show(),l.find(">.ui-inline-save,>.ui-inline-cancel").hide()):(l.find(">.ui-inline-edit,>.ui-inline-del").hide(),l.find(">.ui-inline-save,>.ui-inline-cancel").show()))}}(i.name),p=function(C,w){var x=t.jqGrid("getGridRowById",w);return g(!0,x),!1},m=function(C,w){var x=t.jqGrid("getGridRowById",w);return g(!1,x),!1},b=function(C){$(C.target).closest("div.ui-pg-div").data("jqhovering")===1&&$(this).addClass(o)},v=function(C){$(C.target).closest("div.ui-pg-div").data("jqhovering")===1&&$(this).removeClass(o)},j=function(C){return $FnFmatter.rowactions.call(this,C,$(C.target).closest("div.ui-pg-div").data("jqactionname"))},y=function(C,w){w&&C!=null&&$(C.firstChild).hasClass(a)&&(C=C.firstChild),C!=null&&($(C.firstChild).on("click",j),$(C.firstChild).children("div.ui-pg-div").on("mouseover",b).on("mouseout",v))},S=function(C){return function(w,x){var G=r.iColByName[C];y(x.tr.cells[G],r.colModel[G].autoResizable)}}(i.name);for((i.formatoptions==null||!i.formatoptions.editformbutton)&&(t.off("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",p),t.on("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",p),t.off("jqGridInlineEditRow.jqGridFormatter",m),t.on("jqGridInlineEditRow.jqGridFormatter",m),t.off("jqGridAfterAddRow.jqGridFormatter",S),t.on("jqGridAfterAddRow.jqGridFormatter",S)),s=0;s<c;s++)h=u[s],$(h).hasClass("jqgrow")&&(y(h.cells[e],i.autoResizable),f!=null&&f[s]!=null&&y(f[s].cells[e],i.autoResizable))},$.unformat=function(e,t,r,i){var a,o=t.colModel,s=o.formatter,u=this.p,f=o.formatoptions||{},c=o.unformat||$FnFmatter[s]&&$FnFmatter[s].unformat;if(e instanceof jQuery&&e.length>0&&(e=e[0]),u.treeGrid&&e!=null&&$(e.firstChild).hasClass("tree-wrap")&&($(e.lastChild).hasClass("cell-wrapper")||$(e.lastChild).hasClass("cell-wrapperleaf"))&&(e=e.lastChild),o.autoResizable&&e!=null&&$(e.firstChild).hasClass(u.autoResizing.wrapperClassName)&&(e=e.firstChild),c!==void 0&&$.isFunction(c))a=c.call(this,$(e).text(),t,e);else if(s!==void 0&&typeof s=="string"){var h=$(this),g=function(v,j){return f[j]!==void 0?f[j]:getGridRes.call(h,"formatter."+v+"."+j)},p=function(v,j){var y=g(v,"thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return j.replace(new RegExp(y,"g"),"")};switch(s){case"integer":a=p("integer",$(e).text());break;case"number":a=p("number",$(e).text()).replace(g("number","decimalSeparator"),".");break;case"currency":a=$(e).text();var m=g("currency","prefix"),b=g("currency","suffix");m&&m.length&&(a=a.substr(m.length)),b&&b.length&&(a=a.substr(0,a.length-b.length)),a=p("number",a).replace(g("number","decimalSeparator"),".");break;case"checkbox":a=$FnFmatter.checkbox.unformat(e,t,e);break;case"select":a=$.unformat.select(e,t,r,i);break;case"actions":return"";default:a=$(e).text()}}return a=a!==void 0?a:i===!0?$(e).text():jgrid.htmlDecode($(e).html()),a},$.unformat.select=function(e,t,r,i){var a=[],o=$(e).text(),s=t.colModel;if(i===!0)return o;var u=$.extend({},s.editoptions||{},s.formatoptions||{}),f=u.separator===void 0?":":u.separator,c=u.delimiter===void 0?";":u.delimiter;if(u.value){var h=typeof u.value=="function"?u.value():u.value,g=u.multiple===!0,p=[],m,b=function(S,C){if(C>0)return S};if(g&&(p=o.split(","),p=$.map(p,function(S){return $.trim(S)})),typeof h=="string"){var v=h.split(c),j=0,y;for(y=0;y<v.length;y++)if(m=v[y].split(f),m.length>2&&(m[1]=$.map(m,b).join(f)),g)$.inArray($.trim(m[1]),p)>-1&&(a[j]=m[0],j++);else if($.trim(m[1])===$.trim(o)){a[0]=m[0];break}}else(fmatter.isObject(h)||$.isArray(h))&&(g||(p[0]=o),a=$.map(p,function(S){var C;if($.each(h,function(w,x){if(x===S)return C=w,!1}),C!==void 0)return C}));return a.join(", ")}return o||""},$.unformat.date=function(e,t){var r=$.extend(!0,{},getGridRes.call($(this),"formatter.date"),jgrid.formatter.date||{},t.formatoptions||{});return fmatter.isEmpty(e)?"":jgrid.parseDate.call(this,r.newformat,e,r.srcformat,r)}});(function(e){e.jgrid.extend({winMultiSelect:function(){return this.each(function(){e(this).bind("jqGridBeforeSelectRow",function(t,r,i){if(e(i.target).attr("type")=="checkbox")return!0;var a=e(this),o=a.jqGrid("getGridParam","selarrrow"),s=function(h){var g=h.id,p=e(h);p.addClass("ui-state-highlight").attr("aria-selected","true"),e.inArray(g,o)<0&&(o.push(g),a.jqGrid("setGridParam",{selrow:g}));var m=this.p;if(p.hasClass("ui-state-highlight")){var b=p.find(">td[aria-describedby="+e.jgrid.jqID(m.id)+"_cb]>input[type=checkbox]");window.setTimeout(function(){b.prop("checked",!0)},1)}},u=function(h){s.call(this,a.jqGrid("getGridRowById",h))},f=function(h){var g,p=h.length,m,b,v;for(g=0;g<p;g++)v=h[g],m=a.jqGrid("getGridRowById",v),e(m).removeClass("ui-state-highlight").removeAttr("attribute aria-selected"),b=e.inArray(v,o),b>=0&&o.splice(b,1),e(m).find(">td[aria-describedby="+e.jgrid.jqID(this.p.id)+"_cb]>input[type=checkbox]").prop("checked",!1);a.jqGrid("setGridParam",{selrow:o.length===0?null:o[o.length-1]})},c=function(h){var g,p,m,b,v=a.jqGrid("getGridRowById",h),j=o.slice(0);for(p=v.rowIndex,o.length>0?(v=a.jqGrid("getGridRowById",o[0]),m=o.length===0?1:v!=null?v.rowIndex:1,p>m&&(g=m,m=p,p=g)):(v=a.jqGrid("getGridRowById",h),m=p),g=p;g<=m;g++)v=this.rows[g],b=e.inArray(v.id,j),b>=0?j.splice(b,1):s.call(this,v);f.call(this,j)};return i.ctrlKey?e.inArray(r,o)>=0?f.call(this,[r]):u.call(this,r):i.shiftKey?c.call(this,r):(f.call(this,o.slice(0)),u.call(this,r)),!1})})}})})(jQuery);window.TTGrid=function(e,t,r){if(this.getGridId=function(){return this.ui_id},this.setTableIDElement=function(){return this.table_id_element=jQuery("#"+this.ui_id),!0},this.getTableIDElement=function(){return this.table_id_element},!e||!t||!r){Debug.Text("ERROR: constructor requires all 3 arguments","TTGrid.js","TTGrid","constructor",10);return}if(this.ui_id=e,!t.container_selector)for(var i=LocalCacheData.resizeable_grids.length-1;i>=0;i--)LocalCacheData.resizeable_grids[i]!=null&&LocalCacheData.resizeable_grids[i].grid!=null&&LocalCacheData.resizeable_grids[i].ui_id==this.ui_id?(LocalCacheData.resizeable_grids[i].grid.jqGrid("GridUnload"),LocalCacheData.resizeable_grids.splice(i,1)):(LocalCacheData.resizeable_grids[i]==null||LocalCacheData.resizeable_grids[i].grid==null)&&LocalCacheData.resizeable_grids.splice(i,1);var a=null;this.setTableIDElement();var o=this.getTableIDElement();if(this.grid=null,o[0]==!1){Debug.Text("ERROR: table_id not found in DOM","TTGrid.js","TTGrid","constructor",10);return}var s={container_selector:"body",sub_grid_mode:!1,altRows:!0,data:[],datatype:"local",sortable:!1,height:o.parents(".view").height(),width:o.parent().width(),rowNum:1e4,colNames:[],colModel:r,multiselect:!0,multiselectWidth:22,multiboxonly:!0,viewrecords:!0,autoencode:!0,scrollOffset:0,verticalResize:!0,resizeGrid:!0,winMultiSelect:!0};t.max_height===!0&&(t.max_height=a),t?t=jQuery.extend({},s,t):t=s,this.setup=t,o.empty(),this.grid=o.jqGrid(t),LocalCacheData.resizeable_grids.push(this),t.winMultiSelect===!0&&this.grid.winMultiSelect(),this.noResize=function(){this.setup.onResizeGrid=!1},this.setData=function(u,f){if(this.grid)f=f??!0,f==!0&&this.grid.clearGridData(),Array.isArray(u)==!1&&(u=[]),this.grid.setGridParam({data:u}).trigger("reloadGrid");else throw"ERROR: Grid is not ready yet."},this.getData=function(){return this.getGridParam("data")},this.getSetup=function(){return this.getGridParam("data")},this.getHeight=function(){return jQuery(this.grid).height()},this.getWidth=function(){return jQuery(this.grid).width()},this.deleteRow=function(u){this.grid.jqGrid("delRowData",u)},this.resetSelection=function(){this.grid.resetSelection()},this.setSelection=function(u,f,c,h,g){this.grid.setSelection(u,f,c,h,g)},this.getGridParam=function(u){return this.grid.getGridParam(u)},this.setGridParam=function(u,f){return this.grid.setGridParam(u,f)},this.unload=function(){return this.grid&&(this.grid.jqGrid("GridUnload"),this.grid=null),!0},this.clearGridData=function(){this.grid.jqGrid("clearGridData",!0)},this.reloadGrid=function(){this.grid.trigger("reloadGrid")},this.getRecordFromGridById=function(u){var f=this.grid.getGridParam("data"),c=null;return jQuery.each(f,function(h,g){if(g._id_==u)return c=Global.clone(g),!1}),c&&(c.id=c._id_),c},this.getGridWidth=function(){return this.grid?this.grid.width():0},this.setGridWidth=function(u,f){this.grid&&(f>u&&(u=f),this.grid.setGridWidth(u,!1))},this.getGridHeight=function(){return this.grid?this.grid.height():0},this.setGridHeight=function(u){this.setup.static_height&&(u=this.setup.static_height),this.grid&&this.grid.setGridHeight(u)},this.setRowData=function(u,f){this.grid.setRowData(u,f)},this.getRowData=function(u){var f=!1,c=this.getData();for(var h in c)if(c[h].id==u){f=c[h];break}return f},this.getColumnModel=function(){return this.getGridParam("colModel")},this.setColumnModel=function(u){this.getGridParam("colModel",u)},this.grid2csv=function(u){let f=[],c=1,h=[];for(let p of document.querySelectorAll("#"+this.getGridId()+" tr")){let m=[];for(let b of p.querySelectorAll("td"))if(m.push('"'+b.textContent.trim()+'"'),c===2){let v=document.createElement("div");v.innerHTML=document.getElementById(b.getAttribute("aria-describedby")).innerHTML.replace("<br>"," "),h.push('"'+v.textContent.trim()+'"')}f.push(m.join(",")),c++}f[0]=h.join(",");let g=f.join(`\r
`);Global.JSFileDownload(u+".csv",g,"text/csv;encoding:utf-8")},this.getRecordCount=function(){return this.grid?this.grid.getGridParam("reccount"):!1},this.getSelectedRow=function(){if(!this.grid)return!1;var u=this.grid.getGridParam("selrow");return u||(u=!1),u},this.getSelectedRows=function(){if(!this.grid)return[];var u=this.grid.getGridParam("selarrrow");return u||(u=[]),u},this.getSelection=function(){for(var u=this.grid.find("td.ui-state-highlight"),f=[],c=0;c<u.length;c++)f.push({tr:jQuery(u[c]).parent("tr").index(),td:jQuery(u[c]).index()});return f},this.setTimesheetSelection=function(u){for(var f=this.grid.find("tr"),c=0;c<u.length;c++)for(var h=0;h<f.length;h++)if(jQuery(f[h]).index()==u[c].tr){for(var g=jQuery(f[h]).find("td"),p=0;p<g.length;p++)if(jQuery(g[p]).index()==u[c].td){jQuery(g[p]).addClass("ui-state-highlight");break}break}},this.setGridColumnsWidth=function(b,f){if(this.setup.treeGrid||this.setup.tree_mode){this.setGridWidth(jQuery(this.setup.container_selector).width()-10);return}if(typeof f>"u"&&(f={}),this.setup.container_selector&&(!f.min_grid_width||f.min_grid_width==0)){var c=this.grid.parents(this.setup.container_selector).find(".sub-grid-view-div");if(c.length>0)if(c.is(":visible")===!0)f.min_grid_width=c.innerWidth();else{Debug.Text("  Parent container of grid is not visible, skip setting column widths...","TTGrid.js","TTGrid","setGridColumnsWidth",10);return}else{let ee=jQuery("#gbox_"+this.ui_id);ee.length!==0?f.min_grid_width=ee.parent().width():f.min_grid_width=this.grid.parents(this.setup.container_selector).innerWidth()}}if((f.min_grid_width==0||f.min_grid_width=="undefined")&&(f.min_grid_width=jQuery("body").innerWidth()),Global.isVerticalScrollBarRequired(this.grid.parents(".ui-jqgrid-bdiv")[0])&&(f.min_grid_width-=Global.getScrollbarWidth()),f.max_grid_width||(f.max_grid_width=null),f.max_grid_width&&f.max_grid_width<f.min_grid_width&&(f.min_grid_width=f.max_grid_width),Debug.Text("Target Grid: "+this.setup.container_selector+" Width: Min: "+f.min_grid_width+" Max: "+f.max_grid_width+" Scrollbar Offset: "+Global.getScrollbarWidth()+" Parent Width: "+jQuery(this.grid.parents(".edit-view-tab, body")[0]).width(),"TTGrid.js","TTGrid","setGridColumnsWidth",10),b){for(var h=0,g=0;g<b.length;g++){var p=b[g].name,m=b[g].width?b[g].width:b.widthOrg;h+=m,this.grid.getColProp(p).width!=m&&this.grid.setColWidth(p,m)}return h}var b=this.getColumnModel();if(!b){Debug.Text("ERROR: column_model is null or undefined","TTGrid.js","TTGrid","setGridColumnsWidth",10);return}function v(ee,Z){return Z.length>ee.length?Z:ee}function j(ee){if(ee&&typeof ee=="string"){var Z=ee.split(" ");return Z.reduce(v)}else return""}var y=this.getData();this.grid_total_width=0;for(var S=0,C=0,w=0,x={},g=0;g<b.length;g++){var G=b[g],p=G.name,l=j(G.label),R=!0;if(p=="cb")C=1,S=22,m=S;else if(f.column_width_override&&f.column_width_override[p])m=f.column_width_override[p];else{for(var B=0;B<y.length;B++){var T=y[B];if(T.hasOwnProperty(p)){var H=T[p];H||(H=""),l?H&&H.toString().length>l.length&&(l=H.toString(),R=!1):(l=H.toString(),R=!1)}}var P;l==p?P={fontSize:"11px",fontWeight:"bolder"}:P={fontSize:"11px",fontWeight:"normal"};var m=Global.calculateTextWidth(l,P);R===!0?m+=40:m+=12}m>w&&(w=m),x[p]=m,this.grid_total_width+=m}if(w*b.length<=f.min_grid_width){var V=Math.floor((f.min_grid_width-S)/(b.length-C)),k=(f.min_grid_width-S)%(b.length-C);Debug.Text(" Grid columns CAN fit with equal sizes... Grid Width: "+f.min_grid_width+" Optimal Grid Width: "+this.grid_total_width+" Equal Size Width: "+V+" Remainder: "+k,"TTGrid.js","TTGrid","setGridColumnsWidth",10);var O=0,N=0;for(var z in x){if(z=="cb")this.grid.setColWidth("cb",S),O+=S;else{var I=V;N==1&&(I+=k),this.grid.getColProp(z).width!=I&&this.grid.setColWidth(z,I),O+=I}this.grid.setColProp(z,{fixed:!0}),N++}Debug.Text(" Adjusted Grid Width: "+O+" Adjusted Column Remainder: "+k,"TTGrid.js","TTGrid","setGridColumnsWidth",10),this.grid_total_width=f.min_grid_width}else{Debug.Text(" Optimal Grid Width: "+this.grid_total_width+" Equal Size Width: "+w*b.length,"TTGrid.js","TTGrid","setGridColumnsWidth",10);var Q=0,ie=0,X=0,re=0;(f.max_grid_width>0&&this.grid_total_width>f.max_grid_width||f.min_grid_width>0&&this.grid_total_width<f.min_grid_width)&&(f.max_grid_width>0&&this.grid_total_width>f.max_grid_width?(Q=0,this.grid_total_width=f.max_grid_width):(Q=f.min_grid_width-this.grid_total_width,this.grid_total_width=f.min_grid_width),Q!=0&&(f.column_width_override?X=b.length-f.column_width_override.length():X=b.length-C,ie=Math.floor(Q/X),re=Q%X));var O=0,N=0;for(var z in x){if(z=="cb")this.grid.setColWidth("cb",S),O+=S;else{var I;f.column_width_override&&f.column_width_override[n]?I=x[z]:I=x[z]+ie,N==1&&(I+=re),I=Math.floor(I),Debug.Text("    Adjusted Column: "+z+" Width: Old: "+x[z]+" New: "+I+" Adjustment: "+ie+" Body Difference: "+Q+" Columns Adjusted: "+X,"TTGrid.js","TTGrid","setGridColumnsWidth",10),this.grid.getColProp(z).width!=I&&this.grid.setColWidth(z,I),O+=I}this.grid.setColProp(z,{fixed:!0}),N++}Debug.Text(" Adjusted Grid Width: "+O+" Adjusted Column Remainder: "+re,"TTGrid.js","TTGrid","setGridColumnsWidth",10)}return Debug.Text(" FINAL Grid width: "+this.grid_total_width+" Body Width: "+Global.bodyWidth()+" Total Rows: "+y.length,"TTGrid.js","TTGrid","setGridColumnsWidth",10),O},jQuery(window).off("resize.grids").on("resize.grids",Global.debounce(u=>this.TTGridResizeEvent(u),500)),this.TTGridResizeEvent=function(u){if(u.stopPropagation(),Debug.Text(" Window resize event hit by TTGrid. Target: "+u.target,"TTGrid.js","TTGrid","setGridColumnsWidth",10),LocalCacheData.resizeable_grids.length>0){var f=LocalCacheData.resizeable_grids.filter(function(g){return g!=null});LocalCacheData.resizeable_grids=f;for(var c in LocalCacheData.resizeable_grids){var h=LocalCacheData.resizeable_grids[c];if(!h||typeof h.getTableIDElement=="function"&&h.getTableIDElement().length===0||!h.grid||h.setup.onResizeGrid===!1){Debug.Arr(LocalCacheData.resizeable_grids," Grid ignored "+c,"TTGrid.js","TTGrid","setGridColumnsWidth",10),LocalCacheData.resizeable_grids[c]=null;continue}h.getTableIDElement().is(":visible")?(Debug.Text(" Processing: "+h.ui_id,"TTGrid.js","TTGrid","setGridColumnsWidth",10),h.setup.onResizeGrid&&typeof h.setup.onResizeGrid=="function"?(Debug.Text(" TTGrid invoked setup defined onResizeGrid() for "+h.ui_id,"TTGrid.js","TTGrid","setGridColumnsWidth",10),h.setup.onResizeGrid()):h.grid.length==1&&(Debug.Text(" TTGrid invoked TTgrid::setGridColumnsWidth() for "+h.ui_id,"TTGrid.js","TTGrid","setGridColumnsWidth",10),h.setGridColumnsWidth())):Debug.Text(" Skipping grid that is not visible: "+h.ui_id,"TTGrid.js","TTGrid","setGridColumnsWidth",10)}LocalCacheData.current_open_primary_controller&&LocalCacheData.current_open_primary_controller.grid&&(LocalCacheData.current_open_primary_controller.setGridColumnsWidth(),LocalCacheData.current_open_primary_controller.setGridSize()),LocalCacheData.current_open_sub_controller&&LocalCacheData.current_open_sub_controller.grid&&(LocalCacheData.current_open_sub_controller.setGridColumnsWidth(),LocalCacheData.current_open_sub_controller.setGridSize())}}};
//# sourceMappingURL=TTGrid-BhBcoleY.bundle.js.map
