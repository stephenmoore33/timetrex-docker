{"version":3,"file":"LoginUserViewController-b-ejU6WN.bundle.js","sources":["../../views/wizard/login_user/LoginUserViewController.js"],"sourcesContent":["export class LoginUserViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#login_user_view_container',\n\t\t\tstatus_array: null,\n\t\t\tsex_array: null,\n\t\t\tuser_group_array: null,\n\t\t\tcountry_array: null,\n\t\t\tprovince_array: null,\n\n\t\t\tcompany_api: null,\n\n\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.permission_id = 'user';\n\n\t\tthis.viewId = 'LoginUser';\n\n\t\tif ( LoginUserWizardController.type === 'Client' ) {\n\t\t\tthis.script_name = 'ClientLoginPopUpEmployeeView';\n\t\t} else {\n\t\t\tthis.script_name = 'CompamyLoginPopUpEmployeeView';\n\t\t}\n\n\t\tthis.api = TTAPI.APIUser;\n\t\tthis.api.key_name = 'CompanyUser'; //search() needs to call getCompanyUser() rather than getUser().\n\n\t\tthis.company_api = TTAPI.APICompany;\n\n\t\tthis.render();\n\n\t\tthis.initData();\n\t}\n\n\t//No right click menu for this\n\tinitRightClickMenu( target_type ) {\n\t\treturn;\n\t}\n\n\tshowNoResultCover( show_new_btn ) {\n\t\tsuper.showNoResultCover( false );\n\t}\n\n\tgetGridSetup() {\n\t\tvar $this = this;\n\n\t\tvar grid_setup = {\n\t\t\tcontainer_selector: '.login-user-view', //Was: .view\n\t\t\tsub_grid_mode: false,\n\t\t};\n\n\t\tgrid_setup.setGridSize = function() {\n\t\t\t$this.baseViewSubTabGridResize( '.login-user-view' );\n\t\t};\n\n\t\tgrid_setup.onResizeGrid = function() {\n\t\t\t$this.baseViewSubTabGridResize( '.login-user-view' );\n\t\t};\n\n\t\tgrid_setup.onCellSelect = function() {\n\t\t\t$this.onGridSelectRow();\n\t\t};\n\n\t\treturn grid_setup;\n\t}\n\n\tsetCurrentViewPosition() {\n\t\tvar current_view_div = this.search_panel.find( '.layout-selector-div' );\n\t\tvar saved_layout_li = this.search_panel.find( 'a[ref=\\'saved_layout\\']' ).parent();\n\t\tvar offset_left = saved_layout_li.offset().left - ( Global.bodyWidth() / 2 - 500 );\n\t\tcurrent_view_div.css( 'left', offset_left + saved_layout_li.width() + 20 );\n\t}\n\n\tinitOptions( callBack ) {\n\n\t\tvar options = [\n\t\t\t{ option_name: 'status', field_name: null, api: null },\n\t\t\t{ option_name: 'sex', field_name: null, api: null },\n\t\t\t{ option_name: 'country', field_name: 'country', api: this.company_api }\n\t\t];\n\n\t\tthis.initDropDownOptions( options, function( result ) {\n\t\t\tif ( callBack ) {\n\t\t\t\tcallBack( result ); // First to initialize drop down options, and then to initialize edit view UI.\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSetSearchFilterFinished() {\n\t\tif ( this.search_panel.getSelectTabIndex() === 1 ) {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar select_value = combo.getValue();\n\t\t\tthis.setProvince( select_value );\n\t\t}\n\t}\n\n\tonBuildAdvUIFinished() {\n\t\tthis.adv_search_field_ui_dic['country'].change( $.proxy( function() {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar selectVal = combo.getValue();\n\t\t\tthis.setProvince( selectVal );\n\t\t\tthis.adv_search_field_ui_dic['province'].setValue( null );\n\t\t}, this ) );\n\t}\n\n\tsetProvince( val, m ) {\n\t\tvar $this = this;\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.province_array = [];\n\t\t\tthis.adv_search_field_ui_dic['province'].setSourceData( [] );\n\t\t} else {\n\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.province_array = Global.buildRecordArray( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'First Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'first_name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Last Name' ),\n\t\t\t\tfield: 'last_name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Home Phone' ),\n\t\t\t\tfield: 'home_phone',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Tags' ),\n\t\t\t\tfield: 'tag',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TAG_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee Number' ),\n\t\t\t\tfield: 'employee_number',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Sex' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'sex_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Group' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tmultiple: true,\n\t\t\t\tfield: 'group_id',\n\t\t\t\tlayout_name: 'global_tree_column',\n\t\t\t\ttree_mode: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Branch' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'default_branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default Department' ),\n\t\t\t\tfield: 'default_department_id',\n\t\t\t\tin_column: 2,\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Title' ),\n\t\t\t\tfield: 'title_id',\n\t\t\t\tin_column: 3,\n\t\t\t\tlayout_name: 'global_job_title',\n\t\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Country' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'country',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.COMBO_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Province/State' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'province',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'City' ),\n\t\t\t\tfield: 'city',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 3,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'SIN/SSN' ),\n\t\t\t\tfield: 'sin',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 3,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} )\n\t\t];\n\t}\n\n}"],"names":["LoginUserViewController","options","_","target_type","show_new_btn","$this","grid_setup","current_view_div","saved_layout_li","offset_left","callBack","result","combo","select_value","$","selectVal","val","m","res"],"mappings":"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"}