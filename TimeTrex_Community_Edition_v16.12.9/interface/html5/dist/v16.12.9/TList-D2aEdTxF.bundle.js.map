{"version":3,"file":"TList-D2aEdTxF.bundle.js","sources":["../../global/widgets/list/TList.js"],"sourcesContent":["( function( $ ) {\n\n\t$.fn.TList = function( options ) {\n\t\tvar opts = $.extend( {}, $.fn.TList.defaults, options );\n\t\tvar $this = this;\n\t\tvar field;\n\t\tvar source_data = null;\n\n\t\tvar select_value = null;\n\n\t\tvar set_empty = false;\n\n\t\tvar set_any = false;\n\n\t\tvar set_select_item_when_set_source_data = false;\n\n\t\tvar error_string = '';\n\t\tvar error_tip_box;\n\n\t\tvar mass_edit_mode = false;\n\n\t\tvar check_box = null;\n\n\t\tvar enabled = true;\n\n\t\tthis.getEnabled = function() {\n\t\t\treturn enabled;\n\t\t};\n\n\t\tthis.setEnabled = function( val ) {\n\t\t\tenabled = val;\n\n\t\t\tif ( val === false || val === '' ) {\n\t\t\t\t$this.attr( 'disabled', 'true' );\n\t\t\t\t$this.addClass( 't-select-readonly' );\n\t\t\t} else {\n\t\t\t\t$this.removeAttr( 'disabled' );\n\t\t\t\t$this.removeClass( 't-select-readonly' );\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setCheckBox = function( val ) {\n\t\t\tif ( check_box ) {\n\t\t\t\tcheck_box.children().eq( 0 )[0].checked = val;\n\t\t\t}\n\t\t};\n\n\t\tthis.isChecked = function() {\n\t\t\tif ( check_box ) {\n\t\t\t\tif ( check_box.children().eq( 0 )[0].checked === true ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.setMassEditMode = function( val ) {\n\t\t\tmass_edit_mode = val;\n\n\t\t\tif ( mass_edit_mode ) {\n\t\t\t\tcheck_box = $( ' <div class=\"mass-edit-checkbox-wrapper\"><input type=\"checkbox\" class=\"mass-edit-checkbox\"></input>' +\n\t\t\t\t\t'<label for=\"checkbox-input-1\" class=\"input-helper input-helper--checkbox\"></label></div>' );\n\t\t\t\tcheck_box.insertBefore( $( this ) );\n\n\t\t\t\tcheck_box.change( function() {\n\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.remove();\n\t\t\t\t\tcheck_box = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setErrorStyle = function( errStr, show, isWarning ) {\n\t\t\tif ( isWarning ) {\n\t\t\t\t$( this ).addClass( 'warning-tip' );\n\t\t\t} else {\n\t\t\t\t$( this ).addClass( 'error-tip' );\n\t\t\t}\n\t\t\terror_string = errStr;\n\n\t\t\tif ( show ) {\n\t\t\t\tthis.showErrorTip();\n\t\t\t}\n\t\t};\n\n\t\tthis.showErrorTip = function( sec ) {\n\n\t\t\tif ( !Global.isSet( sec ) ) {\n\t\t\t\tsec = 2;\n\t\t\t}\n\n\t\t\tif ( !error_tip_box ) {\n\t\t\t\terror_tip_box = Global.loadWidgetByName( WidgetNamesDic.ERROR_TOOLTIP );\n\t\t\t\terror_tip_box = error_tip_box.ErrorTipBox();\n\t\t\t}\n\t\t\tif ( $( this ).hasClass( 'warning-tip' ) ) {\n\t\t\t\terror_tip_box.show( this, error_string, sec, true );\n\t\t\t} else {\n\t\t\t\terror_tip_box.show( this, error_string, sec );\n\t\t\t}\n\t\t};\n\n\t\tthis.hideErrorTip = function() {\n\n\t\t\tif ( Global.isSet( error_tip_box ) ) {\n\t\t\t\terror_tip_box.remove();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.clearErrorStyle = function() {\n\t\t\t$( this ).removeClass( 'error-tip' );\n\t\t\t$( this ).removeClass( 'warning-tip' );\n\t\t\tthis.hideErrorTip();\n\t\t\terror_string = '';\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValue = function() {\n\n\t\t\tvar result = [];\n\t\t\tvar select_items = $( this ).children( 'option:selected' );\n\t\t\tvar len = select_items.length;\n\t\t\tif ( len > 0 ) {\n\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\tvar item = select_items.eq( i );\n\t\t\t\t\tresult.push( item.attr( 'value' ) );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\n\t\t\tselect_value = val;\n\n\t\t\tif ( !source_data || ( set_empty && source_data.length === 1 ) || ( set_any && source_data.length === 1 ) ) {\n\t\t\t\tset_select_item_when_set_source_data = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( !val ) {\n\t\t\t\tif ( set_empty ) {\n\t\t\t\t\tval = '0';\n\t\t\t\t} else if ( set_any ) {\n\t\t\t\t\tval = '-1';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$( $( this ).find( 'option' ) ).removeAttr( 'selected' );\n\n\t\t\t$( $( this ).find( 'option' ) ).filter( function() {\n\n\t\t\t\tif ( val === null || val === undefined ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar result = false;\n\t\t\t\tif ( $.type( val ) === 'array' ) {\n\t\t\t\t\tfor ( var i = 0; i < val.length; i++ ) {\n\t\t\t\t\t\tvar item = val[i];\n\n\t\t\t\t\t\tif ( item.toString() === $( this ).attr( 'value' ) ) {\n\t\t\t\t\t\t\tresult = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult = ( $( this ).attr( 'value' ) === val.toString() );\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\n\t\t\t} ).prop( 'selected', true ).attr( 'selected', true );\n\n\t\t};\n\n\t\tthis.setSourceData = function( val ) {\n\n\t\t\t$( this ).empty();\n\n\t\t\tif ( !Global.isSet( val ) || val.length < 1 ) {\n\t\t\t\tif ( set_empty ) {\n\t\t\t\t\tval = Global.addFirstItemToArray( val, 'empty' );\n\t\t\t\t} else if ( set_any ) {\n\t\t\t\t\tval = Global.addFirstItemToArray( val, 'any' );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( set_empty ) {\n\n\t\t\t\t\tif ( val[0].value !== '0' ) {\n\t\t\t\t\t\tval = Global.addFirstItemToArray( val, 'empty' );\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( set_any ) {\n\t\t\t\t\tif ( val[0].value !== '-1' ) {\n\t\t\t\t\t\tval = Global.addFirstItemToArray( val, 'any' );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsource_data = val;\n\n\t\t\tvar len = val.length;\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar item = val[i];\n\t\t\t\t$( this ).append( '<option value=\"' + item.value + '\">' + item.label + '</option>' );\n\t\t\t}\n\n\t\t\tif ( set_select_item_when_set_source_data ) {\n\t\t\t\tthis.setValue( select_value );\n\t\t\t}\n\n\t\t};\n\n\t\tthis.each( function() {\n\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\n\t\t\tif ( o.set_empty ) {\n\t\t\t\tset_empty = o.set_empty;\n\t\t\t}\n\n\t\t\tif ( o.set_any ) {\n\t\t\t\tset_any = o.set_any;\n\t\t\t}\n\n\t\t\tif ( o.mass_edit_mode ) {\n\t\t\t\tmass_edit_mode = o.mass_edit_mode;\n\t\t\t}\n\n\t\t\tfield = o.field;\n\n\t\t\t$( this ).change( function() {\n\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\t$this.setCheckBox( true );\n\t\t\t\t}\n\n\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t} );\n\n\t\t\t$( this ).click( function() {\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\tif ( !check_box ) {\n\t\t\t\t\t\tif ( LocalCacheData.current_open_sub_controller &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.edit_view &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.is_viewing ) {\n\t\t\t\t\t\t\terror_string = LocalCacheData.current_open_sub_controller.getViewModeErrorMessage();\n\t\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t\t} else if ( LocalCacheData.current_open_primary_controller &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.edit_view &&\n\t\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.is_viewing ) {\n\t\t\t\t\t\t\terror_string = LocalCacheData.current_open_primary_controller.getViewModeErrorMessage();\n\t\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$( this ).mouseover( function() {\n\n\t\t\t\tif ( enabled ) {\n\t\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\t\t$this.showErrorTip( 20 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t$( this ).mouseout( function() {\n\t\t\t\t$this.hideErrorTip();\n\t\t\t} );\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.TList.defaults = {};\n\t$.fn.TList.html_template = `\n\t<select class=\"t-list\" multiple>\n\t</select>\n\t`;\n\n} )( jQuery );"],"names":["$","options","opts","$this","field","source_data","select_value","set_empty","set_any","set_select_item_when_set_source_data","error_string","error_tip_box","mass_edit_mode","check_box","enabled","val","errStr","show","isWarning","sec","result","select_items","len","i","item","o","jQuery"],"mappings":"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"}