{"version":3,"file":"AComboBox-Omibb0-v.bundle.js","sources":["../../global/widgets/awesomebox/AComboBox.js"],"sourcesContent":["( function( $ ) {\n\n\t$.fn.AComboBox = function( options ) {\n\t\tvar opts = $.extend( {}, $.fn.AComboBox.defaults, options );\n\n\t\tvar label_span = null;\n\n\t\tvar a_dropdown = null;\n\n\t\tvar layout_name = '';\n\n\t\tvar pager_data = null; //use to reset pager data when open dropdown\n\n\t\tvar api_class = null;\n\n\t\tvar api = null; //Related TTAPI.API instance, use to get data\n\n\t\tvar default_columns = null;\t //Default coluns when no layout saved\n\n\t\tvar allow_multiple_selection = false;\n\n\t\tvar do_not_get_real_data = false; //Get full data when only pass id to select Value.\n\n\t\tvar get_real_data_on_multi = false; //Usually only get real data when select has a single value. But punch tags require manual_id of all records.\n\n\t\tvar set_any = false;\n\n\t\tvar set_empty = false;\n\n\t\tvar set_special_empty = false;\n\n\t\tvar set_open = false;\n\n\t\tvar set_default = false;\n\n\t\tvar set_all = false;\n\n\t\tvar select_item = null;\n\n\t\tvar select_items = null;\n\n\t\tvar field = '';\n\n\t\tvar validation_field;\n\n\t\tvar user_generic_api = null;\n\n\t\tvar display_columns = null; //Display columns in ADropDown in jGrid model format\n\n\t\tvar possible_display_columns = null; //Only these columns can be shown when init dispaly columns.\n\n\t\tvar list_view_default_columns = null; //Only these columns can be shown when init dispaly columns.\n\n\t\tvar display_columns_in_columnEditor = null; //Display columns in edit columns\n\n\t\tvar all_columns = null; // All columns when edit columns\n\n\t\tvar column_editor = null;\n\n\t\tvar source_data = null; // This will never change when search in search input. Set it back to dropdown every time when open\n\n\t\tvar id = '';\n\n\t\tvar get_real_data_when_open = false;\n\n\t\tvar set_select_items_when_set_data_provider = false;\n\n\t\tvar $this = null;\n\n\t\tvar a_dropdown_div = null;\n\n\t\tvar is_mouse_over = false;\n\n\t\tvar row_per_page = 0;\n\n\t\tvar show_all = false;\n\n\t\tvar args = null;\n\n\t\tGlobal.addCss( 'global/widgets/awesomebox/AComboBox.css' );\n\n\t\tvar show_search_inputs = true;\n\n\t\tvar tree_mode = false;\n\n\t\tvar on_tree_grid_row_select = false;\n\n\t\tvar key = 'id';\n\n\t\tvar error_string = '';\n\n\t\tvar error_tip_box;\n\n\t\t$this = this;\n\n\t\tvar mass_edit_mode = false;\n\n\t\tvar check_box = null;\n\n\t\tvar enabled = true;\n\n\t\tvar allow_drag_to_order = false;\n\n\t\tvar navigation_mode = false;\n\n\t\tvar args_from_saved_layout = null;\n\n\t\tvar default_args = null;\n\t\t//Use this in Navigation Mode, Keep search filter when open. Don't clean it in onClose if navigation_mode\n\t\t// Now we di this in both navigation and normal (2014/6/7)\n\t\tvar cached_search_inputs_filter = null;\n\n\t\tvar cached_select_grid_search_inputs_filter = null;\n\n\t\tvar cached_sort_filter = null; //Same as above\n\n\t\tvar cached_selected_grid_sort_filter = null; //Same as above\n\n\t\tvar script_name = '';\n\n\t\tvar navigation_mode_source_data_before_open = null;\n\n\t\tvar set_default_args_manually = false; //If set default args outside\n\n\t\tvar addition_source_function = null;\n\n\t\tvar custom_key_name = null;\n\n\t\tvar setRealValueCallBack = null; //Set real data call back function\n\n\t\tvar custom_first_label = null;\n\n\t\tvar added_items = null;\n\n\t\tvar column_option_key = 'columns';\n\n\t\t// set this when close, don't allow awesomebox open until 0.3 sec, this prevent awesomebox close in mousedown, and open in click.\n\t\tvar dontOpenTimer = null;\n\n\t\tvar dontOpen = false;\n\n\t\tvar total_header_width;\n\n\t\t//if init source data right after initcolumns complete\n\t\tvar init_data_immediately = false;\n\n\t\tvar unselect_grid_search_result;\n\n\t\t// don't do column filter base on display columns, use all instead\n\t\t//Use in report edit view. load saved report navigation\n\t\tvar always_search_full_columns = false;\n\n\t\t//Save what letter user current use to do the search\n\t\tvar quick_search_dic = {};\n\n\t\t//Save multi key typed when quick search\n\t\tvar quick_search_typed_keys = '';\n\n\t\tvar select_grid_search_result;\n\n\t\t//use to juedge if need to clear quick_search_typed_keys\n\t\tvar quick_search_timer;\n\n\t\tvar current_open_page = 1;\n\n\t\t//deal with result when doing dropdown search, TimesheetAuthorizationViewControl need this.\n\t\tvar extendDataProcessWhenSearch;\n\n\t\tvar always_include_columns = false;\n//\n//\t\t//Used for modify search result when doing Paging or Searching, For example, used in AccrualBalanceViewController to set correct ids\n//\t\tthis.customSearchResultHandler = null;\n\n\t\t//Used for modify search filter when open awesomebox or do search/sorting and paging. First used in Timehsheet absency_policy awesomebox\n\t\tthis.customSearchFilter = null;\n\n\t\tthis.getCurrentOpenPage = function() {\n\t\t\treturn current_open_page;\n\t\t};\n\n\t\tthis.getPagerData = function() {\n\t\t\treturn pager_data;\n\t\t};\n\n\t\tthis.getHeaderWidth = function() {\n\t\t\treturn total_header_width;\n\t\t};\n\n\t\tthis.setKey = function( val ) {\n\t\t\tkey = val;\n\t\t};\n\n\t\tthis.getDisplayColumns = function() {\n\t\t\treturn display_columns;\n\t\t};\n\n\t\tthis.getLayout = function() {\n\n\t\t\treturn ALayoutCache.layout_dic[layout_name];\n\t\t};\n\n\t\tthis.getAPI = function() {\n\t\t\treturn api;\n\t\t};\n\n\t\tthis.getScriptName = function() {\n\n\t\t\tscript_name = Global.getScriptNameByAPI( api_class );\n\n\t\t\treturn script_name;\n\t\t};\n\n\t\tthis.setCachedSortFilter = function( val ) {\n\t\t\tcached_sort_filter = val;\n\t\t};\n\n\t\tthis.setCachedSelectedGridSortFilter = function( val ) {\n\t\t\tcached_selected_grid_sort_filter = val;\n\t\t};\n\n\t\tthis.setCachedSearchInputsFilter = function( val ) {\n\t\t\tcached_search_inputs_filter = val;\n\t\t};\n\n\t\tthis.setCachedSelectGridSearchInputsFilter = function( val ) {\n\t\t\tcached_select_grid_search_inputs_filter = val;\n\t\t};\n\n\t\tthis.setAllowMultipleSelection = function( val ) {\n\t\t\tallow_multiple_selection = val;\n\n\t\t\tif ( val == true ) {\n\t\t\t\tif ( select_item ) {\n\t\t\t\t\tselect_items = [select_item];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( select_items && select_items.length > 0 ) {\n\t\t\t\t\tselect_item = select_items[0];\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getEnabled = function() {\n\t\t\treturn enabled;\n\t\t};\n\n\t\tthis.setEnabled = function( val ) {\n\t\t\tenabled = val;\n\t\t\tif ( val === false || val === '' ) {\n\t\t\t\t$this.addClass( 'a-combobox-readonly' );\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.hide();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$this.removeClass( 'a-combobox-readonly' );\n\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.show();\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setCheckBox = function( val ) {\n\t\t\tif ( check_box ) {\n\t\t\t\tcheck_box.children().eq( 0 )[0].checked = val;\n\t\t\t}\n\t\t};\n\n\t\tthis.isChecked = function() {\n\t\t\tif ( check_box ) {\n\t\t\t\tif ( check_box.children().eq( 0 )[0].checked === true ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.setMassEditMode = function( val ) {\n\t\t\tmass_edit_mode = val;\n\n\t\t\tif ( mass_edit_mode ) {\n\t\t\t\tcheck_box = $( ' <div class=\"mass-edit-checkbox-wrapper\"><input type=\"checkbox\" class=\"mass-edit-checkbox\"></input>' +\n\t\t\t\t\t'<label for=\"checkbox-input-1\" class=\"input-helper input-helper--checkbox\"></label></div>' );\n\t\t\t\tcheck_box.insertBefore( $( this ) );\n\n\t\t\t\tcheck_box.change( function() {\n\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t} );\n\n\t\t\t} else {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\tcheck_box.remove();\n\t\t\t\t\tcheck_box = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getItemByIndex = function( index ) {\n\t\t\tvar target_source_data;\n\n\t\t\tif ( navigation_mode && !source_data ) {\n\t\t\t\ttarget_source_data = navigation_mode_source_data_before_open;\n\t\t\t} else {\n\t\t\t\ttarget_source_data = source_data;\n\n\t\t\t\t//Only for single mode\n\t\t\t\tif ( unselect_grid_search_result && unselect_grid_search_result.length > 0 ) {\n\t\t\t\t\ttarget_source_data = unselect_grid_search_result;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !target_source_data ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar result = null;\n\t\t\tresult = target_source_data[index];\n\t\t\treturn result;\n\n\t\t};\n\n\t\tthis.getSelectIndex = function() {\n\n\t\t\tvar target_source_data;\n\n\t\t\tif ( navigation_mode && !source_data ) {\n\t\t\t\ttarget_source_data = navigation_mode_source_data_before_open;\n\t\t\t} else {\n\t\t\t\ttarget_source_data = source_data;\n\n\t\t\t\t//Only for single mode\n\t\t\t\tif ( unselect_grid_search_result && unselect_grid_search_result.length > 0 ) {\n\t\t\t\t\ttarget_source_data = unselect_grid_search_result;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !select_item || !target_source_data ) { // can't get correct index if source_data is null\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tvar len = target_source_data.length;\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar item = target_source_data[i];\n\t\t\t\tif ( select_item[key] === item[key] ) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t};\n\n\t\tthis.getNextSelectItemId = function() {\n\t\t\tvar retval = null;\n\t\t\t// This function is commonly used by edit views to get the id of the next record from the navigation box, such as during Delete&Next\n\t\t\tvar next_select_item = this.getSelectIndex() + 1;\n\t\t\tvar source_data = this.getSourceData();\n\t\t\tif ( source_data && next_select_item < source_data.length ) {\n\t\t\t\tretval = this.getItemByIndex( next_select_item );\n\t\t\t} else {\n\t\t\t\tretval = null;\n\t\t\t}\n\n\t\t\treturn retval;\n\t\t};\n\n\t\tthis.setErrorStyle = function( errStr, show, isWarning ) {\n\t\t\tif ( isWarning ) {\n\t\t\t\t$( this ).addClass( 'a-warning-tip' );\n\t\t\t} else {\n\t\t\t\t$( this ).addClass( 'a-error-tip' );\n\t\t\t}\n\t\t\terror_string = errStr;\n\n\t\t\tif ( show ) {\n\t\t\t\tthis.showErrorTip();\n\t\t\t}\n\t\t};\n\n\t\tthis.showErrorTip = function( sec ) {\n\n\t\t\tif ( !Global.isSet( sec ) ) {\n\t\t\t\tsec = 2;\n\t\t\t}\n\n\t\t\tif ( !error_tip_box ) {\n\t\t\t\terror_tip_box = Global.loadWidgetByName( WidgetNamesDic.ERROR_TOOLTIP );\n\t\t\t\terror_tip_box = error_tip_box.ErrorTipBox();\n\t\t\t}\n\t\t\tif ( $( this ).hasClass( 'a-warning-tip' ) ) {\n\t\t\t\terror_tip_box.show( this, error_string, sec, true );\n\t\t\t} else {\n\t\t\t\terror_tip_box.show( this, error_string, sec );\n\t\t\t}\n\t\t};\n\n\t\tthis.hideErrorTip = function() {\n\n\t\t\tif ( Global.isSet( error_tip_box ) ) {\n\t\t\t\terror_tip_box.remove();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.clearErrorStyle = function() {\n\t\t\t$( this ).removeClass( 'a-error-tip' );\n\t\t\t$( this ).removeClass( 'a-warning-tip' );\n\t\t\terror_string = '';\n\t\t\tthis.hideErrorTip();\n\t\t};\n\n\t\tthis.setField = function( val ) {\n\t\t\tfield = val;\n\t\t};\n\n\t\tthis.getField = function() {\n\t\t\treturn field;\n\t\t};\n\n\t\tthis.getValidationField = function() {\n\t\t\treturn validation_field;\n\t\t};\n\n\t\tthis.highlightSelectItem = function() {\n\t\t\tif ( !allow_multiple_selection ) {\n\t\t\t\tlet selected_id;\n\n\t\t\t\tif ( select_item && select_item[key] ) {\n\t\t\t\t\tselected_id = select_item[key];\n\t\t\t\t} else if ( select_item ) {\n\t\t\t\t\tselected_id = select_item;\n\t\t\t\t}\n\n\t\t\t\tif ( selected_id && a_dropdown ) {\n\t\t\t\t\ta_dropdown?.getUnSelectGrid()?.grid?.jqGrid( 'setSelection', selected_id, false );\n\n\t\t\t\t\tlet selected_item_element = document.getElementById( selected_id );\n\t\t\t\t\tif ( selected_item_element ) {\n\t\t\t\t\t\tselected_item_element.scrollIntoView();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.getValue = function( return_full_value ) {\n\t\t\tvar return_value = null;\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tif ( return_full_value ) {\n\t\t\t\t\treturn_value = select_items;\n\t\t\t\t} else {\n\t\t\t\t\treturn_value = [];\n\t\t\t\t\tif ( Global.isArray( select_items ) ) {\n\t\t\t\t\t\t$.each( select_items, function( index, content ) {\n\t\t\t\t\t\t\t// In 1891, one value in select items is null\n\t\t\t\t\t\t\tif ( content ) {\n\t\t\t\t\t\t\t\tif ( Global.isString( content ) || $.type( content ) === 'number' ) {\n\t\t\t\t\t\t\t\t\treturn_value.push( content );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn_value.push( content[key] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tif ( select_items.length === 0 ) {\n\t\t\t\t\t\t\tif ( set_any ) {\n\t\t\t\t\t\t\t\treturn_value.push( TTUUID.not_exist_id ); // In fact, if the columns can be multiple selected. and no have any options selected, it's should be return an array.\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( set_any ) {\n\t\t\t\t\t\t\treturn_value.push( TTUUID.not_exist_id ); // In fact, if the columns can be multiple selected. and no have any options selected, it's should be return an array.\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Return false when no selected value\n\t\t\t\t\tif ( return_value.length === 0 ) {\n\t\t\t\t\t\tif ( set_any ) {\n\t\t\t\t\t\t\treturn_value = TTUUID.not_exist_id;\n\t\t\t\t\t\t} else if ( set_empty ) {\n\t\t\t\t\t\t\treturn_value = TTUUID.zero_id;\n\t\t\t\t\t\t} else if ( set_special_empty ) {\n\t\t\t\t\t\t\treturn_value = TTUUID.not_exist_id;\n\t\t\t\t\t\t} else if ( set_open ) {\n\t\t\t\t\t\t\treturn_value = TTUUID.zero_id;\n\t\t\t\t\t\t} else if ( set_default ) {\n\t\t\t\t\t\t\treturn_value = TTUUID.zero_id;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( return_full_value ) {\n\t\t\t\t\treturn_value = select_item;\n\t\t\t\t} else {\n\t\t\t\t\tif ( select_item ) {\n\n\t\t\t\t\t\tif ( Global.isSet( select_item[key] ) ) {\n\t\t\t\t\t\t\treturn_value = select_item[key];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn_value = select_item;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( set_any ) {\n\t\t\t\t\t\t\treturn TTUUID.not_exist_id;\n\t\t\t\t\t\t} else if ( set_empty ) {\n\t\t\t\t\t\t\treturn TTUUID.zero_id;\n\t\t\t\t\t\t} else if ( set_special_empty ) {\n\t\t\t\t\t\t\treturn TTUUID.not_exist_id;\n\t\t\t\t\t\t} else if ( set_open ) {\n\t\t\t\t\t\t\treturn TTUUID.zero_id;\n\t\t\t\t\t\t} else if ( set_default ) {\n\t\t\t\t\t\t\treturn TTUUID.zero_id;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn return_value;\n\t\t};\n\n\t\tthis.setSourceData = function( val ) {\n\t\t\tsource_data = val;\n\n\t\t\tif ( !allow_multiple_selection ) {\n\t\t\t\tif ( val && val.length > 0 ) {\n\t\t\t\t\tif ( set_empty || set_any || set_default || set_open || set_all || set_special_empty ) {\n\t\t\t\t\t\t$this.createFirstItem();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( !select_item ) {\n\t\t\t\t\t\t\t//Related to 1825, directly use item not item id, since use item id willl\n\t\t\t\t\t\t\t// trigger getReal data which case problems and not necessary.\n\t\t\t\t\t\t\tthis.setValue( val[0] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( val && val.length > 0 ) {\n\t\t\t\t\tif ( set_all ) {\n\t\t\t\t\t\t$this.createFirstItem();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( set_select_items_when_set_data_provider && source_data ) {\n\n\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\tthis.setValue( select_items );\n\t\t\t\t} else {\n\t\t\t\t\tthis.setValue( select_item );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.getSourceData = function() {\n\n\t\t\tif ( navigation_mode && navigation_mode_source_data_before_open ) {\n\t\t\t\treturn navigation_mode_source_data_before_open;\n\t\t\t}\n\n\t\t\t//if done search, return the result o\n\t\t\tif ( unselect_grid_search_result ) {\n\t\t\t\treturn unselect_grid_search_result;\n\t\t\t}\n\n\t\t\treturn source_data;\n\t\t};\n\n\t\t//Always return source data only\n\t\tthis.getStaticSourceData = function() {\n\t\t\treturn source_data;\n\t\t};\n\n\t\tthis.getRowPerPage = function() {\n\t\t\treturn row_per_page;\n\t\t};\n\n\t\tthis.setAllColumns = function( value ) {\n\t\t\tall_columns = value;\n\t\t};\n\n\t\tthis.setDisplayColumnsForEditor = function( value ) {\n\t\t\tdisplay_columns_in_columnEditor = value;\n\t\t};\n\n\t\tthis.getAllColumns = function() {\n\n\t\t\tif ( possible_display_columns ) {\n\t\t\t\treturn possible_display_columns;\n\t\t\t}\n\t\t\treturn all_columns;\n\t\t};\n\n\t\tthis.getDisplayColumnsForEditor = function() {\n\t\t\treturn display_columns_in_columnEditor;\n\t\t};\n\n\t\tthis.setEmptyValueAndShowLoading = function() {\n\t\t\tvar current_width = $this.find( '.a-combobox-label' ).width();\n\t\t\tthis.setValue( null );\n\t\t\tlabel_span.text( Global.loading_label );\n\t\t\t$this.find( '.a-combobox-label' ).width( current_width + 'px' );\n\t\t};\n\n\t\tthis.setValue = function( val ) {\n\t\t\t// Related to 1891, one case is value is [null] in vacatuon_psea_ids in ROE edit view\n\t\t\tif ( _.isArray( val ) && val.length === 1 && val[0] === null ) {\n\t\t\t\tval = null;\n\t\t\t}\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tif ( !val || $.type( val ) === 'array' ) {\n\t\t\t\t\tthis.setSelectItems( val );\n\t\t\t\t} else if ( $.type( val ) === 'string' || $.type( val ) === 'number' ) {\n\t\t\t\t\tthis.setSelectItems( [val] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( $.type( val ) === 'array' && val.length > 0 ) {\n\t\t\t\t\tval = val[0];\n\t\t\t\t}\n\t\t\t\t//If no default value set first item as default select item\n\t\t\t\t//#1187 - this fix might cause problems but is needed to allow proper selection of default value when zero_uuid is selected.\n\t\t\t\tif ( !val || val == TTUUID.zero_id ) {\n\t\t\t\t\t// if ( !val ) {\n\t\t\t\t\tif ( !set_empty && !set_any && !set_default && !set_open && !set_all && !set_special_empty && source_data && source_data.length > 0 ) {\n\t\t\t\t\t\tthis.setValue( source_data[0] );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setSelectItem( null );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.setSelectItem( val );\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getAllowMultipleSelection = function() {\n\t\t\treturn allow_multiple_selection;\n\t\t};\n\n\t\t//Get full data from api, if get a id\n\t\tthis.getRealData = function( val ) {\n\n\t\t\tif ( Global.isSet( api_class ) ) {\n\n\t\t\t\t//Try api awesomebox first\n\t\t\t\tif ( ( !TTUUID.isUUID( val ) && parseInt( val ) <= 0 ) || val == TTUUID.zero_id || val == TTUUID.not_exist_id ) {\n\n\t\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\t\t$this.setValue( [this.getLocalSelectItem( val )] );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.setValue( this.getLocalSelectItem( val ) );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar filter = {};\n\t\t\t\t//id is a public member of this class which contains the field id, so we wrapped 'id' in quotes here to show it's not the public member from above.\n\t\t\t\tfilter.filter_data = { 'id': val };\n\n\t\t\t\t//#2289 - If you have an employee who can view subordinate punches but not view subordinate employee, you will see permission denied without sending the permission section.\n\t\t\t\tif ( default_args && Global.isSet( default_args.permission_section ) ) {\n\t\t\t\t\tfilter.permission_section = default_args.permission_section;\n\t\t\t\t}\n\n\t\t\t\tif ( this.customSearchFilter ) {\n\t\t\t\t\tfilter = this.customSearchFilter( filter );\n\t\t\t\t}\n\n\t\t\t\tlabel_span.text( Global.loading_label );\n\n\t\t\t\tapi['get' + custom_key_name]( filter, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\t\tif ( result_data && result_data.length > 0 ) {\n\n\t\t\t\t\t\t\tvar value;\n\t\t\t\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\t\t\t\tvalue = result_data;\n\t\t\t\t\t\t\t\t$this.setValue( result_data );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvalue = result_data[0];\n\t\t\t\t\t\t\t\t$this.setValue( result_data[0] );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( setRealValueCallBack ) {\n\t\t\t\t\t\t\tsetRealValueCallBack( value );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tif ( source_data && source_data.length > 0 ) {\n\t\t\t\t\t$.each( source_data, function( index, content ) {\n\n\t\t\t\t\t\t//Make the id match when val is string or number. use == instead ===.\n\t\t\t\t\t\tif ( content[key] == val ) {\n\n\t\t\t\t\t\t\t$this.setValue( content );\n\t\t\t\t\t\t\treturn false; //This is a boolean false, not an integer or UUID.\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\t\t\t\t\tset_select_items_when_set_data_provider = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getColumnFilter = function() {\n\n\t\t\tif ( always_search_full_columns ) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tvar column_filter = {};\n\t\t\tcolumn_filter.is_owner = true;\n\t\t\tcolumn_filter.id = true;\n\t\t\tcolumn_filter.is_child = true;\n\t\t\tcolumn_filter.user_id = true;\n\t\t\tcolumn_filter.first_name = true; //always contains this if it exists\n\t\t\tcolumn_filter.last_name = true; //always contains this if it exists\n\t\t\tcolumn_filter.object_type_id = true;\n\t\t\tcolumn_filter.manual_id = true;\n\t\t\tcolumn_filter.default_item_id = true;\n\t\t\tcolumn_filter.accrual_policy_id = true;\n\t\t\tcolumn_filter.pay_code_id = true;\n\t\t\tcolumn_filter.start_date = true;\n\t\t\tcolumn_filter.end_date = true;\n\t\t\tcolumn_filter.pay_period_id = true;\n\n\t\t\tif ( api && api.className === 'APIUser' ) {\n\t\t\t\tcolumn_filter.pay_period_schedule_id = true;\n\t\t\t\tcolumn_filter.policy_group_id = true;\n\t\t\t\tcolumn_filter.hire_date = true;\n\t\t\t\tcolumn_filter.termination_date = true;\n\t\t\t}\n\n\t\t\t$.each( display_columns, function( key, item ) {\n\t\t\t\tcolumn_filter[item.name] = true;\n\t\t\t} );\n\n\t\t\tif ( always_include_columns && always_include_columns.length > 0 ) {\n\t\t\t\t$.each( always_include_columns, function( key, item ) {\n\t\t\t\t\tcolumn_filter[item] = true;\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn column_filter;\n\t\t};\n\n\t\tthis.cleanDropDownValues = function() {\n\t\t\tif ( a_dropdown ) {\n\t\t\t\ta_dropdown.setSelectGridData( [] );\n\t\t\t}\n\t\t};\n\n\t\tthis.setSelectItem = function( val ) {\n\t\t\t//When setting select_item, clear out the select_items (plural) variable so it doesn't contain old data if the dropdown box happens to get switched back to it.\n\t\t\tselect_items = null;\n\n\t\t\tselect_item = val;\n\n\t\t\tif ( val === false || val === '' ) {\n\t\t\t\tthis.setLabel( val );\n\t\t\t\tif ( setRealValueCallBack ) {\n\t\t\t\t\tsetRealValueCallBack( false );\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( $.type( val ) === 'string' || $.type( val ) === 'number' ) {\n\t\t\t\tthis.getRealData( val );\n\t\t\t} else {\n\t\t\t\tthis.setLabel();\n\t\t\t}\n\t\t};\n\n\t\tthis.setSelectItems = function( val ) {\n\t\t\t//When setting select_items (plural), clear out the select_item variable so it doesn't contain old data if the dropdown box happens to get switched back to it.\n\t\t\tselect_item = null;\n\n\t\t\tif ( !val || val.length < 1 ) {\n\t\t\t\tthis.setEmptyLabel();\n\t\t\t\tselect_items = null;\n\t\t\t\tif ( setRealValueCallBack ) {\n\t\t\t\t\tsetRealValueCallBack( false );\n\t\t\t\t}\n\n\t\t\t\tthis.cleanDropDownValues();\n\n\t\t\t\treturn;\n\t\t\t} else if ( val == TTUUID.not_exist_id && set_any ) {\n\t\t\t\tselect_items = val;\n\t\t\t\tthis.setEmptyLabel();\n\t\t\t\tif ( setRealValueCallBack ) {\n\t\t\t\t\tsetRealValueCallBack( false );\n\t\t\t\t}\n\t\t\t\tthis.cleanDropDownValues();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tselect_items = val;\n\n\t\t\tvar len = val.length;\n\n\t\t\tif ( len > 1 ) {\n\t\t\t\tvar item = val[0];\n\t\t\t\tif ( $.type( item ) === 'string' || $.type( item ) === 'number' ) {\n\t\t\t\t\tif ( !do_not_get_real_data ) {\n\t\t\t\t\t\tget_real_data_when_open = true;\n\t\t\t\t\t}\n\t\t\t\t\tif ( get_real_data_on_multi && setRealValueCallBack ) {\n\t\t\t\t\t\t//Required to get values for Multi-select field callbacks. Currently, used to retrieve punch tag manual ids.\n\t\t\t\t\t\t//If this is not done, manual ids will only be retrieved in the scenario there is only one item selected in which case this.getRealData() is called.\n\t\t\t\t\t\t//However, adding this.getRealData() here causes other issues.\n\t\t\t\t\t\tsetRealValueCallBack( val, true );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.setLabel();\n\t\t\t} else {\n\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\titem = val[i];\n\t\t\t\t\tif ( $.type( item ) === 'string' ||\n\t\t\t\t\t\t$.type( item ) === 'number' ) {\n\t\t\t\t\t\tif ( !do_not_get_real_data ) {\n\t\t\t\t\t\t\tthis.getRealData( item );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif ( !source_data ) {\n\t\t\t\t\t\t\t\tset_select_items_when_set_data_provider = true;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//set select items\twhich only contains value to select items have label and value\n\t\t\t\t\t\t\tthis.setSelectItems( this.getRealSelectItemsFromSourceData() );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor ( var key in item ) {\n\t\t\t\t\t\t\t//speical handle for sort field\n\t\t\t\t\t\t\tif ( item[key] === 'asc' || item[key] === 'desc' ) {\n\t\t\t\t\t\t\t\tif ( !source_data ) {\n\t\t\t\t\t\t\t\t\tset_select_items_when_set_data_provider = true;\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setLabel();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getSelectItems = function() {\n\t\t\treturn a_dropdown.getSelectItems();\n\t\t}\n\n\t\tthis.getRealSelectItemsFromSourceData = function() {\n\t\t\tvar len = source_data.length;\n\t\t\tvar select_items_len = select_items ? select_items.length : 0; // Fix for JS Exception if select_items is null.\n\t\t\tvar res = [];\n\n\t\t\tfor ( var i = 0; i < select_items_len; i++ ) {\n\t\t\t\tvar select_value = select_items[i];\n\t\t\t\tfor ( var j = 0; j < len; j++ ) {\n\t\t\t\t\tvar source_item = source_data[j];\n\n\t\t\t\t\t//Could be string or number, use ==\n\t\t\t\t\tif ( select_value == source_item[key] ) {\n\t\t\t\t\t\tres.push( source_item );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn res;\n\t\t};\n\n\t\tthis.setLabel = function() {\n\t\t\tvar label_arr = Array();\n\n\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\tif ( !select_items ) {\n\t\t\t\t\tthis.setEmptyLabel();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar len = select_items.length;\n\t\t\t\tif ( len === 1 ) {\n\n\t\t\t\t\tvar display_column_len = display_columns.length;\n\t\t\t\t\tfor ( y = 0; y < display_column_len; y++ ) {\n\n\t\t\t\t\t\tif ( display_columns[y].hidden === true ) { //Hidden field for jGgrid, usually is id\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( layout_name === 'global_sort_columns' && select_items[0][display_columns[y].name] === undefined ) {\n\t\t\t\t\t\t\tvar item = select_items[0];\n\n\t\t\t\t\t\t\tfor ( var key in item ) {\n\t\t\t\t\t\t\t\tvar c_value = key + ' | ' + item[key];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t//When sort field has source data, use proper label shown on the dropdown.\n\t\t\t\t\t\t\tif ( source_data ) {\n\t\t\t\t\t\t\t\tfor ( var i = 0; i < source_data.length; i++ ) {\n\t\t\t\t\t\t\t\t\tvar column = source_data[i];\n\n\t\t\t\t\t\t\t\t\tif ( column.value === key ) {\n\t\t\t\t\t\t\t\t\t\tvar c_value = column.label + ' | ' + item[key];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( c_value !== 0 && c_value == '' ) {\n\t\t\t\t\t\t\t\tc_value = '--';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlabel_arr.push( c_value );\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar c_value = select_items[0][display_columns[y].name];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( c_value !== 0 && c_value == '' ) {\n\t\t\t\t\t\t\tc_value = '--';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( c_value === 0 || c_value ) {\n\t\t\t\t\t\t\tlabel_arr.push( c_value );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( label_arr.length > 0 ) {\n\t\t\t\t\t\tlabel_span.text( label_arr.join( ' | ' ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setEmptyLabel();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlabel_span.text( len + ' ' + $.i18n._( 'items selected' ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Error: Uncaught TypeError: Cannot read property 'length' of null in interface/html5/global/widgets/awesomebox/AComboBox.js?v=9.0.6-20151231-140748 line 902\n\t\t\t\tif ( !select_item || !display_columns ) {\n\t\t\t\t\tthis.setEmptyLabel();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdisplay_column_len = display_columns.length;\n\t\t\t\tfor ( var y = 0; y < display_column_len; y++ ) {\n\t\t\t\t\tif ( display_columns[y].hidden === true ) { //Hidden field for jGgrid, usually is id\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tc_value = select_item[display_columns[y].name];\n\n\t\t\t\t\tif ( c_value !== 0 && c_value == '' ) {\n\t\t\t\t\t\tc_value = '--';\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( c_value === 0 || c_value ) {\n\t\t\t\t\t\tlabel_arr.push( c_value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( label_arr.length > 0 ) {\n\t\t\t\t\tlabel_span.text( label_arr.join( ' | ' ) );\n\t\t\t\t} else {\n\t\t\t\t\tthis.setEmptyLabel();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$this.find( '.a-combobox-label' ).width( 'auto' );\n\t\t};\n\n\t\tthis.setEmptyLabel = function() {\n\t\t\tif ( set_any ) {\n\t\t\t\tlabel_span.text( Global.any_item );\n\t\t\t} else if ( set_empty || set_special_empty ) {\n\t\t\t\tif ( layout_name === 'global_tree_column' ) {\n\t\t\t\t\tlabel_span.text( Global.root_item );\n\t\t\t\t} else {\n\t\t\t\t\tlabel_span.text( Global.empty_item );\n\t\t\t\t}\n\t\t\t} else if ( set_default ) {\n\t\t\t\tlabel_span.text( Global.default_item );\n\t\t\t} else if ( set_open ) {\n\t\t\t\tlabel_span.text( Global.open_item );\n\t\t\t} else {\n\t\t\t\tif ( source_data && source_data.length > 0 ) {\n\t\t\t\t\tvar first_item = source_data[0];\n\n\t\t\t\t\tif ( first_item.hasOwnProperty( 'label' ) ) {\n\t\t\t\t\t\tlabel_span.text( first_item.label );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( custom_first_label ) {\n\t\t\t\tlabel_span.text( custom_first_label );\n\t\t\t}\n\n\t\t};\n\n\t\tthis.onColumnSettingSaveFromLayout = function( layout ) {\n\t\t\tvar filter = {};\n\t\t\tfilter.script = 'global_awesomebox_columns';\n\t\t\tfilter.name = layout_name;\n\t\t\tfilter.is_default = 'false';\n\n\t\t\tfilter.data = layout.data;\n\t\t\tfilter.data.type = 10;\n\t\t\tfilter.data.layout_id = layout.id;\n\n\t\t\tif ( ALayoutCache.layout_dic[layout_name] ) {\n\t\t\t\tfilter.id = ALayoutCache.layout_dic[layout_name].id;\n\t\t\t}\n\n\t\t\tuser_generic_api.setUserGenericData( filter, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tALayoutCache.layout_dic[layout_name] = null;\n\t\t\t\t\t$this.initColumns();\n\t\t\t\t\tsource_data = null; //Reload source data if column changed\n\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\tthis.onColumnSettingSave = function( seletedColumns, rowsPerPageNumber, layout_id, filter_data ) {\n\n\t\t\tvar filter = {};\n\t\t\tfilter.script = 'global_awesomebox_columns';\n\t\t\tfilter.name = layout_name;\n\t\t\tfilter.is_default = 'false';\n\t\t\tfilter.type = 1; //ALayoutType.customize\n\n\t\t\tif ( ALayoutCache.layout_dic[layout_name] ) {\n\t\t\t\tfilter.id = ALayoutCache.layout_dic[layout_name].id;\n\t\t\t}\n\n\t\t\tvar select_columns_in_JSON = [];\n\t\t\tvar len = seletedColumns.length;\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar column_in_JSON = {\n\t\t\t\t\tlabel: seletedColumns[i].label,\n\t\t\t\t\tvalue: seletedColumns[i].value,\n\t\t\t\t\torderValue: seletedColumns[i].orderValue\n\t\t\t\t};\n\t\t\t\tselect_columns_in_JSON.push( column_in_JSON );\n\t\t\t}\n\n\t\t\tfilter.data = {\n\t\t\t\tdisplay_columns: select_columns_in_JSON,\n\t\t\t\trow_per_page: rowsPerPageNumber,\n\t\t\t\tlayout_id: layout_id,\n\t\t\t\tfilter_data: filter_data\n\t\t\t};\n\n\t\t\t//Error: TypeError: user_generic_api is null in /interface/html5/global/widgets/awesomebox/AComboBox.js?v=9.0.0-20150822-090205 line 987\n\t\t\tif ( !user_generic_api ) {\n\t\t\t\tuser_generic_api = TTAPI.APIUserGenericData;\n\t\t\t}\n\t\t\tuser_generic_api.setUserGenericData( filter, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tALayoutCache.layout_dic[layout_name] = null;\n\n\t\t\t\t\t$this.initColumns();\n\n\t\t\t\t\tsource_data = null; //Reload source data if column changed\n\n\t\t\t\t\t//Reload real data if columns have changed, so they display data for any new columns\n\t\t\t\t\t// We can't just pass in the selected_items verbatim here, we need to parse off the 'id' fields and pass that in as an array instead.\n\t\t\t\t\tif ( $.type( select_items ) === 'array' ) {\n\t\t\t\t\t\tselect_items = select_items.map( function( obj ) {\n\t\t\t\t\t\t\tif ( obj.hasOwnProperty( 'id' ) ) {\n\t\t\t\t\t\t\t\treturn obj['id'];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\t//Don't try to load data from the API if there is no filter criteria, as everything is likely be returned and therefore will be selected.\n\t\t\t\t\t// This would manifest itself by expanding a dropdown without anything selected in it, then changing the columns.\n\t\t\t\t\tif ( select_items ) {\n\t\t\t\t\t\t$this.getRealData( select_items );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t};\n\n\t\t//Set columns, display columns will be used when open AwesomeBox. If no layout saved. Display columns are the default ones set in this.each\n\t\tthis.initColumns = function() {\n\n\t\t\tuser_generic_api = TTAPI.APIUserGenericData;\n\n\t\t\t//Error: TypeError: 'undefined' is not a function (evaluating 'user_generic_api.getUserGenericData') in /interface/html5/global/widgets/awesomebox/AComboBox.js?v=8.0.0-20141117-095711 line 1044\n\t\t\tif ( !user_generic_api || !user_generic_api.getUserGenericData || typeof ( user_generic_api.getUserGenericData ) !== 'function' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( Global.isSet( ALayoutCache.layout_dic[layout_name] ) ) {\n\t\t\t\tif ( ALayoutCache.layout_dic[layout_name].pending ) {\n\t\t\t\t\tTTPromise.add( 'AComboBox', layout_name );\n\t\t\t\t\tTTPromise.wait( 'AComboBox', layout_name, function() {\n\t\t\t\t\t\tinitColumnsFromCache( layout_name );\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tinitColumnsFromCache( layout_name );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//Set cache to pending to stop multiple calls to the API for the same layout_name.\n\t\t\t\tALayoutCache.layout_dic[layout_name] = { pending: true };\n\t\t\t\tvar filter = {};\n\t\t\t\tfilter.filter_data = { script: 'global_awesomebox_columns', name: layout_name };\n\t\t\t\tuser_generic_api.getUserGenericData( filter, {\n\t\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\t\tvar resData = res.getResult();\n\t\t\t\t\t\t//Set this here so Column setting dialog can get correct display columns before open Awesomebox\n\t\t\t\t\t\tif ( resData && resData.length > 0 ) {\n\n\t\t\t\t\t\t\tvar data = resData[0].data;\n\n\t\t\t\t\t\t\t//if saved layout is saved view layout. get it\n\t\t\t\t\t\t\tif ( data.type === 10 ) {\n\n\t\t\t\t\t\t\t\tvar columns_result_data = api.getOptions( column_option_key, { async: false } ).getResult();\n\t\t\t\t\t\t\t\tall_columns = Global.buildColumnArray( columns_result_data );\n\n\t\t\t\t\t\t\t\tvar saved_layout_result = user_generic_api.getUserGenericData( {\n\t\t\t\t\t\t\t\t\tfilter_data: {\n\t\t\t\t\t\t\t\t\t\tid: data.layout_id,\n\t\t\t\t\t\t\t\t\t\tdeleted: false\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, { async: false } ).getResult();\n\n\t\t\t\t\t\t\t\tif ( saved_layout_result && saved_layout_result.length > 0 ) {\n\t\t\t\t\t\t\t\t\tvar saved_layout = saved_layout_result.slice()[0];\n\t\t\t\t\t\t\t\t\tvar new_data = saved_layout.data;\n\t\t\t\t\t\t\t\t\tnew_data.display_columns = $this.buildDisplayColumns( new_data.display_columns );\n\t\t\t\t\t\t\t\t\tnew_data.filter_data = Global.convertLayoutFilterToAPIFilter( saved_layout );\n\t\t\t\t\t\t\t\t\tresData[0].data.display_columns = new_data.display_columns;\n\t\t\t\t\t\t\t\t\tresData[0].data.filter_data = new_data.filter_data;\n\n\t\t\t\t\t\t\t\t\tdata = resData[0].data;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdata.filter_data = []; // if saved layou is deleted.\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tALayoutCache.layout_dic[layout_name] = resData[0];\n\n\t\t\t\t\t\t\tALayoutCache.layout_dic[$this.getScriptName()] = layout_name; // bind current view name to layout name;\n\n\t\t\t\t\t\t\tif ( Global.isSet( data.type ) && data.type === 10 ) {\n\n\t\t\t\t\t\t\t\tdisplay_columns = data.display_columns;\n\t\t\t\t\t\t\t\tif ( display_columns.length > 0 ) {\n\t\t\t\t\t\t\t\t\tif ( possible_display_columns ) {\n\t\t\t\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} else if ( list_view_default_columns ) {\n\t\t\t\t\t\t\t\t\tdisplay_columns = list_view_default_columns;\n\t\t\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\targs_from_saved_layout = {};\n\t\t\t\t\t\t\t\targs_from_saved_layout.filter_data = data.filter_data;\n\t\t\t\t\t\t\t\targs_from_saved_layout.filter_sort = data.filter_sort;\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tdisplay_columns = data.display_columns;\n\n\t\t\t\t\t\t\t\t//Happen when save no columns in column setting for navigation mode\n\t\t\t\t\t\t\t\tif ( display_columns.length > 0 ) {\n\t\t\t\t\t\t\t\t\tif ( possible_display_columns ) {\n\t\t\t\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} else if ( list_view_default_columns ) {\n\t\t\t\t\t\t\t\t\tdisplay_columns = list_view_default_columns;\n\t\t\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\trow_per_page = data.row_per_page;\n\t\t\t\t\t\t\t\targs_from_saved_layout = null;\n//\t\t\t\t\t\t\tif ( !navigation_mode && !set_default_args_manually ) {\n//\t\t\t\t\t\t\t\tdefault_args = null;\n//\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//If set possible columns, use it\n\t\t\t\t\t\t\tif ( list_view_default_columns ) {\n\t\t\t\t\t\t\t\tdisplay_columns = list_view_default_columns;\n\t\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tALayoutCache.layout_dic[layout_name] = false;\n\t\t\t\t\t\t\trow_per_page = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( init_data_immediately ) {\n\t\t\t\t\t\t\t$this.initSourceData();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', layout_name );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar initColumnsFromCache = function( layout_name ) {\n\t\t\t//Set this here so Column setting dialog can get correct display columns before open Awesomebox\n\t\t\tif ( Global.isSet( ALayoutCache.layout_dic[layout_name].data ) ) {\n\n\t\t\t\tvar data = ALayoutCache.layout_dic[layout_name].data;\n\n\t\t\t\tif ( Global.isSet( data.type ) && data.type === 10 ) {\n\t\t\t\t\tdisplay_columns = data.display_columns;\n\n\t\t\t\t\tif ( display_columns.length > 0 ) {\n\t\t\t\t\t\tif ( possible_display_columns ) {\n\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else if ( list_view_default_columns ) {\n\t\t\t\t\t\tdisplay_columns = list_view_default_columns;\n\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\targs_from_saved_layout = {};\n\t\t\t\t\targs_from_saved_layout.filter_data = data.filter_data;\n\t\t\t\t\targs_from_saved_layout.filter_sort = data.filter_sort;\n\n\t\t\t\t} else {\n\t\t\t\t\tdisplay_columns = data.display_columns;\n\n\t\t\t\t\tif ( display_columns.length > 0 ) {\n\t\t\t\t\t\tif ( possible_display_columns ) {\n\t\t\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else if ( possible_display_columns ) {\n\t\t\t\t\t\tdisplay_columns = possible_display_columns;\n\t\t\t\t\t}\n\t\t\t\t\trow_per_page = data.row_per_page;\n\t\t\t\t\tif ( !navigation_mode && !set_default_args_manually ) {\n\t\t\t\t\t\tdefault_args = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tif ( list_view_default_columns ) {\n\t\t\t\t\tdisplay_columns = list_view_default_columns;\n\t\t\t\t\tdisplay_columns = filterBaseOnPossibleColumns( display_columns );\n\t\t\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name, function( width ) {\n\t\t\t\t\t\ttotal_header_width = width;\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\trow_per_page = 0;\n\t\t\t}\n\t\t\tif ( init_data_immediately ) {\n\t\t\t\t$this.initSourceData();\n\t\t\t}\n\t\t}\n\n\t\tvar filterBaseOnPossibleColumns = function( display_columns ) {\n\n\t\t\t//Error: Unable to get property 'length' of undefined or null reference in /interface/html5/global/widgets/awesomebox/AComboBox.js?v=8.0.0-20141230-125406 line 1169\n\t\t\tif ( !possible_display_columns ) {\n\t\t\t\treturn display_columns;\n\t\t\t}\n\n\t\t\tvar len = possible_display_columns.length;\n\n\t\t\tvar result = [];\n\t\t\tfor ( var j = 0; j < display_columns.length; j++ ) {\n\t\t\t\tvar dis_column = display_columns[j];\n\t\t\t\tvar found = false;\n\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\tvar column = possible_display_columns[i];\n\t\t\t\t\tif ( column.value === dis_column.value ) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( found ) {\n\t\t\t\t\tresult.push( dis_column );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( result.length === 0 ) {\n\t\t\t\tresult = possible_display_columns;\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t};\n\n\t\tthis.getId = function() {\n\t\t\treturn id;\n\t\t};\n\n\t\t//update source data to new saved item, happens in timesheet view, edit employee\n\t\tthis.updateSelectItem = function( new_item ) {\n\t\t\tselect_item = new_item;\n\t\t\tif ( source_data ) {\n\n\t\t\t\tfor ( var i = 0; i < source_data.length; i++ ) {\n\t\t\t\t\tvar content = source_data[i];\n\t\t\t\t\tif ( content && new_item && content.id === new_item.id ) {\n\t\t\t\t\t\tsource_data[i] = new_item;\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getADropDown = function() {\n\t\t\treturn a_dropdown_div;\n\t\t};\n\n\t\tthis.onClose = function( e, target ) {\n\t\t\tif ( a_dropdown == undefined ) {\n\t\t\t\tDebug.Text( 'ERROR: Unable to close AComboBox check to make sure it wasn\\'t instantiated twice.', 'ACombobox.js', 'ACombobox', 'onClose', 10 );\n\t\t\t}\n\n\t\t\t//In the case where a user double clicks a drop-down box to expand it, that can cause it to open the close again immediately, and show a \"-- NONE --\" even though something was previously selected.\n\t\t\t//  Therefore if the 'init' promise is still pending because the data is still loading, simply don't close it yet.\n\t\t\tvar pending_promise = TTPromise.isPendingPromises( 'AComboBox', 'init' );\n\t\t\tif ( pending_promise == false ) {\n\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\t//Re load source_data if select items\n\t\t\t\t\tvar select_items = a_dropdown.getSelectItems();\n\t\t\t\t\t$this.setValue( select_items );\n\t\t\t\t} else {\n\t\t\t\t\tvar select_item = a_dropdown.getSelectItem();\n\t\t\t\t\tif ( select_item ) { // #2593 - null is not an object (evaluating 'select_item._id_')\n\t\t\t\t\t\tif ( !tree_mode ) {\n\t\t\t\t\t\t\t$this.setValue( select_item );\n\t\t\t\t\t\t} else if ( select_item._id_ ) {\n\t\t\t\t\t\t\t$this.setValue( select_item._id_ );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tDebug.Text( 'WARNING: AComboBox::Init promise still pending, cant call setValue()...', 'ACombobox.js', 'ACombobox', 'onClose', 10 );\n\t\t\t}\n\n\t\t\ta_dropdown_div.remove();\n\t\t\tis_mouse_over = false; //When close from esc, this maybe true\n\t\t\tLocalCacheData.openAwesomeBox = null;\n\t\t\tif ( a_dropdown.isChanged() || layout_name === 'global_sort_columns' ) {\n\t\t\t\tif ( check_box ) {\n\t\t\t\t\t$this.setCheckBox( true );\n\t\t\t\t}\n\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t}\n\t\t\t$this.trigger( 'onClose', [$this] );\n\t\t\tdontOpen = true;\n\t\t\tdontOpenTimer = setTimeout( function() {\n\t\t\t\tdontOpen = false;\n\t\t\t}, 200 );\n\t\t\t$this.find( '.focus-input' ).focus();\n\t\t};\n\n\t\t//set next or last item when key down, call from main.js\n\t\tthis.selectNextItem = function( e ) {\n\n\t\t\tvar select_index = this.getSelectIndex();\n\t\t\tvar next_index;\n\t\t\tvar target_grid;\n\t\t\tif ( e.keyCode === 40 ) { //Down\n\t\t\t\te.preventDefault();\n\t\t\t\tif ( !allow_multiple_selection ) {\n\t\t\t\t\tif ( select_index === 0 ) {\n\t\t\t\t\t\tnext_index = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnext_index = select_index + 1;\n\t\t\t\t\t}\n\t\t\t\t\tvar next_select_item = this.getItemByIndex( next_index );\n\n\t\t\t\t\tif ( !next_select_item ) {\n\t\t\t\t\t\tnext_index = next_index - 1;\n\t\t\t\t\t\tnext_select_item = this.getItemByIndex( next_index );\n\t\t\t\t\t}\n\t\t\t\t\tselect_item = next_select_item;\n\t\t\t\t\ta_dropdown.setSelectItem( next_select_item );\n\t\t\t\t\ta_dropdown.setIsChanged( true );\n\t\t\t\t}\n\t\t\t} else if ( e.keyCode === 38 ) { //Up\n\t\t\t\te.preventDefault();\n\t\t\t\tif ( !allow_multiple_selection ) {\n\t\t\t\t\tif ( select_index === 0 ) {\n\t\t\t\t\t\tnext_index = 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnext_index = select_index - 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tnext_select_item = this.getItemByIndex( next_index );\n\t\t\t\t\tselect_item = next_select_item;\n\t\t\t\t\ta_dropdown.setSelectItem( next_select_item );\n\t\t\t\t\ta_dropdown.setIsChanged( true );\n\t\t\t\t}\n\t\t\t} else if ( e.keyCode === 39 ) { //right\n\t\t\t\tif ( allow_multiple_selection && !$( e.target ).hasClass( 'search-input' ) ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\ta_dropdown.onUnSelectGridDoubleClick();\n\t\t\t\t\ta_dropdown.setIsChanged( true );\n\t\t\t\t}\n\t\t\t} else if ( e.keyCode === 37 ) { //left\n\t\t\t\tif ( allow_multiple_selection && !$( e.target ).hasClass( 'search-input' ) ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\ta_dropdown.onSelectGridDoubleClick();\n\t\t\t\t\ta_dropdown.setIsChanged( true );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( quick_search_timer ) {\n\t\t\t\t\tclearTimeout( quick_search_timer );\n\t\t\t\t}\n\t\t\t\tvar focus_target = $( ':focus' );\n\t\t\t\tif ( focus_target.length > 0 && $( focus_target[0] ).hasClass( 'search-input' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tquick_search_timer = setTimeout( function() {\n\t\t\t\t\tquick_search_typed_keys = '';\n\t\t\t\t}, 750 );\n\t\t\t\te.preventDefault();\n\n\t\t\t\tquick_search_typed_keys = quick_search_typed_keys + String.fromCharCode( e.which ).toLowerCase();\n\t\t\t\tDebug.Text( 'Quick search typed keys: ' + quick_search_typed_keys, 'AComboBox.js', 'AComboBox', 'selectNextItem', 10 );\n\t\t\t\tvar trimmed_quick_search_typed_keys = quick_search_typed_keys.trim();\n\n\t\t\t\tif ( allow_multiple_selection || tree_mode ) {\n\t\t\t\t\tif ( trimmed_quick_search_typed_keys ) {\n\t\t\t\t\t\ttarget_grid = a_dropdown.getFocusInSeletGrid() ? a_dropdown.getSelectGrid() : a_dropdown.getUnSelectGrid();\n\n\t\t\t\t\t\tvar search_index = quick_search_dic[trimmed_quick_search_typed_keys] ? quick_search_dic[trimmed_quick_search_typed_keys] : 0;\n\t\t\t\t\t\tvar tds = $( target_grid.grid.find( 'tr' ).find( 'td:eq(1)' ).filter( function() {\n\t\t\t\t\t\t\treturn $.text( [this] ).toLowerCase().indexOf( trimmed_quick_search_typed_keys ) == 0;\n\t\t\t\t\t\t} ) );\n\t\t\t\t\t\tvar td;\n\t\t\t\t\t\tif ( search_index > 0 && search_index < tds.length ) {\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsearch_index = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttd = $( tds[search_index] );\n\t\t\t\t\t\ta_dropdown.unSelectAll( target_grid.grid, true );\n\t\t\t\t\t\t//next_index = td.parent().index() - 1;\n\n\t\t\t\t\t\tvar next_select_item = false;\n\t\t\t\t\t\tvar grid_data = target_grid.getData();\n\t\t\t\t\t\tfor ( var z = 0; z < grid_data.length; z++ ) {\n\t\t\t\t\t\t\tif ( grid_data[z].id == td.parents( 'tr' ).attr( 'id' ) ) {\n\t\t\t\t\t\t\t\tnext_select_item = grid_data[z];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tselect_item = next_select_item;\n\n\t\t\t\t\t\ta_dropdown.setSelectItem( next_select_item, target_grid );\n\t\t\t\t\t\ta_dropdown.setIsChanged( true );\n\t\t\t\t\t\tquick_search_dic = {};\n\t\t\t\t\t\tquick_search_dic[trimmed_quick_search_typed_keys] = search_index + 1;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( trimmed_quick_search_typed_keys ) {\n\t\t\t\t\t\tsearch_index = quick_search_dic[trimmed_quick_search_typed_keys] ? quick_search_dic[trimmed_quick_search_typed_keys] : 0;\n\t\t\t\t\t\ttds = $( a_dropdown.getUnSelectGrid().grid.find( 'tr' ).find( 'td:first' ).filter( function() {\n\t\t\t\t\t\t\treturn $.text( [this] ).toLowerCase().indexOf( trimmed_quick_search_typed_keys ) == 0;\n\t\t\t\t\t\t} ) );\n\t\t\t\t\t\tif ( search_index > 0 && search_index < tds.length ) {\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsearch_index = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttd = $( tds[search_index] );\n\t\t\t\t\t\tnext_index = td.parent().index() - 1;\n\t\t\t\t\t\tnext_select_item = this.getItemByIndex( next_index );\n\t\t\t\t\t\tselect_item = next_select_item;\n\t\t\t\t\t\ta_dropdown.setSelectItem( next_select_item );\n\t\t\t\t\t\tquick_search_dic = {};\n\t\t\t\t\t\tquick_search_dic[trimmed_quick_search_typed_keys] = search_index + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.gridScrollTop = function() {\n\n\t\t\tif ( !a_dropdown ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ta_dropdown.gridScrollTop();\n\t\t};\n\n\t\tthis.gridScrollDown = function() {\n\n\t\t\tif ( !a_dropdown ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ta_dropdown.gridScrollDown();\n\t\t};\n\n\t\tthis.selectAll = function() {\n\t\t\tif ( !a_dropdown || tree_mode || !allow_multiple_selection ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ta_dropdown.selectAll();\n\n\t\t};\n\n\t\tthis.getIsMouseOver = function() {\n\t\t\treturn is_mouse_over;\n\t\t};\n\n\t\tthis.onShowAll = function( isShowAll ) {\n\t\t\tshow_all = isShowAll;\n\n\t\t\tvar args = this.buildUnSelectGridFilter();\n\t\t\targs = this.addExcludeIDsToFilter( args, a_dropdown.getSelectItems() );\n\n\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\tonResult: function( result ) {\n\n\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tpager_data = result.getPagerData();\n\t\t\t\t\tsource_data = result_data;\n\n\t\t\t\t\tif ( Global.isSet( api ) ) {\n\t\t\t\t\t\tsource_data = Global.formatGridData( source_data, api.key_name );\n\t\t\t\t\t}\n\n\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\t\t\t\t\t//a_dropdown.setSelectGridData( a_dropdown.getSelectItems() );\n\t\t\t\t\ta_dropdown.setPagerData( pager_data );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\tthis.buildUnSelectGridFilter = function( exclude_ids = null ) {\n\t\t\tvar args = {};\n\t\t\targs.filter_data = {};\n\t\t\targs.filter_columns = $this.getColumnFilter();\n\t\t\targs.filter_items_per_page = row_per_page;\n\n\t\t\tif ( a_dropdown ) {\n\t\t\t\t//use clone so the view search condition not be set when set default args\n\t\t\t\targs.filter_data = Global.clone( a_dropdown.getUnSelectGridMap() );\n\t\t\t\targs.filter_sort = Global.clone( a_dropdown.getUnSelectGridSortMap() );\n\t\t\t}\n\n\t\t\tif ( args_from_saved_layout ) {\n\t\t\t\tif ( Global.isSet( args_from_saved_layout.filter_data ) ) {\n\t\t\t\t\tfor ( var key in args_from_saved_layout.filter_data ) {\n\t\t\t\t\t\tif ( !args.filter_data.hasOwnProperty( key ) ) {\n\t\t\t\t\t\t\targs.filter_data[key] = args_from_saved_layout.filter_data[key];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( args_from_saved_layout && Global.isSet( args_from_saved_layout.permission_section ) ) {\n\t\t\t\t\targs.permission_section = args_from_saved_layout.permission_section;\n\t\t\t\t}\n\n\t\t\t\t//Do not override sort condition\n\t\t\t\tif ( Global.isSet( args_from_saved_layout.filter_sort ) && !args.filter_sort ) {\n\n\t\t\t\t\targs.filter_sort = args_from_saved_layout.filter_sort;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//default_args is set when navigation mode usually. To keep search filter same as list view grid\n\t\t\t//. In BaseController, setEditViewData function\n\t\t\tif ( default_args ) {\n\n\t\t\t\tif ( Global.isSet( default_args.filter_data ) ) {\n\t\t\t\t\tfor ( var key in default_args.filter_data ) {\n\t\t\t\t\t\tif ( !args.filter_data.hasOwnProperty( key ) ) {\n\t\t\t\t\t\t\targs.filter_data[key] = default_args.filter_data[key];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( default_args && Global.isSet( default_args.permission_section ) ) {\n\t\t\t\t\targs.permission_section = default_args.permission_section;\n\t\t\t\t}\n\n\t\t\t\t//Do not override sort condition\n\t\t\t\tif ( Global.isSet( default_args.filter_sort ) && !args.filter_sort ) {\n\n\t\t\t\t\targs.filter_sort = default_args.filter_sort;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//If it has additional search condition from outside viewcontroller\n\t\t\tif ( this.customSearchFilter ) {\n\t\t\t\targs = this.customSearchFilter( args );\n\t\t\t}\n\n\t\t\tif ( show_all ) {\n\t\t\t\targs.second_parameter = true;\n\t\t\t}\n\n\t\t\t// When using ACombo, at this point a_dropdown.getSelectItems() might be empty, but $this.getValue()/select_items has the selected IDs instead. They are in a different format though.\n\t\t\t//   This is also required in cases where an employee has 50 items, 48 are already selected, and pagination is set to 5 items per row.\n\t\t\t//     Then on the unselected side click to sort by \"Last Name\" a couple times. These exclude_ids must be passed to the API so no matter what all the unselected rows are always returned, just in the proper sort order.\n\t\t\tif ( exclude_ids ) {\n\t\t\t\targs = this.addExcludeIDsToFilter( args, exclude_ids );\n\t\t\t}\n\n\t\t\treturn args;\n\t\t};\n\n\t\tthis.addExcludeIDsToFilter = function( args, exclude_ids ) {\n\t\t\tif ( a_dropdown && args && exclude_ids ) { //#2353 - js exception when a_dropdown is not defined yet\n\t\t\t\tvar selected_ids = exclude_ids;\n\t\t\t\tif ( selected_ids && Global.isArray( selected_ids ) && selected_ids.length > 0 && selected_ids[0] != TTUUID.zero_id ) {\n\t\t\t\t\targs.filter_data.exclude_id = [];\n\t\t\t\t\tfor ( var x in selected_ids ) {\n\t\t\t\t\t\t// Issue #2899 - Selected items can either be an array of IDs or an object. Need to account for either situation.\n\t\t\t\t\t\tif ( selected_ids[x] && selected_ids[x].id ) {\n\t\t\t\t\t\t\targs.filter_data.exclude_id.push( selected_ids[x].id );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\targs.filter_data.exclude_id.push( selected_ids[x] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn args;\n\t\t}\n\n\t\tthis.buildSelectGridFilter = function() {\n\t\t\tvar args = {};\n\t\t\targs.filter_columns = $this.getColumnFilter();\n\t\t\targs.filter_items_per_page = row_per_page;\n\t\t\targs.filter_data = a_dropdown.getSelectGridMap();\n\t\t\targs.filter_sort = a_dropdown.getSelectGridSortMap();\n\t\t\targs.second_parameter = true; //Always set true because we want alwasy set all data out in select grid\n\n\t\t\treturn args;\n\t\t};\n\n\t\tthis.searchIsEmpty = function( a_dropdown ) {\n\t\t\tvar inputs = a_dropdown.find( 'input.search-input' );\n\t\t\tfor ( var i = 0; i < inputs.length; i++ ) {\n\t\t\t\tif ( $( inputs[i] ).val() != $.i18n._( 'click to search' ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\n\t\tthis.onADropDownSearch = function( targetName, page_action, default_select_item, callBack, trigger_form_item_change = true ) {\n\t\t\tvar this_val = this.getValue();\n\t\t\tif ( targetName == 'select_grid' && this_val.length == 0 || ( targetName == 'select_grid' && this_val.length == 1 && this_val[0] == TTUUID.not_exist_id ) ) {\n\t\t\t\t//#2353 - prevent bug where sorted empty select grid selects everything\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar args = {};\n\t\t\targs.filter_columns = $this.getColumnFilter();\n\t\t\targs.filter_items_per_page = row_per_page;\n\t\t\tif ( targetName === 'unselect_grid' ) {\n\t\t\t\t//When using pagination and first opening the dropdown box, we need to exclude the selected items from the API call\n\t\t\t\t// so the first page will always be populated with a full page of records.\n\t\t\t\targs = $this.buildUnSelectGridFilter( ( ( a_dropdown ) ? a_dropdown.getSelectItems() : null ) ); //Handle JS exception: Error: Cannot read property 'getSelectItems' of null\n\n\t\t\t\t//Error: Unable to get property 'current_page' of undefined or null reference in /interface/html5/global/widgets/awesomebox/AComboBox.js?v=7.4.6-20141027-070003 line 1489\n\t\t\t\tif ( a_dropdown && a_dropdown.getPagerData() ) {\n\t\t\t\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\t\t\t\tif ( page_action === 'next' ) {\n\t\t\t\t\t\t\targs.filter_page = a_dropdown.getPagerData()?.next_page;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\targs.filter_page = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tswitch ( page_action ) {\n\t\t\t\t\t\t\tcase 'next':\n\t\t\t\t\t\t\t\targs.filter_page = a_dropdown.getPagerData()?.next_page;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'last':\n\t\t\t\t\t\t\t\targs.filter_page = a_dropdown.getPagerData()?.previous_page;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'start':\n\t\t\t\t\t\t\t\targs.filter_page = 1;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\t\targs.filter_page = a_dropdown.getPagerData()?.last_page_number;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\targs.filter_page = a_dropdown.getPagerData()?.current_page;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( parseInt( page_action ) >= 1 ) {\n\t\t\t\t\targs.filter_page = page_action;\n\t\t\t\t}\n\n\t\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\t\tonResult: function( result ) {\n\n\t\t\t\t\t\tvar focused_element = $( ':focus' );\n\n\t\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//set this outside, to add more data to source_data\n\t\t\t\t\t\tif ( addition_source_function ) {\n\t\t\t\t\t\t\tresult_data = addition_source_function( $this, result_data );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( LocalCacheData.paging_type === 0 && page_action === 'next' ) {\n\t\t\t\t\t\t\tvar current_data = a_dropdown.getUnSelectGridData();\n\t\t\t\t\t\t\tresult_data = current_data.concat( result_data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( navigation_mode ) {\n\t\t\t\t\t\t\tsource_data = result_data;\n\t\t\t\t\t\t\tpager_data = result.getPagerData();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tunselect_grid_search_result = result_data;\n\t\t\t\t\t\t\tcurrent_open_page = result.getPagerData().current_page;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( $.type( result_data ) != 'array' ) {\n\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( !allow_multiple_selection ) {\n\t\t\t\t\t\t\t$this.createFirstItem( result_data );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresult_data = Global.formatGridData( result_data, api.key_name );\n\n\t\t\t\t\t\tif ( extendDataProcessWhenSearch ) {\n\t\t\t\t\t\t\tresult_data = extendDataProcessWhenSearch( result_data );\n\t\t\t\t\t\t}\n\t\t\t\t\t\ta_dropdown && a_dropdown.setUnselectedGridData( result_data );\n\n\t\t\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\t\t\ta_dropdown && a_dropdown.setSelectGridData( a_dropdown.getSelectItems(), true );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ta_dropdown && a_dropdown.setSelectItem( a_dropdown.getSelectItem() );\n\t\t\t\t\t\t\t$this.highlightSelectItem();\n\t\t\t\t\t\t\tif ( default_select_item == 'first' ) {\n\t\t\t\t\t\t\t\t$this.setValue( result_data[0] );\n\t\t\t\t\t\t\t\tif ( trigger_form_item_change == true ) {\n\t\t\t\t\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( callBack ) {\n\t\t\t\t\t\t\t\t\tcallBack( result_data[0] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( default_select_item == 'last' ) {\n\t\t\t\t\t\t\t\t$this.setValue( result_data[result_data.length - 1] );\n\t\t\t\t\t\t\t\tif ( trigger_form_item_change == true ) {\n\t\t\t\t\t\t\t\t\t$this.trigger( 'formItemChange', [$this] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( callBack ) {\n\t\t\t\t\t\t\t\t\tcallBack( result_data[result_data.length - 1] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( callBack ) {\n\t\t\t\t\t\t\t\tcallBack();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ta_dropdown && a_dropdown.setPagerData( result.getPagerData() );\n\n\t\t\t\t\t\tif ( result_data.length < 1 && a_dropdown.getSelectItems().length < 1 ) {\n\t\t\t\t\t\t\ta_dropdown && a_dropdown.showNoResultCover( 'unselect_grid' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ta_dropdown && a_dropdown.removeNoResultCover( 'unselect_grid' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ta_dropdown && a_dropdown.getUnSelectGrid().grid.show();\n\n\t\t\t\t\t\tif ( focused_element.length ) {\n\t\t\t\t\t\t\tfocused_element.focus();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t} else {\n\t\t\t\targs = this.buildSelectGridFilter();\n\t\t\t\tif ( args.filter_data.id && args.filter_data.id !== false ) { //prevent returning all available rows when nothing is selected\n\t\t\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\t\t\tvar focused_element = $( ':focus' );\n\n\t\t\t\t\t\t\tif ( $.type( result_data ) != 'array' ) {\n\t\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresult_data = Global.formatGridData( result_data, api.key_name );\n\n\t\t\t\t\t\t\ta_dropdown.setSelectGridSearchResult( result_data ); //set as search result\n\n\t\t\t\t\t\t\tif ( result_data.length < 1 ) {\n\t\t\t\t\t\t\t\ta_dropdown.getSelectGrid().grid.clearGridData();\n\t\t\t\t\t\t\t\ta_dropdown.showNoResultCover( 'select_grid' );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ta_dropdown.removeNoResultCover( 'select_grid' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ta_dropdown.setSelectGridDragAble();\n\n\t\t\t\t\t\t\ta_dropdown.getSelectGrid().grid.show();\n\n\t\t\t\t\t\t\tif ( focused_element.length > 0 ) {\n\t\t\t\t\t\t\t\tfocused_element.focus();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\tthis.buildDisplayColumns = function( api_display_columns ) {\n\t\t\tvar len = all_columns.length;\n\t\t\tvar len1 = api_display_columns.length;\n\t\t\tvar display_columns = [];\n\n\t\t\tfor ( var j = 0; j < len1; j++ ) {\n\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( api_display_columns[j] === all_columns[i].value ) {\n\t\t\t\t\t\tdisplay_columns.push( all_columns[i] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn display_columns;\n\t\t};\n\n\t\tthis.buildDisplayColumnsForEditor = function() {\n\t\t\tvar len = all_columns.length;\n\t\t\tvar len1 = display_columns.length;\n\t\t\tvar result_display_columns = [];\n\t\t\tfor ( var j = 0; j < len1; j++ ) {\n\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( !display_columns[j] ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif ( Global.isSet( display_columns[j].name ) ) { //jQgrid column format\n\t\t\t\t\t\tvar name = display_columns[j].name;\n\t\t\t\t\t} else if ( Global.isSet( display_columns[j].value ) ) {  //ViewColumn format,\tlabel and value\n\t\t\t\t\t\tname = display_columns[j].value;\n\t\t\t\t\t}\n\t\t\t\t\tif ( name === all_columns[i].value ) {\n\t\t\t\t\t\tresult_display_columns.push( all_columns[i] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result_display_columns;\n\n\t\t};\n\n\t\tthis.getLocalSelectItem = function( val ) {\n\n\t\t\tif ( added_items ) {\n\t\t\t\tfor ( var i = 0; i < added_items.length; i++ ) {\n\t\t\t\t\tif ( val == added_items[i].value ) { //sometime the value is not number\n\t\t\t\t\t\tvar item = {};\n\n\t\t\t\t\t\titem[key] = val;\n\n\t\t\t\t\t\t$.each( display_columns, function( index, content ) {\n\n\t\t\t\t\t\t\titem[content.name] = added_items[i].label;\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this.getFirstItem();\n\t\t\t} else {\n\t\t\t\treturn this.getFirstItem();\n\t\t\t}\n\t\t};\n\n\t\tthis.getFirstItem = function() {\n\t\t\tvar first_item = {};\n\n\t\t\tfirst_item[key] = TTUUID.zero_id;\n\n\t\t\tif ( set_any || set_all ) {\n\t\t\t\tfirst_item[key] = TTUUID.not_exist_id;\n\t\t\t} else {\n\t\t\t\tfirst_item[key] = TTUUID.zero_id;\n\t\t\t}\n\n\t\t\t$.each( display_columns, function( index, content ) {\n\n\t\t\t\tif ( key !== 'id' ) {\n\t\t\t\t\t//first_item.id = 999; //records id start from 10000\n\t\t\t\t\tfirst_item.id = TTUUID.not_exist_id;\n\t\t\t\t}\n\t\t\t\tif ( set_all ) {\n\t\t\t\t\tfirst_item[content.name] = Global.all_item;\n\t\t\t\t} else if ( set_any ) {\n\t\t\t\t\tfirst_item[content.name] = Global.any_item;\n\t\t\t\t} else if ( set_empty || set_special_empty ) {\n\n\t\t\t\t\tfirst_item[content.name] = Global.empty_item;\n\n\t\t\t\t} else if ( set_open ) {\n\t\t\t\t\tfirst_item[content.name] = Global.open_item;\n\t\t\t\t} else if ( set_default ) {\n\t\t\t\t\tfirst_item[content.name] = Global.default_item;\n\t\t\t\t}\n\n\t\t\t\tif ( custom_first_label ) {\n\t\t\t\t\tfirst_item[content.name] = custom_first_label;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t\treturn first_item;\n\t\t};\n\n\t\tthis.createFirstItem = function( target_data ) {\n\n\t\t\tvar no_first_item = false;\n\t\t\tif ( !target_data ) {\n\t\t\t\ttarget_data = source_data;\n\t\t\t}\n\n\t\t\tif ( target_data.hasOwnProperty( 0 ) ) {\n\t\t\t\tif ( set_any || set_all ) {\n\t\t\t\t\tif ( target_data[0][key] === TTUUID.not_exist_id ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tif ( target_data[0][key] === TTUUID.zero_id ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar first_item = {};\n\n\t\t\tfirst_item[key] = TTUUID.zero_id;\n\n\t\t\tif ( set_any || set_all || set_special_empty ) {\n\t\t\t\tfirst_item[key] = TTUUID.not_exist_id;\n\t\t\t} else {\n\t\t\t\tfirst_item[key] = TTUUID.zero_id;\n\t\t\t}\n\n\t\t\t$.each( display_columns, function( index, content ) {\n\n\t\t\t\tif ( key !== 'id' ) {\n\t\t\t\t\t//first_item.id = 999; //records id start from 10000\n\t\t\t\t\tfirst_item.id = TTUUID.not_exist_id; //records id start from 10000\n\t\t\t\t}\n\t\t\t\tif ( set_all ) {\n\t\t\t\t\tfirst_item[content.name] = Global.all_item;\n\t\t\t\t} else if ( set_any ) {\n\t\t\t\t\tfirst_item[content.name] = Global.any_item;\n\t\t\t\t} else if ( set_empty || set_special_empty ) {\n\t\t\t\t\tfirst_item[content.name] = Global.empty_item;\n\t\t\t\t} else if ( set_open ) {\n\t\t\t\t\tfirst_item[content.name] = Global.open_item;\n\t\t\t\t} else if ( set_default ) {\n\t\t\t\t\tfirst_item[content.name] = Global.default_item;\n\t\t\t\t} else {\n\t\t\t\t\tno_first_item = true;\n\t\t\t\t}\n\n\t\t\t\tif ( custom_first_label ) {\n\t\t\t\t\tfirst_item[content.name] = custom_first_label;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t\tif ( !no_first_item ) {\n\t\t\t\t//Issue #3338 - Custom field meta data multi_select_items was getting the \"-- None --\" option silently added and modifying\n\t\t\t\t//our original option array. This is because the data passed by setSourceData() is a reference to the original data.\n\t\t\t\t//This does not cause problems anywhere else than saving a custom field as custom fields is the only area\n\t\t\t\t//where we send the option array data back to the server. Because of that we now clone the custom field multi_select_items\n\t\t\t\t//before passing it to setSourceData() so we don't modify the original data. However, we do not do this for\n\t\t\t\t//all other selects, as other areas of the code may rely on this pass by reference behavior.\n\t\t\t\ttarget_data.unshift( first_item );\n\t\t\t}\n\n\t\t};\n\n\t\tthis.checkIfLayoutChanged = function( newDisplayColumns ) {\n\n\t\t\tif ( !display_columns ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( !newDisplayColumns ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( display_columns.length !== newDisplayColumns.length ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar len = display_columns.length;\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar display_column = display_columns[i];\n\t\t\t\tvar found = false;\n\t\t\t\tfor ( var j = 0; j < len; j++ ) {\n\t\t\t\t\tvar new_display_column = newDisplayColumns[j];\n\t\t\t\t\tif ( new_display_column.name === display_column.name ) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( !found ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t\tthis.setDefaultArgs = function( val ) {\n\t\t\t$this.default_args = val;\n\t\t\tset_default_args_manually = true;\n\t\t\tdefault_args = val;\n\n\t\t};\n\n\t\tthis.setDisPlayColumns = function( val ) {\n\n\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( val, layout_name );\n\t\t};\n\n\t\t//Only these columns can be shown no matter\n\t\tthis.setPossibleDisplayColumns = function( val, default_columns ) {\n\t\t\tpossible_display_columns = val;\n\n\t\t\tif ( default_columns ) {\n\t\t\t\tlist_view_default_columns = default_columns;\n\t\t\t} else {\n\t\t\t\tlist_view_default_columns = val;\n\t\t\t}\n\n\t\t\tif ( layout_name !== 'global_option_column' && //Simple options\n\t\t\t\tlayout_name !== 'global_tree_column' && //Tree Mode\n\t\t\t\tlayout_name !== 'global_sort_columns' &&\n\t\t\t\tlayout_name !== 'global_timesheet' &&\n\t\t\t\tlayout_name !== 'global_absence' ) {\n\t\t\t\tthis.initColumns();\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setRowPerPage = function( val ) {\n\t\t\trow_per_page = val;\n\t\t};\n\n\t\tthis.setPagerData = function( val ) {\n\t\t\tpager_data = val;\n\t\t};\n\n\t\tthis.shouldInitColumns = function() {\n\t\t\tif ( layout_name === 'global_option_column' || //Simple options\n\t\t\t\tlayout_name === 'global_tree_column' || //Tree Mode\n\t\t\t\tlayout_name === 'global_sort_columns' ||\n\t\t\t\tlayout_name === 'global_timesheet' ||\n\t\t\t\tlayout_name === 'global_absence' ||\n\t\t\t\tlayout_name === 'global_simple_name' ||\n\t\t\t\tlayout_name === 'global_simple_name' + '_navigation' ) {\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\n\t\tthis.createItem = function( val, label ) {\n\t\t\tvar item = {};\n\n\t\t\titem[key] = val;\n\t\t\t$.each( display_columns, function( index, content ) {\n\n\t\t\t\tif ( key !== 'id' ) {\n\t\t\t\t\titem.id = 20000; //records id start from 10000\n\t\t\t\t}\n\t\t\t\titem[content.name] = label;\n\t\t\t\treturn false;\n\n\t\t\t} );\n\n\t\t\treturn item;\n\n\t\t};\n\n\t\tthis.initSourceData = function() {\n\t\t\tvar args = $this.buildUnSelectGridFilter();\n\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tsource_data = result_data;\n\t\t\t\t\tpager_data = result.getPagerData();\n\n\t\t\t\t\t$this.trigger( 'initSourceComplete', [$this] );\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t//only do this once\n\t\t\tinit_data_immediately = false;\n\t\t};\n\n\t\tthis.addHideIdColumn = function( display_columns ) {\n\t\t\tvar id_column = { name: 'id', index: 'id', label: '', width: 0, hidden: true };\n\n\t\t\tdisplay_columns.push( id_column );\n\n\t\t\treturn display_columns;\n\t\t};\n\n\t\tvar buildSortBySelectColumns = function( array ) {\n\t\t\tvar sort_by_array = array;\n\t\t\tvar sort_by_select_columns = [];\n\t\t\tvar sort_by_unselect_columns = source_data;\n\n\t\t\tif ( sort_by_array ) {\n\t\t\t\t$.each( sort_by_array, function( index, content ) {\n\t\t\t\t\tfor ( var key in content ) {\n\t\t\t\t\t\tif ( key === 'label' || key === 'value' || key === 'fullValue' ) {\n\t\t\t\t\t\t\tsort_by_select_columns = sort_by_array;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$.each( sort_by_unselect_columns, function( index1, content1 ) {\n\t\t\t\t\t\t\tif ( content1.value === key ) {\n\t\t\t\t\t\t\t\tcontent1.sort = content[key];\n\t\t\t\t\t\t\t\tsort_by_select_columns.push( content1 );\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn sort_by_select_columns;\n\n\t\t};\n\n\t\t//For multiple items like .xxx could contains a few widgets.\n\t\tthis.each( function() {\n\t\t\tvar o = $.meta ? $.extend( {}, opts, $( this ).data() ) : opts;\n\t\t\tlabel_span = $( this ).find( '.a-combobox-label' );\n\t\t\tvar focus_input = $( this ).find( '.focus-input' );\n\n\t\t\tif ( o.always_include_columns ) {\n\t\t\t\talways_include_columns = o.always_include_columns;\n\t\t\t}\n\n\t\t\tif ( o.extendDataProcessWhenSearch ) {\n\t\t\t\textendDataProcessWhenSearch = o.extendDataProcessWhenSearch;\n\t\t\t}\n\n\t\t\tif ( o.always_search_full_columns ) {\n\t\t\t\talways_search_full_columns = o.always_search_full_columns;\n\t\t\t}\n\n\t\t\t//source_data id that add from outsite, used to set value before open awesomebox\n\t\t\tif ( o.added_items ) {\n\t\t\t\tadded_items = o.added_items;\n\t\t\t}\n\n\t\t\tif ( o.init_data_immediately ) {\n\t\t\t\tinit_data_immediately = o.init_data_immediately;\n\t\t\t}\n\n\t\t\t//first item label , like -- No Meal -- in Policy -> Schedule Policies\n\t\t\tif ( o.custom_first_label ) {\n\t\t\t\tcustom_first_label = o.custom_first_label;\n\t\t\t}\n\n\t\t\tif ( o.script_name ) {\n\t\t\t\tscript_name = o.script_name;\n\t\t\t}\n\n\t\t\tif ( o.get_real_data_on_multi ) {\n\t\t\t\tget_real_data_on_multi = o.get_real_data_on_multi;\n\t\t\t}\n\n\t\t\tif ( o.setRealValueCallBack ) {\n\t\t\t\tsetRealValueCallBack = o.setRealValueCallBack;\n\t\t\t}\n\n\t\t\tif ( o.navigation_mode ) {\n\t\t\t\tnavigation_mode = o.navigation_mode;\n\t\t\t\t$( this ).children().eq( 1 ).css( 'max-width', 132 );\n\t\t\t\t$( this ).children().eq( 1 ).css( 'min-width', 132 );\n\t\t\t}\n\n\t\t\tif ( o.search_panel_model ) {\n\t\t\t\t$( this ).children().eq( 1 ).css( 'max-width', 132 );\n\t\t\t\t$( this ).children().eq( 1 ).css( 'min-width', 132 );\n\t\t\t}\n\n\t\t\tif ( o.width ) {\n\t\t\t\t$( this ).children().eq( 1 ).css( 'max-width', o.width );\n\t\t\t\tif ( o.is_static_width ) {\n\t\t\t\t\t$( this ).children().eq( 1 ).css( 'min-width', o.width );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$( this ).children().eq( 1 ).css( 'min-width', 132 );\n\t\t\t}\n\n\t\t\tif ( o.api_class ) {\n\t\t\t\tapi_class = o.api_class;\n\t\t\t\tapi = o.api_class;\n\t\t\t}\n\n\t\t\tif ( o.custom_key_name ) {\n\t\t\t\tcustom_key_name = o.custom_key_name;\n\t\t\t} else {\n\n\t\t\t\tif ( api ) {\n\t\t\t\t\tcustom_key_name = api.key_name;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( o.allow_multiple_selection ) {\n\t\t\t\tallow_multiple_selection = o.allow_multiple_selection;\n\t\t\t}\n\n\t\t\tif ( o.set_any ) {\n\t\t\t\tset_any = o.set_any;\n\t\t\t}\n\n\t\t\tif ( o.set_empty ) {\n\t\t\t\tset_empty = o.set_empty;\n\t\t\t}\n\n\t\t\tif ( o.set_special_empty ) {\n\t\t\t\tset_special_empty = o.set_special_empty;\n\t\t\t}\n\n\t\t\tif ( o.set_open ) {\n\t\t\t\tset_open = o.set_open;\n\t\t\t}\n\n\t\t\tif ( o.set_default ) {\n\t\t\t\tset_default = o.set_default;\n\t\t\t}\n\n\t\t\tif ( o.set_all ) {\n\t\t\t\tset_all = o.set_all;\n\t\t\t}\n\n\t\t\tif ( o.addition_source_function ) {\n\t\t\t\taddition_source_function = o.addition_source_function;\n\t\t\t}\n\n\t\t\tif ( o.column_option_key ) {\n\t\t\t\tcolumn_option_key = o.column_option_key;\n\t\t\t}\n\n\t\t\tfield = o.field;\n\n\t\t\tif ( o.validation_field ) {\n\t\t\t\tvalidation_field = o.validation_field;\n\t\t\t}\n\n\t\t\tif ( o.layout_name ) {\n\t\t\t\tif ( navigation_mode ) {\n\t\t\t\t\tlayout_name = o.layout_name + '_navigation';\n\t\t\t\t} else {\n\t\t\t\t\tlayout_name = o.layout_name;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( o.hasOwnProperty( 'show_search_inputs' ) ) {\n\t\t\t\tshow_search_inputs = o.show_search_inputs;\n\t\t\t}\n\n\t\t\tif ( o.tree_mode ) {\n\t\t\t\ttree_mode = o.tree_mode;\n\t\t\t}\n\n\t\t\tif ( o.on_tree_grid_row_select ) {\n\t\t\t\ton_tree_grid_row_select = o.on_tree_grid_row_select;\n\t\t\t}\n\n\t\t\t//Always set this true;\n\t\t\tallow_drag_to_order = true;\n\n\t\t\tif ( o.key ) {\n\t\t\t\tkey = o.key;\n\t\t\t}\n\n\t\t\tif ( o.args ) {\n\t\t\t\t$this.args = o.args;\n\t\t\t}\n\n\t\t\tif ( o.customSearchFilter ) {\n\t\t\t\t$this.customSearchFilter = o.customSearchFilter;\n\t\t\t}\n\n\t\t\t//Set default args use when init source;\n\t\t\tif ( o.default_args ) {\n\t\t\t\t$this.setDefaultArgs( o.default_args );\n\t\t\t}\n\n\t\t\tvar $$this = this;\n\t\t\tfocus_input.unbind( 'keydown' ).bind( 'keydown', function( e ) {\n\t\t\t\t//Stop click event to top, prevent the body click event\n\t\t\t\tif ( e.keyCode === 13 || e.keyCode === 32 ) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tTTPromise.add( 'AComboBox', 'init' );\n\t\t\t\t\topenADropDown();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tfocus_input.bind( 'focusin', function() {\n\t\t\t\t$( $$this ).addClass( 'focus' );\n\t\t\t} );\n\n\t\t\tfocus_input.bind( 'focusout', function() {\n\t\t\t\t$( $$this ).removeClass( 'focus' );\n\t\t\t} );\n\n\t\t\t$( this ).click( function( e ) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\tif ( LocalCacheData.current_open_sub_controller &&\n\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.edit_view &&\n\t\t\t\t\t\tLocalCacheData.current_open_sub_controller.is_viewing ) {\n\t\t\t\t\t\terror_string = LocalCacheData.current_open_sub_controller.getViewModeErrorMessage();\n\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t} else if ( LocalCacheData.current_open_primary_controller &&\n\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.edit_view &&\n\t\t\t\t\t\tLocalCacheData.current_open_primary_controller.is_viewing ) {\n\t\t\t\t\t\terror_string = LocalCacheData.current_open_primary_controller.getViewModeErrorMessage();\n\t\t\t\t\t\t$this.showErrorTip( 10 );\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tif ( dontOpen === true ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tTTPromise.add( 'AComboBox', 'init' );\n\t\t\t\t\topenADropDown();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$( this ).mouseover( function() {\n\t\t\t\tif ( enabled ) {\n\t\t\t\t\tif ( error_string && error_string.length > 0 ) {\n\t\t\t\t\t\t$this.showErrorTip( 1000 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$( this ).mouseout( function() {\n\t\t\t\t$this.hideErrorTip();\n\t\t\t} );\n\n\t\t\tif ( !o.width ) {\n\t\t\t\t$( this ).css( 'min-width', '169px' );\n\t\t\t} else {\n\t\t\t\t$( this ).css( 'min-width', ( o.width + 33 ) + 'px' );\n\t\t\t}\n\n\t\t\tif ( !$this.shouldInitColumns() ) { //Sort Selector in search panel\n\t\t\t\tdo_not_get_real_data = true; // For Simple OPTIONS mode\n\n\t\t\t}\n\n\t\t\tdisplay_columns = ALayoutCache.getDefaultColumn( layout_name ); //Get Default columns base on different layout name\n\t\t\tdisplay_columns = Global.convertColumnsTojGridFormat( display_columns, layout_name ); //Convert to jQgrid format\n\n\t\t\tif ( $this.shouldInitColumns() && !navigation_mode ) { //Sort Selector in search panel\n\n\t\t\t\t//init columnd when set possible columns for navigation mode\n\t\t\t\t$this.initColumns();\n\t\t\t}\n\n\t\t\tif ( o.id ) {\n\t\t\t\t$( this ).attr( 'id', o.id + '_AComboBox' );\n\t\t\t\tid = o.id;\n\t\t\t} else {\n\t\t\t\t$( this ).attr( 'id', field + '_AComboBox' );\n\t\t\t\tid = o.field;\n\t\t\t}\n\n\t\t\t$this.setEmptyLabel();\n\n\t\t\t//Open ADropDown\n\t\t\tfunction setADropDownSelectValues( select_items ) {\n\t\t\t\tif ( !( set_any && select_items == TTUUID.not_exist_id ) ) {\n\t\t\t\t\ta_dropdown.setSelectGridData( select_items );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction openADropDown() {\n\t\t\t\tif ( !enabled ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( LocalCacheData.openAwesomeBox ) {\n\t\t\t\t\tif ( LocalCacheData.openAwesomeBox.getId() === id ) {\n\t\t\t\t\t\tLocalCacheData.openAwesomeBox.onClose();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tLocalCacheData.openAwesomeBox.onClose();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tLocalCacheData.openAwesomeBox = $this;\n\n\t\t\t\t//Create and open ADropDown\n\t\t\t\ta_dropdown = Global.loadWidgetByName( FormItemType.AWESOME_DROPDOWN );\n\n\t\t\t\tvar display_show_all = false;\n\t\t\t\tif ( $this.shouldInitColumns() && !navigation_mode ) {\n\t\t\t\t\tdisplay_show_all = true;\n\t\t\t\t}\n\n\t\t\t\tif ( navigation_mode && default_args && default_args.filter_sort && !cached_sort_filter ) {\n\t\t\t\t\tcached_sort_filter = default_args.filter_sort;\n\t\t\t\t}\n\n\t\t\t\t//Create ADropDown\n\t\t\t\ta_dropdown = a_dropdown.ADropDown( {\n\t\t\t\t\tdisplay_show_all: display_show_all,\n\t\t\t\t\tallow_drag_to_order: allow_drag_to_order,\n\t\t\t\t\tallow_multiple_selection: allow_multiple_selection,\n\t\t\t\t\tshow_all: show_all,\n\t\t\t\t\tkey: key,\n\t\t\t\t\tid: id,\n\t\t\t\t\tcomboBox: $this,\n\t\t\t\t\tshow_search_inputs: show_search_inputs,\n\t\t\t\t\tsearch_input_filter: cached_search_inputs_filter,\n\t\t\t\t\tselect_grid_search_input_filter: cached_select_grid_search_inputs_filter,\n\t\t\t\t\tdefault_sort_filter: cached_sort_filter,\n\t\t\t\t\tdefault_select_grid_sort_filter: cached_selected_grid_sort_filter,\n\t\t\t\t\ttree_mode: tree_mode,\n\t\t\t\t\tcolumn_option_key: column_option_key,\n\t\t\t\t\tapi: api,\n\t\t\t\t\tdisplay_column_settings: $this.shouldInitColumns(),\n\n\t\t\t\t\ton_tree_grid_row_select: on_tree_grid_row_select\n\t\t\t\t} );\n\n\t\t\t\ta_dropdown_div = $( '<div id=\\'' + id + 'a_dropdown_div\\' class=\\'a-dropdown-div\\'></div>' );\n\n\t\t\t\ta_dropdown_div.append( a_dropdown );\n\n\t\t\t\ta_dropdown_div.mouseenter( function() {\n\t\t\t\t\tis_mouse_over = true;\n\t\t\t\t} );\n\n\t\t\t\ta_dropdown_div.mouseleave( function() {\n\t\t\t\t\tis_mouse_over = false;\n\t\t\t\t} );\n\n\t\t\t\t$( 'body' ).append( a_dropdown_div );\n\n\t\t\t\tTTPromise.wait( 'AComboBox', 'init', function() {\n\t\t\t\t\ta_dropdown.setGridColumnsWidths();\n\n\t\t\t\t\t//Make sure we don't run this API call if the only selected value is a zero/not exists UUID,\n\t\t\t\t\t// otherwise it causes companies with thousands of employees to return *all* employees.\n\t\t\t\t\tif ( allow_multiple_selection == true && ( $this.getValue().length > 1 || ( $this.getValue().length == 1 && $this.getValue()[0] && ( $this.getValue()[0] != TTUUID.zero_id && $this.getValue()[0] != TTUUID.not_exist_id ) ) ) && api ) {\n\t\t\t\t\t\tvar args = {};\n\t\t\t\t\t\targs.filter_data = { id: $this.getValue() };\n\t\t\t\t\t\targs.filter_columns = $this.getColumnFilter();\n\t\t\t\t\t\targs.filter_items_per_page = 10000;\n\n\t\t\t\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\t\tdoNext( result );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdoNext();\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction doNext( result ) {\n\t\t\t\t\t\tif ( result ) {\n\t\t\t\t\t\t\ta_dropdown.setRealSelectItems( result.getResult(), $this.getValue() );\n\t\t\t\t\t\t}\n\t\t\t\t\t\ta_dropdown_div.css( 'opacity', '1' );\n\n\t\t\t\t\t\t//#2353 - remove the right side border from jqgrid.\n\t\t\t\t\t\tvar tables = $this.find( '.ui-jqgrid' ).find( 'table' );\n\t\t\t\t\t\tif ( tables.length > 0 ) {\n\t\t\t\t\t\t\tfor ( var i = 0; i < tables.length; i++ ) {\n\t\t\t\t\t\t\t\t//resize awesomebox grid tables to remove right-size gap.\n\t\t\t\t\t\t\t\tvar width = $( tables[0] ).parents( '.ui-jqgrid' ).find( '.ui-jqgrid-bdiv' ).width() - 11;\n\t\t\t\t\t\t\t\t$( tables[0] ).parents( '.ui-jqgrid' ).find( '.ui-jqgrid-view' ).width( width );\n\t\t\t\t\t\t\t\t$( tables[i] ).width( width );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$this.highlightSelectItem();\n\t\t\t\t\t\ta_dropdown.setUnSelectGridDragAble();\n\t\t\t\t\t\ta_dropdown.setSelectGridDragAble();\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\ta_dropdown.bind( 'close', $this.onClose );\n\n\t\t\t\tvar layout = ALayoutCache.layout_dic[layout_name];\n\n\t\t\t\t//Always use columns from global cache if columns is not default\n\t\t\t\tif ( layout_name && layout && Global.isSet( layout.data ) ) {\n\n\t\t\t\t\tvar current_display_columns = layout.data.display_columns;\n\n\t\t\t\t\t//Happen when save no columns in column setting for navigation mode\n\t\t\t\t\tif ( current_display_columns.length > 0 ) {\n\t\t\t\t\t\t//Only check possible columns if any\n\t\t\t\t\t\tif ( possible_display_columns ) {\n\t\t\t\t\t\t\tcurrent_display_columns = filterBaseOnPossibleColumns( current_display_columns );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( list_view_default_columns ) {\n\t\t\t\t\t\t\tcurrent_display_columns = list_view_default_columns;\n\t\t\t\t\t\t\tcurrent_display_columns = filterBaseOnPossibleColumns( current_display_columns );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrent_display_columns = Global.convertColumnsTojGridFormat( current_display_columns, layout_name );\n\n\t\t\t\t\tvar current_row_per_page = layout.data.row_per_page;\n\n\t\t\t\t\t//If current columns or row_per_page not same as saved layout. Reload data base on current setting\n\t\t\t\t\tif ( $this.checkIfLayoutChanged( current_display_columns ) || ( row_per_page !== current_row_per_page && !navigation_mode ) ) {\n\n\t\t\t\t\t\tdisplay_columns = current_display_columns;\n\t\t\t\t\t\tsource_data = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !navigation_mode ) {\n\t\t\t\t\t\trow_per_page = current_row_per_page;\n\n\t\t\t\t\t\tif ( !set_default_args_manually ) {\n\t\t\t\t\t\t\tif ( Global.isSet( layout.data.type ) && layout.data.type === 10 ) {\n\t\t\t\t\t\t\t\tvar default_args = {};\n\t\t\t\t\t\t\t\tdefault_args.filter_data = layout.data.filter_data;\n\t\t\t\t\t\t\t\tdefault_args.filter_sort = layout.data.filter_sort;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdefault_args = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//Set columns first\n\t\t\t\ta_dropdown.setColumns( display_columns );\n\n\t\t\t\tTTPromise.wait( 'AComboBox', 'init', () => {\n\t\t\t\t\t//Set DropDown position\n\t\t\t\t\t//use default with since .width()  not return correct width when first open\n\t\t\t\t\ta_dropdown_div.css( 'left', $( $this ).offset().left + 'px' );\n\n\t\t\t\t\tlet viewport_width = $( window ).width();\n\t\t\t\t\tlet dropdown_rect = a_dropdown_div[0].getBoundingClientRect();\n\t\t\t\t\tlet dropdown_right = dropdown_rect.right;\n\t\t\t\t\tlet dropdown_left = dropdown_rect.left;\n\n\t\t\t\t\tif ( Math.abs( dropdown_right - viewport_width ) <= 2 && a_dropdown_div[0].querySelector( '.select-grid-div' ) ) {\n\t\t\t\t\t\t//The dropdown does not show correct right position when off screen as child elements extend beyond the parent. This could be due to floats or other positioning problems.\n\t\t\t\t\t\t//In this scenario we need to calculate the right position based on the child elements.\n\t\t\t\t\t\tdropdown_right = ( a_dropdown_div[0].querySelector( '.select-grid-div' ).getBoundingClientRect().right + 10 );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( dropdown_right > viewport_width ) {\n\t\t\t\t\t\t// If the dropdown overflows on the right side, adjust to align with the viewport's right edge.\n\t\t\t\t\t\tlet overflow_right = dropdown_right - viewport_width;\n\t\t\t\t\t\tlet current_left = $( a_dropdown_div ).offset().left;\n\t\t\t\t\t\ta_dropdown_div.css( 'left', ( current_left - overflow_right ) + 'px' );\n\t\t\t\t\t} else if ( dropdown_left < 0 ) {\n\t\t\t\t\t\t// If the dropdown overflows on the left side, adjust to align with the viewport's left edge.\n\t\t\t\t\t\ta_dropdown_div.css( 'left', '0px' );\n\t\t\t\t\t}\n\n\t\t\t\t\t// makes sure it shown on the screen, will calculte position after source setting\n\t\t\t\t\tif ( ( $( $this ).offset().top + 25 + 275 ) < Global.bodyHeight() ) {\n\t\t\t\t\t\ta_dropdown_div.css( 'top', ( $( $this ).offset().top + 25 ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ta_dropdown_div.css( 'top', ( $( $this ).offset().top - 275 ) );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Calculate the bottom position of the dropdown\n\t\t\t\t\tlet dropdown_bottom = a_dropdown_div[0].getBoundingClientRect().bottom;\n\t\t\t\t\tlet dropdown_height = a_dropdown_div[0].getBoundingClientRect().height;\n\t\t\t\t\tlet viewport_height = $( window ).height();\n\n\t\t\t\t\t// Check if the dropdown goes off the bottom of the viewport, place it above the clicked element.\n\t\t\t\t\tif ( dropdown_bottom > viewport_height ) {\n\t\t\t\t\t\tlet field_top = ( $this[0].getBoundingClientRect().top - 5 ); // 5 pixel room, so it does not directly touch the field\n\t\t\t\t\t\ta_dropdown_div.css( 'top', field_top - dropdown_height );\n\t\t\t\t\t}\n\n\t\t\t\t\t// If after all adjustments the dropdown still goes out of the viewport, then we modify the height/width to fit instead of the position.\n\t\t\t\t\tlet overflow_right = Math.max( 0, a_dropdown_div[0].getBoundingClientRect().right - $( window ).width() );\n\t\t\t\t\tlet overflow_bottom = Math.max( 0, a_dropdown_div[0].getBoundingClientRect().bottom - $( window ).height() );\n\t\t\t\t\tlet overflow_left = Math.max( 0, -a_dropdown_div[0].getBoundingClientRect().left );\n\t\t\t\t\tlet overflow_top = Math.max( 0, -a_dropdown_div[0].getBoundingClientRect().top );\n\n\t\t\t\t\t// Adjust dropdown dimensions based on overflow\n\t\t\t\t\tif ( overflow_right > 0 || overflow_left > 0 ) {\n\t\t\t\t\t\tlet new_width = a_dropdown_div.outerWidth() - overflow_right - overflow_left;\n\t\t\t\t\t\ta_dropdown_div.css( 'width', new_width + 'px' );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( overflow_bottom > 0 || overflow_top > 0 ) {\n\t\t\t\t\t\tlet current_height = a_dropdown_div.outerHeight();\n\t\t\t\t\t\tlet new_height = current_height - overflow_bottom - overflow_top;\n\t\t\t\t\t\ta_dropdown_div.css( 'height', new_height + 'px' );\n\n\t\t\t\t\t\t// If there was overflow at the top, adjust the position as well.\n\t\t\t\t\t\tif ( overflow_top > 0 ) {\n\t\t\t\t\t\t\tlet current_top = a_dropdown_div.offset().top;\n\t\t\t\t\t\t\tlet new_top = current_top + overflow_top; // Move down by the overflow amount\n\t\t\t\t\t\t\ta_dropdown_div.css( 'top', new_top + 'px' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t// This will never change when search in search input. Set it back to dropdown every time when open\n\t\t\t\tif ( !source_data ) {\n\t\t\t\t\t//When using pagination and first opening the dropdown box, we need to exclude the selected items from the API call\n\t\t\t\t\t// so the first page will always be populated with a full page of records.\n\t\t\t\t\t// Lower down we make a separate API call to get the records for the selected items, and source_data.concat() them there.\n\t\t\t\t\tvar args = $this.buildUnSelectGridFilter( $this.getValue() );\n\n\t\t\t\t\t//Error: TypeError: api is null in /interface/html5/global/widgets/awesomebox/AComboBox.js?v=8.0.0-20141117-112033 line 2364\n\t\t\t\t\tif ( !api ) {\n\t\t\t\t\t\tif ( addition_source_function ) { //Required to add data to search UI for custom fields\n\t\t\t\t\t\t\tsource_data = addition_source_function( $this, source_data );\n\t\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsource_data = result_data;\n\n\t\t\t\t\t\t\t//set this outside, to add more data to source_data\n\t\t\t\t\t\t\tif ( addition_source_function ) {\n\t\t\t\t\t\t\t\tsource_data = addition_source_function( $this, source_data );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnavigation_mode_source_data_before_open = null;\n\n\t\t\t\t\t\t\tif ( Global.isSet( api ) ) {\n\t\t\t\t\t\t\t\tsource_data = Global.formatGridData( source_data, api.key_name );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\t\t\t\tif ( set_all ) {\n\t\t\t\t\t\t\t\t\t$this.createFirstItem();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// For select items which only contains ids, like all awesomeboxes in edit view\n\t\t\t\t\t\t\t\t// Similar code is also below in the } else { clause of this IF statement.\n\t\t\t\t\t\t\t\tif ( get_real_data_when_open ) {\n\t\t\t\t\t\t\t\t\tget_real_data_when_open = false;\n\n\t\t\t\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\n\t\t\t\t\t\t\t\t\tif ( !select_items || ( select_items && select_items.length == 1 && ( select_items[0] == TTUUID.zero_id || select_items[0] == TTUUID.not_exist_id ) ) ) {\n\t\t\t\t\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tvar args = {};\n\t\t\t\t\t\t\t\t\t\targs.filter_data = { id: select_items };\n\t\t\t\t\t\t\t\t\t\targs.filter_columns = $this.getColumnFilter();\n\t\t\t\t\t\t\t\t\t\targs.filter_items_per_page = 10000;\n\n\t\t\t\t\t\t\t\t\t\t//Error: TypeError: null is not an object (evaluating 'select_items.length') in /interface/html5/global/widgets/awesomebox/AComboBox.js?v=8.0.0-20141230-113526 line 2441\n\t\t\t\t\t\t\t\t\t\t//if select items contains data like 0, for example Employee in Recurring Schedule edit view\n\t\t\t\t\t\t\t\t\t\tvar local_data = false;\n\t\t\t\t\t\t\t\t\t\tif ( select_items && select_items.length > 0 && ( select_items[0] == TTUUID.zero_id || select_items[0] == TTUUID.not_exist_id ) ) {\n\t\t\t\t\t\t\t\t\t\t\tlocal_data = $this.getLocalSelectItem( select_items[0] );\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\t\t\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\t\t\t\t\t\tselect_items = result.getResult();\n\n\t\t\t\t\t\t\t\t\t\t\t\t//Since the initial API call above excluded the selected items, we need to concat() them back onto the source_data array\n\t\t\t\t\t\t\t\t\t\t\t\tsource_data = source_data.concat( select_items ); //Do above the unshift( local_data ) below.\n\n\t\t\t\t\t\t\t\t\t\t\t\tif ( local_data ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tselect_items.unshift( local_data );\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t//a_dropdown.setSelectGridData( select_items ); //set Selected Data after set sourceData\n\t\t\t\t\t\t\t\t\t\t\t\tsetADropDownSelectValues( select_items );\n\t\t\t\t\t\t\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\t\t\t\t\t\t\t\t\t//Issue #3220 - When an AwesomeBox has only 1 item selected on initial load, that item will disappear on reopen\n\t\t\t\t\t\t\t\t\t//if it is unselected by the user as it is not in the source_data for the AwesomeBox.\n\t\t\t\t\t\t\t\t\t//Since the initial API call above excluded the selected items, we need to concat() them back onto the source_data array\n\t\t\t\t\t\t\t\t\tif ( Array.isArray( select_items ) && select_items.length > 0 && select_items[0].id ) {\n\t\t\t\t\t\t\t\t\t\tsource_data = source_data.concat( select_items );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsetADropDownSelectValues( select_items );\n\t\t\t\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif ( set_empty || set_any || set_default || set_open || set_special_empty ) {\n\t\t\t\t\t\t\t\t\t$this.createFirstItem();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\t\t\t\t\t\t\t\ta_dropdown.setSelectItem( select_item );\n\t\t\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tpager_data = result.getPagerData();\n\t\t\t\t\t\t\ta_dropdown.setPagerData( pager_data );\n\n\t\t\t\t\t\t\tif ( !Global.isEmpty( cached_search_inputs_filter ) || !Global.isEmpty( cached_sort_filter ) ) {\n\t\t\t\t\t\t\t\ta_dropdown.getUnSelectGrid().grid.hide();\n\t\t\t\t\t\t\t\t$this.onADropDownSearch( 'unselect_grid' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( !Global.isEmpty( cached_select_grid_search_inputs_filter ) || !Global.isEmpty( cached_selected_grid_sort_filter ) ) {\n\t\t\t\t\t\t\t\ta_dropdown.getSelectGrid().grid.hide();\n\t\t\t\t\t\t\t\t$this.onADropDownSearch( 'select_grid' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} else { //Use cache if already loaded data before\n\n\t\t\t\t\tif ( Global.isSet( api ) ) {\n\t\t\t\t\t\tsource_data = Global.formatGridData( source_data, api.key_name );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( allow_multiple_selection ) {\n\t\t\t\t\t\tif ( layout_name === 'global_sort_columns' ) {\n\t\t\t\t\t\t\tselect_items = buildSortBySelectColumns( select_items );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Similar code is also below in the above TRUE IF statement clause.\n\t\t\t\t\t\tif ( get_real_data_when_open ) {\n\t\t\t\t\t\t\tget_real_data_when_open = false;\n\n\t\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\n\t\t\t\t\t\t\tif ( !select_items || ( select_items && select_items.length == 1 && ( select_items[0] == TTUUID.zero_id || select_items[0] == TTUUID.not_exist_id ) ) ) {\n\t\t\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvar args = {};\n\t\t\t\t\t\t\t\targs.filter_data = { id: select_items };\n\t\t\t\t\t\t\t\targs.filter_columns = $this.getColumnFilter();\n\t\t\t\t\t\t\t\targs.filter_items_per_page = 10000;\n\n\t\t\t\t\t\t\t\t//Error: TypeError: null is not an object (evaluating 'select_items.length') in /interface/html5/global/widgets/awesomebox/AComboBox.js?v=8.0.0-20141230-113526 line 2441\n\t\t\t\t\t\t\t\t//if select items contains data like 0, for example Employee in Recurring Schedule edit view\n\t\t\t\t\t\t\t\tvar local_data = false;\n\t\t\t\t\t\t\t\tif ( select_items && select_items.length > 0 && ( select_items[0] == TTUUID.zero_id || select_items[0] == TTUUID.not_exist_id ) ) {\n\t\t\t\t\t\t\t\t\tlocal_data = $this.getLocalSelectItem( select_items[0] );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tapi['get' + custom_key_name]( args, {\n\t\t\t\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\t\t\t\tselect_items = result.getResult();\n\n\t\t\t\t\t\t\t\t\t\tif ( local_data ) {\n\t\t\t\t\t\t\t\t\t\t\tselect_items.unshift( local_data );\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\t\t\t\t\t\t\t\t\t\t//a_dropdown.setSelectGridData( select_items ); //set Selected Data after set sourceData\n\t\t\t\t\t\t\t\t\t\tsetADropDownSelectValues( select_items );\n\t\t\t\t\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\t\t\t\t\t\t\t//a_dropdown.setSelectGridData( select_items );\n\t\t\t\t\t\t\tsetADropDownSelectValues( select_items );\n\t\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\ta_dropdown.setUnselectedGridData( source_data );\n\t\t\t\t\t\ta_dropdown.setSelectItem( select_item );\n\t\t\t\t\t\tTTPromise.resolve( 'AComboBox', 'init' );\n\t\t\t\t\t}\n\n\t\t\t\t\ta_dropdown.setPagerData( pager_data );\n\n\t\t\t\t\tif ( !Global.isEmpty( cached_search_inputs_filter ) || !Global.isEmpty( cached_sort_filter ) ) {\n\t\t\t\t\t\ta_dropdown.getUnSelectGrid().grid.hide();\n\t\t\t\t\t\t$this.onADropDownSearch( 'unselect_grid' );\n\t\t\t\t\t\tcurrent_open_page = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( current_open_page > 1 && current_open_page <= pager_data.last_page_number ) {\n\t\t\t\t\t\t\ta_dropdown.getUnSelectGrid().grid.hide();\n\t\t\t\t\t\t\t$this.onADropDownSearch( 'unselect_grid', current_open_page );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !Global.isEmpty( cached_select_grid_search_inputs_filter ) || !Global.isEmpty( cached_selected_grid_sort_filter ) ) {\n\t\t\t\t\t\t//a_dropdown.getSelectGrid().grid.hide(); //#2721 - This helps fixes a bug where if you expand a awesomebox (ie: Edit Policy Group, Absence Policys), on right-hand side click clear search. Click Move All on right-hand side. Collapse, expand, click move All left-hand side. Both sides are now blank because the right grid had a display: none attached to it.\n\t\t\t\t\t\t$this.onADropDownSearch( 'select_grid' );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this;\n\n\t};\n\n\t$.fn.AComboBox.defaults = {};\n\t$.fn.AComboBox.html_template = `\n\t<div class=\"a-combobox\">\n\t\t<div class=\"a-combobox-left-bg\"></div>\n\t\t<span class=\"a-combobox-label openADropDown a-combobox-mid-bg\"></span>\n\t\t<input class=\"focus-input\">\n\t\t<div class=\"clickable-space openADropDown\"></div>\n\t</div>\n\t`;\n\n} )( jQuery );"],"names":["$","options","opts","label_span","a_dropdown","layout_name","pager_data","api_class","api","allow_multiple_selection","do_not_get_real_data","get_real_data_on_multi","set_any","set_empty","set_special_empty","set_open","set_default","set_all","select_item","select_items","field","validation_field","user_generic_api","display_columns","possible_display_columns","list_view_default_columns","display_columns_in_columnEditor","all_columns","source_data","id","get_real_data_when_open","set_select_items_when_set_data_provider","$this","a_dropdown_div","is_mouse_over","row_per_page","show_all","show_search_inputs","tree_mode","on_tree_grid_row_select","key","error_string","error_tip_box","mass_edit_mode","check_box","enabled","allow_drag_to_order","navigation_mode","args_from_saved_layout","default_args","cached_search_inputs_filter","cached_select_grid_search_inputs_filter","cached_sort_filter","cached_selected_grid_sort_filter","script_name","navigation_mode_source_data_before_open","set_default_args_manually","addition_source_function","custom_key_name","setRealValueCallBack","custom_first_label","added_items","column_option_key","dontOpen","total_header_width","init_data_immediately","unselect_grid_search_result","always_search_full_columns","quick_search_dic","quick_search_typed_keys","quick_search_timer","current_open_page","extendDataProcessWhenSearch","always_include_columns","val","index","target_source_data","result","len","i","item","retval","next_select_item","errStr","show","isWarning","sec","selected_id","_b","_a","selected_item_element","return_full_value","return_value","content","value","current_width","_","filter","result_data","column_filter","select_items_len","res","select_value","j","source_item","label_arr","display_column_len","y","c_value","column","first_item","layout","seletedColumns","rowsPerPageNumber","layout_id","filter_data","select_columns_in_JSON","column_in_JSON","obj","initColumnsFromCache","resData","data","columns_result_data","saved_layout_result","saved_layout","new_data","filterBaseOnPossibleColumns","width","dis_column","found","new_item","target","pending_promise","select_index","next_index","target_grid","focus_target","trimmed_quick_search_typed_keys","search_index","tds","td","grid_data","z","isShowAll","args","exclude_ids","selected_ids","x","inputs","targetName","page_action","default_select_item","callBack","trigger_form_item_change","this_val","_c","_d","_e","focused_element","current_data","api_display_columns","len1","result_display_columns","name","target_data","no_first_item","newDisplayColumns","display_column","new_display_column","default_columns","label","id_column","buildSortBySelectColumns","array","sort_by_array","sort_by_select_columns","sort_by_unselect_columns","index1","content1","o","focus_input","$$this","e","openADropDown","setADropDownSelectValues","display_show_all","doNext","tables","current_display_columns","current_row_per_page","viewport_width","dropdown_rect","dropdown_right","dropdown_left","overflow_right","current_left","dropdown_bottom","dropdown_height","viewport_height","field_top","overflow_bottom","overflow_left","overflow_top","new_width","new_height","new_top","local_data","jQuery"],"mappings":"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"}