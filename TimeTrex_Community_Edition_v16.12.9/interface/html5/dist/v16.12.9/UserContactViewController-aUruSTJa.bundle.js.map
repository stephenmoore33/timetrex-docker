{"version":3,"file":"UserContactViewController-aUruSTJa.bundle.js","sources":["../../views/employees/user_contact/UserContactViewController.js"],"sourcesContent":["export class UserContactViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#user_contact_view_container',\n\n\n\n\t\t\tuser_api: null,\n\t\t\tcompany_api: null,\n\t\t\tethnic_group_api: null,\n\t\t\tstatus_array: null,\n\t\t\ttype_array: null,\n\t\t\tsex_array: null,\n\t\t\tcountry_array: null,\n\t\t\tprovince_array: null,\n\t\t\te_province_array: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'UserContactEditView.html';\n\t\tthis.permission_id = 'user_contact';\n\t\tthis.viewId = 'UserContact';\n\t\tthis.script_name = 'UserContactView';\n\t\tthis.table_name_key = 'user_contact';\n\t\tthis.context_menu_name = $.i18n._( 'Employee Contacts' );\n\t\tthis.navigation_label = $.i18n._( 'Employee Contact' );\n\t\tthis.api = TTAPI.APIUserContact;\n\t\tthis.user_api = TTAPI.APIUser;\n\t\tthis.company_api = TTAPI.APICompany;\n\t\tthis.ethnic_group_api = TTAPI.APIEthnicGroup;\n\t\tthis.document_object_type_id = 115;\n\n\t\tthis.render();\n\n\t\tif ( this.sub_view_mode ) {\n\t\t\tthis.buildContextMenu( true );\n\t\t} else {\n\t\t\tthis.buildContextMenu();\n\t\t}\n\n\t\t//call init data in parent view\n\t\tif ( !this.sub_view_mode ) {\n\t\t\tthis.initData();\n\t\t}\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: ['copy'],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Import' ),\n\t\t\t\t\tid: 'import_icon',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'import_export',\n\t\t\t\t\tgroup: 'other',\n\t\t\t\t\tvue_icon: 'tticon tticon-file_download_black_24dp',\n\t\t\t\t\tpermission_result: PermissionManager.checkTopLevelPermission( 'ImportCSVEmployeeContact' ),\n\t\t\t\t\tpermission: null,\n\t\t\t\t\tsort_order: 9010\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tsetDefaultMenuImportIcon( context_btn, grid_selected_length, pId ) {\n\t\tif ( PermissionManager.checkTopLevelPermission( 'ImportCSVEmployeeContact' ) === true ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tinitOptions() {\n\t\tvar options = [\n\t\t\t{ option_name: 'status', api: this.api },\n\t\t\t{ option_name: 'type', api: this.api },\n\t\t\t{ option_name: 'sex', api: this.api },\n\t\t\t{ option_name: 'country', field_name: 'country', api: this.company_api },\n\t\t];\n\n\t\tthis.initDropDownOptions( options );\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tswitch ( key ) {\n\t\t\tcase 'country':\n\t\t\t\tvar widget = this.edit_view_ui_dic['province'];\n\t\t\t\twidget.setValue( null );\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.current_edit_record[key] = target.getValue();\n\n\t\tif ( key === 'country' ) {\n\t\t\tthis.onCountryChange();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'import_icon':\n\t\t\t\tthis.onImportClick();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonImportClick() {\n\t\tvar $this = this;\n\t\tIndexViewController.openWizard( 'ImportCSVWizard', 'UserContact', function() {\n\t\t\t$this.search();\n\t\t} );\n\t}\n\n\tsetSelectLayout() {\n\t\tif ( this.sub_view_mode ) {\n\t\t\tsuper.setSelectLayout( ['employee_first_name', 'employee_last_name', 'title', 'user_group', 'default_branch', 'default_department'] );\n\t\t} else {\n\t\t\tsuper.setSelectLayout();\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_employee_contact': { 'label': $.i18n._( 'Employee Contact' ), 'is_multi_column': true },\n\t\t\t'tab_attachment': true,\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUserContact,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user_contact',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\tvar tab_employee_contact = this.edit_view_tab.find( '#tab_employee_contact' );\n\t\tvar tab_employee_contact_column1 = tab_employee_contact.find( '.first-column' );\n\t\tvar tab_employee_contact_column2 = tab_employee_contact.find( '.second-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_employee_contact_column1 );\n\t\tthis.edit_view_tabs[0].push( tab_employee_contact_column2 );\n\n\t\t// tab_employee_contact column1\n\n\t\t// Employee\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tfield: 'user_id',\n\t\t\tset_empty: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tvar default_args = {};\n\t\tdefault_args.permission_section = 'user_contact';\n\t\tform_item_input.setDefaultArgs( default_args );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee' ), form_item_input, tab_employee_contact_column1, '' );\n\n\t\t// Status\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( {\n\t\t\tfield: 'status_id'\n\t\t} );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_employee_contact_column1 );\n\n\t\t// Type\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( {\n\t\t\tfield: 'type_id'\n\t\t} );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab_employee_contact_column1 );\n\n\t\t// First Name\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'first_name',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'First Name' ), form_item_input, tab_employee_contact_column1 );\n\n\t\t// Middle Name\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'middle_name',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Middle Name' ), form_item_input, tab_employee_contact_column1 );\n\n\t\t// Last Name\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'last_name',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Last Name' ), form_item_input, tab_employee_contact_column1 );\n\n\t\t// Gender\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( {\n\t\t\tfield: 'sex_id'\n\t\t} );\n\t\tform_item_input.setSourceData( $this.sex_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Gender' ), form_item_input, tab_employee_contact_column1 );\n\n\t\t// Ethnicity\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIEthnicGroup,\n\t\t\tfield: 'ethnic_group_id',\n\t\t\tset_empty: true,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_ethnic_group',\n\t\t\tshow_search_inputs: true\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Ethnicity' ), form_item_input, tab_employee_contact_column1 );\n\n\t\t// Home Address(Line 1)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'address1',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Home Address (Line 1)' ), form_item_input, tab_employee_contact_column1 );\n\n\t\t// Home Address(Line 2)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'address2',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Home Address (Line 2)' ), form_item_input, tab_employee_contact_column1 );\n\n\t\t// City\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'city',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'City' ), form_item_input, tab_employee_contact_column1 );\n\n\t\t// Country\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( {\n\t\t\tfield: 'country'\n\t\t} );\n\t\tform_item_input.setSourceData( $this.country_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Country' ), form_item_input, tab_employee_contact_column1 );\n\n\t\t// Province/State\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( {\n\t\t\tfield: 'province'\n\t\t} );\n\t\tform_item_input.setSourceData( [] );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Province/State' ), form_item_input, tab_employee_contact_column1 );\n\n\t\t// Postal / ZIP Code\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'postal_code',\n\t\t\twidth: 90\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Postal/ZIP Code' ), form_item_input, tab_employee_contact_column1, '' );\n\n\t\t// tab_employee_contact column2\n\n\t\t// Work Phone\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'work_phone',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Work Phone' ), form_item_input, tab_employee_contact_column2, '' );\n\n\t\t// Work Phone Ext\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'work_phone_ext',\n\t\t\twidth: 90\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Work Phone Ext' ), form_item_input, tab_employee_contact_column2 );\n\n\t\t// Home Phone\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'home_phone',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Home Phone' ), form_item_input, tab_employee_contact_column2 );\n\n\t\t// Mobile Phone\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'mobile_phone',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Mobile Phone' ), form_item_input, tab_employee_contact_column2 );\n\n\t\t// Fax\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'fax_phone',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Fax' ), form_item_input, tab_employee_contact_column2 );\n\n\t\t// Work Email\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'work_email',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Work Email' ), form_item_input, tab_employee_contact_column2 );\n\n\t\t// Home Email\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'home_email',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Home Email' ), form_item_input, tab_employee_contact_column2 );\n\n\t\t// Birth Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( {\n\t\t\tfield: 'birth_date'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Birth Date' ), form_item_input, tab_employee_contact_column2 );\n\n\t\t// SIN / SSN\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( {\n\t\t\tfield: 'sin',\n\t\t\twidth: 200\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'SIN / SSN' ), form_item_input, tab_employee_contact_column2 );\n\n\t\t// Note\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\tform_item_input.TTextArea( {\n\t\t\tfield: 'note'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Note' ), form_item_input, tab_employee_contact_column2, '', null, null, true );\n\n\t\t// Tags\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TAG_INPUT );\n\t\tform_item_input.TTagInput( {\n\t\t\tfield: 'tag',\n\t\t\tobject_type_id: 230\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Tags' ), form_item_input, tab_employee_contact_column2, '', null, null, true );\n\t}\n\n\tbuildSearchFields() {\n\t\t//super.buildSearchFields();\n\n\t\tvar default_args = {};\n\t\tdefault_args.permission_section = 'user_contact';\n\n\t\tthis.search_fields = [\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tdefault_args: default_args,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'First Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'first_name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Last Name' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'last_name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Phone' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'any_phone',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Email' ),\n\t\t\t\tfield: 'any_email',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Gender' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'sex_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Tags' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'tag',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tobject_type_id: 230,\n\t\t\t\tform_item_type: FormItemType.TAG_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Country' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'country',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.COMBO_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Province/State' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'province',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'City' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'city',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'SIN/SSN' ),\n\t\t\t\tin_column: 3,\n\t\t\t\tfield: 'sin',\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} )\n\n\t\t];\n\t}\n\n\tsetProvince( val, m ) {\n\t\tvar $this = this;\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.province_array = [];\n\t\t\tthis.adv_search_field_ui_dic['province'].setSourceData( [] );\n\t\t} else {\n\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.province_array = Global.buildRecordArray( res );\n\t\t\t\t\t$this.adv_search_field_ui_dic['province'].setSourceData( $this.province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\teSetProvince( val, refresh ) {\n\t\tvar $this = this;\n\t\tvar province_widget = $this.edit_view_ui_dic['province'];\n\n\t\tif ( !val || val === '-1' || val === '0' ) {\n\t\t\t$this.e_province_array = [];\n\t\t\tprovince_widget.setSourceData( [] );\n\t\t} else {\n\t\t\tthis.company_api.getOptions( 'province', val, {\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\tres = res.getResult();\n\t\t\t\t\tif ( !res ) {\n\t\t\t\t\t\tres = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$this.e_province_array = Global.buildRecordArray( res );\n\t\t\t\t\tif ( refresh && $this.e_province_array.length > 0 ) {\n\t\t\t\t\t\t$this.current_edit_record.province = $this.e_province_array[0].value;\n\t\t\t\t\t\tprovince_widget.setValue( $this.current_edit_record.province );\n\t\t\t\t\t}\n\n\t\t\t\t\tprovince_widget.setSourceData( $this.e_province_array );\n\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tonSetSearchFilterFinished() {\n\n\t\tif ( this.search_panel.getSelectTabIndex() === 1 ) {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar select_value = combo.getValue();\n\t\t\tthis.setProvince( select_value );\n\t\t}\n\t}\n\n\tonBuildAdvUIFinished() {\n\n\t\tthis.adv_search_field_ui_dic['country'].change( $.proxy( function() {\n\t\t\tvar combo = this.adv_search_field_ui_dic['country'];\n\t\t\tvar selectVal = combo.getValue();\n\n\t\t\tthis.setProvince( selectVal );\n\n\t\t\tthis.adv_search_field_ui_dic['province'].setValue( null );\n\n\t\t}, this ) );\n\t}\n\n\tsearchDone() {\n\t\tsuper.searchDone();\n\t\tTTPromise.resolve( 'ContactView', 'init' );\n\t}\n}\n\nUserContactViewController.loadSubView = function( container, beforeViewLoadedFun, afterViewLoadedFun ) {\n\n\tGlobal.loadViewSource( 'UserContact', 'SubUserContactView.html', function( result ) {\n\t\tvar args = {};\n\t\tvar template = _.template( result );\n\n\t\tif ( Global.isSet( beforeViewLoadedFun ) ) {\n\t\t\tbeforeViewLoadedFun();\n\t\t}\n\n\t\tif ( Global.isSet( container ) ) {\n\t\t\tcontainer.html( template( args ) );\n\t\t\tif ( Global.isSet( afterViewLoadedFun ) ) {\n\t\t\t\tafterViewLoadedFun( sub_user_contact_view_controller );\n\t\t\t}\n\t\t}\n\t} );\n};"],"names":["UserContactViewController","options","_","$","context_menu_model","context_btn","grid_selected_length","pId","target","doNotValidate","key","widget","id","$this","tab_model","tab_employee_contact","tab_employee_contact_column1","tab_employee_contact_column2","form_item_input","default_args","val","m","res","refresh","province_widget","combo","select_value","selectVal","container","beforeViewLoadedFun","afterViewLoadedFun","result","args","template"],"mappings":"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"}