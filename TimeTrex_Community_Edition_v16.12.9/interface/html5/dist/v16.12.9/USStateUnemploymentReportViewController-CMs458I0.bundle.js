import{_ as d,j as o}from"./vendor-tTApdY0Y.bundle.js";class h extends ReportBaseViewController{constructor(e={}){d.defaults(e,{form_setup_states_array:null,form_setup_ui_dic:{},form_setup_data:{},save_form_setup_data:{}}),super(e)}initReport(e){this.script_name="USStateUnemploymentReport",this.viewId="USStateUnemploymentReport",this.context_menu_name=o.i18n._("US State Unemployment"),this.navigation_label=o.i18n._("Saved Report"),this.view_file="USStateUnemploymentReportView.html",this.api=TTAPI.APIUSStateUnemploymentReport,this.include_form_setup=!0,this.form_setup_data={}}initOptions(e){var t=[{option_name:"page_orientation"},{option_name:"font_size"},{option_name:"auto_refresh"},{option_name:"chart_display_mode"},{option_name:"chart_type"},{option_name:"templates"},{option_name:"setup_fields"},{option_name:"form_setup_states"}];this.initDropDownOptions(t,function(i){e(i)})}getCustomContextMenuModel(){var e={groups:{},exclude:[],include:[{label:o.i18n._("Save Setup"),id:"save_setup",group:"form",vue_icon:"tticon tticon-settings_black_24dp",menu_align:"right",sort_order:3e3}]};return e}onContextMenuClick(e,t){var i;if(Global.isSet(t))i=t;else if(e.disabled)return;this.select_grid_last_row&&(this.export_grid.grid.jqGrid("saveRow",this.select_grid_last_row),this.select_grid_last_row=null);var _=o.i18n._("Setup data for this report has not been configured yet. Please click on the Form Setup tab to do so now.");switch(i){case"view":ProgressBar.showOverlay(),this.onViewClick(null,!1,_);break;case"view_html":ProgressBar.showOverlay(),this.onViewClick("html",!1,_);break;case"view_html_new_window":this.onViewClick("html",!1,_);break;case"export_excel":this.onViewExcelClick();break;case"cancel":this.onCancelClick();break;case"save_existed_report":this.onSaveExistedReportClick();break;case"save_new_report":this.onSaveNewReportClick();break;case"save_setup":this.onSaveSetup(o.i18n._("Form setup"));break}Global.triggerAnalyticsContextMenuClick(e,t)}buildEditViewUI(){super.buildEditViewUI();var e=this.edit_view.find("a[ref=tab_form_setup]");e.text(o.i18n._("Form Setup"))}buildFormSetupUI(){var e=this,t=this.edit_view_tab.find("#tab_form_setup"),i=t.find(".first-column");this.edit_view_tabs[3]=[],this.edit_view_tabs[3].push(i);var _=Global.loadWidgetByName(FormItemType.COMBO_BOX);_.TComboBox({field:"form_setup_type",set_empty:!1}),_.setSourceData(e.form_setup_states_array),this.addEditFieldToColumn(o.i18n._("State"),_,i,""),_.bind("formItemChange",function(n,a){e.onFormSetupChange(a.getValue())})}onFormSetupChange(e){var t=this;this.removeCurrentFormSetupUI(),this.form_setup_ui_dic={};var i={0:o.i18n._("No"),1:o.i18n._("Yes")};switch(e){case"IA":t.buildAdditionalCustomInputBox(e,"reporting_unit_number",o.i18n._("Reporting Unit Number"));break;case"CA":t.buildAdditionalCustomInputBox(e,"branch_code",o.i18n._("Branch Code")),t.buildAdditionalCustomInputBox(e,"wage_plan_code",o.i18n._("Wage Plan Code"));break;case"LA":t.buildAdditionalCustomInputBox(e,"is_multiple_county_industry",o.i18n._("Multiple County Industry"),i),t.buildAdditionalCustomInputBox(e,"is_multiple_worksite_location",o.i18n._("Multiple Worksite Location"),i),t.buildAdditionalCustomInputBox(e,"is_multiple_worksite_indicator",o.i18n._("Multiple Worksite Indicator"),i),t.buildAdditionalCustomInputBox(e,"occupation_classification_code",o.i18n._("Occupation Classification Code"));break;case"CO":t.buildAdditionalCustomInputBox(e,"branch_code",o.i18n._("Unit / Division / Location / Plant Code")),t.buildAdditionalCustomInputBox(e,"is_seasonal",o.i18n._("Seasonal"));break;case"IN":t.buildAdditionalCustomInputBox(e,"occupation_classification_code",o.i18n._("Occupation Classification Code")),t.buildAdditionalCustomInputBox(e,"designation",o.i18n._("Designation [FT/PT/Seasonal]"));break;case"MI":t.buildAdditionalCustomInputBox(e,"multi_unit_number",o.i18n._("Multi-Unit Number"));break;case"MN":t.buildAdditionalCustomInputBox(e,"reporting_unit_number",o.i18n._("Reporting Unit Number"));break;case"TX":t.buildAdditionalCustomInputBox(e,"county_code",o.i18n._("County Code"));break;default:this.edit_view_tab.find("#tab_form_setup .first-column").append('<div id="no-setup-data" style="font-weight: bold; text-align:center">'+o.i18n._("No form setup required for this state.")+"</div>");break}}onFormItemChange(e,t){if(e&&e.getField&&e.getField()=="form_setup_type"){var i={};i.form_setup_type=this.current_edit_record.form_setup_type,i[i.form_setup_type]={},this.form_setup_changed=!0;return}super.onFormItemChange(e,t)}setFormSetupData(e){e||(this.show_empty_message=!0),this.save_form_setup_data=e,e.form_setup_type&&this.edit_view_ui_dic.form_setup_type&&(this.edit_view_ui_dic.form_setup_type.setValue(e.form_setup_type),this.onFormSetupChange(e.form_setup_type))}buildAdditionalCustomInputBox(e,t,i,_=null){this.save_form_setup_data||(this.save_form_setup_data={}),this.save_form_setup_data[e]||(this.save_form_setup_data[e]={});var n=this.edit_view_tab.find("#tab_form_setup"),a=n.find(".first-column");this.edit_view_tabs[3]=[],this.edit_view_tabs[3].push(a);var u="form_setup_"+e+"_"+t,s=Global.loadWidgetByName(FormItemType.COMBO_BOX);if(s.TComboBox({field:u}),_)s.setSourceData(_),this.addEditFieldToColumn(o.i18n._(i),s,a,"",null,!0),this.setWidgetVisible([s]),this.save_form_setup_data[e]&&this.save_form_setup_data[e][t]&&s.setValue(this.save_form_setup_data[e][t]),s.trigger("formItemChange",[s,!0]);else{var p=o("<div class='h-box'></div>"),r=Global.loadWidgetByName(FormItemType.TEXT_INPUT);r.css("margin-left","10px"),r.TTextInput({field:u+"_text"}),p.append(s),p.append(r),this.addEditFieldToColumn(o.i18n._(i),[s,r],a,"",p,!0),this.setWidgetVisible([s,r]),s.bind("formItemChange",(l,m)=>{m.getValue()===0?(r.css("display","inline"),this.save_form_setup_data[e][t+"_value"]&&r.setValue(this.save_form_setup_data[e][t+"_value"])):(r.css("display","none"),r.setValue(""))}),this.api.getOptions("form_setup_state_codes",{onResult:l=>{var m=l.getResult();s.setSourceData(Global.buildRecordArray(m)),this.save_form_setup_data[e]&&this.save_form_setup_data[e][t]&&s.setValue(this.save_form_setup_data[e][t]),s.trigger("formItemChange",[s,!0])}})}this.form_setup_ui_dic[u]=this.edit_view_form_item_dic[u],delete this.edit_view_form_item_dic[u],this.editFieldResize(3)}removeCurrentFormSetupUI(){for(var e in this.form_setup_ui_dic){var t=this.form_setup_ui_dic[e];t&&t.remove()}if(o("#no-setup-data").remove(),!!this.edit_view_tab){var i=this.edit_view_tab.find("#tab_form_setup"),_=i.find(".first-column"),n=_.find(".clear-both-div");n.remove()}}getFormSetupFieldValues(e,t){for(var i={},_=0;_<t.length;_++)this.edit_view_ui_dic["form_setup_"+e+"_"+t[_]]&&!this.edit_view_ui_dic["form_setup_"+e+"_"+t[_]].getValue()?this.edit_view_ui_dic["form_setup_"+e+"_"+t[_]+"_text"]?(i[t[_]]=this.edit_view_ui_dic["form_setup_"+e+"_"+t[_]+"_text"].getValue(),i[t[_]+"_value"]=this.edit_view_ui_dic["form_setup_"+e+"_"+t[_]+"_text"].getValue()):i[t[_]]=this.edit_view_ui_dic["form_setup_"+e+"_"+t[_]].getValue():this.edit_view_ui_dic["form_setup_"+e+"_"+t[_]]?i[t[_]]=this.edit_view_ui_dic["form_setup_"+e+"_"+t[_]].getValue():i[t[_]]="";return i}getFormData(e,t){if(!e||!e.form_setup_type)return!1;if(e[e.form_setup_type]=this.getFormSetupFieldValues(e.form_setup_type,this.getFieldList(e.form_setup_type)),this.save_form_setup_data||(this.save_form_setup_data={}),this.save_form_setup_data[e.form_setup_type]=e[e.form_setup_type],this.save_form_setup_data.form_setup_type=e.form_setup_type,t)for(var i in this.save_form_setup_data)i!==!1&&typeof this.save_form_setup_data[i]!="string"&&(this.save_form_setup_data[i]=this.convertFormSetupValues(this.save_form_setup_data[i]));return this.save_form_setup_data}getFieldList(e){var t=[];switch(e){case"IA":t=["reporting_unit_number"];break;case"CA":t=["branch_code","wage_plan_code"];break;case"LA":t=["is_multiple_county_industry","is_multiple_worksite_location","is_multiple_worksite_indicator","occupation_classification_code"];break;case"CO":t=["branch_code","is_seasonal"];break;case"IN":t=["occupation_classification_code","designation"];break;case"MI":t=["multi_unit_number"];break;case"MN":t=["reporting_unit_number"];break;case"TX":t=["county_code"];break}return t}getFormSetupData(e){var t={};return t.form_setup_type=this.edit_view_ui_dic.form_setup_type.getValue(),t[t.form_setup_type]={},t=this.getFormData(t,!0),t}convertFormSetupValues(e){for(var t in e){var i=t.substr(0,t.indexOf("_value"));t.search("_value")>0&&(e[i]=e[t])}return e.form_setup_columns&&!e.columns&&e.form_setup_type!=0&&e.form_setup_columns[e.form_setup_type]&&(e.columns={},e.columns=e.form_setup_columns[e.form_setup_type].columns),e}}export{h as USStateUnemploymentReportViewController};
//# sourceMappingURL=USStateUnemploymentReportViewController-CMs458I0.bundle.js.map
