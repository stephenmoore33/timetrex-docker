import{_ as v,j as t}from"./vendor-tTApdY0Y.bundle.js";import"./TImage-D3G3HRb1.bundle.js";import"./TImageAdvBrowser-CQSTdPda.bundle.js";class g extends BaseViewController{constructor(e={}){v.defaults(e,{el:"#remittance_source_account_view_container",status_array:null,type_array:null,country_array:null,data_format_array:null,ach_transaction_type_array:null,ach_transaction_type_data:null,company_api:null}),super(e)}init(){this.edit_view_tpl="RemittanceSourceAccountEditView.html",this.permission_id="remittance_source_account",this.viewId="RemittanceSourceAccount",this.script_name="RemittanceSourceAccountView",this.table_name_key="remittance_source_account",this.context_menu_name=t.i18n._("Remittance Source Accounts"),this.navigation_label=t.i18n._("Remittance Source Account"),this.api=TTAPI.APIRemittanceSourceAccount,this.company_api=TTAPI.APICompany,this.render(),this.buildContextMenu(),this.initData(),t("#tab_advanced_content_div .edit-view-form-item-div .edit-view-form-item-label-div").css("border-top-left-radius","0px"),t("#tab_advanced_content_div .edit-view-form-item-div:first .edit-view-form-item-label-div").css("border-top-left-radius","5px")}initOptions(){var e=this,a=[{option_name:"status",api:this.api},{option_name:"type",api:this.api},{option_name:"country",field_name:"country",api:this.company_api}];this.initDropDownOptions(a),this.api.getOptions("ach_transaction_type",{onResult:function(l){var n=l.getResult();e.ach_transaction_type_data=n,e.ach_transaction_type_array=Global.buildRecordArray(n)}})}getSignatureUrl(){var e=!1;return this.current_edit_record.id&&(e=ServiceCaller.getURLByObjectType("remittance_source_account")+"&object_id="+this.current_edit_record.id),Debug.Text(e,"RemittanceSourceAccountViewController.js","RemittanceSourceAccountViewController","getSignatureUrl",10),e}setEditViewDataDone(){super.setEditViewDataDone(),this.file_browser.setImage(this.getSignatureUrl())}uniformVariable(e){if(this.edit_view_ui_dic&&this.current_edit_record.remittance_source_account_id!=TTUUID.zero_id)for(var a=1;a<=10;a++)a==1?this.edit_view_ui_dic.country.getValue()=="US"?this.edit_view_ui_dic.value1_2&&(e.value1=e.value1_2?e.value1_2:this.edit_view_ui_dic.value1_2.getValue()):this.edit_view_ui_dic.value1_1&&(e.value1=e.value1_1?e.value1_1:this.edit_view_ui_dic.value1_1.getValue()):!this.is_mass_editing&&e["value"+a]&&typeof this.edit_view_ui_dic["value"+a]>"u"&&(e["value"+a]=!1);return e}getCustomContextMenuModel(){var e={exclude:["export_excel"],include:[{label:"",id:"other_header",menu_align:"right",action_group:"other",action_group_header:!0,vue_icon:"tticon tticon-more_vert_black_24dp"},{label:t.i18n._("Sample File"),id:"export_export",action_group:"other",menu_align:"right",vue_icon:"tticon tticon-file_download_black_24dp"}]};return e}setCustomDefaultMenuIcon(e,a,l){switch(e){case"export_export":ContextMenuManager.hideMenuItem(this.determineContextMenuMountAttributes().id,a.id,!0),this.setMenuExportIcon(a,l);break}}setCustomEditMenuIcon(e,a){switch(e){case"export_export":ContextMenuManager.hideMenuItem(this.determineContextMenuMountAttributes().id,a.id,!0),this.setMenuExportIcon(a);break}}setMenuExportIcon(e){this.getSelectedItems().length>0?ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,e.id,!0):this.edit_only_mode||this.grid==null||this.sub_view_mode?ContextMenuManager.hideMenuItem(this.determineContextMenuMountAttributes().id,e.id,!1):ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,e.id,!1)}onExportClick(){var e={0:this.getGridSelectIdArray()};Global.APIFileDownload(this.api.className,"testExport",e)}onFormItemChange(e,a){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var l=e.getField(),n=e.getValue();switch(l){case"value1_1":case"value1_2":this.current_edit_record.value1=n;break;case"country":case"type_id":this.onTypeChange();break;case"data_format_id":this.onDataFormatChange();break;case"value24":n!=!1?(this.attachElement("value25").text(t.i18n._("Offset Description")),this.attachElement("value27").text(t.i18n._("Offset Routing")),this.attachElement("value28").text(t.i18n._("Offset Account")),this.edit_view_ui_dic.value25.getValue().length==0&&this.edit_view_ui_dic.value25.setValue("OFFSET")):(this.detachElement("value25"),this.detachElement("value27"),this.detachElement("value28"));break}for(var r in this.edit_view_ui_dic)this.current_edit_record[r]=this.edit_view_ui_dic[r].getValue();this.current_edit_record[l]=n,a||this.validate()}onCustomContextClick(e){switch(e){case"export_export":this.onExportClick();break}}onSaveClick(e){super.onSaveClick(e),Global.clearCache("getOptions_type")}attachElement(e){if(!(!this.edit_view_form_item_dic||!this.edit_view_form_item_dic[e])){var a=t(".place_holder_"+e);return this.edit_view_form_item_dic[e].insertBefore(a),a.remove(),t(this.edit_view_form_item_dic[e].find(".edit-view-form-item-label"))}}setCurrentEditRecordData(){for(var e in this.current_edit_record)if(this.current_edit_record.hasOwnProperty(e)){var a=this.edit_view_ui_dic[e];if(e==="value1"&&this.current_edit_record[e]&&!this.is_mass_editing&&(Global.isSet(this.ach_transaction_type_data[this.current_edit_record[e]])?this.edit_view_ui_dic.value1_2.setValue(this.current_edit_record[e]):this.edit_view_ui_dic.value1_1.setValue(this.current_edit_record[e])),Global.isSet(a))switch(e){case"value1_1":case"value1_2":break;case"type_id":a.setValue(this.current_edit_record[e]),this.onTypeChange();break;case"data_format_id":a.setValue(this.current_edit_record[e]),this.onDataFormatChange();break;default:a.setValue(this.current_edit_record[e]);break}}this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}onDataFormatChange(){var e=this,a=this.edit_view_ui_dic.type_id.getValue(),l=this.edit_view_ui_dic.data_format_id.getValue();a==!1||l==!1||(t(this.edit_view_tab.find("ul li")[1]).hide(),this.detachElement("value4"),this.detachElement("value5"),this.detachElement("value6"),this.detachElement("value7"),this.detachElement("value8"),this.detachElement("value9"),this.detachElement("value10"),this.detachElement("value11"),this.detachElement("value12"),this.detachElement("value13"),this.detachElement("value14"),this.detachElement("value15"),this.detachElement("value16"),this.detachElement("value17"),this.detachElement("value18"),this.detachElement("value19"),this.detachElement("value20"),this.detachElement("value21"),this.detachElement("value22"),this.detachElement("value23"),this.detachElement("value24"),this.detachElement("value25"),this.detachElement("value26"),this.detachElement("value27"),this.detachElement("value28"),this.detachElement("value29"),this.detachElement("value30"),this.detachElement("signature"),this.edit_view_ui_dic.value5.parent().find(".mm_field_unit_text").remove(),this.edit_view_ui_dic.value6.parent().find(".mm_field_unit_text").remove(),a!=2e3&&TTPromise.wait(null,null,function(){e.edit_view_ui_dic.value5.setWidth(200),e.edit_view_ui_dic.value6.setWidth(200)}),a==2e3?Global.getProductEdition()>=15&&(t(this.edit_view_tab.find("ul li")[1]).show(),this.attachElement("value5").text(t.i18n._("Vertical Alignment")),this.attachElement("value6").text(t.i18n._("Horizontal Alignment")),this.attachElement("signature"),this.edit_view_ui_dic.value5.parent().append('<span class="mm_field_unit_text">&nbsp;mm</span>'),this.edit_view_ui_dic.value6.parent().append('<span class="mm_field_unit_text">&nbsp;mm</span>'),TTPromise.wait(null,null,function(){e.edit_view_ui_dic&&e.edit_view_ui_dic.value5&&e.edit_view_ui_dic.value5.setWidth(42),e.edit_view_ui_dic&&e.edit_view_ui_dic.value6&&e.edit_view_ui_dic.value6.setWidth(42)})):a==3e3&&(l==5||(l==10?(t(this.edit_view_tab.find("ul li")[1]).show(),this.attachElement("value4").text(t.i18n._("Business Number")),this.attachElement("value5").text(t.i18n._("Immediate Origin")),this.attachElement("value6").text(t.i18n._("Immediate Origin Name")),this.attachElement("value7").text(t.i18n._("Immediate Dest.")),this.attachElement("value8").text(t.i18n._("Immediate Dest. Name")),this.attachElement("value9").text(t.i18n._("Trace Number")),this.attachElement("value10").text(t.i18n._("Discretionary Data")),this.attachElement("value11").text(t.i18n._("Company Name")),this.attachElement("value24").text(t.i18n._("Offset Transaction")),this.current_edit_record.value24==1&&(this.current_edit_record.value24=!0,this.attachElement("value25").text(t.i18n._("Offset Description")),this.attachElement("value27").text(t.i18n._("Offset Routing")),this.attachElement("value28").text(t.i18n._("Offset Account"))),this.attachElement("value29").text(t.i18n._("File Header Line")),this.attachElement("value30").text(t.i18n._("File Trailer Line"))):(l==20||l==30||l==50)&&(t(this.edit_view_tab.find("ul li")[1]).show(),this.attachElement("value5").text(t.i18n._("Originator ID")),this.attachElement("value6").text(t.i18n._("Originator Short Name")),this.attachElement("value7").text(t.i18n._("Data Center ID")),this.attachElement("value26").text(t.i18n._("Return Institution")),this.attachElement("value27").text(t.i18n._("Return Transit")),this.attachElement("value28").text(t.i18n._("Return Account")),this.attachElement("value29").text(t.i18n._("File Header Line")),this.attachElement("value30").text(t.i18n._("File Trailer Line"))))))}onTypeChange(){var l=this,e=this.edit_view_ui_dic.type_id.getValue(),a=this.edit_view_ui_dic.country.getValue()&&this.edit_view_ui_dic.country.getValue()!=TTUUID.zero_id?this.edit_view_ui_dic.country.getValue():this.current_edit_record.country;if(t(this.edit_view_tab.find("ul li")[1]).show(),this.detachElement("data_format_id"),this.detachElement("last_transaction_number"),this.detachElement("value1_1"),this.detachElement("value1_2"),this.detachElement("value2"),this.detachElement("value3"),!(a==!1||e==!1)){e==2e3?this.attachElement("last_transaction_number").text(t.i18n._("Last Check Number")):e==3e3&&(this.attachElement("last_transaction_number").text(t.i18n._("Last Batch Number")),!this.is_mass_editing&&a!=null&&(a=="US"?(this.attachElement("value1_2").text(t.i18n._("Account Type")),this.attachElement("value2").text(t.i18n._("Routing")),this.attachElement("value3").text(t.i18n._("Account")),Global.isFalseOrNull(this.current_edit_record.value1)&&(this.current_edit_record.value1=this.edit_view_ui_dic.value1_2.getValue(),this.current_edit_record.value1_2=this.edit_view_ui_dic.value1_2.getValue())):a=="CA"?(this.attachElement("value1_1").text(t.i18n._("Institution")),this.attachElement("value2").text(t.i18n._("Bank Transit")),this.attachElement("value3").text(t.i18n._("Account"))):(this.attachElement("value1_2").text(t.i18n._("Account Type")),this.attachElement("value2").text(t.i18n._("Routing")),this.attachElement("value3").text(t.i18n._("Account")),Global.isFalseOrNull(this.current_edit_record.value1)&&(this.current_edit_record.value1=this.edit_view_ui_dic.value1_2.getValue(),this.current_edit_record.value1_2=this.edit_view_ui_dic.value1_2.getValue())))),t("#tab_advanced_content_div .edit-view-form-item-div .edit-view-form-item-label-div").css("border-top-left-radius","0px"),t("#tab_advanced_content_div .edit-view-form-item-div:first .edit-view-form-item-label-div").css("border-top-left-radius","5px");var l=this;this.api.getOptions("data_format",{type_id:e,country:a},{async:!1,onResult:function(n){l.attachElement("data_format_id");var r=n.getResult();l.data_format_array=Global.buildRecordArray(r),Global.isSet(l.basic_search_field_ui_dic.data_format_id)&&l.basic_search_field_ui_dic.data_format_id.setSourceData(l.data_format_array),Global.isSet(l.adv_search_field_ui_dic.data_format_id)&&l.adv_search_field_ui_dic.data_format_id.setSourceData(l.data_format_array),l.edit_view_ui_dic.data_format_id.setSourceData(l.data_format_array),l.current_edit_record.data_format_id&&r[l.current_edit_record.data_format_id]?l.edit_view_ui_dic.data_format_id.setValue(l.current_edit_record.data_format_id):l.current_edit_record.data_format_id=l.edit_view_ui_dic.data_format_id.getValue(),l.onDataFormatChange()}}),this.editFieldResize()}}buildEditViewUI(){super.buildEditViewUI();var e=this,a={tab_remittance_source_account:{label:t.i18n._("Remittance Source Account")},tab_advanced:{label:t.i18n._("Advanced")},tab_audit:!0};this.setTabModel(a),this.navigation.AComboBox({api_class:TTAPI.APIRemittanceSourceAccount,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_remittance_source_account",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var l=this.edit_view_tab.find("#tab_remittance_source_account"),n=l.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(n);var r=this.edit_view_tab.find("#tab_advanced"),o=r.find(".first-column");this.edit_view_tabs[1]=[],this.edit_view_tabs[1].push(o);var i=Global.loadWidgetByName(FormItemType.AWESOME_BOX);i.AComboBox({api_class:TTAPI.APILegalEntity,allow_multiple_selection:!1,layout_name:"global_legal_entity",field:"legal_entity_id",set_any:!0,show_search_inputs:!0}),this.addEditFieldToColumn(t.i18n._("Legal Entity"),i,n,""),i=Global.loadWidgetByName(FormItemType.COMBO_BOX),i.TComboBox({field:"status_id"}),i.setSourceData(e.status_array),this.addEditFieldToColumn(t.i18n._("Status"),i,n,""),i=Global.loadWidgetByName(FormItemType.TEXT_INPUT),i.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn(t.i18n._("Name"),i,n),i.parent().width("45%"),i=Global.loadWidgetByName(FormItemType.TEXT_AREA),i.TTextArea({field:"description",width:"100%"}),this.addEditFieldToColumn(t.i18n._("Description"),i,n),i.parent().width("45%"),i=Global.loadWidgetByName(FormItemType.COMBO_BOX),i.TComboBox({field:"type_id"}),i.setSourceData(e.type_array),this.addEditFieldToColumn(t.i18n._("Type"),i,n,""),i=Global.loadWidgetByName(FormItemType.COMBO_BOX),i.TComboBox({field:"country",set_empty:!0}),i.setSourceData(e.country_array),this.addEditFieldToColumn(t.i18n._("Country"),i,n),i=Global.loadWidgetByName(FormItemType.AWESOME_BOX),i.AComboBox({api_class:TTAPI.APICurrency,allow_multiple_selection:!1,layout_name:"global_currency",field:"currency_id",set_empty:!0,show_search_inputs:!0}),this.addEditFieldToColumn(t.i18n._("Currency"),i,n),i=Global.loadWidgetByName(FormItemType.COMBO_BOX),i.TComboBox({field:"data_format_id"}),i.setSourceData(e.data_format_array),this.addEditFieldToColumn(t.i18n._("Format"),i,n,"",null,!0),i=Global.loadWidgetByName(FormItemType.TEXT_INPUT),i.TTextInput({field:"last_transaction_number",width:"60"}),this.addEditFieldToColumn(t.i18n._("Last Transaction Number"),i,n,"",null,!0);for(var _=1;_<=30;_++){var s="200",m=this.edit_view_ui_dic.type_id.getValue();m==2e3&&Global.getProductEdition()>=15&&(_==5||_==6)&&(s=42),(_==29||_==30)&&(s="500");var u=n;_>3&&(u=o),_==1?(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT),i.TTextInput({field:"value1_1",validation_field:"value1",width:s}),this.addEditFieldToColumn(t.i18n._("Value"+_),i,u,"",null,!0),i=Global.loadWidgetByName(FormItemType.COMBO_BOX),i.TComboBox({field:"value1_2",validation_field:"value1"}),i.setSourceData(e.ach_transaction_type_array),this.addEditFieldToColumn(t.i18n._("Value"+_),i,u,"",null,!0)):(_==24?(i=Global.loadWidgetByName(FormItemType.CHECKBOX),i.TCheckbox({field:"value"+_})):(i=Global.loadWidgetByName(FormItemType.TEXT_INPUT),i.TTextInput({field:"value"+_,width:s})),this.addEditFieldToColumn(t.i18n._("Value"+_),i,u,"",null,!0))}typeof FormData>"u"?(i=Global.loadWidgetByName(FormItemType.IMAGE_BROWSER),this.file_browser=i.TImageBrowser({field:"signature",default_width:256,default_height:47}),this.file_browser.bind("imageChange",function(c,d){new ServiceCaller().uploadFile(d.getValue(),"object_type=remittance_source_account&object_id="+e.current_edit_record.id,{onResult:function(h){h.toLowerCase()==="true"?e.file_browser.setImage(e.getSignatureUrl()):TAlertManager.showAlert(h,"Error")}})})):(i=Global.loadWidgetByName(FormItemType.IMAGE_AVD_BROWSER),this.file_browser=i.TImageAdvBrowser({field:"signature",callBack:function(c){new ServiceCaller().uploadFile(c,"object_type=remittance_source_account&object_id="+e.current_edit_record.id,{onResult:function(d){d.toLowerCase()==="true"?e.file_browser.setImage(e.getSignatureUrl()):TAlertManager.showAlert(d,"Error")}})}})),this.is_edit?(this.attachElement("signature"),this.file_browser.setEnableDelete(!0),this.file_browser.bind("deleteClick",function(c,d){e.api.deleteImage(e.current_edit_record.id,{onResult:function(h){e.onDeleteImage()}})})):this.detachElement("signature"),this.addEditFieldToColumn(t.i18n._("Signature"),this.file_browser,o,"",null,!0,!0)}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:t.i18n._("Legal Entity"),in_column:1,field:"legal_entity_id",layout_name:"global_legal_entity",api_class:TTAPI.APILegalEntity,multiple:!0,basic_search:!0,adv_search:!1,script_name:"LegalEntityView",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Status"),in_column:1,field:"status_id",multiple:!0,basic_search:!0,adv_search:!1,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:t.i18n._("Created By"),in_column:3,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,script_name:"EmployeeView",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Updated By"),in_column:3,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,script_name:"EmployeeView",form_item_type:FormItemType.AWESOME_BOX})]}}export{g as RemittanceSourceAccountViewController};
//# sourceMappingURL=RemittanceSourceAccountViewController-Bn4g68GX.bundle.js.map
