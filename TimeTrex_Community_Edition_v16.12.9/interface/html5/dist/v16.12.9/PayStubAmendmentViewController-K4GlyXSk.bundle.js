import{_ as y,j as n,e as g}from"./vendor-tTApdY0Y.bundle.js";class T extends BaseViewController{constructor(e={}){y.defaults(e,{el:"#pay_stub_amendment_view_container",user_status_array:null,filtered_status_array:null,type_array:null,is_mass_adding:!1,user_api:null,user_group_api:null,user_wage_api:null,job_api:null,job_item_api:null,department_api:null}),super(e)}init(e){this.edit_view_tpl="PayStubAmendmentEditView.html",this.permission_id="pay_stub_amendment",this.viewId="PayStubAmendment",this.script_name="PayStubAmendmentView",this.table_name_key="pay_stub_amendment",this.context_menu_name=n.i18n._("Pay Stub Amendment"),this.navigation_label=n.i18n._("Pay Stub Amendment"),this.api=TTAPI.APIPayStubAmendment,this.user_api=TTAPI.APIUser,this.user_group_api=TTAPI.APIUserGroup,this.currency_api=TTAPI.APICurrency,this.user_wage_api=TTAPI.APIUserWage,Global.getProductEdition()>=20&&(this.job_api=TTAPI.APIJob,this.job_item_api=TTAPI.APIJobItem,this.department_api=TTAPI.APIDepartment),this.initPermission(),this.render(),this.buildContextMenu(),this.initData()}initPermission(){super.initPermission(),this.branchUIValidate()?this.show_branch_ui=!0:this.show_branch_ui=!1,this.departmentUIValidate()?this.show_department_ui=!0:this.show_department_ui=!1,this.jobUIValidate()?this.show_job_ui=!0:this.show_job_ui=!1,this.jobItemUIValidate()?this.show_job_item_ui=!0:this.show_job_item_ui=!1}initOptions(){var e=this,t=[{option_name:"type",api:this.api},{option_name:"status",field_name:"user_status_id",api:this.user_api},{option_name:"filtered_status",field_name:"status_id",api:this.api}];this.initDropDownOptions(t),this.user_group_api.getUserGroup("",!1,!1,{onResult:function(i){i=i.getResult(),i=Global.buildTreeRecord(i),e.user_group_array=i,!e.sub_view_mode&&e.basic_search_field_ui_dic.group_id&&(e.basic_search_field_ui_dic.group_id.setSourceData(i),e.adv_search_field_ui_dic.group_id.setSourceData(i))}}),this.api.getOptions("status",!1,!1,{onResult:function(i){var s=Global.buildRecordArray(i.getResult());!e.sub_view_mode&&e.basic_search_field_ui_dic.status_id&&(e.basic_search_field_ui_dic.status_id.setSourceData(s),e.adv_search_field_ui_dic.status_id&&e.adv_search_field_ui_dic.status_id.setSourceData(s))}})}jobUIValidate(e){return e||(e=this.permission_id),!!(PermissionManager.validate("job","enabled")&&PermissionManager.validate(e,"edit_job")&&Global.getProductEdition()>=20)}jobItemUIValidate(e){return e||(e=this.permission_id),!!(PermissionManager.validate("job_item","enabled")&&PermissionManager.validate(e,"edit_job_item"))}branchUIValidate(e){return e||(e=this.permission_id),!!PermissionManager.validate(e,"edit_branch")}departmentUIValidate(e){return e||(e=this.permission_id),!!PermissionManager.validate(e,"edit_department")}getUserHourlyRate(e){var t=this;e||(e=this.current_edit_record.user_id),(TTUUID.isUUID(e)==!1||n.isArray(e)&&e.length!=1)&&(e=TTUUID.zero_id),this.user_wage_api.getUserWage({filter_data:{user_id:e,wage_group_id:TTUUID.zero_id}},!1,!0,{onResult:function(i){var s="0.00",r=i.getResult();r&&r.length>0&&(r=r[0],s=r.hourly_rate),t.edit_view_ui_dic.rate.setValue(s),t.current_edit_record.rate=s,t.calcAmount()}})}getFilterColumnsFromDisplayColumns(){var e={};e.is_owner=!0,e.id=!0,e.user_id=!0,e.is_child=!0,e.in_use=!0,e.first_name=!0,e.last_name=!0,e.effective_date=!0;var t=[];if(this.grid&&(t=this.grid.getGridParam("colModel")),t)for(var i=t.length,s=0;s<i;s++){var r=t[s];e[r.name]=!0}return e}onReportPrintClick(e){var t=this,i,s=[],r=[],a=[];t.edit_view&&t.current_edit_record.id?(s.push(t.current_edit_record.id),r.push(t.current_edit_record.user_id),a.push(t.current_edit_record.pay_period_id),t.current_edit_record.start_date):(i=this.getGridSelectIdArray(),n.each(i,function(d,l){var c=t.getRecordFromGridById(l);s.push(c.id),r.push(c.user_id),a.push(c.pay_period_id),c.start_date}));var _={filter_data:{id:s}},o={0:_,1:!0,2:e};this.doFormIFrameCall(o)}getCustomContextMenuModel(){var e={exclude:[],include:[{label:n.i18n._("Jump To"),id:"jump_to_header",menu_align:"right",action_group:"jump_to",action_group_header:!0,permission_result:!1,sort_order:9050},{label:n.i18n._("TimeSheet"),id:"timesheet",menu_align:"right",action_group:"jump_to",group:"navigation",sort_order:9050},{label:n.i18n._("Pay Stubs"),id:"pay_stub",menu_align:"right",action_group:"jump_to",group:"navigation",sort_order:9050},{label:n.i18n._("Edit Employee"),id:"edit_employee",menu_align:"right",action_group:"jump_to",group:"navigation",sort_order:9050},{label:n.i18n._("Import"),id:"import_icon",menu_align:"right",action_group:"import_export",group:"other",vue_icon:"tticon tticon-file_download_black_24dp",permission_result:PermissionManager.checkTopLevelPermission("ImportCSVPayStubAmendment"),sort_order:9010}]};return e}setCustomDefaultMenuIcon(e,t,i){switch(e){case"timesheet":this.setDefaultMenuViewIcon(t,i,"punch");break;case"pay_stub":this.setDefaultMenuViewIcon(t,i,"pay_stub");break;case"edit_employee":this.setDefaultMenuEditIcon(t,i,"user");break;case"print_checks":this.setDefaultMenuPrintChecksIcon(t,i);break;case"direct_deposit":this.setDefaultMenuDirectDepositIcon(t,i);break}}setDefaultMenuImportIcon(e,t,i){PermissionManager.checkTopLevelPermission("ImportCSVPayStubAmendment")===!0?ContextMenuManager.hideMenuItem(this.determineContextMenuMountAttributes().id,e.id,!0):ContextMenuManager.hideMenuItem(this.determineContextMenuMountAttributes().id,e.id,!1)}setDefaultMenuCopyIcon(e,t,i){ContextMenuManager.hideMenuItem(this.determineContextMenuMountAttributes().id,e.id,!1)}setEditMenuCopyIcon(e,t,i){ContextMenuManager.hideMenuItem(this.determineContextMenuMountAttributes().id,e.id,!1)}setDefaultMenuViewIcon(e,t,i){i==="punch"||i==="schedule"||i==="pay_stub"?super.setDefaultMenuViewIcon(e,t,i):((!this.viewPermissionValidate(i)||this.edit_only_mode)&&ContextMenuManager.hideMenuItem(this.determineContextMenuMountAttributes().id,e.id,!1),t>0&&this.viewOwnerOrChildPermissionValidate()?ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,e.id,!0):ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,e.id,!1))}setDefaultMenuPrintChecksIcon(e,t,i){t>0?ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,e.id,!0):ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,e.id,!1)}setDefaultMenuDirectDepositIcon(e,t,i){t>0?ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,e.id,!0):ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,e.id,!1)}setCustomEditMenuIcon(e,t){switch(e){case"timesheet":this.setEditMenuViewIcon(t,"punch");break;case"pay_stub":this.setEditMenuViewIcon(t,"pay_stub");break;case"edit_employee":this.setEditMenuViewIcon(t,"user");break;case"print_checks":case"direct_deposit":this.setEditMenuViewIcon(t);break}}onFormItemChange(e,t){this.setIsChanged(e),this.setMassEditingFieldsWhenFormChange(e);var i=e.getField(),s=e.getValue();switch(this.current_edit_record[i]=s,i){case"user_id":n.isArray(this.current_edit_record.user_id)&&this.current_edit_record.user_id.length>1?this.is_mass_adding=!0:this.is_mass_adding=!1,t=!0,this.setCurrency(),this.setEditMenu();break;case"type_id":this.onTypeChange();break;case"rate":case"units":case"amount":this.is_mass_editing&&(e.isChecked()?(this.edit_view_ui_dic.rate.setCheckBox(!0),this.edit_view_ui_dic.units.setCheckBox(!0),this.edit_view_ui_dic.amount.setCheckBox(!0)):(this.edit_view_ui_dic.rate.setCheckBox(!1),this.edit_view_ui_dic.units.setCheckBox(!1),this.edit_view_ui_dic.amount.setCheckBox(!1))),this.current_edit_record.amount=this.edit_view_ui_dic.amount.getValue();break;case"job_quick_search":case"job_item_quick_search":Global.getProductEdition()>=20&&this.onJobQuickSearch(i,s);break;case"job_id":Global.getProductEdition()>=20&&(this.edit_view_ui_dic.job_quick_search.setValue(e.getValue(!0)&&e.getValue(!0).manual_id?e.getValue(!0).manual_id:""),this.setJobItemValueWhenJobChanged(e.getValue(!0),"job_item_id",{status_id:10,job_id:this.current_edit_record.job_id}),this.edit_view_ui_dic.job_quick_search.setCheckBox(!0));break;case"job_item_id":Global.getProductEdition()>=20&&(this.edit_view_ui_dic.job_item_quick_search.setValue(e.getValue(!0)&&e.getValue(!0).manual_id?e.getValue(!0).manual_id:""),this.edit_view_ui_dic.job_item_quick_search.setCheckBox(!0),this.setPunchTagValuesWhenCriteriaChanged(this.getPunchTagFilterData(),"punch_tag_id"));break}t||this.validate()}onTypeChange(){this.current_edit_record.type_id==10?(this.detachElement("percent_amount"),this.detachElement("percent_amount_entry_name_id"),this.attachElement("rate"),this.attachElement("units"),this.attachElement("amount")):this.current_edit_record.type_id==20&&(this.attachElement("percent_amount"),this.attachElement("percent_amount_entry_name_id"),this.detachElement("rate"),this.detachElement("units"),this.detachElement("amount")),this.editFieldResize()}calcAmount(){var e=this.edit_view_ui_dic.rate,t=this.edit_view_ui_dic.units,i=this.edit_view_ui_dic.amount;if(e&&e.getValue().length>0&&t&&t.getValue().length>0){var s=new g(parseFloat(e.getValue())).mul(parseFloat(t.getValue())).toFixed(4);Debug.Text("Calculate Amount before rounding: "+s,"PayStubAmendmentViewController.js","PayStubAmendmentViewController","onFormItemKeyUp",10);var r;this.currency_array&&this.currency_array.round_decimal_places?r=this.currency_array.round_decimal_places:r=2,i.setValue(Global.MoneyRound(s,r))}else i&&i.getValue()==""&&i.setValue("0.00");!this.is_mass_editing&&this.edit_view_ui_dic.amount&&this.current_edit_record&&(this.current_edit_record.amount=this.edit_view_ui_dic.amount.getValue())}onRateOrUnitChange(){var e=this.edit_view_ui_dic.rate,t=this.edit_view_ui_dic.units,i=this.edit_view_ui_dic.amount;e.getValue().length>0||t.getValue().length>0?i.setReadOnly(!0):i.setReadOnly(!1)}onFormItemKeyUp(e){this.onRateOrUnitChange(),this.calcAmount()}onFormItemKeyDown(e){this.onRateOrUnitChange()}onCustomContextClick(e){switch(e){case"import_icon":this.onImportClick();break;case"timesheet":case"pay_stub":case"edit_employee":this.onNavigationClick(e);break}}onImportClick(){var e=this;IndexViewController.openWizard("ImportCSVWizard","PayStubAmendment",function(){e.search()})}onNavigationClick(e){var t=this,i,s={},r=[],a=[],_;switch(t.edit_view&&t.current_edit_record.id?(a.push(t.current_edit_record.id),r.push(t.current_edit_record.user_id),_=t.current_edit_record.effective_date):(i=this.getGridSelectIdArray(),n.each(i,function(o,d){var l=t.getRecordFromGridById(d);a.push(l.id),r.push(l.user_id),_=l.effective_date})),e){case"timesheet":r.length>0&&(s.user_id=r[0],s.base_date=_,Global.addViewTab(t.viewId,n.i18n._("Pay Stub Amendments"),window.location.href),IndexViewController.goToView("TimeSheet",s));break;case"pay_stub":r.length>0&&(s.filter_data={},s.filter_data.user_id=r[0],Global.addViewTab(t.viewId,n.i18n._("Pay Stub Amendments"),window.location.href),IndexViewController.goToView("PayStub",s));break;case"edit_employee":r.length>0&&IndexViewController.openEditView(this,"Employee",r[0]);break}}onReportMenuClick(e){this.onReportPrintClick(e)}doFormIFrameCall(e){Global.APIFileDownload(this.api.className,"get"+this.api.key_name,e)}setCurrency(){var e=this;if(Global.isSet(this.current_edit_record.user_id)){var t={};t.filter_data={user_id:this.current_edit_record.user_id},this.currency_api.getCurrency(t,!1,!1,{onResult:function(i){i=i.getResult(),Global.isArray(i)?(e.currency_array=i[0],e.calcAmount()):e.currency_array=null}})}}setCurrentEditRecordData(){this.setDefaultData({type_id:10}),super.setCurrentEditRecordData()}setEditViewDataDone(){super.setEditViewDataDone(),this.setCurrency(),this.onTypeChange(),this.onRateOrUnitChange()}validate(){var e=this,s={};if(this.is_mass_editing){for(var t in this.edit_view_ui_dic)if(t!="status_id"){var i=this.edit_view_ui_dic[t];Global.isSet(i.isChecked)&&i.isChecked()&&i.getEnabled()&&(s[t]=i.getValue())}}else s=this.uniformVariable(this.current_edit_record);var s=this.buildMassAddRecord(s);this.api["validate"+this.api.key_name](s,{onResult:function(r){e.validateResult(r)}})}removeEditView(){this.is_mass_adding=!1,super.removeEditView()}buildMassAddRecord(e){if(n.isArray(e.user_id)){var t=[],i=e.user_id.length;if(i>0){for(var s=0;s<i;s++){var r=Global.clone(e);r.user_id=e.user_id[s],t.push(r)}return this.setEditMenu(),this.uniformVariable(t)}else e.user_id=e.user_id.toString()}return this.uniformVariable(e)}onSaveAndContinue(e){var t=this;Global.isSet(e)||(e=!1),this.is_changed=!1,this.is_add=!1,LocalCacheData.current_doing_context_action="save_and_continue";var i=this.buildMassAddRecord(this.current_edit_record);this.api["set"+this.api.key_name](i,!1,e,{onResult:function(s){t.onSaveAndContinueResult(s)}})}doSaveAPICall(e,t){e=this.buildMassAddRecord(e),super.doSaveAPICall(e,t)}onSaveAndCopy(e){var t=this;Global.isSet(e)||(e=!1),this.is_add=!0,this.is_changed=!1;var i=this.current_edit_record;LocalCacheData.current_doing_context_action="save_and_copy",this.clearNavigationData();var i=this.buildMassAddRecord(i);this.api["set"+this.api.key_name](i,!1,e,{onResult:function(s){if(s&&s.isValid()){var r=s.getResult();r===!0?t.refresh_id=t.current_edit_record.id:TTUUID.isUUID(r)&&r!=TTUUID.zero_id&&r!=TTUUID.not_exist_id&&(t.refresh_id=r),t.search(!1),t.onCopyAsNewClick()}else t.setErrorTips(s),t.setErrorMenu()}})}onSaveAndNewClick(e){var t=this;Global.isSet(e)||(e=!1),this.is_add=!0;var i=this.current_edit_record;LocalCacheData.current_doing_context_action="new";var i=this.buildMassAddRecord(i);this.api["set"+this.api.key_name](i,!1,e,{onResult:function(s){if(s&&s.isValid()){var r=s.getResult();r===!0?t.refresh_id=t.current_edit_record.id:TTUUID.isUUID(r)&&r!=TTUUID.zero_id&&r!=TTUUID.not_exist_id&&(t.refresh_id=r),t.search(!1),t.onAddClick(!0)}else t.setErrorTips(s),t.setErrorMenu()}})}setEditMenuSaveAndContinueIcon(e,t){this.saveAndContinueValidate(e,t),(this.is_mass_adding||this.is_mass_editing||this.is_viewing||this.current_edit_record&&Global.isArray(this.current_edit_record.user_id)&&this.current_edit_record.user_id.length>1)&&ContextMenuManager.disableMenuItem(this.determineContextMenuMountAttributes().id,e.id,!1)}checkTabPermissions(e){var t=!1;switch(e){case"tab_cost_centers":(this.branchUIValidate()||this.departmentUIValidate()||this.jobUIValidate()||this.jobItemUIValidate())&&(t=!0);break;default:t=super.checkTabPermissions(e);break}return t}buildEditViewUI(){super.buildEditViewUI();var e=this,t=!1,i={tab_pay_stub_amendment:{label:n.i18n._("Pay Stub Amendment")},tab_cost_centers:{label:n.i18n._("Cost Centers")},tab_audit:!0};this.setTabModel(i),this.navigation.AComboBox({api_class:TTAPI.APIPayStubAmendment,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_pay_stub_amendment",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var s=this.edit_view_tab.find("#tab_pay_stub_amendment"),r=s.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(r),this.is_add&&(t=!0);var a=Global.loadWidgetByName(FormItemType.AWESOME_BOX);a.AComboBox({api_class:TTAPI.APIUser,allow_multiple_selection:t,layout_name:"global_user",show_search_inputs:!0,set_empty:!0,field:"user_id"});var _={};_.permission_section="pay_stub_amendment",a.setDefaultArgs(_),this.addEditFieldToColumn(n.i18n._("Employee(s)"),a,r,"");var o={},d={};d.type_id=[10,20,30,50,60,65,80],o.filter_data=d,a=Global.loadWidgetByName(FormItemType.AWESOME_BOX),a.AComboBox({api_class:TTAPI.APIPayStubEntryAccount,allow_multiple_selection:!1,layout_name:"global_PayStubAccount",show_search_inputs:!0,set_empty:!0,field:"pay_stub_entry_name_id",validation_field:"pay_stub_entry_name"}),a.setDefaultArgs(o),this.addEditFieldToColumn(n.i18n._("Pay Stub Account"),a,r),a=Global.loadWidgetByName(FormItemType.COMBO_BOX),a.TComboBox({field:"type_id",set_empty:!1}),a.setSourceData(e.type_array),this.addEditFieldToColumn(n.i18n._("Amount Type"),a,r),a=Global.loadWidgetByName(FormItemType.TEXT_INPUT),a.TTextInput({field:"units",width:114,hasKeyEvent:!0}),this.addEditFieldToColumn(n.i18n._("Units"),a,r,"",null,!0,null,null,!0),a=Global.loadWidgetByName(FormItemType.TEXT_INPUT),a.TTextInput({field:"rate",width:114,hasKeyEvent:!0});var l=n("<div class='widget-h-box'></div>");if(l.append(a),!this.is_viewing){var c=n("<input class='t-button' style='margin-left: 5px; height: 25px;' type='button' value='"+n.i18n._("Get Hourly Rate")+"'></input>");c.click(function(){e.getUserHourlyRate()}),l.append(c)}this.addEditFieldToColumn(n.i18n._("Rate"),a,r,"",l,!0,null,null,!0),a=Global.loadWidgetByName(FormItemType.TEXT_INPUT),a.TTextInput({field:"amount",width:114}),this.addEditFieldToColumn(n.i18n._("Amount"),a,r,"",null,!0),a=Global.loadWidgetByName(FormItemType.TEXT_INPUT),a.TTextInput({field:"percent_amount",width:79}),this.addEditFieldToColumn(n.i18n._("Percent"),a,r,"",null,!0),o={},d={},d.type_id=[10,20,30,40,50,60,65],o.filter_data=d,a=Global.loadWidgetByName(FormItemType.AWESOME_BOX),a.AComboBox({api_class:TTAPI.APIPayStubEntryAccount,allow_multiple_selection:!1,layout_name:"global_PayStubAccount",show_search_inputs:!0,set_empty:!0,field:"percent_amount_entry_name_id"}),a.setDefaultArgs(o),this.addEditFieldToColumn(n.i18n._("Percent of"),a,r,"",null,!0),a=Global.loadWidgetByName(FormItemType.TEXT_INPUT),a.TTextInput({field:"description",width:"100%"}),this.addEditFieldToColumn(n.i18n._("Pay Stub Note (Public)"),a,r),a.parent().width("45%"),a=Global.loadWidgetByName(FormItemType.TEXT_AREA),a.TTextArea({field:"private_description"}),this.addEditFieldToColumn(n.i18n._("Description (Private)"),a,r,"",null,null,!0),a=Global.loadWidgetByName(FormItemType.DATE_PICKER),a.TDatePicker({field:"effective_date"}),this.addEditFieldToColumn(n.i18n._("Effective Date"),a,r);var f=this.edit_view_tab.find("#tab_cost_centers"),h=f.find(".first-column");if(this.edit_view_tabs[1]=[],this.edit_view_tabs[1].push(h),a=Global.loadWidgetByName(FormItemType.AWESOME_BOX),a.AComboBox({api_class:TTAPI.APIBranch,allow_multiple_selection:!1,layout_name:"global_branch",show_search_inputs:!0,set_empty:!0,field:"branch_id",addition_source_function:function(u,m){return e.onSourceDataCreate(u,m)},added_items:[{value:TTUUID.not_exist_id,label:Global.default_item}]}),this.addEditFieldToColumn(n.i18n._("Branch"),a,h,"",null,!0),this.show_branch_ui||this.detachElement("branch_id"),a=Global.loadWidgetByName(FormItemType.AWESOME_BOX),a.AComboBox({api_class:TTAPI.APIDepartment,allow_multiple_selection:!1,layout_name:"global_department",show_search_inputs:!0,set_empty:!0,field:"department_id",addition_source_function:function(u,m){return e.onSourceDataCreate(u,m)},added_items:[{value:TTUUID.not_exist_id,label:Global.default_item}]}),this.addEditFieldToColumn(n.i18n._("Department"),a,h,"",null,!0),this.show_department_ui||this.detachElement("department_id"),Global.getProductEdition()>=20){a=Global.loadWidgetByName(FormItemType.AWESOME_BOX),a.AComboBox({api_class:TTAPI.APIJob,allow_multiple_selection:!1,layout_name:"global_job",show_search_inputs:!0,set_empty:!0,setRealValueCallBack:function(u){u&&p.setValue(u.manual_id)},field:"job_id",addition_source_function:function(u,m){return e.onSourceDataCreate(u,m)},added_items:[{value:TTUUID.not_exist_id,label:Global.default_item}]}),l=n("<div class='widget-h-box'></div>");var p=Global.loadWidgetByName(FormItemType.TEXT_INPUT);p.TTextInput({field:"job_quick_search",disable_keyup_event:!0}),p.addClass("job-coder"),l.append(p),l.append(a),this.addEditFieldToColumn(n.i18n._("Job"),[a,p],h,"",l,!0),this.show_job_ui||this.detachElement("job_id"),a=Global.loadWidgetByName(FormItemType.AWESOME_BOX),a.AComboBox({api_class:TTAPI.APIJobItem,allow_multiple_selection:!1,layout_name:"global_job_item",show_search_inputs:!0,set_empty:!0,setRealValueCallBack:function(u){u&&b.setValue(u.manual_id)},field:"job_item_id",addition_source_function:function(u,m){return e.onSourceDataCreate(u,m)},added_items:[{value:TTUUID.not_exist_id,label:Global.default_item}]}),l=n("<div class='widget-h-box'></div>");var b=Global.loadWidgetByName(FormItemType.TEXT_INPUT);b.TTextInput({field:"job_item_quick_search",disable_keyup_event:!0}),b.addClass("job-coder"),l.append(b),l.append(a),this.addEditFieldToColumn(n.i18n._("Task"),[a,b],h,"",l,!0),this.show_job_item_ui||this.detachElement("job_item_id")}}onSourceDataCreate(e,t){var i=e.getDisplayColumns(),s={};return n.each(i,function(r,a){return s.id=TTUUID.not_exist_id,s[a.name]=Global.default_item,!1}),(!t||n.type(t)!=="array")&&(t=[]),t.unshift(s),t}buildSearchFields(){super.buildSearchFields();var e={};e.permission_section="pay_stub_amendment",this.search_fields=[new SearchField({label:n.i18n._("Status"),in_column:1,field:"status_id",multiple:!0,basic_search:!0,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:n.i18n._("Pay Period"),in_column:1,field:"pay_period_id",layout_name:"global_Pay_period",api_class:TTAPI.APIPayPeriod,multiple:!0,basic_search:!0,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:n.i18n._("Employee"),in_column:1,field:"user_id",default_args:e,layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:n.i18n._("Pay Stub Account"),in_column:1,field:"pay_stub_entry_name_id",layout_name:"global_PayStubAccount",api_class:TTAPI.APIPayStubEntryAccount,multiple:!0,basic_search:!0,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:n.i18n._("Title"),field:"title_id",in_column:1,layout_name:"global_job_title",api_class:TTAPI.APIUserTitle,multiple:!0,basic_search:!1,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:n.i18n._("Employee Status"),in_column:2,field:"user_status_id",multiple:!0,basic_search:!0,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:n.i18n._("Group"),in_column:2,multiple:!0,field:"group_id",layout_name:"global_tree_column",tree_mode:!0,basic_search:!0,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:n.i18n._("Branch"),in_column:2,field:"branch_id",layout_name:"global_branch",api_class:TTAPI.APIBranch,multiple:!0,basic_search:!0,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:n.i18n._("Department"),field:"department_id",in_column:2,layout_name:"global_department",api_class:TTAPI.APIDepartment,multiple:!0,basic_search:!0,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:n.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!1,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:n.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!1,adv_search:!0,form_item_type:FormItemType.AWESOME_BOX})]}uniformVariable(e){return e.status_id&&delete e.status_id,super.uniformVariable(e)}copyAsNewResetIds(e){return e=this.uniformVariable(e),e.id=null,e.effective_date=new Date().format(Global.getLoginUserDateFormat()),e}}export{T as PayStubAmendmentViewController};
//# sourceMappingURL=PayStubAmendmentViewController-K4GlyXSk.bundle.js.map
