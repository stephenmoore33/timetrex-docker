{"version":3,"file":"ClientPaymentViewController-CBrYr85U.bundle.js","sources":["../../views/invoice/client_payment/ClientPaymentViewController.js"],"sourcesContent":["import '@/global/widgets/filebrowser/TImage';\nimport '@/global/widgets/filebrowser/TImageAdvBrowser';\n\nexport class ClientPaymentViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#client_payment_view_container',\n\n\t\t\t// _required_files: ['TImageAdvBrowser', 'TImage'],\n\n\t\t\tstatus_array: null,\n\t\t\ttype_array: null,\n\t\t\tcredit_card_type_array: null,\n\t\t\tsub_document_view_controller: null,\n\t\t\tbank_account_type_array: null,\n\t\t\tdocument_object_type_id: null,\n\t\t\tfile_browser: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\tvar $this = this;\n\t\tthis.edit_view_tpl = 'ClientPaymentEditView.html';\n\t\tthis.permission_id = 'client_payment';\n\t\tthis.viewId = 'ClientPayment';\n\t\tthis.script_name = 'ClientPaymentView';\n\t\tthis.table_name_key = 'client_payment';\n\t\tthis.document_object_type_id = 90;\n\t\tthis.context_menu_name = $.i18n._( 'Payment Methods' );\n\t\tthis.navigation_label = $.i18n._( 'Payment Methods' );\n\t\tthis.api = TTAPI.APIClientPayment;\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tif ( !this.sub_view_mode ) {\n\t\t\tthis.initData();\n\t\t}\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\n\t\tvar options = [\n\t\t\t{ option_name: 'status', api: this.api },\n\t\t\t{ option_name: 'type', api: this.api },\n\t\t\t{ option_name: 'bank_account_type', api: this.api },\n\t\t\t{ option_name: 'credit_card_type',field_name: 'cc_type_id', api: this.api },\n\t\t];\n\n\t\tthis.initDropDownOptions( options );\n\n\t\tif ( Global.isSet( $this.adv_search_field_ui_dic['is_default'] ) ) {\n\t\t\tthis.basic_search_field_ui_dic['is_default'].setSourceData( Global.buildRecordArray( {\n\t\t\t\t0: 'False',\n\t\t\t\t1: 'True'\n\t\t\t} ) );\n\t\t}\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [],\n\t\t\tinclude: ['default']\n\t\t};\n\n\t\tif ( !this.sub_view_mode ) {\n\n\t\t\tcontext_menu_model.include.push(\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Jump To' ),\n\t\t\t\t\tid: 'jump_to_header',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\taction_group_header: true,\n\t\t\t\t\tpermission_result: false // to hide it in legacy context menu and avoid errors in legacy parsers.\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Edit Client' ),\n\t\t\t\t\tid: 'edit_client',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Client Contacts' ),\n\t\t\t\t\tid: 'client_contact',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Transactions' ),\n\t\t\t\t\tid: 'transaction',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Invoices' ),\n\t\t\t\t\tid: 'invoice',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn context_menu_model;\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\t// When mass editing, these fields may not be the common data, so their value will be undefined, so this will cause their change event cannot work properly.\n\t\tthis.setDefaultData( {\n\t\t\t'type_id': 30,\n\t\t\t'bank_account_type_id': 200\n\t\t} );\n\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\n\t\t\tif ( !this.current_edit_record.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\n\t\t\t}\n\t\t}\n\n\t\tif ( this.current_edit_record.signature_exists && this.current_edit_record.id && this.current_edit_record.client_id ) {\n\t\t\tvar url = ServiceCaller.getURLByObjectType( 'file_download' ) + '&object_type=client_payment_signature&object_id=' + this.current_edit_record.id + '&parent_id=' + this.current_edit_record.client_id;\n\t\t\tthis.file_browser.setImage( url );\n\t\t} else {\n\t\t\tthis.detachElement( 'signature' );\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tsetCustomDefaultMenuIcon( id, context_btn, grid_selected_length ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'login':\n\t\t\t\tthis.setDefaultMenuLoginIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t\tcase 'edit_client':\n\t\t\t\tthis.setDefaultMenuEditClientIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetDefaultMenuEditClientIcon( context_btn, grid_selected_length, pId ) {\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'download':\n\t\t\t\tthis.onDownloadClick();\n\t\t\t\tbreak;\n\t\t\tcase 'edit_client':\n\t\t\tcase 'client_contact':\n\t\t\tcase 'invoice':\n\t\t\tcase 'transaction':\n\t\t\tcase 'export_excel':\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\t\tvar column_filter = {};\n\t\tcolumn_filter.is_owner = true;\n\t\tcolumn_filter.id = true;\n\t\tcolumn_filter.is_child = true;\n\t\tcolumn_filter.in_use = true;\n\t\tcolumn_filter.first_name = true;\n\t\tcolumn_filter.last_name = true;\n\t\tcolumn_filter.client_id = true;\n\n\t\t// Error: Unable to get property 'getGridParam' of undefined or null reference\n\t\tvar display_columns = [];\n\t\tif ( this.grid ) {\n\t\t\tdisplay_columns = this.grid.getGridParam( 'colModel' );\n\t\t}\n\n\t\tif ( display_columns ) {\n\t\t\tvar len = display_columns.length;\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar column_info = display_columns[i];\n\t\t\t\tcolumn_filter[column_info.name] = true;\n\t\t\t}\n\t\t}\n\n\t\treturn column_filter;\n\t}\n\n\tonNavigationClick( iconName ) {\n\n\t\tvar $this = this;\n\n\t\tvar grid_selected_id_array;\n\n\t\tvar filter = { filter_data: {} };\n\n\t\tvar client_ids = [];\n\n\t\tif ( $this.edit_view && $this.current_edit_record.id ) {\n\t\t\tclient_ids.push( $this.current_edit_record.client_id );\n\t\t} else {\n\t\t\tgrid_selected_id_array = this.getGridSelectIdArray();\n\t\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t\tvar grid_selected_row = $this.getRecordFromGridById( value );\n\t\t\t\tclient_ids.push( grid_selected_row.client_id );\n\t\t\t} );\n\t\t}\n\n\t\tfilter.filter_data.client_id = client_ids;\n\n\t\tswitch ( iconName ) {\n\t\t\tcase 'edit_client':\n\t\t\t\tif ( client_ids.length > 0 ) {\n\t\t\t\t\tIndexViewController.openEditView( this, 'Client', client_ids[0] );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'client_contact':\n\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Payment Methods' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'ClientContact', filter );\n\t\t\t\tbreak;\n\t\t\tcase 'invoice':\n\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Payment Methods' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'Invoice', filter );\n\t\t\t\tbreak;\n\t\t\tcase 'transaction':\n\t\t\t\tGlobal.addViewTab( $this.viewId, $.i18n._( 'Payment Methods' ), window.location.href );\n\t\t\t\tIndexViewController.goToView( 'InvoiceTransaction', filter );\n\t\t\t\tbreak;\n\t\t\tcase 'export_excel':\n\t\t\t\tthis.onExportClick( 'export' + this.api.key_name );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_payment_method': { 'label': $.i18n._( 'Payment Method' ) },\n\t\t\t'tab_attachment': true,\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIClientPayment,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_client_payment',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_payment_method = this.edit_view_tab.find( '#tab_payment_method' );\n\n\t\tvar tab_payment_method_column1 = tab_payment_method.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_payment_method_column1 );\n\n\t\t// Client\n\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIClient,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_client',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'client_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Client' ), form_item_input, tab_payment_method_column1, '' );\n\n\t\t// Status\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'status_id' } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_payment_method_column1 );\n\n\t\t// Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'type_id' } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab_payment_method_column1 );\n\n\t\t// Default\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\tform_item_input.TCheckbox( { field: 'is_default' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Default' ), form_item_input, tab_payment_method_column1 );\n\n\t\t// Bank Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'bank_account_type_id' } );\n\t\tform_item_input.setSourceData( $this.bank_account_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Bank Type' ), form_item_input, tab_payment_method_column1, '', null, true );\n\n\t\t// Institution Number\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'bank_institution', width: 30 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Institution Number' ), form_item_input, tab_payment_method_column1, '', null, true );\n\n\t\t// Bank Transit\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'bank_transit', width: 100 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Bank Transit' ), form_item_input, tab_payment_method_column1, '', null, true );\n\n\t\t// Bank type change\n\n\t\t// Account Number\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'bank_account', width: 120 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Account Number' ), form_item_input, tab_payment_method_column1, '', null, true );\n\n\t\t// Credit Card Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'cc_type_id' } );\n\t\tform_item_input.setSourceData( $this.credit_card_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Credit Card Type' ), form_item_input, tab_payment_method_column1, '', null, true );\n\n\t\t// Credit Card Number\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'cc_number', width: 120 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Credit Card Number' ), form_item_input, tab_payment_method_column1, '', null, true );\n\n\t\t// Expiry Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'cc_expire' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Expiry Date' ), form_item_input, tab_payment_method_column1, '', null, true );\n\n\t\t// Credit Card Security Code (CSC)\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'cc_check', width: 60 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Credit Card Security Code (CSC)' ), form_item_input, tab_payment_method_column1, '', null, true );\n\n\t\t// Card Holder Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'cc_name' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Card Holder Name' ), form_item_input, tab_payment_method_column1, '', null, true );\n\n\t\t// Card Issuing Banks Phone Number\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'cc_bank_phone' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Card Issuing Banks Phone Number' ), form_item_input, tab_payment_method_column1, '', null, true );\n\n\t\t// Signature\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.IMAGE_AVD_BROWSER );\n\n\t\tthis.file_browser = form_item_input.TImageAdvBrowser( { field: 'signature', show_browser: false } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Signature' ), form_item_input, tab_payment_method_column1, '', null, true, true );\n\n\t\t// Note\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\n\t\tform_item_input.TTextArea( { field: 'note', width: '100%' } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Note' ), form_item_input, tab_payment_method_column1, '', null, null, true );\n\n\t\tform_item_input.parent().width( '45%' );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Client' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'client_id',\n\t\t\t\tlayout_name: 'global_client',\n\t\t\t\tapi_class: TTAPI.APIClient,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Default' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'is_default',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tif ( key === 'type_id' ) {\n\t\t\tthis.onTypeChange();\n\t\t}\n\n\t\tif ( key === 'bank_account_type_id' ) {\n\t\t\tthis.onBankAccountTypeChange();\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\t\tthis.onTypeChange();\n\t}\n\n\tonTypeChange() {\n\t\tif ( this.current_edit_record['type_id'] == 30 ) {\n\n\t\t\tthis.detachElement( 'bank_account_type_id' );\n\t\t\tthis.detachElement( 'bank_institution' );\n\t\t\tthis.detachElement( 'bank_transit' );\n\t\t\tthis.detachElement( 'bank_account' );\n\n\t\t\tthis.attachElement( 'cc_type_id' );\n\t\t\tthis.attachElement( 'cc_number' );\n\t\t\tthis.attachElement( 'cc_expire' );\n\t\t\tthis.attachElement( 'cc_check' );\n\t\t\tthis.attachElement( 'cc_name' );\n\t\t\tthis.attachElement( 'cc_bank_phone' );\n\n\t\t} else if ( this.current_edit_record['type_id'] == 40 ) {\n\t\t\tthis.attachElement( 'bank_account_type_id' );\n\t\t\tthis.attachElement( 'bank_institution' );\n\t\t\tthis.attachElement( 'bank_transit' );\n\t\t\tthis.attachElement( 'bank_account' );\n\n\t\t\tthis.detachElement( 'cc_type_id' );\n\t\t\tthis.detachElement( 'cc_number' );\n\t\t\tthis.detachElement( 'cc_expire' );\n\t\t\tthis.detachElement( 'cc_check' );\n\t\t\tthis.detachElement( 'cc_name' );\n\t\t\tthis.detachElement( 'cc_bank_phone' );\n\n\t\t\tthis.onBankAccountTypeChange();\n\t\t} else {\n\t\t\tthis.detachElement( 'bank_account_type_id' );\n\t\t\tthis.detachElement( 'bank_institution' );\n\t\t\tthis.detachElement( 'bank_transit' );\n\t\t\tthis.detachElement( 'bank_account' );\n\n\t\t\tthis.detachElement( 'cc_type_id' );\n\t\t\tthis.detachElement( 'cc_number' );\n\t\t\tthis.detachElement( 'cc_expire' );\n\t\t\tthis.detachElement( 'cc_check' );\n\t\t\tthis.detachElement( 'cc_name' );\n\t\t\tthis.detachElement( 'cc_bank_phone' );\n\t\t}\n\n\t\tthis.editFieldResize();\n\t}\n\n\tonBankAccountTypeChange() {\n\t\tif ( this.current_edit_record['bank_account_type_id'] == 200 && this.current_edit_record['type_id'] == 40 ) {\n\t\t\tthis.attachElement( 'bank_institution' );\n\t\t\tthis.edit_view_form_item_dic['bank_transit'].find( '.edit-view-form-item-label' ).text( $.i18n._( 'Bank Transit' ) );\n\t\t} else if ( this.current_edit_record['bank_account_type_id'] == 201 ) {\n\t\t\tthis.detachElement( 'bank_institution' );\n\t\t\tthis.edit_view_form_item_dic['bank_transit'].find( '.edit-view-form-item-label' ).text( $.i18n._( 'Routing Number' ) );\n\t\t}\n\n\t\tthis.editFieldResize();\n\n\t}\n}\n\nClientPaymentViewController.loadSubView = function( container, beforeViewLoadedFun, afterViewLoadedFun ) {\n\n\tGlobal.loadViewSource( 'ClientPayment', 'SubClientPaymentView.html', function( result ) {\n\t\tvar args = {};\n\t\tvar template = _.template( result );\n\n\t\tif ( Global.isSet( beforeViewLoadedFun ) ) {\n\t\t\tbeforeViewLoadedFun();\n\t\t}\n\n\t\tif ( Global.isSet( container ) ) {\n\t\t\tcontainer.html( template( args ) );\n\t\t\tif ( Global.isSet( afterViewLoadedFun ) ) {\n\t\t\t\tafterViewLoadedFun( sub_client_payment_view_controller );\n\t\t\t}\n\t\t}\n\t} );\n};\n"],"names":["ClientPaymentViewController","options","$","$this","context_menu_model","key","widget","url","id","context_btn","grid_selected_length","pId","column_filter","display_columns","len","i","column_info","iconName","grid_selected_id_array","filter","client_ids","index","value","grid_selected_row","tab_model","tab_payment_method","tab_payment_method_column1","form_item_input","target","doNotValidate","c_value","container","beforeViewLoadedFun","afterViewLoadedFun","result","args","template"],"mappings":"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"}