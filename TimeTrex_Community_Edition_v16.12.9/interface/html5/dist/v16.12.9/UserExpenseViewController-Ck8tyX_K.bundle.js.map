{"version":3,"file":"UserExpenseViewController-Ck8tyX_K.bundle.js","sources":["../../views/payroll/user_expense/UserExpenseViewController.js"],"sourcesContent":["import '@/global/widgets/filebrowser/TImageBrowser';\n\nexport class UserExpenseViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#user_expense_view_container',\n\n\t\t\t// _required_files: ['TImageBrowser'],\n\n\t\t\tstatus_array: null,\n\n\t\t\thierarchy_level_array: null,\n\n\t\t\tsub_document_view_controller: null,\n\n\t\t\tdocument_object_type_id: null,\n\n\t\t\trelatedExpenseArray: null,\n\n\t\t\tdocument_api: null,\n\t\t\tpayment_method_array: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'UserExpenseEditView.html';\n\t\tthis.permission_id = 'user_expense';\n\t\tthis.viewId = 'UserExpense';\n\t\tthis.script_name = 'UserExpenseView';\n\t\tthis.table_name_key = 'user_expense';\n\t\tthis.context_menu_name = $.i18n._( 'Expenses' );\n\t\tthis.navigation_label = $.i18n._( 'Expense' );\n\t\tthis.document_object_type_id = 400;\n\t\tthis.hierarchy_type_id = 200;\n\n\t\tthis.api = TTAPI.APIUserExpense;\n\n\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\tthis.job_api = TTAPI.APIJob;\n\t\t\tthis.job_item_api = TTAPI.APIJobItem;\n\t\t}\n\n\t\tthis.document_api = TTAPI.APIDocument;\n\n\t\tthis.document_object_type_id = 400;\n\t\tthis.hierarchy_type_id = 200;\n\n\t\tthis.render();\n\t\tthis.buildContextMenu();\n\n\t\tthis.initData();\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: ['copy', 'mass_edit'],\n\t\t\tinclude: []\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tinitOptions() {\n\t\tvar $this = this;\n\t\tthis.initDropDownOption( 'status' );\n\t\tthis.initDropDownOption( 'payment_method' );\n\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.type_id = [10, 20, 30];\n\t\tfilter.filter_data.user_id = [LocalCacheData.loginUser.id];\n\n\t\t$this.basic_search_field_ui_dic['expense_policy_id'].setDefaultArgs( filter );\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\t\tvar column_filter = {};\n\t\tcolumn_filter.user = true;\n\t\tthis._getFilterColumnsFromDisplayColumns( column_filter, true );\n\t}\n\n\tgetSubViewFilter( filter ) {\n\n\t\tif ( filter.length === 0 ) {\n\t\t\tfilter = {};\n\t\t}\n\n\t\tfilter['parent_id'] = 0;\n\n\t\treturn filter;\n\t}\n\n\t/* jshint ignore:start */\n\tsetCurrentEditRecordData() {\n\t\tvar $this = this;\n\t\t//Set current edit record data to all widgets\n\n\t\tif ( Global.isFalseOrNull( this.current_edit_record['user_id'] ) ) {\n\t\t\tthis.current_edit_record['user_id'] = LocalCacheData.getLoginUser().id;\n\t\t}\n\n\t\tfor ( var key in this.current_edit_record ) {\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'user_id':\n\t\t\t\t\t\tvar args = {};\n\t\t\t\t\t\tvar filter_data = {};\n\t\t\t\t\t\tfilter_data.type_id = [10, 20, 30];\n\t\t\t\t\t\tfilter_data.user_id = this.current_edit_record[key];\n\t\t\t\t\t\targs.filter_data = filter_data;\n\t\t\t\t\t\tthis.edit_view_ui_dic['expense_policy_id'].setDefaultArgs( args );\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'expense_policy_id':\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'gross_amount1':\n\t\t\t\t\t\twidget.setValue( this.current_edit_record['gross_amount'] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'gross_amount':\n\t\t\t\t\tcase 'reimburse_amount':\n\t\t\t\t\tcase 'net_amount':\n\t\t\t\t\t\t// Don't do anything.\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'job_id':\n\t\t\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'job_item_id':\n\t\t\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\t\t\tvar args = {};\n\t\t\t\t\t\t\targs.filter_data = { job_id: this.current_edit_record.job_id };\n\t\t\t\t\t\t\twidget.setDefaultArgs( args );\n\t\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'job_quick_search':\n//\t\t\t\t\t\twidget.setValue( this.current_edit_record['job_id'] ? this.current_edit_record['job_id'] : 0 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'job_item_quick_search':\n//\t\t\t\t\t\twidget.setValue( this.current_edit_record['job_item_id'] ? this.current_edit_record['job_item_id'] : 0 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\t/* jshint ignore:end */\n\n\tsetEditViewDataDone() {\n\t\tsuper.setEditViewDataDone();\n\n\t\tif ( Global.isSet( this.current_edit_record['related_expenses'] ) ) {\n\t\t\tthis.relatedExpenseArray = this.current_edit_record['related_expenses'];\n\t\t} else {\n\t\t\tthis.relatedExpenseArray = {};\n\t\t}\n\n\t\tthis.setRelatedExpense( this.relatedExpenseArray );\n\n\t\tthis.initInsideEditorData();\n\t\tAuthorizationHistory.init( this );\n\n\t\tthis.onExpensePolicyChange();\n\t}\n\n\tinitInsideEditorData() {\n\t\tvar $this = this;\n\t\tvar args = {};\n\t\targs.filter_data = {};\n\n\t\tif ( !this.current_edit_record || !this.current_edit_record.id ) {\n\t\t\t$this.editor.removeAllRows();\n\t\t\t$this.editor.getDefaultData();\n\n\t\t} else {\n\n\t\t\targs.filter_data.object_type_id = this.document_object_type_id;\n\t\t\targs.filter_data.object_id = this.current_edit_record['id'];\n\n\t\t\t$this.api['getAttachment']( args, {\n\t\t\t\tonResult: function( res ) {\n\n\t\t\t\t\tif ( !$this.edit_view ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar data = res.getResult();\n\t\t\t\t\t$this.editor.setValue( data );\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\t}\n\n\tinsideEditorSetValue( val ) {\n\t\tvar len = val.length;\n\t\tthis.removeAllRows();\n\n\t\tif ( len > 0 ) {\n\t\t\tfor ( var i = 0; i < val.length; i++ ) {\n\t\t\t\tif ( Global.isSet( val[i] ) ) {\n\t\t\t\t\tvar row = val[i];\n\t\t\t\t\tthis.addRow( row );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.getDefaultData();\n\t\t}\n\t}\n\n\tinsideEditorGetValue() {\n\n\t\tvar len = this.rows_widgets_array.length;\n\n\t\tvar result = [];\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tvar row = this.rows_widgets_array[i];\n\t\t\tif ( Global.isSet( row.file ) ) {\n\t\t\t\tvar data = {\n\t\t\t\t\tname: row.name.getValue(),\n\t\t\t\t\tfile: row.file.getValue()\n\t\t\t\t};\n\n\t\t\t\tif ( data.name === 'No File Selected' ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tresult.push( data );\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tinsideEditorAddRow( data, index ) {\n\n\t\tif ( !data ) {\n\t\t\tthis.getDefaultData( index );\n\t\t} else {\n\t\t\tvar row = this.getRowRender(); //Get Row render\n\t\t\tvar render = this.getRender(); //get render, should be a table\n\t\t\tvar widgets = {}; //Save each row's widgets\n\n\t\t\t//Build row widgets\n\n\t\t\t// Attachment Name\n\t\t\tvar form_item_file_name = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\tform_item_file_name.TText( { field: 'name', width: 400 } );\n\t\t\tform_item_file_name.setValue( data.name ? data.name : $.i18n._( 'No File Selected' ) );\n\t\t\tform_item_file_name.setClassStyle( data.name ? {\n\t\t\t\t'font-weight': 'bold',\n\t\t\t\t'line-height': 0\n\t\t\t} : { 'line-height': 0 } );\n\t\t\twidgets[form_item_file_name.getField()] = form_item_file_name;\n\t\t\trow.children().eq( 0 ).append( form_item_file_name );\n\t\t\tform_item_file_name.attr( 'document_id', ( data.id && this.parent_controller.current_edit_record.id ) ? data.id : '' );\n\t\t\tform_item_file_name.attr( 'document_revision_id', ( data.document_revision_id && this.parent_controller.current_edit_record.id ) ? data.document_revision_id : '' );\n\n\t\t\t// Action\n\t\t\tif ( data.name ) {\n\n\t\t\t\tvar widgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\t\t\t\tvar download = $( '<button type=\\'button\\' class=\\' download-button t-button widget-right-label\\'>' + $.i18n._( 'Download' ) + '</button>' );\n\t\t\t\tvar view = $( '<button type=\\'button\\' class=\\' view-button t-button widget-right-label\\'>' + $.i18n._( 'View' ) + '</button>' );\n\n\t\t\t\tdownload.attr( {\n\t\t\t\t\tdocument_id: data.id,\n\t\t\t\t\tdocument_revision_id: data.document_revision_id,\n\t\t\t\t\tobject_type_id: this.parent_controller.document_object_type_id\n\t\t\t\t} );\n\t\t\t\tview.attr( {\n\t\t\t\t\tdocument_id: data.id,\n\t\t\t\t\tdocument_revision_id: data.document_revision_id,\n\t\t\t\t\tobject_type_id: this.parent_controller.document_object_type_id\n\t\t\t\t} );\n\n\t\t\t\tdownload.bind( 'click', this.parent_controller.downloadFile );\n\t\t\t\tview.bind( 'click', this.parent_controller.downloadFile );\n\n\t\t\t\twidgetContainer.append( download );\n\t\t\t\twidgetContainer.append( view );\n\n\t\t\t\trow.children().eq( 1 ).append( widgetContainer );\n\t\t\t} else {\n\t\t\t\tvar form_item_file = Global.loadWidgetByName( FormItemType.IMAGE_BROWSER );\n\n\t\t\t\tvar $this = this.file_browser = form_item_file.TImageBrowser( {\n\t\t\t\t\t\tfield: 'file',\n\t\t\t\t\t\tname: 'file_data',\n\t\t\t\t\t\taccept_filter: '*',\n\t\t\t\t\t\tchangeHandler: function( a ) {\n\t\t\t\t\t\t\tvar file_name = $( this ).find( '.browser' )[0].files[0].name;\n\t\t\t\t\t\t\tform_item_file_name.setValue( file_name );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\twidgets[form_item_file.getField()] = form_item_file;\n\t\t\t\trow.children().eq( 1 ).append( form_item_file );\n\n\t\t\t}\n\n\t\t\t// end\n\n\t\t\tif ( typeof index != 'undefined' ) {\n\n\t\t\t\trow.insertAfter( $( render ).find( 'tr' ).eq( index ) );\n\t\t\t\tthis.rows_widgets_array.splice( ( index ), 0, widgets );\n\n\t\t\t} else {\n\t\t\t\t$( render ).append( row );\n\t\t\t\tthis.rows_widgets_array.push( widgets );\n\t\t\t}\n\n\t\t\tif ( this.parent_controller.is_viewing ) {\n\t\t\t\trow.find( '.control-icon' ).hide();\n\t\t\t}\n\n\t\t\tthis.addIconsEvent( row ); //Bind event to add and minus icon\n\t\t\tthis.removeLastRowLine();\n\t\t}\n\t}\n\n\tdownloadFile() {\n\n\t\tvar $this = $( this );\n\t\tvar document_attachment_id = $this.attr( 'document_id' );\n\t\tvar document_revision_id = $this.attr( 'document_revision_id' );\n\t\tvar object_type_id = $this.attr( 'object_type_id' );\n\n\t\tvar url = ServiceCaller.getURLByObjectType( 'file_download' ) + '&object_type=document&parent_id=' + document_attachment_id + '&parent_object_type_id=' + object_type_id + '&object_id=' + document_revision_id;\n\n\t\tGlobal.APIFileDownload( null, null, null, url );\n\t}\n\n\tinsideEditorRemoveRow( row ) {\n\n\t\tvar $this = this;\n\t\tvar index = row[0].rowIndex - 1;\n\t\tvar remove_id = this.rows_widgets_array[index].name.attr( 'document_id' );\n\t\tif ( TTUUID.isUUID( remove_id ) && remove_id != TTUUID.zero_id && remove_id != TTUUID.not_exist_id ) {\n\t\t\tTAlertManager.showConfirmAlert( Global.delete_confirm_message, null, function( result ) {\n\t\t\t\tif ( result ) {\n\t\t\t\t\tProgressBar.showOverlay();\n\t\t\t\t\t$this.api['delete' + $this.api.key_name]( remove_id, {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tProgressBar.closeOverlay();\n\t\t\t\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\t\t\t\trow.remove();\n\t\t\t\t\t\t\t\t$this.rows_widgets_array.splice( index, 1 );\n\t\t\t\t\t\t\t\tif ( $this.rows_widgets_array.length === 0 ) {\n\t\t\t\t\t\t\t\t\t$this.getDefaultData();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\trow.remove();\n\t\t\t$this.rows_widgets_array.splice( index, 1 );\n\t\t}\n\n\t\tthis.removeLastRowLine();\n\t}\n\n\t/* jshint ignore:start */\n\tonFormItemChange( target, doNotValidate ) {\n\t\tvar $this = this;\n\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\n\t\tthis.current_edit_record[key] = c_value;\n\n\t\tvar amount_arr = false;\n\t\tswitch ( key ) {\n\t\t\tcase 'user_id':\n\t\t\t\tvar args = {};\n\t\t\t\tvar filter_data = {};\n\t\t\t\tfilter_data.type_id = [10, 20, 30];\n\t\t\t\tfilter_data.user_id = this.current_edit_record[key];\n\t\t\t\targs.filter_data = filter_data;\n\t\t\t\tthis.edit_view_ui_dic['expense_policy_id'].setSourceData( null );\n\t\t\t\tthis.edit_view_ui_dic['expense_policy_id'].setDefaultArgs( args );\n\t\t\t\tbreak;\n\t\t\tcase 'expense_policy_id':\n\t\t\t\tthis.onExpensePolicyChange();\n\t\t\t\tbreak;\n\t\t\tcase 'gross_amount1':\n\t\t\t\tthis.calcRelatedExpenses();\n\t\t\t\tbreak;\n\t\t\tcase 'is_reimbursable':\n\t\t\t\tthis.calcRelatedExpenses();\n\t\t\t\tbreak;\n\t\t\tcase 'amount':\n\t\t\t\tthis.calcRelatedExpenses( target.attr( 'id' ), c_value ); //When a related expense amount is changed, we need to pass that through so the net amount can be updated.\n\t\t\t\tbreak;\n\t\t\tcase 'job_id':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.edit_view_ui_dic['job_quick_search'].setValue( target.getValue( true ) ? ( target.getValue( true ).manual_id ? target.getValue( true ).manual_id : '' ) : '' );\n\t\t\t\t\tthis.setJobItemValueWhenJobChanged( target.getValue( true ) );\n\t\t\t\t\tthis.edit_view_ui_dic['job_quick_search'].setCheckBox( true );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'job_item_id':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.edit_view_ui_dic['job_item_quick_search'].setValue( target.getValue( true ) ? ( target.getValue( true ).manual_id ? target.getValue( true ).manual_id : '' ) : '' );\n\t\t\t\t\tthis.edit_view_ui_dic['job_item_quick_search'].setCheckBox( true );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'job_quick_search':\n\t\t\tcase 'job_item_quick_search':\n\t\t\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t\t\tthis.onJobQuickSearch( key, c_value );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( !doNotValidate ) {\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tcalcRelatedExpenses( override_expense_policy_id = null, override_amount = null ) {\n\t\t//This is also in ExpenseAuthorizationViewController.js\n\t\tvar $this = this;\n\n\t\tthis.current_edit_record['gross_amount1'] = ( this.current_edit_record['gross_amount1'] ? this.current_edit_record['gross_amount1'] : this.current_edit_record['gross_amount'] );\n\n\t\tvar amount_arr = this.relatedExpenseArray ? this.relatedExpenseArray : false;\n\n\t\tif ( override_expense_policy_id !== null && override_amount !== null && amount_arr['taxes'] && amount_arr['taxes'][override_expense_policy_id] ) {\n\t\t\tamount_arr['taxes'][override_expense_policy_id]['amount'] = override_amount;\n\t\t}\n\n\t\tthis.api['calcRelatedExpenses'](\n\t\t\tthis.current_edit_record['expense_policy_id'], this.current_edit_record['gross_amount1'], amount_arr, this.current_edit_record['is_reimbursable'],\n\t\t\t{\n\t\t\t\tonResult: function( res ) {\n\t\t\t\t\t$this.relatedExpenseArray = res.getResult();\n\t\t\t\t\t$this.setRelatedExpense( $this.relatedExpenseArray );\n\t\t\t\t}\n\t\t\t} );\n\n\t\treturn true;\n\t}\n\n\tonExpensePolicyChange() {\n\t\tvar expense_policies = this.edit_view_ui_dic['expense_policy_id'].getSourceData();\n\t\tif ( expense_policies && Global.isArray( expense_policies ) && expense_policies.length > 0 ) {\n\t\t\tvar unit_name = $.i18n._( 'Amount' );\n\n\t\t\tfor ( var n in expense_policies ) {\n\t\t\t\tif ( expense_policies[n].id == this.edit_view_ui_dic['expense_policy_id'].getValue() && expense_policies[n].unit_name && expense_policies[n].unit_name.length > 0 && expense_policies[n].type_id == 30 ) {\n\t\t\t\t\tunit_name = expense_policies[n].unit_name;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.edit_view_ui_dic['gross_amount1'].parents( '.edit-view-form-item-div' ).find( '.edit-view-form-item-label' ).html( unit_name );\n\t\t}\n\n\t\tthis.calcRelatedExpenses();\n\t}\n\n\t/* jshint ignore:end */\n\tsetRelatedExpense( expenses ) {\n\t\t// Third column start\n\t\tvar tab_expense = this.edit_view_tab.find( '#tab_expense' );\n\t\tvar tab_expense_column3 = tab_expense.find( '.third-column' ).empty();\n\n\t\tif ( this.edit_view_tabs[0].length < 3 ) {\n\t\t\tthis.edit_view_tabs[0].push( tab_expense_column3 );\n\t\t}\n\n\t\tif ( expenses && expenses['taxes'] && Object.keys( expenses['taxes'] ).length > 0 ) {\n\t\t\t// Net Amount\n\t\t\tvar form_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tform_item_input.TTextInput( { field: 'net_amount' } );\n\t\t\tform_item_input.setValue( expenses['net_amount'] );\n\t\t\tform_item_input.setEnabled( ( this.is_viewing == false ) );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Net Amount' ), form_item_input, tab_expense_column3, '', null, true );\n\t\t\tthis.edit_view_ui_dic['net_amount'].css( 'opacity', 1 );\n\n\t\t\tfor ( var key in expenses['taxes'] ) {\n\t\t\t\t// taxes\n\t\t\t\tvar item = expenses['taxes'][key];\n\t\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\t\tform_item_input.TTextInput( { field: 'amount' } );\n\t\t\t\tform_item_input.setValue( item['amount'] );\n\t\t\t\tform_item_input.attr( 'id', item['expense_policy_id'] );\n\t\t\t\tform_item_input.setEnabled( ( this.is_viewing == false ) );\n\t\t\t\tthis.addEditFieldToColumn( $.i18n._( item['expense_policy_name'] ), form_item_input, tab_expense_column3, '', null, true );\n\t\t\t\tthis.edit_view_ui_dic['amount'].css( 'opacity', 1 );\n\t\t\t}\n\n\t\t\t// Amount\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\t\tform_item_input.TText( { field: 'gross_amount' } );\n\t\t\tform_item_input.setValue( expenses['gross_amount'] );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Amount' ), form_item_input, tab_expense_column3, '', null, true );\n\t\t\tthis.edit_view_ui_dic['gross_amount'].css( 'opacity', 1 );\n\t\t}\n\n\t\t// Reimburse Amount\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'reimburse_amount' } );\n\t\tif ( expenses ) {\n\t\t\tif ( expenses['reimburse_amount'] && expenses['unit_amount'] && expenses['unit_name'] ) {\n\t\t\t\tform_item_input.setValue( expenses['reimburse_amount'] + ' (' + expenses['unit_amount'] + '/' + expenses['unit_name'] + ')' );\n\t\t\t} else {\n\t\t\t\tform_item_input.setValue( expenses['reimburse_amount'] );\n\t\t\t}\n\t\t} else {\n\t\t\tform_item_input.setValue( this.current_edit_record.reimburse_amount );\n\t\t}\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Reimburse Amount' ), form_item_input, tab_expense_column3, '', null, true );\n\n\t\tthis.edit_view_ui_dic['reimburse_amount'].css( 'opacity', 1 );\n\n\t\tthis.editFieldResize( 0 );\n\t}\n\n\tuniformVariable( records ) {\n\n\t\trecords.related_expenses = this.relatedExpenseArray;\n\t\trecords.gross_amount = this.relatedExpenseArray.gross_amount;\n\t\trecords.net_amount = this.relatedExpenseArray.net_amount;\n\t\trecords.reimburse_amount = this.relatedExpenseArray.reimburse_amount;\n\n\t\tif ( !Global.isSet( records.parent_id ) ) {\n\t\t\trecords.parent_id = false;\n\t\t}\n\n\t\treturn records;\n\t}\n\n\tonSaveResult( result ) {\n\t\tvar $this = this;\n\t\tif ( result && result.isValid() ) {\n\t\t\tvar result_data = result.getResult();\n\t\t\tif ( result_data === true ) {\n\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\t\t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t$this.refresh_id = result_data;\n\t\t\t}\n\n\t\t\t$this.saveInsideEditorData( function() {\n\t\t\t\t$this.search();\n\t\t\t\t$this.onSaveDone( result );\n\n\t\t\t\t$this.removeEditView();\n\n\t\t\t\t$().TFeedback( {\n\t\t\t\t\tsource: 'Save'\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t} else {\n\t\t\t$this.setErrorMenu();\n\t\t\t$this.setErrorTips( result );\n\n\t\t}\n\t}\n\n\t// onSaveAndContinueResult( result ) {\n\t//\n\t// \tvar $this = this;\n\t// \tif ( result.isValid() ) {\n\t// \t\tvar result_data = result.getResult();\n\t// \t\tif ( result_data === true ) {\n\t// \t\t\t$this.refresh_id = $this.current_edit_record.id;\n\t//\n\t// \t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) { // as new\n\t// \t\t\t$this.refresh_id = result_data;\n\t// \t\t}\n\t//\n\t// \t\t$this.saveInsideEditorData( function() {\n\t// \t\t\t$this.search( false );\n\t// \t\t\t$this.onEditClick( $this.refresh_id, true );\n\t//\n\t// \t\t\t$this.onSaveAndContinueDone( result );\n\t//\n\t// \t\t} );\n\t//\n\t// \t} else {\n\t// \t\t$this.setErrorTips( result );\n\t// \t\t$this.setErrorMenu();\n\t// \t}\n\t// },\n\n\t// onSaveAndNewResult: function( result ) {\n\t// \tvar $this = this;\n\t// \tif ( result.isValid() ) {\n\t// \t\tvar result_data = result.getResult();\n\t// \t\tif ( result_data === true ) {\n\t// \t\t\t$this.refresh_id = $this.current_edit_record.id;\n\t//\n\t// \t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) { // as new\n\t// \t\t\t$this.refresh_id = result_data;\n\t// \t\t}\n\t//\n\t// \t\t$this.saveInsideEditorData( function() {\n\t// \t\t\t$this.search( false );\n\t// \t\t\t$this.onAddClick( true );\n\t//\n\t// \t\t} );\n\t// \t} else {\n\t// \t\t$this.setErrorTips( result );\n\t// \t\t$this.setErrorMenu();\n\t// \t}\n\t// },\n\n\t_continueDoCopyAsNew() {\n\t\tthis.setCurrentEditViewState( 'new' );\n\t\tLocalCacheData.current_doing_context_action = 'copy_as_new';\n\n\t\tif ( Global.isSet( this.edit_view ) ) {\n\t\t\tthis.editor.removeAllRows();\n\t\t\tthis.editor.getDefaultData();\n\t\t}\n\t\tsuper._continueDoCopyAsNew();\n\t}\n\n\tonSaveAndCopyResult( result ) {\n\t\tvar $this = this;\n\t\tif ( result && result.isValid() ) {\n\t\t\tvar result_data = result.getResult();\n\t\t\tif ( result_data === true ) {\n\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\n\t\t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t$this.refresh_id = result_data;\n\t\t\t}\n\n\t\t\t$this.saveInsideEditorData( function() {\n\t\t\t\t$this.search( false );\n\n\t\t\t\t$this.onCopyAsNewClick();\n\n\t\t\t} );\n\n\t\t} else {\n\t\t\t$this.setErrorTips( result );\n\t\t\t$this.setErrorMenu();\n\t\t}\n\t}\n\n\t// onSaveAndNextResult( result ) {\n\t// \tvar $this = this;\n\t// \tif ( result.isValid() ) {\n\t// \t\tvar result_data = result.getResult();\n\t// \t\tif ( result_data === true ) {\n\t// \t\t\t$this.refresh_id = $this.current_edit_record.id;\n\t//\n\t// \t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t// \t\t\t$this.refresh_id = result_data;\n\t// \t\t}\n\t//\n\t// \t\t$this.saveInsideEditorData( function() {\n\t// \t\t\t$this.onRightArrowClick();\n\t// \t\t\t$this.search( false );\n\t// \t\t\t$this.onSaveAndNextDone( result );\n\t//\n\t// \t\t} );\n\t//\n\t// \t} else {\n\t// \t\t$this.setErrorTips( result );\n\t// \t\t$this.setErrorMenu();\n\t// \t}\n\t// },\n\n\tsaveInsideEditorData( callBack ) {\n\t\tvar $this = this;\n\t\tvar data = this.editor.getValue();\n\t\tvar files = data.length;\n\t\tif ( files > 0 ) {\n\t\t\tvar success = 0;\n\t\t\tfor ( var key in data ) {\n\t\t\t\tvar fileItem = data[key];\n\t\t\t\tif ( Global.isSet( fileItem.file ) ) {\n\n\t\t\t\t\tvar document_revision_id = this.api.addAttachment( fileItem.name, this.document_object_type_id, this.refresh_id, { async: false } ).getResult();\n\t\t\t\t\t$this.api.uploadFile( fileItem.file, 'object_type=document_revision&object_id=' + document_revision_id + '&parent_object_type_id=' + $this.document_object_type_id, {} );\n\n\t\t\t\t\tsuccess++;\n\n\t\t\t\t} else {\n\t\t\t\t\tcallBack();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( success === files ) {\n\t\t\t\tcallBack();\n\t\t\t}\n\n\t\t} else {\n\t\t\tcallBack();\n\t\t}\n\t}\n\n\tuploadFile( document_result, file_data ) {\n\t\tvar document_revision_id = document_result.getResult();\n\t\tvar $this = this;\n\n\t\t$this.api.uploadFile( file_data, 'object_type=document_revision&object_id=' + document_revision_id, {\n\t\t\tonResult: function( upload_file_result ) {\n\t\t\t}\n\t\t} );\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_expense': {\n\t\t\t\t'label': $.i18n._( 'Expense' ),\n\t\t\t\t'html_template': this.getUserExpenseTabHtml(),\n\t\t\t\t'is_multi_column': true\n\t\t\t},\n\t\t\t'tab_attachment': true,\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUserExpense,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_expense',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_expense = this.edit_view_tab.find( '#tab_expense' );\n\n\t\tvar tab_expense_column1 = tab_expense.find( '.first-column' );\n\t\tvar tab_expense_column2 = tab_expense.find( '.second-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_expense_column1 );\n\t\tthis.edit_view_tabs[0].push( tab_expense_column2 );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\t\tvar label;\n\n\t\t// Employee\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tfield: 'user_id',\n\t\t\tset_empty: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tvar default_args = {};\n\t\tdefault_args.permission_section = 'user_expense';\n\t\tform_item_input.setDefaultArgs( default_args );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee' ), form_item_input, tab_expense_column1, '' );\n\n\t\t// Effective Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'effective_date' } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Effective Date' ), form_item_input, tab_expense_column1, '', null );\n\n\t\t// Date Incurred\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'incurred_date' } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Date Incurred' ), form_item_input, tab_expense_column1, '', null );\n\n\t\t// Description\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\tform_item_input.TTextArea( { field: 'description', width: '100%' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Description' ), form_item_input, tab_expense_column1, '', null, null, true );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Payment Method\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\n\t\tform_item_input.TComboBox( { field: 'payment_method_id', set_empty: false } );\n\t\tform_item_input.setSourceData( $this.payment_method_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Payment Method' ), form_item_input, tab_expense_column1 );\n\n\t\t// Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIExpensePolicy,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_expense_policy',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'expense_policy_id',\n\t\t\talways_include_columns: ['type_id', 'unit_name'],\n\t\t\tinit_data_immediately: true,\n\t\t\tsetRealValueCallBack: ( function( val ) {\n\t\t\t\tif ( val ) {\n\t\t\t\t\t$this.onExpensePolicyChange();\n\t\t\t\t}\n\t\t\t} ),\n\t\t} );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab_expense_column1 );\n\n\t\t//Amount\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'gross_amount1' } );\n\n\t\twidgetContainer = $( '<div class=\\'widget-h-box \\'></div>' );\n\t\tlabel = $( '<span class=\\'widget-right-label\\'> ' + $.i18n._( 'Reimburse' ) + ': </span>' );\n\n\t\tvar widget_checkbox = Global.loadWidgetByName( FormItemType.CHECKBOX );\n\t\twidget_checkbox.TCheckbox( { field: 'is_reimbursable' } );\n\n\t\twidgetContainer.append( form_item_input );\n\t\twidgetContainer.append( label );\n\t\twidgetContainer.append( widget_checkbox );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Amount' ), [form_item_input, widget_checkbox], tab_expense_column1, 'last', widgetContainer );\n\n\t\t// Currency\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APICurrency,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_currency',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'currency_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Currency' ), form_item_input, tab_expense_column2, '' );\n\n\t\t// Branch\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_branch',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'branch_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Branch' ), form_item_input, tab_expense_column2 );\n\n\t\t//Department\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_department',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'department_id'\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Department' ), form_item_input, tab_expense_column2 );\n\n\t\tif ( ( Global.getProductEdition() >= 20 ) ) {\n\t\t\t//Job\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIJob,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_job',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_empty: true,\n\t\t\t\tsetRealValueCallBack: ( function( val ) {\n\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\tjob_coder.setValue( val.manual_id );\n\t\t\t\t\t}\n\t\t\t\t} ),\n\t\t\t\tfield: 'job_id'\n\t\t\t} );\n\n\t\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\n\t\t\tvar job_coder = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tjob_coder.TTextInput( { field: 'job_quick_search', disable_keyup_event: true } );\n\t\t\tjob_coder.addClass( 'job-coder' );\n\n\t\t\twidgetContainer.append( job_coder );\n\t\t\twidgetContainer.append( form_item_input );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Job' ), [form_item_input, job_coder], tab_expense_column2, '', widgetContainer, true );\n\n\t\t\t//Job Item\n\t\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\n\t\t\tform_item_input.AComboBox( {\n\t\t\t\tapi_class: TTAPI.APIJobItem,\n\t\t\t\tallow_multiple_selection: false,\n\t\t\t\tlayout_name: 'global_job_item',\n\t\t\t\tshow_search_inputs: true,\n\t\t\t\tset_empty: true,\n\t\t\t\tsetRealValueCallBack: ( function( val ) {\n\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\tjob_item_coder.setValue( val.manual_id );\n\t\t\t\t\t}\n\t\t\t\t} ),\n\t\t\t\tfield: 'job_item_id'\n\t\t\t} );\n\n\t\t\twidgetContainer = $( '<div class=\\'widget-h-box\\'></div>' );\n\n\t\t\tvar job_item_coder = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\tjob_item_coder.TTextInput( { field: 'job_item_quick_search', disable_keyup_event: true } );\n\t\t\tjob_item_coder.addClass( 'job-coder' );\n\n\t\t\twidgetContainer.append( job_item_coder );\n\t\t\twidgetContainer.append( form_item_input );\n\t\t\tthis.addEditFieldToColumn( $.i18n._( 'Task' ), [form_item_input, job_item_coder], tab_expense_column2, '', widgetContainer, true );\n\t\t}\n\t\t//Tags\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TAG_INPUT );\n\n\t\tform_item_input.TTagInput( { field: 'tag', object_type_id: 930 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Tags' ), form_item_input, tab_expense_column2, '', null, null, true );\n\n\t\t//Inside editor\n\n\t\tvar inside_editor_div = tab_expense.find( '.inside-editor-div' );\n\n\t\tvar inside_editor_args = {\n\t\t\tname: $.i18n._( 'Attachment Name' ),\n\t\t\taction: $.i18n._( 'Action' )\n\t\t};\n\n\t\tthis.editor = Global.loadWidgetByName( FormItemType.INSIDE_EDITOR );\n\t\tthis.editor.InsideEditor( {\n\t\t\taddRow: this.insideEditorAddRow,\n\t\t\tremoveRow: this.insideEditorRemoveRow,\n\t\t\tgetValue: this.insideEditorGetValue,\n\t\t\tsetValue: this.insideEditorSetValue,\n\t\t\tparent_controller: this,\n\t\t\tapi: this.document_api,\n\t\t\trender: getRender(),\n\t\t\trender_args: inside_editor_args,\n\t\t\trender_inline_html: true,\n\t\t\trow_render: getRowRender()\n\n\t\t} );\n\n\t\tfunction getRender() {\n\t\t\treturn `\n\t\t\t<table class=\"inside-editor-render\">\n\t\t\t\t<tr class=\"title\" style=\"font-weight: bold\">\n\t\t\t\t\t<td style=\"width: 400px\"><%= name %></td>\n\t\t\t\t\t<td style=\"width: 300px\"><%= action %></td>\n\t\t\t\t</tr>\n\t\t\t</table>`;\n\t\t}\n\n\t\tfunction getRowRender() {\n\t\t\treturn `\n\t\t\t<tr class=\"inside-editor-row data-row\">\n\t\t\t\t<td></td>\n\t\t\t\t<td></td>\n\t\t\t\t<td class=\"cell control-icon\">\n\t\t\t\t\t<button class=\"plus-icon\" onclick=\"\"></button>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"cell control-icon\">\n\t\t\t\t\t<button class=\"minus-icon \" onclick=\"\"></button>\n\t\t\t\t</td>\n\t\t\t</tr>`;\n\t\t}\n\n\t\tinside_editor_div.append( this.editor );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tvar default_args = {};\n\t\tdefault_args.permission_section = 'user_expense';\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tdefault_args: default_args,\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Tags' ),\n\t\t\t\tfield: 'tag',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tin_column: 1,\n\t\t\t\tobject_type_id: 930,\n\t\t\t\tform_item_type: FormItemType.TAG_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'expense_policy_id',\n\t\t\t\tlayout_name: 'global_expense_policy',\n\t\t\t\tapi_class: TTAPI.APIExpensePolicy,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: false,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} )\n\t\t];\n\n\t}\n\n\tgetUserExpenseTabHtml() {\n\t\treturn `<div id=\"tab_expense\" class=\"edit-view-tab-outside\">\n\t\t\t\t\t<div class=\"edit-view-tab\" id=\"tab_expense_content_div\">\n\t\t\t\t\t\t<div class=\"first-column\"></div>\n\t\t\t\t\t\t<div class=\"second-column\"></div>\n\t\t\t\t\t\t<div class=\"third-column full-width-column border-column\"></div>\n\t\t\t\t\t\t<div class=\"inside-editor-div full-width-column\"></div>\n\t\t\t\t\t\t<div class=\"authorization-grid-div inside-grid full-width-column\">\n\t\t\t\t\t\t\t<div class=\"grid-top-border\"></div>\n\t\t\t\t\t\t\t<div class=\"grid-title separated-box\"></div>\n\t\t\t\t\t\t\t<table id=\"grid\"></table>\n\t\t\t\t\t\t\t<div class=\"bottom-div\">\n\t\t\t\t\t\t\t\t<div class=\"grid-bottom-border\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t}\n}\n"],"names":["UserExpenseViewController","options","_","$","context_menu_model","$this","filter","column_filter","key","widget","args","filter_data","res","data","val","len","row","result","index","render","widgets","form_item_file_name","widgetContainer","download","view","form_item_file","a","file_name","document_attachment_id","document_revision_id","object_type_id","url","remove_id","target","doNotValidate","c_value","override_expense_policy_id","override_amount","amount_arr","expense_policies","unit_name","n","expenses","tab_expense","tab_expense_column3","form_item_input","item","records","result_data","callBack","files","success","fileItem","document_result","file_data","upload_file_result","tab_model","tab_expense_column1","tab_expense_column2","label","default_args","widget_checkbox","job_coder","job_item_coder","inside_editor_div","inside_editor_args","getRender","getRowRender"],"mappings":"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"}