{"version":3,"file":"DashletWizardController-CFjNN_5J.bundle.js","sources":["../../views/wizard/dashlet/DashletWizardController.js"],"sourcesContent":["export class DashletWizardController extends BaseWizardController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '.wizard-bg',\n\t\t\tuser_generic_data_api: null,\n\t\t\tapi_user_report: null,\n\t\t\tnumArray: [\n\t\t\t\t{ label: $.i18n._( 'Default' ), value: 0 },\n\t\t\t\t{ label: 5, value: 5 },\n\t\t\t\t{ label: 10, value: 10 },\n\t\t\t\t{ label: 15, value: 15 },\n\t\t\t\t{ label: 20, value: 20 },\n\t\t\t\t{ label: 25, value: 25 },\n\t\t\t\t{ label: 50, value: 50 },\n\t\t\t\t{ label: 100, value: 100 },\n\t\t\t\t{ label: 250, value: 250 },\n\t\t\t\t{ label: 500, value: 500 },\n\t\t\t\t{ label: 1000, value: 1000 }\n\t\t\t]\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.title = $.i18n._( 'Dashlet Wizard' );\n\t\tthis.steps = 2;\n\t\tthis.current_step = 1;\n\t\tthis.user_generic_data_api = TTAPI.APIUserGenericData;\n\t\tthis.api_user_report = TTAPI.APIUserReportData;\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tsuper.render();\n\t\tthis.initCurrentStep();\n\t}\n\n\t//Create each page UI\n\tbuildCurrentStepUI() {\n\t\tvar $this = this;\n\t\tthis.stepsWidgetDic[this.current_step] = {};\n\t\tthis.content_div.empty();\n\t\tvar combobox;\n\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tvar label = this.getLabel();\n\t\t\t\tlabel.text( $.i18n._( 'Choose the type of dashlet' ) );\n\t\t\t\tthis.content_div.append( label );\n\t\t\t\tcombobox = this.getComboBox( 'dashlet_type', false );\n\t\t\t\tcombobox.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t$this.stepsDataDic[2] = null;\n\t\t\t\t\t$this.stepsWidgetDic[2] = null;\n\t\t\t\t} );\n\t\t\t\tcombobox.off( 'change' ).on( 'change', function( e ) {\n\t\t\t\t\t$this.step1ComboboxChanged( $( e.target ).val() );\n\t\t\t\t} );\n\t\t\t\tthis.content_div.append( combobox );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tlabel = this.getLabel();\n\t\t\t\tvar step_1_data = this.stepsDataDic[1];\n\t\t\t\tvar form_item;\n\t\t\t\tvar form_item_label;\n\t\t\t\tvar form_item_input_div;\n\t\t\t\tvar textInput;\n\n\t\t\t\tif ( step_1_data.dashlet_type == 'custom_list' ) {\n\t\t\t\t\tlabel.text( $.i18n._( 'Choose a list view and layout to display in the dashlet' ) );\n\t\t\t\t\tthis.content_div.append( label );\n\n\t\t\t\t\t// Choose view\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\tcombobox = this.getComboBox( 'script', false );\n\t\t\t\t\tcombobox.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t\t$this.setLayout( $this.getScriptNameByAPIViewKey( target.getValue() ) );\n\t\t\t\t\t\t$this.setDefaultName( step_1_data.dashlet_type );\n\t\t\t\t\t} );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'List View' ) );\n\t\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\t\t//Dashlet Title\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\ttextInput = this.getTextInput( 'name', false );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Dashlet Title' ) );\n\t\t\t\t\tform_item_input_div.append( textInput );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][textInput.getField()] = textInput;\n\n\t\t\t\t\t//Choose layout\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\tcombobox = this.getComboBox( 'layout', false );\n\t\t\t\t\tcombobox.setValueKey( 'id' );\n\t\t\t\t\tcombobox.setLabelKey( 'name' );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Saved Layout' ) );\n\t\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\t\t// Rows per page\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\tcombobox = this.getComboBox( 'rows_per_page', false );\n\t\t\t\t\tcombobox.setSourceData( this.numArray );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Rows per page' ) );\n\t\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\t} else if ( step_1_data.dashlet_type == 'custom_report' ) {\n\t\t\t\t\tlabel.text( $.i18n._( 'Choose a saved report to display in the dashlet' ) );\n\t\t\t\t\tthis.content_div.append( label );\n\n\t\t\t\t\t// Choose a Report\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\tcombobox = this.getComboBox( 'report', false );\n\t\t\t\t\tcombobox.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t\t$this.setTemplateSource();\n\t\t\t\t\t\t$this.stepsWidgetDic[2].template.setValue( 'saved_report' );\n\t\t\t\t\t\t$this.setSavedReport();\n\t\t\t\t\t\t$this.setDefaultName( step_1_data.dashlet_type );\n\t\t\t\t\t} );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Report' ) );\n\t\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\t\t//Template\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\tcombobox = this.getComboBox( 'template', false );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Template' ) );\n\t\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\t\tcombobox.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t\t$this.setSavedReport();\n\t\t\t\t\t} );\n\n\t\t\t\t\t//Choose saved report\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\tcombobox = this.getComboBox( 'saved_report', false );\n\t\t\t\t\tcombobox.setValueKey( 'id' );\n\t\t\t\t\tcombobox.setLabelKey( 'name' );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Saved Report' ) );\n\t\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\t\t//Dashlet Title\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\ttextInput = this.getTextInput( 'name', false );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Dashlet Title' ) );\n\t\t\t\t\tform_item_input_div.append( textInput );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][textInput.getField()] = textInput;\n\n\t\t\t\t} else {\n\t\t\t\t\tlabel.text( $.i18n._( 'Choose dashlet specific settings' ) );\n\t\t\t\t\tthis.content_div.append( label );\n\n\t\t\t\t\t//Dashlet Title\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\ttextInput = this.getTextInput( 'name', false );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Dashlet Title' ) );\n\t\t\t\t\tform_item_input_div.append( textInput );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][textInput.getField()] = textInput;\n\n\t\t\t\t\t// Rows per page\n\t\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\t\tcombobox = this.getComboBox( 'rows_per_page', false );\n\t\t\t\t\tcombobox.setSourceData( this.numArray );\n\t\t\t\t\tform_item_label.text( $.i18n._( 'Rows per page' ) );\n\t\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\t}\n\n\t\t\t\t// Auto refresh\n\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\tcombobox = this.getComboBox( 'auto_refresh', false );\n\t\t\t\tform_item_label.text( $.i18n._( 'Auto Refresh' ) );\n\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tstep1ComboboxChanged( value ) {\n\t\tif ( Global.getProductEdition() <= 10 && ( value == 'custom_list' || value == 'custom_report' ) ) {\n\t\t\tTAlertManager.showAlert( Global.getUpgradeMessage(), $.i18n._( 'Denied' ) );\n\t\t\tGlobal.setWidgetEnabled( this.next_btn, false );\n\t\t} else {\n\t\t\tGlobal.setWidgetEnabled( this.next_btn, true );\n\t\t}\n\t}\n\n\tsetDefaultName( dashlet_type ) {\n\t\tvar step_2_ui = this.stepsWidgetDic[2];\n\t\tvar step_1_ui = this.stepsWidgetDic[1];\n\t\tif ( dashlet_type === 'custom_list' ) {\n\t\t\tstep_2_ui.name.setValue( step_2_ui.script.getLabel() );\n\t\t} else if ( dashlet_type === 'custom_report' ) {\n\t\t\tstep_2_ui.name.setValue( step_2_ui.report.getLabel() );\n\t\t} else {\n\t\t\tstep_2_ui.name.setValue( step_1_ui.dashlet_type.getLabel() );\n\t\t}\n\t}\n\n\tbuildCurrentStepData() {\n\t\tvar $this = this;\n\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\tvar api = TTAPI.APIDashboard;\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tapi.getOptions( 'dashlets', {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tvar result_data = Global.buildRecordArray( result.getResult() );\n\t\t\t\t\t\tcurrent_step_ui.dashlet_type.setSourceData( result_data );\n\t\t\t\t\t\tif ( current_step_data ) {\n\t\t\t\t\t\t\tif ( current_step_data.dashlet_type ) {\n\t\t\t\t\t\t\t\tcurrent_step_ui.dashlet_type.setValue( current_step_data.dashlet_type );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif ( current_step_data.saved_dashlet_id ) {\n\t\t\t\t\t\t\t\t\t$this.user_generic_data_api.getUserGenericData( {\n\t\t\t\t\t\t\t\t\t\tfilter_data: {\n\t\t\t\t\t\t\t\t\t\t\tid: current_step_data.saved_dashlet_id,\n\t\t\t\t\t\t\t\t\t\t\tdeleted: false\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\t\t\t\t\tif ( Global.isArray( result.getResult() ) && result.getResult().length > 0 ) {\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent_step_data.saved_dashlet = result.getResult()[0];\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent_step_ui.dashlet_type.setValue( current_step_data.saved_dashlet.data.dashlet_type );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tif ( this.stepsDataDic[1].dashlet_type == 'custom_list' ) {\n\t\t\t\t\tapi.getOptions( 'custom_list', {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tvar array = Global.buildRecordArray( result.getResult() );\n\t\t\t\t\t\t\tcurrent_step_ui.script.setSourceData( array );\n\t\t\t\t\t\t\t//If has saved steps data\n\t\t\t\t\t\t\tif ( current_step_data && current_step_data.script ) {\n\t\t\t\t\t\t\t\tcurrent_step_ui.script.setValue( current_step_data.script );\n\t\t\t\t\t\t\t\tcurrent_step_ui.name.setValue( current_step_data.name );\n\t\t\t\t\t\t\t\tcurrent_step_ui.rows_per_page.setValue( current_step_data.rows_per_page );\n\t\t\t\t\t\t\t} else if ( $this.stepsDataDic[1].saved_dashlet ) {\n\t\t\t\t\t\t\t\tcurrent_step_ui.script.setValue( $this.stepsDataDic[1].saved_dashlet.data.view_name );\n\t\t\t\t\t\t\t\tcurrent_step_ui.name.setValue( $this.stepsDataDic[1].saved_dashlet.name );\n\t\t\t\t\t\t\t\tcurrent_step_ui.rows_per_page.setValue( $this.stepsDataDic[1].saved_dashlet.data.rows_per_page );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcurrent_step_ui.script.setValue( array[0] );\n\t\t\t\t\t\t\t\t$this.setDefaultName( $this.stepsDataDic[1].dashlet_type );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$this.setLayout( $this.getScriptNameByAPIViewKey( current_step_ui.script.getValue() ), current_step_ui.layout );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} else if ( this.stepsDataDic[1].dashlet_type == 'custom_report' ) {\n\t\t\t\t\tapi.getOptions( 'custom_report', {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tvar array = Global.buildRecordArray( result.getResult() );\n\t\t\t\t\t\t\tif ( array.length === 0 ) {\n\t\t\t\t\t\t\t\tGlobal.setWidgetEnabled( $this.done_btn, false );\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcurrent_step_ui.report.setSourceData( array );\n\t\t\t\t\t\t\t//If has saved steps data\n\t\t\t\t\t\t\tif ( current_step_data && current_step_data.report ) {\n\t\t\t\t\t\t\t\tcurrent_step_ui.report.setValue( current_step_data.report );\n\t\t\t\t\t\t\t\tcurrent_step_ui.name.setValue( current_step_data.name );\n\t\t\t\t\t\t\t} else if ( $this.stepsDataDic[1].saved_dashlet ) {\n\t\t\t\t\t\t\t\tcurrent_step_ui.report.setValue( $this.stepsDataDic[1].saved_dashlet.data.report );\n\t\t\t\t\t\t\t\tcurrent_step_ui.name.setValue( $this.stepsDataDic[1].saved_dashlet.name );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcurrent_step_ui.report.setValue( array.value );\n\t\t\t\t\t\t\t\t$this.setDefaultName( $this.stepsDataDic[1].dashlet_type );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$this.setTemplateSource( current_step_ui.report.getValue() );\n\t\t\t\t\t\t\tif ( current_step_data && current_step_data.report ) {\n\t\t\t\t\t\t\t\tcurrent_step_ui.template.setValue( current_step_data.template );\n\t\t\t\t\t\t\t} else if ( $this.stepsDataDic[1].saved_dashlet ) {\n\t\t\t\t\t\t\t\tcurrent_step_ui.template.setValue( $this.stepsDataDic[1].saved_dashlet.data.template );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcurrent_step_ui.template.setValue( 'saved_report' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$this.setSavedReport( current_step_ui.report.getValue(), current_step_ui.template.getValue() );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tif ( current_step_data ) {\n\t\t\t\t\t\tcurrent_step_ui.name.setValue( current_step_data.name );\n\t\t\t\t\t\tcurrent_step_ui.rows_per_page.setValue( current_step_data.rows_per_page );\n\t\t\t\t\t} else if ( $this.stepsDataDic[1].saved_dashlet ) {\n\t\t\t\t\t\tcurrent_step_ui.name.setValue( $this.stepsDataDic[1].saved_dashlet.name );\n\t\t\t\t\t\tcurrent_step_ui.rows_per_page.setValue( $this.stepsDataDic[1].saved_dashlet.data.rows_per_page );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.setDefaultName( $this.stepsDataDic[1].dashlet_type );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tapi.getOptions( 'auto_refresh', {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tvar array = Global.buildRecordArray( result.getResult() );\n\t\t\t\t\t\tcurrent_step_ui.auto_refresh.setSourceData( array );\n\t\t\t\t\t\t//If has saved steps data\n\t\t\t\t\t\tif ( current_step_data && current_step_data.auto_refresh ) {\n\t\t\t\t\t\t\tcurrent_step_ui.auto_refresh.setValue( current_step_data.auto_refresh );\n\t\t\t\t\t\t} else if ( $this.stepsDataDic[1].saved_dashlet ) {\n\t\t\t\t\t\t\tcurrent_step_ui.auto_refresh.setValue( $this.stepsDataDic[1].saved_dashlet.data.auto_refresh );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetTemplateSource() {\n\t\tvar step_2_widgets = this.stepsWidgetDic[2];\n\t\tvar script = step_2_widgets.report.getValue();\n\t\tvar template_combobox = step_2_widgets.template;\n\t\t//var report_api = new ( APIFactory.getAPIClass( this.report_apis[script] ) )();\n\t\t//var report_api = TTAPI[this.report_apis[script]];\n\t\tvar report_api = TTAPI['API' + script];\n\t\tvar template_options_result = report_api.getOptions( 'templates', { async: false } );\n\t\tvar templates = template_options_result.getResult();\n\t\ttemplates = Global.buildRecordArray( templates );\n\t\ttemplates.unshift( {\n\t\t\tfullvalue: 'saved_report',\n\t\t\tid: 'saved_report',\n\t\t\tlabel: '-- ' + $.i18n._( 'Saved Report' ) + ' --',\n\t\t\torderValue: 0,\n\t\t\tvalue: 'saved_report'\n\t\t} );\n\t\ttemplate_combobox.setSourceData( templates );\n\t}\n\n\tsetSavedReport() {\n\t\tvar step_2_data = this.stepsDataDic[2];\n\t\tvar step_1_data = this.stepsDataDic[1];\n\t\tvar step_2_widgets = this.stepsWidgetDic[2];\n\t\tvar layout_combobox = step_2_widgets.saved_report;\n\t\tvar script = step_2_widgets.report.getValue();\n\t\tvar template = step_2_widgets.template.getValue();\n\t\tif ( template !== 'saved_report' ) {\n\t\t\tlayout_combobox.hide();\n\t\t\tlayout_combobox.parent().parent().hide();\n\t\t\treturn;\n\t\t} else {\n\t\t\tlayout_combobox.parent().parent().show();\n\t\t\tlayout_combobox.show();\n\t\t}\n\n\t\tthis.api_user_report.getUserReportData( {\n\t\t\tfilter_data: {\n\t\t\t\tscript: script\n\t\t\t}\n\t\t}, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( result_data && result_data.length > 0 ) {\n\t\t\t\t\tresult_data.sort( function( a, b ) {\n\t\t\t\t\t\t\treturn Global.compare( a, b, 'name' );\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tresult_data = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfullValue: 0,\n\t\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\t\tname: Global.empty_item,\n\t\t\t\t\t\t\tlabel: Global.empty_item,\n\t\t\t\t\t\t\torderValue: 0,\n\t\t\t\t\t\t\tvalue: 0\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tlayout_combobox.setSourceData( result_data );\n\t\t\t\tif ( step_2_data && step_2_data.layout ) {\n\t\t\t\t\tlayout_combobox.setValue( step_2_data.layout );\n\t\t\t\t} else if ( step_1_data.saved_dashlet ) {\n\t\t\t\t\tlayout_combobox.setValue( step_1_data.saved_dashlet.data.saved_report );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetLayout( script ) {\n\t\tvar step_2_data = this.stepsDataDic[2];\n\t\tvar step_1_data = this.stepsDataDic[1];\n\t\tvar layout_combobox = this.stepsWidgetDic[2].layout;\n\t\tthis.user_generic_data_api.getUserGenericData( {\n\t\t\tfilter_data: {\n\t\t\t\tscript: script,\n\t\t\t\tdeleted: false\n\t\t\t}\n\t\t}, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tif ( result_data && result_data.length > 0 ) {\n\t\t\t\t\tresult_data.sort( function( a, b ) {\n\t\t\t\t\t\t\treturn Global.compare( a, b, 'name' );\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tresult_data = [{ id: 0, name: '- ' + $.i18n._( 'Default' ) + ' -' }];\n\t\t\t\t}\n\t\t\t\tlayout_combobox.setSourceData( result_data );\n\t\t\t\tif ( step_2_data && step_2_data.layout ) {\n\t\t\t\t\tlayout_combobox.setValue( step_2_data.layout );\n\t\t\t\t} else if ( step_1_data.saved_dashlet ) {\n\t\t\t\t\tlayout_combobox.setValue( step_1_data.saved_dashlet.data.layout_id );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetScriptNameByAPIViewKey( key ) {\n\t\tvar result = '';\n\t\tswitch ( key ) {\n\t\t\tcase 'Exception':\n\t\t\t\tresult = 'exceptionView';\n\t\t\t\tbreak;\n\t\t\tcase 'Request':\n\t\t\t\tresult = 'RequestView';\n\t\t\t\tbreak;\n\t\t\tcase 'User':\n\t\t\t\tresult = 'EmployeeView';\n\t\t\t\tbreak;\n\t\t\tcase 'UserExpense':\n\t\t\t\tresult = 'UserExpenseView';\n\t\t\t\tbreak;\n\t\t\tcase 'Schedule':\n\t\t\t\tresult = 'ScheduleShiftView';\n\t\t\t\tbreak;\n\t\t\tcase 'Invoice':\n\t\t\t\tresult = 'InvoiceView';\n\t\t\t\tbreak;\n\t\t\tcase 'Request-Authorization':\n\t\t\t\tresult = 'RequestAuthorizationView';\n\t\t\t\tbreak;\n\t\t\tcase 'PayPeriodTimeSheetVerify':\n\t\t\t\tresult = 'TimeSheetAuthorizationView';\n\t\t\t\tbreak;\n\t\t\tcase 'UserExpense-Authorization':\n\t\t\t\tresult = 'ExpenseAuthorizationView';\n\t\t\t\tbreak;\n\t\t\tcase 'AccrualBalance':\n\t\t\t\tresult = 'AccrualBalanceView';\n\t\t\t\tbreak;\n\t\t\tcase 'Accrual':\n\t\t\t\tresult = 'AccrualView';\n\t\t\t\tbreak;\n\t\t\tcase 'RecurringScheduleControl':\n\t\t\t\tresult = 'RecurringScheduleControlView';\n\t\t\t\tbreak;\n\t\t\tcase 'RecurringScheduleTemplateControl':\n\t\t\t\tresult = 'RecurringScheduleTemplateControlView';\n\t\t\t\tbreak;\n\t\t\tcase 'Job':\n\t\t\t\tresult = 'JobView';\n\t\t\t\tbreak;\n\t\t\tcase 'JobItem':\n\t\t\t\tresult = 'JobItemView';\n\t\t\t\tbreak;\n\t\t\tcase 'UserContact':\n\t\t\t\tresult = 'UserContactView';\n\t\t\t\tbreak;\n\t\t\tcase 'UserWage':\n\t\t\t\tresult = 'WageView';\n\t\t\t\tbreak;\n\t\t\tcase 'PayStub':\n\t\t\t\tresult = 'PayStubView';\n\t\t\t\tbreak;\n\t\t\tcase 'PayStubTransaction':\n\t\t\t\tresult = 'PayStubTransactionView';\n\t\t\t\tbreak;\n\t\t\tcase 'PayPeriod':\n\t\t\t\tresult = 'PayPeriodsView';\n\t\t\t\tbreak;\n\t\t\tcase 'PayStubAmendment':\n\t\t\t\tresult = 'PayStubAmendmentView';\n\t\t\t\tbreak;\n\t\t\tcase 'Client':\n\t\t\t\tresult = 'ClientView';\n\t\t\t\tbreak;\n\t\t\tcase 'ClientContact':\n\t\t\t\tresult = 'ClientContactView';\n\t\t\t\tbreak;\n\t\t\tcase 'Transaction':\n\t\t\t\tresult = 'InvoiceTransaction';\n\t\t\t\tbreak;\n\t\t\tcase 'UserReviewControl':\n\t\t\t\tresult = 'UserReviewControlView';\n\t\t\t\tbreak;\n\t\t\tcase 'JobVacancy':\n\t\t\t\tresult = 'JobVacancyView';\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplicant':\n\t\t\t\tresult = 'JobApplicantView';\n\t\t\t\tbreak;\n\t\t\tcase 'JobApplication':\n\t\t\t\tresult = 'JobApplicationView';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tonDoneClick() {\n\t\tvar $this = this;\n\t\tsuper.onDoneClick();\n\t\tthis.saveCurrentStep();\n\t\tthis.stepsWidgetDic[2].name.clearErrorStyle();\n\t\tvar saved_dashlet = this.stepsDataDic[1].saved_dashlet;\n\t\tvar dashlet_type = this.stepsDataDic[1].dashlet_type;\n\t\tvar dasglet_name = this.stepsDataDic[2].name;\n\t\tvar auto_refresh = this.stepsDataDic[2].auto_refresh;\n\t\tvar rows_per_page = this.stepsDataDic[2].rows_per_page;\n\t\tvar height = 200;\n\t\tvar width = 33;\n\t\tif ( dashlet_type === 'custom_report' ) {\n\t\t\twidth = 99;\n\t\t}\n\t\tvar args = {};\n\t\tif ( !dasglet_name ) {\n\t\t\tthis.stepsWidgetDic[2].name.setErrorStyle( 'Dashlet title can\\'t be empty', true );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( dashlet_type == 'custom_list' ) {\n\t\t\tvar view_name = this.stepsDataDic[2].script;\n\t\t\tvar layout_id = this.stepsDataDic[2].layout;\n\t\t\tif ( !saved_dashlet ) {\n\t\t\t\targs.script = 'global_dashboard';\n\t\t\t\targs.name = dasglet_name;\n\t\t\t\targs.is_default = 'false';\n\t\t\t\targs.data = {\n\t\t\t\t\tdashlet_type: dashlet_type,\n\t\t\t\t\tview_name: view_name,\n\t\t\t\t\tlayout_id: layout_id,\n\t\t\t\t\tauto_refresh: auto_refresh,\n\t\t\t\t\theight: height,\n\t\t\t\t\twidth: width,\n\t\t\t\t\trows_per_page: rows_per_page\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\targs = saved_dashlet;\n\t\t\t\targs.name = dasglet_name;\n\t\t\t\targs.is_default = 'false';\n\t\t\t\targs.data.dashlet_type = dashlet_type;\n\t\t\t\targs.data.view_name = view_name;\n\t\t\t\targs.data.layout_id = layout_id;\n\t\t\t\targs.data.auto_refresh = auto_refresh;\n\t\t\t\targs.data.rows_per_page = rows_per_page;\n\t\t\t}\n\t\t} else if ( dashlet_type == 'custom_report' ) {\n\t\t\tvar report = this.stepsDataDic[2].report;\n\t\t\tvar saved_report_id = ( this.stepsDataDic[2].saved_report && this.stepsDataDic[2].saved_report != 0 ) ? this.stepsDataDic[2].saved_report : false;\n\t\t\tvar template = this.stepsDataDic[2].template;\n\t\t\tif ( template === 'saved_report' && !saved_report_id ) {\n\t\t\t\tTAlertManager.showAlert( $.i18n._( 'No saved report!' ) );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( !saved_dashlet ) {\n\t\t\t\targs.script = 'global_dashboard';\n\t\t\t\targs.name = dasglet_name;\n\t\t\t\targs.is_default = 'false';\n\t\t\t\targs.data = {\n\t\t\t\t\tdashlet_type: dashlet_type,\n\t\t\t\t\treport: report,\n\t\t\t\t\ttemplate: template,\n\t\t\t\t\tsaved_report_id: saved_report_id,\n\t\t\t\t\tauto_refresh: auto_refresh,\n\t\t\t\t\theight: height,\n\t\t\t\t\twidth: width\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\targs = saved_dashlet;\n\t\t\t\targs.name = dasglet_name;\n\t\t\t\targs.is_default = 'false';\n\t\t\t\targs.data.dashlet_type = dashlet_type;\n\t\t\t\targs.data.report = report;\n\t\t\t\targs.data.template = template;\n\t\t\t\targs.data.saved_report_id = saved_report_id;\n\t\t\t\targs.data.auto_refresh = auto_refresh;\n\t\t\t\targs.data.rows_per_page = rows_per_page;\n\t\t\t}\n\t\t} else {\n\t\t\tif ( !saved_dashlet ) {\n\t\t\t\targs.script = 'global_dashboard';\n\t\t\t\targs.name = dasglet_name;\n\t\t\t\targs.is_default = 'false';\n\t\t\t\targs.data = {\n\t\t\t\t\tdashlet_type: dashlet_type,\n\t\t\t\t\tauto_refresh: auto_refresh,\n\t\t\t\t\trows_per_page: rows_per_page,\n\t\t\t\t\theight: height,\n\t\t\t\t\twidth: width\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\targs = saved_dashlet;\n\t\t\t\targs.name = dasglet_name;\n\t\t\t\targs.is_default = 'false';\n\t\t\t\targs.data.dashlet_type = dashlet_type;\n\t\t\t\targs.data.auto_refresh = auto_refresh;\n\t\t\t\targs.data.rows_per_page = rows_per_page;\n\t\t\t}\n\t\t}\n\n\t\tthis.user_generic_data_api.setUserGenericData( args, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tif ( result && result.isValid() ) {\n\t\t\t\t\t$this.onCloseClick();\n\t\t\t\t\tif ( $this.call_back ) {\n\t\t\t\t\t\t$this.call_back();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tTAlertManager.showErrorAlert( result );\n\t\t\t\t}\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tsaveCurrentStep() {\n\t\tif ( !this.stepsDataDic[this.current_step] ) {\n\t\t\tthis.stepsDataDic[this.current_step] = {};\n\t\t}\n\n\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tcurrent_step_data.dashlet_type = current_step_ui.dashlet_type.getValue();\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tvar step_1_data = this.stepsDataDic[1];\n\t\t\t\tif ( step_1_data.dashlet_type == 'custom_list' ) {\n\t\t\t\t\tcurrent_step_data.script = current_step_ui.script.getValue();\n\t\t\t\t\tcurrent_step_data.layout = current_step_ui.layout.getValue();\n\t\t\t\t\tcurrent_step_data.rows_per_page = current_step_ui.rows_per_page.getValue();\n\t\t\t\t\tcurrent_step_data.name = current_step_ui.name.getValue();\n\t\t\t\t} else if ( step_1_data.dashlet_type == 'custom_report' ) {\n\t\t\t\t\tcurrent_step_data.report = current_step_ui.report.getValue();\n\t\t\t\t\tcurrent_step_data.saved_report = current_step_ui.saved_report.getValue();\n\t\t\t\t\tcurrent_step_data.name = current_step_ui.name.getValue();\n\t\t\t\t\tcurrent_step_data.template = current_step_ui.template.getValue();\n\t\t\t\t} else {\n\t\t\t\t\tcurrent_step_data.name = current_step_ui.name.getValue();\n\t\t\t\t\tcurrent_step_data.rows_per_page = current_step_ui.rows_per_page.getValue();\n\t\t\t\t}\n\t\t\t\tcurrent_step_data.auto_refresh = current_step_ui.auto_refresh.getValue();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tgetProperDashletName( step_1_data ) {\n\t\tvar key = step_1_data['dashlet_type'];\n\t\tvar name = '';\n\t\tswitch ( key ) {\n\t\t\tcase 'request_summary':\n\t\t\t\tname = $.i18n._( 'Request Summary' );\n\t\t\t\tbreak;\n\t\t\tcase 'expense_summary':\n\t\t\t\tname = $.i18n._( 'Expense Summary' );\n\t\t\t\tbreak;\n\t\t\tcase 'message_summary':\n\t\t\t\tname = $.i18n._( 'Message Summary' );\n\t\t\t\tbreak;\n\t\t\tcase 'exception_summary':\n\t\t\t\tname = $.i18n._( 'Exception Summary' );\n\t\t\t\tbreak;\n\t\t}\n\t\treturn name;\n\t}\n\n\tsetDefaultDataToSteps() {\n\t\tif ( !this.default_data ) {\n\t\t\treturn null;\n\t\t}\n\t\tthis.stepsDataDic[1] = {};\n\t\tif ( this.getDefaultData( 'saved_dashlet_id' ) ) {\n\t\t\tthis.stepsDataDic[1].saved_dashlet_id = this.getDefaultData( 'saved_dashlet_id' );\n\t\t} else {\n\t\t\tthis.stepsDataDic[1].saved_dashlet_id = false;\n\t\t}\n\t}\n\n}"],"names":["DashletWizardController","options","_","$","$this","combobox","label","e","target","step_1_data","form_item","form_item_label","form_item_input_div","textInput","value","dashlet_type","step_2_ui","step_1_ui","current_step_data","current_step_ui","api","result","result_data","array","step_2_widgets","script","template_combobox","report_api","template_options_result","templates","step_2_data","layout_combobox","template","a","b","key","saved_dashlet","dasglet_name","auto_refresh","rows_per_page","height","width","args","view_name","layout_id","report","saved_report_id","name"],"mappings":"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"}