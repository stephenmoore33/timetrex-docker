{"version":3,"file":"AccrualPolicyUserModifierViewController-CGcYpZYl.bundle.js","sources":["../../views/policy/accrual_policy/AccrualPolicyUserModifierViewController.js"],"sourcesContent":["export class AccrualPolicyUserModifierViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#accrual_policy_user_modifier_view_container', //Must set el here and can only set string, so events can work\n\n\t\t\tuser_api: null,\n\n\t\t\tparent_view: null,\n\n\t\t\tresult_details: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\tthis.parent_view = this.parent_view_controller.viewId === 'Employee' ? 'employee' : 'accrual_policy'; //Previously was passed in the <script> tag of edit view html.\n\t\t//this._super('initialize', options );\n\t\tif ( this.parent_view === 'employee' ) {\n\t\t\tthis.context_menu_name = $.i18n._( 'Accruals' );\n\t\t\tthis.navigation_label = $.i18n._( 'Accrual' );\n\t\t} else if ( this.parent_view === 'accrual_policy' ) {\n\t\t\tthis.context_menu_name = $.i18n._( 'Employee Settings' );\n\t\t\tthis.navigation_label = $.i18n._( 'Employee Accrual Modifier' );\n\t\t}\n\t\tthis.edit_view_tpl = 'AccrualPolicyUserModifierEditView.html';\n\t\tthis.permission_id = 'accrual_policy';\n\t\tthis.script_name = 'AccrualPolicyUserModifierView';\n\t\tthis.viewId = 'AccrualPolicyUserModifier';\n\t\tthis.table_name_key = 'accrual_policy_user_modifier';\n\n\t\tthis.api = TTAPI.APIAccrualPolicyUserModifier;\n\t\tthis.user_api = TTAPI.APIUser;\n\n\t\tthis.render();\n\t\tif ( this.sub_view_mode ) {\n\t\t\tthis.buildContextMenu( true );\n\t\t} else {\n\t\t\tthis.buildContextMenu();\n\t\t}\n\n\t\t//call init data in parent view\n\t\tif ( !this.sub_view_mode ) {\n\t\t\tthis.initData();\n\t\t}\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: ['add', 'copy'],\n\t\t\tinclude: ['default']\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tsetSubLogViewFilter() {\n\t\tif ( !this.sub_log_view_controller ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.sub_log_view_controller.getSubViewFilter = function( filter ) {\n\t\t\tfilter['table_name_object_id'] = {\n\t\t\t\t'accrual_policy_user_modifier': [this.parent_edit_record.accrual_policy_id]\n\t\t\t};\n\n\t\t\treturn filter;\n\t\t};\n\n\t\treturn true;\n\t}\n\n\tonAddClick() {\n\t\tvar $this = this;\n\t\tthis.setCurrentEditViewState( 'new' );\n\t\t$this.openEditView();\n\n\t\tvar user_id;\n\n\t\tif ( $this.sub_view_mode && $this.parent_key ) {\n\t\t\tswitch ( $this.parent_key ) {\n\t\t\t\tcase 'user_id':\n\t\t\t\t\tuser_id = $this.parent_value;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'accrual_policy_id':\n\t\t\t\t\tuser_id = false;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tuser_id = false;\n\t\t}\n\n\t\t$this.api['get' + $this.api.key_name + 'DefaultData']( user_id, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.onAddResult( result );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetSelectLayout( column_start_from ) {\n\t\tvar $this = this;\n\t\tvar grid;\n\t\tif ( !Global.isSet( this.grid ) ) {\n\t\t\tgrid = $( this.el ).find( '#grid' );\n\n\t\t\tgrid.attr( 'id', this.ui_id + '_grid' );  //Grid's id is ScriptName + _grid\n\n\t\t\tgrid = $( this.el ).find( '#' + this.ui_id + '_grid' );\n\t\t}\n\n\t\tvar column_info_array = [];\n\n\t\tvar column_info;\n\n\t\tif ( !this.select_layout ) { //Set to default layout if no layout at all\n\t\t\tthis.select_layout = { id: '' };\n\t\t\tthis.select_layout.data = { filter_data: {}, filter_sort: {} };\n\t\t\tthis.select_layout.data.display_columns = this.default_display_columns;\n\t\t}\n\t\tvar layout_data = this.select_layout.data;\n\n\t\tif ( layout_data.display_columns.length < 1 ) {\n\t\t\tlayout_data.display_columns = this.default_display_columns;\n\t\t}\n\n\t\tvar display_columns = this.buildDisplayColumns( layout_data.display_columns );\n\n\t\tif ( !this.sub_view_mode ) {\n\n\t\t\t//Set Display Column in layout panel\n\t\t\tthis.column_selector.setSelectGridData( display_columns );\n\n\t\t\t//Set Sort by awesomebox in layout panel\n\t\t\tthis.sort_by_selector.setSourceData( this.buildSortSelectorUnSelectColumns( display_columns ) );\n\t\t\tthis.sort_by_selector.setValue( this.buildSortBySelectColumns() );\n\n\t\t\t//Set Previoous Saved layout combobox in layout panel\n\t\t\tvar layouts_array = this.search_panel.getLayoutsArray();\n\n\t\t\tthis.setPreviousSavedSearchSourcesAndValue( layouts_array );\n\n\t\t}\n\n\t\t//Set Data Grid on List view\n\t\tvar len = display_columns.length;\n\n\t\tvar start_from = 0;\n\n\t\tif ( Global.isSet( column_start_from ) && column_start_from > 0 ) {\n\t\t\tstart_from = column_start_from;\n\t\t}\n\n\t\tif ( !this.grid ) {\n\t\t\t//\t\tfor ( i = start_from; i < len; i++ ) {\n\t\t\t//\t\t\tvar view_column_data = display_columns[i];\n\t\t\t//\n\t\t\t//\t\t\tvar column_info = {name: view_column_data.value, index: view_column_data.value, label: view_column_data.label, width: 100, sortable: false, title: false};\n\t\t\t//\t\t\tcolumn_info_array.push( column_info );\n\t\t\t//\t\t}\n\n\t\t\tif ( this.parent_view === 'accrual_policy' ) {\n\t\t\t\tcolumn_info = {\n\t\t\t\t\tname: 'full_name',\n\t\t\t\t\tindex: 'full_name',\n\t\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\t\twidth: 50,\n\t\t\t\t\tsortable: false,\n\t\t\t\t\ttitle: false\n\t\t\t\t};\n\t\t\t\tcolumn_info_array.push( column_info );\n\n\t\t\t} else if ( this.parent_view === 'employee' ) {\n\t\t\t\tcolumn_info = {\n\t\t\t\t\tname: 'accrual_policy',\n\t\t\t\t\tindex: 'accrual_policy',\n\t\t\t\t\tlabel: $.i18n._( 'Accrual Policy' ),\n\t\t\t\t\twidth: 50,\n\t\t\t\t\tsortable: false,\n\t\t\t\t\ttitle: false\n\t\t\t\t};\n\t\t\t\tcolumn_info_array.push( column_info );\n\t\t\t}\n\n\t\t\tcolumn_info = {\n\t\t\t\tname: 'length_of_service_date',\n\t\t\t\tindex: 'length_of_service_date',\n\t\t\t\tlabel: $.i18n._( 'Length of Service Date' ),\n\t\t\t\twidth: 80,\n\t\t\t\tsortable: false,\n\t\t\t\ttitle: false\n\t\t\t};\n\t\t\tcolumn_info_array.push( column_info );\n\n\t\t\tcolumn_info = {\n\t\t\t\tname: 'length_of_service_modifier',\n\t\t\t\tindex: 'length_of_service_modifier',\n\t\t\t\tlabel: $.i18n._( 'Length of Service Modifier' ),\n\t\t\t\twidth: 90,\n\t\t\t\tsortable: false,\n\t\t\t\ttitle: false\n\t\t\t};\n\t\t\tcolumn_info_array.push( column_info );\n\n\t\t\tcolumn_info = {\n\t\t\t\tname: 'accrual_rate_modifier',\n\t\t\t\tindex: 'accrual_rate_modifier',\n\t\t\t\tlabel: $.i18n._( 'Accrual Rate Modifier' ),\n\t\t\t\twidth: 80,\n\t\t\t\tsortable: false,\n\t\t\t\ttitle: false\n\t\t\t};\n\t\t\tcolumn_info_array.push( column_info );\n\n\t\t\tcolumn_info = {\n\t\t\t\tname: 'annual_maximum_time_modifier',\n\t\t\t\tindex: 'annual_maximum_time_modifier',\n\t\t\t\tlabel: $.i18n._( 'Annual Accrual Maximum Modifier' ),\n\t\t\t\twidth: 110,\n\t\t\t\tsortable: false,\n\t\t\t\ttitle: false\n\t\t\t};\n\t\t\tcolumn_info_array.push( column_info );\n\n\t\t\tcolumn_info = {\n\t\t\t\tname: 'maximum_time_modifier',\n\t\t\t\tindex: 'maximum_time_modifier',\n\t\t\t\tlabel: $.i18n._( 'Accrual Maximum Balance Modifier' ),\n\t\t\t\twidth: 110,\n\t\t\t\tsortable: false,\n\t\t\t\ttitle: false\n\t\t\t};\n\t\t\tcolumn_info_array.push( column_info );\n\n\t\t\t//\t\tcolumn_info = {name: 'minimum_time_modifier', index: 'minimum_time_modifier', label: 'Accrual Total Minimum Modifier', width:110, sortable: false, title: false};\n\t\t\t//\t\tcolumn_info_array.push( column_info );\n\n\t\t\tcolumn_info = {\n\t\t\t\tname: 'rollover_time_modifier',\n\t\t\t\tindex: 'rollover_time_modifier',\n\t\t\t\tlabel: $.i18n._( 'Annual Maximum Rollover Modifier' ),\n\t\t\t\twidth: 110,\n\t\t\t\tsortable: false,\n\t\t\t\ttitle: false\n\t\t\t};\n\t\t\tcolumn_info_array.push( column_info );\n\n\t\t\tvar container = 'body';\n\n\t\t\tif ( $this.sub_view_mode ) {\n\t\t\t\tif ( $( '#tab_accruals:visible' ).length > 0 ) {\n\t\t\t\t\tcontainer = '#tab_accruals';\n\t\t\t\t} else {\n\t\t\t\t\tcontainer = '#tab_employee_settings';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar grid_setup = this.getGridSetup();\n\t\t\tthis.grid = new TTGrid( this.ui_id + '_grid', grid_setup, column_info_array );\n\t\t}\n\t\t// else {\n\t\t// \tgrid = $( this.el ).find( '#' + this.ui_id + '_grid' );\n\t\t// }\n\n\t\t$this.setGridSize();\n\n\t\t//Add widget on UI and bind events. Next set data in it in search result.\n\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\tif ( this.paging_widget.parent().length > 0 ) {\n\t\t\t\tthis.paging_widget.remove();\n\t\t\t}\n\n\t\t\tthis.paging_widget.css( 'width', this.grid.width() );\n\t\t\tthis.grid.grid.append( this.paging_widget );\n\n\t\t\tthis.paging_widget.click( $.proxy( this.onPaging, this ) );\n\n\t\t} else {\n\t\t\tif ( this.paging_widget.parent().length < 1 ) {\n\t\t\t\t$( this.el ).find( '.total-number-div' ).append( this.paging_widget );\n\t\t\t\t$( this.el ).find( '.bottom-div' ).append( this.paging_widget_2 );\n\n\t\t\t\tthis.paging_widget.bind( 'paging', $.proxy( this.onPaging2, this ) );\n\t\t\t\tthis.paging_widget_2.bind( 'paging', $.proxy( this.onPaging2, this ) );\n\t\t\t}\n\n\t\t}\n\n\t\tthis.bindGridColumnEvents();\n\n\t\tthis.setGridHeaderStyle(); //Set Sort Style\n\n\t\t//replace select layout filter_data to filter set in onNavigation function when goto view from navigation context group\n\t\tif ( LocalCacheData.default_filter_for_next_open_view ) {\n\t\t\tthis.select_layout.data.filter_data = LocalCacheData.default_filter_for_next_open_view.filter_data;\n\t\t\tLocalCacheData.default_filter_for_next_open_view = null;\n\t\t}\n\n\t\tthis.filter_data = this.select_layout.data.filter_data;\n\n\t\tif ( !this.sub_view_mode ) {\n\t\t\tthis.setSearchPanelFilter( true ); //Auto change to property tab when set value to search fields.\n\t\t}\n\n\t\tthis.showGridBorders();\n\t}\n\n\tsetGridSetup() {\n\t\tvar $this = this;\n\t\treturn {\n\t\t\theight: 200,\n\t\t\tonResizeGrid: true,\n\t\t\tsub_grid_mode: this.sub_view_mode,\n\t\t\tcontainer_selector: container,\n\t\t\tonSelectRow: function() {\n\t\t\t\t$this.onGridSelectRow();\n\t\t\t},\n\t\t\tonCellSelect: function() {\n\t\t\t\t$this.onGridSelectRow();\n\t\t\t},\n\t\t\tonSelectAll: function() {\n\t\t\t\t$this.onGridSelectAll();\n\t\t\t},\n\t\t\tondblClickRow: function( e ) {\n\t\t\t\t$this.onGridDblClickRow( e );\n\t\t\t},\n\t\t\tonRightClickRow: function( rowId ) {\n\t\t\t\tvar id_array = $this.getGridSelectIdArray();\n\t\t\t\tif ( id_array.indexOf( rowId ) < 0 ) {\n\t\t\t\t\t$this.grid.grid.resetSelection();\n\t\t\t\t\t$this.grid.grid.setSelection( rowId );\n\t\t\t\t\t$this.onGridSelectRow();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tgetFilterColumnsFromDisplayColumns() {\n\t\t// Error: Unable to get property 'getGridParam' of undefined or null reference\n\t\tvar display_columns = [];\n\t\tif ( this.grid ) {\n\t\t\tdisplay_columns = this.grid.grid.getGridParam( 'colModel' );\n\t\t}\n\t\tvar column_filter = {};\n\t\tcolumn_filter.is_owner = true;\n\t\tcolumn_filter.id = true;\n\t\tcolumn_filter.user_id = true;\n\t\tcolumn_filter.accrual_policy_id = true;\n\t\tcolumn_filter.is_child = true;\n\t\tcolumn_filter.in_use = true;\n\t\tcolumn_filter.first_name = true;\n\t\tcolumn_filter.last_name = true;\n\t\tcolumn_filter.type_id = true;\n\n\t\t//Fixed possible exception -- Error: Unable to get property 'length' of undefined or null reference in /interface/html5/views/BaseViewController.js?v=7.4.3-20140924-090129 line 5031\n\t\tif ( display_columns ) {\n\t\t\tvar len = display_columns.length;\n\n\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\tvar column_info = display_columns[i];\n\t\t\t\tcolumn_filter[column_info.name] = true;\n\t\t\t}\n\t\t}\n\n\t\treturn column_filter;\n\t}\n\n\tdoEditAPICall( filter, api_args, _callback ) {\n\t\tvar record_id = this.getCurrentSelectedRecord();\n\t\tif ( TTUUID.isUUID( record_id ) && record_id != TTUUID.not_exist_id && record_id != TTUUID.zero_id ) {\n\t\t\treturn super.doEditAPICall( filter, api_args, _callback );\n\t\t} else {\n\t\t\tvar result_data = this.getRecordFromGridById( record_id );\n\n\t\t\tif ( result_data && result_data.id ) {\n\t\t\t\tresult_data.id = '';\n\t\t\t}\n\t\t\treturn this.handleEditAPICallbackResult( result_data );\n\t\t}\n\t}\n\n\tdoViewAPICall( filter, api_args, _callback ) {\n\t\tvar record_id = this.getCurrentSelectedRecord();\n\t\tif ( TTUUID.isUUID( record_id ) && record_id != TTUUID.not_exist_id && record_id != TTUUID.zero_id ) {\n\t\t\treturn super.doViewAPICall( filter, api_args, _callback );\n\t\t} else {\n\t\t\tvar result_data = this.getRecordFromGridById( record_id );\n\n\t\t\tif ( result_data && result_data.id ) {\n\t\t\t\tresult_data.id = '';\n\t\t\t}\n\t\t\treturn this.handleViewAPICallbackResult( result_data );\n\t\t}\n\t}\n\n\tonSaveResult( result ) {\n\t\tvar $this = this;\n\t\tif ( result && result.isValid() ) {\n\t\t\t//Setting is_add false too early can cause determineContextMenuMountAttributes() to have unexpected side effects. However not setting it here might have other side effects.\n\t\t\t//$this.is_add = false;\n\t\t\tvar result_data = result.getResult();\n\n\t\t\tif ( !this.edit_only_mode ) {\n\t\t\t\tif ( result_data === true ) {\n\t\t\t\t\t$this.refresh_id = $this.current_edit_record.id;\n\t\t\t\t} else if ( TTUUID.isUUID( result_data ) && result_data != TTUUID.zero_id && result_data != TTUUID.not_exist_id ) {\n\t\t\t\t\t$this.refresh_id = result_data;\n\t\t\t\t}\n\n\t\t\t\tif ( Global.isSet( $this.refresh_id ) === false ) {\n\t\t\t\t\t$this.result_details = result.getDetails();\n\t\t\t\t}\n\n\t\t\t\t$this.search();\n\t\t\t}\n\n\t\t\t$this.onSaveDone( result );\n\n\t\t\t$this.removeEditView();\n\n\t\t} else {\n\t\t\t$this.setErrorMenu();\n\t\t\t$this.setErrorTips( result );\n\n\t\t}\n\t}\n\n\tsearch( set_default_menu, page_action, page_number, callBack ) {\n\t\tif ( !Global.isSet( set_default_menu ) ) {\n\t\t\tset_default_menu = true;\n\t\t}\n\n\t\tvar $this = this;\n\t\tvar filter = {};\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_sort = {};\n\t\tfilter.filter_columns = this.getFilterColumnsFromDisplayColumns();\n\t\tfilter.filter_items_per_page = 0; // Default to 0 to load user preference defined\n\n\t\tif ( this.pager_data ) {\n\n\t\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\t\tif ( page_action === 'next' ) {\n\t\t\t\t\tfilter.filter_page = this.pager_data.next_page;\n\t\t\t\t} else {\n\t\t\t\t\tfilter.filter_page = 1;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tswitch ( page_action ) {\n\t\t\t\t\tcase 'next':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.next_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'last':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.previous_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'start':\n\t\t\t\t\t\tfilter.filter_page = 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.last_page_number;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'go_to':\n\t\t\t\t\t\tfilter.filter_page = page_number;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tfilter.filter_page = this.pager_data.current_page;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\t\t\tfilter.filter_page = 1;\n\t\t}\n\n\t\tif ( this.sub_view_mode && this.parent_key ) {\n\t\t\tthis.select_layout.data.filter_data[this.parent_key] = this.parent_value;\n\t\t}\n\n\t\t//If sub view controller set custom filters, get it\n\t\tif ( Global.isSet( this.getSubViewFilter ) ) {\n\n\t\t\tthis.select_layout.data.filter_data = this.getSubViewFilter( this.select_layout.data.filter_data );\n\n\t\t}\n\n\t\t//select_layout will not be null, it's set in setSelectLayout function\n\t\tfilter.filter_data = Global.convertLayoutFilterToAPIFilter( this.select_layout );\n\t\tfilter.filter_sort = this.select_layout.data.filter_sort;\n\n\t\tif ( TTUUID.isUUID( this.refresh_id ) ) {\n\t\t\tfilter.filter_data = {};\n\t\t\tfilter.filter_data.id = [this.refresh_id];\n\n\t\t\tthis.last_select_ids = filter.filter_data.id;\n\n\t\t} else {\n\n\t\t\tif ( Global.isSet( this.result_details ) && this.result_details.length > 0 ) {\n\t\t\t\tthis.result_details = $.map( this.result_details, function( n ) {\n\t\t\t\t\treturn n === true ? 0 : n;\n\t\t\t\t} );\n\t\t\t\tthis.last_select_ids = Global.concatArraysUniqueWithSort( this.result_details, this.getGridSelectIdArray() );\n\t\t\t} else {\n\t\t\t\tthis.last_select_ids = this.getGridSelectIdArray();\n\t\t\t}\n\n\t\t}\n\n\t\tthis.api['get' + this.api.key_name]( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\tvar len;\n\n\t\t\t\tif ( !Global.isArray( result_data ) ) {\n\t\t\t\t\t$this.showNoResultCover();\n\t\t\t\t} else {\n\t\t\t\t\t$this.removeNoResultCover();\n\t\t\t\t\tif ( Global.isSet( $this.__createRowId ) ) {\n\t\t\t\t\t\tresult_data = $this.__createRowId( result_data );\n\t\t\t\t\t}\n\n\t\t\t\t\tresult_data = Global.formatGridData( result_data, $this.api.key_name );\n\n\t\t\t\t\tlen = result_data.length;\n\t\t\t\t}\n\t\t\t\tif ( TTUUID.isUUID( $this.refresh_id ) ) {\n\t\t\t\t\t$this.refresh_id = null;\n\t\t\t\t\tvar grid_source_data = $this.grid.getData();\n\t\t\t\t\tlen = grid_source_data.length;\n\n\t\t\t\t\tif ( $.type( grid_source_data ) !== 'array' ) {\n\t\t\t\t\t\tgrid_source_data = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tvar found = false;\n\t\t\t\t\tvar new_record = result_data[0];\n\n\t\t\t\t\t//Error: Uncaught TypeError: Cannot read property 'id' of undefined in /interface/html5/views/BaseViewController.js?v=7.4.3-20140924-084605 line 4851\n\t\t\t\t\tif ( new_record ) {\n\t\t\t\t\t\tvar new_grid_source_data = [];\n\n\t\t\t\t\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\t\t\t\t\tvar record = grid_source_data[i];\n\n\t\t\t\t\t\t\t//Fixed === issue. The id set by jQGrid is string type.\n\t\t\t\t\t\t\t// if ( !isNaN( parseInt( record.id ) ) ) {\n\t\t\t\t\t\t\t// \trecord.id = parseInt( record.id );\n\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\tif ( record.id == new_record.id ) {\n\t\t\t\t\t\t\t\t$this.grid.grid.setRowData( new_record.id, new_record );\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( record.id < 0 && record.user_id == new_record.user_id ) {\n\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnew_grid_source_data.push( record );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( !found ) {\n\t\t\t\t\t\t\t//Refresh the search because this is a special case where a new record is added, but the UI sees an edit of the existing join row.\n\t\t\t\t\t\t\t// $this.grid.clearGridData();\n\t\t\t\t\t\t\t// $this.grid.setGridParam( {data: new_grid_source_data.concat( new_record )} );\n\t\t\t\t\t\t\t$this.search();\n\n\t\t\t\t\t\t\t// if ( $this.sub_view_mode && Global.isSet( $this.resizeSubGrid ) ) {\n\t\t\t\t\t\t\t// \tlen = Global.isSet( len ) ? len : 0;\n\t\t\t\t\t\t\t// \t$this.resizeSubGrid( len + 1 );\n\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\t//s$this.grid.grid.trigger( 'reloadGrid' );\n\t\t\t\t\t\t\t$this.reSelectLastSelectItems();\n\t\t\t\t\t\t\t$this.highLightGridRowById( new_record.id );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\t//Set Page data to widget, next show display info when setDefault Menu\n\t\t\t\t\t$this.pager_data = result.getPagerData();\n\n\t\t\t\t\t//CLick to show more mode no need this step\n\t\t\t\t\tif ( LocalCacheData.paging_type !== 0 ) {\n\t\t\t\t\t\t$this.paging_widget.setPagerData( $this.pager_data );\n\t\t\t\t\t\t$this.paging_widget_2.setPagerData( $this.pager_data );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( LocalCacheData.paging_type === 0 && page_action === 'next' ) {\n\t\t\t\t\t\tvar current_data = $this.grid.getData();\n\t\t\t\t\t\tresult_data = current_data.concat( result_data );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( $this.grid ) {\n\t\t\t\t\t\t$this.grid.setData( result_data );\n\n\t\t\t\t\t\t// if ( $this.sub_view_mode && Global.isSet( $this.resizeSubGrid ) ) {\n\t\t\t\t\t\t// \t$this.resizeSubGrid( len );\n\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t$this.reSelectLastSelectItems();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$this.result_details = null;\n\n\t\t\t\t$this.setGridCellBackGround(); //Set cell background for some views\n\n\t\t\t\tProgressBar.closeOverlay(); //Add this in initData\n\n\t\t\t\tif ( set_default_menu ) {\n\t\t\t\t\t$this.setDefaultMenu( true );\n\t\t\t\t}\n\n\t\t\t\tif ( LocalCacheData.paging_type === 0 ) {\n\t\t\t\t\tif ( !$this.pager_data || $this.pager_data.is_last_page ) {\n\t\t\t\t\t\t$this.paging_widget.css( 'display', 'none' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$this.paging_widget.css( 'display', 'block' );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( callBack ) {\n\t\t\t\t\tcallBack( result );\n\t\t\t\t}\n\n\t\t\t\t// when call this from save and new result, we don't call auto open, because this will call onAddClick twice\n\t\t\t\tif ( set_default_menu ) {\n\t\t\t\t\t$this.autoOpenEditViewIfNecessary();\n\t\t\t\t}\n\n\t\t\t\t$this.searchDone();\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_employee_accrual_modifier': { 'label': this.parent_view === 'employee' ? $.i18n._( 'Accrual' ) : $.i18n._( 'Employee Accrual Modifier' ) },\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIAccrualPolicyUserModifier,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_wage',\n\t\t\tshow_search_inputs: true,\n\t\t\tnavigation_mode: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_employee_accrual_modifier = this.edit_view_tab.find( '#tab_employee_accrual_modifier' );\n\n\t\tvar tab_employee_accrual_modifier_column1 = tab_employee_accrual_modifier.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_employee_accrual_modifier_column1 );\n\n\t\tvar form_item_input;\n\n\t\t//Employee\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'user_id'\n\n\t\t} );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employee' ), form_item_input, tab_employee_accrual_modifier_column1, '', null, true );\n\n\t\t// Accrual Policy\n\n\t\tvar default_args = {};\n\t\tdefault_args.filter_data = {};\n\t\tdefault_args.filter_data.type_id = [20, 30];\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIAccrualPolicy,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_accrual',\n\t\t\tshow_search_inputs: true,\n\t\t\tset_empty: true,\n\t\t\tfield: 'accrual_policy_id'\n\n\t\t} );\n\t\tform_item_input.setDefaultArgs( default_args );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Accrual Policy' ), form_item_input, tab_employee_accrual_modifier_column1, '' );\n\n\t\t// Length of Service Date\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\n\t\tform_item_input.TDatePicker( { field: 'length_of_service_date', width: 120 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Length of Service Date' ), form_item_input, tab_employee_accrual_modifier_column1, '', null );\n\n\t\t//Modifier Rates\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Modifier Rates' ) } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_employee_accrual_modifier_column1, '', null, true, false, 'separated_1' );\n\n\t\t// Length of Service Modifier\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'length_of_service_modifier', width: 40 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Length of Service' ), form_item_input, tab_employee_accrual_modifier_column1 );\n\n\t\t// Accrual Rate Modifier\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'accrual_rate_modifier', width: 40 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Accrual Rate' ), form_item_input, tab_employee_accrual_modifier_column1 );\n\n\t\t//Annual Accrual Maximum\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'annual_maximum_time_modifier', width: 40 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Annual Accrual Maximum' ), form_item_input, tab_employee_accrual_modifier_column1, '', null, true );\n\n\t\t// \"Accrual Maximum Balance Modifier\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'maximum_time_modifier', width: 40 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Accrual Maximum Balance' ), form_item_input, tab_employee_accrual_modifier_column1 );\n\n\t\t//Annual Maximum Rollover Modifier\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\tform_item_input.TTextInput( { field: 'rollover_time_modifier', width: 40 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Annual Maximum Rollover' ), form_item_input, tab_employee_accrual_modifier_column1 );\n\n\t\t//Modifier Rates\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.SEPARATED_BOX );\n\t\tform_item_input.SeparatedBox( { label: $.i18n._( 'Current Milestone' ) + ': ' } );\n\t\tthis.addEditFieldToColumn( null, form_item_input, tab_employee_accrual_modifier_column1, '', null, true, false, 'separated_2' );\n\n\t\t// Accrual Rate\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'accrual_rate' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Accrual Rate' ), form_item_input, tab_employee_accrual_modifier_column1, '', null, true );\n\n\t\t// \"Accrual Maximum Balance Time\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'maximum_time' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Accrual Maximum Balance Time' ), form_item_input, tab_employee_accrual_modifier_column1, '', null, true );\n\n\t\t// Accrual Maximum Rollover\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT );\n\t\tform_item_input.TText( { field: 'rollover_time' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Accrual Maximum Rollover' ), form_item_input, tab_employee_accrual_modifier_column1, '', null, true );\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\t//Set current edit record data to all widgets\n\t\tfor ( var key in this.current_edit_record ) {\n\n\t\t\tif ( !this.current_edit_record.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tif ( this.current_edit_record.type_id == 30 ) {\n\t\t\tthis.attachElement( 'annual_maximum_time_modifier' );\n\t\t} else {\n\t\t\tthis.detachElement( 'annual_maximum_time_modifier' );\n\t\t}\n\n\t\tthis.setAccrualPolicyDataFromUserModifier();\n\t\tthis.getAccrualPolicyDataFromUserModifier();\n\t\tthis.collectUIDataToCurrentEditRecord();\n\t\tthis.setEditViewDataDone();\n\t}\n\n\tonFormItemChange( target, doNotValidate ) {\n\t\tvar $this = this;\n\t\tthis.setIsChanged( target );\n\t\tthis.setMassEditingFieldsWhenFormChange( target );\n\t\tvar key = target.getField();\n\t\tvar c_value = target.getValue();\n\t\tswitch ( key ) {\n\t\t\tcase 'user_id':\n\t\t\t\tif ( this.is_add ) {\n\t\t\t\t\tthis.api['get' + this.api.key_name + 'DefaultData']( c_value, {\n\t\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( $this.sub_view_mode && $this.parent_key === 'accrual_policy_id' ) {\n\t\t\t\t\t\t\t\tresult_data[$this.parent_key] = $this.parent_value;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t$this.current_edit_record = result_data;\n\t\t\t\t\t\t\t$this.setCurrentEditRecordData();\n\t\t\t\t\t\t\t$this.validate();\n\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tthis.current_edit_record[key] = c_value;\n\t\t\t\t\tthis.validate();\n\t\t\t\t\tthis.getAccrualPolicyDataFromUserModifier();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault :\n\t\t\t\tthis.current_edit_record[key] = c_value;\n\t\t\t\tthis.validate();\n\t\t\t\tthis.getAccrualPolicyDataFromUserModifier();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tgetAccrualPolicyDataFromUserModifier() {\n\t\tvar $this = this;\n\n\t\tvar record = {};\n\n\t\tif ( this.is_mass_editing ) {\n\t\t\tfor ( var key in this.edit_view_ui_dic ) {\n\n\t\t\t\tif ( !this.edit_view_ui_dic.hasOwnProperty( key ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar widget = this.edit_view_ui_dic[key];\n\n\t\t\t\tif ( Global.isSet( widget.isChecked ) ) {\n\t\t\t\t\tif ( widget.isChecked() && widget.getEnabled() ) {\n\t\t\t\t\t\trecord[key] = widget.getValue();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\t\t\trecord = this.current_edit_record;\n\t\t}\n\n\t\trecord = this.uniformVariable( record );\n\t\tthis.api['getAccrualPolicyDataFromUserModifier']( record, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t$this.setAccrualPolicyDataFromUserModifier( result_data );\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetAccrualPolicyDataFromUserModifier( result_data ) {\n\t\tvar $this = this;\n\t\tif ( Global.isSet( result_data ) && !Global.isFalseOrNull( result_data ) ) {\n\n\t\t\tvar accrual_rate = 0;\n\t\t\tif ( result_data && result_data.accrual_policy_type_id && result_data.accrual_policy_type_id == 20 ) { //Calendar\n\t\t\t\taccrual_rate = Global.getTimeUnit( result_data.accrual_rate )\n\t\t\t} else { //Hourly\n\t\t\t\taccrual_rate = result_data.accrual_rate;\n\t\t\t}\n\n\t\t\tif ( !$this.edit_view_form_item_dic['separated_2'] ) {\n\t\t\t\t//Can trigger an error if this runs after the view has closed.\n\t\t\t\t//Uncaught TypeError: Cannot read properties of undefined (reading 'find')\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$this.edit_view_form_item_dic['separated_2'].find( '.label' ).text( $.i18n._( 'Current Milestone' ) + ': ' + result_data.milestone_number );\n\t\t\t$this.edit_view_ui_dic['accrual_rate'].setValue( accrual_rate );\n\t\t\t$this.edit_view_ui_dic['maximum_time'].setValue( Global.getTimeUnit( result_data.maximum_time ) );\n\t\t\t$this.edit_view_ui_dic['rollover_time'].setValue( Global.getTimeUnit( result_data.rollover_time ) );\n\n\t\t\t$this.attachElement( 'separated_2' );\n\t\t\t$this.attachElement( 'accrual_rate' );\n\t\t\t$this.attachElement( 'maximum_time' );\n\t\t\t$this.attachElement( 'rollover_time' );\n\n\t\t} else {\n\n\t\t\tif ( !$this.is_edit ) {\n\n\t\t\t\t$this.detachElement( 'separated_2' );\n\t\t\t\t$this.detachElement( 'accrual_rate' );\n\t\t\t\t$this.detachElement( 'maximum_time' );\n\t\t\t\t$this.detachElement( 'rollover_time' );\n\t\t\t}\n\n\t\t}\n\t}\n\n\tremoveEditView() {\n\t\tsuper.removeEditView();\n\n\t\tif ( this.parent_view === 'accrual_policy' ) {\n\n\t\t\tthis.context_menu_name = $.i18n._( 'Employee Settings' );\n\t\t\t$( '.ribbonTabLabel' ).find( 'a[ref=' + this.viewId + 'ContextMenu' + ']' ).text( $.i18n._( 'Employee Settings' ) );\n\t\t}\n\t}\n\n\tgetAPIFilters() {\n\t\tvar filter = super.getAPIFilters();\n\n\t\tif ( this.sub_view_mode && this.parent_key ) {\n\t\t\tfilter.filter_data[this.parent_key] = this.parent_value;\n\t\t}\n\n\t\treturn filter;\n\t}\n\n\tonMassEditClick() {\n\n\t\tvar $this = this;\n\t\t$this.is_add = false;\n\t\t$this.is_viewing = false;\n\t\t$this.is_mass_editing = true;\n\t\tLocalCacheData.current_doing_context_action = 'mass_edit';\n\t\t$this.openEditView();\n\t\tvar filter = {};\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\tthis.mass_edit_record_ids = [];\n\n\t\t$.each( grid_selected_id_array, function( index, value ) {\n\t\t\t$this.mass_edit_record_ids.push( value );\n\t\t} );\n\n\t\tfilter.filter_data = {};\n\t\tfilter.filter_data.id = this.mass_edit_record_ids;\n\n\t\tif ( this.sub_view_mode && this.parent_key ) {\n\t\t\tfilter.filter_data[this.parent_key] = this.parent_value;\n\t\t}\n\n\t\tthis.api['getCommon' + this.api.key_name + 'Data']( filter, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar result_data = result.getResult();\n\n\t\t\t\tif ( !result_data ) {\n\t\t\t\t\tresult_data = [];\n\t\t\t\t}\n\n\t\t\t\t$this.api['getOptions']( 'unique_columns', {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\t$this.unique_columns = result.getResult();\n\t\t\t\t\t\t$this.api['getOptions']( 'linked_columns', {\n\t\t\t\t\t\t\tonResult: function( result1 ) {\n\t\t\t\t\t\t\t\t$this.linked_columns = result1.getResult();\n\t\t\t\t\t\t\t\tif ( $this.sub_view_mode && $this.parent_key ) {\n\t\t\t\t\t\t\t\t\tresult_data[$this.parent_key] = $this.parent_value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$this.current_edit_record = result_data;\n\t\t\t\t\t\t\t\t$this.initEditView();\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tvalidate() {\n\t\tvar $this = this;\n\n\t\tvar record;\n\n\t\tif ( this.is_mass_editing ) {\n\n\t\t\trecord = [];\n\n\t\t\t$.each( this.mass_edit_record_ids, function( index, value ) {\n\n\t\t\t\tvar check_fields = {};\n\t\t\t\tif ( value < 0 ) {\n\t\t\t\t\tcheck_fields = $this.getRecordFromGridById( value );\n\t\t\t\t} else {\n\t\t\t\t\tcheck_fields.id = value;\n\t\t\t\t}\n\n\t\t\t\tfor ( var key in $this.edit_view_ui_dic ) {\n\n\t\t\t\t\tif ( !$this.edit_view_ui_dic.hasOwnProperty( key ) ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar widget = $this.edit_view_ui_dic[key];\n\n\t\t\t\t\tif ( Global.isSet( widget.isChecked ) ) {\n\t\t\t\t\t\tif ( widget.isChecked() && widget.getEnabled() ) {\n\t\t\t\t\t\t\tswitch ( key ) {\n\t\t\t\t\t\t\t\tcase 'user_id':\n//\t\t\t\t\t\t\t\t\tif ( value > 0 ) {\n//\t\t\t\t\t\t\t\t\t\tcheck_fields[key] = $this.current_edit_record[key];\n//\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tcheck_fields[key] = widget.getValue();\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar common_record = Global.clone( check_fields );\n\t\t\t\tcommon_record = $this.uniformVariable( common_record );\n\t\t\t\trecord.push( common_record );\n\n\t\t\t} );\n\n//\t\t\tfor ( var key in this.edit_view_ui_dic ) {\n//\n//\t\t\t\tif ( !this.edit_view_ui_dic.hasOwnProperty( key ) ) {\n//\t\t\t\t\tcontinue;\n//\t\t\t\t}\n//\n//\t\t\t\tvar widget = this.edit_view_ui_dic[key];\n//\n//\t\t\t\tif ( Global.isSet( widget.isChecked ) ) {\n//\t\t\t\t\tif ( widget.isChecked() && widget.getEnabled() ) {\n//\t\t\t\t\t\trecord[key] = widget.getValue();\n//\t\t\t\t\t}\n//\n//\t\t\t\t}\n//\t\t\t}\n\n\t\t} else {\n\t\t\trecord = this.current_edit_record;\n\t\t}\n\n\t\trecord = this.uniformVariable( record );\n\n\t\tthis.api['validate' + this.api.key_name]( record, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.validateResult( result );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tonSaveClick( ignoreWarning ) {\n\t\tvar $this = this;\n\t\tvar record;\n\t\tif ( !Global.isSet( ignoreWarning ) ) {\n\t\t\tignoreWarning = false;\n\t\t}\n\t\tLocalCacheData.current_doing_context_action = 'save';\n\t\tif ( this.is_mass_editing ) {\n\n\t\t\trecord = [];\n\n\t\t\t$.each( this.mass_edit_record_ids, function( index, value ) {\n\n\t\t\t\tvar check_fields = {};\n\t\t\t\tif ( value < 0 ) {\n\t\t\t\t\tcheck_fields = $this.getRecordFromGridById( value );\n\t\t\t\t} else {\n\t\t\t\t\tcheck_fields.id = value;\n\t\t\t\t}\n\n\t\t\t\tfor ( var key in $this.edit_view_ui_dic ) {\n\t\t\t\t\tvar widget = $this.edit_view_ui_dic[key];\n\n\t\t\t\t\tif ( Global.isSet( widget.isChecked ) ) {\n\t\t\t\t\t\tif ( widget.isChecked() ) {\n\t\t\t\t\t\t\tswitch ( key ) {\n\t\t\t\t\t\t\t\tcase 'user_id':\n//\t\t\t\t\t\t\t\t\tif ( value > 0 ) {\n//\t\t\t\t\t\t\t\t\t\tcheck_fields[key] = $this.current_edit_record[key];\n//\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tcheck_fields[key] = $this.current_edit_record[key];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar common_record = Global.clone( check_fields );\n\t\t\t\tcommon_record = $this.uniformVariable( common_record );\n\t\t\t\trecord.push( common_record );\n\n\t\t\t} );\n\n\t\t} else {\n\t\t\trecord = this.current_edit_record;\n\t\t\trecord = this.uniformVariable( record );\n\t\t}\n\n\t\tthis.api['set' + this.api.key_name]( record, false, ignoreWarning, {\n\t\t\tonResult: function( result ) {\n\n\t\t\t\t$this.onSaveResult( result );\n\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetDefaultMenuDeleteIcon( context_btn, grid_selected_length, pId ) {\n\t\tif ( ( !this.addPermissionValidate( pId ) && !this.editPermissionValidate( pId ) ) || this.edit_only_mode ) {\n\t\t\tContextMenuManager.hideMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false )\n\t\t}\n\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\tvar enabled = false;\n\n\t\tfor ( var i in grid_selected_id_array ) {\n\t\t\tif ( TTUUID.isUUID( grid_selected_id_array[i] ) ) {\n\t\t\t\tenabled = true;\n\t\t\t}\n\t\t}\n\n\t\tif ( !enabled ) {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\t}\n\n\tsearchDone() {\n\t\tsuper.searchDone();\n\t\tTTPromise.resolve( 'AccrualView', 'init' );\n\t}\n\n\tsetEditViewWidgetsMode() {\n\t\tvar did_clean_dic = {};\n\t\tfor ( var key in this.edit_view_ui_dic ) {\n\t\t\tif ( !this.edit_view_ui_dic.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\twidget.css( 'opacity', 1 );\n\t\t\tvar column = widget.parent().parent().parent();\n\t\t\tvar tab_id = column.parent().attr( 'id' );\n\t\t\tif ( !column.hasClass( 'v-box' ) ) {\n\t\t\t\tif ( !did_clean_dic[tab_id] ) {\n\t\t\t\t\tdid_clean_dic[tab_id] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( this.is_viewing || ( this.parent_view === 'employee' && ( key === 'accrual_policy_id' || key === 'user_id' ) ) ) {\n\t\t\t\tif ( Global.isSet( widget.setEnabled ) ) {\n\t\t\t\t\twidget.setEnabled( false );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( Global.isSet( widget.setEnabled ) ) {\n\t\t\t\t\twidget.setEnabled( true );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nAccrualPolicyUserModifierViewController.loadSubView = function( container, beforeViewLoadedFun, afterViewLoadedFun ) {\n\n\tGlobal.loadViewSource( 'AccrualPolicyUserModifier', 'SubAccrualPolicyUserModifierView.html', function( result ) {\n\t\tvar args = {};\n\t\tif ( Global.isSet( beforeViewLoadedFun ) ) {\n\t\t\tvar template_data = beforeViewLoadedFun( result );\n\t\t\tvar template = template_data.template;\n\t\t\targs = template_data.args;\n\t\t}\n\n\t\tif ( Global.isSet( container ) ) {\n\t\t\tcontainer.html( template( args ) );\n\n\t\t\tif ( Global.isSet( afterViewLoadedFun ) ) {\n\t\t\t\tafterViewLoadedFun( sub_accrual_policy_user_modifier_view_controller );\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n};"],"names":["AccrualPolicyUserModifierViewController","options","_","$","context_menu_model","filter","$this","user_id","result","column_start_from","grid","column_info_array","column_info","layout_data","display_columns","layouts_array","grid_setup","e","rowId","id_array","column_filter","len","i","api_args","_callback","record_id","result_data","set_default_menu","page_action","page_number","callBack","n","grid_source_data","found","new_record","new_grid_source_data","record","current_data","tab_model","tab_employee_accrual_modifier","tab_employee_accrual_modifier_column1","form_item_input","default_args","key","widget","target","doNotValidate","c_value","accrual_rate","grid_selected_id_array","index","value","result1","check_fields","common_record","ignoreWarning","context_btn","grid_selected_length","pId","enabled","did_clean_dic","column","tab_id","container","beforeViewLoadedFun","afterViewLoadedFun","args","template_data","template"],"mappings":"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"}