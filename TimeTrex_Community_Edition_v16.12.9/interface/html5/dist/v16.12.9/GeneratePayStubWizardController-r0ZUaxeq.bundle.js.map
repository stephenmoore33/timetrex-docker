{"version":3,"file":"GeneratePayStubWizardController-r0ZUaxeq.bundle.js","sources":["../../views/wizard/generate_pay_stub/GeneratePayStubWizardController.js"],"sourcesContent":["export class GeneratePayStubWizardController extends BaseWizardController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '.wizard-bg'\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\n\t\tthis.title = $.i18n._( 'Generate Pay Stub Wizard' );\n\t\tthis.steps = 3;\n\t\tthis.current_step = 1;\n\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tsuper.render();\n\n\t\tthis.initCurrentStep();\n\t}\n\n\tbuildCurrentStepUI() {\n\t\tvar $this = this;\n\t\tthis.content_div.empty();\n\n\t\tthis.stepsWidgetDic[this.current_step] = {};\n\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tvar label = this.getLabel();\n\t\t\t\tlabel.text( $.i18n._( 'Generate pay stubs for individual employees when manual modifications or a termination occurs. Use Payroll -> Process Payroll if you wish to generate pay stubs for all employees instead.' ) );\n\n\t\t\t\tthis.content_div.append( label );\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\n\t\t\t\tlabel = this.getLabel();\n\t\t\t\tlabel.text( $.i18n._( 'Select one or more pay periods and choose a payroll run type' ) );\n\t\t\t\tthis.content_div.append( label );\n\t\t\t\t// Pay period\n\t\t\t\tvar form_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\tvar form_item_label = form_item.find( '.form-item-label' );\n\t\t\t\tvar form_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\tvar a_combobox = this.getAComboBox( TTAPI.APIPayPeriod, true, 'global_Pay_period', 'pay_period_id' );\n\t\t\t\ta_combobox.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t$this.saveCurrentStep();\n\t\t\t\t\t$this.onPayPeriodChange( true );\n\t\t\t\t\t$this.setPayRun( target.getValue() );\n\t\t\t\t} );\n\t\t\t\tform_item_label.text( $.i18n._( 'Pay Period' ) );\n\t\t\t\tform_item_input_div.append( a_combobox );\n\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][a_combobox.getField()] = a_combobox;\n\n\t\t\t\t// Payroll Run Type\n\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\tvar combobox = this.getComboBox( 'type_id', false );\n\t\t\t\tform_item_label.text( $.i18n._( 'Payroll Run Type' ) );\n\t\t\t\tform_item_input_div.append( combobox );\n\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][combobox.getField()] = combobox;\n\n\t\t\t\tcombobox.unbind( 'formItemChange' ).bind( 'formItemChange', function( e, target ) {\n\t\t\t\t\t$this.saveCurrentStep();\n\t\t\t\t\t$this.onPayrollTypeChange( true );\n\t\t\t\t} );\n\n\t\t\t\t//Carry Forward to Date\n\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\tvar date_picker = this.getDatePicker( 'carry_forward_to_date' );\n\t\t\t\tform_item_label.text( $.i18n._( 'Carry Forward Adjustments to' ) );\n\t\t\t\tform_item_input_div.append( date_picker );\n\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][date_picker.getField()] = date_picker;\n\t\t\t\tthis.stepsWidgetDic[this.current_step][date_picker.getField() + '_row'] = form_item;\n\n\t\t\t\tform_item.hide();\n\n\t\t\t\t//Transaction Date\n\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\tdate_picker = this.getDatePicker( 'transaction_date' );\n\t\t\t\tform_item_label.text( $.i18n._( 'Transaction Date' ) );\n\t\t\t\tform_item_input_div.append( date_picker );\n\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][date_picker.getField()] = date_picker;\n\t\t\t\tthis.stepsWidgetDic[this.current_step][date_picker.getField() + '_row'] = form_item;\n\n\t\t\t\tform_item.hide();\n\n\t\t\t\t//Payroll Run #\n\t\t\t\tform_item = $( Global.loadWidget( 'global/widgets/wizard_form_item/WizardFormItem.html' ) );\n\t\t\t\tform_item_label = form_item.find( '.form-item-label' );\n\t\t\t\tform_item_input_div = form_item.find( '.form-item-input-div' );\n\t\t\t\tvar textInput = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\t\t\t\ttextInput = textInput.TTextInput( {\n\t\t\t\t\tfield: 'run_id',\n\t\t\t\t\twidth: 20\n\t\t\t\t} );\n\t\t\t\tform_item_label.text( $.i18n._( 'Payroll Run' ) );\n\t\t\t\tform_item_input_div.append( textInput );\n\t\t\t\tthis.content_div.append( form_item );\n\t\t\t\tthis.stepsWidgetDic[this.current_step][textInput.getField()] = textInput;\n\t\t\t\tthis.stepsWidgetDic[this.current_step][textInput.getField() + '_row'] = form_item;\n\n\t\t\t\tform_item.hide();\n\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tlabel = this.getLabel();\n\t\t\t\tlabel.text( $.i18n._( 'Select one or more employees' ) );\n\n\t\t\t\ta_combobox = this.getAComboBox( TTAPI.APIUser, true, 'global_user', 'user_id', true );\n\t\t\t\tvar div = $( '<div class=\\'wizard-acombobox-div\\'></div>' );\n\t\t\t\tdiv.append( a_combobox );\n\n\t\t\t\tthis.stepsWidgetDic[this.current_step] = {};\n\t\t\t\tthis.stepsWidgetDic[this.current_step][a_combobox.getField()] = a_combobox;\n\n\t\t\t\tthis.content_div.append( label );\n\t\t\t\tthis.content_div.append( div );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetPayRun( pay_period_id ) {\n\t\tvar api = TTAPI.APIPayStub;\n\t\tvar step_2_ui = this.stepsWidgetDic[2];\n\t\tapi.getCurrentPayRun( pay_period_id, {\n\t\t\tonResult: function( result ) {\n\t\t\t\tvar data = result.getResult();\n\t\t\t\tstep_2_ui.run_id.setValue( data );\n\t\t\t}\n\t\t} );\n\t}\n\n\tbuildCurrentStepData() {\n\t\tvar $this = this;\n\n\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\n\t\tif ( current_step_data && current_step_ui ) {\n\t\t\tswitch ( this.current_step ) {\n\t\t\t\tcase 2:\n\t\t\t\t\tif ( current_step_data.pay_period_id ) {\n\t\t\t\t\t\tvar pay_period_ids = current_step_data.pay_period_id;\n\t\t\t\t\t\tpay_period_ids = Global.array_unique( pay_period_ids );\n\n\t\t\t\t\t\tif ( current_step_data ) {\n\t\t\t\t\t\t\tcurrent_step_ui.pay_period_id.setValue( pay_period_ids );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$this.setPayRun( pay_period_ids );\n\t\t\t\t\t}\n\t\t\t\t\tthis.onPayPeriodChange();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tif ( current_step_data.user_id ) {\n\t\t\t\t\t\tvar user_ids = current_step_data.user_id;\n\t\t\t\t\t\tuser_ids = Global.array_unique( user_ids );\n\t\t\t\t\t\tcurrent_step_ui.user_id.setValue( user_ids );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tonDoneClick() {\n\t\tvar $this = this;\n\t\tsuper.onDoneClick();\n\t\tthis.saveCurrentStep();\n\n\t\t// Function called stacks: TypeError: Cannot read property 'pay_period_id' of undefined\n\t\tif ( !this.stepsDataDic || !this.stepsDataDic[2] || !this.stepsDataDic[3] ) {\n\t\t\tTAlertManager.showAlert( $.i18n._( 'Wizard data is not correct on step 2 or step 3, please open wizard and try again' ) );\n\t\t\t$this.onCloseClick();\n\t\t}\n\n\t\tvar api = TTAPI.APIPayStub;\n\t\tvar pay_period_ids = this.stepsDataDic[2].pay_period_id;\n\t\tvar user_ids = this.stepsDataDic[3].user_id;\n\t\tvar type_id = this.stepsDataDic[2].type_id;\n\t\tvar run_id = this.stepsDataDic[2].run_id;\n\t\tvar transaction_date = null;\n\t\tvar cal_pay_stub_amendment = false;\n\t\tif ( type_id == 5 ) {\n\t\t\ttransaction_date = this.stepsDataDic[2].carry_forward_to_date;\n\t\t\tcal_pay_stub_amendment = true;\n\t\t} else {\n\t\t\ttransaction_date = this.stepsDataDic[2].transaction_date;\n\t\t}\n\n\t\tapi.setIsIdempotent( true ); //Force to idempotent API call to avoid duplicate network requests from causing errors displayed to the user.\n\t\tapi.generatePayStubs( pay_period_ids, user_ids, cal_pay_stub_amendment, run_id, type_id, transaction_date, { onResult: onDoneResult } );\n\n\t\tfunction onDoneResult( result ) {\n\t\t\tif ( result && result.isValid() ) {\n\t\t\t\tvar user_generic_status_batch_id = result.getAttributeInAPIDetails( 'user_generic_status_batch_id' );\n\n\t\t\t\tif ( user_generic_status_batch_id && TTUUID.isUUID( user_generic_status_batch_id ) && user_generic_status_batch_id != TTUUID.zero_id && user_generic_status_batch_id != TTUUID.not_exist_id ) {\n\t\t\t\t\tUserGenericStatusWindowController.open( user_generic_status_batch_id, user_ids, function() {\n\t\t\t\t\t\tif ( cal_pay_stub_amendment ) {\n\t\t\t\t\t\t\tvar filter = { filter_data: {} };\n\t\t\t\t\t\t\tvar users = { value: user_ids };\n\t\t\t\t\t\t\tfilter.filter_data.user_id = users;\n\t\t\t\t\t\t\tfilter.filter_data.status_id = 50; //active\n\t\t\t\t\t\t\tIndexViewController.goToView( 'PayStubAmendment', filter );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$this.onCloseClick();\n\n\t\t\tif ( $this.call_back ) {\n\t\t\t\t$this.call_back();\n\t\t\t}\n\t\t}\n\n\t\t$this.onCloseClick();\n\t}\n\n\tonPayrollTypeChange( refresh ) {\n\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\t//Error: Uncaught TypeError: Cannot read property 'hide' of undefined in /interface/html5/index.php#!m=PayStub line 221\n\t\tif ( !current_step_ui ||\n\t\t\t!current_step_ui['run_id_row'] ||\n\t\t\t!current_step_ui['carry_forward_to_date_row'] ||\n\t\t\t!current_step_ui['transaction_date_row'] ) {\n\t\t\treturn;\n\t\t}\n\t\tcurrent_step_ui['run_id_row'].hide();\n\t\tcurrent_step_ui['carry_forward_to_date_row'].hide();\n\t\tcurrent_step_ui['transaction_date_row'].hide();\n\t\tvar newest_pay_period = this.getNewestPayPeriod( this.selected_pay_periods );\n\t\tif ( current_step_data.type_id == 20 ) {\n\t\t\tcurrent_step_ui['run_id_row'].show();\n\t\t}\n\n\t\tif ( current_step_data.type_id != 5 ) {\n\t\t\tcurrent_step_ui['transaction_date_row'].show();\n\t\t\tif ( !refresh ) {\n\t\t\t\tif ( current_step_data.transaction_date ) {\n\t\t\t\t\tcurrent_step_ui['transaction_date'].setValue( Global.strToDateTime( current_step_data.transaction_date ).format() );\n\t\t\t\t} else {\n\t\t\t\t\tcurrent_step_ui['transaction_date'].setValue( newest_pay_period ? Global.strToDateTime( newest_pay_period.transaction_date ).format() : null );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcurrent_step_ui['transaction_date'].setValue( newest_pay_period ? Global.strToDateTime( newest_pay_period.transaction_date ).format() : null );\n\t\t\t}\n\t\t}\n\n\t\tif ( current_step_data.type_id == 5 ) {\n\t\t\tcurrent_step_ui['carry_forward_to_date_row'].show();\n\t\t\tif ( !refresh ) {\n\t\t\t\tcurrent_step_ui['carry_forward_to_date'].setValue( current_step_data.carry_forward_to_date || new Date().format() );\n\t\t\t} else {\n\t\t\t\tcurrent_step_ui['carry_forward_to_date'].setValue( new Date().format() );\n\t\t\t}\n\t\t}\n\t}\n\n\tbuildPayPeriodStatusIdArray( pay_periods ) {\n\t\tvar result = [];\n\t\tfor ( var i = 0; i < pay_periods.length; i++ ) {\n\t\t\tvar item = pay_periods[i];\n\t\t\tresult.push( item.status_id );\n\t\t}\n\t\treturn result;\n\t}\n\n\tgetNewestPayPeriod( pay_periods ) {\n\t\tvar result;\n\t\tfor ( var i = 0; i < pay_periods.length; i++ ) {\n\t\t\tvar item = pay_periods[i];\n\t\t\tvar date = Global.strToDateTime( item.transaction_date ).getTime();\n\t\t\tif ( !result || date > result ) {\n\t\t\t\tresult = item;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tonPayPeriodChange( refresh ) {\n\t\tvar $this = this;\n\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\tvar api = TTAPI.APIPayStub;\n\t\tvar api_pay_period = TTAPI.APIPayPeriod;\n\t\tvar args = {};\n\t\targs.filter_data = {};\n\t\targs.filter_data.id = current_step_data.pay_period_id;\n\t\tif ( !current_step_data.pay_period_id || current_step_data.pay_period_id.length === 0 ) {\n\t\t\targs.filter_data.id = [0];\n\t\t}\n\t\tapi_pay_period.getPayPeriod( args, {\n\t\t\tonResult: function( result ) {\n\t\t\t\t$this.selected_pay_periods = result.getResult();\n\t\t\t\tvar status_id_array = $this.buildPayPeriodStatusIdArray( $this.selected_pay_periods );\n\t\t\t\tapi.getOptions( 'payroll_run_type', status_id_array, {\n\t\t\t\t\tonResult: function( result ) {\n\t\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\t\tvar type_array = Global.buildRecordArray( result_data );\n\t\t\t\t\t\tcurrent_step_ui['type_id'].setSourceData( type_array );\n\t\t\t\t\t\tif ( !refresh ) {\n\t\t\t\t\t\t\tif ( !current_step_data.type_id ) {\n\t\t\t\t\t\t\t\tcurrent_step_data.type_id = type_array && type_array[0].value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcurrent_step_ui['type_id'].setValue( current_step_data.type_id );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcurrent_step_data.type_id = type_array && type_array[0].value;\n\t\t\t\t\t\t\tcurrent_step_ui['type_id'].setValue( current_step_data.type_id );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$this.onPayrollTypeChange( refresh );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\n\tsaveCurrentStep() {\n\t\tthis.stepsDataDic[this.current_step] = {};\n\t\tvar current_step_data = this.stepsDataDic[this.current_step];\n\t\tvar current_step_ui = this.stepsWidgetDic[this.current_step];\n\t\tswitch ( this.current_step ) {\n\t\t\tcase 1:\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tcurrent_step_data.pay_period_id = current_step_ui.pay_period_id.getValue();\n\t\t\t\tcurrent_step_data.transaction_date = current_step_ui.transaction_date.getValue();\n\t\t\t\tcurrent_step_data.carry_forward_to_date = current_step_ui.carry_forward_to_date.getValue();\n\t\t\t\tcurrent_step_data.type_id = current_step_ui.type_id.getValue();\n\t\t\t\tcurrent_step_data.run_id = current_step_ui.run_id.getValue();\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tcurrent_step_data.user_id = current_step_ui.user_id.getValue();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetDefaultDataToSteps() {\n\n\t\tif ( !this.default_data ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.stepsDataDic[2] = {};\n\t\tthis.stepsDataDic[3] = {};\n\n\t\tif ( this.getDefaultData( 'user_id' ) ) {\n\t\t\tthis.stepsDataDic[3].user_id = this.getDefaultData( 'user_id' );\n\t\t}\n\n\t\tif ( this.getDefaultData( 'pay_period_id' ) ) {\n\t\t\tthis.stepsDataDic[2].pay_period_id = this.getDefaultData( 'pay_period_id' );\n\t\t}\n\t}\n\n}\n"],"names":["GeneratePayStubWizardController","options","_","$","$this","label","form_item","form_item_label","form_item_input_div","a_combobox","e","target","combobox","date_picker","textInput","div","pay_period_id","api","step_2_ui","result","data","current_step_data","current_step_ui","pay_period_ids","user_ids","type_id","run_id","transaction_date","cal_pay_stub_amendment","onDoneResult","user_generic_status_batch_id","filter","users","refresh","newest_pay_period","pay_periods","i","item","date","api_pay_period","args","status_id_array","result_data","type_array"],"mappings":"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"}