import{_ as n,j as t}from"./vendor-tTApdY0Y.bundle.js";class s extends BaseViewController{constructor(i={}){n.defaults(i,{el:"#expense_policy_view_container",type_array:null,require_receipt_array:null}),super(i)}init(i){this.edit_view_tpl="ExpensePolicyEditView.html",this.permission_id="expense_policy",this.viewId="ExpensePolicy",this.script_name="ExpensePolicyView",this.table_name_key="expense_policy",this.context_menu_name=t.i18n._("Expense Policy"),this.navigation_label=t.i18n._("Expense Policy"),this.api=TTAPI.APIExpensePolicy,this.render(),this.buildContextMenu(),this.initData()}initOptions(){this.initDropDownOption("type"),this.initDropDownOption("require_receipt")}buildEditViewUI(){super.buildEditViewUI();var i=this,l={tab_expense_policy:{label:t.i18n._("Expense Policy")},tab_audit:!0};this.setTabModel(l),this.navigation.AComboBox({api_class:TTAPI.APIExpensePolicy,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_expense_policy",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var _=this.edit_view_tab.find("#tab_expense_policy"),a=_.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(a);var e=Global.loadWidgetByName(FormItemType.TEXT_INPUT);e.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn(t.i18n._("Name"),e,a,"first"),e.parent().width("45%"),e=Global.loadWidgetByName(FormItemType.TEXT_AREA),e.TTextArea({field:"description",width:"100%"}),this.addEditFieldToColumn(t.i18n._("Description"),e,a,"",null,null,!0),e.parent().width("45%"),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"type_id",set_empty:!1}),e.setSourceData(i.type_array),this.addEditFieldToColumn(t.i18n._("Type"),e,a),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"unit_name",width:200}),this.addEditFieldToColumn(t.i18n._("Unit Name"),e,a,"",null,!0),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"amount",width:100}),this.addEditFieldToColumn(t.i18n._("Percent"),e,a,"",null,!0),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"min_amount",width:100}),this.addEditFieldToColumn(t.i18n._("Minimum Amount"),e,a),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"max_amount",width:100}),this.addEditFieldToColumn(t.i18n._("Maximum Amount"),e,a);var o={};o.filter_data={},o.filter_data.type_id=[40,50],e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIExpensePolicy,allow_multiple_selection:!0,layout_name:"global_expense_policy",set_empty:!0,show_search_inputs:!0,field:"expense_policy"}),e.setDefaultArgs(o),this.addEditFieldToColumn(t.i18n._("Taxes"),e,a),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"require_receipt_id",set_empty:!1}),e.setSourceData(i.require_receipt_array),this.addEditFieldToColumn(t.i18n._("Require Receipt"),e,a),e=Global.loadWidgetByName(FormItemType.CHECKBOX),e.TCheckbox({field:"is_reimbursable"}),this.addEditFieldToColumn(t.i18n._("Reimbursable"),e,a),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIPayStubEntryAccount,allow_multiple_selection:!1,layout_name:"global_PayStubAccount",set_empty:!0,show_search_inputs:!0,field:"pay_stub_entry_account_id"}),this.addEditFieldToColumn(t.i18n._("Pay Stub Account"),e,a,"",null,!0),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIProduct,allow_multiple_selection:!1,layout_name:"global_product",set_empty:!0,show_search_inputs:!0,field:"product_id"}),this.addEditFieldToColumn(t.i18n._("Product"),e,a)}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:t.i18n._("Name"),in_column:1,field:"name",basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:t.i18n._("Type"),in_column:1,field:"type_id",multiple:!0,basic_search:!0,adv_search:!1,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Require Receipt"),in_column:1,field:"require_receipt_id",multiple:!0,basic_search:!0,adv_search:!1,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Product"),in_column:2,field:"product_id",layout_name:"global_product",api_class:TTAPI.APIProduct,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX})]}onFormItemChange(i,l){this.setIsChanged(i),this.setMassEditingFieldsWhenFormChange(i);var _=i.getField();this.current_edit_record[_]=i.getValue(),(_==="type_id"||_==="is_reimbursable")&&this.onTypeChange(),l||this.validate()}setCurrentEditRecordData(){this.setDefaultData({type_id:10});for(var i in this.current_edit_record)if(this.current_edit_record.hasOwnProperty(i)){var l=this.edit_view_ui_dic[i];if(Global.isSet(l))switch(i){case"pay_stub_entry_account_id":l.setValue(this.current_edit_record[i]);break;default:l.setValue(this.current_edit_record[i]);break}}this.onTypeChange(),this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}onTypeChange(){this.current_edit_record.type_id==10?(this.detachElement("amount"),this.detachElement("unit_name")):this.current_edit_record.type_id==20||this.current_edit_record.type_id==40?(this.edit_view_form_item_dic.amount.find(".edit-view-form-item-label").text(t.i18n._("Percent")),this.attachElement("amount"),this.detachElement("unit_name")):this.current_edit_record.type_id==30?(this.edit_view_form_item_dic.amount.find(".edit-view-form-item-label").text(t.i18n._("Amount/Unit")),this.attachElement("amount"),this.attachElement("unit_name")):this.current_edit_record.type_id==50?(this.edit_view_form_item_dic.amount.find(".edit-view-form-item-label").text(t.i18n._("Amount")),this.detachElement("unit_name")):(this.detachElement("amount"),this.detachElement("unit_name")),this.edit_view_ui_dic.is_reimbursable.getValue()==!0?this.attachElement("pay_stub_entry_account_id"):this.detachElement("pay_stub_entry_account_id"),this.editFieldResize()}}export{s as ExpensePolicyViewController};
//# sourceMappingURL=ExpensePolicyViewController-B14fHmQ8.bundle.js.map
