import{_ as o,j as a}from"./vendor-tTApdY0Y.bundle.js";class r extends BaseViewController{constructor(e={}){o.defaults(e,{el:"#job_applicant_license_view_container",qualification_array:null,qualification_api:null,sub_view_grid_autosize:!0}),super(e)}init(e){this.edit_view_tpl="JobApplicantLicenseEditView.html",this.permission_id="job_applicant",this.viewId="JobApplicantLicense",this.script_name="JobApplicantLicenseView",this.table_name_key="job_applicant_license",this.context_menu_name=a.i18n._("Licenses"),this.navigation_label=a.i18n._("License"),this.api=TTAPI.APIJobApplicantLicense,this.render(),this.sub_view_mode||this.initData()}showNoResultCover(e){super.showNoResultCover(!!this.sub_view_mode)}onGridSelectRow(){this.sub_view_mode?(this.buildContextMenu(!0),this.cancelOtherSubViewSelectedStatus()):this.buildContextMenu(),this.setDefaultMenu()}onGridSelectAll(){this.sub_view_mode&&(this.buildContextMenu(!0),this.cancelOtherSubViewSelectedStatus()),this.setDefaultMenu()}cancelOtherSubViewSelectedStatus(){switch(!0){case typeof this.parent_view_controller.sub_job_applicant_education_view_controller<"u":this.parent_view_controller.sub_job_applicant_education_view_controller.unSelectAll();case typeof this.parent_view_controller.sub_job_applicant_language_view_controller<"u":this.parent_view_controller.sub_job_applicant_language_view_controller.unSelectAll();case typeof this.parent_view_controller.sub_job_applicant_skill_view_controller<"u":this.parent_view_controller.sub_job_applicant_skill_view_controller.unSelectAll();case typeof this.parent_view_controller.sub_job_applicant_membership_view_controller<"u":this.parent_view_controller.sub_job_applicant_membership_view_controller.unSelectAll();break}}onMassEditClick(){var e=this;e.is_add=!1,e.is_viewing=!1,e.is_mass_editing=!0,LocalCacheData.current_doing_context_action="mass_edit",e.openEditView();var n={},t=this.getGridSelectIdArray();t.length,this.mass_edit_record_ids=[],a.each(t,function(i,l){e.mass_edit_record_ids.push(l)}),n.filter_data={},n.filter_data.id=this.mass_edit_record_ids,this.api["getCommon"+this.api.key_name+"Data"](n,{onResult:function(i){var l=i.getResult();e.unique_columns={},e.linked_columns={},l||(l=[]),e.sub_view_mode&&e.parent_key&&(l[e.parent_key]=e.parent_value),e.current_edit_record=l,e.initEditView()}})}onAddClick(){this.sub_view_mode&&this.buildContextMenu(!0),super.onAddClick()}buildEditViewUI(){super.buildEditViewUI();var e={tab_license:{label:a.i18n._("License")},tab_audit:!0};this.setTabModel(e),this.navigation.AComboBox({api_class:TTAPI.APIJobApplicantLicense,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_job_applicant_license",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var n=this.edit_view_tab.find("#tab_license"),t=n.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(t);var i,l={},_={};_.type_id=[30],_.visibility_type_id=[20,100],l.filter_data=_,i=Global.loadWidgetByName(FormItemType.AWESOME_BOX),i.AComboBox({api_class:TTAPI.APIQualification,allow_multiple_selection:!1,layout_name:"global_qualification",show_search_inputs:!0,set_empty:!0,field:"qualification_id"}),i.setDefaultArgs(l),this.addEditFieldToColumn(a.i18n._("Type"),i,t),i=Global.loadWidgetByName(FormItemType.TEXT_INPUT),i.TTextInput({field:"license_number",width:200}),this.addEditFieldToColumn(a.i18n._("Number"),i,t),i=Global.loadWidgetByName(FormItemType.DATE_PICKER),i.TDatePicker({field:"license_issued_date"}),this.addEditFieldToColumn(a.i18n._("Issued Date"),i,t),i=Global.loadWidgetByName(FormItemType.DATE_PICKER),i.TDatePicker({field:"license_expiry_date"}),this.addEditFieldToColumn(a.i18n._("Expiry Date"),i,t),i=Global.loadWidgetByName(FormItemType.TAG_INPUT),i.TTagInput({field:"tag",object_type_id:394}),this.addEditFieldToColumn(a.i18n._("Tags"),i,t,"",null,null,!0)}searchDone(){super.searchDone(),TTPromise.resolve("JobApplicant_Qualifications_Tab","JobApplicantLicenseViewController")}}r.loadSubView=function(s,e,n){Global.loadViewSource("JobApplicantLicense","SubJobApplicantLicenseView.html",function(t){var i={},l=o.template(t);Global.isSet(e)&&e(),Global.isSet(s)&&(s.html(l(i)),Global.isSet(n)&&n(sub_job_applicant_license_view_controller))})};export{r as JobApplicantLicenseViewController};
//# sourceMappingURL=JobApplicantLicenseViewController-_Bz0RK0a.bundle.js.map
