import{C as fW}from"./vendor-tTApdY0Y.bundle.js";var jL={exports:{}};(function(ib){(function(){var Du=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},Mu=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},ud=function(e,t){var o=Array.prototype.slice.call(e);return o.sort(t)},yc=function(e,t){return Co(function(o,s){return e.eq(t(o),t(s))})},Co=function(e){return{eq:e}},Pr=Co(function(e,t){return e===t}),sg=Pr,Qa=function(e){return Co(function(t,o){if(t.length!==o.length)return!1;for(var s=t.length,a=0;a<s;a++)if(!e.eq(t[a],o[a]))return!1;return!0})},md=function(e,t){return yc(Qa(e),function(o){return ud(o,t)})},Kr=function(e){return Co(function(t,o){var s=Object.keys(t),a=Object.keys(o);if(!md(sg).eq(s,a))return!1;for(var c=s.length,d=0;d<c;d++){var g=s[d];if(!e.eq(t[g],o[g]))return!1}return!0})},mr=Co(function(e,t){if(e===t)return!0;var o=Du(e),s=Du(t);return o!==s?!1:Mu(o)?e===t:o==="array"?Qa(mr).eq(e,t):o==="object"?Kr(mr).eq(e,t):!1});const Pl=Object.getPrototypeOf,_t=(e,t,o)=>{var s;return o(e,t.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},Ft=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&_t(e,String,(o,s)=>s.isPrototypeOf(o))?"string":t},jo=e=>t=>Ft(t)===e,wc=e=>t=>typeof t===e,Xe=e=>t=>e===t,eo=(e,t)=>ue(e)&&_t(e,t,(o,s)=>Pl(o)===s),bt=jo("string"),ue=jo("object"),kt=e=>eo(e,Object),ce=jo("array"),Rn=Xe(null),yi=wc("boolean"),Bs=Xe(void 0),_o=e=>e==null,Ne=e=>!_o(e),Pt=wc("function"),E=wc("number"),ao=(e,t)=>{if(ce(e)){for(let o=0,s=e.length;o<s;++o)if(!t(e[o]))return!1;return!0}return!1},oo=()=>{},Uo=(e,t)=>(...o)=>e(t.apply(null,o)),Pa=(e,t)=>o=>e(t(o)),Je=e=>()=>e,bo=e=>e,Yr=(e,t)=>e===t;function it(e,...t){return(...o)=>{const s=t.concat(o);return e.apply(null,s)}}const hs=e=>t=>!e(t),Ke=e=>()=>{throw new Error(e)},xt=e=>e(),Cc=e=>{e()},Jt=Je(!1),kn=Je(!0);class I{constructor(t,o){this.tag=t,this.value=o}static some(t){return new I(!0,t)}static none(){return I.singletonNone}fold(t,o){return this.tag?o(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?I.some(t(this.value)):I.none()}bind(t){return this.tag?t(this.value):I.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:I.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return Ne(t)?I.some(t):I.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}I.singletonNone=new I(!1);const qo=Array.prototype.slice,dl=Array.prototype.indexOf,hn=Array.prototype.push,qn=(e,t)=>dl.call(e,t),_c=(e,t)=>{const o=qn(e,t);return o===-1?I.none():I.some(o)},Io=(e,t)=>qn(e,t)>-1,bn=(e,t)=>{for(let o=0,s=e.length;o<s;o++){const a=e[o];if(t(a,o))return!0}return!1},no=(e,t)=>{const o=e.length,s=new Array(o);for(let a=0;a<o;a++){const c=e[a];s[a]=t(c,a)}return s},Ie=(e,t)=>{for(let o=0,s=e.length;o<s;o++){const a=e[o];t(a,o)}},Fm=(e,t)=>{for(let o=e.length-1;o>=0;o--){const s=e[o];t(s,o)}},ul=(e,t)=>{const o=[],s=[];for(let a=0,c=e.length;a<c;a++){const d=e[a];(t(d,a)?o:s).push(d)}return{pass:o,fail:s}},Et=(e,t)=>{const o=[];for(let s=0,a=e.length;s<a;s++){const c=e[s];t(c,s)&&o.push(c)}return o},xn=(e,t,o)=>(Fm(e,(s,a)=>{o=t(o,s,a)}),o),Ir=(e,t,o)=>(Ie(e,(s,a)=>{o=t(o,s,a)}),o),_r=(e,t,o)=>{for(let s=0,a=e.length;s<a;s++){const c=e[s];if(t(c,s))return I.some(c);if(o(c,s))break}return I.none()},Ao=(e,t)=>_r(e,t,Jt),fd=(e,t)=>{for(let o=0,s=e.length;o<s;o++){const a=e[o];if(t(a,o))return I.some(o)}return I.none()},In=e=>{const t=[];for(let o=0,s=e.length;o<s;++o){if(!ce(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);hn.apply(t,e[o])}return t},Ho=(e,t)=>In(no(e,t)),ei=(e,t)=>{for(let o=0,s=e.length;o<s;++o){const a=e[o];if(t(a,o)!==!0)return!1}return!0},Il=e=>{const t=qo.call(e,0);return t.reverse(),t},fr=(e,t)=>Et(e,o=>!Io(t,o)),Ll=(e,t)=>{const o={};for(let s=0,a=e.length;s<a;s++){const c=e[s];o[String(c)]=t(c,s)}return o},Dn=(e,t)=>{const o=qo.call(e,0);return o.sort(t),o},qi=(e,t)=>t>=0&&t<e.length?I.some(e[t]):I.none(),Ln=e=>qi(e,0),mt=e=>qi(e,e.length-1),Dt=Pt(Array.from)?Array.from:e=>qo.call(e),Zs=(e,t)=>{for(let o=0;o<e.length;o++){const s=t(e[o],o);if(s.isSome())return s}return I.none()},Lr=(e,t)=>{const o=[],s=Pt(t)?a=>bn(o,c=>t(c,a)):a=>Io(o,a);for(let a=0,c=e.length;a<c;a++){const d=e[a];s(d)||o.push(d)}return o},ze=Object.keys,Fr=Object.hasOwnProperty,Qo=(e,t)=>{const o=ze(e);for(let s=0,a=o.length;s<a;s++){const c=o[s],d=e[c];t(d,c)}},Xr=(e,t)=>vn(e,(o,s)=>({k:s,v:t(o,s)})),vn=(e,t)=>{const o={};return Qo(e,(s,a)=>{const c=t(s,a);o[c.k]=c.v}),o},gd=e=>(t,o)=>{e[o]=t},kr=(e,t,o,s)=>{Qo(e,(a,c)=>{(t(a,c)?o:s)(a,c)})},Hm=(e,t)=>{const o={},s={};return kr(e,t,gd(o),gd(s)),{t:o,f:s}},wi=(e,t)=>{const o={};return kr(e,t,gd(o),oo),o},ti=(e,t)=>{const o=[];return Qo(e,(s,a)=>{o.push(t(s,a))}),o},kc=e=>ti(e,bo),an=(e,t)=>jt(e,t)?I.from(e[t]):I.none(),jt=(e,t)=>Fr.call(e,t),oi=(e,t)=>jt(e,t)&&e[t]!==void 0&&e[t]!==null,ga=(e,t,o=mr)=>Kr(o).eq(e,t),Ia=e=>{const t={};return Ie(e,o=>{t[o]={}}),ze(t)},pd=e=>e.length!==void 0,ot=Array.isArray,rg=e=>{if(ot(e))return e;{const t=[];for(let o=0,s=e.length;o<s;o++)t[o]=e[o];return t}},Tn=(e,t,o)=>{if(!e)return!1;if(o=o||e,pd(e)){for(let s=0,a=e.length;s<a;s++)if(t.call(o,e[s],s,e)===!1)return!1}else for(const s in e)if(jt(e,s)&&t.call(o,e[s],s,e)===!1)return!1;return!0},zm=(e,t)=>{const o=[];return Tn(e,(s,a)=>{o.push(t(s,a,e))}),o},hd=(e,t)=>{const o=[];return Tn(e,(s,a)=>{(!t||t(s,a,e))&&o.push(s)}),o},Hr=(e,t)=>{if(e){for(let o=0,s=e.length;o<s;o++)if(e[o]===t)return o}return-1},ml=(e,t,o,s)=>{let a=Bs(o)?e[0]:o;for(let c=0;c<e.length;c++)a=t.call(s,a,e[c],c);return a},Sr=(e,t,o)=>{for(let s=0,a=e.length;s<a;s++)if(t.call(o,e[s],s,e))return s;return-1},Ws=e=>e[e.length-1],pa=e=>{let t=!1,o;return(...s)=>(t||(t=!0,o=e.apply(null,s)),o)},nh=(e,t,o,s)=>{const a=e.isiOS()&&/ipad/i.test(o)===!0,c=e.isiOS()&&!a,d=e.isiOS()||e.isAndroid(),g=d||s("(pointer:coarse)"),v=a||!c&&d&&s("(min-device-width:768px)"),S=c||d&&!v,R=t.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,D=!S&&!v&&!R;return{isiPad:Je(a),isiPhone:Je(c),isTablet:Je(v),isPhone:Je(S),isTouch:Je(g),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Je(R),isDesktop:Je(D)}},Bu=(e,t)=>{for(let o=0;o<e.length;o++){const s=e[o];if(s.test(t))return s}},ag=(e,t)=>{const o=Bu(e,t);if(!o)return{major:0,minor:0};const s=a=>Number(t.replace(o,"$"+a));return Go(s(1),s(2))},sh=(e,t)=>{const o=String(t).toLowerCase();return e.length===0?Vm():ag(e,o)},Vm=()=>Go(0,0),Go=(e,t)=>({major:e,minor:t}),Es={nu:Go,detect:sh,unknown:Vm},Er=(e,t)=>Zs(t.brands,o=>{const s=o.brand.toLowerCase();return Ao(e,a=>{var c;return s===((c=a.brand)===null||c===void 0?void 0:c.toLowerCase())}).map(a=>({current:a.name,version:Es.nu(parseInt(o.version,10),0)}))}),Pu=(e,t)=>{const o=String(t).toLowerCase();return Ao(e,s=>s.search(o))},ig=(e,t)=>Pu(e,t).map(o=>{const s=Es.detect(o.versionRegexes,t);return{current:o.name,version:s}}),$m=(e,t)=>Pu(e,t).map(o=>{const s=Es.detect(o.versionRegexes,t);return{current:o.name,version:s}}),Ci=(e,t)=>e.substring(t),rr=(e,t,o)=>t===""||e.length>=t.length&&e.substr(o,o+t.length)===t,lg=(e,t)=>yn(e,t)?Ci(e,t.length):e,Fn=(e,t,o=0,s)=>{const a=e.indexOf(t,o);return a!==-1?Bs(s)?!0:a+t.length<=s:!1},yn=(e,t)=>rr(e,t,0),Fl=(e,t)=>rr(e,t,e.length-t.length),_i=e=>t=>t.replace(e,""),Hl=_i(/^\s+|\s+$/g),Sc=_i(/^\s+/g),Iu=_i(/\s+$/g),zr=e=>e.length>0,bs=e=>!zr(e),Gi=(e,t)=>t<=0?"":new Array(t+1).join(e),ls=(e,t=10)=>{const o=parseInt(e,t);return isNaN(o)?I.none():I.some(o)},bd=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ps=e=>t=>Fn(t,e),ni=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Fn(e,"edge/")&&Fn(e,"chrome")&&Fn(e,"safari")&&Fn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,bd],search:e=>Fn(e,"chrome")&&!Fn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Fn(e,"msie")||Fn(e,"trident")},{name:"Opera",versionRegexes:[bd,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ps("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ps("firefox")},{name:"Safari",versionRegexes:[bd,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Fn(e,"safari")||Fn(e,"mobile/"))&&Fn(e,"applewebkit")}],cg=[{name:"Windows",search:Ps("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Fn(e,"iphone")||Fn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ps("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ps("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ps("linux"),versionRegexes:[]},{name:"Solaris",search:Ps("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ps("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ps("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Tr={browsers:Je(ni),oses:Je(cg)},Kt="Edge",ki="Chromium",js="IE",qs="Opera",zl="Firefox",Sn="Safari",xs=()=>Ec({current:void 0,version:Es.unknown()}),Ec=e=>{const t=e.current,o=e.version,s=a=>()=>t===a;return{current:t,version:o,isEdge:s(Kt),isChromium:s(ki),isIE:s(js),isOpera:s(qs),isFirefox:s(zl),isSafari:s(Sn)}},Ht={unknown:xs,nu:Ec,edge:Je(Kt),chromium:Je(ki),ie:Je(js),opera:Je(qs),firefox:Je(zl),safari:Je(Sn)},Ki="Windows",Vl="iOS",Gn="Android",Si="Linux",vs="macOS",Lu="Solaris",Um="FreeBSD",Mo="ChromeOS",z=()=>ne({current:void 0,version:Es.unknown()}),ne=e=>{const t=e.current,o=e.version,s=a=>()=>t===a;return{current:t,version:o,isWindows:s(Ki),isiOS:s(Vl),isAndroid:s(Gn),isMacOS:s(vs),isLinux:s(Si),isSolaris:s(Lu),isFreeBSD:s(Um),isChromeOS:s(Mo)}},de={unknown:z,nu:ne,windows:Je(Ki),ios:Je(Vl),android:Je(Gn),linux:Je(Si),macos:Je(vs),solaris:Je(Lu),freebsd:Je(Um),chromeos:Je(Mo)},Ue={detect:(e,t,o)=>{const s=Tr.browsers(),a=Tr.oses(),c=t.bind(v=>Er(s,v)).orThunk(()=>ig(s,e)).fold(Ht.unknown,Ht.nu),d=$m(a,e).fold(de.unknown,de.nu),g=nh(d,c,e,o);return{browser:c,os:d,deviceType:g}}},Tt=e=>window.matchMedia(e).matches;let Xt=pa(()=>Ue.detect(navigator.userAgent,I.from(navigator.userAgentData),Tt));const To=()=>Xt(),ko=navigator.userAgent,Kn=To(),Xo=Kn.browser,On=Kn.os,ha=Kn.deviceType,si=ko.indexOf("Windows Phone")!==-1,Do={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Xo.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Xo.isIE(),windowsPhone:si,browser:{current:Xo.current,version:Xo.version,isChromium:Xo.isChromium,isEdge:Xo.isEdge,isFirefox:Xo.isFirefox,isIE:Xo.isIE,isOpera:Xo.isOpera,isSafari:Xo.isSafari},os:{current:On.current,version:On.version,isAndroid:On.isAndroid,isChromeOS:On.isChromeOS,isFreeBSD:On.isFreeBSD,isiOS:On.isiOS,isLinux:On.isLinux,isMacOS:On.isMacOS,isSolaris:On.isSolaris,isWindows:On.isWindows},deviceType:{isDesktop:ha.isDesktop,isiPad:ha.isiPad,isiPhone:ha.isiPhone,isPhone:ha.isPhone,isTablet:ha.isTablet,isTouch:ha.isTouch,isWebView:ha.isWebView}},dg=/^\s*|\s*$/g,$l=e=>_o(e)?"":(""+e).replace(dg,""),lb=(e,t)=>t?t==="array"&&ot(e)?!0:typeof e===t:e!==void 0,ug=(e,t,o={})=>{const s=bt(e)?e.split(t||","):e||[];let a=s.length;for(;a--;)o[s[a]]={};return o},Jr=jt,Ew=(e,...t)=>{for(let o=0;o<t.length;o++){const s=t[o];for(const a in s)if(jt(s,a)){const c=s[a];c!==void 0&&(e[a]=c)}}return e},tv=function(e,t,o,s){s=s||this,e&&(o&&(e=e[o]),Tn(e,(a,c)=>t.call(s,a,c,o)===!1?!1:(tv(a,t,o,s),!0)))},qe={trim:$l,isArray:ot,is:lb,toArray:rg,makeMap:ug,each:Tn,map:zm,grep:hd,inArray:Hr,hasOwn:Jr,extend:Ew,walk:tv,resolve:(e,t=window)=>{const o=e.split(".");for(let s=0,a=o.length;s<a&&(t=t[o[s]],!!t);s++);return t},explode:(e,t)=>ce(e)?e:e===""?[]:zm(e.split(t||","),$l),_addCacheSuffix:e=>{const t=Do.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},Zm=(e,t,o=Yr)=>e.exists(s=>o(s,t)),nv=(e,t,o=Yr)=>Vr(e,t,o).getOr(e.isNone()&&t.isNone()),cb=e=>{const t=[],o=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(o);return t},Vr=(e,t,o)=>e.isSome()&&t.isSome()?I.some(o(e.getOrDie(),t.getOrDie())):I.none(),Tw=(e,t,o,s)=>e.isSome()&&t.isSome()&&o.isSome()?I.some(s(e.getOrDie(),t.getOrDie(),o.getOrDie())):I.none(),Wm=(e,t)=>e?I.some(t):I.none(),Ow=typeof window<"u"?window:Function("return this;")(),Aw=(e,t)=>{let o=t??Ow;for(let s=0;s<e.length&&o!==void 0&&o!==null;++s)o=o[e[s]];return o},sv=(e,t)=>{const o=e.split(".");return Aw(o,t)},Nw=(e,t)=>sv(e,t),Rw=(e,t)=>{const o=Nw(e,t);if(o==null)throw new Error(e+" not available on this browser");return o},Dw=Object.getPrototypeOf,db=e=>Rw("HTMLElement",e),Mw=e=>{const t=sv("ownerDocument.defaultView",e);return ue(e)&&(db(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Dw(e).constructor.name))},rv=8,av=9,ub=11,jm=1,fl=3,po=e=>e.dom.nodeName.toLowerCase(),rh=e=>e.dom.nodeType,Yi=e=>t=>rh(t)===e,Fu=e=>rh(e)===rv||po(e)==="#comment",qm=e=>ba(e)&&Mw(e.dom),ba=Yi(jm),ys=Yi(fl),Gm=Yi(av),ah=Yi(ub),Is=e=>t=>ba(t)&&po(t)===e,cs=(e,t,o)=>{if(bt(o)||yi(o)||E(o))e.setAttribute(t,o+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},An=(e,t,o)=>{cs(e.dom,t,o)},Yn=(e,t)=>{const o=e.dom;Qo(t,(s,a)=>{cs(o,a,s)})},xa=(e,t)=>{const o=e.dom.getAttribute(t);return o===null?void 0:o},ri=(e,t)=>I.from(xa(e,t)),Km=(e,t)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(t):!1},ds=(e,t)=>{e.dom.removeAttribute(t)},mg=e=>{const t=e.dom.attributes;return t==null||t.length===0},Ts=e=>Ir(e.dom.attributes,(t,o)=>(t[o.name]=o.value,t),{}),Gs=(e,t)=>{const o=xa(e,t);return o===void 0||o===""?[]:o.split(" ")},Ls=(e,t,o)=>{const a=Gs(e,t).concat([o]);return An(e,t,a.join(" ")),!0},Ym=(e,t,o)=>{const s=Et(Gs(e,t),a=>a!==o);return s.length>0?An(e,t,s.join(" ")):ds(e,t),!1},Xn=e=>e.dom.classList!==void 0,fg=e=>Gs(e,"class"),ih=(e,t)=>Ls(e,"class",t),gg=(e,t)=>Ym(e,"class",t),mo=(e,t)=>Io(fg(e),t)?gg(e,t):ih(e,t),Ks=(e,t)=>{Xn(e)?e.dom.classList.add(t):ih(e,t)},pg=e=>{(Xn(e)?e.dom.classList:fg(e)).length===0&&ds(e,"class")},xd=(e,t)=>{Xn(e)?e.dom.classList.remove(t):gg(e,t),pg(e)},mb=(e,t)=>{const o=Xn(e)?e.dom.classList.toggle(t):mo(e,t);return pg(e),o},Ul=(e,t)=>Xn(e)&&e.dom.classList.contains(t),vd=(e,t)=>{const s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){const a="HTML does not have a single root node";throw console.error(a,e),new Error(a)}return Tc(s.childNodes[0])},Bw=(e,t)=>{const s=(t||document).createElement(e);return Tc(s)},fb=(e,t)=>{const s=(t||document).createTextNode(e);return Tc(s)},Tc=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},X={fromHtml:vd,fromTag:Bw,fromText:fb,fromDom:Tc,fromPoint:(e,t,o)=>I.from(e.dom.elementFromPoint(t,o)).map(Tc)},Zl=(e,t)=>{const o=[],s=c=>(o.push(c),t(c));let a=t(e);do a=a.bind(s);while(a.isSome());return o},Qr=(e,t)=>{const o=e.dom;if(o.nodeType!==jm)return!1;{const s=o;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},yd=e=>e.nodeType!==jm&&e.nodeType!==av&&e.nodeType!==ub||e.childElementCount===0,gb=(e,t)=>{const o=t===void 0?document:t.dom;return yd(o)?[]:no(o.querySelectorAll(e),X.fromDom)},pb=(e,t)=>{const o=t===void 0?document:t.dom;return yd(o)?I.none():I.from(o.querySelector(e)).map(X.fromDom)},Lo=(e,t)=>e.dom===t.dom,ai=(e,t)=>{const o=e.dom,s=t.dom;return o===s?!1:o.contains(s)},wd=e=>X.fromDom(e.dom.ownerDocument),gl=e=>Gm(e)?e:wd(e),hb=e=>X.fromDom(gl(e).dom.documentElement),Hu=e=>X.fromDom(gl(e).dom.defaultView),Ei=e=>I.from(e.dom.parentNode).map(X.fromDom),lh=e=>I.from(e.dom.parentElement).map(X.fromDom),ea=(e,t)=>{const o=Pt(t)?t:Jt;let s=e.dom;const a=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const c=s.parentNode,d=X.fromDom(c);if(a.push(d),o(d)===!0)break;s=c}return a},St=e=>{const t=o=>Et(o,s=>!Lo(e,s));return Ei(e).map(Mn).map(t).getOr([])},va=e=>I.from(e.dom.previousSibling).map(X.fromDom),Wl=e=>I.from(e.dom.nextSibling).map(X.fromDom),lv=e=>Il(Zl(e,va)),ch=e=>Zl(e,Wl),Mn=e=>no(e.dom.childNodes,X.fromDom),Oc=(e,t)=>{const o=e.dom.childNodes;return I.from(o[t]).map(X.fromDom)},Xm=e=>Oc(e,0),Os=e=>Oc(e,e.dom.childNodes.length-1),Cd=e=>e.dom.childNodes.length,dh=e=>e.dom.hasChildNodes(),hg=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return X.fromDom(t)},bb=e=>ah(e)&&Ne(e.dom.host),_d=Pt(Element.prototype.attachShadow)&&Pt(Node.prototype.getRootNode),jl=Je(_d),Ac=_d?e=>X.fromDom(e.dom.getRootNode()):gl,Bn=e=>bb(e)?e:hg(gl(e)),Xi=e=>bb(e)?e:X.fromDom(gl(e).dom.body),ta=e=>{const t=Ac(e);return bb(t)?I.some(t):I.none()},zu=e=>X.fromDom(e.dom.host),ya=e=>{if(jl()&&Ne(e.target)){const t=X.fromDom(e.target);if(ba(t)&&cv(t)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Ln(o)}}return I.from(e.target)},cv=e=>Ne(e.dom.shadowRoot),ws=e=>{const t=ys(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const o=t.ownerDocument;return ta(X.fromDom(t)).fold(()=>o.body.contains(t),Pa(ws,zu))};var $r=(e,t,o,s,a)=>e(o,s)?I.some(o):Pt(a)&&a(o)?I.none():t(o,s,a);const Ti=(e,t,o)=>{let s=e.dom;const a=Pt(o)?o:Jt;for(;s.parentNode;){s=s.parentNode;const c=X.fromDom(s);if(t(c))return I.some(c);if(a(c))break}return I.none()},Ee=(e,t,o)=>$r((a,c)=>c(a),Ti,e,t,o),La=(e,t)=>{const o=e.dom;return o.parentNode?xb(X.fromDom(o.parentNode),s=>!Lo(e,s)&&t(s)):I.none()},xb=(e,t)=>{const o=a=>t(X.fromDom(a));return Ao(e.dom.childNodes,o).map(X.fromDom)},us=(e,t)=>{const o=s=>{for(let a=0;a<s.childNodes.length;a++){const c=X.fromDom(s.childNodes[a]);if(t(c))return I.some(c);const d=o(s.childNodes[a]);if(d.isSome())return d}return I.none()};return o(e.dom)},wa=(e,t,o)=>Ti(e,s=>Qr(s,t),o),oa=(e,t)=>pb(t,e),Fa=(e,t,o)=>$r((a,c)=>Qr(a,c),wa,e,t,o),bg=e=>Fa(e,"[contenteditable]"),gr=(e,t=!1)=>ws(e)?e.dom.isContentEditable:bg(e).fold(Je(t),o=>zo(o)==="true"),zo=e=>e.dom.contentEditable,ii=e=>e.style!==void 0&&Pt(e.style.getPropertyValue),kd=(e,t,o)=>{if(!bt(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);ii(e)&&e.style.setProperty(t,o)},pr=(e,t)=>{ii(e)&&e.style.removeProperty(t)},uh=(e,t,o)=>{const s=e.dom;kd(s,t,o)},ql=(e,t)=>{const o=e.dom;Qo(t,(s,a)=>{kd(o,a,s)})},Ur=(e,t)=>{const o=e.dom,a=window.getComputedStyle(o).getPropertyValue(t);return a===""&&!ws(e)?Ha(o,t):a},Ha=(e,t)=>ii(e)?e.style.getPropertyValue(t):"",fe=(e,t)=>{const o=e.dom,s=Ha(o,t);return I.from(s).filter(a=>a.length>0)},Ca=e=>{const t={},o=e.dom;if(ii(o))for(let s=0;s<o.style.length;s++){const a=o.style.item(s);t[a]=o.style[a]}return t},xg=(e,t)=>{const o=e.dom;pr(o,t),Zm(ri(e,"style").map(Hl),"")&&ds(e,"style")},Nc=e=>e.dom.offsetWidth,As=(e,t)=>{Ei(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},Vn=(e,t)=>{Wl(e).fold(()=>{Ei(e).each(a=>{Pn(a,t)})},s=>{As(s,t)})},ms=(e,t)=>{Xm(e).fold(()=>{Pn(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},Pn=(e,t)=>{e.dom.appendChild(t.dom)},vg=(e,t)=>{As(e,t),Pn(t,e)},Ot=(e,t)=>{Ie(t,(o,s)=>{const a=s===0?e:t[s-1];Vn(a,o)})},Zr=(e,t)=>{Ie(t,o=>{Pn(e,o)})},li=e=>{e.dom.textContent="",Ie(Mn(e),t=>{en(t)})},en=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},_a=e=>{const t=Mn(e);t.length>0&&Ot(e,t),en(e)},vb=(e,t)=>{const s=(t||document).createElement("div");return s.innerHTML=e,Mn(X.fromDom(s))},Vu=e=>no(e,X.fromDom),mh=e=>e.dom.innerHTML,yg=(e,t)=>{const s=wd(e).dom,a=X.fromDom(s.createDocumentFragment()),c=vb(t,s);Zr(a,c),li(e),Pn(e,a)},Sd=e=>{const t=X.fromTag("div"),o=X.fromDom(e.dom.cloneNode(!0));return Pn(t,o),mh(t)},ar=(e,t,o,s,a,c,d)=>({target:e,x:t,y:o,stop:s,prevent:a,kill:c,raw:d}),Gl=e=>{const t=X.fromDom(ya(e).getOr(e.target)),o=()=>e.stopPropagation(),s=()=>e.preventDefault(),a=Uo(s,o);return ar(t,e.clientX,e.clientY,o,s,a,e)},$u=(e,t)=>o=>{e(o)&&t(Gl(o))},Kl=(e,t,o,s,a)=>{const c=$u(o,s);return e.dom.addEventListener(t,c,a),{unbind:it(na,e,t,c,a)}},Uu=(e,t,o,s)=>Kl(e,t,o,s,!1),na=(e,t,o,s)=>{e.dom.removeEventListener(t,o,s)},wg=(e,t)=>({left:e,top:t,translate:(s,a)=>wg(e+s,t+a)}),Rc=wg,yb=e=>{const t=e.getBoundingClientRect();return Rc(t.left,t.top)},Ji=(e,t)=>e!==void 0?e:t!==void 0?t:0,Dc=e=>{const t=e.dom.ownerDocument,o=t.body,s=t.defaultView,a=t.documentElement;if(o===e.dom)return Rc(o.offsetLeft,o.offsetTop);const c=Ji(s==null?void 0:s.pageYOffset,a.scrollTop),d=Ji(s==null?void 0:s.pageXOffset,a.scrollLeft),g=Ji(a.clientTop,o.clientTop),v=Ji(a.clientLeft,o.clientLeft);return Cg(e).translate(d-v,c-g)},Cg=e=>{const t=e.dom,s=t.ownerDocument.body;return s===t?Rc(s.offsetLeft,s.offsetTop):ws(e)?yb(t):Rc(0,0)},sa=e=>{const t=e!==void 0?e.dom:document,o=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return Rc(o,s)},wb=(e,t,o)=>{const a=(o!==void 0?o.dom:document).defaultView;a&&a.scrollTo(e,t)},pl=(e,t)=>{To().browser.isSafari()&&Pt(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},hl=e=>{const t=e===void 0?window:e;return To().browser.isFirefox()?I.none():I.from(t.visualViewport)},ci=(e,t,o,s)=>({x:e,y:t,width:o,height:s,right:e+o,bottom:t+s}),_g=e=>{const t=e===void 0?window:e,o=t.document,s=sa(X.fromDom(o));return hl(t).fold(()=>{const a=t.document.documentElement,c=a.clientWidth,d=a.clientHeight;return ci(s.left,s.top,c,d)},a=>ci(Math.max(a.pageLeft,s.left),Math.max(a.pageTop,s.top),a.width,a.height))},Jm=(e,t)=>Et(Mn(e),t),Cb=(e,t)=>{let o=[];return Ie(Mn(e),s=>{t(s)&&(o=o.concat([s])),o=o.concat(Cb(s,t))}),o},hr=(e,t)=>gb(t,e),os=(e,t,o)=>wa(e,t,o).isSome();class Ys{constructor(t,o){this.node=t,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,o,s,a){if(t){if(!a&&t[o])return t[o];if(t!==this.rootNode){let c=t[s];if(c)return c;for(let d=t.parentNode;d&&d!==this.rootNode;d=d.parentNode)if(c=d[s],c)return c}}}findPreviousNode(t,o){if(t){const s=t.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!o){for(let c=s.lastChild;c;c=c.lastChild)if(!c.lastChild)return c}return s}const a=t.parentNode;if(a&&a!==this.rootNode)return a}}}const za=e=>t=>!!t&&t.nodeType===e,Zu=e=>!!e&&!Object.getPrototypeOf(e),dt=za(1),Va=e=>dt(e)&&qm(X.fromDom(e)),ka=e=>dt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Qi=e=>{const t=e.toLowerCase();return o=>Ne(o)&&o.nodeName.toLowerCase()===t},$a=e=>{const t=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const s=o.nodeName.toLowerCase();return Io(t,s)}return!1}},Wu=(e,t)=>{const o=t.toLowerCase().split(" ");return s=>{if(dt(s)){const a=s.ownerDocument.defaultView;if(a)for(let c=0;c<o.length;c++){const d=a.getComputedStyle(s,null);if((d?d.getPropertyValue(e):null)===o[c])return!0}}return!1}},kg=e=>t=>dt(t)&&t.hasAttribute(e),_b=(e,t)=>o=>dt(o)&&o.getAttribute(e)===t,bl=e=>dt(e)&&e.hasAttribute("data-mce-bogus"),kb=e=>dt(e)&&e.getAttribute("data-mce-bogus")==="all",xl=e=>dt(e)&&e.tagName==="TABLE",ju=e=>t=>!!(Va(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),Ed=$a(["textarea","input"]),Le=za(3),Qm=za(4),Td=za(7),Mc=za(8),Bc=za(9),Sg=za(11),Jn=Qi("br"),ef=Qi("img"),Ua=ju("true"),ln=ju("false"),tf=$a(["td","th"]),xo=$a(["td","th","caption"]),ut=$a(["video","audio","object","embed"]),Od=Qi("li"),Eg=Qi("details"),Tg=Qi("summary"),Za="\uFEFF",uo=" ",Ad=e=>e===Za,Sb=e=>e.replace(/\uFEFF/g,""),of=((e,t)=>{const o=c=>{if(!e(c))throw new Error("Can only get "+t+" value of a "+t+" node");return s(c).getOr("")},s=c=>e(c)?I.from(c.dom.nodeValue):I.none();return{get:o,getOption:s,set:(c,d)=>{if(!e(c))throw new Error("Can only set raw "+t+" value of a "+t+" node");c.dom.nodeValue=d}}})(ys,"text"),qu=e=>of.get(e),Gu=e=>of.getOption(e),Eb=(e,t)=>of.set(e,t),Yl=["td","th"],dv=["thead","tbody","tfoot"],Ku=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],cn=["li","dd","dt"],Xl=["ul","ol","dl"],uv=["pre","script","textarea","style"],Sa=e=>{let t;return o=>(t=t||Ll(e,kn),jt(t,po(o)))},Og=e=>po(e)==="table",Wa=e=>ba(e)&&po(e)==="br",nf=Sa(Ku),Jl=Sa(Xl),sf=Sa(cn),fh=Sa(dv),Yu=Sa(Yl),Xu=Sa(uv),lt=e=>{const t=[];let o=e.dom;for(;o;)t.push(X.fromDom(o)),o=o.lastChild;return t},mv=e=>{const t=hr(e,"br"),o=Et(lt(e).slice(-1),Wa);t.length===o.length&&Ie(o,en)},rf=()=>{const e=X.fromTag("br");return An(e,"data-mce-bogus","1"),e},Nd=e=>{li(e),Pn(e,rf())},fv=(e,t)=>{Os(e).each(o=>{va(o).each(s=>{t.isBlock(po(e))&&Wa(o)&&t.isBlock(po(s))&&en(o)})})},Ns=Za,Rd=Ad,Fs=Sb,gv=e=>e.insertContent(Ns,{preserve_zwsp:!0}),gh=dt,Ju=Le,Dd=e=>(Ju(e)&&(e=e.parentNode),gh(e)&&e.hasAttribute("data-mce-caret")),di=e=>Ju(e)&&Rd(e.data),Or=e=>Dd(e)||di(e),Ag=e=>e.firstChild!==e.lastChild||!Jn(e.firstChild),ph=(e,t)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Ns),c=e.parentNode;if(t){const d=e.previousSibling;if(Ju(d)){if(Or(d))return d;if(qa(d))return d.splitText(d.data.length-1)}c==null||c.insertBefore(a,e)}else{const d=e.nextSibling;if(Ju(d)){if(Or(d))return d;if(Oi(d))return d.splitText(1),d}e.nextSibling?c==null||c.insertBefore(a,e.nextSibling):c==null||c.appendChild(a)}return a},Cs=e=>{const t=e.container();return Le(t)?t.data.charAt(e.offset())===Ns||e.isAtStart()&&di(t.previousSibling):!1},ja=e=>{const t=e.container();return Le(t)?t.data.charAt(e.offset()-1)===Ns||e.isAtEnd()&&di(t.nextSibling):!1},Xs=(e,t,o)=>{var s;const c=((s=t.ownerDocument)!==null&&s!==void 0?s:document).createElement(e);c.setAttribute("data-mce-caret",o?"before":"after"),c.setAttribute("data-mce-bogus","all"),c.appendChild(rf().dom);const d=t.parentNode;return o?d==null||d.insertBefore(c,t):t.nextSibling?d==null||d.insertBefore(c,t.nextSibling):d==null||d.appendChild(c),c},Oi=e=>Ju(e)&&e.data[0]===Ns,qa=e=>Ju(e)&&e.data[e.data.length-1]===Ns,hh=e=>{var t;const o=e.getElementsByTagName("br"),s=o[o.length-1];bl(s)&&((t=s.parentNode)===null||t===void 0||t.removeChild(s))},bh=e=>e&&e.hasAttribute("data-mce-caret")?(hh(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Tb=e=>Dd(e.startContainer),Ng=Ua,pv=ln,Md=Jn,Ob=Le,Pw=$a(["script","style","textarea"]),xh=$a(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Ql=$a(["table"]),Ab=Or,ui=e=>Ab(e)?!1:Ob(e)?!Pw(e.parentNode):xh(e)||Md(e)||Ql(e)||$n(e),Nb=e=>dt(e)&&e.getAttribute("unselectable")==="true",$n=e=>!Nb(e)&&pv(e),Rb=(e,t)=>{for(let o=e.parentNode;o&&o!==t;o=o.parentNode){if($n(o))return!1;if(Ng(o))return!0}return!0},Un=e=>$n(e)?!Ir(Dt(e.getElementsByTagName("*")),(t,o)=>t||Ng(o),!1):!1,ra=e=>xh(e)||Un(e),Pc=(e,t)=>ui(e)&&Rb(e,t),Ai=/^[ \t\r\n]*$/,vl=e=>Ai.test(e),ec=e=>{for(const t of e)if(!Ad(t))return!1;return!0},Bd=e=>" \f	\v".indexOf(e)!==-1,vh=e=>e===`
`||e==="\r",Pd=(e,t)=>t<e.length&&t>=0?vh(e[t]):!1,Id=(e,t=4,o=!0,s=!0)=>{const a=Gi(" ",t),c=e.replace(/\t/g,a);return Ir(c,(g,v)=>Bd(v)||v===uo?g.pcIsSpace||g.str===""&&o||g.str.length===c.length-1&&s||Pd(c,g.str.length+1)?{pcIsSpace:!1,str:g.str+uo}:{pcIsSpace:!0,str:g.str+" "}:{pcIsSpace:vh(v),str:g.str+v},{pcIsSpace:!1,str:""}).str},Db=(e,t)=>{const o=X.fromDom(t),s=X.fromDom(e);return os(s,"pre,code",it(Lo,o))},Iw=(e,t)=>Le(e)&&vl(e.data)&&!Db(e,t),Mb=e=>dt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Rg=(e,t)=>ui(e)&&!Iw(e,t)||Mb(e)||Nn(e),Nn=kg("data-mce-bookmark"),Bb=kg("data-mce-bogus"),hv=_b("data-mce-bogus","all"),yh=e=>lh(X.fromDom(e)).exists(t=>!gr(t)),Ar=(e,t)=>{let o=0;if(Rg(e,e))return!1;{let s=e.firstChild;if(!s)return!0;const a=new Ys(s,e);do{if(t){if(hv(s)){s=a.next(!0);continue}if(Bb(s)){s=a.next();continue}}if(Ua(s)&&yh(s))return!1;if(Jn(s)){o++,s=a.next();continue}if(Rg(s,e))return!1;s=a.next()}while(s);return o<=1}},Jo=(e,t=!0)=>Ar(e.dom,t),Wr=e=>e.toLowerCase()==="svg",Dg=e=>Wr(e.nodeName),wh=e=>(e==null?void 0:e.nodeName)==="svg"?"svg":"html",bv=["svg"],Ch=()=>{let e=[];const t=()=>e[e.length-1];return{track:c=>{Dg(c)&&e.push(c);let d=t();return d&&!d.contains(c)&&(e.pop(),d=t()),wh(d)},current:()=>wh(t()),reset:()=>{e=[]}}},Ni="data-mce-block",Pb=e=>Et(ze(e),t=>!/[A-Z]/.test(t)),Zn=e=>no(Pb(e),t=>`${t}:`+no(bv,o=>`not(${o} ${t})`).join(":")).join(","),Ri=(e,t)=>Ne(t.querySelector(e))?(t.setAttribute(Ni,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Ni),!1),Qu=(e,t)=>{const o=Zn(e.getTransparentElements()),s=Zn(e.getBlockElements());return Et(t.querySelectorAll(o),a=>Ri(s,a))},af=(e,t)=>{var o;const s=t?"lastChild":"firstChild";for(let a=e[s];a;a=a[s])if(Jo(X.fromDom(a))){(o=a.parentNode)===null||o===void 0||o.removeChild(a);return}},Js=(e,t)=>{const o=document.createRange(),s=e.parentNode;if(s){o.setStartBefore(e),o.setEndBefore(t);const a=o.extractContents();af(a,!0),o.setStartAfter(t),o.setEndAfter(e);const c=o.extractContents();af(c,!1),Jo(X.fromDom(a))||s.insertBefore(a,e),Jo(X.fromDom(t))||s.insertBefore(t,e),Jo(X.fromDom(c))||s.insertBefore(c,e),s.removeChild(e)}},Ic=(e,t,o)=>{const s=e.getBlockElements(),a=X.fromDom(t),c=g=>po(g)in s,d=g=>Lo(g,a);Ie(Vu(o),g=>{Ti(g,c,d).each(v=>{const S=Jm(g,R=>c(R)&&!e.isValidChild(po(v),po(R)));if(S.length>0){const R=lh(v);Ie(S,D=>{Ti(D,c,d).each(P=>{Js(P.dom,D.dom)})}),R.each(D=>Qu(e,D.dom))}})})},Mg=(e,t,o)=>{Ie([...o,...Ld(e,t)?[t]:[]],s=>Ie(hr(X.fromDom(s),s.nodeName.toLowerCase()),a=>{Pg(e,a.dom)&&_a(a)}))},Ib=(e,t)=>{const o=Qu(e,t);Ic(e,t,o),Mg(e,t,o)},Lb=(e,t)=>{if(Bg(e,t)){const o=Zn(e.getBlockElements());Ri(o,t)}},Lw=(e,t,o)=>{const s=c=>Lo(c,X.fromDom(t)),a=ea(X.fromDom(o),s);qi(a,a.length-2).filter(ba).fold(()=>Ib(e,t),c=>Ib(e,c.dom))},em=e=>e.hasAttribute(Ni),tm=(e,t)=>jt(e.getTransparentElements(),t),Bg=(e,t)=>dt(t)&&tm(e,t.nodeName),Ld=(e,t)=>Bg(e,t)&&em(t),Pg=(e,t)=>Bg(e,t)&&!em(t),tc=(e,t)=>t.type===1&&tm(e,t.name)&&bt(t.attr(Ni)),Ig=To().browser,ho=e=>Ao(e,ba),aa=e=>Ig.isFirefox()&&po(e)==="table"?ho(Mn(e)).filter(t=>po(t)==="caption").bind(t=>ho(ch(t)).map(o=>{const s=o.dom.offsetTop,a=t.dom.offsetTop,c=t.dom.offsetHeight;return s<=a?-c:0})).getOr(0):0,yl=(e,t)=>e.children&&Io(e.children,t),Fb=(e,t,o)=>{let s=0,a=0;const c=e.ownerDocument;if(o=o||e,t){if(o===e&&t.getBoundingClientRect&&Ur(X.fromDom(e),"position")==="static"){const g=t.getBoundingClientRect();return s=g.left+(c.documentElement.scrollLeft||e.scrollLeft)-c.documentElement.clientLeft,a=g.top+(c.documentElement.scrollTop||e.scrollTop)-c.documentElement.clientTop,{x:s,y:a}}let d=t;for(;d&&d!==o&&d.nodeType&&!yl(d,o);){const g=d;s+=g.offsetLeft||0,a+=g.offsetTop||0,d=g.offsetParent}for(d=t.parentNode;d&&d!==o&&d.nodeType&&!yl(d,o);)s-=d.scrollLeft||0,a-=d.scrollTop||0,d=d.parentNode;a+=aa(X.fromDom(t))}return{x:s,y:a}},wn=(e,t={})=>{let o=0;const s={},a=X.fromDom(e),c=gl(a),d=ae=>{t.referrerPolicy=ae},g=ae=>{t.contentCssCors=ae},v=ae=>{Pn(Bn(a),ae)},S=ae=>{const le=Bn(a);oa(le,"#"+ae).each(en)},R=ae=>an(s,ae).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),D=ae=>new Promise((le,ie)=>{let pe;const Pe=qe._addCacheSuffix(ae),We=R(Pe);s[Pe]=We,We.count++;const st=(ct,Ct)=>{Ie(ct,Cc),We.status=Ct,We.passed=[],We.failed=[],pe&&(pe.onload=null,pe.onerror=null,pe=null)},ke=()=>st(We.passed,2),ye=()=>st(We.failed,3);if(le&&We.passed.push(le),ie&&We.failed.push(ie),We.status===1)return;if(We.status===2){ke();return}if(We.status===3){ye();return}We.status=1;const Be=X.fromTag("link",c.dom);Yn(Be,{rel:"stylesheet",type:"text/css",id:We.id}),t.contentCssCors&&An(Be,"crossOrigin","anonymous"),t.referrerPolicy&&An(Be,"referrerpolicy",t.referrerPolicy),pe=Be.dom,pe.onload=ke,pe.onerror=ye,v(Be),An(Be,"href",Pe)}),P=(ae,le)=>{const ie=R(ae);s[ae]=ie,ie.count++;const pe=X.fromTag("style",c.dom);Yn(pe,{rel:"stylesheet",type:"text/css",id:ie.id}),pe.dom.innerHTML=le,v(pe)},j=ae=>Promise.allSettled(no(ae,ie=>D(ie).then(Je(ie)))).then(ie=>{const pe=ul(ie,Pe=>Pe.status==="fulfilled");return pe.fail.length>0?Promise.reject(no(pe.fail,Pe=>Pe.reason)):no(pe.pass,Pe=>Pe.value)}),K=ae=>{const le=qe._addCacheSuffix(ae);an(s,le).each(ie=>{--ie.count===0&&(delete s[le],S(ie.id))})};return{load:D,loadRawCss:P,loadAll:j,unload:K,unloadRawCss:ae=>{an(s,ae).each(le=>{--le.count===0&&(delete s[ae],S(le.id))})},unloadAll:ae=>{Ie(ae,le=>{K(le)})},_setReferrerPolicy:d,_setContentCssCors:g}},Hb=(()=>{const e=new WeakMap;return{forElement:(o,s)=>{const c=Ac(o).dom;return I.from(e.get(c)).getOrThunk(()=>{const d=wn(c,s);return e.set(c,d),d})}}})(),br=e=>e.nodeName.toLowerCase()==="span",Lc=(e,t,o)=>Ne(e)&&(Rg(e,t)||o.isInline(e.nodeName.toLowerCase())),_h=(e,t,o)=>{const s=new Ys(e,t).prev(!1),a=new Ys(e,t).next(!1),c=Bs(s)||Lc(s,t,o),d=Bs(a)||Lc(a,t,o);return c&&d},kh=e=>br(e)&&e.getAttribute("data-mce-type")==="bookmark",zb=(e,t,o)=>Le(e)&&e.data.length>0&&_h(e,t,o),Vb=e=>dt(e)?e.childNodes.length>0:!1,xv=e=>Sg(e)||Bc(e),Sh=(e,t,o,s)=>{var a;const c=s||t;if(dt(t)&&kh(t))return t;const d=t.childNodes;for(let g=d.length-1;g>=0;g--)Sh(e,d[g],o,c);if(dt(t)){const g=t.childNodes;g.length===1&&kh(g[0])&&((a=t.parentNode)===null||a===void 0||a.insertBefore(g[0],t))}return!xv(t)&&!Rg(t,c)&&!Vb(t)&&!zb(t,c,o)&&e.remove(t),t},vv=qe.makeMap,Lg=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mi=/[<>&\"\']/g,xr=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Fd={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Hd={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},yv={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},wv=e=>{const t=X.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},Eh=(e,t)=>{const o={};if(e){const s=e.split(",");t=t||10;for(let a=0;a<s.length;a+=2){const c=String.fromCharCode(parseInt(s[a],t));if(!Hd[c]){const d="&"+s[a+1]+";";o[c]=d,o[d]=c}}return o}else return},Fg=Eh("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Th=(e,t)=>e.replace(t?Lg:Fc,o=>Hd[o]||o),ir=e=>(""+e).replace(mi,t=>Hd[t]||t),ns=(e,t)=>e.replace(t?Lg:Fc,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Hd[o]||"&#"+o.charCodeAt(0)+";"),lr=(e,t,o)=>{const s=o||Fg;return e.replace(t?Lg:Fc,a=>Hd[a]||s[a]||a)},Wn={encodeRaw:Th,encodeAllRaw:ir,encodeNumeric:ns,encodeNamed:lr,getEncodeFunc:(e,t)=>{const o=Eh(t)||Fg,s=(d,g)=>d.replace(g?Lg:Fc,v=>Hd[v]!==void 0?Hd[v]:o[v]!==void 0?o[v]:v.length>1?"&#"+((v.charCodeAt(0)-55296)*1024+(v.charCodeAt(1)-56320)+65536)+";":"&#"+v.charCodeAt(0)+";"),a=(d,g)=>lr(d,g,o),c=vv(e.replace(/\+/g,","));return c.named&&c.numeric?s:c.named?t?a:lr:c.numeric?ns:Th},decode:e=>e.replace(xr,(t,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):Fd[o]||String.fromCharCode(o)):yv[t]||Fg[t]||wv(t))},cr=(e,t)=>(e=qe.trim(e),e?e.split(t||" "):[]),Hg=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),$b=e=>{const t=/^(~)?(.+)$/;return Ho(cr(e,","),o=>{const s=t.exec(o);if(s){const a=s[1]==="~",c=a?"span":"div",d=s[2];return[{inline:a,cloneName:c,name:d}]}else return[]})},lf=e=>{let t,o,s;if(t="id accesskey class dir lang style tabindex title role",o="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",s="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const c="a ins del canvas map";t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",o+=" article aside details dialog figure main header footer hgroup section nav "+c,s+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"}e!=="html5-strict"&&(t+=" xml:lang",s=[s,"acronym applet basefont big font strike tt"].join(" "),o=[o,"center dir isindex noframes"].join(" "));const a=[o,s].join(" ");return{globalAttributes:t,blockContent:o,phrasingContent:s,flowContent:a}},Ub=e=>{const{globalAttributes:t,phrasingContent:o,flowContent:s}=lf(e),a={},c=(v,S,R)=>{a[v]={attributes:Ll(S,Je({})),attributesOrder:S,children:Ll(R,Je({}))}},d=(v,S="",R="")=>{const D=cr(R),P=cr(v);let j=P.length;const K=cr([t,S].join(" "));for(;j--;)c(P[j],K.slice(),D)},g=(v,S)=>{const R=cr(v),D=cr(S);let P=R.length;for(;P--;){const j=a[R[P]];for(let K=0,Z=D.length;K<Z;K++)j.attributes[D[K]]={},j.attributesOrder.push(D[K])}};return e!=="html5-strict"&&(Ie(cr("acronym applet basefont big font strike tt"),R=>{d(R,"",o)}),Ie(cr("center dir isindex noframes"),R=>{d(R,"",s)})),d("html","manifest","head body"),d("head","","base command link meta noscript script style title"),d("title hr noscript br"),d("base","href target"),d("link","href rel media hreflang type sizes hreflang"),d("meta","name http-equiv content charset"),d("style","media type scoped"),d("script","src async defer type charset"),d("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",s),d("dd div","",s),d("address dt caption","",e==="html4"?o:s),d("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),d("blockquote","cite",s),d("ol","reversed start type","li"),d("ul","","li"),d("li","value",s),d("dl","","dt dd"),d("a","href target rel media hreflang type",e==="html4"?o:s),d("q","cite",o),d("ins del","cite datetime",s),d("img","src sizes srcset alt usemap ismap width height"),d("iframe","src name width height",s),d("embed","src type width height"),d("object","data type typemustmatch name usemap form width height",[s,"param"].join(" ")),d("param","name value"),d("map","name",[s,"area"].join(" ")),d("area","alt coords shape href target rel media hreflang type"),d("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),d("colgroup","span","col"),d("col","span"),d("tbody thead tfoot","","tr"),d("tr","","td th"),d("td","colspan rowspan headers",s),d("th","colspan rowspan headers scope abbr",s),d("form","accept-charset action autocomplete enctype method name novalidate target",s),d("fieldset","disabled form name",[s,"legend"].join(" ")),d("label","form for",o),d("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),d("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?s:o),d("select","disabled form multiple name required size","option optgroup"),d("optgroup","disabled label","option"),d("option","disabled label selected value"),d("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),d("menu","type label",[s,"li"].join(" ")),d("noscript","",s),e!=="html4"&&(d("wbr"),d("ruby","",[o,"rt rp"].join(" ")),d("figcaption","",s),d("mark rt rp bdi","",o),d("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),d("canvas","width height",s),d("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[s,"track source"].join(" ")),d("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[s,"track source"].join(" ")),d("picture","","img source"),d("source","src srcset type media sizes"),d("track","kind src srclang label default"),d("datalist","",[o,"option"].join(" ")),d("article section nav aside main header footer","",s),d("hgroup","","h1 h2 h3 h4 h5 h6"),d("figure","",[s,"figcaption"].join(" ")),d("time","datetime",o),d("dialog","open",s),d("command","type label icon disabled checked radiogroup command"),d("output","for form name",o),d("progress","value max",o),d("meter","value min max low high optimum",o),d("details","open",[s,"summary"].join(" ")),d("keygen","autofocus challenge disabled form keytype name"),c("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(g("script","language xml:space"),g("style","xml:space"),g("object","declare classid code codebase codetype archive standby align border hspace vspace"),g("embed","align name hspace vspace"),g("param","valuetype type"),g("a","charset name rev shape coords"),g("br","clear"),g("applet","codebase archive code object alt name width height align hspace vspace"),g("img","name longdesc align border hspace vspace"),g("iframe","longdesc frameborder marginwidth marginheight scrolling align"),g("font basefont","size color face"),g("input","usemap align"),g("select"),g("textarea"),g("h1 h2 h3 h4 h5 h6 div p legend caption","align"),g("ul","type compact"),g("li","type"),g("ol dl menu dir","compact"),g("pre","width xml:space"),g("hr","align noshade size width"),g("isindex","prompt"),g("table","summary width frame rules cellspacing cellpadding align bgcolor"),g("col","width align char charoff valign"),g("colgroup","width align char charoff valign"),g("thead","align char charoff valign"),g("tr","align char charoff valign bgcolor"),g("th","axis align char charoff valign nowrap bgcolor width height"),g("form","accept"),g("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),g("tfoot","align char charoff valign"),g("tbody","align char charoff valign"),g("area","nohref"),g("body","background bgcolor text link vlink alink")),e!=="html4"&&(g("input button select textarea","autofocus"),g("input textarea","placeholder"),g("a","download"),g("link script img","crossorigin"),g("img","loading"),g("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&Ie([a.video,a.audio],v=>{delete v.children.audio,delete v.children.video}),Ie(cr("a form meter progress dfn"),v=>{a[v]&&delete a[v].children[v]}),delete a.caption.children.table,delete a.script,a},zd=e=>e==="-"?"remove":"add",Oh=e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Ho(cr(e,","),o=>{const s=t.exec(o);if(s){const a=s[1],c=a?zd(a):"replace",d=s[2],g=cr(s[3],"|");return[{operation:c,name:d,validChildren:g}]}else return[]})},zg=(e,t)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,s=/[*?+]/,{attributes:a,attributesOrder:c}=t;return Ie(cr(e,"|"),d=>{const g=o.exec(d);if(g){const v={},S=g[1],R=g[2].replace(/[\\:]:/g,":"),D=g[3],P=g[4];if(S==="!"&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(R),v.required=!0),S==="-"){delete a[R],c.splice(qe.inArray(c,R),1);return}if(D&&(D==="="?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:R,value:P}),v.defaultValue=P):D==="~"?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:R,value:P}),v.forcedValue=P):D==="<"&&(v.validValues=qe.makeMap(P,"?"))),s.test(R)){const j=v;t.attributePatterns=t.attributePatterns||[],j.pattern=Hg(R),t.attributePatterns.push(j)}else a[R]||c.push(R),a[R]=v}})},Hw=(e,t)=>{Qo(e.attributes,(o,s)=>{t.attributes[s]=o}),t.attributesOrder.push(...e.attributesOrder)},zw=(e,t)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Ho(cr(t,","),s=>{const a=o.exec(s);if(a){const c=a[1],d=a[2],g=a[3],v=a[4],S=a[5],R={attributes:{},attributesOrder:[]};if(e.each(D=>Hw(D,R)),c==="#"?R.paddEmpty=!0:c==="-"&&(R.removeEmpty=!0),v==="!"&&(R.removeEmptyAttrs=!0),S&&zg(S,R),g&&(R.outputName=d),d==="@")if(e.isNone())e=I.some(R);else return[];return[g?{name:d,element:R,aliasName:g}:{name:d,element:R}]}else return[]})},cf={},df=qe.makeMap,Di=qe.each,Ve=qe.extend,Zb=qe.explode,Hs=(e,t={})=>{const o=df(e," ",df(e.toUpperCase()," "));return Ve(o,t)},Vg=e=>Hs("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Vd=(e,t)=>{if(e){const o={};return bt(e)&&(e={"*":e}),Di(e,(s,a)=>{o[a]=o[a.toUpperCase()]=t==="map"?df(s,/[, ]/):Zb(s,/[, ]/)}),o}else return},oc=(e={})=>{var t;const o={},s={};let a=[];const c={},d={},g=(Yt,Po,_n)=>{const Ss=e[Yt];if(Ss)return df(Ss,/[, ]/,df(Ss.toUpperCase(),/[, ]/));{let ts=cf[Yt];return ts||(ts=Hs(Po,_n),cf[Yt]=ts),ts}},v=(t=e.schema)!==null&&t!==void 0?t:"html5",S=Ub(v);e.verify_html===!1&&(e.valid_elements="*[*]");const R=Vd(e.valid_styles),D=Vd(e.invalid_styles,"map"),P=Vd(e.valid_classes,"map"),j=g("whitespace_elements","pre script noscript style textarea video audio iframe object code"),K=g("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Z=g("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),Y=g("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ae="td th iframe video audio object script code",le=g("non_empty_elements",ae+" pre svg",Z),ie=g("move_caret_before_on_enter_elements",ae+" table",Z),pe="h1 h2 h3 h4 h5 h6",Pe=g("text_block_elements",pe+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),We=g("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Pe),st=g("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),ke=g("transparent_elements","a ins del canvas map"),ye=g("wrap_block_elements","pre "+pe);Di("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Yt=>{d[Yt]=new RegExp("</"+Yt+"[^>]*>","gi")});const Be=Yt=>{const Po=I.from(o["@"]),_n=/[*?+]/;Ie(zw(Po,Yt??""),({name:Ss,element:ts,aliasName:cl})=>{if(cl&&(o[cl]=ts),_n.test(Ss)){const Im=ts;Im.pattern=Hg(Ss),a.push(Im)}else o[Ss]=ts})},ct=Yt=>{a=[],Ie(ze(o),Po=>{delete o[Po]}),Be(Yt)},Ct=Yt=>{delete cf.text_block_elements,delete cf.block_elements,Ie($b(Yt??""),({inline:Po,name:_n,cloneName:Ss})=>{if(s[_n]=s[Ss],c[_n]=Ss,le[_n.toUpperCase()]={},le[_n]={},Po||(We[_n.toUpperCase()]={},We[_n]={}),!o[_n]){let ts=o[Ss];ts=Ve({},ts),delete ts.removeEmptyAttrs,delete ts.removeEmpty,o[_n]=ts}Qo(s,(ts,cl)=>{ts[Ss]&&(s[cl]=ts=Ve({},s[cl]),ts[_n]=ts[Ss])})})},co=Yt=>{Ie(Oh(Yt??""),({operation:Po,name:_n,validChildren:Ss})=>{const ts=Po==="replace"?{"#comment":{}}:s[_n];Ie(Ss,cl=>{Po==="remove"?delete ts[cl]:ts[cl]={}}),s[_n]=ts})},fo=Yt=>{const Po=o[Yt];if(Po)return Po;let _n=a.length;for(;_n--;){const Ss=a[_n];if(Ss.pattern.test(Yt))return Ss}};e.valid_elements?(ct(e.valid_elements),Di(S,(Yt,Po)=>{s[Po]=Yt.children})):(Di(S,(Yt,Po)=>{o[Po]={attributes:Yt.attributes,attributesOrder:Yt.attributesOrder},s[Po]=Yt.children}),Di(cr("strong/b em/i"),Yt=>{const Po=cr(Yt,"/");o[Po[1]].outputName=Po[0]}),Di(st,(Yt,Po)=>{o[Po]&&(e.padd_empty_block_inline_children&&(o[Po].paddInEmptyBlock=!0),o[Po].removeEmpty=!0)}),Di(cr("ol ul blockquote a table tbody"),Yt=>{o[Yt]&&(o[Yt].removeEmpty=!0)}),Di(cr("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Yt=>{o[Yt]&&(o[Yt].paddEmpty=!0)}),Di(cr("span"),Yt=>{o[Yt].removeEmptyAttrs=!0})),delete o.svg,Ct(e.custom_elements),co(e.valid_children),Be(e.extended_valid_elements),co("+ol[ul|ol],+ul[ul|ol]"),Di({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Yt,Po)=>{o[Po]&&(o[Po].parentsRequired=cr(Yt))}),e.invalid_elements&&Di(Zb(e.invalid_elements),Yt=>{o[Yt]&&delete o[Yt]}),fo("span")||Be("span[!data-mce-type|*]");const on=Je(R),Cn=Je(D),ps=Je(P),fa=Je(Y),nn=Je(We),Qe=Je(Pe),pt=Je(st),Bo=Je(Object.seal(Z)),vo=Je(K),ft=Je(le),qt=Je(ie),Ge=Je(j),Gt=Je(ke),Eo=Je(ye),pn=Je(Object.seal(d)),rn=(Yt,Po)=>{const _n=s[Yt.toLowerCase()];return!!(_n&&_n[Po.toLowerCase()])},Mr=(Yt,Po)=>{const _n=fo(Yt);if(_n)if(Po){if(_n.attributes[Po])return!0;const Ss=_n.attributePatterns;if(Ss){let ts=Ss.length;for(;ts--;)if(Ss[ts].pattern.test(Po))return!0}}else return!0;return!1},Ou=Yt=>jt(nn(),Yt),og=Yt=>!yn(Yt,"#")&&Mr(Yt)&&!Ou(Yt),ji=Yt=>jt(Eo(),Yt)||og(Yt),dd=Je(c);return{type:v,children:s,elements:o,getValidStyles:on,getValidClasses:ps,getBlockElements:nn,getInvalidStyles:Cn,getVoidElements:Bo,getTextBlockElements:Qe,getTextInlineElements:pt,getBoolAttrs:fa,getElementRule:fo,getSelfClosingElements:vo,getNonEmptyElements:ft,getMoveCaretBeforeOnEnterElements:qt,getWhitespaceElements:Ge,getTransparentElements:Gt,getSpecialElements:pn,isValidChild:rn,isValid:Mr,isBlock:Ou,isInline:og,isWrapper:ji,getCustomElements:dd,addValidElements:Be,setValidElements:ct,addCustomElements:Ct,addValidChildren:co}},Ea=e=>({value:Vw(e)}),Vw=e=>lg(e,"#").toUpperCase(),Ga=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},Wb=e=>{const t=Ga(e.red)+Ga(e.green)+Ga(e.blue);return Ea(t)},$g=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Mi=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Bi=(e,t,o,s)=>({red:e,green:t,blue:o,alpha:s}),uf=(e,t,o,s)=>{const a=parseInt(e,10),c=parseInt(t,10),d=parseInt(o,10),g=parseFloat(s);return Bi(a,c,d,g)},Ka=e=>{if(e==="transparent")return I.some(Bi(0,0,0,0));const t=$g.exec(e);if(t!==null)return I.some(uf(t[1],t[2],t[3],"1"));const o=Mi.exec(e);return o!==null?I.some(uf(o[1],o[2],o[3],o[4])):I.none()},jb=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Hc=e=>Ka(e).map(Wb).map(t=>"#"+t.value).getOr(e),Ug=(e={},t)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,c={};let d,g;const v=Za;t&&(d=t.getValidStyles(),g=t.getInvalidStyles());const S=(`\\" \\' \\; \\: ; : `+v).split(" ");for(let D=0;D<S.length;D++)c[S[D]]=v+D,c[v+D]=S[D];const R={parse:D=>{const P={};let j=!1;const K=e.url_converter,Z=e.url_converter_scope||R,Y=(ke,ye,Be)=>{const ct=P[ke+"-top"+ye];if(!ct)return;const Ct=P[ke+"-right"+ye];if(!Ct)return;const co=P[ke+"-bottom"+ye];if(!co)return;const fo=P[ke+"-left"+ye];if(!fo)return;const on=[ct,Ct,co,fo];let Cn=on.length-1;for(;Cn--&&on[Cn]===on[Cn+1];);Cn>-1&&Be||(P[ke+ye]=Cn===-1?on[0]:on.join(" "),delete P[ke+"-top"+ye],delete P[ke+"-right"+ye],delete P[ke+"-bottom"+ye],delete P[ke+"-left"+ye])},ae=ke=>{const ye=P[ke];if(!ye)return;const Be=ye.indexOf(",")>-1?[ye]:ye.split(" ");let ct=Be.length;for(;ct--;)if(Be[ct]!==Be[0])return!1;return P[ke]=Be[0],!0},le=(ke,ye,Be,ct)=>{ae(ye)&&ae(Be)&&ae(ct)&&(P[ke]=P[ye]+" "+P[Be]+" "+P[ct],delete P[ye],delete P[Be],delete P[ct])},ie=ke=>(j=!0,c[ke]),pe=(ke,ye)=>(j&&(ke=ke.replace(/\uFEFF[0-9]/g,Be=>c[Be])),ye||(ke=ke.replace(/\\([\'\";:])/g,"$1")),ke),Pe=ke=>String.fromCharCode(parseInt(ke.slice(1),16)),We=ke=>ke.replace(/\\[0-9a-f]+/gi,Pe),st=(ke,ye,Be,ct,Ct,co)=>{if(Ct=Ct||co,Ct)return Ct=pe(Ct),"'"+Ct.replace(/\'/g,"\\'")+"'";if(ye=pe(ye||Be||ct||""),!e.allow_script_urls){const fo=ye.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(fo)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(fo))return""}return K&&(ye=K.call(Z,ye,"style")),"url('"+ye.replace(/\'/g,"\\'")+"')"};if(D){D=D.replace(/[\u0000-\u001F]/g,""),D=D.replace(/\\[\"\';:\uFEFF]/g,ie).replace(/\"[^\"]+\"|\'[^\']+\'/g,ye=>ye.replace(/[;:]/g,ie));let ke;for(;ke=s.exec(D);){s.lastIndex=ke.index+ke[0].length;let ye=ke[1].replace(a,"").toLowerCase(),Be=ke[2].replace(a,"");if(ye&&Be){if(ye=We(ye),Be=We(Be),ye.indexOf(v)!==-1||ye.indexOf('"')!==-1||!e.allow_script_urls&&(ye==="behavior"||/expression\s*\(|\/\*|\*\//.test(Be)))continue;ye==="font-weight"&&Be==="700"?Be="bold":(ye==="color"||ye==="background-color")&&(Be=Be.toLowerCase()),bt(e.force_hex_color)&&e.force_hex_color!=="off"&&Ka(Be).each(ct=>{(e.force_hex_color==="always"||ct.alpha===1)&&(Be=Hc(jb(ct)))}),Be=Be.replace(o,st),P[ye]=j?pe(Be,!0):Be}}Y("border","",!0),Y("border","-width"),Y("border","-color"),Y("border","-style"),Y("padding",""),Y("margin",""),le("border","border-width","border-style","border-color"),P.border==="medium none"&&delete P.border,P["border-image"]==="none"&&delete P["border-image"]}return P},serialize:(D,P)=>{let j="";const K=(Y,ae)=>{const le=ae[Y];if(le)for(let ie=0,pe=le.length;ie<pe;ie++){const Pe=le[ie],We=D[Pe];We&&(j+=(j.length>0?" ":"")+Pe+": "+We+";")}},Z=(Y,ae)=>{if(!g||!ae)return!0;let le=g["*"];return le&&le[Y]?!1:(le=g[ae],!(le&&le[Y]))};return P&&d?(K("*",d),K(P,d)):Qo(D,(Y,ae)=>{Y&&Z(ae,P)&&(j+=(j.length>0?" ":"")+ae+": "+Y+";")}),j}};return R},qb={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Ah=e=>e instanceof Event||Pt(e.initEvent),$w=e=>e.isDefaultPrevented===kn||e.isDefaultPrevented===Jt,Gb=e=>_o(e.preventDefault)||Ah(e),Kb=(e,t)=>{const o=t??{};for(const s in e)jt(qb,s)||(o[s]=e[s]);return Ne(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Ne(e.getModifierState)&&(o.getModifierState=s=>e.getModifierState(s)),Ne(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},Yb=(e,t,o,s)=>{var a;const c=Kb(t,s);return c.type=e,_o(c.target)&&(c.target=(a=c.srcElement)!==null&&a!==void 0?a:o),Gb(t)&&(c.preventDefault=()=>{c.defaultPrevented=!0,c.isDefaultPrevented=kn,Pt(t.preventDefault)&&t.preventDefault()},c.stopPropagation=()=>{c.cancelBubble=!0,c.isPropagationStopped=kn,Pt(t.stopPropagation)&&t.stopPropagation()},c.stopImmediatePropagation=()=>{c.isImmediatePropagationStopped=kn,c.stopPropagation()},$w(c)||(c.isDefaultPrevented=c.defaultPrevented===!0?kn:Jt,c.isPropagationStopped=c.cancelBubble===!0?kn:Jt,c.isImmediatePropagationStopped=Jt)),c},Zg="mce-data-",Cv=/^(?:mouse|contextmenu)|click/,$d=(e,t,o,s)=>{e.addEventListener(t,o,s||!1)},vr=(e,t,o,s)=>{e.removeEventListener(t,o,s||!1)},Ud=e=>Ne(e)&&Cv.test(e.type),nc=(e,t)=>{const o=Yb(e.type,e,document,t);if(Ud(e)&&Bs(e.pageX)&&!Bs(e.clientX)){const s=o.target.ownerDocument||document,a=s.documentElement,c=s.body,d=o;d.pageX=e.clientX+(a&&a.scrollLeft||c&&c.scrollLeft||0)-(a&&a.clientLeft||c&&c.clientLeft||0),d.pageY=e.clientY+(a&&a.scrollTop||c&&c.scrollTop||0)-(a&&a.clientTop||c&&c.clientTop||0)}return o},En=(e,t,o)=>{const s=e.document,a={type:"ready"};if(o.domLoaded){t(a);return}const c=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,d=()=>{vr(e,"DOMContentLoaded",d),vr(e,"load",d),o.domLoaded||(o.domLoaded=!0,t(a)),e=null};c()?d():$d(e,"DOMContentLoaded",d),o.domLoaded||$d(e,"load",d)};class Zd{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Zg+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,o,s,a){const c=this;let d;const g=window,v=P=>{c.executeHandlers(nc(P||g.event),S)};if(!t||Le(t)||Mc(t))return s;let S;t[c.expando]?S=t[c.expando]:(S=c.count++,t[c.expando]=S,c.events[S]={}),a=a||t;const R=o.split(" ");let D=R.length;for(;D--;){let P=R[D],j=v,K=!1,Z=!1;if(P==="DOMContentLoaded"&&(P="ready"),c.domLoaded&&P==="ready"&&t.readyState==="complete"){s.call(a,nc({type:P}));continue}!c.hasFocusIn&&(P==="focusin"||P==="focusout")&&(K=!0,Z=P==="focusin"?"focus":"blur",j=Y=>{const ae=nc(Y||g.event);ae.type=ae.type==="focus"?"focusin":"focusout",c.executeHandlers(ae,S)}),d=c.events[S][P],d?P==="ready"&&c.domLoaded?s(nc({type:P})):d.push({func:s,scope:a}):(c.events[S][P]=d=[{func:s,scope:a}],d.fakeName=Z,d.capture=K,d.nativeHandler=j,P==="ready"?En(t,j,c):$d(t,Z||P,j,K))}return t=d=null,s}unbind(t,o,s){if(!t||Le(t)||Mc(t))return this;const a=t[this.expando];if(a){let c=this.events[a];if(o){const d=o.split(" ");let g=d.length;for(;g--;){const v=d[g],S=c[v];if(S){if(s){let R=S.length;for(;R--;)if(S[R].func===s){const D=S.nativeHandler,P=S.fakeName,j=S.capture,K=S.slice(0,R).concat(S.slice(R+1));K.nativeHandler=D,K.fakeName=P,K.capture=j,c[v]=K}}(!s||S.length===0)&&(delete c[v],vr(t,S.fakeName||v,S.nativeHandler,S.capture))}}}else Qo(c,(d,g)=>{vr(t,d.fakeName||g,d.nativeHandler,d.capture)}),c={};for(const d in c)if(jt(c,d))return this;delete this.events[a];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,o,s){return this.dispatch(t,o,s)}dispatch(t,o,s){if(!t||Le(t)||Mc(t))return this;const a=nc({type:o,target:t},s);do{const c=t[this.expando];c&&this.executeHandlers(a,c),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!a.isPropagationStopped());return this}clean(t){if(!t||Le(t)||Mc(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const o=t.getElementsByTagName("*");let s=o.length;for(;s--;)t=o[s],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,o){const s=this.events[o],a=s&&s[t.type];if(a)for(let c=0,d=a.length;c<d;c++){const g=a[c];if(g&&g.func.call(g.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}Zd.Event=new Zd;const yr=qe.each,Wg=qe.grep,Nh="data-mce-style",mf=qe.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),zc=(e,t,o)=>{_o(o)||o===""?ds(e,t):An(e,t,o)},Xb=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Vc=(e,t)=>{let o=0;if(e)for(let s=e.nodeType,a=e.previousSibling;a;a=a.previousSibling){const c=a.nodeType;t&&Le(a)&&(c===s||!a.data.length)||(o++,s=c)}return o},om=(e,t)=>{const o=xa(t,"style"),s=e.serialize(e.parse(o),po(t));zc(t,Nh,s)},nm=(e,t)=>E(e)?jt(mf,t)?e+"":e+"px":e,Rh=(e,t,o)=>{const s=Xb(t);_o(o)||o===""?xg(e,s):uh(e,s,nm(o,s))},Dh=(e,t,o)=>{const s=t.keep_values,a={set:(d,g,v)=>{const S=X.fromDom(d);Pt(t.url_converter)&&Ne(g)&&(g=t.url_converter.call(t.url_converter_scope||o(),String(g),v,d));const R="data-mce-"+v;zc(S,R,g),zc(S,v,g)},get:(d,g)=>{const v=X.fromDom(d);return xa(v,"data-mce-"+g)||xa(v,g)}},c={style:{set:(d,g)=>{const v=X.fromDom(d);s&&zc(v,Nh,g),ds(v,"style"),bt(g)&&ql(v,e.parse(g))},get:d=>{const g=X.fromDom(d),v=xa(g,Nh)||xa(g,"style");return e.serialize(e.parse(v),po(g))}}};return s&&(c.href=c.src=a),c},un=(e,t={})=>{const o={},s=window,a={};let c=0;const d=!0,g=!0,v=Hb.forElement(X.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),S=[],R=t.schema?t.schema:oc({}),D=Ug({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope,force_hex_color:t.force_hex_color},t.schema),P=t.ownEvents?new Zd:Zd.Event,j=R.getBlockElements(),K=xe=>bt(xe)?jt(j,xe):dt(xe)&&(jt(j,xe.nodeName)||Ld(R,xe)),Z=xe=>xe&&e&&bt(xe)?e.getElementById(xe):xe,Y=xe=>{const ve=Z(xe);return Ne(ve)?X.fromDom(ve):null},ae=(xe,ve,Ye="")=>{let $e;const yt=Y(xe);if(Ne(yt)&&ba(yt)){const yo=z4[ve];yo&&yo.get?$e=yo.get(yt.dom,ve):$e=xa(yt,ve)}return Ne($e)?$e:Ye},le=xe=>{const ve=Z(xe);return _o(ve)?[]:ve.attributes},ie=(xe,ve,Ye)=>{pt(xe,$e=>{if(dt($e)){const yt=X.fromDom($e),yo=Ye===""?null:Ye,is=xa(yt,ve),Bl=z4[ve];Bl&&Bl.set?Bl.set(yt.dom,yo,ve):zc(yt,ve,yo),is!==yo&&t.onSetAttrib&&t.onSetAttrib({attrElm:yt.dom,attrName:ve,attrValue:yo})}})},pe=(xe,ve)=>xe.cloneNode(ve),Pe=()=>t.root_element||e.body,We=xe=>{const ve=_g(xe);return{x:ve.x,y:ve.y,w:ve.width,h:ve.height}},st=(xe,ve)=>Fb(e.body,Z(xe),ve),ke=(xe,ve,Ye)=>{pt(xe,$e=>{const yt=X.fromDom($e);Rh(yt,ve,Ye),t.update_styles&&om(D,yt)})},ye=(xe,ve)=>{pt(xe,Ye=>{const $e=X.fromDom(Ye);Qo(ve,(yt,yo)=>{Rh($e,yo,yt)}),t.update_styles&&om(D,$e)})},Be=(xe,ve,Ye)=>{const $e=Z(xe);if(!(_o($e)||!Va($e)&&!ka($e)))return Ye?Ur(X.fromDom($e),Xb(ve)):(ve=ve.replace(/-(\D)/g,(yt,yo)=>yo.toUpperCase()),ve==="float"&&(ve="cssFloat"),$e.style?$e.style[ve]:void 0)},ct=xe=>{const ve=Z(xe);if(!ve)return{w:0,h:0};let Ye=Be(ve,"width"),$e=Be(ve,"height");return(!Ye||Ye.indexOf("px")===-1)&&(Ye="0"),(!$e||$e.indexOf("px")===-1)&&($e="0"),{w:parseInt(Ye,10)||ve.offsetWidth||ve.clientWidth,h:parseInt($e,10)||ve.offsetHeight||ve.clientHeight}},Ct=xe=>{const ve=Z(xe),Ye=st(ve),$e=ct(ve);return{x:Ye.x,y:Ye.y,w:$e.w,h:$e.h}},co=(xe,ve)=>{if(!xe)return!1;const Ye=ce(xe)?xe:[xe];return bn(Ye,$e=>Qr(X.fromDom($e),ve))},fo=(xe,ve,Ye,$e)=>{const yt=[];let yo=Z(xe);$e=$e===void 0;const is=Ye||(Pe().nodeName!=="BODY"?Pe().parentNode:null);if(bt(ve))if(ve==="*")ve=dt;else{const Bl=ve;ve=Ba=>co(Ba,Bl)}for(;yo&&!(yo===is||_o(yo.nodeType)||Bc(yo)||Sg(yo));){if(!ve||ve(yo))if($e)yt.push(yo);else return[yo];yo=yo.parentNode}return $e?yt:null},on=(xe,ve,Ye)=>{const $e=fo(xe,ve,Ye,!1);return $e&&$e.length>0?$e[0]:null},Cn=(xe,ve,Ye)=>{let $e=ve;if(xe){bt(ve)&&($e=yt=>co(yt,ve));for(let yt=xe[Ye];yt;yt=yt[Ye])if(Pt($e)&&$e(yt))return yt}return null},ps=(xe,ve)=>Cn(xe,ve,"nextSibling"),fa=(xe,ve)=>Cn(xe,ve,"previousSibling"),nn=xe=>Pt(xe.querySelectorAll),Qe=(xe,ve)=>{var Ye,$e;const yt=($e=(Ye=Z(ve))!==null&&Ye!==void 0?Ye:t.root_element)!==null&&$e!==void 0?$e:e;return nn(yt)?Dt(yt.querySelectorAll(xe)):[]},pt=function(xe,ve,Ye){const $e=Ye??this;if(ce(xe)){const yt=[];return yr(xe,(yo,is)=>{const Bl=Z(yo);Bl&&yt.push(ve.call($e,Bl,is))}),yt}else{const yt=Z(xe);return yt?ve.call($e,yt):!1}},Bo=(xe,ve)=>{pt(xe,Ye=>{Qo(ve,($e,yt)=>{ie(Ye,yt,$e)})})},vo=(xe,ve)=>{pt(xe,Ye=>{const $e=X.fromDom(Ye);yg($e,ve)})},ft=(xe,ve,Ye,$e,yt)=>pt(xe,yo=>{const is=bt(ve)?e.createElement(ve):ve;return Ne(Ye)&&Bo(is,Ye),$e&&(!bt($e)&&$e.nodeType?is.appendChild($e):bt($e)&&vo(is,$e)),yt?is:yo.appendChild(is)}),qt=(xe,ve,Ye)=>ft(e.createElement(xe),xe,ve,Ye,!0),Ge=Wn.decode,Gt=Wn.encodeAllRaw,Eo=(xe,ve,Ye="")=>{let $e="<"+xe;for(const yt in ve)oi(ve,yt)&&($e+=" "+yt+'="'+Gt(ve[yt])+'"');return bs(Ye)&&jt(R.getVoidElements(),xe)?$e+" />":$e+">"+Ye+"</"+xe+">"},pn=xe=>{const ve=e.createElement("div"),Ye=e.createDocumentFragment();Ye.appendChild(ve),xe&&(ve.innerHTML=xe);let $e;for(;$e=ve.firstChild;)Ye.appendChild($e);return Ye.removeChild(ve),Ye},rn=(xe,ve)=>pt(xe,Ye=>{const $e=X.fromDom(Ye);return ve&&Ie(Mn($e),yt=>{ys(yt)&&yt.dom.length===0?en(yt):As($e,yt)}),en($e),$e.dom}),Mr=xe=>pt(xe,ve=>{const Ye=ve.attributes;for(let $e=Ye.length-1;$e>=0;$e--)ve.removeAttributeNode(Ye.item($e))}),Ou=xe=>D.parse(xe),og=(xe,ve)=>D.serialize(xe,ve),ji=xe=>{if(oh!==un.DOM&&e===document){if(o[xe])return;o[xe]=!0}let ve=e.getElementById("mceDefaultStyles");if(!ve){ve=e.createElement("style"),ve.id="mceDefaultStyles",ve.type="text/css";const Ye=e.head;Ye.firstChild?Ye.insertBefore(ve,Ye.firstChild):Ye.appendChild(ve)}ve.styleSheet?ve.styleSheet.cssText+=xe:ve.appendChild(e.createTextNode(xe))},dd=xe=>{xe||(xe=""),Ie(xe.split(","),ve=>{a[ve]=!0,v.load(ve).catch(oo)})},Yt=(xe,ve,Ye)=>{pt(xe,$e=>{if(dt($e)){const yt=X.fromDom($e),yo=ve.split(" ");Ie(yo,is=>{Ne(Ye)?(Ye?Ks:xd)(yt,is):mb(yt,is)})}})},Po=(xe,ve)=>{Yt(xe,ve,!0)},_n=(xe,ve)=>{Yt(xe,ve,!1)},Ss=(xe,ve)=>{const Ye=Y(xe),$e=ve.split(" ");return Ne(Ye)&&ei($e,yt=>Ul(Ye,yt))},ts=xe=>{pt(xe,ve=>xg(X.fromDom(ve),"display"))},cl=xe=>{pt(xe,ve=>uh(X.fromDom(ve),"display","none"))},Im=xe=>{const ve=Y(xe);return Ne(ve)&&Zm(fe(ve,"display"),"none")},ab=xe=>(xe||"mce_")+c++,AR=xe=>{const ve=Y(xe);return Ne(ve)?dt(ve.dom)?ve.dom.outerHTML:Sd(ve):""},NR=(xe,ve)=>{pt(xe,Ye=>{dt(Ye)&&(Ye.outerHTML=ve)})},RR=(xe,ve)=>{const Ye=Z(ve);return pt(xe,$e=>{const yt=Ye==null?void 0:Ye.parentNode,yo=Ye==null?void 0:Ye.nextSibling;return yt&&(yo?yt.insertBefore($e,yo):yt.appendChild($e)),$e})},_w=(xe,ve,Ye)=>pt(ve,$e=>{var yt;const yo=ce(ve)?xe.cloneNode(!0):xe;return Ye&&yr(Wg($e.childNodes),is=>{yo.appendChild(is)}),(yt=$e.parentNode)===null||yt===void 0||yt.replaceChild(yo,$e),$e}),DR=(xe,ve)=>{if(xe.nodeName!==ve.toUpperCase()){const Ye=qt(ve);return yr(le(xe),$e=>{ie(Ye,$e.nodeName,ae(xe,$e.nodeName))}),_w(Ye,xe,!0),Ye}else return xe},kw=(xe,ve)=>{let Ye=xe;for(;Ye;){let $e=ve;for(;$e&&Ye!==$e;)$e=$e.parentNode;if(Ye===$e)break;Ye=Ye.parentNode}return!Ye&&xe.ownerDocument?xe.ownerDocument.documentElement:Ye},Jx=xe=>{if(dt(xe)){const ve=xe.nodeName.toLowerCase()==="a"&&!ae(xe,"href")&&ae(xe,"id");if(ae(xe,"name")||ae(xe,"data-mce-bookmark")||ve)return!0}return!1},Lm=(xe,ve,Ye)=>{let $e=0;if(Jx(xe))return!1;const yt=xe.firstChild;if(yt){const yo=new Ys(yt,xe),is=R?R.getWhitespaceElements():{},Bl=ve||(R?R.getNonEmptyElements():null);let Ba=yt;do{if(dt(Ba)){const ev=Ba.getAttribute("data-mce-bogus");if(ev){Ba=yo.next(ev==="all");continue}const Au=Ba.nodeName.toLowerCase();if(Bl&&Bl[Au]){if(Au==="br"){$e++,Ba=yo.next();continue}return!1}if(Jx(Ba))return!1}if(Mc(Ba)||Le(Ba)&&!vl(Ba.data)&&(!(Ye!=null&&Ye.includeZwsp)||!ec(Ba.data))||Le(Ba)&&Ba.parentNode&&is[Ba.parentNode.nodeName]&&vl(Ba.data))return!1;Ba=yo.next()}while(Ba)}return $e<=1},ng=()=>e.createRange(),H4=(xe,ve,Ye)=>{let $e=ng(),yt,yo;if(xe&&ve&&xe.parentNode&&ve.parentNode){const is=xe.parentNode;return $e.setStart(is,Vc(xe)),$e.setEnd(ve.parentNode,Vc(ve)),yt=$e.extractContents(),$e=ng(),$e.setStart(ve.parentNode,Vc(ve)+1),$e.setEnd(is,Vc(xe)+1),yo=$e.extractContents(),is.insertBefore(Sh(oh,yt,R),xe),Ye?is.insertBefore(Ye,xe):is.insertBefore(ve,xe),is.insertBefore(Sh(oh,yo,R),xe),rn(xe),Ye||ve}else return},Sw=(xe,ve,Ye,$e)=>{if(ce(xe)){let yt=xe.length;const yo=[];for(;yt--;)yo[yt]=Sw(xe[yt],ve,Ye,$e);return yo}else return t.collect&&(xe===e||xe===s)&&S.push([xe,ve,Ye,$e]),P.bind(xe,ve,Ye,$e||oh)},MR=(xe,ve,Ye)=>{if(ce(xe)){let $e=xe.length;const yt=[];for(;$e--;)yt[$e]=MR(xe[$e],ve,Ye);return yt}else{if(S.length>0&&(xe===e||xe===s)){let $e=S.length;for(;$e--;){const[yt,yo,is]=S[$e];xe===yt&&(!ve||ve===yo)&&(!Ye||Ye===is)&&P.unbind(yt,yo,is)}}return P.unbind(xe,ve,Ye)}},th=(xe,ve,Ye)=>P.dispatch(xe,ve,Ye),W8=(xe,ve,Ye)=>P.dispatch(xe,ve,Ye),BR=xe=>{if(xe&&Va(xe)){const ve=xe.getAttribute("data-mce-contenteditable");return ve&&ve!=="inherit"?ve:xe.contentEditable!=="inherit"?xe.contentEditable:null}else return null},oh={doc:e,settings:t,win:s,files:a,stdMode:d,boxModel:g,styleSheetLoader:v,boundEvents:S,styles:D,schema:R,events:P,isBlock:K,root:null,clone:pe,getRoot:Pe,getViewPort:We,getRect:Ct,getSize:ct,getParent:on,getParents:fo,get:Z,getNext:ps,getPrev:fa,select:Qe,is:co,add:ft,create:qt,createHTML:Eo,createFragment:pn,remove:rn,setStyle:ke,getStyle:Be,setStyles:ye,removeAllAttribs:Mr,setAttrib:ie,setAttribs:Bo,getAttrib:ae,getPos:st,parseStyle:Ou,serializeStyle:og,addStyle:ji,loadCSS:dd,addClass:Po,removeClass:_n,hasClass:Ss,toggleClass:Yt,show:ts,hide:cl,isHidden:Im,uniqueId:ab,setHTML:vo,getOuterHTML:AR,setOuterHTML:NR,decode:Ge,encode:Gt,insertAfter:RR,replace:_w,rename:DR,findCommonAncestor:kw,run:pt,getAttribs:le,isEmpty:Lm,createRng:ng,nodeIndex:Vc,split:H4,bind:Sw,unbind:MR,fire:W8,dispatch:th,getContentEditable:BR,getContentEditableParent:xe=>{const ve=Pe();let Ye=null;for(let $e=xe;$e&&$e!==ve&&(Ye=BR($e),Ye===null);$e=$e.parentNode);return Ye},isEditable:xe=>{if(Ne(xe)){const ve=dt(xe)?xe:xe.parentElement;return Ne(ve)&&Va(ve)&&gr(X.fromDom(ve))}else return!1},destroy:()=>{if(S.length>0){let xe=S.length;for(;xe--;){const[ve,Ye,$e]=S[xe];P.unbind(ve,Ye,$e)}}Qo(a,(xe,ve)=>{v.unload(ve),delete a[ve]})},isChildOf:(xe,ve)=>xe===ve||ve.contains(xe),dumpRng:xe=>"startContainer: "+xe.startContainer.nodeName+", startOffset: "+xe.startOffset+", endContainer: "+xe.endContainer.nodeName+", endOffset: "+xe.endOffset},z4=Dh(D,t,Je(oh));return oh};un.DOM=un(document),un.nodeIndex=Vc;const wl=un.DOM,jg=0,$c=1,sc=2,_v=3;class jr{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((o,s)=>{const a=wl;let c;const d=()=>{a.remove(S),c&&(c.onerror=c.onload=c=null)},g=()=>{d(),o()},v=()=>{d(),s("Failed to load script: "+t)},S=a.uniqueId();c=document.createElement("script"),c.id=S,c.type="text/javascript",c.src=qe._addCacheSuffix(t),this.settings.referrerPolicy&&a.setAttrib(c,"referrerpolicy",this.settings.referrerPolicy),c.onload=g,c.onerror=v,(document.getElementsByTagName("head")[0]||document.body).appendChild(c)})}isDone(t){return this.states[t]===sc}markDone(t){this.states[t]=sc}add(t){const o=this;return o.queue.push(t),o.states[t]===void 0&&(o.states[t]=jg),new Promise((a,c)=>{o.scriptLoadedCallbacks[t]||(o.scriptLoadedCallbacks[t]=[]),o.scriptLoadedCallbacks[t].push({resolve:a,reject:c})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const o=this,s=(v,S)=>{an(o.scriptLoadedCallbacks,S).each(R=>{Ie(R,D=>D[v](S))}),delete o.scriptLoadedCallbacks[S]},a=v=>{const S=Et(v,R=>R.status==="rejected");return S.length>0?Promise.reject(Ho(S,({reason:R})=>ce(R)?R:[R])):Promise.resolve()},c=v=>Promise.allSettled(no(v,S=>o.states[S]===sc?(s("resolve",S),Promise.resolve()):o.states[S]===_v?(s("reject",S),Promise.reject(S)):(o.states[S]=$c,o.loadScript(S).then(()=>{o.states[S]=sc,s("resolve",S);const R=o.queue;return R.length>0?(o.queue=[],c(R).then(a)):Promise.resolve()},()=>(o.states[S]=_v,s("reject",S),Promise.reject(S)))))),d=v=>(o.loading=!0,c(v).then(S=>{o.loading=!1;const R=o.queueLoadedCallbacks.shift();return I.from(R).each(Cc),a(S)})),g=Ia(t);return o.loading?new Promise((v,S)=>{o.queueLoadedCallbacks.push(()=>{d(g).then(v,S)})}):d(g)}}jr.ScriptLoader=new jr;const _s=e=>{let t=e;return{get:()=>t,set:a=>{t=a}}},kv=(e,t)=>{const o=e.indexOf(t);return o!==-1&&e.indexOf(t,o+1)>o},Uc=e=>ue(e)&&jt(e,"raw"),qg=e=>ce(e)&&e.length>1,Wd={},Mh=_s("en"),Bh=()=>an(Wd,Mh.get()),Ta={getData:()=>Xr(Wd,e=>({...e})),setCode:e=>{e&&Mh.set(e)},getCode:()=>Mh.get(),add:(e,t)=>{let o=Wd[e];o||(Wd[e]=o={});const s=no(ze(t),a=>a.toLowerCase());Qo(t,(a,c)=>{const d=c.toLowerCase();d!==c&&kv(s,d)?(jt(t,d)||(o[d]=a),o[c]=a):o[d]=a})},translate:e=>{const t=Bh().getOr({}),o=d=>Pt(d)?Object.prototype.toString.call(d):s(d)?"":""+d,s=d=>d===""||d===null||d===void 0,a=d=>{const g=o(d);return jt(t,g)?o(t[g]):an(t,g.toLowerCase()).map(o).getOr(g)},c=d=>d.replace(/{context:\w+}$/,"");if(s(e))return"";if(Uc(e))return o(e.raw);if(qg(e)){const d=e.slice(1),g=a(e[0]).replace(/\{([0-9]+)\}/g,(v,S)=>jt(d,S)?o(d[S]):v);return c(g)}return c(a(e))},isRtl:()=>Bh().bind(e=>an(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>jt(Wd,e)},Nr=()=>{const e=[],t={},o={},s=[],a=(Z,Y)=>{const ae=Et(s,le=>le.name===Z&&le.state===Y);Ie(ae,le=>le.resolve())},c=Z=>jt(t,Z),d=Z=>jt(o,Z),g=Z=>{if(o[Z])return o[Z].instance},v=(Z,Y)=>{const ae=Ta.getCode(),le=","+(Y||"")+",";!ae||Y&&le.indexOf(","+ae+",")===-1||jr.ScriptLoader.add(t[Z]+"/langs/"+ae+".js")},S=(Z,Y)=>{Nr.languageLoad!==!1&&(c(Z)?v(Z,Y):K(Z,"loaded").then(()=>v(Z,Y)))},R=(Z,Y)=>(e.push(Y),o[Z]={instance:Y},a(Z,"added"),Y),D=Z=>{delete t[Z],delete o[Z]},P=(Z,Y)=>bt(Y)?bt(Z)?{prefix:"",resource:Y,suffix:""}:{prefix:Z.prefix,resource:Y,suffix:Z.suffix}:Y,j=(Z,Y)=>{if(t[Z])return Promise.resolve();let ae=bt(Y)?Y:Y.prefix+Y.resource+Y.suffix;ae.indexOf("/")!==0&&ae.indexOf("://")===-1&&(ae=Nr.baseURL+"/"+ae),t[Z]=ae.substring(0,ae.lastIndexOf("/"));const le=()=>(a(Z,"loaded"),Promise.resolve());return o[Z]?le():jr.ScriptLoader.add(ae).then(le)},K=(Z,Y="added")=>Y==="added"&&d(Z)||Y==="loaded"&&c(Z)?Promise.resolve():new Promise(ae=>{s.push({name:Z,state:Y,resolve:ae})});return{items:e,urls:t,lookup:o,get:g,requireLangPack:S,add:R,remove:D,createUrl:P,load:j,waitFor:K}};Nr.languageLoad=!0,Nr.baseURL="",Nr.PluginManager=Nr(),Nr.ThemeManager=Nr(),Nr.ModelManager=Nr();const Ih=e=>{const t=_s(I.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(I.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:g=>{o(),t.set(I.some(g))}}},Lh=e=>{const t=_s(I.none()),o=()=>t.get().each(g=>clearInterval(g));return{clear:()=>{o(),t.set(I.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:g=>{o(),t.set(I.some(setInterval(g,e)))}}},Cl=()=>{const e=Ih(oo);return{...e,on:o=>e.get().each(o)}},Gg=(e,t)=>{let o=null;return{cancel:()=>{Rn(o)||(clearTimeout(o),o=null)},throttle:(...c)=>{Rn(o)&&(o=setTimeout(()=>{o=null,e.apply(null,c)},t))}}},Pi=(e,t)=>{let o=null;const s=()=>{Rn(o)||(clearTimeout(o),o=null)};return{cancel:s,throttle:(...c)=>{s(),o=setTimeout(()=>{o=null,e.apply(null,c)},t)}}},rc=Je("mce-annotation"),jd=Je("data-mce-annotation"),Zc=Je("data-mce-annotation-uid"),sm=Je("data-mce-annotation-active"),_l=Je("data-mce-annotation-classes"),gf=Je("data-mce-annotation-attrs"),Kg=e=>t=>Lo(t,e),Fh=(e,t)=>{const o=e.selection.getRng(),s=X.fromDom(o.startContainer),a=X.fromDom(e.getBody()),c=t.fold(()=>"."+rc(),v=>`[${jd()}="${v}"]`),d=Oc(s,o.startOffset).getOr(s);return Fa(d,c,Kg(a)).bind(v=>ri(v,`${Zc()}`).bind(S=>ri(v,`${jd()}`).map(R=>{const D=t0(e,S);return{uid:S,name:R,elements:D}})))},qr=e=>ba(e)&&Ul(e,rc()),e0=(e,t)=>Km(e,"data-mce-bogus")||os(e,'[data-mce-bogus="all"]',Kg(t)),t0=(e,t)=>{const o=X.fromDom(e.getBody()),s=hr(o,`[${Zc()}="${t}"]`);return Et(s,a=>!e0(a,o))},Hh=(e,t)=>{const o=X.fromDom(e.getBody()),s=hr(o,`[${jd()}="${t}"]`),a={};return Ie(s,c=>{if(!e0(c,o)){const d=xa(c,Zc()),g=an(a,d).getOr([]);a[d]=g.concat([c])}}),a},Uw=(e,t)=>{const o=_s({}),s=()=>({listeners:[],previous:Cl()}),a=(D,P)=>{c(D,j=>(P(j),j))},c=(D,P)=>{const j=o.get(),K=an(j,D).getOrThunk(s),Z=P(K);j[D]=Z,o.set(j)},d=(D,P,j)=>{a(D,K=>{Ie(K.listeners,Z=>Z(!0,D,{uid:P,nodes:no(j,Y=>Y.dom)}))})},g=D=>{a(D,P=>{Ie(P.listeners,j=>j(!1,D))})},v=(D,P)=>{Ie(t0(e,D),j=>{P?An(j,sm(),"true"):ds(j,sm())})},S=Pi(()=>{const D=Dn(t.getNames());Ie(D,P=>{c(P,j=>{const K=j.previous.get();return Fh(e,I.some(P)).fold(()=>{K.each(Z=>{g(P),j.previous.clear(),v(Z,!1)})},({uid:Z,name:Y,elements:ae})=>{Zm(K,Z)||(K.each(le=>v(le,!1)),d(Y,Z,ae),j.previous.set(Z),v(Z,!0))}),{previous:j.previous,listeners:j.listeners}})})},30);return e.on("remove",()=>{S.cancel()}),e.on("NodeChange",()=>{S.throttle()}),{addListener:(D,P)=>{c(D,j=>({previous:j.previous,listeners:j.listeners.concat([P])}))}}},zh=(e,t)=>{const o=jd(),s=c=>I.from(c.attr(o)).bind(t.lookup),a=c=>{var d,g;c.attr(Zc(),null),c.attr(jd(),null),c.attr(sm(),null);const v=I.from(c.attr(gf())).map(P=>P.split(",")).getOr([]),S=I.from(c.attr(_l())).map(P=>P.split(",")).getOr([]);Ie(v,P=>c.attr(P,null));const R=(g=(d=c.attr("class"))===null||d===void 0?void 0:d.split(" "))!==null&&g!==void 0?g:[],D=fr(R,[rc()].concat(S));c.attr("class",D.length>0?D.join(" "):null),c.attr(_l(),null),c.attr(gf(),null)};e.serializer.addTempAttr(sm()),e.serializer.addAttributeFilter(o,c=>{for(const d of c)s(d).each(g=>{g.persistent===!1&&(d.name==="span"?d.unwrap():a(d))})})},o0=()=>{const e={};return{register:(a,c)=>{e[a]={name:a,settings:c}},lookup:a=>an(e,a).map(c=>c.settings),getNames:()=>ze(e)}};let pf=0;const Wc=e=>{const o=new Date().getTime(),s=Math.floor(Math.random()*1e9);return pf++,e+"_"+s+pf+String(o)},Ev=(e,t)=>{Ie(t,o=>{Ks(e,o)})},Vh=(e,t)=>{Ie(t,o=>{xd(e,o)})},$h=(e,t)=>X.fromDom(e.dom.cloneNode(t)),jc=e=>$h(e,!1),qd=e=>$h(e,!0),Uh=(e,t)=>{const o=X.fromTag(t),s=Ts(e);return Yn(o,s),o},Yg=(e,t)=>{const o=Uh(e,t);Vn(e,o);const s=Mn(e);return Zr(o,s),en(e),o},Gd=(e,t,o=Jt)=>{const s=new Ys(e,t),a=c=>{let d;do d=s[c]();while(d&&!Le(d)&&!o(d));return I.from(d).filter(Le)};return{current:()=>I.from(s.current()).filter(Le),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},Kd=(e,t)=>{const o=t||(d=>e.isBlock(d)||Jn(d)||ln(d)),s=(d,g,v,S)=>{if(Le(d)){const R=S(d,g,d.data);if(R!==-1)return I.some({container:d,offset:R})}return v().bind(R=>s(R.container,R.offset,v,S))};return{backwards:(d,g,v,S)=>{const R=Gd(d,S??e.getRoot(),o);return s(d,g,()=>R.prev().map(D=>({container:D,offset:D.length})),v).getOrNull()},forwards:(d,g,v,S)=>{const R=Gd(d,S??e.getRoot(),o);return s(d,g,()=>R.next().map(D=>({container:D,offset:0})),v).getOrNull()}}},rm=Math.round,kl=e=>e?{left:rm(e.left),top:rm(e.top),bottom:rm(e.bottom),right:rm(e.right),width:rm(e.width),height:rm(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Yd=(e,t)=>(e=kl(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Zw=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,Xg=(e,t,o)=>e>=0&&e<=Math.min(t.height,o.height)/2,Xd=(e,t)=>{const o=Math.min(t.height/2,e.height/2);return e.bottom-o<t.top?!0:e.top>t.bottom?!1:Xg(t.top-e.bottom,e,t)},hf=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:Xg(t.bottom-e.top,e,t),n0=(e,t,o)=>t>=e.left&&t<=e.right&&o>=e.top&&o<=e.bottom,s0=e=>Ir(e,(t,o)=>t.fold(()=>I.some(o),s=>{const a=Math.min(o.left,s.left),c=Math.min(o.top,s.top),d=Math.max(o.right,s.right),g=Math.max(o.bottom,s.bottom);return I.some({top:c,right:d,bottom:g,left:a,width:d-a,height:g-c})}),I.none()),r0=(e,t,o)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),a=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(o-a)*(o-a))},Rr=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),Zh=(e,t,o)=>Math.min(Math.max(e,t),o),Jd=e=>{const t=e.startContainer,o=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===o+1?t.childNodes[o]:null},Ii=(e,t)=>{if(dt(e)&&e.hasChildNodes()){const o=e.childNodes,s=Zh(t,0,o.length-1);return o[s]}else return e},a0=(e,t)=>{if(!(t<0&&dt(e)&&e.hasChildNodes()))return Ii(e,t)},Jg=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Qd=e=>bt(e)&&e.charCodeAt(0)>=768&&Jg.test(e),eu=(...e)=>t=>{for(let o=0;o<e.length;o++)if(e[o](t))return!0;return!1},Wh=(...e)=>t=>{for(let o=0;o<e.length;o++)if(!e[o](t))return!1;return!0},jh=dt,qc=ui,tu=Wu("display","block table"),Qg=Wu("float","left right"),ou=Wh(jh,qc,hs(Qg)),Tv=hs(Wu("white-space","pre pre-line pre-wrap")),ep=Le,tp=Jn,i0=un.nodeIndex,op=a0,Gc=e=>e?e.createRange():un.DOM.createRng(),nu=e=>bt(e)&&/[\r\n\t ]/.test(e),np=e=>!!e.setStart&&!!e.setEnd,l0=e=>{const t=e.startContainer,o=e.startOffset;if(nu(e.toString())&&Tv(t.parentNode)&&Le(t)){const s=t.data;if(nu(s[o-1])||nu(s[o+1]))return!0}return!1},el=e=>{const t=e.ownerDocument,o=Gc(t),s=t.createTextNode(uo),a=e.parentNode;a.insertBefore(s,e),o.setStart(s,0),o.setEnd(s,1);const c=kl(o.getBoundingClientRect());return a.removeChild(s),c},am=e=>{const t=e.startContainer,o=e.endContainer,s=e.startOffset,a=e.endOffset;if(t===o&&Le(o)&&s===0&&a===1){const c=e.cloneRange();return c.setEndAfter(o),io(c)}else return null},bf=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,io=e=>{var t;let o;const s=e.getClientRects();return s.length>0?o=kl(s[0]):o=kl(e.getBoundingClientRect()),!np(e)&&tp(e)&&bf(o)?el(e):bf(o)&&np(e)&&(t=am(e))!==null&&t!==void 0?t:o},Oa=(e,t)=>{const o=Yd(e,t);return o.width=1,o.right=o.left+1,o},xf=e=>{const t=[],o=d=>{d.height!==0&&(t.length>0&&Zw(d,t[t.length-1])||t.push(d))},s=(d,g)=>{const v=Gc(d.ownerDocument);if(g<d.data.length){if(Qd(d.data[g]))return;if(Qd(d.data[g-1])&&(v.setStart(d,g),v.setEnd(d,g+1),!l0(v))){o(Oa(io(v),!1));return}}g>0&&(v.setStart(d,g-1),v.setEnd(d,g),l0(v)||o(Oa(io(v),!1))),g<d.data.length&&(v.setStart(d,g),v.setEnd(d,g+1),l0(v)||o(Oa(io(v),!0)))},a=e.container(),c=e.offset();if(ep(a))return s(a,c),t;if(jh(a))if(e.isAtEnd()){const d=op(a,c);ep(d)&&s(d,d.data.length),ou(d)&&!tp(d)&&o(Oa(io(d),!1))}else{const d=op(a,c);if(ep(d)&&s(d,0),ou(d)&&e.isAtEnd())return o(Oa(io(d),!1)),t;const g=op(e.container(),e.offset()-1);ou(g)&&!tp(g)&&(tu(g)||tu(d)||!ou(d))&&o(Oa(io(g),!1)),ou(d)&&o(Oa(io(d),!0))}return t},Ce=(e,t,o)=>{const s=()=>(ep(e),t===0),a=()=>ep(e)?t>=e.data.length:t>=e.childNodes.length,c=()=>{const R=Gc(e.ownerDocument);return R.setStart(e,t),R.setEnd(e,t),R},d=()=>(o||(o=xf(Ce(e,t))),o),g=()=>d().length>0,v=R=>R&&e===R.container()&&t===R.offset(),S=R=>op(e,R?t-1:t);return{container:Je(e),offset:Je(t),toRange:c,getClientRects:d,isVisible:g,isAtStart:s,isAtEnd:a,isEqual:v,getNode:S}};Ce.fromRangeStart=e=>Ce(e.startContainer,e.startOffset),Ce.fromRangeEnd=e=>Ce(e.endContainer,e.endOffset),Ce.after=e=>Ce(e.parentNode,i0(e)+1),Ce.before=e=>Ce(e.parentNode,i0(e)),Ce.isAbove=(e,t)=>Vr(Ln(t.getClientRects()),mt(e.getClientRects()),Xd).getOr(!1),Ce.isBelow=(e,t)=>Vr(mt(t.getClientRects()),Ln(e.getClientRects()),hf).getOr(!1),Ce.isAtStart=e=>e?e.isAtStart():!1,Ce.isAtEnd=e=>e?e.isAtEnd():!1,Ce.isTextPosition=e=>e?Le(e.container()):!1,Ce.isElementPosition=e=>!Ce.isTextPosition(e);const qh=(e,t)=>{Le(t)&&t.data.length===0&&e.remove(t)},c0=(e,t,o)=>{t.insertNode(o),qh(e,o.previousSibling),qh(e,o.nextSibling)},Ov=(e,t,o)=>{const s=I.from(o.firstChild),a=I.from(o.lastChild);t.insertNode(o),s.each(c=>qh(e,c.previousSibling)),a.each(c=>qh(e,c.nextSibling))},vf=(e,t,o)=>{Sg(o)?Ov(e,t,o):c0(e,t,o)},Li=Le,yf=bl,Gh=un.nodeIndex,d0=e=>{const t=e.parentNode;return yf(t)?d0(t):t},sp=e=>e?ml(e.childNodes,(t,o)=>(yf(o)&&o.nodeName!=="BR"?t=t.concat(sp(o)):t.push(o),t),[]):[],Kh=(e,t)=>{let o=e;for(;(o=o.previousSibling)&&Li(o);)t+=o.data.length;return t},u0=e=>t=>e===t,Av=e=>{let t,o;t=sp(d0(e)),o=Sr(t,u0(e),e),t=t.slice(0,o+1);const s=ml(t,(a,c,d)=>(Li(c)&&Li(t[d-1])&&a++,a),0);return t=hd(t,$a([e.nodeName])),o=Sr(t,u0(e),e),o-s},Yh=e=>(Li(e)?"text()":e.nodeName.toLowerCase())+"["+Av(e)+"]",Nv=(e,t,o)=>{const s=[];for(let a=t.parentNode;a&&a!==e;a=a.parentNode)s.push(a);return s},Rv=(e,t)=>{let o=[],s=t.container(),a=t.offset(),c;if(Li(s))c=Kh(s,a);else{const g=s.childNodes;a>=g.length?(c="after",a=g.length-1):c="before",s=g[a]}o.push(Yh(s));let d=Nv(e,s);return d=hd(d,hs(bl)),o=o.concat(zm(d,g=>Yh(g))),o.reverse().join("/")+","+c},Ww=(e,t,o)=>{let s=sp(e);return s=hd(s,(a,c)=>!Li(a)||!Li(s[c-1])),s=hd(s,$a([t])),s[o]},nt=(e,t)=>{let o=e,s=0;for(;Li(o);){const a=o.data.length;if(t>=s&&t<=s+a){e=o,t=t-s;break}if(!Li(o.nextSibling)){e=o,t=a;break}s+=a,o=o.nextSibling}return Li(e)&&t>e.data.length&&(t=e.data.length),Ce(e,t)},zs=(e,t)=>{if(!t)return null;const o=t.split(","),s=o[0].split("/"),a=o.length>1?o[1]:"before",c=ml(s,(d,g)=>{const v=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(g);return v?(v[1]==="text()"&&(v[1]="#text"),Ww(d,v[1],parseInt(v[2],10))):null},e);if(!c)return null;if(!Li(c)&&c.parentNode){let d;return a==="after"?d=Gh(c)+1:d=Gh(c),Ce(c.parentNode,d)}return nt(c,parseInt(a,10))},wf=ln,Qs=(e,t,o)=>{let s=e(t.data.slice(0,o)).length;for(let a=t.previousSibling;a&&Le(a);a=a.previousSibling)s+=e(a.data).length;return s},Kc=(e,t,o,s,a)=>{const c=a?s.startContainer:s.endContainer;let d=a?s.startOffset:s.endOffset;const g=[],v=e.getRoot();if(Le(c))g.push(o?Qs(t,c,d):d);else{let S=0;const R=c.childNodes;d>=R.length&&R.length&&(S=1,d=Math.max(0,R.length-1)),g.push(e.nodeIndex(R[d],o)+S)}for(let S=c;S&&S!==v;S=S.parentNode)g.push(e.nodeIndex(S,o));return g},Cf=(e,t,o,s)=>{const a=t.dom,c=Kc(a,e,o,s,!0),d=t.isForward(),g=Tb(s)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:c,forward:d,...g};{const v=Kc(a,e,o,s,!1);return{start:c,end:v,forward:d,...g}}},Xh=(e,t,o)=>{let s=0;return qe.each(e.select(t),a=>{if(a.getAttribute("data-mce-bogus")!=="all"){if(a===o)return!1;s++;return}}),s},rp=(e,t)=>{let o=t?e.startContainer:e.endContainer,s=t?e.startOffset:e.endOffset;if(dt(o)&&o.nodeName==="TR"){const a=o.childNodes;o=a[Math.min(t?s:s-1,a.length-1)],o&&(s=t?0:o.childNodes.length,t?e.setStart(o,s):e.setEnd(o,s))}},f=e=>(rp(e,!0),rp(e,!1),e),h=(e,t)=>{if(dt(e)&&(e=Ii(e,t),wf(e)))return e;if(Or(e)){Le(e)&&Dd(e)&&(e=e.parentNode);let o=e.previousSibling;if(wf(o)||(o=e.nextSibling,wf(o)))return o}},y=e=>h(e.startContainer,e.startOffset)||h(e.endContainer,e.endOffset),C=(e,t,o)=>{const s=o.getNode(),a=o.getRng();if(s.nodeName==="IMG"||wf(s)){const d=s.nodeName;return{name:d,index:Xh(o.dom,d,s)}}const c=y(a);if(c){const d=c.tagName;return{name:d,index:Xh(o.dom,d,c)}}return Cf(e,o,t,a)},O=e=>{const t=e.getRng();return{start:Rv(e.dom.getRoot(),Ce.fromRangeStart(t)),end:Rv(e.dom.getRoot(),Ce.fromRangeEnd(t)),forward:e.isForward()}},A=e=>({rng:e.getRng(),forward:e.isForward()}),M=(e,t,o)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return o?e.create("span",s,"&#xFEFF;"):e.create("span",s)},F=(e,t)=>{const o=e.dom;let s=e.getRng();const a=o.uniqueId(),c=e.isCollapsed(),d=e.getNode(),g=d.nodeName,v=e.isForward();if(g==="IMG")return{name:g,index:Xh(o,g,d)};const S=f(s.cloneRange());if(!c){S.collapse(!1);const D=M(o,a+"_end",t);vf(o,S,D)}s=f(s),s.collapse(!0);const R=M(o,a+"_start",t);return vf(o,s,R),e.moveToBookmark({id:a,keep:!0,forward:v}),{id:a,forward:v}},$=(e,t,o=!1)=>t===2?C(Fs,o,e):t===3?O(e):t?A(e):F(e,!1),J=it(C,bo,!0),oe=e=>{const t=c=>c(e),o=Je(e),s=()=>a,a={tag:!0,inner:e,fold:(c,d)=>d(e),isValue:kn,isError:Jt,map:c=>se.value(c(e)),mapError:s,bind:t,exists:t,forall:t,getOr:o,or:s,getOrThunk:o,orThunk:s,getOrDie:o,each:c=>{c(e)},toOptional:()=>I.some(e)};return a},ee=e=>{const t=()=>o,o={tag:!1,inner:e,fold:(s,a)=>s(e),isValue:Jt,isError:kn,map:t,mapError:s=>se.error(s(e)),bind:t,exists:Jt,forall:kn,getOr:bo,or:bo,getOrThunk:xt,orThunk:xt,getOrDie:Ke(String(e)),each:oo,toOptional:I.none};return o},se={value:oe,error:ee,fromOption:(e,t)=>e.fold(()=>ee(t),oe)},me={generate:e=>{if(!ce(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],o={};return Ie(e,(s,a)=>{const c=ze(s);if(c.length!==1)throw new Error("one and only one name per case");const d=c[0],g=s[d];if(o[d]!==void 0)throw new Error("duplicate key detected:"+d);if(d==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ce(g))throw new Error("case arguments must be an array");t.push(d),o[d]=(...v)=>{const S=v.length;if(S!==g.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+g.length+" ("+g+"), got "+S);return{fold:(...D)=>{if(D.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+D.length);return D[a].apply(null,v)},match:D=>{const P=ze(D);if(t.length!==P.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+P.join(","));if(!ei(t,K=>Io(P,K)))throw new Error("Not all branches were specified when using match. Specified: "+P.join(", ")+`
Required: `+t.join(", "));return D[d].apply(null,v)},log:D=>{console.log(D,{constructors:t,constructor:d,params:v})}}}}),o}};me.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Se=e=>{const t=[],o=[];return Ie(e,s=>{s.fold(a=>{t.push(a)},a=>{o.push(a)})}),{errors:t,values:o}},De=e=>e.type==="inline-command"||e.type==="inline-format",Fe=e=>e.type==="block-command"||e.type==="block-format",Me=e=>{const t=s=>se.error({message:s,pattern:e}),o=(s,a,c)=>{if(e.format!==void 0){let d;if(ce(e.format)){if(!ei(e.format,bt))return t(s+" pattern has non-string items in the `format` array");d=e.format}else if(bt(e.format))d=[e.format];else return t(s+" pattern has non-string `format` parameter");return se.value(a(d))}else return e.cmd!==void 0?bt(e.cmd)?se.value(c(e.cmd,e.value)):t(s+" pattern has non-string `cmd` parameter"):t(s+" pattern is missing both `format` and `cmd` parameters")};if(!ue(e))return t("Raw pattern is not an object");if(!bt(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!bt(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let s=e.start,a=e.end;return a.length===0&&(a=s,s=""),o("Inline",c=>({type:"inline-format",start:s,end:a,format:c}),(c,d)=>({type:"inline-command",start:s,end:a,cmd:c,value:d}))}else return e.replacement!==void 0?bt(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):se.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?t("Block pattern has empty `start` parameter"):o("Block",s=>({type:"block-format",start:e.start,format:s[0]}),(s,a)=>({type:"block-command",start:e.start,cmd:s,value:a}))},He=e=>Et(e,Fe),Ze=e=>Et(e,De),et=(e,t)=>({inlinePatterns:Ze(e),blockPatterns:He(e),dynamicPatternsLookup:t}),At=e=>{const t=Se(no(e,Me));return Ie(t.errors,o=>console.error(o.message,o.pattern)),t.values},Nt=e=>t=>{const o=e(t);return At(o)},No=To().deviceType,Vt=No.isTouch(),ro=un.DOM,to=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Ir(t,(o,s)=>{const a=s.split("="),c=a[0],d=a.length>1?a[1]:c;return o[Hl(c)]=Hl(d),o},{})},Vo=e=>eo(e,RegExp),je=e=>t=>t.options.get(e),er=e=>bt(e)||ue(e),ks=(e,t="")=>o=>{const s=bt(o);if(s)if(o.indexOf("=")!==-1){const a=to(o);return{value:an(a,e.id).getOr(t),valid:s}}else return{value:o,valid:s};else return{valid:!1,message:"Must be a string."}},Aa=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:ks(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:ks(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:o=>{const s=bt(o)&&zr(o);return s?{value:o,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:o=>{const s=Io(["block","linebreak","invert","default"],o);return s?{value:o,valid:s}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:o=>yi(o)?{valid:!0,value:o}:bt(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:o=>{const s=o===!1||bt(o)||ao(o,bt);return s?bt(o)?{value:no(o.split(","),Hl),valid:s}:ce(o)?{value:o,valid:s}:o===!1?{value:[],valid:s}:{value:o,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Qh(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:o=>{const s=bt(o)||ao(o,bt);return s?{value:ce(o)?o:no(o.split(","),Hl),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:o=>{const s=yi(o)||bt(o);return s?o===!1||No.isiPhone()||No.isiPad()?{value:"",valid:s}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!Vt}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:o=>o===!1||bt(o)||Pt(o),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:o=>{const s=o===!1||bt(o);return s?{value:o===!1?"":o,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:er}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:er}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:er}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:o=>bt(o)||o===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:o=>ao(o,ue)||o===!1?{value:At(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:o=>Pt(o)?{value:Nt(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:o=>ao(o,Vo)?{value:o,valid:!0}:Vo(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!1}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:o=>{const s=Io(["inherited","collapsed","expanded"],o);return s?{value:o,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:o=>{const s=Io(["inherited","collapsed","expanded"],o);return s?{value:o,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("force_hex_color",{processor:o=>{const s=["always","rgb_only","off"],a=Io(s,o);return a?{value:o,valid:a}:{valid:!1,message:`Must be one of: ${s.join(", ")}.`}},default:"off"}),t("sandbox_iframes",{processor:"boolean",default:!1}),t("convert_unsafe_embeds",{processor:"boolean",default:!1}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:Ta.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:ro.getAttrib(e.getElement(),"placeholder")})})},Fo=je("iframe_attrs"),Vs=je("doctype"),Yc=je("document_base_url"),ap=je("body_id"),ip=je("body_class"),_f=je("content_security_policy"),lp=je("br_in_pre"),$s=je("forced_root_block"),m0=je("forced_root_block_attrs"),W4=je("newline_behavior"),jw=je("br_newline_selector"),j4=je("no_newline_selector"),IR=je("keep_styles"),LR=je("end_container_on_empty_block"),Fi=je("automatic_uploads"),la=je("images_reuse_filename"),Jh=je("images_replace_blob_uris"),q4=je("icons"),FR=je("icons_url"),wo=je("images_upload_url"),HR=je("images_upload_base_path"),G4=je("images_upload_credentials"),qw=je("images_upload_handler"),zR=je("content_css_cors"),Gw=je("referrer_policy"),K4=je("language"),VR=je("language_url"),Dv=je("indent_use_margin"),Kw=je("indentation"),Y4=je("content_css"),$R=je("content_style"),X4=je("font_css"),UR=je("directionality"),Mt=je("inline_boundaries_selector"),Yw=je("object_resizing"),f0=je("resize_img_proportional"),Xw=je("placeholder"),Jw=je("event_root"),J4=je("service_message"),cp=je("theme"),Q4=je("theme_url"),Qw=je("model"),ZR=je("model_url"),Oo=je("inline_boundaries"),WR=je("formats"),im=je("preview_styles"),su=je("format_empty_lines"),Mv=je("format_noneditable_selector"),Hi=je("custom_ui_selector"),Qh=je("inline"),g0=je("hidden_input"),Bv=je("submit_patch"),e1=je("add_form_submit_trigger"),jR=je("add_unload_trigger"),qR=je("custom_undo_redo_levels"),GR=je("disable_nodechange"),e3=je("readonly"),So=je("editable_root"),ac=je("content_css_cors"),ru=je("plugins"),KR=je("external_plugins"),p0=je("block_unsupported_drop"),Ro=je("visual"),t3=je("visual_table_class"),Pv=je("visual_anchor_class"),YR=je("iframe_aria_text"),t1=je("setup"),dp=je("init_instance_callback"),o3=je("urlconverter_callback"),XR=je("auto_focus"),JR=je("browser_spellcheck"),h0=je("protect"),o1=je("paste_block_drop"),Iv=je("paste_data_images"),n3=je("paste_preprocess"),QR=je("paste_postprocess"),s3=je("newdocument_content"),eD=je("paste_webkit_styles"),r3=je("paste_remove_styles_if_webkit"),eC=je("paste_merge_formats"),tC=je("smart_paste"),oC=je("paste_as_text"),a3=je("paste_tab_spaces"),i3=je("allow_html_data_urls"),l3=je("text_patterns"),Lv=je("text_patterns_lookup"),nC=je("noneditable_class"),c3=je("editable_class"),d3=je("noneditable_regexp"),u3=je("preserve_cdata"),m3=je("highlight_on_focus"),Fv=je("xss_sanitization"),tD=je("init_content_sync"),oD=e=>e.options.isSet("text_patterns_lookup"),Hv=e=>qe.explode(e.options.get("font_size_style_values")),f3=e=>qe.explode(e.options.get("font_size_classes")),g3=e=>e.options.get("encoding")==="xml",sC=e=>qe.explode(e.options.get("images_file_types")),nD=je("table_tab_navigation"),sD=je("details_initial_state"),rD=je("details_serialized_state"),aD=je("force_hex_color"),rC=je("sandbox_iframes"),p3=dt,aC=Le,b0=e=>{const t=e.parentNode;t&&t.removeChild(e)},h3=e=>{const t=Fs(e);return{count:e.length-t.length,text:t}},zv=e=>{let t;for(;(t=e.data.lastIndexOf(Ns))!==-1;)e.deleteData(t,1)},b3=(e,t)=>(au(e),t),x3=(e,t)=>{const o=h3(e.data.substr(0,t.offset())),s=h3(e.data.substr(t.offset()));return(o.text+s.text).length>0?(zv(e),Ce(e,t.offset()-o.count)):t},v3=(e,t)=>{const o=t.container(),s=_c(Dt(o.childNodes),e).map(a=>a<t.offset()?Ce(o,t.offset()-1):t).getOr(t);return au(e),s},y3=(e,t)=>aC(e)&&t.container()===e?x3(e,t):b3(e,t),iD=(e,t)=>t.container()===e.parentNode?v3(e,t):b3(e,t),lD=(e,t)=>Ce.isTextPosition(t)?y3(e,t):iD(e,t),au=e=>{p3(e)&&Or(e)&&(Ag(e)?e.removeAttribute("data-mce-caret"):b0(e)),aC(e)&&(zv(e),e.data.length===0&&b0(e))},w3=ln,C3=ut,_3=tf,k3="*[contentEditable=false],video,audio,embed,object",S3=(e,t,o)=>{const s=Yd(t.getBoundingClientRect(),o);let a,c;if(e.tagName==="BODY"){const g=e.ownerDocument.documentElement;a=e.scrollLeft||g.scrollLeft,c=e.scrollTop||g.scrollTop}else{const g=e.getBoundingClientRect();a=e.scrollLeft-g.left,c=e.scrollTop-g.top}s.left+=a,s.right+=a,s.top+=c,s.bottom+=c,s.width=1;let d=t.offsetWidth-t.clientWidth;return d>0&&(o&&(d*=-1),s.left+=d,s.right+=d),s},cD=e=>{var t,o;const s=hr(X.fromDom(e),k3);for(let a=0;a<s.length;a++){const c=s[a].dom;let d=c.previousSibling;if(qa(d)){const g=d.data;g.length===1?(t=d.parentNode)===null||t===void 0||t.removeChild(d):d.deleteData(g.length-1,1)}d=c.nextSibling,Oi(d)&&(d.data.length===1?(o=d.parentNode)===null||o===void 0||o.removeChild(d):d.deleteData(0,1))}},Vv=(e,t,o,s)=>{const a=Cl();let c,d;const g=$s(e),v=e.dom,S=(Z,Y)=>{let ae;if(R(),_3(Y))return null;if(o(Y)){const le=Xs(g,Y,Z),ie=S3(t,Y,Z);v.setStyle(le,"top",ie.top),d=le;const pe=v.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});v.setStyles(pe,{...ie}),v.add(t,pe),a.set({caret:pe,element:Y,before:Z}),Z&&v.addClass(pe,"mce-visual-caret-before"),D(),ae=Y.ownerDocument.createRange(),ae.setStart(le,0),ae.setEnd(le,0)}else return d=ph(Y,Z),ae=Y.ownerDocument.createRange(),n1(d.nextSibling)?(ae.setStart(d,0),ae.setEnd(d,0)):(ae.setStart(d,1),ae.setEnd(d,1)),ae;return ae},R=()=>{cD(t),d&&(au(d),d=null),a.on(Z=>{v.remove(Z.caret),a.clear()}),c&&(clearInterval(c),c=void 0)},D=()=>{c=setInterval(()=>{a.on(Z=>{s()?v.toggleClass(Z.caret,"mce-visual-caret-hidden"):v.addClass(Z.caret,"mce-visual-caret-hidden")})},500)};return{show:S,hide:R,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{a.on(Z=>{const Y=S3(t,Z.element,Z.before);v.setStyles(Z.caret,{...Y})})},destroy:()=>clearInterval(c)}},iC=()=>Do.browser.isFirefox(),n1=e=>w3(e)||C3(e),x0=e=>(n1(e)||xl(e)&&iC())&&lh(X.fromDom(e)).exists(gr),dD=Ua,lC=ln,uD=ut,E3=Wu("display","block table table-cell table-caption list-item"),T3=Or,cC=Dd,mD=dt,O3=Le,A3=ui,s1=e=>e>0,up=e=>e<0,$v=(e,t)=>{let o;for(;o=e(t);)if(!cC(o))return o;return null},v0=(e,t,o,s,a)=>{const c=new Ys(e,s),d=lC(e)||cC(e);let g;if(up(t)){if(d&&(g=$v(c.prev.bind(c),!0),o(g)))return g;for(;g=$v(c.prev.bind(c),a);)if(o(g))return g}if(s1(t)){if(d&&(g=$v(c.next.bind(c),!0),o(g)))return g;for(;g=$v(c.next.bind(c),a);)if(o(g))return g}return null},fD=(e,t)=>{const o=a=>dD(a.dom),s=a=>a.dom===t;return Ti(X.fromDom(e),o,s).map(a=>a.dom).getOr(t)},kf=(e,t)=>{for(;e&&e!==t;){if(E3(e))return e;e=e.parentNode}return null},iu=(e,t,o)=>kf(e.container(),o)===kf(t.container(),o),dC=(e,t)=>{if(!t)return I.none();const o=t.container(),s=t.offset();return mD(o)?I.from(o.childNodes[s+e]):I.none()},N3=(e,t)=>{var o;const a=((o=t.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(a.setStartBefore(t),a.setEndBefore(t)):(a.setStartAfter(t),a.setEndAfter(t)),a},gD=(e,t,o)=>kf(t,e)===kf(o,e),R3=(e,t,o)=>{const s=e?"previousSibling":"nextSibling";let a=o;for(;a&&a!==t;){let c=a[s];if(c&&T3(c)&&(c=c[s]),lC(c)||uD(c)){if(gD(t,c,a))return c;break}if(A3(c))break;a=a.parentNode}return null},y0=it(N3,!0),w0=it(N3,!1),vt=(e,t,o)=>{let s;const a=it(R3,!0,t),c=it(R3,!1,t),d=o.startContainer,g=o.startOffset;if(Dd(d)){const v=O3(d)?d.parentNode:d,S=v.getAttribute("data-mce-caret");if(S==="before"&&(s=v.nextSibling,x0(s)))return y0(s);if(S==="after"&&(s=v.previousSibling,x0(s)))return w0(s)}if(!o.collapsed)return o;if(Le(d)){if(T3(d)){if(e===1){if(s=c(d),s)return y0(s);if(s=a(d),s)return w0(s)}if(e===-1){if(s=a(d),s)return w0(s);if(s=c(d),s)return y0(s)}return o}if(qa(d)&&g>=d.data.length-1)return e===1&&(s=c(d),s)?y0(s):o;if(Oi(d)&&g<=1)return e===-1&&(s=a(d),s)?w0(s):o;if(g===d.data.length)return s=c(d),s?y0(s):o;if(g===0)return s=a(d),s?w0(s):o}return o},uC=(e,t)=>dC(e?0:-1,t).filter(lC),r1=(e,t,o)=>{const s=vt(e,t,o);return e===-1?Ce.fromRangeStart(s):Ce.fromRangeEnd(s)},Uv=e=>I.from(e.getNode()).map(X.fromDom),mC=e=>I.from(e.getNode(!0)).map(X.fromDom),fC=(e,t)=>{let o=t;for(;o=e(o);)if(o.isVisible())return o;return o},mp=(e,t)=>{const o=iu(e,t);return!o&&Jn(e.getNode())?!0:o};var wr;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(wr||(wr={}));const pD=ln,Rt=Le,Qt=dt,Zv=Jn,a1=ui,D3=ra,Wv=Pc,It=(e,t)=>{const o=[];let s=e;for(;s&&s!==t;)o.push(s),s=s.parentNode;return o},i1=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,gC=(e,t)=>{if(s1(e)){if(a1(t.previousSibling)&&!Rt(t.previousSibling))return Ce.before(t);if(Rt(t))return Ce(t,0)}if(up(e)){if(a1(t.nextSibling)&&!Rt(t.nextSibling))return Ce.after(t);if(Rt(t))return Ce(t,t.data.length)}return up(e)?Zv(t)?Ce.before(t):Ce.after(t):Ce.before(t)},M3=(e,t)=>{const o=t.nextSibling;return o&&a1(o)?Rt(o)?Ce(o,0):Ce.before(o):pC(wr.Forwards,Ce.after(t),e)},pC=(e,t,o)=>{let s,a,c,d;if(!Qt(o)||!t)return null;if(t.isEqual(Ce.after(o))&&o.lastChild){if(d=Ce.after(o.lastChild),up(e)&&a1(o.lastChild)&&Qt(o.lastChild))return Zv(o.lastChild)?Ce.before(o.lastChild):d}else d=t;const g=d.container();let v=d.offset();if(Rt(g)){if(up(e)&&v>0)return Ce(g,--v);if(s1(e)&&v<g.length)return Ce(g,++v);s=g}else{if(up(e)&&v>0&&(a=i1(g,v-1),a1(a)))return!D3(a)&&(c=v0(a,e,Wv,a),c)?Rt(c)?Ce(c,c.data.length):Ce.after(c):Rt(a)?Ce(a,a.data.length):Ce.before(a);if(s1(e)&&v<g.childNodes.length&&(a=i1(g,v),a1(a)))return Zv(a)?M3(o,a):!D3(a)&&(c=v0(a,e,Wv,a),c)?Rt(c)?Ce(c,0):Ce.before(c):Rt(a)?Ce(a,0):Ce.after(a);s=a||d.getNode()}if(s&&(s1(e)&&d.isAtEnd()||up(e)&&d.isAtStart())&&(s=v0(s,e,kn,o,!0),Wv(s,o)))return gC(e,s);a=s&&v0(s,e,Wv,o);const S=Ws(Et(It(g,o),pD));return S&&(!a||!S.contains(a))?(s1(e)?d=Ce.after(S):d=Ce.before(S),d):a?gC(e,a):null},lu=e=>({next:t=>pC(wr.Forwards,t,e),prev:t=>pC(wr.Backwards,t,e)}),B3=(e,t,o)=>{const s=e?Ce.before(o):Ce.after(o);return tl(e,t,s)},hD=e=>Jn(e)?Ce.before(e):Ce.after(e),so=e=>Ce.isTextPosition(e)?e.offset()===0:ui(e.getNode()),hC=e=>{if(Ce.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return ui(e.getNode(!0))},C0=(e,t)=>!Ce.isTextPosition(e)&&!Ce.isTextPosition(t)&&e.getNode()===t.getNode(!0),P3=e=>!Ce.isTextPosition(e)&&Jn(e.getNode()),I3=(e,t,o)=>e?!C0(t,o)&&!P3(t)&&hC(t)&&so(o):!C0(o,t)&&so(t)&&hC(o),tl=(e,t,o)=>{const s=lu(t);return I.from(e?s.next(o):s.prev(o))},fp=(e,t,o)=>tl(e,t,o).bind(s=>iu(o,s,t)&&I3(e,o,s)?tl(e,t,s):I.some(s)),bC=(e,t,o,s)=>fp(e,t,o).bind(a=>s(a)?bC(e,t,a,s):I.some(a)),gp=(e,t)=>{const o=e?t.firstChild:t.lastChild;return Le(o)?I.some(Ce(o,e?0:o.data.length)):o?ui(o)?I.some(e?Ce.before(o):hD(o)):B3(e,t,o):I.none()},fi=it(tl,!0),zi=it(tl,!1),Na=it(gp,!0),ic=it(gp,!1),xC="_mce_caret",Vi=e=>dt(e)&&e.id===xC,lm=(e,t)=>{let o=t;for(;o&&o!==e;){if(Vi(o))return o;o=o.parentNode}return null},bD=e=>bt(e.start),xD=e=>jt(e,"rng"),vD=e=>jt(e,"id"),L3=e=>jt(e,"name"),vC=e=>qe.isArray(e.start),cu=e=>!L3(e)&&yi(e.forward)?e.forward:!0,yC=(e,t)=>(dt(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),F3=(e,t)=>{const o=I.from(zs(e.getRoot(),t.start)),s=I.from(zs(e.getRoot(),t.end));return Vr(o,s,(a,c)=>{const d=e.createRng();return d.setStart(a.container(),a.offset()),d.setEnd(c.container(),c.offset()),{range:d,forward:cu(t)}})},yD=(e,t)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Ns);e.appendChild(a),t.setStart(a,0),t.setEnd(a,0)},wD=e=>!e.hasChildNodes(),H3=(e,t)=>ic(e).fold(Jt,o=>(t.setStart(o.container(),o.offset()),t.setEnd(o.container(),o.offset()),!0)),wC=(e,t,o)=>wD(t)&&lm(e,t)?(yD(t,o),!0):!1,Ra=(e,t,o,s)=>{const a=o[t?"start":"end"],c=e.getRoot();if(a){let d=c,g=a[0];for(let v=a.length-1;d&&v>=1;v--){const S=d.childNodes;if(wC(c,d,s))return!0;if(a[v]>S.length-1)return wC(c,d,s)?!0:H3(d,s);d=S[a[v]]}Le(d)&&(g=Math.min(a[0],d.data.length)),dt(d)&&(g=Math.min(a[0],d.childNodes.length)),t?s.setStart(d,g):s.setEnd(d,g)}return!0},CC=e=>Le(e)&&e.data.length>0,Sf=(e,t,o)=>{const s=e.get(o.id+"_"+t),a=s==null?void 0:s.parentNode,c=o.keep;if(s&&a){let d,g;if(t==="start"?c?s.hasChildNodes()?(d=s.firstChild,g=1):CC(s.nextSibling)?(d=s.nextSibling,g=0):CC(s.previousSibling)?(d=s.previousSibling,g=s.previousSibling.data.length):(d=a,g=e.nodeIndex(s)+1):(d=a,g=e.nodeIndex(s)):c?s.hasChildNodes()?(d=s.firstChild,g=1):CC(s.previousSibling)?(d=s.previousSibling,g=s.previousSibling.data.length):(d=a,g=e.nodeIndex(s)):(d=a,g=e.nodeIndex(s)),!c){const v=s.previousSibling,S=s.nextSibling;qe.each(qe.grep(s.childNodes),D=>{Le(D)&&(D.data=D.data.replace(/\uFEFF/g,""))});let R;for(;R=e.get(o.id+"_"+t);)e.remove(R,!0);if(Le(S)&&Le(v)&&!Do.browser.isOpera()){const D=v.data.length;v.appendData(S.data),e.remove(S),d=v,g=D}}return I.some(Ce(d,g))}else return I.none()},jn=(e,t)=>{const o=e.createRng();return Ra(e,!0,t,o)&&Ra(e,!1,t,o)?I.some({range:o,forward:cu(t)}):I.none()},jv=(e,t)=>{const o=Sf(e,"start",t),s=Sf(e,"end",t);return Vr(o,s.or(o),(a,c)=>{const d=e.createRng();return d.setStart(yC(e,a.container()),a.offset()),d.setEnd(yC(e,c.container()),c.offset()),{range:d,forward:cu(t)}})},Dr=(e,t)=>I.from(e.select(t.name)[t.index]).map(o=>{const s=e.createRng();return s.selectNode(o),{range:s,forward:!0}}),cm=(e,t)=>{const o=e.dom;if(t){if(vC(t))return jn(o,t);if(bD(t))return F3(o,t);if(vD(t))return jv(o,t);if(L3(t))return Dr(o,t);if(xD(t))return I.some({range:t.rng,forward:cu(t)})}return I.none()},Zo=(e,t,o)=>$(e,t,o),z3=(e,t)=>{cm(e,t).each(({range:o,forward:s})=>{e.setRng(o,s)})},ol=e=>dt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",qv=(e=>t=>e===t)(uo),l1=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Ya=e=>!l1(e)&&!qv(e)&&!Ad(e),Sl=e=>{const t=[];if(e)for(let o=0;o<e.rangeCount;o++)t.push(e.getRangeAt(o));return t},CD=e=>Ho(e,t=>{const o=Jd(t);return o?[X.fromDom(o)]:[]}),_C=e=>Sl(e).length>1,kC=e=>Et(CD(e),Yu),_D=e=>hr(e,"td[data-mce-selected],th[data-mce-selected]"),V3=(e,t)=>{const o=_D(t);return o.length>0?o:kC(e)},du=e=>V3(Sl(e.selection.getSel()),X.fromDom(e.getBody())),Ef=(e,t)=>wa(e,"table",t),SC=e=>{const t=e.startContainer,o=e.startOffset;return Le(t)?o===0?I.some(X.fromDom(t)):I.none():I.from(t.childNodes[o]).map(X.fromDom)},kD=e=>{const t=e.endContainer,o=e.endOffset;return Le(t)?o===t.data.length?I.some(X.fromDom(t)):I.none():I.from(t.childNodes[o-1]).map(X.fromDom)},lc=e=>Xm(e).fold(Je([e]),t=>[e].concat(lc(t))),EC=e=>Os(e).fold(Je([e]),t=>po(t)==="br"?va(t).map(o=>[e].concat(EC(o))).getOr([]):[e].concat(EC(t))),TC=(e,t)=>Vr(SC(t),kD(t),(o,s)=>{const a=Ao(lc(e),it(Lo,o)),c=Ao(EC(e),it(Lo,s));return a.isSome()&&c.isSome()}).getOr(!1),$i=(e,t,o,s)=>{const a=o,c=new Ys(o,a),d=wi(e.schema.getMoveCaretBeforeOnEnterElements(),(v,S)=>!Io(["td","th","table"],S.toLowerCase()));let g=o;do{if(Le(g)&&qe.trim(g.data).length!==0){s?t.setStart(g,0):t.setEnd(g,g.data.length);return}if(d[g.nodeName]){s?t.setStartBefore(g):g.nodeName==="BR"?t.setEndBefore(g):t.setEndAfter(g);return}}while(g=s?c.next():c.prev());a.nodeName==="BODY"&&(s?t.setStart(a,0):t.setEnd(a,a.childNodes.length))},Tf=e=>{const t=e.selection.getSel();return Ne(t)&&t.rangeCount>0},Gv=(e,t)=>{const o=du(e);o.length>0?Ie(o,s=>{const a=s.dom,c=e.dom.createRng();c.setStartBefore(a),c.setEndAfter(a),t(c,!0)}):t(e.selection.getRng(),!1)},El=(e,t,o)=>{const s=F(e,t);o(s),e.moveToBookmark(s)},$o=e=>E(e==null?void 0:e.nodeType),Of=e=>dt(e)&&!ol(e)&&!Vi(e)&&!bl(e),Kv=(e,t)=>{if(Of(t)&&!/^(TD|TH)$/.test(t.nodeName)){const o=e.getAttrib(t,"data-mce-selected"),s=parseInt(o,10);return!isNaN(s)&&s>0}else return!1},OC=(e,t,o)=>{const{selection:s,dom:a}=e,c=s.getNode(),d=ln(c);El(s,!0,()=>{t()}),d&&ln(c)&&a.isChildOf(c,e.getBody())?e.selection.select(c):o(s.getStart())&&AC(a,s)},AC=(e,t)=>{var o,s;const a=t.getRng(),{startContainer:c,startOffset:d}=a,g=t.getNode();if(!Kv(e,g)&&dt(c)){const v=c.childNodes,S=e.getRoot();let R;if(d<v.length){const D=v[d];R=new Ys(D,(o=e.getParent(D,e.isBlock))!==null&&o!==void 0?o:S)}else{const D=v[v.length-1];R=new Ys(D,(s=e.getParent(D,e.isBlock))!==null&&s!==void 0?s:S),R.next(!0)}for(let D=R.current();D;D=R.next()){if(e.getContentEditable(D)==="false")return;if(Le(D)&&!RC(D)){a.setStart(D,0),t.setRng(a);return}}}},Yv=(e,t,o)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=e[s];e;e=e[s])if(dt(e)||!RC(e))return e}},NC=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Ld(e,t),Af=(e,t,o)=>e.schema.isValidChild(t,o),RC=(e,t=!1)=>{if(Ne(e)&&Le(e)){const o=t?e.data.replace(/ /g," "):e.data;return vl(o)}else return!1},$3=e=>Ne(e)&&Le(e)&&e.length===0,U3=(e,t)=>{const o="[data-mce-cef-wrappable]",s=Mv(e),a=bs(s)?o:`${o},${s}`;return Qr(X.fromDom(t),a)},Xv=(e,t)=>{const o=e.dom;return Of(t)&&o.getContentEditable(t)==="false"&&U3(e,t)&&o.select('[contenteditable="true"]',t).length===0},dm=(e,t)=>Pt(e)?e(t):(Ne(t)&&(e=e.replace(/%(\w+)/g,(o,s)=>t[s]||o)),e),c1=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),DC=(e,t)=>{if(_o(e))return null;{let o=String(e);return(t==="color"||t==="backgroundColor")&&(o=Hc(o)),t==="fontWeight"&&e===700&&(o="bold"),t==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Jv=(e,t,o)=>{const s=e.getStyle(t,o);return DC(s,o)},Z3=(e,t)=>{let o;return e.getParent(t,s=>dt(s)?(o=e.getStyle(s,"text-decoration"),!!o&&o!=="none"):!1),o},Qv=(e,t,o)=>e.getParents(t,o,e.getRoot()),MC=(e,t,o)=>{const s=e.formatter.get(t);return Ne(s)&&bn(s,o)},W3=(e,t)=>MC(e,t,s=>{const a=c=>Pt(c)||c.length>1&&c.charAt(0)==="%";return bn(["styles","attributes"],c=>an(s,c).exists(d=>{const g=ce(d)?d:kc(d);return bn(g,a)}))}),SD=(e,t,o)=>{const s=["inline","block","selector","attributes","styles","classes"],a=c=>wi(c,(d,g)=>bn(s,v=>v===g));return MC(e,t,c=>{const d=a(c);return MC(e,o,g=>{const v=a(g);return ga(d,v)})})},uu=e=>oi(e,"block"),j3=e=>uu(e)&&e.wrapper===!0,q3=e=>uu(e)&&e.wrapper!==!0,Tl=e=>oi(e,"selector"),Cr=e=>oi(e,"inline"),G3=e=>Tl(e)&&Cr(e)&&Zm(an(e,"mixed"),!0),gi=e=>Tl(e)&&e.expand!==!1&&!Cr(e),ED=e=>{const t=[];let o=e;for(;o;){if(Le(o)&&o.data!==Ns||o.childNodes.length>1)return[];dt(o)&&t.push(o),o=o.firstChild}return t},BC=e=>ED(e).length>0,_0=e=>Vi(e.dom)&&BC(e.dom),Nf=ol,PC=Qv,IC=RC,LC=NC,K3=e=>Jn(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Ol=(e,t)=>{let o=t;for(;o;){if(dt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:t;o=o.parentNode}return t},Y3=(e,t,o,s)=>{const a=t.data;if(e){for(let c=o;c>0;c--)if(s(a.charAt(c-1)))return c}else for(let c=o;c<a.length;c++)if(s(a.charAt(c)))return c;return-1},FC=(e,t,o)=>Y3(e,t,o,s=>qv(s)||l1(s)),Al=(e,t,o)=>Y3(e,t,o,Ya),d1=(e,t,o,s,a,c)=>{let d;const g=e.getParent(o,e.isBlock)||t,v=(R,D,P)=>{const j=Kd(e),K=a?j.backwards:j.forwards;return I.from(K(R,D,(Z,Y)=>Nf(Z.parentNode)?-1:(d=Z,P(a,Z,Y)),g))};return v(o,s,FC).bind(R=>c?v(R.container,R.offset+(a?-1:0),Al):I.some(R)).orThunk(()=>d?I.some({container:d,offset:a?0:d.length}):I.none())},pp=(e,t,o,s,a)=>{const c=s[a];Le(s)&&bs(s.data)&&c&&(s=c);const d=PC(e,s);for(let g=0;g<d.length;g++)for(let v=0;v<t.length;v++){const S=t[v];if(!(Ne(S.collapsed)&&S.collapsed!==o.collapsed)&&Tl(S)&&e.is(d[g],S.selector))return d[g]}return s},X3=(e,t,o,s)=>{var a;let c=o;const d=e.getRoot(),g=t[0];if(uu(g)&&(c=g.wrapper?null:e.getParent(o,g.block,d)),!c){const v=(a=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&a!==void 0?a:d;c=e.getParent(Le(o)?o.parentNode:o,S=>S!==d&&LC(e.schema,S),v)}if(c&&uu(g)&&g.wrapper&&(c=PC(e,c,"ul,ol").reverse()[0]||c),!c)for(c=o;c&&c[s]&&!e.isBlock(c[s])&&(c=c[s],!c1(c,"br")););return c||o},hp=(e,t,o,s)=>{const a=o.parentNode;return Ne(o[s])?!1:a===t||_o(a)||e.isBlock(a)?!0:hp(e,t,a,s)},Ko=(e,t,o,s,a)=>{let c=o;const d=a?"previousSibling":"nextSibling",g=e.getRoot();if(Le(o)&&!IC(o)&&(a?s>0:s<o.data.length))return o;for(;c;){if(!t[0].block_expand&&e.isBlock(c))return c;for(let v=c[d];v;v=v[d]){const S=Le(v)&&!hp(e,g,v,d);if(!Nf(v)&&!K3(v)&&!IC(v,S))return c}if(c===g||c.parentNode===g){o=c;break}c=c.parentNode}return o},u1=e=>Nf(e.parentNode)||Nf(e),Rf=(e,t,o,s=!1)=>{let{startContainer:a,startOffset:c,endContainer:d,endOffset:g}=t;const v=o[0];return dt(a)&&a.hasChildNodes()&&(a=Ii(a,c),Le(a)&&(c=0)),dt(d)&&d.hasChildNodes()&&(d=Ii(d,t.collapsed?g:g-1),Le(d)&&(g=d.data.length)),a=Ol(e,a),d=Ol(e,d),u1(a)&&(a=Nf(a)?a:a.parentNode,t.collapsed?a=a.previousSibling||a:a=a.nextSibling||a,Le(a)&&(c=t.collapsed?a.length:0)),u1(d)&&(d=Nf(d)?d:d.parentNode,t.collapsed?d=d.nextSibling||d:d=d.previousSibling||d,Le(d)&&(g=t.collapsed?0:d.length)),t.collapsed&&(d1(e,e.getRoot(),a,c,!0,s).each(({container:D,offset:P})=>{a=D,c=P}),d1(e,e.getRoot(),d,g,!1,s).each(({container:D,offset:P})=>{d=D,g=P})),(Cr(v)||v.block_expand)&&((!Cr(v)||!Le(a)||c===0)&&(a=Ko(e,o,a,c,!0)),(!Cr(v)||!Le(d)||g===d.data.length)&&(d=Ko(e,o,d,g,!1))),gi(v)&&(a=pp(e,o,t,a,"previousSibling"),d=pp(e,o,t,d,"nextSibling")),(uu(v)||Tl(v))&&(a=X3(e,o,a,"previousSibling"),d=X3(e,o,d,"nextSibling"),uu(v)&&(e.isBlock(a)||(a=Ko(e,o,a,c,!0)),e.isBlock(d)||(d=Ko(e,o,d,g,!1)))),dt(a)&&a.parentNode&&(c=e.nodeIndex(a),a=a.parentNode),dt(d)&&d.parentNode&&(g=e.nodeIndex(d)+1,d=d.parentNode),{startContainer:a,startOffset:c,endContainer:d,endOffset:g}},m1=(e,t,o)=>{var s;const a=t.startOffset,c=Ii(t.startContainer,a),d=t.endOffset,g=Ii(t.endContainer,d-1),v=Y=>{const ae=Y[0];Le(ae)&&ae===c&&a>=ae.data.length&&Y.splice(0,1);const le=Y[Y.length-1];return d===0&&Y.length>0&&le===g&&Le(le)&&Y.splice(Y.length-1,1),Y},S=(Y,ae,le)=>{const ie=[];for(;Y&&Y!==le;Y=Y[ae])ie.push(Y);return ie},R=(Y,ae)=>e.getParent(Y,le=>le.parentNode===ae,ae),D=(Y,ae,le)=>{const ie=le?"nextSibling":"previousSibling";for(let pe=Y,Pe=pe.parentNode;pe&&pe!==ae;pe=Pe){Pe=pe.parentNode;const We=S(pe===Y?pe:pe[ie],ie);We.length&&(le||We.reverse(),o(v(We)))}};if(c===g)return o(v([c]));const P=(s=e.findCommonAncestor(c,g))!==null&&s!==void 0?s:e.getRoot();if(e.isChildOf(c,g))return D(c,P,!0);if(e.isChildOf(g,c))return D(g,P);const j=R(c,P)||c,K=R(g,P)||g;D(c,j,!0);const Z=S(j===c?j:j.nextSibling,"nextSibling",K===g?K.nextSibling:K);Z.length&&o(v(Z)),D(g,K)},HC=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],zC=e=>ys(e)&&qu(e)===Ns,VC=(e,t,o,s)=>Ei(t).fold(()=>"skipping",a=>s==="br"||zC(t)?"valid":qr(t)?"existing":Vi(t.dom)?"caret":bn(HC,c=>Qr(t,c))?"valid-block":!Af(e,o,s)||!Af(e,po(a),o)?"invalid-child":"valid"),$C=(e,t)=>{const o=Rf(e.dom,t,[{inline:"span"}]);t.setStart(o.startContainer,o.startOffset),t.setEnd(o.endContainer,o.endOffset),e.selection.setRng(t)},k0=(e,t,o,s,a,c)=>{const{uid:d=t,...g}=o;Ks(e,rc()),An(e,`${Zc()}`,d),An(e,`${jd()}`,s);const{attributes:v={},classes:S=[]}=a(d,g);if(Yn(e,v),Ev(e,S),c){S.length>0&&An(e,`${_l()}`,S.join(","));const R=ze(v);R.length>0&&An(e,`${gf()}`,R.join(","))}},UC=e=>{xd(e,rc()),ds(e,`${Zc()}`),ds(e,`${jd()}`),ds(e,`${sm()}`);const t=ri(e,`${gf()}`).map(s=>s.split(",")).getOr([]),o=ri(e,`${_l()}`).map(s=>s.split(",")).getOr([]);Ie(t,s=>ds(e,s)),Vh(e,o),ds(e,`${_l()}`),ds(e,`${gf()}`)},ZC=(e,t,o,s,a)=>{const c=X.fromTag("span",e);return k0(c,t,o,s,a,!1),c},J3=(e,t,o,s,a,c)=>{const d=[],g=ZC(e.getDoc(),o,c,s,a),v=Cl(),S=()=>{v.clear()},R=()=>v.get().getOrThunk(()=>{const K=jc(g);return d.push(K),v.set(K),K}),D=K=>{Ie(K,P)},P=K=>{switch(VC(e,K,"span",po(K))){case"invalid-child":{S();const Y=Mn(K);D(Y),S();break}case"valid-block":{S(),k0(K,o,c,s,a,!0);break}case"valid":{const Y=R();vg(K,Y);break}}},j=K=>{const Z=no(K,X.fromDom);D(Z)};return m1(e.dom,t,K=>{S(),j(K)}),d},Q3=(e,t,o,s)=>{e.undoManager.transact(()=>{const a=e.selection,c=a.getRng(),d=du(e).length>0,g=Wc("mce-annotation");if(c.collapsed&&!d&&$C(e,c),a.getRng().collapsed&&!d){const v=ZC(e.getDoc(),g,s,t,o.decorate);yg(v,uo),a.getRng().insertNode(v.dom),a.select(v.dom)}else El(a,!1,()=>{Gv(e,v=>{J3(e,v,g,t,o.decorate,s)})})})},WC=e=>{const t=o0();zh(e,t);const o=Uw(e,t),s=Is("span"),a=c=>{Ie(c,d=>{s(d)?_a(d):UC(d)})};return{register:(c,d)=>{t.register(c,d)},annotate:(c,d)=>{t.lookup(c).each(g=>{Q3(e,c,g,d)})},annotationChanged:(c,d)=>{o.addListener(c,d)},remove:c=>{Fh(e,I.some(c)).each(({elements:d})=>{const g=e.selection.getBookmark();a(d),e.selection.moveToBookmark(g)})},removeAll:c=>{const d=e.selection.getBookmark();Qo(Hh(e,c),(g,v)=>{a(g)}),e.selection.moveToBookmark(d)},getAll:c=>{const d=Hh(e,c);return Xr(d,g=>no(g,v=>v.dom))}}},f1=e=>({getBookmark:it(Zo,e),moveToBookmark:it(z3,e)});f1.isBookmarkNode=ol;const bp=(e,t,o)=>o.collapsed?!1:bn(o.getClientRects(),s=>n0(s,e,t)),eE=(e,t)=>e.dispatch("PreProcess",t),jC=(e,t)=>e.dispatch("PostProcess",t),TD=e=>{e.dispatch("remove")},OD=e=>{e.dispatch("detach")},tE=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},oE=(e,t,o,s,a)=>{e.dispatch("ObjectResizeStart",{target:t,width:o,height:s,origin:a})},nE=(e,t,o,s,a)=>{e.dispatch("ObjectResized",{target:t,width:o,height:s,origin:a})},ey=e=>{e.dispatch("PreInit")},sE=e=>{e.dispatch("PostRender")},rE=e=>{e.dispatch("Init")},aE=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},qC=(e,t,o)=>{e.dispatch(t,o)},GC=(e,t,o,s)=>{e.dispatch("FormatApply",{format:t,node:o,vars:s})},KC=(e,t,o,s)=>{e.dispatch("FormatRemove",{format:t,node:o,vars:s})},iE=(e,t)=>e.dispatch("BeforeSetContent",t),YC=(e,t)=>e.dispatch("SetContent",t),lE=(e,t)=>e.dispatch("BeforeGetContent",t),XC=(e,t)=>e.dispatch("GetContent",t),JC=(e,t)=>{e.dispatch("AutocompleterStart",t)},cE=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},dE=e=>{e.dispatch("AutocompleterEnd")},uE=(e,t,o)=>e.dispatch("PastePreProcess",{content:t,internal:o}),mE=(e,t,o)=>e.dispatch("PastePostProcess",{node:t,internal:o}),QC=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),fE=(e,t)=>e.dispatch("EditableRootStateChange",{state:t}),rt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||rt.metaKeyPressed(e),metaKeyPressed:e=>Do.os.isMacOS()||Do.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},mu="data-mce-selected",ty="table,img,figure.image,hr,video,span.mce-preview-object,details",S0=Math.abs,E0=Math.round,g1={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},e_=e=>e.type==="longpress"||e.type.indexOf("touch")===0,p1=(e,t)=>{const o=t.dom,s=t.getDoc(),a=document,c=t.getBody();let d,g,v,S,R,D,P,j,K,Z,Y,ae,le,ie,pe,Pe,We;const st=Ge=>Ne(Ge)&&(ef(Ge)||o.is(Ge,"figure.image")),ke=Ge=>ut(Ge)||o.hasClass(Ge,"mce-preview-object"),ye=(Ge,Gt)=>{if(e_(Ge)){const Eo=Ge.touches[0];return st(Ge.target)&&!bp(Eo.clientX,Eo.clientY,Gt)}else return st(Ge.target)&&!bp(Ge.clientX,Ge.clientY,Gt)},Be=Ge=>{const Gt=Ge.target;ye(Ge,t.selection.getRng())&&!Ge.isDefaultPrevented()&&t.selection.select(Gt)},ct=Ge=>o.hasClass(Ge,"mce-preview-object")&&Ne(Ge.firstElementChild)?[Ge,Ge.firstElementChild]:o.is(Ge,"figure.image")?[Ge.querySelector("img")]:[Ge],Ct=Ge=>{const Gt=Yw(t);return!Gt||Ge.getAttribute("data-mce-resize")==="false"||Ge===t.getBody()?!1:o.hasClass(Ge,"mce-preview-object")&&Ne(Ge.firstElementChild)?Qr(X.fromDom(Ge.firstElementChild),Gt):Qr(X.fromDom(Ge),Gt)},co=Ge=>ke(Ge)?o.create("img",{src:Do.transparentSrc}):Ge.cloneNode(!0),fo=(Ge,Gt,Eo)=>{if(Ne(Eo)){const pn=ct(Ge);Ie(pn,rn=>{rn.style[Gt]||!t.schema.isValid(rn.nodeName.toLowerCase(),Gt)?o.setStyle(rn,Gt,Eo):o.setAttrib(rn,Gt,""+Eo)})}},on=(Ge,Gt,Eo)=>{fo(Ge,"width",Gt),fo(Ge,"height",Eo)},Cn=Ge=>{let Gt,Eo,pn,rn,Mr;Gt=Ge.screenX-D,Eo=Ge.screenY-P,ie=Gt*S[2]+Z,pe=Eo*S[3]+Y,ie=ie<5?5:ie,pe=pe<5?5:pe,(st(d)||ke(d))&&f0(t)!==!1?pn=!rt.modifierPressed(Ge):pn=rt.modifierPressed(Ge),pn&&(S0(Gt)>S0(Eo)?(pe=E0(ie*ae),ie=E0(pe/ae)):(ie=E0(pe/ae),pe=E0(ie*ae))),on(g,ie,pe),rn=S.startPos.x+Gt,Mr=S.startPos.y+Eo,rn=rn>0?rn:0,Mr=Mr>0?Mr:0,o.setStyles(v,{left:rn,top:Mr,display:"block"}),v.innerHTML=ie+" &times; "+pe,S[2]<0&&g.clientWidth<=ie&&o.setStyle(g,"left",j+(Z-ie)),S[3]<0&&g.clientHeight<=pe&&o.setStyle(g,"top",K+(Y-pe)),Gt=c.scrollWidth-Pe,Eo=c.scrollHeight-We,Gt+Eo!==0&&o.setStyles(v,{left:rn-Gt,top:Mr-Eo}),le||(oE(t,d,Z,Y,"corner-"+S.name),le=!0)},ps=()=>{const Ge=le;le=!1,Ge&&(fo(d,"width",ie),fo(d,"height",pe)),o.unbind(s,"mousemove",Cn),o.unbind(s,"mouseup",ps),a!==s&&(o.unbind(a,"mousemove",Cn),o.unbind(a,"mouseup",ps)),o.remove(g),o.remove(v),o.remove(R),fa(d),Ge&&(nE(t,d,ie,pe,"corner-"+S.name),o.setAttrib(d,"style",o.getAttrib(d,"style"))),t.nodeChanged()},fa=Ge=>{vo();const Gt=o.getPos(Ge,c),Eo=Gt.x,pn=Gt.y,rn=Ge.getBoundingClientRect(),Mr=rn.width||rn.right-rn.left,Ou=rn.height||rn.bottom-rn.top;d!==Ge&&(Qe(),d=Ge,ie=pe=0);const og=t.dispatch("ObjectSelected",{target:Ge});Ct(Ge)&&!og.isDefaultPrevented()?Qo(g1,(ji,dd)=>{const Yt=_n=>{const Ss=ct(d)[0];D=_n.screenX,P=_n.screenY,Z=Ss.clientWidth,Y=Ss.clientHeight,ae=Y/Z,S=ji,S.name=dd,S.startPos={x:Mr*ji[0]+Eo,y:Ou*ji[1]+pn},Pe=c.scrollWidth,We=c.scrollHeight,R=o.add(c,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(R,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),g=co(d),o.addClass(g,"mce-clonedresizable"),o.setAttrib(g,"data-mce-bogus","all"),g.contentEditable="false",o.setStyles(g,{left:Eo,top:pn,margin:0}),on(g,Mr,Ou),g.removeAttribute(mu),c.appendChild(g),o.bind(s,"mousemove",Cn),o.bind(s,"mouseup",ps),a!==s&&(o.bind(a,"mousemove",Cn),o.bind(a,"mouseup",ps)),v=o.add(c,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},Z+" &times; "+Y)};let Po=o.get("mceResizeHandle"+dd);Po&&o.remove(Po),Po=o.add(c,"div",{id:"mceResizeHandle"+dd,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+dd+"-resize; margin:0; padding:0"}),o.bind(Po,"mousedown",_n=>{_n.stopImmediatePropagation(),_n.preventDefault(),Yt(_n)}),ji.elm=Po,o.setStyles(Po,{left:Mr*ji[0]+Eo-Po.offsetWidth/2,top:Ou*ji[1]+pn-Po.offsetHeight/2})}):Qe(!1)},nn=Gg(fa,0),Qe=(Ge=!0)=>{nn.cancel(),vo(),d&&Ge&&d.removeAttribute(mu),Qo(g1,(Gt,Eo)=>{const pn=o.get("mceResizeHandle"+Eo);pn&&(o.unbind(pn),o.remove(pn))})},pt=(Ge,Gt)=>o.isChildOf(Ge,Gt),Bo=Ge=>{if(le||t.removed||t.composing)return;const Gt=Ge.type==="mousedown"?Ge.target:e.getNode(),Eo=Fa(X.fromDom(Gt),ty).map(rn=>rn.dom).filter(rn=>o.isEditable(rn.parentElement)||rn.nodeName==="IMG"&&o.isEditable(rn)).getOrUndefined(),pn=Ne(Eo)?o.getAttrib(Eo,mu,"1"):"1";if(Ie(o.select(`img[${mu}],hr[${mu}]`),rn=>{rn.removeAttribute(mu)}),Ne(Eo)&&pt(Eo,c)&&t.hasFocus()){ft();const rn=e.getStart(!0);if(pt(rn,Eo)&&pt(e.getEnd(!0),Eo)){o.setAttrib(Eo,mu,pn),nn.throttle(Eo);return}}Qe()},vo=()=>{Qo(g1,Ge=>{Ge.elm&&(o.unbind(Ge.elm),delete Ge.elm)})},ft=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{ft(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Bo),t.on("keyup compositionend",Ge=>{d&&d.nodeName==="TABLE"&&Bo(Ge)}),t.on("hide blur",Qe),t.on("contextmenu longpress",Be,!0)}),t.on("remove",vo),{isResizable:Ct,showResizeRect:fa,hideResizeRect:Qe,updateResizeRect:Bo,destroy:()=>{nn.cancel(),d=g=R=null}}},t_=(e,t)=>{t.fold(o=>{e.setStartBefore(o.dom)},(o,s)=>{e.setStart(o.dom,s)},o=>{e.setStartAfter(o.dom)})},gE=(e,t)=>{t.fold(o=>{e.setEndBefore(o.dom)},(o,s)=>{e.setEnd(o.dom,s)},o=>{e.setEndAfter(o.dom)})},xp=(e,t,o)=>{const s=e.document.createRange();return t_(s,t),gE(s,o),s},T0=(e,t,o,s,a)=>{const c=e.document.createRange();return c.setStart(t.dom,o),c.setEnd(s.dom,a),c},vp=me.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),h1=(e,t,o)=>t(X.fromDom(o.startContainer),o.startOffset,X.fromDom(o.endContainer),o.endOffset),Df=(e,t)=>t.match({domRange:o=>({ltr:Je(o),rtl:I.none}),relative:(o,s)=>({ltr:pa(()=>xp(e,o,s)),rtl:pa(()=>I.some(xp(e,s,o)))}),exact:(o,s,a,c)=>({ltr:pa(()=>T0(e,o,s,a,c)),rtl:pa(()=>I.some(T0(e,a,c,o,s)))})}),pE=(e,t)=>{const o=t.ltr();return o.collapsed?t.rtl().filter(a=>a.collapsed===!1).map(a=>vp.rtl(X.fromDom(a.endContainer),a.endOffset,X.fromDom(a.startContainer),a.startOffset)).getOrThunk(()=>h1(e,vp.ltr,o)):h1(e,vp.ltr,o)},AD=(e,t)=>{const o=Df(e,t);return pE(e,o)};vp.ltr,vp.rtl;const o_={create:(e,t,o,s)=>({start:e,soffset:t,finish:o,foffset:s})},n_=(e,t,o)=>{var s,a;return I.from((a=(s=e.dom).caretPositionFromPoint)===null||a===void 0?void 0:a.call(s,t,o)).bind(c=>{if(c.offsetNode===null)return I.none();const d=e.dom.createRange();return d.setStart(c.offsetNode,c.offset),d.collapse(),I.some(d)})},Xc=(e,t,o)=>{var s,a;return I.from((a=(s=e.dom).caretRangeFromPoint)===null||a===void 0?void 0:a.call(s,t,o))},s_=document.caretPositionFromPoint?n_:document.caretRangeFromPoint?Xc:I.none,oy=(e,t,o)=>{const s=X.fromDom(e.document);return s_(s,t,o).map(a=>o_.create(X.fromDom(a.startContainer),a.startOffset,X.fromDom(a.endContainer),a.endOffset))},ny=me.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),RD=(e,t,o,s)=>e.fold(t,o,s),hE=e=>e.fold(bo,bo,bo),bE=ny.before,r_=ny.on,xE=ny.after,Nl={before:bE,on:r_,after:xE,cata:RD,getStart:hE},O0=me.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),vE=e=>O0.exact(e.start,e.soffset,e.finish,e.foffset),yE=e=>e.match({domRange:t=>X.fromDom(t.startContainer),relative:(t,o)=>Nl.getStart(t),exact:(t,o,s,a)=>t}),DD=O0.domRange,a_=O0.relative,yp=O0.exact,MD=e=>{const t=yE(e);return Hu(t)},BD=o_.create,um={domRange:DD,relative:a_,exact:yp,exactFromRange:vE,getWin:MD,range:BD},A0=(e,t)=>{const o=po(e);return o==="input"?Nl.after(e):Io(["br","img"],o)?t===0?Nl.before(e):Nl.after(e):Nl.on(e,t)},wE=(e,t)=>{const o=e.fold(Nl.before,A0,Nl.after),s=t.fold(Nl.before,A0,Nl.after);return um.relative(o,s)},CE=(e,t,o,s)=>{const a=A0(e,t),c=A0(o,s);return um.relative(a,c)},_E=e=>e.match({domRange:t=>{const o=X.fromDom(t.startContainer),s=X.fromDom(t.endContainer);return CE(o,t.startOffset,s,t.endOffset)},relative:wE,exact:CE}),mm=(e,t)=>{const s=document.createDocumentFragment();return Ie(e,a=>{s.appendChild(a.dom)}),X.fromDom(s)},kE=e=>{const t=um.getWin(e).dom,o=(a,c,d,g)=>T0(t,a,c,d,g),s=_E(e);return AD(t,s).match({ltr:o,rtl:o})},SE=(e,t,o)=>oy(e,t,o),i_=(e,t,o)=>{const s=Hu(X.fromDom(o));return SE(s.dom,e,t).map(a=>{const c=o.createRange();return c.setStart(a.start.dom,a.soffset),c.setEnd(a.finish.dom,a.foffset),c}).getOrUndefined()},b1=(e,t)=>Ne(e)&&Ne(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,EE=(e,t,o)=>{let s=e;for(;s&&s!==t;){if(o(s))return s;s=s.parentNode}return null},l_=(e,t,o)=>EE(e,t,o)!==null,PD=(e,t,o)=>l_(e,t,s=>s.nodeName===o),sy=(e,t)=>Or(e)&&!l_(e,t,Vi),c_=(e,t,o)=>{const s=t.parentNode;if(s){const a=new Ys(t,e.getParent(s,e.isBlock)||e.getRoot());let c;for(;c=a[o?"prev":"next"]();)if(Jn(c))return!0}return!1},d_=(e,t)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===t},TE=(e,t)=>{let o=t;for(;o&&o!==e;){if(ln(o))return!0;o=o.parentNode}return!1},N0=(e,t,o,s,a)=>{const c=e.getRoot(),d=e.schema.getNonEmptyElements(),g=a.parentNode;let v,S;if(!g)return I.none();const R=e.getParent(g,e.isBlock)||c;if(s&&Jn(a)&&t&&e.isEmpty(R))return I.some(Ce(g,e.nodeIndex(a)));const D=new Ys(a,R);for(;S=D[s?"prev":"next"]();){if(e.getContentEditableParent(S)==="false"||sy(S,c))return I.none();if(Le(S)&&S.data.length>0)return PD(S,c,"A")?I.none():I.some(Ce(S,s?S.data.length:0));if(e.isBlock(S)||d[S.nodeName.toLowerCase()])return I.none();v=S}return Mc(v)?I.none():o&&v?I.some(Ce(v,0)):I.none()},u_=(e,t,o,s)=>{const a=e.getRoot();let c,d=!1,g=o?s.startContainer:s.endContainer,v=o?s.startOffset:s.endOffset;const S=dt(g)&&v===g.childNodes.length,R=e.schema.getNonEmptyElements();let D=o;if(Or(g))return I.none();if(dt(g)&&v>g.childNodes.length-1&&(D=!1),Bc(g)&&(g=a,v=0),g===a){if(D&&(c=g.childNodes[v>0?v-1:0],c&&(Or(c)||R[c.nodeName]||xl(c))))return I.none();if(g.hasChildNodes()){if(v=Math.min(!D&&v>0?v-1:v,g.childNodes.length-1),g=g.childNodes[v],v=Le(g)&&S?g.data.length:0,!t&&g===a.lastChild&&xl(g)||TE(a,g)||Or(g)||Eg(g))return I.none();if(g.hasChildNodes()&&!xl(g)){c=g;const P=new Ys(g,a);do{if(ln(c)||Or(c)){d=!1;break}if(Le(c)&&c.data.length>0){v=D?0:c.data.length,g=c,d=!0;break}if(R[c.nodeName.toLowerCase()]&&!xo(c)){v=e.nodeIndex(c),g=c.parentNode,D||v++,d=!0;break}}while(c=D?P.next():P.prev())}}}return t&&(Le(g)&&v===0&&N0(e,S,t,!0,g).each(P=>{g=P.container(),v=P.offset(),d=!0}),dt(g)&&(c=g.childNodes[v],c||(c=g.childNodes[v-1]),c&&Jn(c)&&!d_(c,"A")&&!c_(e,c,!1)&&!c_(e,c,!0)&&N0(e,S,t,!0,c).each(P=>{g=P.container(),v=P.offset(),d=!0}))),D&&!t&&Le(g)&&v===g.data.length&&N0(e,S,t,!1,g).each(P=>{g=P.container(),v=P.offset(),d=!0}),d&&g?I.some(Ce(g,v)):I.none()},wp=(e,t)=>{const o=t.collapsed,s=t.cloneRange(),a=Ce.fromRangeStart(t);return u_(e,o,!0,s).each(c=>{(!o||!Ce.isAbove(a,c))&&s.setStart(c.container(),c.offset())}),o||u_(e,o,!1,s).each(c=>{s.setEnd(c.container(),c.offset())}),o&&s.collapse(!0),b1(t,s)?I.none():I.some(s)},cc=(e,t)=>e.splitText(t),ry=e=>{let t=e.startContainer,o=e.startOffset,s=e.endContainer,a=e.endOffset;if(t===s&&Le(t)){if(o>0&&o<t.data.length)if(s=cc(t,o),t=s.previousSibling,a>o){a=a-o;const c=cc(s,a).previousSibling;t=s=c,a=c.data.length,o=0}else a=0}else if(Le(t)&&o>0&&o<t.data.length&&(t=cc(t,o),o=0),Le(s)&&a>0&&a<s.data.length){const c=cc(s,a).previousSibling;s=c,a=c.data.length}return{startContainer:t,startOffset:o,endContainer:s,endOffset:a}},fm=e=>({walk:(c,d)=>m1(e,c,d),split:ry,expand:(c,d={type:"word"})=>{if(d.type==="word"){const g=Rf(e,c,[{inline:"span"}]),v=e.createRng();return v.setStart(g.startContainer,g.startOffset),v.setEnd(g.endContainer,g.endOffset),v}return c},normalize:c=>wp(e,c).fold(Jt,d=>(c.setStart(d.startContainer,d.startOffset),c.setEnd(d.endContainer,d.endOffset),!0))});fm.compareRanges=b1,fm.getCaretRangeFromPoint=i_,fm.getSelectedNode=Jd,fm.getNode=Ii;const m_=((e,t)=>{const o=(g,v)=>{if(!E(v)&&!v.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+v);const S=g.dom;ii(S)&&(S.style[e]=v+"px")},s=g=>{const v=t(g);if(v<=0||v===null){const S=Ur(g,e);return parseFloat(S)||0}return v},a=s,c=(g,v)=>Ir(v,(S,R)=>{const D=Ur(g,R),P=D===void 0?0:parseInt(D,10);return isNaN(P)?S:S+P},0);return{set:o,get:s,getOuter:a,aggregate:c,max:(g,v,S)=>{const R=c(g,S);return v>R?v-R:0}}})("height",e=>{const t=e.dom;return ws(e)?t.getBoundingClientRect().height:t.offsetHeight}),f_=e=>m_.get(e),fu=()=>X.fromDom(document),g_=(e,t)=>e.view(t).fold(Je([]),s=>{const a=e.owner(s),c=g_(e,a);return[s].concat(c)}),OE=(e,t)=>{const o=t.owner(e);return g_(t,o)};var ID=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?I.none():I.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(X.fromDom)},owner:e=>gl(e)});const x1=e=>{const t=fu(),o=sa(t),s=OE(e,ID),a=Cg(e),c=xn(s,(d,g)=>{const v=Cg(g);return{left:d.left+v.left,top:d.top+v.top}},{left:0,top:0});return Rc(c.left+a.left+o.left,c.top+a.top+o.top)},p_=e=>po(e)==="textarea",Cp=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),LD=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},Mf=(e,t)=>{const o=Mn(e);if(o.length===0||p_(e))return{element:e,offset:t};if(t<o.length&&!p_(o[t]))return{element:o[t],offset:0};{const s=o[o.length-1];return p_(s)?{element:e,offset:t}:po(s)==="img"?{element:s,offset:1}:ys(s)?{element:s,offset:qu(s).length}:{element:s,offset:Mn(s).length}}},nl=(e,t)=>{const o=Dc(e),s=f_(e);return{element:e,bottom:o.top+s,height:s,pos:o,cleanup:t}},iy=(e,t)=>{const o=Mf(e,t),s=X.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Ns+"</span>");return As(o.element,s),nl(s,()=>en(s))},h_=e=>nl(X.fromDom(e),oo),AE=(e,t,o,s)=>{dc(e,(a,c)=>ly(e,t,o,s),o)},NE=(e,t,o,s,a)=>{const c={elm:s.element.dom,alignToTop:a};if(Cp(e,c))return;const d=sa(t).top;o(e,t,d,s,a),LD(e,c)},ly=(e,t,o,s)=>{const a=X.fromDom(e.getBody()),c=X.fromDom(e.getDoc());Nc(a);const d=iy(X.fromDom(o.startContainer),o.startOffset);NE(e,c,t,d,s),d.cleanup()},RE=(e,t,o,s)=>{const a=X.fromDom(e.getDoc());NE(e,a,o,h_(t),s)},dc=(e,t,o)=>{const s=o.startContainer,a=o.startOffset,c=o.endContainer,d=o.endOffset;t(X.fromDom(s),X.fromDom(c));const g=e.dom.createRng();g.setStart(s,a),g.setEnd(c,d),e.selection.setRng(o)},v1=(e,t,o,s,a)=>{const c=t.pos;if(s)wb(c.left,c.top,a);else{const d=c.top-o+t.height;wb(-e.getBody().getBoundingClientRect().left,d,a)}},b_=(e,t,o,s,a,c)=>{const d=s+o,g=a.pos.top,v=a.bottom,S=v-g>=s;g<o?v1(e,a,s,c!==!1,t):g>d?v1(e,a,s,S?c!==!1:c===!0,t):v>d&&!S&&v1(e,a,s,c===!0,t)},cy=(e,t,o,s,a)=>{const c=Hu(t).dom.innerHeight;b_(e,t,o,c,s,a)},dy=(e,t,o,s,a)=>{const c=Hu(t).dom.innerHeight;b_(e,t,o,c,s,a);const d=x1(s.element),g=_g(window);d.top<g.y?pl(s.element,a!==!1):d.top>g.bottom&&pl(s.element,a===!0)},_p=(e,t,o)=>AE(e,cy,t,o),x_=(e,t,o)=>RE(e,t,cy,o),DE=(e,t,o)=>AE(e,dy,t,o),FD=(e,t,o)=>RE(e,t,dy,o),R0=(e,t,o)=>{(e.inline?x_:FD)(e,t,o)},D0=(e,t,o)=>{(e.inline?_p:DE)(e,t,o)},v_=(e,t=!1)=>e.dom.focus({preventScroll:t}),uy=e=>{const t=Ac(e).dom;return e.dom===t.activeElement},y_=(e=fu())=>I.from(e.dom.activeElement).map(X.fromDom),ME=e=>y_(Ac(e)).filter(t=>e.dom.contains(t.dom)),w_=(e,t)=>{const o=ys(t)?qu(t).length:Mn(t).length+1;return e>o?o:e<0?0:e},HD=e=>um.range(e.start,w_(e.soffset,e.start),e.finish,w_(e.foffset,e.finish)),BE=(e,t)=>!Zu(t.dom)&&(ai(e,t)||Lo(e,t)),PE=e=>t=>BE(e,t.start)&&BE(e,t.finish),zD=e=>e.inline||Do.browser.isFirefox(),VD=e=>um.range(X.fromDom(e.startContainer),e.startOffset,X.fromDom(e.endContainer),e.endOffset),$D=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?I.none():I.from(t.getRangeAt(0))).map(VD)},UD=e=>{const t=Hu(e);return $D(t.dom).filter(PE(e))},ZD=(e,t)=>I.from(t).filter(PE(e)).map(HD),WD=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),I.some(t)}catch{return I.none()}},C_=e=>{const t=zD(e)?UD(X.fromDom(e.getBody())):I.none();e.bookmark=t.isSome()?t:e.bookmark},__=e=>(e.bookmark?e.bookmark:I.none()).bind(o=>ZD(X.fromDom(e.getBody()),o)).bind(WD),IE=e=>{__(e).each(t=>e.selection.setRng(t))},kp={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},jD=(e,t)=>(E(t)||(t=0),setTimeout(e,t)),qD=(e,t)=>(E(t)||(t=0),setInterval(e,t)),sl={setEditorTimeout:(e,t,o)=>jD(()=>{e.removed||t()},o),setEditorInterval:(e,t,o)=>{const s=qD(()=>{e.removed?clearInterval(s):t()},o);return s}},GD=e=>e.type==="nodechange"&&e.selectionChange,KD=(e,t)=>{const o=()=>{t.throttle()};un.DOM.bind(document,"mouseup",o),e.on("remove",()=>{un.DOM.unbind(document,"mouseup",o)})},YD=(e,t)=>{e.on("mouseup touchend",o=>{t.throttle()})},XD=(e,t)=>{YD(e,t),e.on("keyup NodeChange AfterSetSelectionRange",o=>{GD(o)||C_(e)})},JD=e=>{const t=Gg(()=>{C_(e)},0);e.on("init",()=>{e.inline&&KD(e,t),XD(e,t)}),e.on("remove",()=>{t.cancel()})};let y1;const M0=un.DOM,B0=e=>dt(e)&&kp.isEditorUIElement(e),my=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},Bf=(e,t)=>{const o=Hi(e);return M0.getParent(t,a=>B0(a)||(o?e.dom.is(a,o):!1))!==null},Sp=e=>{try{const t=Ac(X.fromDom(e.getElement()));return y_(t).fold(()=>document.body,o=>o.dom)}catch{return document.body}},LE=(e,t)=>{const o=t.editor;JD(o);const s=(a,c)=>{if(m3(a)&&a.inline!==!0){const d=X.fromDom(a.getContainer());c(d,"tox-edit-focus")}};o.on("focusin",()=>{const a=e.focusedEditor;my(Sp(o))&&s(o,Ks),a!==o&&(a&&a.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:a}),o.focus(!0))}),o.on("focusout",()=>{sl.setEditorTimeout(o,()=>{const a=e.focusedEditor;(!my(Sp(o))||a!==o)&&s(o,xd),!Bf(o,Sp(o))&&a===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),y1||(y1=a=>{const c=e.activeEditor;c&&ya(a).each(d=>{const g=d;g.ownerDocument===document&&g!==document.body&&!Bf(c,g)&&e.focusedEditor===c&&(c.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},M0.bind(document,"focusin",y1))},QD=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&y1&&(M0.unbind(document,"focusin",y1),y1=null)},e6=e=>{e.on("AddEditor",it(LE,e)),e.on("RemoveEditor",it(QD,e))},t6=(e,t)=>e.dom.getParent(t,o=>e.dom.getContentEditable(o)==="true"),o6=e=>e.collapsed?I.from(Ii(e.startContainer,e.startOffset)).map(X.fromDom):I.none(),FE=(e,t)=>o6(t).bind(o=>fh(o)?I.some(o):ai(e,o)?I.none():I.some(e)),k_=(e,t)=>{FE(X.fromDom(e.getBody()),t).bind(o=>Na(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},S_=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},fy=e=>uy(e)||ME(e).isSome(),HE=e=>Ne(e.iframeElement)&&uy(X.fromDom(e.iframeElement)),tr=e=>{const t=e.getBody();return t&&fy(X.fromDom(t))},w1=e=>{const t=Ac(X.fromDom(e.getElement()));return y_(t).filter(o=>!my(o.dom)&&Bf(e,o.dom)).isSome()},Pf=e=>e.inline?tr(e):HE(e),gy=e=>Pf(e)||w1(e),py=e=>{const t=e.selection,o=e.getBody();let s=t.getRng();e.quirks.refreshContentEditable(),Ne(e.bookmark)&&!Pf(e)&&__(e).each(c=>{e.selection.setRng(c),s=c});const a=t6(e,t.getNode());if(a&&e.dom.isChildOf(a,o)){S_(a),k_(e,s),gu(e);return}e.inline||(Do.browser.isOpera()||S_(o),e.getWin().focus()),(Do.browser.isFirefox()||e.inline)&&(S_(o),k_(e,s)),gu(e)},gu=e=>e.editorManager.setActive(e),If=(e,t)=>{e.removed||(t?gu(e):py(e))},zE=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),VE=(e,t,o,s,a)=>{const c=o?t.startContainer:t.endContainer,d=o?t.startOffset:t.endOffset;return I.from(c).map(X.fromDom).map(g=>!s||!t.collapsed?Oc(g,a(g,d)).getOr(g):g).bind(g=>ba(g)?I.some(g):Ei(g).filter(ba)).map(g=>g.dom).getOr(e)},Ep=(e,t,o=!1)=>VE(e,t,!0,o,(s,a)=>Math.min(Cd(s),a)),Tp=(e,t,o=!1)=>VE(e,t,!1,o,(s,a)=>a>0?a-1:a),Op=(e,t)=>{const o=e;for(;e&&Le(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||o},$E=(e,t)=>{if(!t)return e;let o=t.startContainer,s=t.endContainer;const a=t.startOffset,c=t.endOffset;let d=t.commonAncestorContainer;t.collapsed||(o===s&&c-a<2&&o.hasChildNodes()&&(d=o.childNodes[a]),Le(o)&&Le(s)&&(o.length===a?o=Op(o.nextSibling,!0):o=o.parentNode,c===0?s=Op(s.previousSibling,!1):s=s.parentNode,o&&o===s&&(d=o)));const g=Le(d)?d.parentNode:d;return Va(g)?g:e},E_=(e,t,o,s)=>{const a=[],c=e.getRoot(),d=e.getParent(o||Ep(c,t,t.collapsed),e.isBlock),g=e.getParent(s||Tp(c,t,t.collapsed),e.isBlock);if(d&&d!==c&&a.push(d),d&&g&&d!==g){let v;const S=new Ys(d,c);for(;(v=S.next())&&v!==g;)e.isBlock(v)&&a.push(v)}return g&&d!==g&&g!==c&&a.push(g),a},UE=(e,t,o)=>I.from(t).bind(s=>I.from(s.parentNode).map(a=>{const c=e.nodeIndex(s),d=e.createRng();return d.setStart(a,c),d.setEnd(a,c+1),o&&($i(e,d,s,!0),$i(e,d,s,!1)),d})),hy=(e,t)=>no(t,o=>{const s=e.dispatch("GetSelectionRange",{range:o});return s.range!==o?s.range:o}),n6=e=>po(e)==="img"?1:Gu(e).fold(()=>Mn(e).length,t=>t.length),s6=e=>Gu(e).filter(t=>t.trim().length!==0||t.indexOf(uo)>-1).isSome(),ZE=e=>qm(e)&&xa(e,"contenteditable")==="false",WE=["img","br"],C1=e=>s6(e)||Io(WE,po(e))||ZE(e),jE=e=>us(e,C1),qE=e=>GE(e,C1),GE=(e,t)=>{const o=s=>{const a=Mn(s);for(let c=a.length-1;c>=0;c--){const d=a[c];if(t(d))return I.some(d);const g=o(d);if(g.isSome())return g}return I.none()};return o(e)},T_="[data-mce-autocompleter]",KE=(e,t)=>{if(O_(X.fromDom(e.getBody())).isNone()){const o=X.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Pn(o,X.fromDom(t.extractContents())),t.insertNode(o.dom),Ei(o).each(s=>s.dom.normalize()),qE(o).map(s=>{e.selection.setCursorLocation(s.dom,n6(s))})}},YE=e=>Fa(e,T_),O_=e=>oa(e,T_),XE=(e,t)=>O_(t).each(o=>{const s=e.selection.getBookmark();_a(o),e.selection.moveToBookmark(s)}),JE={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},_1=(e,t,o)=>{const s=o?"lastChild":"firstChild",a=o?"prev":"next";if(e[s])return e[s];if(e!==t){let c=e[a];if(c)return c;for(let d=e.parent;d&&d!==t;d=d.parent)if(c=d[a],c)return c}},P0=e=>{var t;const o=(t=e.value)!==null&&t!==void 0?t:"";if(!vl(o))return!1;const s=e.parent;return!(s&&(s.name!=="span"||s.attr("style"))&&/^[ ]+$/.test(o))},A_=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Da{static create(t,o){const s=new Da(t,JE[t]||1);return o&&Qo(o,(a,c)=>{s.attr(c,a)}),s}constructor(t,o){this.name=t,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(t){const o=this;return t.parent&&t.remove(),o.insert(t,o),o.remove(),o}attr(t,o){const s=this;if(!bt(t))return Ne(t)&&Qo(t,(c,d)=>{s.attr(d,c)}),s;const a=s.attributes;if(a){if(o!==void 0){if(o===null){if(t in a.map){delete a.map[t];let c=a.length;for(;c--;)if(a[c].name===t)return a.splice(c,1),s}return s}if(t in a.map){let c=a.length;for(;c--;)if(a[c].name===t){a[c].value=o;break}}else a.push({name:t,value:o});return a.map[t]=o,s}return a.map[t]}}clone(){const t=this,o=new Da(t.name,t.type),s=t.attributes;if(s){const a=[];a.map={};for(let c=0,d=s.length;c<d;c++){const g=s[c];g.name!=="id"&&(a[a.length]={name:g.name,value:g.value},a.map[g.name]=g.value)}o.attributes=a}return o.value=t.value,o}wrap(t){const o=this;return o.parent&&(o.parent.insert(t,o),t.append(o)),o}unwrap(){const t=this;for(let o=t.firstChild;o;){const s=o.next;t.insert(o,t,!0),o=s}t.remove()}remove(){const t=this,o=t.parent,s=t.next,a=t.prev;return o&&(o.firstChild===t?(o.firstChild=s,s&&(s.prev=null)):a&&(a.next=s),o.lastChild===t?(o.lastChild=a,a&&(a.next=null)):s&&(s.prev=a),t.parent=t.next=t.prev=null),t}append(t){const o=this;t.parent&&t.remove();const s=o.lastChild;return s?(s.next=t,t.prev=s,o.lastChild=t):o.lastChild=o.firstChild=t,t.parent=o,t}insert(t,o,s){t.parent&&t.remove();const a=o.parent||this;return s?(o===a.firstChild?a.firstChild=t:o.prev&&(o.prev.next=t),t.prev=o.prev,t.next=o,o.prev=t):(o===a.lastChild?a.lastChild=t:o.next&&(o.next.prev=t),t.next=o.next,t.prev=o,o.next=t),t.parent=a,t}getAll(t){const o=this,s=[];for(let a=o.firstChild;a;a=_1(a,o))a.name===t&&s.push(a);return s}children(){const t=this,o=[];for(let s=t.firstChild;s;s=s.next)o.push(s);return o}empty(){const t=this;if(t.firstChild){const o=[];for(let a=t.firstChild;a;a=_1(a,t))o.push(a);let s=o.length;for(;s--;){const a=o[s];a.parent=a.firstChild=a.lastChild=a.next=a.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,o={},s){var a;const c=this;let d=c.firstChild;if(A_(c))return!1;if(d)do{if(d.type===1){if(d.attr("data-mce-bogus"))continue;if(t[d.name]||A_(d))return!1}if(d.type===8||d.type===3&&!P0(d)||d.type===3&&d.parent&&o[d.parent.name]&&vl((a=d.value)!==null&&a!==void 0?a:"")||s&&s(d))return!1}while(d=_1(d,c));return!0}walk(t){return _1(this,null,t)}}const by=qe.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),QE=e=>bt(e.nodeValue)&&e.nodeValue.includes(Ns),eT=e=>`${e.length===0?"":`${no(e,t=>`[${t}]`).join(",")},`}[data-mce-bogus="all"]`,Lf=(e,t)=>t.querySelectorAll(eT(e)),xy=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>QE(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),N_=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(QE(t)){const o=t.parentNode;return o&&jt(by,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),I0=e=>xy(e).nextNode()!==null,tT=e=>N_(e).nextNode()!==null,R_=(e,t)=>t.querySelector(eT(e))!==null,oT=(e,t)=>{Ie(Lf(e,t),o=>{const s=X.fromDom(o);xa(s,"data-mce-bogus")==="all"?en(s):Ie(e,a=>{Km(s,a)&&ds(s,a)})})},D_=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},M_=Uo(D_,xy),nT=Uo(D_,N_),sT=(e,t)=>{const o=[{condition:it(R_,t),action:it(oT,t)},{condition:I0,action:M_},{condition:tT,action:nT}];let s=e,a=!1;return Ie(o,({condition:c,action:d})=>{c(s)&&(a||(s=e.cloneNode(!0),a=!0),d(s))}),s},L0=e=>{const t=hr(e,"[data-mce-bogus]");Ie(t,o=>{xa(o,"data-mce-bogus")==="all"?en(o):Wa(o)?(As(o,X.fromText(Za)),en(o)):_a(o)})},ca=e=>{const t=hr(e,"input");Ie(t,o=>{ds(o,"name")})},vy=(e,t)=>{const o=$s(e),s=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},Ap=(e,t)=>{const o=e.getDoc(),s=Ac(X.fromDom(e.getBody())),a=X.fromTag("div",o);An(a,"data-mce-bogus","all"),ql(a,{position:"fixed",left:"-9999999px",top:"0"}),yg(a,t.innerHTML),L0(a),ca(a);const c=Xi(s);Pn(c,a);const d=Fs(a.dom.innerText);return en(a),d},rT=(e,t,o)=>{let s;return t.format==="raw"?s=qe.trim(Fs(sT(o,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?s=Ap(e,o):t.format==="tree"?s=e.serializer.serialize(o,t):s=vy(e,e.serializer.serialize(o,t)),t.format!=="text"&&!Xu(X.fromDom(o))&&bt(s)?qe.trim(s):s},Ui=(e,t)=>I.from(e.getBody()).fold(Je(t.format==="tree"?new Da("body",11):""),o=>rT(e,t,o)),Ff=qe.makeMap,B_=e=>{const t=[];e=e||{};const o=e.indent,s=Ff(e.indent_before||""),a=Ff(e.indent_after||""),c=Wn.getEncodeFunc(e.entity_encoding||"raw",e.entities),d=e.element_format!=="xhtml";return{start:(g,v,S)=>{if(o&&s[g]&&t.length>0){const R=t[t.length-1];R.length>0&&R!==`
`&&t.push(`
`)}if(t.push("<",g),v)for(let R=0,D=v.length;R<D;R++){const P=v[R];t.push(" ",P.name,'="',c(P.value,!0),'"')}if(!S||d?t[t.length]=">":t[t.length]=" />",S&&o&&a[g]&&t.length>0){const R=t[t.length-1];R.length>0&&R!==`
`&&t.push(`
`)}},end:g=>{let v;t.push("</",g,">"),o&&a[g]&&t.length>0&&(v=t[t.length-1],v.length>0&&v!==`
`&&t.push(`
`))},text:(g,v)=>{g.length>0&&(t[t.length]=v?g:c(g))},cdata:g=>{t.push("<![CDATA[",g,"]]>")},comment:g=>{t.push("<!--",g,"-->")},pi:(g,v)=>{v?t.push("<?",g," ",c(v),"?>"):t.push("<?",g,"?>"),o&&t.push(`
`)},doctype:g=>{t.push("<!DOCTYPE",g,">",o?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},gm=(e={},t=oc())=>{const o=B_(e);return e.validate="validate"in e?e.validate:!0,{serialize:a=>{const c=e.validate,d={3:v=>{var S;o.text((S=v.value)!==null&&S!==void 0?S:"",v.raw)},8:v=>{var S;o.comment((S=v.value)!==null&&S!==void 0?S:"")},7:v=>{o.pi(v.name,v.value)},10:v=>{var S;o.doctype((S=v.value)!==null&&S!==void 0?S:"")},4:v=>{var S;o.cdata((S=v.value)!==null&&S!==void 0?S:"")},11:v=>{let S=v;if(S=S.firstChild)do g(S);while(S=S.next)}};o.reset();const g=v=>{var S;const R=d[v.type];if(R)R(v);else{const D=v.name,P=D in t.getVoidElements();let j=v.attributes;if(c&&j&&j.length>1){const K=[];K.map={};const Z=t.getElementRule(v.name);if(Z){for(let Y=0,ae=Z.attributesOrder.length;Y<ae;Y++){const le=Z.attributesOrder[Y];if(le in j.map){const ie=j.map[le];K.map[le]=ie,K.push({name:le,value:ie})}}for(let Y=0,ae=j.length;Y<ae;Y++){const le=j[Y].name;if(!(le in K.map)){const ie=j.map[le];K.map[le]=ie,K.push({name:le,value:ie})}}j=K}}if(o.start(D,j,P),Wr(D))bt(v.value)&&o.text(v.value,!0),o.end(D);else if(!P){let K=v.firstChild;if(K){(D==="pre"||D==="textarea")&&K.type===3&&((S=K.value)===null||S===void 0?void 0:S[0])===`
`&&o.text(`
`,!0);do g(K);while(K=K.next)}o.end(D)}}};return a.type===1&&!e.inner?g(a):a.type===3?d[3](a):d[11](a),o.getContent()}}},P_=new Set;Ie(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{P_.add(t)});const k1=["font","text-decoration","text-emphasis"],F0=(e,t)=>ze(e.parseStyle(e.getAttrib(t,"style"))),aT=e=>P_.has(e),r6=(e,t)=>ei(F0(e,t),o=>!aT(o)),I_=e=>Et(e,t=>bn(k1,o=>yn(t,o))),L_=(e,t,o)=>{const s=F0(e,t),a=F0(e,o),c=d=>{var g,v;const S=(g=e.getStyle(t,d))!==null&&g!==void 0?g:"",R=(v=e.getStyle(o,d))!==null&&v!==void 0?v:"";return zr(S)&&zr(R)&&S!==R};return bn(s,d=>{const g=v=>bn(v,S=>S===d);if(!g(a)&&g(k1)){const v=I_(a);return bn(v,c)}else return c(d)})},iT=(e,t,o)=>I.from(o.container()).filter(Le).exists(s=>{const a=e?0:-1;return t(s.data.charAt(o.offset()+a))}),uc=it(iT,!0,l1),H0=it(iT,!1,l1),yy=e=>{const t=e.container();return Le(t)&&(t.data.length===0||Rd(t.data)&&f1.isBookmarkNode(t.parentNode))},pu=(e,t)=>o=>dC(e?0:-1,o).filter(t).isSome(),F_=e=>ef(e)&&Ur(X.fromDom(e),"display")==="block",H_=e=>ln(e)&&!kb(e),lT=pu(!0,F_),a6=pu(!1,F_),z0=pu(!0,ut),S1=pu(!1,ut),z_=pu(!0,xl),wy=pu(!1,xl),hu=pu(!0,H_),pm=pu(!1,H_),V_=e=>e.slice(0,-1),cT=(e,t,o)=>ai(t,e)?V_(ea(e,s=>o(s)||Lo(s,t))):[],$_=(e,t)=>cT(e,t,Jt),Jc=(e,t)=>[e].concat($_(e,t)),Cy=(e,t,o)=>bC(e,t,o,yy),dT=e=>t=>e.isBlock(po(t)),U_=(e,t,o)=>Ao(Jc(X.fromDom(t.container()),e),dT(o)),_y=(e,t,o,s)=>Cy(e,t.dom,o).forall(a=>U_(t,o,s).fold(()=>!iu(a,o,t.dom),c=>!iu(a,o,t.dom)&&ai(c,X.fromDom(a.container())))),uT=(e,t,o,s)=>U_(t,o,s).fold(()=>Cy(e,t.dom,o).forall(a=>!iu(a,o,t.dom)),a=>Cy(e,a.dom,o).isNone()),E1=it(uT,!1),Z_=it(uT,!0),mT=it(_y,!1),i6=it(_y,!0),l6=e=>Uv(e).exists(Wa),V0=(e,t,o,s)=>{const a=Et(Jc(X.fromDom(o.container()),t),d=>s.isBlock(po(d))),c=Ln(a).getOr(t);return tl(e,c.dom,o).filter(l6)},W_=(e,t,o)=>Uv(t).exists(Wa)||V0(!0,e,t,o).isSome(),ky=(e,t,o)=>mC(t).exists(Wa)||V0(!1,e,t,o).isSome(),c6=it(V0,!1),d6=it(V0,!0),fT=e=>Ce.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Qn=(e,t,o)=>{const s=Et(Jc(X.fromDom(t.container()),e),a=>o.isBlock(po(a)));return Ln(s).getOr(e)},Sy=(e,t,o)=>fT(t)?H0(t):H0(t)||zi(Qn(e,t,o).dom,t).exists(H0),gT=(e,t,o)=>fT(t)?uc(t):uc(t)||fi(Qn(e,t,o).dom,t).exists(uc),u6=e=>Io(["pre","pre-wrap"],e),Hf=e=>Uv(e).bind(t=>Ee(t,ba)).exists(t=>u6(Ur(t,"white-space"))),zf=(e,t)=>zi(e.dom,t).isNone(),hm=(e,t)=>fi(e.dom,t).isNone(),pT=(e,t,o)=>zf(e,t)||hm(e,t)||E1(e,t,o)||Z_(e,t,o)||ky(e,t,o)||W_(e,t,o),hT=e=>Ne(e)&&ln(e)&&E3(e),j_=(e,t)=>o=>hT(new Ys(o,e)[t]()),Ey=(e,t)=>{const o=fi(e.dom,t).getOr(t),s=j_(e.dom,"next");return t.isAtEnd()&&(s(t.container())||s(o.container()))},m6=(e,t)=>{const o=zi(e.dom,t).getOr(t),s=j_(e.dom,"prev");return t.isAtStart()&&(s(t.container())||s(o.container()))},Ty=(e,t,o)=>Hf(t)?!1:pT(e,t,o)||Sy(e,t,o)||gT(e,t,o),T1=(e,t,o)=>Hf(t)?!1:E1(e,t,o)||mT(e,t,o)||ky(e,t,o)||Sy(e,t,o)||m6(e,t),bT=e=>{const t=e.container(),o=e.offset();return Le(t)&&o<t.data.length?Ce(t,o+1):e},Np=(e,t,o)=>Hf(t)?!1:Z_(e,t,o)||i6(e,t,o)||W_(e,t,o)||gT(e,t,o)||Ey(e,t),Oy=(e,t,o)=>T1(e,t,o)||Np(e,bT(t),o),Ay=(e,t)=>qv(e.charAt(t)),xT=(e,t)=>l1(e.charAt(t)),f6=e=>{const t=e.container();return Le(t)&&Fn(t.data,uo)},Rl=e=>{const t=e.split("");return no(t,(o,s)=>qv(o)&&s>0&&s<t.length-1&&Ya(t[s-1])&&Ya(t[s+1])?" ":o).join("")},q_=(e,t,o,s)=>{const a=t.data,c=Ce(t,0);return!o&&Ay(a,0)&&!Oy(e,c,s)?(t.data=" "+a.slice(1),!0):o&&xT(a,0)&&T1(e,c,s)?(t.data=uo+a.slice(1),!0):!1},g6=e=>{const t=e.data,o=Rl(t);return o!==t?(e.data=o,!0):!1},vT=(e,t,o,s)=>{const a=t.data,c=Ce(t,a.length-1);return!o&&Ay(a,a.length-1)&&!Oy(e,c,s)?(t.data=a.slice(0,-1)+" ",!0):o&&xT(a,a.length-1)&&Np(e,c,s)?(t.data=a.slice(0,-1)+uo,!0):!1},Ny=(e,t,o)=>{const s=t.container();if(!Le(s))return I.none();if(f6(t)){const a=q_(e,s,!1,o)||g6(s)||vT(e,s,!1,o);return Wm(a,t)}else if(Oy(e,t,o)){const a=q_(e,s,!0,o)||vT(e,s,!0,o);return Wm(a,t)}else return I.none()},p6=e=>{const t=X.fromDom(e.getBody());e.selection.isCollapsed()&&Ny(t,Ce.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},yT=(e,t,o,s)=>{if(o===0)return;const a=X.fromDom(e),c=Ti(a,S=>s.isBlock(po(S))).getOr(a),d=e.data.slice(t,t+o),g=t+o>=e.data.length&&Np(c,Ce(e,e.data.length),s),v=t===0&&T1(c,Ce(e,0),s);e.replaceData(t,o,Id(d,4,v,g))},$0=(e,t,o)=>{const s=e.data.slice(t),a=s.length-Sc(s).length;yT(e,t,a,o)},U0=(e,t,o)=>{const s=e.data.slice(0,t),a=s.length-Iu(s).length;yT(e,t-a,a,o)},G_=(e,t,o,s,a=!0)=>{const c=Iu(e.data).length,d=a?e:t,g=a?t:e;return a?d.appendData(g.data):d.insertData(0,g.data),en(X.fromDom(g)),s&&$0(d,c,o),d},h6=(e,t)=>{const o=e.container(),s=e.offset();return!Ce.isTextPosition(e)&&o===t.parentNode&&s>Ce.before(t).offset()},wT=(e,t)=>h6(t,e)?Ce(t.container(),t.offset()-1):t,CT=e=>Le(e)?Ce(e,0):Ce.before(e),Rp=e=>Le(e)?Ce(e,e.data.length):Ce.after(e),Dp=e=>ui(e.previousSibling)?I.some(Rp(e.previousSibling)):e.previousSibling?ic(e.previousSibling):I.none(),O1=e=>ui(e.nextSibling)?I.some(CT(e.nextSibling)):e.nextSibling?Na(e.nextSibling):I.none(),_T=(e,t)=>I.from(t.previousSibling?t.previousSibling:t.parentNode).bind(o=>zi(e,Ce.before(o))).orThunk(()=>fi(e,Ce.after(t))),kT=(e,t)=>fi(e,Ce.after(t)).orThunk(()=>zi(e,Ce.before(t))),b6=(e,t)=>Dp(t).orThunk(()=>O1(t)).orThunk(()=>_T(e,t)),ST=(e,t)=>O1(t).orThunk(()=>Dp(t)).orThunk(()=>kT(e,t)),Z0=(e,t,o)=>e?ST(t,o):b6(t,o),ET=(e,t,o)=>Z0(e,t,o).map(it(wT,o)),K_=(e,t,o)=>{o.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},TT=e=>t=>t.dom===e,x6=(e,t)=>t&&jt(e.schema.getBlockElements(),po(t)),Qc=(e,t)=>{if(Jo(e)){const o=X.fromHtml('<br data-mce-bogus="1">');return t?Ie(Mn(e),s=>{_0(s)||en(s)}):li(e),Pn(e,o),I.some(Ce.before(o.dom))}else return I.none()},Y_=(e,t,o,s)=>{const a=va(e).filter(ys),c=Wl(e).filter(ys);return en(e),Tw(a,c,t,(d,g,v)=>{const S=d.dom,R=g.dom,D=S.data.length;return G_(S,R,o,s),v.container()===R?Ce(S,D):v}).orThunk(()=>(s&&(a.each(d=>U0(d.dom,d.dom.length,o)),c.each(d=>$0(d.dom,0,o))),t))},v6=(e,t)=>jt(e.schema.getTextInlineElements(),po(t)),Mp=(e,t,o,s=!0,a=!1)=>{const c=ET(t,e.getBody(),o.dom),d=Ti(o,it(x6,e),TT(e.getBody())),g=Y_(o,c,e.schema,v6(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):d.bind(v=>Qc(v,a)).fold(()=>{s&&K_(e,t,g)},v=>{s&&K_(e,t,I.some(v))})},Wo=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,y6=e=>Wo.test(e),Bp=(e,t)=>Qr(X.fromDom(t),Mt(e))&&!Ld(e.schema,t)&&e.dom.isEditable(t),Hn=e=>{var t;return un.DOM.getStyle(e,"direction",!0)==="rtl"||y6((t=e.textContent)!==null&&t!==void 0?t:"")},w6=(e,t,o)=>Et(un.DOM.getParents(o.container(),"*",t),e),mc=(e,t,o)=>{const s=w6(e,t,o);return I.from(s[s.length-1])},C6=(e,t,o)=>{const s=kf(t,e),a=kf(o,e);return Ne(s)&&s===a},OT=e=>Cs(e)||ja(e),Gr=(e,t)=>{const o=t.container(),s=t.offset();return e?di(o)?Le(o.nextSibling)?Ce(o.nextSibling,0):Ce.after(o):Cs(t)?Ce(o,s+1):t:di(o)?Le(o.previousSibling)?Ce(o.previousSibling,o.previousSibling.data.length):Ce.before(o):ja(t)?Ce(o,s-1):t},pi=it(Gr,!0),A1=it(Gr,!1),bm=(e,t)=>{const o=s=>s.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(t),e.off("beforeinput input",o)},bu=e=>{e.execCommand("delete")},Pp=e=>bm(e,"Delete"),X_=e=>bm(e,"ForwardDelete"),J_=e=>t=>Zm(Ei(t),e,Lo),AT=e=>nf(e)||sf(e),W0=(e,t)=>ai(e,t)?Ee(t,AT,J_(e)):I.none(),Q_=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},NT=(e,t,o)=>Vr(Na(o),ic(o),(s,a)=>{const c=Gr(!0,s),d=Gr(!1,a),g=Gr(!1,t);return e?fi(o,g).exists(v=>v.isEqual(d)&&t.isEqual(c)):zi(o,g).exists(v=>v.isEqual(c)&&t.isEqual(d))}).getOr(!0),ek=e=>(Fu(e)?va(e):Os(e)).bind(ek).orThunk(()=>I.some(e)),tk=(e,t,o,s=!0)=>{var a;t.deleteContents();const c=ek(o).getOr(o),d=X.fromDom((a=e.dom.getParent(c.dom,e.dom.isBlock))!==null&&a!==void 0?a:o.dom);if(d.dom===e.getBody()?Q_(e,s):Jo(d)&&(Nd(d),s&&e.selection.setCursorLocation(d.dom,0)),!Lo(o,d)){const g=Zm(Ei(d),o)?[]:St(d);Ie(g.concat(Mn(o)),v=>{!Lo(v,d)&&!ai(v,d)&&Jo(v)&&en(v)})}},RT=(e,t,o)=>Ti(e,t,o).isSome(),DT=(e,t)=>La(e,t).isSome(),Ry=(e,t)=>us(e,t).isSome(),_6=e=>t=>Lo(e,t),ok=e=>hr(e,"td,th"),MT=(e,t)=>Ef(X.fromDom(e),t),xu=e=>Vr(e.startTable,e.endTable,(t,o)=>{const s=Ry(t,c=>Lo(c,o)),a=Ry(o,c=>Lo(c,t));return!s&&!a?e:{...e,startTable:s?I.none():e.startTable,endTable:a?I.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),j0=e=>xu(e),BT=(e,t)=>{const o=MT(e.startContainer,t),s=MT(e.endContainer,t),a=o.isSome(),c=s.isSome(),d=Vr(o,s,Lo).getOr(!1);return j0({startTable:o,endTable:s,isStartInTable:a,isEndInTable:c,isSameTable:d,isMultiTable:!d&&a&&c})},Dy=(e,t)=>({start:e,end:t}),PT=(e,t,o)=>({rng:e,table:t,cells:o}),q0=me.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),ed=(e,t)=>Fa(X.fromDom(e),"td,th",t),IT=e=>!Lo(e.start,e.end),LT=(e,t)=>Ef(e.start,t).bind(o=>Ef(e.end,t).bind(s=>Wm(Lo(o,s),o))),k6=(e,t)=>!IT(e)&&LT(e,t).exists(o=>{const s=o.dom.rows;return s.length===1&&s[0].cells.length===1}),S6=(e,t)=>{const o=ed(e.startContainer,t),s=ed(e.endContainer,t);return Vr(o,s,Dy)},E6=e=>t=>Ef(t,e).bind(o=>mt(ok(o)).map(s=>Dy(t,s))),T6=e=>t=>Ef(t,e).bind(o=>Ln(ok(o)).map(s=>Dy(s,t))),nk=e=>t=>LT(t,e).map(o=>PT(t,o,ok(o))),FT=(e,t,o,s)=>{if(o.collapsed||!e.forall(IT))return I.none();if(t.isSameTable){const a=e.bind(nk(s));return I.some({start:a,end:a})}else{const a=ed(o.startContainer,s),c=ed(o.endContainer,s),d=a.bind(E6(s)).bind(nk(s)),g=c.bind(T6(s)).bind(nk(s));return I.some({start:d,end:g})}},HT=(e,t)=>fd(e,o=>Lo(o,t)),N1=e=>Vr(HT(e.cells,e.rng.start),HT(e.cells,e.rng.end),(t,o)=>e.cells.slice(t,o+1)),O6=(e,t,o)=>e.exists(s=>k6(s,o)&&TC(s.start,t)),R1=(e,t)=>{const{startTable:o,endTable:s}=t,a=e.cloneRange();return o.each(c=>a.setStartAfter(c.dom)),s.each(c=>a.setEndBefore(c.dom)),a},sk=(e,t,o,s)=>FT(e,t,o,s).bind(({start:a,end:c})=>a.or(c)).bind(a=>{const{isSameTable:c}=t,d=N1(a).getOr([]);if(c&&a.cells.length===d.length)return I.some(q0.fullTable(a.table));if(d.length>0){if(c)return I.some(q0.partialTable(d,I.none()));{const g=R1(o,t);return I.some(q0.partialTable(d,I.some({...t,rng:g})))}}else return I.none()}),Ip=(e,t,o,s)=>FT(e,t,o,s).bind(({start:a,end:c})=>{const d=a.bind(N1).getOr([]),g=c.bind(N1).getOr([]);if(d.length>0&&g.length>0){const v=R1(o,t);return I.some(q0.multiTable(d,g,v))}else return I.none()}),Lp=(e,t)=>{const o=_6(e),s=S6(t,o),a=BT(t,o);return O6(s,t,o)?s.map(c=>q0.singleCellTable(t,c.start)):a.isMultiTable?Ip(s,a,t,o):sk(s,a,t,o)},G0=e=>Ie(e,t=>{ds(t,"contenteditable"),Nd(t)}),My=(e,t)=>I.from(e.dom.getParent(t,e.dom.isBlock)).map(X.fromDom),Fp=(e,t,o)=>{o.each(s=>{t?en(s):(Nd(s),e.selection.setCursorLocation(s.dom,0))})},xm=(e,t,o,s)=>{const a=o.cloneRange();s?(a.setStart(o.startContainer,o.startOffset),a.setEndAfter(t.dom.lastChild)):(a.setStartBefore(t.dom.firstChild),a.setEnd(o.endContainer,o.endOffset)),X0(e,a,t,!1).each(c=>c())},K0=e=>{const t=du(e),o=X.fromDom(e.selection.getNode());tf(o.dom)&&Jo(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),t.length>1&&bn(t,s=>Lo(s,o))&&An(o,"data-mce-selected","1")},Y0=(e,t,o)=>I.some(()=>{const s=e.selection.getRng(),a=o.bind(({rng:c,isStartInTable:d})=>{const g=My(e,d?c.endContainer:c.startContainer);c.deleteContents(),Fp(e,d,g.filter(Jo));const v=d?t[0]:t[t.length-1];return xm(e,v,s,d),Jo(v)?I.none():I.some(d?t.slice(1):t.slice(0,-1))}).getOr(t);G0(a),K0(e)}),zT=(e,t,o,s)=>I.some(()=>{const a=e.selection.getRng(),c=t[0],d=o[o.length-1];xm(e,c,a,!0),xm(e,d,a,!1);const g=Jo(c)?t:t.slice(1),v=Jo(d)?o:o.slice(0,-1);G0(g.concat(v)),s.deleteContents(),K0(e)}),X0=(e,t,o,s=!0)=>I.some(()=>{tk(e,t,o,s)}),rk=(e,t)=>I.some(()=>Mp(e,!1,t)),VT=(e,t,o)=>Lp(t,o).bind(s=>s.fold(it(X0,e),it(rk,e),it(Y0,e),it(zT,e))),$T=(e,t)=>J0(e,t),D1=(e,t,o,s)=>By(t,s).fold(()=>VT(e,t,o),a=>$T(e,a)),UT=(e,t,o)=>{const s=X.fromDom(e.getBody()),a=e.selection.getRng();return o.length!==0?Y0(e,o,I.none()):D1(e,s,a,t)},ak=(e,t)=>Ao(Jc(t,e),Yu),By=(e,t)=>Ao(Jc(t,e),Is("caption")),Py=(e,t,o,s,a)=>fp(o,e.getBody(),a).bind(c=>ak(t,X.fromDom(c.getNode())).bind(d=>Lo(d,s)?I.none():I.some(oo))),J0=(e,t)=>I.some(()=>{Nd(t),e.selection.setCursorLocation(t.dom,0)}),ZT=(e,t,o,s)=>Na(e.dom).bind(a=>ic(e.dom).map(c=>t?o.isEqual(a)&&s.isEqual(c):o.isEqual(c)&&s.isEqual(a))).getOr(!0),WT=(e,t)=>J0(e,t),jT=(e,t,o)=>By(e,X.fromDom(o.getNode())).fold(()=>I.some(oo),s=>Wm(!Lo(s,t),oo)),vm=(e,t,o,s,a)=>fp(o,e.getBody(),a).fold(()=>I.some(oo),c=>ZT(s,o,a,c)?WT(e,s):jT(t,s,c)),Vf=(e,t,o,s)=>{const a=Ce.fromRangeStart(e.selection.getRng());return ak(o,s).bind(c=>Jo(c)?J0(e,c):Py(e,o,t,c,a))},fc=(e,t,o,s)=>{const a=Ce.fromRangeStart(e.selection.getRng());return Jo(s)?J0(e,s):vm(e,o,t,s,a)},Iy=(e,t)=>e?z_(t):wy(t),ik=(e,t)=>{const o=Ce.fromRangeStart(e.selection.getRng());return Iy(t,o)||tl(t,e.getBody(),o).exists(s=>Iy(t,s))},qT=(e,t,o)=>{const s=X.fromDom(e.getBody());return By(s,o).fold(()=>Vf(e,t,s,o).orThunk(()=>Wm(ik(e,t),oo)),a=>fc(e,t,s,a))},Ly=(e,t)=>{const o=X.fromDom(e.selection.getStart(!0)),s=du(e);return e.selection.isCollapsed()&&s.length===0?qT(e,t,o):UT(e,o,s)},$f=(e,t)=>{let o=t;for(;o&&o!==e;){if(Ua(o)||ln(o))return o;o=o.parentNode}return null},lk=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],GT=qe.each,Fy=e=>{const t=e.dom,o=new Set(e.serializer.getTempAttrs()),s=(c,d)=>{if(c.nodeName!==d.nodeName||c.nodeType!==d.nodeType)return!1;const g=S=>{const R={};return GT(t.getAttribs(S),D=>{const P=D.nodeName.toLowerCase();P!=="style"&&!a(P)&&(R[P]=t.getAttrib(S,P))}),R},v=(S,R)=>{for(const D in S)if(jt(S,D)){const P=R[D];if(Bs(P)||S[D]!==P)return!1;delete R[D]}for(const D in R)if(jt(R,D))return!1;return!0};return dt(c)&&dt(d)&&(!v(g(c),g(d))||!v(t.parseStyle(t.getAttrib(c,"style")),t.parseStyle(t.getAttrib(d,"style"))))?!1:!ol(c)&&!ol(d)},a=c=>bn(lk,d=>yn(c,d))||o.has(c);return{compare:s,isAttributeInternal:a}},Hy=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),vu=e=>e.name==="summary",gc=(e,t)=>{let o=e;for(;o=o.walk();)t(o)},Q0=(e,t,o,s)=>{const a=o.name;for(let c=0,d=e.length;c<d;c++){const g=e[c];if(g.name===a){const v=s.nodes[a];v?v.nodes.push(o):s.nodes[a]={filter:g,nodes:[o]}}}if(o.attributes)for(let c=0,d=t.length;c<d;c++){const g=t[c],v=g.name;if(v in o.attributes.map){const S=s.attributes[v];S?S.nodes.push(o):s.attributes[v]={filter:g,nodes:[o]}}}},KT=(e,t,o)=>{const s={nodes:{},attributes:{}};return o.firstChild&&gc(o,a=>{Q0(e,t,a,s)}),s},ex=(e,t)=>{const o=(s,a)=>{Qo(s,c=>{const d=Dt(c.nodes);Ie(c.filter.callbacks,g=>{for(let v=d.length-1;v>=0;v--){const S=d[v];(!(a?S.attr(c.filter.name)!==void 0:S.name===c.filter.name)||_o(S.parent))&&d.splice(v,1)}d.length>0&&g(d,c.filter.name,t)})})};o(e.nodes,!1),o(e.attributes,!0)},ck=(e,t,o,s={})=>{const a=KT(e,t,o);ex(a,s)},zy=(e,t,o,s)=>{if((e.pad_empty_with_br||t.insert)&&o(s)){const c=new Da("br",1);t.insert&&c.attr("data-mce-bogus","1"),s.empty().append(c)}else s.empty().append(new Da("#text",3)).value=uo},YT=e=>{var t;return dk(e,"#text")&&((t=e==null?void 0:e.firstChild)===null||t===void 0?void 0:t.value)===uo},dk=(e,t)=>{const o=e==null?void 0:e.firstChild;return Ne(o)&&o===e.lastChild&&o.name===t},XT=(e,t)=>{const o=e.getElementRule(t.name);return(o==null?void 0:o.paddEmpty)===!0},M1=(e,t,o,s)=>s.isEmpty(t,o,a=>XT(e,a)),Vy=(e,t)=>Ne(e)&&(t(e)||e.name==="br"),uk=e=>{let t;for(let o=e;o;o=o.parent){const s=o.attr("contenteditable");if(s==="false")break;s==="true"&&(t=o)}return I.from(t)},$y=(e,t,o=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const a of s)o&&!t.isValidChild(o.name,a.name)&&$y(a,t,o);e.unwrap()}},tx=(e,t,o,s=oo)=>{const a=t.getTextBlockElements(),c=t.getNonEmptyElements(),d=t.getWhitespaceElements(),g=qe.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),v=new Set,S=R=>R!==o&&!g[R.name];for(let R=0;R<e.length;R++){const D=e[R];let P,j,K;if(!D.parent||v.has(D))continue;if(a[D.name]&&D.parent.name==="li"){let Y=D.next;for(;Y&&a[Y.name];){Y.name="li",v.add(Y),D.parent.insert(Y,D.parent);Y=Y.next}D.unwrap();continue}const Z=[D];for(P=D.parent;P&&!t.isValidChild(P.name,D.name)&&S(P);P=P.parent)Z.push(P);if(P&&Z.length>1)if(mk(t,D,P))$y(D,t);else{Z.reverse(),j=Z[0].clone(),s(j);let Y=j;for(let ae=0;ae<Z.length-1;ae++){t.isValidChild(Y.name,Z[ae].name)&&ae>0?(K=Z[ae].clone(),s(K),Y.append(K)):K=Y;for(let le=Z[ae].firstChild;le&&le!==Z[ae+1];){const ie=le.next;K.append(le),le=ie}Y=K}M1(t,c,d,j)?P.insert(D,Z[0],!0):(P.insert(j,Z[0],!0),P.insert(D,j)),P=Z[0],(M1(t,c,d,P)||dk(P,"br"))&&P.empty().remove()}else if(D.parent){if(D.name==="li"){let Y=D.prev;if(Y&&(Y.name==="ul"||Y.name==="ol")){Y.append(D);continue}if(Y=D.next,Y&&(Y.name==="ul"||Y.name==="ol")&&Y.firstChild){Y.insert(D,Y.firstChild,!0);continue}const ae=new Da("ul",1);s(ae),D.wrap(ae);continue}if(t.isValidChild(D.parent.name,"div")&&t.isValidChild("div",D.name)){const Y=new Da("div",1);s(Y),D.wrap(Y)}else $y(D,t)}}},A6=(e,t)=>{let o=e;for(;o;){if(o.name===t)return!0;o=o.parent}return!1},mk=(e,t,o=t.parent)=>o?e.children[t.name]&&!e.isValidChild(o.name,t.name)||t.name==="a"&&A6(o,"a")?!0:vu(o)&&Hy(t)?!((o==null?void 0:o.firstChild)===t&&(o==null?void 0:o.lastChild)===t):!1:!1,N6=(e,t,o,s)=>{const a=document.createRange();return a.setStart(e,t),a.setEnd(o,s),a},R6=e=>{const t=Ce.fromRangeStart(e),o=Ce.fromRangeEnd(e),s=e.commonAncestorContainer;return tl(!1,s,o).map(a=>!iu(t,o,s)&&iu(t,a,s)?N6(t.container(),t.offset(),a.container(),a.offset()):e).getOr(e)},fk=e=>e.collapsed?e:R6(e),D6=e=>Ne(e.firstChild)&&e.firstChild===e.lastChild,Uy=e=>e.name==="br"||e.value===uo,gk=(e,t)=>e.getBlockElements()[t.name]&&D6(t)&&Uy(t.firstChild),JT=(e,t)=>{const o=e.getNonEmptyElements();return Ne(t)&&(t.isEmpty(o)||gk(e,t))},pk=(e,t)=>{let o=t.firstChild,s=t.lastChild;return o&&o.name==="meta"&&(o=o.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),JT(e,s)&&(s=s==null?void 0:s.prev),!o||o!==s?!1:o.name==="ul"||o.name==="ol"},M6=e=>{var t,o;const s=e.firstChild,a=e.lastChild;return s&&s.nodeName==="META"&&((t=s.parentNode)===null||t===void 0||t.removeChild(s)),a&&a.id==="mce_marker"&&((o=a.parentNode)===null||o===void 0||o.removeChild(a)),e},B6=(e,t,o)=>{const s=t.serialize(o),a=e.createFragment(s);return M6(a)},P6=e=>{var t;return Et((t=e==null?void 0:e.childNodes)!==null&&t!==void 0?t:[],o=>o.nodeName==="LI")},I6=e=>e.data===uo||Jn(e),L6=e=>Ne(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&I6(e.firstChild),F6=e=>!e.firstChild||L6(e),Zy=e=>e.length>0&&F6(e[e.length-1])?e.slice(0,-1):e,B1=(e,t)=>{const o=e.getParent(t,e.isBlock);return o&&o.nodeName==="LI"?o:null},Wy=(e,t)=>!!B1(e,t),H6=(e,t)=>{const o=t.cloneRange(),s=t.cloneRange();return o.setStartBefore(e),s.setEndAfter(e),[o.cloneContents(),s.cloneContents()]},z6=(e,t)=>{const o=Ce.before(e),a=lu(t).next(o);return a?a.toRange():null},QT=(e,t)=>{const o=Ce.after(e),a=lu(t).prev(o);return a?a.toRange():null},V6=(e,t,o,s)=>{const a=H6(e,s),c=e.parentNode;return c&&(c.insertBefore(a[0],e),qe.each(t,d=>{c.insertBefore(d,e)}),c.insertBefore(a[1],e),c.removeChild(e)),QT(t[t.length-1],o)},$6=(e,t,o)=>{const s=e.parentNode;return s&&qe.each(t,a=>{s.insertBefore(a,e)}),z6(e,o)},U6=(e,t,o,s)=>(s.insertAfter(t.reverse(),e),QT(t[0],o)),pc=(e,t,o,s)=>{const a=B6(t,e,s),c=B1(t,o.startContainer),d=Zy(P6(a.firstChild)),g=1,v=2,S=t.getRoot(),R=D=>{const P=Ce.fromRangeStart(o),j=lu(t.getRoot()),K=D===g?j.prev(P):j.next(P),Z=K==null?void 0:K.getNode();return Z?B1(t,Z)!==c:!0};return c?R(g)?$6(c,d,S):R(v)?U6(c,d,S,t):V6(c,d,S,o):null},hk=["pre"],eO=(e,t,o,s)=>{var a;const c=t.firstChild,d=t.lastChild,g=d.attr("data-mce-type")==="bookmark"?d.prev:d,v=c===g,S=Io(hk,c.name);if(v&&S){const R=c.attr("contenteditable")!=="false",D=((a=e.getParent(o,e.isBlock))===null||a===void 0?void 0:a.nodeName.toLowerCase())===c.name,P=I.from($f(s,o)).forall(Ua);return R&&D&&P}else return!1},jy=tf,tO=(e,t,o)=>{if(Ne(o)){const s=e.getParent(t.endContainer,jy);return o===s&&TC(X.fromDom(o),t)}else return!1},Z6=(e,t,o)=>{var s;if(o.getAttribute("data-mce-bogus")==="all")(s=o.parentNode)===null||s===void 0||s.insertBefore(e.dom.createFragment(t),o);else{const a=o.firstChild,c=o.lastChild;!a||a===c&&a.nodeName==="BR"?e.dom.setHTML(o,t):e.selection.setContent(t,{no_events:!0})}},oO=(e,t,o)=>{I.from(e.getParent(t,"td,th")).map(X.fromDom).each(s=>fv(s,o))},W6=(e,t)=>{const o=e.schema.getTextInlineElements(),s=e.dom;if(t){const a=e.getBody(),c=Fy(e);qe.each(s.select("*[data-mce-fragment]"),d=>{if(Ne(o[d.nodeName.toLowerCase()])&&r6(s,d)){for(let v=d.parentElement;Ne(v)&&v!==a&&!L_(s,d,v);v=v.parentElement)if(c.compare(v,d)){s.remove(d,!0);break}}})}},P1=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},nO=e=>{qe.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},sO=e=>!!e.getAttribute("data-mce-fragment"),rO=(e,t)=>Ne(t)&&!e.schema.getVoidElements()[t.nodeName],bk=(e,t)=>{var o,s,a;let c;const d=e.dom,g=e.selection;if(!t)return;g.scrollIntoView(t);const v=$f(e.getBody(),t);if(v&&d.getContentEditable(v)==="false"){d.remove(t),g.select(v);return}let S=d.createRng();const R=t.previousSibling;if(Le(R)){S.setStart(R,(s=(o=R.nodeValue)===null||o===void 0?void 0:o.length)!==null&&s!==void 0?s:0);const j=t.nextSibling;Le(j)&&(R.appendData(j.data),(a=j.parentNode)===null||a===void 0||a.removeChild(j))}else S.setStartBefore(t),S.setEndBefore(t);const D=j=>{let K=Ce.fromRangeStart(j);return K=lu(e.getBody()).next(K),K==null?void 0:K.toRange()},P=d.getParent(t,d.isBlock);if(d.remove(t),P&&d.isEmpty(P)){const j=jy(P);li(X.fromDom(P)),S.setStart(P,0),S.setEnd(P,0),!j&&!sO(P)&&(c=D(S))?(S=c,d.remove(P)):d.add(P,d.create("br",j?{}:{"data-mce-bogus":"1"}))}g.setRng(S)},j6=e=>{const t=e.dom,o=fk(e.selection.getRng());e.selection.setRng(o);const s=t.getParent(o.startContainer,jy);tO(t,o,s)?X0(e,o,X.fromDom(s)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&Le(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},q6=e=>{for(let t=e;t;t=t.walk())if(t.attr("id")==="mce_marker")return I.some(t);return I.none()},Uf=(e,t,o)=>{var s;return bn(o.children(),Hy)&&((s=e.getParent(t,e.isBlock))===null||s===void 0?void 0:s.nodeName)==="SUMMARY"},xk=(e,t,o)=>{var s,a;const c=e.selection,d=e.dom,g=e.parser,v=o.merge,S=gm({validate:!0},e.schema),R='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(t=Fs(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,R);let D=c.getRng();const P=D.startContainer,j=e.getBody();P===j&&c.isCollapsed()&&d.isBlock(j.firstChild)&&rO(e,j.firstChild)&&d.isEmpty(j.firstChild)&&(D=d.createRng(),D.setStart(j.firstChild,0),D.setEnd(j.firstChild,0),c.setRng(D)),c.isCollapsed()||j6(e);const K=c.getNode(),Z={context:K.nodeName.toLowerCase(),data:o.data,insert:!0},Y=g.parse(t,Z);if(o.paste===!0&&pk(e.schema,Y)&&Wy(d,K))return D=pc(S,d,c.getRng(),Y),D&&c.setRng(D),t;o.paste===!0&&eO(d,Y,K,e.getBody())&&((s=Y.firstChild)===null||s===void 0||s.unwrap()),P1(Y);let ae=Y.lastChild;if(ae&&ae.attr("id")==="mce_marker"){const le=ae;for(ae=ae.prev;ae;ae=ae.walk(!0))if(ae.type===3||!d.isBlock(ae.name)){ae.parent&&e.schema.isValidChild(ae.parent.name,"span")&&ae.parent.insert(le,ae,ae.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(K),!Z.invalid&&!Uf(d,K,Y))t=S.serialize(Y),Z6(e,t,K);else{e.selection.setContent(R);let le=c.getNode(),ie;const pe=e.getBody();for(Bc(le)?le=ie=pe:ie=le;ie&&ie!==pe;)le=ie,ie=ie.parentNode;t=le===pe?pe.innerHTML:d.getOuterHTML(le);const Pe=g.parse(t),We=q6(Pe),st=We.bind(uk).getOr(Pe);We.each(ct=>ct.replace(Y));const ke=Y.children(),ye=(a=Y.parent)!==null&&a!==void 0?a:Pe;Y.unwrap();const Be=Et(ke,ct=>mk(e.schema,ct,ye));tx(Be,e.schema,st),ck(g.getNodeFilters(),g.getAttributeFilters(),Pe),t=S.serialize(Pe),le===pe?d.setHTML(pe,t):d.setOuterHTML(le,t)}return W6(e,v),bk(e,d.get("mce_marker")),nO(e.getBody()),oO(d,c.getStart(),e.schema),Lw(e.schema,e.getBody(),c.getStart()),t},qy=e=>e instanceof Da,G6=e=>{Pf(e)&&Na(e.getBody()).each(t=>{const o=t.getNode(),s=xl(o)?Na(o).getOr(t):t;e.selection.setRng(s.toRange())})},ym=(e,t,o)=>{e.dom.setHTML(e.getBody(),t),o!==!0&&G6(e)},aO=(e,t,o,s)=>{if(o=Fs(o),o.length===0||/^\s+$/.test(o)){const a='<br data-mce-bogus="1">';t.nodeName==="TABLE"?o="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(o="<li>"+a+"</li>");const c=$s(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),c.toLowerCase())?(o=a,o=e.dom.createHTML(c,m0(e),o)):o||(o=a),ym(e,o,s.no_selection),{content:o,html:o}}else{s.format!=="raw"&&(o=gm({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const a=Xu(X.fromDom(t))?o:qe.trim(o);return ym(e,a,s.no_selection),{content:a,html:a}}},Gy=(e,t,o,s)=>{ck(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const a=gm({validate:!1},e.schema).serialize(o),c=Fs(Xu(X.fromDom(t))?a:qe.trim(a));return ym(e,c,s.no_selection),{content:o,html:c}},K6=(e,t,o)=>I.from(e.getBody()).map(s=>qy(t)?Gy(e,s,t,o):aO(e,s,t,o)).getOr({content:t,html:qy(o.content)?"":o.content}),iO=e=>Pt(e)?e:Jt,wm=(e,t,o)=>{let s=e.dom;const a=iO(o);for(;s.parentNode;){s=s.parentNode;const c=X.fromDom(s),d=t(c);if(d.isSome())return d;if(a(c))break}return I.none()},ox=(e,t,o)=>{const s=t(e),a=iO(o);return s.orThunk(()=>a(e)?I.none():wm(e,t,a))},nx=c1,Ky=(e,t,o)=>{const s=e.formatter.get(o);if(s)for(let a=0;a<s.length;a++){const c=s[a];if(Tl(c)&&c.inherit===!1&&e.dom.is(t,c.selector))return!0}return!1},Yy=(e,t,o,s,a)=>{const c=e.dom.getRoot();if(t===c)return!1;const d=e.dom.getParent(t,g=>Ky(e,g,o)?!0:g.parentNode===c||!!yu(e,g,o,s,!0));return!!yu(e,d,o,s,a)},sx=(e,t,o)=>Cr(o)&&nx(t,o.inline)||uu(o)&&nx(t,o.block)?!0:Tl(o)?dt(t)&&e.is(t,o.selector):!1,vk=(e,t,o,s,a,c)=>{const d=o[s],g=s==="attributes";if(Pt(o.onmatch))return o.onmatch(t,o,s);if(d){if(pd(d)){for(let v=0;v<d.length;v++)if(g?e.getAttrib(t,d[v]):Jv(e,t,d[v]))return!0}else for(const v in d)if(jt(d,v)){const S=g?e.getAttrib(t,v):Jv(e,t,v),R=dm(d[v],c),D=_o(S)||bs(S);if(D&&_o(R))continue;if(a&&D&&!o.exact||(!a||o.exact)&&!nx(S,DC(R,v)))return!1}}return!0},yu=(e,t,o,s,a)=>{const c=e.formatter.get(o),d=e.dom;if(c&&dt(t))for(let g=0;g<c.length;g++){const v=c[g];if(sx(e.dom,t,v)&&vk(d,t,v,"attributes",a,s)&&vk(d,t,v,"styles",a,s)){const S=v.classes;if(S){for(let R=0;R<S.length;R++)if(!e.dom.hasClass(t,dm(S[R],s)))return}return v}}},Hp=(e,t,o,s,a)=>{if(s)return Yy(e,s,t,o,a);if(s=e.selection.getNode(),Yy(e,s,t,o,a))return!0;const c=e.selection.getStart();return!!(c!==s&&Yy(e,c,t,o,a))},Xy=(e,t,o)=>{const s=[],a={},c=e.selection.getStart();return e.dom.getParent(c,d=>{for(let g=0;g<t.length;g++){const v=t[g];!a[v]&&yu(e,d,v,o)&&(a[v]=!0,s.push(v))}},e.dom.getRoot()),s},lO=(e,t)=>{const o=a=>Lo(a,X.fromDom(e.getBody())),s=(a,c)=>yu(e,a.dom,c)?I.some(c):I.none();return I.from(e.selection.getStart(!0)).bind(a=>ox(X.fromDom(a),c=>Zs(t,d=>s(c,d)),o)).getOrNull()},cO=(e,t)=>{const o=e.formatter.get(t),s=e.dom;if(o&&e.selection.isEditable()){const a=e.selection.getStart(),c=Qv(s,a);for(let d=o.length-1;d>=0;d--){const g=o[d];if(!Tl(g))return!0;for(let v=c.length-1;v>=0;v--)if(s.is(c[v],g.selector))return!0}}return!1},dO=(e,t,o)=>Ir(o,(s,a)=>{const c=W3(e,a);return e.formatter.matchNode(t,a,{},c)?s.concat([a]):s},[]),I1=Ns,Jy=(e,t)=>e.importNode(t,!0),Qy=e=>{if(e){const t=new Ys(e,e);for(let o=t.current();o;o=t.next())if(Le(o))return o}return null},zp=e=>{const t=X.fromTag("span");return Yn(t,{id:xC,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Pn(t,X.fromText(I1)),t},Y6=e=>{const t=Qy(e);return t&&t.data.charAt(0)===I1&&t.deleteData(0,1),t},e2=(e,t,o)=>{const s=e.dom,a=e.selection;if(BC(t))Mp(e,!1,X.fromDom(t),o,!0);else{const c=a.getRng(),d=s.getParent(t,s.isBlock),g=c.startContainer,v=c.startOffset,S=c.endContainer,R=c.endOffset,D=Y6(t);s.remove(t,!0),g===D&&v>0&&c.setStart(D,v-1),S===D&&R>0&&c.setEnd(D,R-1),d&&s.isEmpty(d)&&Nd(X.fromDom(d)),a.setRng(c)}},yk=(e,t,o)=>{const s=e.dom,a=e.selection;if(t)e2(e,t,o);else if(t=lm(e.getBody(),a.getStart()),!t)for(;t=s.get(xC);)e2(e,t,o)},X6=(e,t,o)=>{var s,a;const c=e.dom,d=c.getParent(o,it(NC,e.schema));d&&c.isEmpty(d)?(s=o.parentNode)===null||s===void 0||s.replaceChild(t,o):(mv(X.fromDom(o)),c.isEmpty(o)?(a=o.parentNode)===null||a===void 0||a.replaceChild(t,o):c.insertAfter(t,o))},wk=(e,t)=>(e.appendChild(t),t),Ck=(e,t)=>{var o;const s=xn(e,(c,d)=>wk(c,d.cloneNode(!1)),t),a=(o=s.ownerDocument)!==null&&o!==void 0?o:document;return wk(s,a.createTextNode(I1))},J6=(e,t,o,s,a,c)=>{const d=e.formatter,g=e.dom,v=Et(ze(d.get()),D=>D!==s&&!Fn(D,"removeformat")),S=dO(e,o,v);if(Et(S,D=>!SD(e,D,s)).length>0){const D=o.cloneNode(!1);return g.add(t,D),d.remove(s,a,D,c),g.remove(D),I.some(D)}else return I.none()},uO=(e,t,o)=>{let s;const a=e.selection,c=e.formatter.get(t);if(!c)return;const d=a.getRng();let g=d.startOffset;const S=d.startContainer.nodeValue;s=lm(e.getBody(),a.getStart());const R=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(S&&g>0&&g<S.length&&R.test(S.charAt(g))&&R.test(S.charAt(g-1))){const D=a.getBookmark();d.collapse(!0);let P=Rf(e.dom,d,c);P=ry(P),e.formatter.apply(t,o,P),a.moveToBookmark(D)}else{let D=s?Qy(s):null;(!s||(D==null?void 0:D.data)!==I1)&&(s=Jy(e.getDoc(),zp(!0).dom),D=s.firstChild,d.insertNode(s),g=1),e.formatter.apply(t,o,s),a.setCursorLocation(D,g)}},Vp=(e,t,o,s)=>{const a=e.dom,c=e.selection;let d=!1;const g=e.formatter.get(t);if(!g)return;const v=c.getRng(),S=v.startContainer,R=v.startOffset;let D=S;Le(S)&&(R!==S.data.length&&(d=!0),D=D.parentNode);const P=[];let j;for(;D;){if(yu(e,D,t,o,s)){j=D;break}D.nextSibling&&(d=!0),P.push(D),D=D.parentNode}if(j)if(d){const K=c.getBookmark();v.collapse(!0);let Z=Rf(a,v,g,!0);Z=ry(Z),e.formatter.remove(t,o,Z,s),c.moveToBookmark(K)}else{const K=lm(e.getBody(),j),Z=Ne(K)?a.getParents(j.parentNode,kn,K):[],Y=zp(!1).dom;X6(e,Y,K??j);const ae=J6(e,Y,j,t,o,s),le=Ck([...P,...ae.toArray(),...Z],Y);K&&e2(e,K,Ne(K)),c.setCursorLocation(le,1),a.isEmpty(j)&&a.remove(j)}},mO=(e,t,o)=>{const s=e.selection,a=e.getBody();yk(e,null,o),(t===8||t===46)&&s.isCollapsed()&&s.getStart().innerHTML===I1&&yk(e,lm(a,s.getStart()),!0),(t===37||t===39)&&yk(e,lm(a,s.getStart()),!0)},_k=e=>Le(e)&&Fl(e.data,uo),fO=e=>{e.on("mouseup keydown",t=>{mO(e,t.keyCode,_k(e.selection.getRng().endContainer))})},t2=e=>{const t=zp(!1),o=Ck(e,t.dom);return{caretContainer:t,caretPosition:Ce(o,0)}},Cm=(e,t)=>{const{caretContainer:o,caretPosition:s}=t2(t);return As(X.fromDom(e),o),en(X.fromDom(e)),s},gO=(e,t)=>{const{caretContainer:o,caretPosition:s}=t2(t);return e.insertNode(o.dom),s},rl=(e,t)=>{if(Vi(t.dom))return!1;const o=e.schema.getTextInlineElements();return jt(o,po(t))&&!Vi(t.dom)&&!bl(t.dom)},td={},o2=$a(["pre"]),pO=(e,t)=>{td[e]||(td[e]=[]),td[e].push(t)},Q6=(e,t)=>{jt(td,e)&&Ie(td[e],o=>{o(t)})};pO("pre",e=>{const t=e.selection.getRng(),o=a=>c=>{const d=c.previousSibling;return o2(d)&&Io(a,d)},s=(a,c)=>{const d=X.fromDom(c),g=gl(d).dom;en(d),Zr(X.fromDom(a),[X.fromTag("br",g),X.fromTag("br",g),...Mn(d)])};if(!t.collapsed){const a=e.selection.getSelectedBlocks(),c=Et(Et(a,o2),o(a));Ie(c,d=>{s(d.previousSibling,d)})}});const kk=["fontWeight","fontStyle","color","fontSize","fontFamily"],L1=e=>ue(e.styles)&&bn(ze(e.styles),t=>Io(kk,t)),Sk=e=>Ao(e,t=>Cr(t)&&t.inline==="span"&&L1(t)),Ek=(e,t)=>{const o=e.get(t);return ce(o)?Sk(o):I.none()},Tk=(e,t)=>zi(t,Ce.fromRangeStart(e)).isNone(),n2=(e,t)=>fi(t,Ce.fromRangeEnd(e)).exists(o=>!Jn(o.getNode())||fi(t,o).isSome())===!1,hO=e=>t=>Od(t)&&e.isEditable(t),eM=e=>{const t=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(t.length===1)return Tk(o,t[0])&&n2(o,t[0])?t:[];{const s=Ln(t).filter(d=>Tk(o,d)).toArray(),a=mt(t).filter(d=>n2(o,d)).toArray(),c=t.slice(1,-1);return s.concat(c).concat(a)}},bO=e=>Et(eM(e),hO(e.dom)),xO=e=>Et(e.getSelectedBlocks(),hO(e.dom)),hi=qe.each,rx=e=>dt(e)&&!ol(e)&&!Vi(e)&&!bl(e),Ok=(e,t)=>{for(let o=e;o;o=o[t]){if(Le(o)&&zr(o.data))return e;if(dt(o)&&!ol(o))return o}return e},s2=(e,t,o)=>{const s=Fy(e),a=Va(t)&&e.dom.isEditable(t),c=Va(o)&&e.dom.isEditable(o);if(a&&c){const d=Ok(t,"previousSibling"),g=Ok(o,"nextSibling");if(s.compare(d,g)){for(let v=d.nextSibling;v&&v!==g;){const S=v;v=v.nextSibling,d.appendChild(S)}return e.dom.remove(g),qe.each(qe.grep(g.childNodes),v=>{d.appendChild(v)}),d}}return o},Ak=(e,t,o,s)=>{var a;if(s&&t.merge_siblings!==!1){const c=(a=s2(e,Yv(s),s))!==null&&a!==void 0?a:s;s2(e,c,Yv(c,!0))}},ax=(e,t,o)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";hi(e.select(s,o),a=>{rx(a)&&e.isEditable(a)&&hi(t.styles,(c,d)=>{e.setStyle(a,d,"")})})}},od=(e,t,o)=>{hi(e.childNodes,s=>{rx(s)&&(t(s)&&o(s),s.hasChildNodes()&&od(s,t,o))})},$p=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},ix=(e,t)=>o=>!!(o&&Jv(e,o,t)),r2=(e,t,o)=>s=>{e.setStyle(s,t,o),s.getAttribute("style")===""&&s.removeAttribute("style"),$p(e,s)},_m=me.generate([{keep:[]},{rename:["name"]},{removed:[]}]),vO=/^(src|href|style)$/,Nk=qe.each,lx=c1,yO=e=>/^(TR|TH|TD)$/.test(e.nodeName),Rk=(e,t,o)=>e.isChildOf(t,o)&&t!==o&&!e.isBlock(o),Dk=(e,t,o)=>{let s=t[o?"startContainer":"endContainer"],a=t[o?"startOffset":"endOffset"];if(dt(s)){const c=s.childNodes.length-1;!o&&a&&a--,s=s.childNodes[a>c?c:a]}return Le(s)&&o&&a>=s.data.length&&(s=new Ys(s,e.getBody()).next()||s),Le(s)&&!o&&a===0&&(s=new Ys(s,e.getBody()).prev()||s),s},wO=(e,t)=>{const o=t?"firstChild":"lastChild",s=e[o];return yO(e)&&s?e.nodeName==="TR"&&s[o]||s:e},Mk=(e,t,o,s)=>{var a;const c=e.create(o,s);return(a=t.parentNode)===null||a===void 0||a.insertBefore(c,t),c.appendChild(t),c},CO=(e,t,o,s,a)=>{const c=X.fromDom(t),d=X.fromDom(e.create(s,a)),g=o?ch(c):lv(c);return Zr(d,g),o?(As(c,d),ms(d,c)):(Vn(c,d),Pn(d,c)),d.dom},Zi=(e,t)=>t.links&&e.nodeName==="A",Bk=(e,t,o)=>{const s=t.parentNode;let a;const c=e.dom,d=$s(e);uu(o)&&s===c.getRoot()&&(!o.list_block||!lx(t,o.list_block))&&Ie(Dt(t.childNodes),g=>{Af(e,d,g.nodeName.toLowerCase())?a?a.appendChild(g):(a=Mk(c,g,d),c.setAttribs(a,m0(e))):a=null}),!(G3(o)&&!lx(o.inline,t))&&c.remove(t,!0)},F1=(e,t,o)=>E(e)?{name:t,value:null}:{name:e,value:dm(t,o)},_O=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},Pk=(e,t,o,s,a)=>{let c=!1;Nk(o.styles,(d,g)=>{const{name:v,value:S}=F1(g,d,s),R=DC(S,v);(o.remove_similar||Rn(S)||!dt(a)||lx(Jv(e,a,v),R))&&e.setStyle(t,v,""),c=!0}),c&&_O(e,t)},kO=(e,t,o)=>{t==="removeformat"?Ie(xO(e.selection),s=>{Ie(kk,a=>e.dom.setStyle(s,a,"")),_O(e.dom,s)}):Ek(e.formatter,t).each(s=>{Ie(xO(e.selection),a=>Pk(e.dom,a,s,o,null))})},a2=(e,t,o,s,a)=>{const c=e.dom,d=Fy(e),g=e.schema;if(Cr(t)&&tm(g,t.inline)&&Ld(g,s)&&s.parentElement===e.getBody())return Bk(e,s,t),_m.removed();if(!t.ceFalseOverride&&s&&c.getContentEditableParent(s)==="false"||s&&!sx(c,s,t)&&!Zi(s,t))return _m.keep();const v=s,S=t.preserve_attributes;if(Cr(t)&&t.remove==="all"&&ce(S)){const R=Et(c.getAttribs(v),D=>Io(S,D.name.toLowerCase()));if(c.removeAllAttribs(v),Ie(R,D=>c.setAttrib(v,D.name,D.value)),R.length>0)return _m.rename("span")}if(t.remove!=="all"){Pk(c,v,t,o,a),Nk(t.attributes,(D,P)=>{const{name:j,value:K}=F1(P,D,o);if(t.remove_similar||Rn(K)||!dt(a)||lx(c.getAttrib(a,j),K)){if(j==="class"){const Z=c.getAttrib(v,j);if(Z){let Y="";if(Ie(Z.split(/\s+/),ae=>{/mce\-\w+/.test(ae)&&(Y+=(Y?" ":"")+ae)}),Y){c.setAttrib(v,j,Y);return}}}if(vO.test(j)&&v.removeAttribute("data-mce-"+j),j==="style"&&$a(["li"])(v)&&c.getStyle(v,"list-style-type")==="none"){v.removeAttribute(j),c.setStyle(v,"list-style-type","none");return}j==="class"&&v.removeAttribute("className"),v.removeAttribute(j)}}),Nk(t.classes,D=>{D=dm(D,o),(!dt(a)||c.hasClass(a,D))&&c.removeClass(v,D)});const R=c.getAttribs(v);for(let D=0;D<R.length;D++){const P=R[D].nodeName;if(!d.isAttributeInternal(P))return _m.keep()}}return t.remove!=="none"?(Bk(e,v,t),_m.removed()):_m.keep()},SO=(e,t,o,s,a)=>{let c;return t.parentNode&&Ie(Qv(e.dom,t.parentNode).reverse(),d=>{if(!c&&dt(d)&&d.id!=="_start"&&d.id!=="_end"){const g=yu(e,d,o,s,a);g&&g.split!==!1&&(c=d)}}),c},tM=(e,t,o,s)=>a2(e,t,o,s,s).fold(Je(s),a=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,a)),Je(null)),oM=(e,t,o,s,a,c,d,g)=>{var v,S;let R,D;const P=e.dom;if(o){const j=o.parentNode;for(let K=s.parentNode;K&&K!==j;K=K.parentNode){let Z=P.clone(K,!1);for(let Y=0;Y<t.length&&(Z=tM(e,t[Y],g,Z),Z!==null);Y++);Z&&(R&&Z.appendChild(R),D||(D=Z),R=Z)}(!d.mixed||!P.isBlock(o))&&(s=(v=P.split(o,s))!==null&&v!==void 0?v:s),R&&D&&((S=a.parentNode)===null||S===void 0||S.insertBefore(R,a),D.appendChild(a),Cr(d)&&Ak(e,d,g,R))}return s},nM=(e,t,o,s,a)=>{const c=e.formatter.get(t),d=c[0],g=e.dom,v=e.selection,S=Z=>{const Y=SO(e,Z,t,o,a);return oM(e,c,Y,Z,Z,!0,d,o)},R=Z=>ol(Z)&&dt(Z)&&(Z.id==="_start"||Z.id==="_end"),D=Z=>bn(c,Y=>cx(e,Y,o,Z,Z)),P=Z=>{const Y=Dt(Z.childNodes),le=D(Z)||bn(c,Pe=>sx(g,Z,Pe)),ie=Z.parentNode;if(!le&&Ne(ie)&&gi(d)&&D(ie),d.deep&&Y.length)for(let Pe=0;Pe<Y.length;Pe++)P(Y[Pe]);Ie(["underline","line-through","overline"],Pe=>{dt(Z)&&e.dom.getStyle(Z,"text-decoration")===Pe&&Z.parentNode&&Z3(g,Z.parentNode)===Pe&&cx(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Pe}},void 0,Z)})},j=Z=>{const Y=g.get(Z?"_start":"_end");if(Y){let ae=Y[Z?"firstChild":"lastChild"];return R(ae)&&(ae=ae[Z?"firstChild":"lastChild"]),Le(ae)&&ae.data.length===0&&(ae=Z?Y.previousSibling||Y.nextSibling:Y.nextSibling||Y.previousSibling),g.remove(Y,!0),ae}else return null},K=Z=>{let Y,ae,le=Rf(g,Z,c,Z.collapsed);if(d.split){if(le=ry(le),Y=Dk(e,le,!0),ae=Dk(e,le),Y!==ae){if(Y=wO(Y,!0),ae=wO(ae,!1),Rk(g,Y,ae)){const pe=I.from(Y.firstChild).getOr(Y);S(CO(g,pe,!0,"span",{id:"_start","data-mce-type":"bookmark"})),j(!0);return}if(Rk(g,ae,Y)){const pe=I.from(ae.lastChild).getOr(ae);S(CO(g,pe,!1,"span",{id:"_end","data-mce-type":"bookmark"})),j(!1);return}Y=Mk(g,Y,"span",{id:"_start","data-mce-type":"bookmark"}),ae=Mk(g,ae,"span",{id:"_end","data-mce-type":"bookmark"});const ie=g.createRng();ie.setStartAfter(Y),ie.setEndBefore(ae),m1(g,ie,pe=>{Ie(pe,Pe=>{!ol(Pe)&&!ol(Pe.parentNode)&&S(Pe)})}),S(Y),S(ae),Y=j(!0),ae=j()}else Y=ae=S(Y);le.startContainer=Y.parentNode?Y.parentNode:Y,le.startOffset=g.nodeIndex(Y),le.endContainer=ae.parentNode?ae.parentNode:ae,le.endOffset=g.nodeIndex(ae)+1}m1(g,le,ie=>{Ie(ie,P)})};if(s){if($o(s)){const Z=g.createRng();Z.setStartBefore(s),Z.setEndAfter(s),K(Z)}else K(s);KC(e,t,s,o);return}!v.isCollapsed()||!Cr(d)||du(e).length?(OC(e,()=>Gv(e,K),Z=>Cr(d)&&Hp(e,t,o,Z)),e.nodeChanged()):Vp(e,t,o,a),kO(e,t,o),KC(e,t,s,o)},i2=(e,t,o,s,a)=>{(s||e.selection.isEditable())&&nM(e,t,o,s,a)},cx=(e,t,o,s,a)=>a2(e,t,o,s,a).fold(Jt,c=>(e.dom.rename(s,c),!0),kn),EO=qe.each,TO=(e,t,o,s)=>{const a=c=>{if(Va(c)&&dt(c.parentNode)&&e.isEditable(c)){const d=Z3(e,c.parentNode);e.getStyle(c,"color")&&d?e.setStyle(c,"text-decoration",d):e.getStyle(c,"text-decoration")===d&&e.setStyle(c,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(qe.walk(s,a,"childNodes"),a(s))},sM=(e,t,o,s)=>{if(t.styles&&t.styles.backgroundColor){const a=ix(e,"fontSize");od(s,c=>a(c)&&e.isEditable(c),r2(e,"backgroundColor",dm(t.styles.backgroundColor,o)))}},rM=(e,t,o,s)=>{if(Cr(t)&&(t.inline==="sub"||t.inline==="sup")){const a=ix(e,"fontSize");od(s,d=>a(d)&&e.isEditable(d),r2(e,"fontSize",""));const c=Et(e.select(t.inline==="sup"?"sub":"sup",s),e.isEditable);e.remove(c,!0)}},Ik=(e,t,o,s)=>{EO(t,a=>{Cr(a)&&EO(e.dom.select(a.inline,s),c=>{rx(c)&&cx(e,a,o,c,a.exact?c:null)}),ax(e.dom,a,s)})},l2=(e,t,o,s,a)=>{const c=a.parentNode;yu(e,c,o,s)&&cx(e,t,s,a)||t.merge_with_parents&&c&&e.dom.getParent(c,d=>yu(e,d,o,s)?(cx(e,t,s,a),!0):!1)},dx=qe.each,OO=(e,t,o,s)=>{if(su(e)&&Cr(t)&&o.parentNode){const a=Vg(e.schema),c=DT(X.fromDom(o),d=>Vi(d.dom));return oi(a,s)&&Jo(X.fromDom(o.parentNode),!1)&&!c}else return!1},c2=(e,t,o,s)=>{if(dx(o.styles,(a,c)=>{e.setStyle(t,c,dm(a,s))}),o.styles){const a=e.getAttrib(t,"style");a&&e.setAttrib(t,"data-mce-style",a)}},aM=(e,t,o,s)=>{const a=e.formatter.get(t),c=a[0],d=!s&&e.selection.isCollapsed(),g=e.dom,v=e.selection,S=(K,Z=c)=>{Pt(Z.onformat)&&Z.onformat(K,Z,o,s),c2(g,K,Z,o),dx(Z.attributes,(Y,ae)=>{g.setAttrib(K,ae,dm(Y,o))}),dx(Z.classes,Y=>{const ae=dm(Y,o);g.hasClass(K,ae)||g.addClass(K,ae)})},R=(K,Z)=>{let Y=!1;return dx(K,ae=>Tl(ae)?g.getContentEditable(Z)==="false"&&!ae.ceFalseOverride||Ne(ae.collapsed)&&ae.collapsed!==d?!0:g.is(Z,ae.selector)&&!Vi(Z)?(S(Z,ae),Y=!0,!1):!0:!1),Y},D=K=>{if(bt(K)){const Z=g.create(K);return S(Z),Z}else return null},P=(K,Z,Y)=>{const ae=[];let le=!0;const ie=c.inline||c.block,pe=D(ie),Pe=ke=>j3(c)&&yu(e,ke,t,o),We=(ke,ye,Be)=>{const ct=q3(c)&&NC(e.schema,ke)&&Af(e,ye,ie);return Be&&ct},st=(ke,ye,Be,ct)=>{const Ct=ke.nodeName.toLowerCase(),co=Af(e,ie,Ct)&&Af(e,ye,ie),fo=!Y&&Le(ke)&&Rd(ke.data),on=Vi(ke),Cn=!Cr(c)||!K.isBlock(ke);return(Be||ct)&&co&&!fo&&!on&&Cn};m1(K,Z,ke=>{let ye;const Be=ct=>{let Ct=!1,co=le,fo=!1;const on=ct.parentNode,Cn=on.nodeName.toLowerCase(),ps=K.getContentEditable(ct);Ne(ps)&&(co=le,le=ps==="true",Ct=!0,fo=Xv(e,ct));const fa=le&&!Ct;if(Jn(ct)&&!OO(e,c,ct,Cn)){ye=null,uu(c)&&K.remove(ct);return}if(Pe(ct)){ye=null;return}if(We(ct,Cn,fa)){const nn=K.rename(ct,ie);S(nn),ae.push(nn),ye=null;return}if(Tl(c)){let nn=R(a,ct);if(!nn&&Ne(on)&&gi(c)&&(nn=R(a,on)),!Cr(c)||nn){ye=null;return}}Ne(pe)&&st(ct,Cn,fa,fo)?(ye||(ye=K.clone(pe,!1),on.insertBefore(ye,ct),ae.push(ye)),fo&&Ct&&(le=co),ye.appendChild(ct)):(ye=null,Ie(Dt(ct.childNodes),Be),Ct&&(le=co),ye=null)};Ie(ke,Be)}),c.links===!0&&Ie(ae,ke=>{const ye=Be=>{Be.nodeName==="A"&&S(Be,c),Ie(Dt(Be.childNodes),ye)};ye(ke)}),Ie(ae,ke=>{const ye=Ct=>{let co=0;return Ie(Ct.childNodes,fo=>{!$3(fo)&&!ol(fo)&&co++}),co},Be=Ct=>Ao(Ct.childNodes,Of).filter(fo=>K.getContentEditable(fo)!=="false"&&sx(K,fo,c)).map(fo=>{const on=K.clone(fo,!1);return S(on),K.replace(on,Ct,!0),K.remove(fo,!0),on}).getOr(Ct),ct=ye(ke);if((ae.length>1||!K.isBlock(ke))&&ct===0){K.remove(ke,!0);return}(Cr(c)||uu(c)&&c.wrapper)&&(!c.exact&&ct===1&&(ke=Be(ke)),Ik(e,a,o,ke),l2(e,c,t,o,ke),sM(K,c,o,ke),TO(K,c,o,ke),rM(K,c,o,ke),Ak(e,c,o,ke))})},j=$o(s)?s:v.getNode();if(g.getContentEditable(j)==="false"&&!Xv(e,j)){s=j,R(a,s),GC(e,t,s,o);return}if(c){if(s)if($o(s)){if(!R(a,s)){const K=g.createRng();K.setStartBefore(s),K.setEndAfter(s),P(g,Rf(g,K,a),!0)}}else P(g,s,!0);else!d||!Cr(c)||du(e).length?(v.setRng(fk(v.getRng())),OC(e,()=>{Gv(e,(K,Z)=>{const Y=Z?K:Rf(g,K,a);P(g,Y,!1)})},kn),e.nodeChanged()):uO(e,t,o),Ek(e.formatter,t).each(K=>{Ie(bO(e.selection),Z=>c2(g,Z,K,o))});Q6(t,e)}GC(e,t,s,o)},AO=(e,t,o,s)=>{(s||e.selection.isEditable())&&aM(e,t,o,s)},NO=e=>jt(e,"vars"),Up=(e,t)=>{e.set({}),t.on("NodeChange",o=>{d2(t,o.element,e.get())}),t.on("FormatApply FormatRemove",o=>{const s=I.from(o.node).map(a=>$o(a)?a:a.startContainer).bind(a=>dt(a)?I.some(a):I.from(a.parentElement)).getOrThunk(()=>RO(t));d2(t,s,e.get())})},RO=e=>e.selection.getStart(),ux=(e,t,o,s,a)=>_r(t,g=>{const v=e.formatter.matchNode(g,o,a??{},s);return!Bs(v)},g=>Ky(e,g,o)?!0:s?!1:Ne(e.formatter.matchNode(g,o,a,!0))),DO=(e,t)=>{const o=t??RO(e);return Et(Qv(e.dom,o),s=>dt(s)&&!bl(s))},d2=(e,t,o)=>{const s=DO(e,t);Qo(o,(a,c)=>{const d=g=>{const v=ux(e,s,c,g.similar,NO(g)?g.vars:void 0),S=v.isSome();if(g.state.get()!==S){g.state.set(S);const R=v.getOr(t);NO(g)?g.callback(S,{node:R,format:c,parents:s}):Ie(g.callbacks,D=>D(S,{node:R,format:c,parents:s}))}};Ie([a.withSimilar,a.withoutSimilar],d),Ie(a.withVars,d)})},MO=(e,t,o,s,a,c)=>{const d=t.get();Ie(o.split(","),g=>{const v=an(d,g).getOrThunk(()=>{const R={withSimilar:{state:_s(!1),similar:!0,callbacks:[]},withoutSimilar:{state:_s(!1),similar:!1,callbacks:[]},withVars:[]};return d[g]=R,R}),S=()=>{const R=DO(e);return ux(e,R,g,a,c).isSome()};if(Bs(c)){const R=a?v.withSimilar:v.withoutSimilar;R.callbacks.push(s),R.callbacks.length===1&&R.state.set(S())}else v.withVars.push({state:_s(S()),similar:a,vars:c,callback:s})}),t.set(d)},BO=(e,t,o)=>{const s=e.get();Ie(t.split(","),a=>an(s,a).each(c=>{s[a]={withSimilar:{...c.withSimilar,callbacks:Et(c.withSimilar.callbacks,d=>d!==o)},withoutSimilar:{...c.withoutSimilar,callbacks:Et(c.withoutSimilar.callbacks,d=>d!==o)},withVars:Et(c.withVars,d=>d.callback!==o)}})),e.set(s)},PO=(e,t,o,s,a,c)=>(MO(e,t,o,s,a,c),{unbind:()=>BO(t,o,s)}),u2=(e,t,o,s)=>{const a=e.formatter.get(t);a&&(Hp(e,t,o,s)&&(!("toggle"in a[0])||a[0].toggle)?i2(e,t,o,s):AO(e,t,o,s))},IO=qe.explode,LO=()=>{const e={};return{addFilter:(a,c)=>{Ie(IO(a),d=>{jt(e,d)||(e[d]={name:d,callbacks:[]}),e[d].callbacks.push(c)})},getFilters:()=>kc(e),removeFilter:(a,c)=>{Ie(IO(a),d=>{if(jt(e,d))if(Ne(c)){const g=e[d],v=Et(g.callbacks,S=>S!==c);v.length>0?g.callbacks=v:delete e[d]}else delete e[d]})}}},Lk=(e,t)=>{Ie(t,o=>{e.attr(o,null)})},FO=(e,t,o)=>{e.addNodeFilter("font",s=>{Ie(s,a=>{const c=t.parse(a.attr("style")),d=a.attr("color"),g=a.attr("face"),v=a.attr("size");d&&(c.color=d),g&&(c["font-family"]=g),v&&ls(v).each(S=>{c["font-size"]=o[S-1]}),a.name="span",a.attr("style",t.serialize(c)),Lk(a,["color","face","size"])})})},iM=(e,t,o)=>{e.addNodeFilter("strike",s=>{const a=t.type!=="html4";Ie(s,c=>{if(a)c.name="s";else{const d=o.parse(c.attr("style"));d["text-decoration"]="line-through",c.name="span",c.attr("style",o.serialize(d))}})})},lM=(e,t,o)=>{var s;const a=Ug();t.convert_fonts_to_spans&&FO(e,a,qe.explode((s=t.font_size_legacy_values)!==null&&s!==void 0?s:"")),iM(e,o,a)},cM=(e,t,o)=>{t.inline_styles&&lM(e,t,o)},HO=(e,t,o)=>{t.addNodeFilter("br",(s,a,c)=>{const d=qe.extend({},o.getBlockElements()),g=o.getNonEmptyElements(),v=o.getWhitespaceElements();d.body=1;const S=R=>R.name in d||tc(o,R);for(let R=0,D=s.length;R<D;R++){let P=s[R],j=P.parent;if(j&&S(j)&&P===j.lastChild){let K=P.prev;for(;K;){const Z=K.name;if(Z!=="span"||K.attr("data-mce-type")!=="bookmark"){Z==="br"&&(P=null);break}K=K.prev}if(P&&(P.remove(),M1(o,g,v,j))){const Z=o.getElementRule(j.name);Z&&(Z.removeEmpty?j.remove():Z.paddEmpty&&zy(e,c,S,j))}}else{let K=P;for(;j&&j.firstChild===K&&j.lastChild===K&&(K=j,!d[j.name]);)j=j.parent;if(K===j){const Z=new Da("#text",3);Z.value=uo,P.replace(Z)}}}})},Fk=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),zO=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},Hk=e=>{const[t,...o]=e.split(","),s=o.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(a){const c=a[2]===";base64",d=c?zO(s):decodeURIComponent(s);return I.some({type:a[1],data:d,base64Encoded:c})}else return I.none()},VO=(e,t,o=!0)=>{let s=t;if(o)try{s=atob(t)}catch{return I.none()}const a=new Uint8Array(s.length);for(let c=0;c<a.length;c++)a[c]=s.charCodeAt(c);return I.some(new Blob([a],{type:e}))},or=e=>new Promise((t,o)=>{Hk(e).bind(({type:s,data:a,base64Encoded:c})=>VO(s,a,c)).fold(()=>o("Invalid data URI"),t)}),dM=e=>yn(e,"blob:")?Fk(e):yn(e,"data:")?or(e):Promise.reject("Unknown URI format"),$O=e=>new Promise((t,o)=>{const s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{var a;o((a=s.error)===null||a===void 0?void 0:a.message)},s.readAsDataURL(e)});let UO=0;const zk=e=>"blobid"+UO++,Vk=(e,t,o)=>Hk(e).bind(({data:s,type:a,base64Encoded:c})=>{if(t&&!c)return I.none();{const d=c?s:btoa(s);return o(d,a)}}),km=(e,t,o)=>{const s=e.create(zk(),t,o);return e.add(s),s},m2=(e,t,o=!1)=>Vk(t,o,(s,a)=>I.from(e.getByData(s,a)).orThunk(()=>VO(a,s).map(c=>km(e,c,s)))),ZO=(e,t)=>{const o=()=>Promise.reject("Invalid data URI");if(yn(t,"blob:")){const s=e.getByUri(t);return Ne(s)?Promise.resolve(s):dM(t).then(a=>$O(a).then(c=>Vk(c,!1,d=>I.some(km(e,a,d))).getOrThunk(o)))}else return yn(t,"data:")?m2(e,t).fold(o,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},$k=e=>Ne(e.attr("data-mce-bogus")),Uk=e=>e.attr("src")===Do.transparentSrc||Ne(e.attr("data-mce-placeholder")),Zk=(e,t)=>{const{blob_cache:o}=t;if(o){const s=a=>{const c=a.attr("src");Uk(a)||$k(a)||_o(c)||m2(o,c,!0).each(d=>{a.attr("src",d.blobUri())})};e.addAttributeFilter("src",a=>Ie(a,s))}},f2=(e,t)=>yn(e,`${t}/`),g2=(e,t,o,s,a)=>{let c;Bs(e)?c="iframe":f2(e,"image")?c="img":f2(e,"video")?c="video":f2(e,"audio")?c="audio":c="iframe";const d=new Da(c,1);return d.attr(c==="audio"?{src:t}:{src:t,width:o,height:s}),(c==="audio"||c==="video")&&d.attr("controls",""),c==="iframe"&&a&&d.attr("sandbox",""),d},p2=(e,t)=>{const o=e.schema;t.remove_trailing_brs&&HO(t,e,o),e.addAttributeFilter("href",a=>{let c=a.length;const d=v=>v.split(" ").filter(R=>R.length>0).concat(["noopener"]).sort().join(" "),g=v=>{const S=v?qe.trim(v):"";return/\b(noopener)\b/g.test(S)?S:d(S)};if(!t.allow_unsafe_link_target)for(;c--;){const v=a[c];v.name==="a"&&v.attr("target")==="_blank"&&v.attr("rel",g(v.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",a=>{let c=a.length,d,g,v,S;for(;c--;)if(S=a[c],S.name==="a"&&S.firstChild&&!S.attr("href"))for(v=S.parent,d=S.lastChild;d&&v;)g=d.prev,v.insert(d,S),d=g}),t.fix_list_elements&&e.addNodeFilter("ul,ol",a=>{let c=a.length,d,g;for(;c--;)if(d=a[c],g=d.parent,g&&(g.name==="ul"||g.name==="ol"))if(d.prev&&d.prev.name==="li")d.prev.append(d);else{const v=new Da("li",1);v.attr("style","list-style-type: none"),d.wrap(v)}});const s=o.getValidClasses();t.validate&&s&&e.addAttributeFilter("class",a=>{var c;let d=a.length;for(;d--;){const g=a[d],v=(c=g.attr("class"))!==null&&c!==void 0?c:"",S=qe.explode(v," ");let R="";for(let D=0;D<S.length;D++){const P=S[D];let j=!1,K=s["*"];K&&K[P]&&(j=!0),K=s[g.name],!j&&K&&K[P]&&(j=!0),j&&(R&&(R+=" "),R+=P)}R.length||(R=null),g.attr("class",R)}}),Zk(e,t),t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",a=>Ie(a,c=>{c.replace(g2(c.attr("type"),c.name==="object"?c.attr("data"):c.attr("src"),c.attr("width"),c.attr("height"),t.sandbox_iframes))})),t.sandbox_iframes&&e.addNodeFilter("iframe",a=>Ie(a,c=>c.attr("sandbox","")))},{entries:H1,setPrototypeOf:z1,isFrozen:hc,getPrototypeOf:mx,getOwnPropertyDescriptor:WO}=Object;let{freeze:bi,seal:nd,create:jO}=Object,{apply:Wk,construct:jk}=typeof Reflect<"u"&&Reflect;Wk||(Wk=function(t,o,s){return t.apply(o,s)}),bi||(bi=function(t){return t}),nd||(nd=function(t){return t}),jk||(jk=function(t,o){return new t(...o)});const fx=bc(Array.prototype.forEach),uM=bc(Array.prototype.pop),gx=bc(Array.prototype.push),h2=bc(String.prototype.toLowerCase),qk=bc(String.prototype.toString),mM=bc(String.prototype.match),sd=bc(String.prototype.replace),fM=bc(String.prototype.indexOf),gM=bc(String.prototype.trim),Dl=bc(RegExp.prototype.test),px=qO(TypeError);function bc(e){return function(t){for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];return Wk(e,t,s)}}function qO(e){return function(){for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return jk(e,o)}}function Yo(e,t,o){var s;o=(s=o)!==null&&s!==void 0?s:h2,z1&&z1(e,null);let a=t.length;for(;a--;){let c=t[a];if(typeof c=="string"){const d=o(c);d!==c&&(hc(t)||(t[a]=d),c=d)}e[c]=!0}return e}function Zp(e){const t=jO(null);for(const[o,s]of H1(e))t[o]=s;return t}function hx(e,t){for(;e!==null;){const s=WO(e,t);if(s){if(s.get)return bc(s.get);if(typeof s.value=="function")return bc(s.value)}e=mx(e)}function o(s){return console.warn("fallback value for",s),null}return o}const Gk=bi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),b2=bi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),x2=bi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),pM=bi(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),v2=bi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),hM=bi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),GO=bi(["#text"]),Kk=bi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),y2=bi(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),KO=bi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),bx=bi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),YO=nd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),bM=nd(/<%[\w\W]*|[\w\W]*%>/gm),xM=nd(/\${[\w\W]*}/gm),vM=nd(/^data-[\-\w.\u00B7-\uFFFF]/),yM=nd(/^aria-[\-\w]+$/),XO=nd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),w2=nd(/^(?:\w+script|data):/i),JO=nd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Yk=nd(/^html$/i);var Xk=Object.freeze({__proto__:null,MUSTACHE_EXPR:YO,ERB_EXPR:bM,TMPLIT_EXPR:xM,DATA_ATTR:vM,ARIA_ATTR:yM,IS_ALLOWED_URI:XO,IS_SCRIPT_OR_DATA:w2,ATTR_WHITESPACE:JO,DOCTYPE_NAME:Yk});const wM=()=>typeof window>"u"?null:window,CM=function(t,o){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let s=null;const a="data-tt-policy-suffix";o&&o.hasAttribute(a)&&(s=o.getAttribute(a));const c="dompurify"+(s?"#"+s:"");try{return t.createPolicy(c,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+c+" could not be created."),null}};function Jk(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wM();const t=go=>Jk(go);if(t.version="3.0.5",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;const o=e.document,s=o.currentScript;let{document:a}=e;const{DocumentFragment:c,HTMLTemplateElement:d,Node:g,Element:v,NodeFilter:S,NamedNodeMap:R=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:D,DOMParser:P,trustedTypes:j}=e,K=v.prototype,Z=hx(K,"cloneNode"),Y=hx(K,"nextSibling"),ae=hx(K,"childNodes"),le=hx(K,"parentNode");if(typeof d=="function"){const go=a.createElement("template");go.content&&go.content.ownerDocument&&(a=go.content.ownerDocument)}let ie,pe="";const{implementation:Pe,createNodeIterator:We,createDocumentFragment:st,getElementsByTagName:ke}=a,{importNode:ye}=o;let Be={};t.isSupported=typeof H1=="function"&&typeof le=="function"&&Pe&&Pe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ct,ERB_EXPR:Ct,TMPLIT_EXPR:co,DATA_ATTR:fo,ARIA_ATTR:on,IS_SCRIPT_OR_DATA:Cn,ATTR_WHITESPACE:ps}=Xk;let{IS_ALLOWED_URI:fa}=Xk,nn=null;const Qe=Yo({},[...Gk,...b2,...x2,...v2,...GO]);let pt=null;const Bo=Yo({},[...Kk,...y2,...KO,...bx]);let vo=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ft=null,qt=null,Ge=!0,Gt=!0,Eo=!1,pn=!0,rn=!1,Mr=!1,Ou=!1,og=!1,ji=!1,dd=!1,Yt=!1,Po=!0,_n=!1;const Ss="user-content-";let ts=!0,cl=!1,Im={},ab=null;const AR=Yo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let NR=null;const RR=Yo({},["audio","video","img","source","image","track"]);let _w=null;const DR=Yo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),kw="http://www.w3.org/1998/Math/MathML",Jx="http://www.w3.org/2000/svg",Lm="http://www.w3.org/1999/xhtml";let ng=Lm,H4=!1,Sw=null;const MR=Yo({},[kw,Jx,Lm],qk);let th;const W8=["application/xhtml+xml","text/html"],BR="text/html";let Ja,Qx=null;const zL=a.createElement("form"),j8=function(we){return we instanceof RegExp||we instanceof Function},PR=function(we){if(!(Qx&&Qx===we)){if((!we||typeof we!="object")&&(we={}),we=Zp(we),th=W8.indexOf(we.PARSER_MEDIA_TYPE)===-1?th=BR:th=we.PARSER_MEDIA_TYPE,Ja=th==="application/xhtml+xml"?qk:h2,nn="ALLOWED_TAGS"in we?Yo({},we.ALLOWED_TAGS,Ja):Qe,pt="ALLOWED_ATTR"in we?Yo({},we.ALLOWED_ATTR,Ja):Bo,Sw="ALLOWED_NAMESPACES"in we?Yo({},we.ALLOWED_NAMESPACES,qk):MR,_w="ADD_URI_SAFE_ATTR"in we?Yo(Zp(DR),we.ADD_URI_SAFE_ATTR,Ja):DR,NR="ADD_DATA_URI_TAGS"in we?Yo(Zp(RR),we.ADD_DATA_URI_TAGS,Ja):RR,ab="FORBID_CONTENTS"in we?Yo({},we.FORBID_CONTENTS,Ja):AR,ft="FORBID_TAGS"in we?Yo({},we.FORBID_TAGS,Ja):{},qt="FORBID_ATTR"in we?Yo({},we.FORBID_ATTR,Ja):{},Im="USE_PROFILES"in we?we.USE_PROFILES:!1,Ge=we.ALLOW_ARIA_ATTR!==!1,Gt=we.ALLOW_DATA_ATTR!==!1,Eo=we.ALLOW_UNKNOWN_PROTOCOLS||!1,pn=we.ALLOW_SELF_CLOSE_IN_ATTR!==!1,rn=we.SAFE_FOR_TEMPLATES||!1,Mr=we.WHOLE_DOCUMENT||!1,ji=we.RETURN_DOM||!1,dd=we.RETURN_DOM_FRAGMENT||!1,Yt=we.RETURN_TRUSTED_TYPE||!1,og=we.FORCE_BODY||!1,Po=we.SANITIZE_DOM!==!1,_n=we.SANITIZE_NAMED_PROPS||!1,ts=we.KEEP_CONTENT!==!1,cl=we.IN_PLACE||!1,fa=we.ALLOWED_URI_REGEXP||XO,ng=we.NAMESPACE||Lm,vo=we.CUSTOM_ELEMENT_HANDLING||{},we.CUSTOM_ELEMENT_HANDLING&&j8(we.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(vo.tagNameCheck=we.CUSTOM_ELEMENT_HANDLING.tagNameCheck),we.CUSTOM_ELEMENT_HANDLING&&j8(we.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(vo.attributeNameCheck=we.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),we.CUSTOM_ELEMENT_HANDLING&&typeof we.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(vo.allowCustomizedBuiltInElements=we.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),rn&&(Gt=!1),dd&&(ji=!0),Im&&(nn=Yo({},[...GO]),pt=[],Im.html===!0&&(Yo(nn,Gk),Yo(pt,Kk)),Im.svg===!0&&(Yo(nn,b2),Yo(pt,y2),Yo(pt,bx)),Im.svgFilters===!0&&(Yo(nn,x2),Yo(pt,y2),Yo(pt,bx)),Im.mathMl===!0&&(Yo(nn,v2),Yo(pt,KO),Yo(pt,bx))),we.ADD_TAGS&&(nn===Qe&&(nn=Zp(nn)),Yo(nn,we.ADD_TAGS,Ja)),we.ADD_ATTR&&(pt===Bo&&(pt=Zp(pt)),Yo(pt,we.ADD_ATTR,Ja)),we.ADD_URI_SAFE_ATTR&&Yo(_w,we.ADD_URI_SAFE_ATTR,Ja),we.FORBID_CONTENTS&&(ab===AR&&(ab=Zp(ab)),Yo(ab,we.FORBID_CONTENTS,Ja)),ts&&(nn["#text"]=!0),Mr&&Yo(nn,["html","head","body"]),nn.table&&(Yo(nn,["tbody"]),delete ft.tbody),we.TRUSTED_TYPES_POLICY){if(typeof we.TRUSTED_TYPES_POLICY.createHTML!="function")throw px('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof we.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw px('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ie=we.TRUSTED_TYPES_POLICY,pe=ie.createHTML("")}else ie===void 0&&(ie=CM(j,s)),ie!==null&&typeof pe=="string"&&(pe=ie.createHTML(""));bi&&bi(we),Qx=we}},oh=Yo({},["mi","mo","mn","ms","mtext"]),z4=Yo({},["foreignobject","desc","title","annotation-xml"]),xe=Yo({},["title","style","font","a","script"]),ve=Yo({},b2);Yo(ve,x2),Yo(ve,pM);const Ye=Yo({},v2);Yo(Ye,hM);const $e=function(we){let gt=le(we);(!gt||!gt.tagName)&&(gt={namespaceURI:ng,tagName:"template"});const Ut=h2(we.tagName),Ms=h2(gt.tagName);return Sw[we.namespaceURI]?we.namespaceURI===Jx?gt.namespaceURI===Lm?Ut==="svg":gt.namespaceURI===kw?Ut==="svg"&&(Ms==="annotation-xml"||oh[Ms]):!!ve[Ut]:we.namespaceURI===kw?gt.namespaceURI===Lm?Ut==="math":gt.namespaceURI===Jx?Ut==="math"&&z4[Ms]:!!Ye[Ut]:we.namespaceURI===Lm?gt.namespaceURI===Jx&&!z4[Ms]||gt.namespaceURI===kw&&!oh[Ms]?!1:!Ye[Ut]&&(xe[Ut]||!ve[Ut]):!!(th==="application/xhtml+xml"&&Sw[we.namespaceURI]):!1},yt=function(we){gx(t.removed,{element:we});try{we.parentNode.removeChild(we)}catch{we.remove()}},yo=function(we,gt){try{gx(t.removed,{attribute:gt.getAttributeNode(we),from:gt})}catch{gx(t.removed,{attribute:null,from:gt})}if(gt.removeAttribute(we),we==="is"&&!pt[we])if(ji||dd)try{yt(gt)}catch{}else try{gt.setAttribute(we,"")}catch{}},is=function(we){let gt,Ut;if(og)we="<remove></remove>"+we;else{const Nu=mM(we,/^[\r\n\t ]+/);Ut=Nu&&Nu[0]}th==="application/xhtml+xml"&&ng===Lm&&(we='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+we+"</body></html>");const Ms=ie?ie.createHTML(we):we;if(ng===Lm)try{gt=new P().parseFromString(Ms,th)}catch{}if(!gt||!gt.documentElement){gt=Pe.createDocument(ng,"template",null);try{gt.documentElement.innerHTML=H4?pe:Ms}catch{}}const vi=gt.body||gt.documentElement;return we&&Ut&&vi.insertBefore(a.createTextNode(Ut),vi.childNodes[0]||null),ng===Lm?ke.call(gt,Mr?"html":"body")[0]:Mr?gt.documentElement:vi},Bl=function(we){return We.call(we.ownerDocument||we,we,S.SHOW_ELEMENT|S.SHOW_COMMENT|S.SHOW_TEXT,null,!1)},Ba=function(we){return we instanceof D&&(typeof we.nodeName!="string"||typeof we.textContent!="string"||typeof we.removeChild!="function"||!(we.attributes instanceof R)||typeof we.removeAttribute!="function"||typeof we.setAttribute!="function"||typeof we.namespaceURI!="string"||typeof we.insertBefore!="function"||typeof we.hasChildNodes!="function")},ev=function(we){return typeof g=="object"?we instanceof g:we&&typeof we=="object"&&typeof we.nodeType=="number"&&typeof we.nodeName=="string"},Au=function(we,gt,Ut){Be[we]&&fx(Be[we],Ms=>{Ms.call(t,gt,Ut,Qx)})},VL=function(we){let gt;if(Au("beforeSanitizeElements",we,null),Ba(we))return yt(we),!0;const Ut=Ja(we.nodeName);if(Au("uponSanitizeElement",we,{tagName:Ut,allowedTags:nn}),we.hasChildNodes()&&!ev(we.firstElementChild)&&(!ev(we.content)||!ev(we.content.firstElementChild))&&Dl(/<[/\w]/g,we.innerHTML)&&Dl(/<[/\w]/g,we.textContent))return yt(we),!0;if(!nn[Ut]||ft[Ut]){if(!ft[Ut]&&UL(Ut)&&(vo.tagNameCheck instanceof RegExp&&Dl(vo.tagNameCheck,Ut)||vo.tagNameCheck instanceof Function&&vo.tagNameCheck(Ut)))return!1;if(ts&&!ab[Ut]){const Ms=le(we)||we.parentNode,vi=ae(we)||we.childNodes;if(vi&&Ms){const Nu=vi.length;for(let Br=Nu-1;Br>=0;--Br)Ms.insertBefore(Z(vi[Br],!0),Y(we))}}return yt(we),!0}return we instanceof v&&!$e(we)||(Ut==="noscript"||Ut==="noembed"||Ut==="noframes")&&Dl(/<\/no(script|embed|frames)/i,we.innerHTML)?(yt(we),!0):(rn&&we.nodeType===3&&(gt=we.textContent,gt=sd(gt,ct," "),gt=sd(gt,Ct," "),gt=sd(gt,co," "),we.textContent!==gt&&(gx(t.removed,{element:we.cloneNode()}),we.textContent=gt)),Au("afterSanitizeElements",we,null),!1)},$L=function(we,gt,Ut){if(Po&&(gt==="id"||gt==="name")&&(Ut in a||Ut in zL))return!1;if(!(Gt&&!qt[gt]&&Dl(fo,gt))){if(!(Ge&&Dl(on,gt))){if(!pt[gt]||qt[gt]){if(!(UL(we)&&(vo.tagNameCheck instanceof RegExp&&Dl(vo.tagNameCheck,we)||vo.tagNameCheck instanceof Function&&vo.tagNameCheck(we))&&(vo.attributeNameCheck instanceof RegExp&&Dl(vo.attributeNameCheck,gt)||vo.attributeNameCheck instanceof Function&&vo.attributeNameCheck(gt))||gt==="is"&&vo.allowCustomizedBuiltInElements&&(vo.tagNameCheck instanceof RegExp&&Dl(vo.tagNameCheck,Ut)||vo.tagNameCheck instanceof Function&&vo.tagNameCheck(Ut))))return!1}else if(!_w[gt]){if(!Dl(fa,sd(Ut,ps,""))){if(!((gt==="src"||gt==="xlink:href"||gt==="href")&&we!=="script"&&fM(Ut,"data:")===0&&NR[we])){if(!(Eo&&!Dl(Cn,sd(Ut,ps,"")))){if(Ut)return!1}}}}}}return!0},UL=function(we){return we.indexOf("-")>0},ZL=function(we){let gt,Ut,Ms,vi;Au("beforeSanitizeAttributes",we,null);const{attributes:Nu}=we;if(!Nu)return;const Br={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:pt};for(vi=Nu.length;vi--;){gt=Nu[vi];const{name:Ru,namespaceURI:q8}=gt;Ut=Ru==="value"?gt.value:gM(gt.value);const mW=Ut;if(Ms=Ja(Ru),Br.attrName=Ms,Br.attrValue=Ut,Br.keepAttr=!0,Br.forceKeepAttr=void 0,Au("uponSanitizeAttribute",we,Br),Ut=Br.attrValue,Br.forceKeepAttr)continue;if(!Br.keepAttr){yo(Ru,we);continue}if(!pn&&Dl(/\/>/i,Ut)){yo(Ru,we);continue}rn&&(Ut=sd(Ut,ct," "),Ut=sd(Ut,Ct," "),Ut=sd(Ut,co," "));const WL=Ja(we.nodeName);if(!$L(WL,Ms,Ut)){yo(Ru,we);continue}if(_n&&(Ms==="id"||Ms==="name")&&(yo(Ru,we),Ut=Ss+Ut),ie&&typeof j=="object"&&typeof j.getAttributeType=="function"&&!q8)switch(j.getAttributeType(WL,Ms)){case"TrustedHTML":{Ut=ie.createHTML(Ut);break}case"TrustedScriptURL":{Ut=ie.createScriptURL(Ut);break}}if(Ut!==mW)try{q8?we.setAttributeNS(q8,Ru,Ut):we.setAttribute(Ru,Ut)}catch{yo(Ru,we)}}Au("afterSanitizeAttributes",we,null)},uW=function go(we){let gt;const Ut=Bl(we);for(Au("beforeSanitizeShadowDOM",we,null);gt=Ut.nextNode();)Au("uponSanitizeShadowNode",gt,null),!VL(gt)&&(gt.content instanceof c&&go(gt.content),ZL(gt));Au("afterSanitizeShadowDOM",we,null)};return t.sanitize=function(go){let we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},gt,Ut,Ms,vi;if(H4=!go,H4&&(go="<!-->"),typeof go!="string"&&!ev(go))if(typeof go.toString=="function"){if(go=go.toString(),typeof go!="string")throw px("dirty is not a string, aborting")}else throw px("toString is not a function");if(!t.isSupported)return go;if(Ou||PR(we),t.removed=[],typeof go=="string"&&(cl=!1),cl){if(go.nodeName){const Ru=Ja(go.nodeName);if(!nn[Ru]||ft[Ru])throw px("root node is forbidden and cannot be sanitized in-place")}}else if(go instanceof g)gt=is("<!---->"),Ut=gt.ownerDocument.importNode(go,!0),Ut.nodeType===1&&Ut.nodeName==="BODY"||Ut.nodeName==="HTML"?gt=Ut:gt.appendChild(Ut);else{if(!ji&&!rn&&!Mr&&go.indexOf("<")===-1)return ie&&Yt?ie.createHTML(go):go;if(gt=is(go),!gt)return ji?null:Yt?pe:""}gt&&og&&yt(gt.firstChild);const Nu=Bl(cl?go:gt);for(;Ms=Nu.nextNode();)VL(Ms)||(Ms.content instanceof c&&uW(Ms.content),ZL(Ms));if(cl)return go;if(ji){if(dd)for(vi=st.call(gt.ownerDocument);gt.firstChild;)vi.appendChild(gt.firstChild);else vi=gt;return(pt.shadowroot||pt.shadowrootmode)&&(vi=ye.call(o,vi,!0)),vi}let Br=Mr?gt.outerHTML:gt.innerHTML;return Mr&&nn["!doctype"]&&gt.ownerDocument&&gt.ownerDocument.doctype&&gt.ownerDocument.doctype.name&&Dl(Yk,gt.ownerDocument.doctype.name)&&(Br="<!DOCTYPE "+gt.ownerDocument.doctype.name+`>
`+Br),rn&&(Br=sd(Br,ct," "),Br=sd(Br,Ct," "),Br=sd(Br,co," ")),ie&&Yt?ie.createHTML(Br):Br},t.setConfig=function(go){PR(go),Ou=!0},t.clearConfig=function(){Qx=null,Ou=!1},t.isValidAttribute=function(go,we,gt){Qx||PR({});const Ut=Ja(go),Ms=Ja(we);return $L(Ut,Ms,gt)},t.addHook=function(go,we){typeof we=="function"&&(Be[go]=Be[go]||[],gx(Be[go],we))},t.removeHook=function(go){if(Be[go])return uM(Be[go])},t.removeHooks=function(go){Be[go]&&(Be[go]=[])},t.removeAllHooks=function(){Be={}},t}var QO=Jk();const C2=qe.each,eA=qe.trim,_M=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],dr={ftp:21,http:80,https:443,mailto:25},wu=["img","video"],kM=(e,t)=>Ne(e)?!e:Ne(t)?!Io(wu,t):!0,SM=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},tA=(e,t,o)=>{const s=SM(t).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?kM(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class Ml{static parseDataUri(t){let o;const s=decodeURIComponent(t).split(","),a=/data:([^;]+)/.exec(s[0]);return a&&(o=a[1]),{type:o,data:s[1]}}static isDomSafe(t,o,s={}){if(s.allow_script_urls)return!0;{const a=Wn.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!tA(s,a,o)}}static getDocumentBaseUrl(t){var o;let s;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?s=(o=t.href)!==null&&o!==void 0?o:"":s=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),s}constructor(t,o={}){this.path="",this.directory="",t=eA(t),this.settings=o;const s=o.base_uri,a=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){a.source=t;return}const c=t.indexOf("//")===0;if(t.indexOf("/")===0&&!c&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const g=s?s.path:new Ml(document.location.href).directory;if((s==null?void 0:s.protocol)==="")t="//mce_host"+a.toAbsPath(g,t);else{const v=/([^#?]*)([#?]?.*)/.exec(t);v&&(t=(s&&s.protocol||"http")+"://mce_host"+a.toAbsPath(g,v[1])+v[2])}}t=t.replace(/@@/g,"(mce_at)");const d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);d&&C2(_M,(g,v)=>{let S=d[v];S&&(S=S.replace(/\(mce_at\)/g,"@@")),a[g]=S}),s&&(a.protocol||(a.protocol=s.protocol),a.userInfo||(a.userInfo=s.userInfo),!a.port&&a.host==="mce_host"&&(a.port=s.port),(!a.host||a.host==="mce_host")&&(a.host=s.host),a.source=""),c&&(a.protocol="")}setPath(t){const o=/^(.*?)\/?(\w+)?$/.exec(t);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const o=new Ml(t,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const s=this.getURI(),a=o.getURI();if(s===a||s.charAt(s.length-1)==="/"&&s.substr(0,s.length-1)===a)return s;let c=this.toRelPath(this.path,o.path);return o.query&&(c+="?"+o.query),o.anchor&&(c+="#"+o.anchor),c}toAbsolute(t,o){const s=new Ml(t,{base_uri:this});return s.getURI(o&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const o=this.protocol?dr[this.protocol]:null;if(o&&(this.port||o)==(t.port||o))return!0}return!1}toRelPath(t,o){let s=0,a="",c,d;const g=t.substring(0,t.lastIndexOf("/")).split("/"),v=o.split("/");if(g.length>=v.length){for(c=0,d=g.length;c<d;c++)if(c>=v.length||g[c]!==v[c]){s=c+1;break}}if(g.length<v.length){for(c=0,d=v.length;c<d;c++)if(c>=g.length||g[c]!==v[c]){s=c+1;break}}if(s===1)return o;for(c=0,d=g.length-(s-1);c<d;c++)a+="../";for(c=s-1,d=v.length;c<d;c++)c!==s-1?a+="/"+v[c]:a+=v[c];return a}toAbsPath(t,o){let s=0;const a=/\/$/.test(o)?"/":"",c=t.split("/"),d=o.split("/"),g=[];C2(c,D=>{D&&g.push(D)});const v=[];for(let D=d.length-1;D>=0;D--)if(!(d[D].length===0||d[D]===".")){if(d[D]===".."){s++;continue}if(s>0){s--;continue}v.push(d[D])}const S=g.length-s;let R;return S<=0?R=Il(v).join("/"):R=g.slice(0,S).join("/")+"/"+Il(v).join("/"),R.indexOf("/")!==0&&(R="/"+R),a&&R.lastIndexOf("/")!==R.length-1&&(R+=a),R}getURI(t=!1){let o;return(!this.source||t)&&(o="",t||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const V1=qe.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Qk="data-mce-type";let xc=0;const oA=(e,t,o,s,a)=>{var c,d,g,v;const S=t.validate,R=o.getSpecialElements();e.nodeType===rv&&!t.allow_conditional_comments&&/^\[if/i.test((c=e.nodeValue)!==null&&c!==void 0?c:"")&&(e.nodeValue=" "+e.nodeValue);const D=(d=a==null?void 0:a.tagName)!==null&&d!==void 0?d:e.nodeName.toLowerCase();if(s!=="html"&&o.isValid(s)){Ne(a)&&(a.allowedTags[D]=!0);return}if(e.nodeType!==jm||D==="body")return;const P=X.fromDom(e),j=Km(P,Qk),K=xa(P,"data-mce-bogus");if(!j&&bt(K)){K==="all"?en(P):_a(P);return}const Z=o.getElementRule(D);if(S&&!Z){jt(R,D)?en(P):_a(P);return}else Ne(a)&&(a.allowedTags[D]=!0);if(S&&Z&&!j){if(Ie((g=Z.attributesForced)!==null&&g!==void 0?g:[],Y=>{An(P,Y.name,Y.value==="{$uid}"?`mce_${xc++}`:Y.value)}),Ie((v=Z.attributesDefault)!==null&&v!==void 0?v:[],Y=>{Km(P,Y.name)||An(P,Y.name,Y.value==="{$uid}"?`mce_${xc++}`:Y.value)}),Z.attributesRequired&&!bn(Z.attributesRequired,Y=>Km(P,Y))){_a(P);return}if(Z.removeEmptyAttrs&&mg(P)){_a(P);return}Z.outputName&&Z.outputName!==D&&Yg(P,Z.outputName)}},EM=(e,t,o,s,a)=>{const c=e.tagName.toLowerCase(),{attrName:d,attrValue:g}=a;a.keepAttr=eS(t,o,s,c,d,g),a.keepAttr?(a.allowedAttributes[d]=!0,nA(d,o)&&(a.attrValue=d),t.allow_svg_data_urls&&yn(g,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):tS(e,d)&&(a.forceKeepAttr=!0)},eS=(e,t,o,s,a,c)=>o!=="html"&&!Wr(s)?!0:!(a in V1&&tA(e,c,s))&&(!e.validate||t.isValid(s,a)||yn(a,"data-")||yn(a,"aria-")),tS=(e,t)=>e.hasAttribute(Qk)&&(t==="id"||t==="class"||t==="style"),nA=(e,t)=>e in t.getBoolAttrs(),oS=(e,t,o,s)=>{const{attributes:a}=e;for(let c=a.length-1;c>=0;c--){const d=a[c],g=d.name,v=d.value;!eS(t,o,s,e.tagName.toLowerCase(),g,v)&&!tS(e,g)?e.removeAttribute(g):nA(g,o)&&e.setAttribute(g,g)}},sA=(e,t,o)=>{const s=QO();return s.addHook("uponSanitizeElement",(a,c)=>{oA(a,e,t,o.track(a),c)}),s.addHook("uponSanitizeAttribute",(a,c)=>{EM(a,e,t,o.current(),c)}),s},TM=(e,t)=>{const s={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return s.PARSER_MEDIA_TYPE=t,e.allow_script_urls?s.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(s.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),s},OM=e=>{const t=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(s=>`xlink:${s}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:t};return QO().sanitize(e,o),e.innerHTML},rA=(e,t)=>{const o=Ch();if(e.sanitize){const s=sA(e,t,o);return{sanitizeHtmlElement:(c,d)=>{s.sanitize(c,TM(e,d)),s.removed=[],o.reset()},sanitizeNamespaceElement:OM}}else return{sanitizeHtmlElement:(c,d)=>{const g=document.createNodeIterator(c,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let v;for(;v=g.nextNode();){const S=o.track(v);oA(v,e,t,S),dt(v)&&oS(v,e,t,S)}o.reset()},sanitizeNamespaceElement:oo}},nS=qe.makeMap,_2=qe.extend,k2=(e,t,o,s)=>{const a=e.name,c=a in o&&a!=="title"&&a!=="textarea"&&a!=="noscript",d=t.childNodes;for(let g=0,v=d.length;g<v;g++){const S=d[g],R=new Da(S.nodeName.toLowerCase(),S.nodeType);if(dt(S)){const D=S.attributes;for(let P=0,j=D.length;P<j;P++){const K=D[P];R.attr(K.name,K.value)}Wr(R.name)&&(s(S),R.value=S.innerHTML)}else Le(S)?(R.value=S.data,c&&(R.raw=!0)):(Mc(S)||Qm(S)||Td(S))&&(R.value=S.data);Wr(R.name)||k2(R,S,o,s),e.append(R)}},sS=(e,t,o)=>{const s=[];for(let a=e,c=a;a;c=a,a=a.walk()){const d=a;Ie(t,g=>g(d)),_o(d.parent)&&d!==e?a=c:s.push(d)}for(let a=s.length-1;a>=0;a--){const c=s[a];Ie(o,d=>d(c))}},rS=(e,t,o,s)=>{const a=o.validate,c=t.getNonEmptyElements(),d=t.getWhitespaceElements(),g=_2(nS("script,style,head,html,body,title,meta,param"),t.getBlockElements()),v=Vg(t),S=/[ \t\r\n]+/g,R=/^[ \t\r\n]+/,D=/[ \t\r\n]+$/,P=le=>{let ie=le.parent;for(;Ne(ie);){if(ie.name in d)return!0;ie=ie.parent}return!1},j=le=>{let ie=le;for(;Ne(ie);){if(ie.name in v)return M1(t,c,d,ie);ie=ie.parent}return!1},K=le=>le.name in g||tc(t,le)||Wr(le.name)&&le.parent===e,Z=(le,ie)=>{const pe=ie?le.prev:le.next;return Ne(pe)||_o(le.parent)?!1:K(le.parent)&&(le.parent!==e||s.isRootContent===!0)};return[le=>{var ie;if(le.type===3&&!P(le)){let pe=(ie=le.value)!==null&&ie!==void 0?ie:"";pe=pe.replace(S," "),(Vy(le.prev,K)||Z(le,!0))&&(pe=pe.replace(R,"")),pe.length===0?le.remove():le.value=pe}},le=>{var ie;if(le.type===1){const pe=t.getElementRule(le.name);if(a&&pe){const Pe=M1(t,c,d,le);pe.paddInEmptyBlock&&Pe&&j(le)?zy(o,s,K,le):pe.removeEmpty&&Pe?K(le)?le.remove():le.unwrap():pe.paddEmpty&&(Pe||YT(le))&&zy(o,s,K,le)}}else if(le.type===3&&!P(le)){let pe=(ie=le.value)!==null&&ie!==void 0?ie:"";(le.next&&K(le.next)||Z(le,!1))&&(pe=pe.replace(D,"")),pe.length===0?le.remove():le.value=pe}}]},aA=(e,t)=>{var o;const s=(o=t.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return s===!1?"":s===!0?"p":s},Wp=(e={},t=oc())=>{const o=LO(),s=LO(),a={validate:!0,root_name:"body",sanitize:!0,...e},c=new DOMParser,d=rA(a,t),g=(ie,pe,Pe="html")=>{const We=Pe==="xhtml"?"application/xhtml+xml":"text/html",st=jt(t.getSpecialElements(),pe.toLowerCase()),ke=st?`<${pe}>${ie}</${pe}>`:ie,ye=Pe==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${ke}</body></html>`:`<body>${ke}</body>`,Be=c.parseFromString(ye,We).body;return d.sanitizeHtmlElement(Be,We),st?Be.firstChild:Be},v=o.addFilter,S=o.getFilters,R=o.removeFilter,D=s.addFilter,P=s.getFilters,j=s.removeFilter,K=(ie,pe)=>{mk(t,ie)&&pe.push(ie)},Z=(ie,pe)=>{const Pe=bt(pe.attr(Qk)),We=pe.type===1&&!jt(ie,pe.name)&&!tc(t,pe)&&!Wr(pe.name);return pe.type===3||We&&!Pe},Y=(ie,pe)=>{const Pe=_2(nS("script,style,head,html,body,title,meta,param"),t.getBlockElements()),We=/^[ \t\r\n]+/,st=/[ \t\r\n]+$/;let ke=ie.firstChild,ye=null;const Be=ct=>{var Ct,co;ct&&(ke=ct.firstChild,ke&&ke.type===3&&(ke.value=(Ct=ke.value)===null||Ct===void 0?void 0:Ct.replace(We,"")),ke=ct.lastChild,ke&&ke.type===3&&(ke.value=(co=ke.value)===null||co===void 0?void 0:co.replace(st,"")))};if(t.isValidChild(ie.name,pe.toLowerCase())){for(;ke;){const ct=ke.next;Z(Pe,ke)?(ye||(ye=new Da(pe,1),ye.attr(a.forced_root_block_attrs),ie.insert(ye,ke)),ye.append(ke)):(Be(ye),ye=null),ke=ct}Be(ye)}},le={schema:t,addAttributeFilter:D,getAttributeFilters:P,removeAttributeFilter:j,addNodeFilter:v,getNodeFilters:S,removeNodeFilter:R,parse:(ie,pe={})=>{var Pe;const We=a.validate,st=(Pe=pe.context)!==null&&Pe!==void 0?Pe:a.root_name,ke=g(ie,st,pe.format);Ib(t,ke);const ye=new Da(st,11);k2(ye,ke,t.getSpecialElements(),d.sanitizeNamespaceElement),ke.innerHTML="";const[Be,ct]=rS(ye,t,a,pe),Ct=[],co=We?ps=>K(ps,Ct):oo,fo={nodes:{},attributes:{}},on=ps=>Q0(S(),P(),ps,fo);if(sS(ye,[Be,on],[ct,co]),Ct.reverse(),We&&Ct.length>0)if(pe.context){const{pass:ps,fail:fa}=ul(Ct,nn=>nn.parent===ye);tx(fa,t,ye,on),pe.invalid=ps.length>0}else tx(Ct,t,ye,on);const Cn=aA(a,pe);return Cn&&(ye.name==="body"||pe.isRootContent)&&Y(ye,Cn),pe.invalid||ex(fo,pe),ye}};return p2(le,a),cM(le,a,t),le},aS=e=>qy(e)?gm({validate:!1}).serialize(e):e,iA=(e,t,o)=>{const s=aS(e),a=t(s);if(a.isDefaultPrevented())return a;if(qy(e))if(a.content!==s){const c=Wp({validate:!1,forced_root_block:!1,...o}).parse(a.content,{context:e.name});return{...a,content:c}}else return{...a,content:e};else return a},iS=(e,t)=>{if(t.no_events)return se.value(t);{const o=lE(e,t);return o.isDefaultPrevented()?se.error(XC(e,{content:"",...o}).content):se.value(o)}},S2=(e,t,o)=>o.no_events?t:iA(t,a=>XC(e,{...o,content:a}),{sanitize:Fv(e),sandbox_iframes:rC(e)}).content,E2=(e,t)=>{if(t.no_events)return se.value(t);{const o=iA(t.content,s=>iE(e,{...t,content:s}),{sanitize:Fv(e),sandbox_iframes:rC(e)});return o.isDefaultPrevented()?(YC(e,o),se.error(void 0)):se.value(o)}},T2=(e,t,o)=>{o.no_events||YC(e,{...o,content:t})},$1=(e,t,o)=>({element:e,width:t,rows:o}),lS=(e,t)=>({element:e,cells:t}),lA=(e,t)=>({x:e,y:t}),cA=(e,t)=>ri(e,t).bind(ls).getOr(1),AM=(e,t,o,s,a)=>{const c=cA(a,"rowspan"),d=cA(a,"colspan"),g=e.rows;for(let v=o;v<o+c;v++){g[v]||(g[v]=lS(qd(s),[]));for(let S=t;S<t+d;S++){const R=g[v].cells;R[S]=v===o&&S===t?a:jc(a)}}},NM=(e,t,o)=>{const s=e.rows;return!!(s[o]?s[o].cells:[])[t]},RM=(e,t,o)=>{for(;NM(e,t,o);)t++;return t},dA=e=>Ir(e,(t,o)=>o.cells.length>t?o.cells.length:t,0),ss=(e,t)=>{const o=e.rows;for(let s=0;s<o.length;s++){const a=o[s].cells;for(let c=0;c<a.length;c++)if(Lo(a[c],t))return I.some(lA(c,s))}return I.none()},O2=(e,t,o,s,a)=>{const c=[],d=e.rows;for(let g=o;g<=a;g++){const v=d[g].cells,S=t<s?v.slice(t,s+1):v.slice(s,t+1);c.push(lS(d[g].element,S))}return c},Cu=(e,t,o)=>{const s=t.x,a=t.y,c=o.x,d=o.y,g=a<d?O2(e,s,a,c,d):O2(e,s,d,c,a);return $1(e.element,dA(g),g)},uA=(e,t)=>{const o=jc(e.element),s=X.fromTag("tbody");return Zr(s,t),Pn(o,s),o},mA=e=>no(e.rows,t=>{const o=no(t.cells,a=>{const c=qd(a);return ds(c,"colspan"),ds(c,"rowspan"),c}),s=jc(t.element);return Zr(s,o),s}),A2=e=>{const t=$1(jc(e),0,[]);return Ie(hr(e,"tr"),(o,s)=>{Ie(hr(o,"td,th"),(a,c)=>{AM(t,RM(t,c,s),s,o,a)})}),$1(t.element,dA(t.rows),t.rows)},cS=e=>uA(e,mA(e)),fA=(e,t,o)=>ss(e,t).bind(s=>ss(e,o).map(a=>Cu(e,s,a))),gA=e=>Ao(e,t=>po(t)==="ul"||po(t)==="ol"),pA=(e,t)=>Ao(e,o=>po(o)==="li"&&TC(o,t)).fold(Je([]),o=>gA(e).map(s=>{const a=X.fromTag(po(s)),c=wi(Ca(s),(d,g)=>yn(g,"list-style"));return ql(a,c),[X.fromTag("li"),a]}).getOr([])),DM=(e,t)=>{const o=Ir(t,(s,a)=>(Pn(a,s),a),e);return t.length>0?mm([o]):o},MM=e=>sf(e)?Ei(e).filter(Jl).fold(Je([]),t=>[e,t]):Jl(e)?[e]:[],BM=(e,t,o)=>{const s=X.fromDom(t.commonAncestorContainer),a=Jc(s,e),c=Et(a,v=>o.isWrapper(po(v))),d=pA(a,t),g=c.concat(d.length?d:MM(s));return no(g,jc)},dS=()=>mm([]),hA=(e,t,o)=>DM(X.fromDom(t.cloneContents()),BM(e,t,o)),PM=(e,t)=>wa(t,"table",it(Lo,e)),uS=(e,t)=>PM(e,t[0]).bind(o=>{const s=t[0],a=t[t.length-1],c=A2(o);return fA(c,s,a).map(d=>mm([cS(d)]))}).getOrThunk(dS),bA=(e,t,o)=>t.length>0&&t[0].collapsed?dS():hA(e,t[0],o),IM=(e,t,o)=>{const s=V3(t,e);return s.length>0?uS(e,s):bA(e,t,o)},xx=(e,t)=>t>=0&&t<e.length&&l1(e.charAt(t)),xA=e=>Fs(e.innerText),LM=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),da=e=>I.from(e.selection.getRng()).map(t=>{var o;const s=I.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),a=e.getBody(),c=LM(s),d=X.fromDom(t.cloneContents());L0(d),ca(d);const g=e.dom.add(a,c,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},d.dom),v=xA(g),S=Fs((o=g.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(g),xx(S,0)||xx(S,S.length-1)){const R=s.getOr(a),D=xA(R),P=D.indexOf(v);if(P===-1)return v;{const j=xx(D,P-1),K=xx(D,P+v.length);return(j?" ":"")+v+(K?" ":"")}}else return v}).getOr(""),FM=(e,t)=>{const o=e.selection.getRng(),s=e.dom.create("body"),a=e.selection.getSel(),c=hy(e,Sl(a)),d=t.contextual?IM(X.fromDom(e.getBody()),c,e.schema).dom:o.cloneContents();return d&&s.appendChild(d),e.selection.serializer.serialize(s,t)},HM=(e,t)=>{if(t.format==="text")return da(e);{const o=FM(e,t);return t.format==="tree"?o:e.selection.isCollapsed()?"":o}},zM=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),VM=(e,t,o={})=>{const s=zM(o,t);return iS(e,s).fold(bo,a=>{const c=HM(e,a);return S2(e,c,a)})},U1=0,vA=1,N2=2,mS=(e,t)=>{const o=e.length+t.length+2,s=new Array(o),a=new Array(o),c=(R,D,P)=>({start:R,end:D,diag:P}),d=(R,D,P,j,K)=>{const Z=v(R,D,P,j);if(Z===null||Z.start===D&&Z.diag===D-j||Z.end===R&&Z.diag===R-P){let Y=R,ae=P;for(;Y<D||ae<j;)Y<D&&ae<j&&e[Y]===t[ae]?(K.push([U1,e[Y]]),++Y,++ae):D-R>j-P?(K.push([N2,e[Y]]),++Y):(K.push([vA,t[ae]]),++ae)}else{d(R,Z.start,P,Z.start-Z.diag,K);for(let Y=Z.start;Y<Z.end;++Y)K.push([U1,e[Y]]);d(Z.end,D,Z.end-Z.diag,j,K)}},g=(R,D,P,j)=>{let K=R;for(;K-D<j&&K<P&&e[K]===t[K-D];)++K;return c(R,K,D)},v=(R,D,P,j)=>{const K=D-R,Z=j-P;if(K===0||Z===0)return null;const Y=K-Z,ae=Z+K,le=(ae%2===0?ae:ae+1)/2;s[1+le]=R,a[1+le]=D+1;let ie,pe,Pe,We,st;for(ie=0;ie<=le;++ie){for(pe=-ie;pe<=ie;pe+=2){for(Pe=pe+le,pe===-ie||pe!==ie&&s[Pe-1]<s[Pe+1]?s[Pe]=s[Pe+1]:s[Pe]=s[Pe-1]+1,We=s[Pe],st=We-R+P-pe;We<D&&st<j&&e[We]===t[st];)s[Pe]=++We,++st;if(Y%2!==0&&Y-ie<=pe&&pe<=Y+ie&&a[Pe-Y]<=s[Pe])return g(a[Pe-Y],pe+R-P,D,j)}for(pe=Y-ie;pe<=Y+ie;pe+=2){for(Pe=pe+le-Y,pe===Y-ie||pe!==Y+ie&&a[Pe+1]<=a[Pe-1]?a[Pe]=a[Pe+1]-1:a[Pe]=a[Pe-1],We=a[Pe]-1,st=We-R+P-pe;We>=R&&st>=P&&e[We]===t[st];)a[Pe]=We--,st--;if(Y%2===0&&-ie<=pe&&pe<=ie&&a[Pe]<=s[Pe+Y])return g(a[Pe],pe+R-P,D,j)}}return null},S=[];return d(0,e.length,0,t.length,S),S},yA=e=>dt(e)?e.outerHTML:Le(e)?Wn.encodeRaw(e.data,!1):Mc(e)?"<!--"+e.data+"-->":"",$M=e=>{let t;const o=document.createElement("div"),s=document.createDocumentFragment();for(e&&(o.innerHTML=e);t=o.firstChild;)s.appendChild(t);return s},rd=(e,t,o)=>{const s=$M(t);if(e.hasChildNodes()&&o<e.childNodes.length){const a=e.childNodes[o];e.insertBefore(s,a)}else e.appendChild(s)},wA=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const o=e.childNodes[t];e.removeChild(o)}},UM=(e,t)=>{let o=0;Ie(e,s=>{s[0]===U1?o++:s[0]===vA?(rd(t,s[1],o),o++):s[0]===N2&&wA(t,o)})},fS=(e,t)=>Et(no(Dt(e.childNodes),Uo(Fs,yA)),o=>o.length>0),CA=(e,t)=>{const o=no(Dt(t.childNodes),yA);return UM(mS(o,e),t),t},R2=pa(()=>document.implementation.createHTMLDocument("undo")),_A=e=>e.querySelector("iframe")!==null,kA=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),SA=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),D2=e=>{const t=e.serializer.getTempAttrs(),o=sT(e.getBody(),t);return _A(o)?kA(fS(o)):SA(Fs(o.innerHTML))},gS=(e,t,o)=>{const s=o?t.beforeBookmark:t.bookmark;t.type==="fragmented"?CA(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:Ne(s)&&vC(s)?!s.isFakeCaret:!0}),s&&(e.selection.moveToBookmark(s),e.selection.scrollIntoView())},vx=e=>e.type==="fragmented"?e.fragments.join(""):e.content,EA=e=>{const t=X.fromTag("body",R2());return yg(t,vx(e)),Ie(hr(t,"*[data-mce-bogus]"),_a),mh(t)},ZM=(e,t)=>vx(e)===vx(t),M2=(e,t)=>EA(e)===EA(t),yx=(e,t)=>!e||!t?!1:ZM(e,t)?!0:M2(e,t),wx=e=>e.get()===0,Cx=(e,t,o)=>{wx(o)&&(e.typing=t)},Sm=(e,t)=>{e.typing&&(Cx(e,!1,t),e.add())},WM=e=>{e.typing&&(e.typing=!1,e.add())},jM=(e,t,o)=>{wx(t)&&o.set(J(e.selection))},B2=(e,t,o,s,a,c,d)=>{const g=D2(e),v=qe.extend(c||{},g);if(!wx(s)||e.removed)return null;const S=t.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:v,lastLevel:S,originalEvent:d}).isDefaultPrevented()||S&&yx(S,v))return null;t.data[o.get()]&&a.get().each(P=>{t.data[o.get()].beforeBookmark=P});const R=qR(e);if(R&&t.data.length>R){for(let P=0;P<t.data.length-1;P++)t.data[P]=t.data[P+1];t.data.length--,o.set(t.data.length)}v.bookmark=J(e.selection),o.get()<t.data.length-1&&(t.data.length=o.get()+1),t.data.push(v),o.set(t.data.length-1);const D={level:v,lastLevel:S,originalEvent:d};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",D),e.dispatch("change",D)):e.dispatch("AddUndo",D),v},TA=(e,t,o)=>{t.data=[],o.set(0),t.typing=!1,e.dispatch("ClearUndos")},OA=(e,t,o,s,a)=>{if(t.transact(s)){const c=t.data[o.get()].bookmark,d=t.data[o.get()-1];gS(e,d,!0),t.transact(a)&&(t.data[o.get()-1].beforeBookmark=c)}},AA=(e,t,o)=>{let s;return t.get()<o.length-1&&(t.set(t.get()+1),s=o[t.get()],gS(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},qM=(e,t,o,s)=>{let a;return t.typing&&(t.add(),t.typing=!1,Cx(t,!1,o)),s.get()>0&&(s.set(s.get()-1),a=t.data[s.get()],gS(e,a,!0),e.setDirty(!0),e.dispatch("Undo",{level:a})),a},GM=e=>{e.clear(),e.add()},NA=(e,t,o)=>o.get()>0||t.typing&&t.data[0]&&!yx(D2(e),t.data[0]),pS=(e,t)=>t.get()<e.data.length-1&&!e.typing,hS=(e,t,o)=>(Sm(e,t),e.beforeChange(),e.ignore(o),e.add()),RA=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},P2=(e,t)=>{const o=e.dom,s=Ne(t)?t:e.getBody();Ie(o.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const c=t3(e),d=o.getAttrib(a,"border");(!d||d==="0")&&e.hasVisual?o.addClass(a,c):o.removeClass(a,c);break;case"A":if(!o.getAttrib(a,"href")){const g=o.getAttrib(a,"name")||a.id,v=Pv(e);g&&e.hasVisual?o.addClass(a,v):o.removeClass(a,v)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},bS=e=>({init:{bindEvents:oo},undoManager:{beforeChange:(t,o)=>jM(e,t,o),add:(t,o,s,a,c,d)=>B2(e,t,o,s,a,c,d),undo:(t,o,s)=>qM(e,t,o,s),redo:(t,o)=>AA(e,t,o),clear:(t,o)=>TA(e,t,o),reset:t=>GM(t),hasUndo:(t,o)=>NA(e,t,o),hasRedo:(t,o)=>pS(t,o),transact:(t,o,s)=>hS(t,o,s),ignore:(t,o)=>RA(t,o),extra:(t,o,s,a)=>OA(e,t,o,s,a)},formatter:{match:(t,o,s,a)=>Hp(e,t,o,s,a),matchAll:(t,o)=>Xy(e,t,o),matchNode:(t,o,s,a)=>yu(e,t,o,s,a),canApply:t=>cO(e,t),closest:t=>lO(e,t),apply:(t,o,s)=>AO(e,t,o,s),remove:(t,o,s,a)=>i2(e,t,o,s,a),toggle:(t,o,s)=>u2(e,t,o,s),formatChanged:(t,o,s,a,c)=>PO(e,t,o,s,a,c)},editor:{getContent:t=>Ui(e,t),setContent:(t,o)=>K6(e,t,o),insertContent:(t,o)=>xk(e,t,o),addVisual:t=>P2(e,t)},selection:{getContent:(t,o)=>VM(e,t,o)},autocompleter:{addDecoration:t=>KE(e,t),removeDecoration:()=>XE(e,X.fromDom(e.getBody()))},raw:{getModel:()=>I.none()}}),DA=e=>{const t=S=>ue(S)?S:{},{init:o,undoManager:s,formatter:a,editor:c,selection:d,autocompleter:g,raw:v}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(S,R,D)=>s.transact(D),ignore:(S,R)=>s.ignore(R),extra:(S,R,D,P)=>s.extra(D,P)},formatter:{match:(S,R,D,P)=>a.match(S,t(R),P),matchAll:a.matchAll,matchNode:a.matchNode,canApply:S=>a.canApply(S),closest:S=>a.closest(S),apply:(S,R,D)=>a.apply(S,t(R)),remove:(S,R,D,P)=>a.remove(S,t(R)),toggle:(S,R,D)=>a.toggle(S,t(R)),formatChanged:(S,R,D,P,j)=>a.formatChanged(R,D,P,j)},editor:{getContent:S=>c.getContent(S),setContent:(S,R)=>({content:c.setContent(S,R),html:""}),insertContent:(S,R)=>(c.insertContent(S),""),addVisual:c.addVisual},selection:{getContent:(S,R)=>d.getContent(R)},autocompleter:{addDecoration:g.addDecoration,removeDecoration:g.removeDecoration},raw:{getModel:()=>I.some(v.getRawModel())}}},KM=()=>{const e=Je(null),t=Je("");return{init:{bindEvents:oo},undoManager:{beforeChange:oo,add:e,undo:e,redo:e,clear:oo,reset:oo,hasUndo:Jt,hasRedo:Jt,transact:e,ignore:oo,extra:oo},formatter:{match:Jt,matchAll:Je([]),matchNode:Je(void 0),canApply:Jt,closest:t,apply:oo,remove:oo,toggle:oo,formatChanged:Je({unbind:oo})},editor:{getContent:t,setContent:Je({content:"",html:""}),insertContent:Je(""),addVisual:oo},selection:{getContent:t},autocompleter:{addDecoration:oo,removeDecoration:oo},raw:{getModel:Je(I.none())}}},_u=e=>jt(e.plugins,"rtc"),xS=e=>an(e.plugins,"rtc").bind(t=>I.from(t.setup)),MA=e=>{const t=e;return xS(e).fold(()=>(t.rtcInstance=bS(e),I.none()),o=>(t.rtcInstance=KM(),I.some(()=>o().then(s=>(t.rtcInstance=DA(s),s.rtc.isRemote)))))},I2=e=>e.rtcInstance?e.rtcInstance:bS(e),Us=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},YM=(e,t,o)=>{Us(e).undoManager.beforeChange(t,o)},XM=(e,t,o,s,a,c,d)=>Us(e).undoManager.add(t,o,s,a,c,d),BA=(e,t,o,s)=>Us(e).undoManager.undo(t,o,s),PA=(e,t,o)=>Us(e).undoManager.redo(t,o),JM=(e,t,o)=>{Us(e).undoManager.clear(t,o)},QM=(e,t)=>{Us(e).undoManager.reset(t)},Z1=(e,t,o)=>Us(e).undoManager.hasUndo(t,o),eB=(e,t,o)=>Us(e).undoManager.hasRedo(t,o),tB=(e,t,o,s)=>Us(e).undoManager.transact(t,o,s),IA=(e,t,o)=>{Us(e).undoManager.ignore(t,o)},LA=(e,t,o,s,a)=>{Us(e).undoManager.extra(t,o,s,a)},L2=(e,t,o,s,a)=>Us(e).formatter.match(t,o,s,a),oB=(e,t,o)=>Us(e).formatter.matchAll(t,o),nB=(e,t,o,s,a)=>Us(e).formatter.matchNode(t,o,s,a),sB=(e,t)=>Us(e).formatter.canApply(t),rB=(e,t)=>Us(e).formatter.closest(t),aB=(e,t,o,s)=>{Us(e).formatter.apply(t,o,s)},iB=(e,t,o,s,a)=>{Us(e).formatter.remove(t,o,s,a)},lB=(e,t,o,s)=>{Us(e).formatter.toggle(t,o,s)},cB=(e,t,o,s,a,c)=>Us(e).formatter.formatChanged(t,o,s,a,c),dB=(e,t)=>I2(e).editor.getContent(t),uB=(e,t,o)=>I2(e).editor.setContent(t,o),mn=(e,t,o)=>I2(e).editor.insertContent(t,o),FA=(e,t,o)=>Us(e).selection.getContent(t,o),vS=(e,t)=>Us(e).editor.addVisual(t),yS=e=>Us(e).init.bindEvents(),HA=(e,t)=>Us(e).autocompleter.addDecoration(t),wS=e=>Us(e).autocompleter.removeDecoration(),mB=(e,t={})=>{const o=t.format?t.format:"html";return FA(e,o,t)},zA=e=>e.dom.length===0?(en(e),I.none()):I.some(e),VA=(e,t)=>e.filter(o=>f1.isBookmarkNode(o.dom)).bind(t?Wl:va),fB=(e,t,o,s,a)=>{const c=e.dom,d=t.dom,g=s?c.length:d.length;s?(G_(c,d,a,!1,!s),o.setStart(d,g)):(G_(d,c,a,!1,!s),o.setEnd(d,g))},gB=(e,t,o)=>{Ei(e).each(s=>{const a=e.dom;t&&T1(s,Ce(a,0),o)?$0(a,0,o):!t&&Np(s,Ce(a,a.length),o)&&U0(a,a.length,o)})},jp=(e,t,o,s,a)=>{e.bind(c=>((s?U0:$0)(c.dom,s?c.dom.length:0,a),t.filter(ys).map(g=>fB(c,g,o,s,a)))).orThunk(()=>VA(t,s).or(t).filter(ys).map(d=>gB(d,s,a)))},pB=(e,t,o)=>{const s=I.from(t.firstChild).map(X.fromDom),a=I.from(t.lastChild).map(X.fromDom);e.deleteContents(),e.insertNode(t);const c=s.bind(va).filter(ys).bind(zA),d=a.bind(Wl).filter(ys).bind(zA);jp(c,s,e,!0,o),jp(d,a,e,!1,o),e.collapse(!1)},W1=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),_x=(e,t)=>{if(t.format!=="raw"){const o=e.selection.getRng(),s=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),a=s?{context:s.nodeName.toLowerCase()}:{},c=e.parser.parse(t.content,{forced_root_block:!1,...a,...t});return gm({validate:!1},e.schema).serialize(c)}else return t.content},j1=(e,t,o={})=>{const s=W1(o,t);E2(e,s).each(a=>{const c=_x(e,a),d=e.selection.getRng();pB(d,d.createContextualFragment(c),e.schema),e.selection.setRng(d),D0(e,d),T2(e,c,a)})},F2=(e,t,o)=>{if(jt(e,t)){const s=Et(e[t],a=>a!==o);s.length===0?delete e[t]:e[t]=s}};var $A=(e,t)=>{let o,s;const a=(g,v)=>Ao(v,S=>e.is(S,g)),c=g=>e.getParents(g,void 0,e.getRoot()),d=()=>{o={},s={},t.on("NodeChange",g=>{const v=g.element,S=c(v),R={};Qo(o,(D,P)=>{a(P,S).each(j=>{s[P]||(Ie(D,K=>{K(!0,{node:j,selector:P,parents:S})}),s[P]=D),R[P]=D})}),Qo(s,(D,P)=>{R[P]||(delete s[P],Ie(D,j=>{j(!1,{node:v,selector:P,parents:S})}))})})};return{selectorChangedWithUnbind:(g,v)=>(o||d(),o[g]||(o[g]=[]),o[g].push(v),a(g,c(t.selection.getStart())).each(()=>{s[g]=o[g]}),{unbind:()=>{F2(o,g,v),F2(s,g,v)}})}};const CS=e=>!!(e&&e.ownerDocument)&&ai(X.fromDom(e.ownerDocument),X.fromDom(e)),_S=e=>e?CS(e.startContainer)&&CS(e.endContainer):!1,kS=(e,t,o,s)=>{let a,c;const{selectorChangedWithUnbind:d}=$A(e,s),g=(Qe,pt)=>{const Bo=e.createRng();Ne(Qe)&&Ne(pt)?(Bo.setStart(Qe,pt),Bo.setEnd(Qe,pt),pe(Bo),ae(!1)):($i(e,Bo,s.getBody(),!0),pe(Bo))},v=Qe=>mB(s,Qe),S=(Qe,pt)=>j1(s,Qe,pt),R=Qe=>Ep(s.getBody(),ie(),Qe),D=Qe=>Tp(s.getBody(),ie(),Qe),P=(Qe,pt)=>fa.getBookmark(Qe,pt),j=Qe=>fa.moveToBookmark(Qe),K=(Qe,pt)=>(UE(e,Qe,pt).each(pe),Qe),Z=()=>{const Qe=ie(),pt=le();return!Qe||Qe.item?!1:Qe.compareEndPoints?Qe.compareEndPoints("StartToEnd",Qe)===0:!pt||Qe.collapsed},Y=()=>{const Qe=ie(),pt=s.getBody().querySelectorAll('[data-mce-selected="1"]');return pt.length>0?ei(pt,Bo=>e.isEditable(Bo.parentElement)):zE(e,Qe)},ae=Qe=>{const pt=ie();pt.collapse(!!Qe),pe(pt)},le=()=>t.getSelection?t.getSelection():t.document.selection,ie=()=>{let Qe;const pt=(vo,ft,qt)=>{try{return ft.compareBoundaryPoints(vo,qt)}catch{return-1}},Bo=t.document;if(Ne(s.bookmark)&&!Pf(s)){const vo=__(s);if(vo.isSome())return vo.map(ft=>hy(s,[ft])[0]).getOr(Bo.createRange())}try{const vo=le();vo&&!Zu(vo.anchorNode)&&(vo.rangeCount>0?Qe=vo.getRangeAt(0):Qe=Bo.createRange(),Qe=hy(s,[Qe])[0])}catch{}if(Qe||(Qe=Bo.createRange()),Bc(Qe.startContainer)&&Qe.collapsed){const vo=e.getRoot();Qe.setStart(vo,0),Qe.setEnd(vo,0)}return a&&c&&(pt(Qe.START_TO_START,Qe,a)===0&&pt(Qe.END_TO_END,Qe,a)===0?Qe=c:(a=null,c=null)),Qe},pe=(Qe,pt)=>{if(!_S(Qe))return;const Bo=le();if(Qe=s.dispatch("SetSelectionRange",{range:Qe,forward:pt}).range,Bo){c=Qe;try{Bo.removeAllRanges(),Bo.addRange(Qe)}catch{}pt===!1&&Bo.extend&&(Bo.collapse(Qe.endContainer,Qe.endOffset),Bo.extend(Qe.startContainer,Qe.startOffset)),a=Bo.rangeCount>0?Bo.getRangeAt(0):null}if(!Qe.collapsed&&Qe.startContainer===Qe.endContainer&&(Bo!=null&&Bo.setBaseAndExtent)&&Qe.endOffset-Qe.startOffset<2&&Qe.startContainer.hasChildNodes()){const ft=Qe.startContainer.childNodes[Qe.startOffset];ft&&ft.nodeName==="IMG"&&(Bo.setBaseAndExtent(Qe.startContainer,Qe.startOffset,Qe.endContainer,Qe.endOffset),(Bo.anchorNode!==Qe.startContainer||Bo.focusNode!==Qe.endContainer)&&Bo.setBaseAndExtent(ft,0,ft,1))}s.dispatch("AfterSetSelectionRange",{range:Qe,forward:pt})},Pe=Qe=>(S(e.getOuterHTML(Qe)),Qe),We=()=>$E(s.getBody(),ie()),st=(Qe,pt)=>E_(e,ie(),Qe,pt),ke=()=>{const Qe=le(),pt=Qe==null?void 0:Qe.anchorNode,Bo=Qe==null?void 0:Qe.focusNode;if(!Qe||!pt||!Bo||Zu(pt)||Zu(Bo))return!0;const vo=e.createRng(),ft=e.createRng();try{vo.setStart(pt,Qe.anchorOffset),vo.collapse(!0),ft.setStart(Bo,Qe.focusOffset),ft.collapse(!0)}catch{return!0}return vo.compareBoundaryPoints(vo.START_TO_START,ft)<=0},ps={dom:e,win:t,serializer:o,editor:s,expand:(Qe={type:"word"})=>pe(fm(e).expand(ie(),Qe)),collapse:ae,setCursorLocation:g,getContent:v,setContent:S,getBookmark:P,moveToBookmark:j,select:K,isCollapsed:Z,isEditable:Y,isForward:ke,setNode:Pe,getNode:We,getSel:le,setRng:pe,getRng:ie,getStart:R,getEnd:D,getSelectedBlocks:st,normalize:()=>{const Qe=ie(),pt=le();if(!_C(pt)&&Tf(s)){const Bo=wp(e,Qe);return Bo.each(vo=>{pe(vo,ke())}),Bo.getOr(Qe)}return Qe},selectorChanged:(Qe,pt)=>(d(Qe,pt),ps),selectorChangedWithUnbind:d,getScrollContainer:()=>{let Qe,pt=e.getRoot();for(;pt&&pt.nodeName!=="BODY";){if(pt.scrollHeight>pt.clientHeight){Qe=pt;break}pt=pt.parentNode}return Qe},scrollIntoView:(Qe,pt)=>{Ne(Qe)?R0(s,Qe,pt):D0(s,ie(),pt)},placeCaretAt:(Qe,pt)=>pe(i_(Qe,pt,s.getDoc())),getBoundingClientRect:()=>{const Qe=ie();return Qe.collapsed?Ce.fromRangeStart(Qe).getClientRects()[0]:Qe.getBoundingClientRect()},destroy:()=>{t=a=c=null,nn.destroy()}},fa=f1(ps),nn=p1(ps,s);return ps.bookmarkManager=fa,ps.controlSelection=nn,ps},UA=(e,t,o)=>{e.addAttributeFilter("data-mce-tabindex",(s,a)=>{let c=s.length;for(;c--;){const d=s[c];d.attr("tabindex",d.attr("data-mce-tabindex")),d.attr(a,null)}}),e.addAttributeFilter("src,href,style",(s,a)=>{const c="data-mce-"+a,d=t.url_converter,g=t.url_converter_scope;let v=s.length;for(;v--;){const S=s[v];let R=S.attr(c);R!==void 0?(S.attr(a,R.length>0?R:null),S.attr(c,null)):(R=S.attr(a),a==="style"?R=o.serializeStyle(o.parseStyle(R),S.name):d&&(R=d.call(g,R,a,S.name)),S.attr(a,R.length>0?R:null))}}),e.addAttributeFilter("class",s=>{let a=s.length;for(;a--;){const c=s[a];let d=c.attr("class");d&&(d=d.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),c.attr("class",d.length>0?d:null))}}),e.addAttributeFilter("data-mce-type",(s,a,c)=>{let d=s.length;for(;d--;){const g=s[d];g.attr("data-mce-type")==="bookmark"&&!c.cleanup&&(I.from(g.firstChild).exists(S=>{var R;return!Rd((R=S.value)!==null&&R!==void 0?R:"")})?g.unwrap():g.remove())}}),e.addNodeFilter("script,style",(s,a)=>{var c;const d=v=>v.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=s.length;for(;g--;){const v=s[g],S=v.firstChild,R=(c=S==null?void 0:S.value)!==null&&c!==void 0?c:"";if(a==="script"){const D=v.attr("type");D&&v.attr("type",D==="mce-no/type"?null:D.replace(/^mce\-/,"")),t.element_format==="xhtml"&&S&&R.length>0&&(S.value=`// <![CDATA[
`+d(R)+`
// ]]>`)}else t.element_format==="xhtml"&&S&&R.length>0&&(S.value=`<!--
`+d(R)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let a=s.length;for(;a--;){const c=s[a],d=c.value;t.preserve_cdata&&(d==null?void 0:d.indexOf("[CDATA["))===0?(c.name="#cdata",c.type=4,c.value=o.decode(d.replace(/^\[CDATA\[|\]\]$/g,""))):(d==null?void 0:d.indexOf("mce:protected "))===0&&(c.name="#text",c.type=3,c.raw=!0,c.value=unescape(d).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,a)=>{let c=s.length;for(;c--;){const d=s[c];d.type===7?d.remove():d.type===1&&a==="input"&&!d.attr("type")&&d.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{Ie(s,a=>{a.attr("data-mce-type")==="format-caret"&&(a.isEmpty(e.schema.getNonEmptyElements())?a.remove():a.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(s,a)=>{let c=s.length;for(;c--;)s[c].attr(a,null)}),t.remove_trailing_brs&&HO(t,e,e.schema)},ZA=e=>{const t=s=>(s==null?void 0:s.name)==="br",o=e.lastChild;if(t(o)){const s=o.prev;t(s)&&(o.remove(),s.remove())}},SS=(e,t,o)=>{let s;const a=e.dom;let c=t.cloneNode(!0);const d=document.implementation;if(d.createHTMLDocument){const g=d.createHTMLDocument("");qe.each(c.nodeName==="BODY"?c.childNodes:[c],v=>{g.body.appendChild(g.importNode(v,!0))}),c.nodeName!=="BODY"?c=g.body.firstChild:c=g.body,s=a.doc,a.doc=g}return eE(e,{...o,node:c}),s&&(a.doc=s),c},WA=(e,t)=>Ne(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,jA=(e,t,o)=>WA(e,o)?SS(e,t,o):t,ES=(e,t,o)=>{qe.inArray(t,o)===-1&&(e.addAttributeFilter(o,(s,a)=>{let c=s.length;for(;c--;)s[c].attr(a,null)}),t.push(o))},hB=(e,t,o)=>!t.no_events&&e?jC(e,{...t,content:o}).content:o,qA=(e,t,o)=>{const s=Fs(o.getInner?t.innerHTML:e.getOuterHTML(t));return o.selection||Xu(X.fromDom(t))?s:qe.trim(s)},GA=(e,t,o)=>{const s=o.selection?{forced_root_block:!1,...o}:o,a=e.parse(t,s);return ZA(a),a},KA=(e,t,o)=>gm(e,t).serialize(o),bB=(e,t,o,s,a)=>{const c=KA(t,o,s);return hB(e,a,c)},xB=(e,t)=>{const o=["data-mce-selected"],s={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},a=t&&t.dom?t.dom:un.DOM,c=t&&t.schema?t.schema:oc(s),d=Wp(s,c);UA(d,s,a);const g=(v,S={})=>{const R={format:"html",...S},D=jA(t,v,R),P=qA(a,D,R),j=GA(d,P,R);return R.format==="tree"?j:bB(t,s,c,j,R)};return{schema:c,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:g,addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:it(ES,d,o),getTempAttrs:Je(o),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter}},kx=(e,t)=>{const o=xB(e,t);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},YA="html",XA=(e,t)=>({...e,format:t,get:!0,getInner:!0}),JA=(e,t={})=>{const o=t.format?t.format:YA,s=XA(t,o);return iS(e,s).fold(bo,a=>{const c=dB(e,a);return S2(e,c,a)})},vB="html",yB=(e,t)=>({format:vB,...e,set:!0,content:t}),TS=(e,t,o={})=>{const s=yB(o,t);return E2(e,s).map(a=>{const c=uB(e,a.content,a);return T2(e,c.html,a),c.content}).getOr(t)},wB="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),QA="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),e5="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),OS=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],t5=(e,t)=>{const o=Et(t,s=>jt(e,s));return Dn(o)},CB=e=>{const t=t5(e,wB),o=e.forced_root_block;return(o===!1||o==="")&&t.push("forced_root_block (false only)"),Dn(t)},_B=e=>t5(e,QA),o5=(e,t)=>{const o=qe.makeMap(e.plugins," "),a=Et(t,c=>jt(o,c));return Dn(a)},H2=e=>o5(e,e5),n5=e=>o5(e,OS.map(t=>t.name)),kB=(e,t)=>{const o=CB(e),s=H2(t),a=s.length>0,c=o.length>0,d=t.theme==="mobile";if(a||c||d){const g=`
- `,v=d?`

Themes:${g}mobile`:"",S=a?`

Plugins:${g}${s.join(g)}`:"",R=c?`

Options:${g}${o.join(g)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+v+S+R)}},s5=e=>Ao(OS,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),r5=(e,t)=>{const o=_B(e),s=n5(t),a=s.length>0,c=o.length>0;if(a||c){const d=`
- `,g=a?`

Plugins:${d}${s.map(s5).join(d)}`:"",v=c?`

Options:${d}${o.join(d)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+g+v)}},AS=(e,t)=>{kB(e,t),r5(e,t)},Sx=un.DOM,a5=e=>{Sx.setStyle(e.id,"display",e.orgDisplay)},Ex=e=>I.from(e).each(t=>t.destroy()),SB=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const o=e.selection;if(o){const s=o.dom;t.selection=o.win=o.dom=s.doc=null}},EB=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),Sx.unbind(t,"submit reset",e.formEventDelegate))},Tx=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:o}=e,s=e.getBody(),a=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Ne(a==null?void 0:a.nextSibling)&&Sx.remove(a.nextSibling),TD(e),e.editorManager.remove(e),!e.inline&&s&&a5(e),OD(e),Sx.remove(e.getContainer()),Ex(t),Ex(o),e.destroy()}},TB=(e,t)=>{const{selection:o,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Ex(o),Ex(s)),EB(e),SB(e),e.destroyed=!0}},qp=(()=>{const e={};return{add:(a,c)=>{e[a]=c},get:a=>e[a]?e[a]:{icons:{}},has:a=>jt(e,a)}})(),Gp=Nr.ModelManager,NS=(e,t)=>t.dom[e],i5=(e,t)=>parseInt(Ur(t,e),10),AB=it(NS,"clientWidth"),RS=it(NS,"clientHeight"),DS=it(i5,"margin-top"),z2=it(i5,"margin-left"),l5=e=>e.dom.getBoundingClientRect(),MS=(e,t,o)=>{const s=AB(e),a=RS(e);return t>=0&&o>=0&&t<=s&&o<=a},c5=(e,t,o,s)=>{const a=l5(t),c=e?a.left+t.dom.clientLeft+z2(t):0,d=e?a.top+t.dom.clientTop+DS(t):0,g=o-c,v=s-d;return{x:g,y:v}},NB=(e,t,o)=>{const s=X.fromDom(e.getBody()),a=e.inline?s:hb(s),c=c5(e.inline,a,t,o);return MS(a,c.x,c.y)},d5=e=>I.from(e).map(X.fromDom),RB=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return d5(t).map(ws).getOr(!1)};var u5=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const BS=e=>{const t=[],o=()=>{const P=e.theme;return P&&P.getNotificationManagerImpl?P.getNotificationManagerImpl():u5()},s=()=>I.from(t[0]),a=(P,j)=>P.type===j.type&&P.text===j.text&&!P.progressBar&&!P.timeout&&!j.progressBar&&!j.timeout,c=()=>{Ie(t,P=>{P.reposition()})},d=P=>{t.push(P)},g=P=>{fd(t,j=>j===P).each(j=>{t.splice(j,1)})},v=(P,j=!0)=>e.removed||!RB(e)?{}:(j&&e.dispatch("BeforeOpenNotification",{notification:P}),Ao(t,K=>a(o().getArgs(K),P)).getOrThunk(()=>{e.editorManager.setActive(e);const K=o().open(P,()=>{g(K),c(),gy(e)&&s().fold(()=>e.focus(),Z=>v_(X.fromDom(Z.getEl())))});return d(K),c(),e.dispatch("OpenNotification",{notification:{...K}}),K})),S=()=>{s().each(P=>{o().close(P),g(P),c()})},R=Je(t);return(P=>{P.on("SkinLoaded",()=>{const j=J4(P);j&&v({text:j,type:"warning",timeout:0},!1),c()}),P.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(c)}),P.on("remove",()=>{Ie(t.slice(),j=>{o().close(j)})})})(e),{open:v,close:S,getNotifications:R}},q1=Nr.PluginManager,Zf=Nr.ThemeManager;var PS=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const IS=e=>{let t=[];const o=()=>{const Z=e.theme;return Z&&Z.getWindowManagerImpl?Z.getWindowManagerImpl():PS()},s=(Z,Y)=>(...ae)=>Y?Y.apply(Z,ae):void 0,a=Z=>{e.dispatch("OpenWindow",{dialog:Z})},c=Z=>{e.dispatch("CloseWindow",{dialog:Z})},d=Z=>{t.push(Z),a(Z)},g=Z=>{c(Z),t=Et(t,Y=>Y!==Z),t.length===0&&e.focus()},v=()=>I.from(t[t.length-1]),S=Z=>{e.editorManager.setActive(e),C_(e),e.ui.show();const Y=Z();return d(Y),Y},R=(Z,Y)=>S(()=>o().open(Z,Y,g)),D=Z=>S(()=>o().openUrl(Z,g)),P=(Z,Y,ae)=>{const le=o();le.alert(Z,s(ae||le,Y))},j=(Z,Y,ae)=>{const le=o();le.confirm(Z,s(ae||le,Y))},K=()=>{v().each(Z=>{o().close(Z),g(Z)})};return e.on("remove",()=>{Ie(t,Z=>{o().close(Z)})}),{open:R,openUrl:D,alert:P,confirm:j,close:K}},LS=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Ox=(e,t)=>{e._skinLoaded?LS(e,t):e.on("SkinLoaded",()=>{LS(e,t)})},m5=(e,t)=>{Ox(e,Ta.translate(["Failed to upload image: {0}",t]))},Ax=(e,t,o)=>{qC(e,t,{message:o}),console.error(o)},Nx=(e,t,o)=>o?`Failed to load ${e}: ${o} from url ${t}`:`Failed to load ${e} url: ${t}`,FS=(e,t,o)=>{Ax(e,"PluginLoadError",Nx("plugin",t,o))},DB=(e,t,o)=>{Ax(e,"IconsLoadError",Nx("icons",t,o))},f5=(e,t,o)=>{Ax(e,"LanguageLoadError",Nx("language",t,o))},g5=(e,t,o)=>{Ax(e,"ThemeLoadError",Nx("theme",t,o))},HS=(e,t,o)=>{Ax(e,"ModelLoadError",Nx("model",t,o))},zS=(e,t,o)=>{const s=Ta.translate(["Failed to initialize plugin: {0}",t]);qC(e,"PluginLoadError",{message:s}),G1(s,o),Ox(e,s)},G1=(e,...t)=>{const o=window.console;o&&(o.error?o.error(e,...t):o.log(e,...t))},MB=e=>/^[a-z0-9\-]+$/i.test(e),V2=e=>"content/"+e+"/content.css",BB=e=>tinymce.Resource.has(V2(e)),PB=e=>$2(e,Y4(e)),p5=e=>$2(e,X4(e)),$2=(e,t)=>{const o=e.editorManager.baseURL+"/skins/content",a=`content${e.editorManager.suffix}.css`;return no(t,c=>BB(c)?c:MB(c)&&!e.inline?`${o}/${c}/${a}`:e.documentBaseURI.toAbsolute(c))},IB=e=>{e.contentCSS=e.contentCSS.concat(PB(e),p5(e))},U2=e=>e?Dt(e.getElementsByTagName("img")):[],LB=(e,t)=>{const o={};return{findAll:(a,c=kn)=>{const d=Et(U2(a),v=>{const S=v.src;return v.hasAttribute("data-mce-bogus")||v.hasAttribute("data-mce-placeholder")||!S||S===Do.transparentSrc?!1:yn(S,"blob:")?!e.isUploaded(S)&&c(v):yn(S,"data:")?c(v):!1}),g=no(d,v=>{const S=v.src;if(jt(o,S))return o[S].then(R=>bt(R)?R:{image:v,blobInfo:R.blobInfo});{const R=ZO(t,S).then(D=>(delete o[S],{image:v,blobInfo:D})).catch(D=>(delete o[S],D));return o[S]=R,R}});return Promise.all(g)}}},h5=()=>{let o={};const s=(P,j)=>({status:P,resultUri:j}),a=P=>P in o;return{hasBlobUri:a,getResultUri:P=>{const j=o[P];return j?j.resultUri:null},isPending:P=>a(P)?o[P].status===1:!1,isUploaded:P=>a(P)?o[P].status===2:!1,markPending:P=>{o[P]=s(1,null)},markUploaded:(P,j)=>{o[P]=s(2,j)},removeFailed:P=>{delete o[P]},destroy:()=>{o={}}}};let FB=0;const b5=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},x5=e=>e+FB+++b5(),HB=()=>{let e=[];const t=D=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[D.toLowerCase()]||"dat",o=(D,P,j,K,Z)=>{if(bt(D))return s({id:D,name:K,filename:Z,blob:P,base64:j});if(ue(D))return s(D);throw new Error("Unknown input type")},s=D=>{if(!D.blob||!D.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const P=D.id||x5("blobid"),j=D.name||P,K=D.blob;return{id:Je(P),name:Je(j),filename:Je(D.filename||j+"."+t(K.type)),blob:Je(K),base64:Je(D.base64),blobUri:Je(D.blobUri||URL.createObjectURL(K)),uri:Je(D.uri)}},a=D=>{d(D.id())||e.push(D)},c=D=>Ao(e,D).getOrUndefined(),d=D=>c(P=>P.id()===D);return{create:o,add:a,get:d,getByUri:D=>c(P=>P.blobUri()===D),getByData:(D,P)=>c(j=>j.base64()===D&&j.blob().type===P),findFirst:c,removeByUri:D=>{e=Et(e,P=>P.blobUri()===D?(URL.revokeObjectURL(P.blobUri()),!1):!0)},destroy:()=>{Ie(e,D=>{URL.revokeObjectURL(D.blobUri())}),e=[]}}},v5=(e,t)=>{const o={},s=(Z,Y)=>Z?Z.replace(/\/$/,"")+"/"+Y.replace(/^\//,""):Y,a=(Z,Y)=>new Promise((ae,le)=>{const ie=new XMLHttpRequest;ie.open("POST",t.url),ie.withCredentials=t.credentials,ie.upload.onprogress=Pe=>{Y(Pe.loaded/Pe.total*100)},ie.onerror=()=>{le("Image upload failed due to a XHR Transport error. Code: "+ie.status)},ie.onload=()=>{if(ie.status<200||ie.status>=300){le("HTTP Error: "+ie.status);return}const Pe=JSON.parse(ie.responseText);if(!Pe||!bt(Pe.location)){le("Invalid JSON: "+ie.responseText);return}ae(s(t.basePath,Pe.location))};const pe=new FormData;pe.append("file",Z.blob(),Z.filename()),ie.send(pe)}),c=Pt(t.handler)?t.handler:a,d=()=>new Promise(Z=>{Z([])}),g=(Z,Y)=>({url:Y,blobInfo:Z,status:!0}),v=(Z,Y)=>({url:"",blobInfo:Z,status:!1,error:Y}),S=(Z,Y)=>{qe.each(o[Z],ae=>{ae(Y)}),delete o[Z]},R=(Z,Y,ae)=>(e.markPending(Z.blobUri()),new Promise(le=>{let ie,pe;try{const Pe=()=>{ie&&(ie.close(),pe=oo)},We=ke=>{Pe(),e.markUploaded(Z.blobUri(),ke),S(Z.blobUri(),g(Z,ke)),le(g(Z,ke))},st=ke=>{Pe(),e.removeFailed(Z.blobUri()),S(Z.blobUri(),v(Z,ke)),le(v(Z,ke))};pe=ke=>{ke<0||ke>100||I.from(ie).orThunk(()=>I.from(ae).map(xt)).each(ye=>{ie=ye,ye.progressBar.value(ke)})},Y(Z,pe).then(We,ke=>{st(bt(ke)?{message:ke}:ke)})}catch(Pe){le(v(Z,Pe))}})),D=Z=>Z===a,P=Z=>{const Y=Z.blobUri();return new Promise(ae=>{o[Y]=o[Y]||[],o[Y].push(ae)})},j=(Z,Y)=>(Z=qe.grep(Z,ae=>!e.isUploaded(ae.blobUri())),Promise.all(qe.map(Z,ae=>e.isPending(ae.blobUri())?P(ae):R(ae,c,Y))));return{upload:(Z,Y)=>!t.url&&D(c)?d():j(Z,Y)}},K1=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),VS=(e,t)=>v5(t,{url:wo(e),basePath:HR(e),credentials:G4(e),handler:qw(e)}),zB=e=>{const t=h5(),o=VS(e,t);return{upload:(s,a=!0)=>o.upload(s,a?K1(e):void 0)}},y5=(e,t)=>e.dom.isEmpty(t.dom)&&Ne(e.schema.getTextBlockElements()[po(t)]),w5=e=>t=>{y5(e,t)&&Pn(t,X.fromHtml('<br data-mce-bogus="1" />'))},VB=e=>{const t=HB();let o,s;const a=h5(),c=[],d=ie=>pe=>e.selection?ie(pe):[],g=ie=>ie+(ie.indexOf("?")===-1?"?":"&")+new Date().getTime(),v=(ie,pe,Pe)=>{let We=0;do We=ie.indexOf(pe,We),We!==-1&&(ie=ie.substring(0,We)+Pe+ie.substr(We+pe.length),We+=Pe.length-pe.length+1);while(We!==-1);return ie},S=(ie,pe,Pe)=>{const We=`src="${Pe}"${Pe===Do.transparentSrc?' data-mce-placeholder="1"':""}`;return ie=v(ie,`src="${pe}"`,We),ie=v(ie,'data-mce-src="'+pe+'"','data-mce-src="'+Pe+'"'),ie},R=(ie,pe)=>{Ie(e.undoManager.data,Pe=>{Pe.type==="fragmented"?Pe.fragments=no(Pe.fragments,We=>S(We,ie,pe)):Pe.content=S(Pe.content,ie,pe)})},D=(ie,pe)=>{const Pe=e.convertURL(pe,"src");R(ie.src,pe),Yn(X.fromDom(ie),{src:la(e)?g(pe):pe,"data-mce-src":Pe})},P=()=>(o||(o=VS(e,a)),Y().then(d(ie=>{const pe=no(ie,Pe=>Pe.blobInfo);return o.upload(pe,K1(e)).then(d(Pe=>{const We=[];let st=!1;const ke=no(Pe,(ye,Be)=>{const{blobInfo:ct,image:Ct}=ie[Be];let co=!1;return ye.status&&Jh(e)?(ye.url&&!Fn(Ct.src,ye.url)&&(st=!0),t.removeByUri(Ct.src),_u(e)||D(Ct,ye.url)):ye.error&&(ye.error.remove&&(R(Ct.src,Do.transparentSrc),We.push(Ct),co=!0),m5(e,ye.error.message)),{element:Ct,status:ye.status,uploadUri:ye.url,blobInfo:ct,removed:co}});return We.length>0&&!_u(e)?e.undoManager.transact(()=>{Ie(Vu(We),ye=>{const Be=Ei(ye);en(ye),Be.each(w5(e)),t.removeByUri(ye.dom.src)})}):st&&e.undoManager.dispatchChange(),ke}))}))),j=()=>Fi(e)?P():Promise.resolve([]),K=ie=>ei(c,pe=>pe(ie)),Z=ie=>{c.push(ie)},Y=()=>(s||(s=LB(a,t)),s.findAll(e.getBody(),K).then(d(ie=>{const pe=Et(ie,Pe=>bt(Pe)?(Ox(e,Pe),!1):Pe.uriType!=="blob");return _u(e)||Ie(pe,Pe=>{R(Pe.image.src,Pe.blobInfo.blobUri()),Pe.image.src=Pe.blobInfo.blobUri(),Pe.image.removeAttribute("data-mce-src")}),pe}))),ae=()=>{t.destroy(),a.destroy(),s=o=null},le=ie=>ie.replace(/src="(blob:[^"]+)"/g,(pe,Pe)=>{const We=a.getResultUri(Pe);if(We)return'src="'+We+'"';let st=t.getByUri(Pe);return st||(st=Ir(e.editorManager.get(),(ke,ye)=>ke||ye.editorUpload&&ye.editorUpload.blobCache.getByUri(Pe),void 0)),st?'src="data:'+st.blob().type+";base64,"+st.base64()+'"':pe});return e.on("SetContent",()=>{Fi(e)?j():Y()}),e.on("RawSaveContent",ie=>{ie.content=le(ie.content)}),e.on("GetContent",ie=>{ie.source_view||ie.format==="raw"||ie.format==="tree"||(ie.content=le(ie.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ie=>{Ie(ie,pe=>{const Pe=pe.attr("src");if(!Pe||t.getByUri(Pe))return;const We=a.getResultUri(Pe);We&&pe.attr("src",We)})})}),{blobCache:t,addFilter:Z,uploadImages:P,uploadImagesAuto:j,scanForImages:Y,destroy:ae}},$B=e=>{const t=e.dom,o=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:a=>{t.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:a=>{t.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const a={inline:"span",styles:{textDecoration:"line-through"},exact:!0},c={inline:"strike",remove:"all",preserve_attributes:["class","style"]},d={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[d,a,c]:[a,d,c]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(a,c,d)=>dt(a)&&a.hasAttribute("href"),onformat:(a,c,d)=>{qe.each(d,(g,v)=>{t.setAttrib(a,v,g)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":a=>{var c;return(c=a==null?void 0:a.customValue)!==null&&c!==void 0?c:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return qe.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),a=>{s[a]={block:a,remove:"all"}}),s},C5={remove_similar:!0,inherit:!1},Y1={selector:"td,th",...C5},_5={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Y1},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Y1},tablecellbordercolor:{styles:{borderColor:"%value"},...Y1},tablecellclass:{classes:["%value"],...Y1},tableclass:{selector:"table",classes:["%value"],...C5},tablecellborderstyle:{styles:{borderStyle:"%value"},...Y1},tablecellborderwidth:{styles:{borderWidth:"%value"},...Y1}},$S=Je(_5),k5=e=>{const t={},o=d=>Ne(d)?t[d]:t,s=d=>jt(t,d),a=(d,g)=>{d&&(bt(d)?(ce(g)||(g=[g]),Ie(g,v=>{Bs(v.deep)&&(v.deep=!Tl(v)),Bs(v.split)&&(v.split=!Tl(v)||Cr(v)),Bs(v.remove)&&Tl(v)&&!Cr(v)&&(v.remove="none"),Tl(v)&&Cr(v)&&(v.mixed=!0,v.block_expand=!0),bt(v.classes)&&(v.classes=v.classes.split(/\s+/))}),t[d]=g):Qo(d,(v,S)=>{a(S,v)}))},c=d=>(d&&t[d]&&delete t[d],t);return a($B(e)),a($S()),a(WR(e)),{get:o,has:s,register:a,unregister:c}},Rx=qe.each,al=un.DOM,Z2=e=>Ne(e)&&ue(e),S5=(e,t)=>{const o=t&&t.schema||oc({}),s=(v,S)=>{S.classes.length>0&&al.addClass(v,S.classes.join(" ")),al.setAttribs(v,S.attrs)},a=v=>{const S=bt(v)?{name:v,classes:[],attrs:{}}:v,R=al.create(S.name);return s(R,S),R},c=(v,S)=>{const R=o.getElementRule(v.nodeName.toLowerCase()),D=R==null?void 0:R.parentsRequired;return D&&D.length?S&&Io(D,S)?S:D[0]:!1},d=(v,S,R)=>{let D;const P=S[0],j=Z2(P)?P.name:void 0,K=c(v,j);if(K)j===K?(D=P,S=S.slice(1)):D=K;else if(P)D=P,S=S.slice(1);else if(!R)return v;const Z=D?a(D):al.create("div");Z.appendChild(v),R&&qe.each(R,ae=>{const le=a(ae);Z.insertBefore(le,v)});const Y=Z2(D)?D.siblings:void 0;return d(Z,S,Y)},g=al.create("div");if(e.length>0){const v=e[0],S=a(v),R=Z2(v)?v.siblings:void 0;g.appendChild(d(S,e.slice(1),R))}return g},US=e=>{e=qe.trim(e);let t="div";const o={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,a,c,d,g)=>{switch(a){case"#":o.attrs.id=c;break;case".":o.classes.push(c);break;case":":qe.inArray("checked disabled enabled read-only required".split(" "),c)!==-1&&(o.attrs[c]=c);break}if(d==="["){const v=g.match(/([\w\-]+)(?:\=\"([^\"]+))?/);v&&(o.attrs[v[1]]=v[2])}return""})),o.name=t||"div",o},W2=e=>bt(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),qe.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const o=qe.map(t.split(/(?:~\+|~|\+)/),US),s=o.pop();return o.length&&(s.siblings=o),s}).reverse()):[],j2=(e,t)=>{let o="",s=im(e);if(s==="")return"";const a=P=>bt(P)?P.replace(/%(\w+)/g,""):"",c=(P,j)=>al.getStyle(j??e.getBody(),P,!0);if(bt(t)){const P=e.formatter.get(t);if(!P)return"";t=P[0]}if("preview"in t){const P=t.preview;if(P===!1)return"";s=P||s}let d=t.block||t.inline||"span",g;const v=W2(t.selector);v.length>0?(v[0].name||(v[0].name=d),d=t.selector,g=S5(v,e)):g=S5([d],e);const S=al.select(d,g)[0]||g.firstChild;Rx(t.styles,(P,j)=>{const K=a(P);K&&al.setStyle(S,j,K)}),Rx(t.attributes,(P,j)=>{const K=a(P);K&&al.setAttrib(S,j,K)}),Rx(t.classes,P=>{const j=a(P);al.hasClass(S,j)||al.addClass(S,j)}),e.dispatch("PreviewFormats"),al.setStyles(g,{position:"absolute",left:-65535}),e.getBody().appendChild(g);const R=c("fontSize"),D=/px$/.test(R)?parseInt(R,10):0;return Rx(s.split(" "),P=>{let j=c(P,S);if(!(P==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(j)&&(j=c(P),Hc(j).toLowerCase()==="#ffffff"))&&!(P==="color"&&Hc(j).toLowerCase()==="#000000")){if(P==="font-size"&&/em|%$/.test(j)){if(D===0)return;j=parseFloat(j)/(/%$/.test(j)?100:1)*D+"px"}P==="border"&&j&&(o+="padding:0 2px;"),o+=P+":"+j+";"}}),e.dispatch("AfterPreviewFormats"),al.remove(g),o},Em=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},Dx=e=>{const t=k5(e),o=_s({});return Em(e),fO(e),_u(e)||Up(o,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,a,c)=>{aB(e,s,a,c)},remove:(s,a,c,d)=>{iB(e,s,a,c,d)},toggle:(s,a,c)=>{lB(e,s,a,c)},match:(s,a,c,d)=>L2(e,s,a,c,d),closest:s=>rB(e,s),matchAll:(s,a)=>oB(e,s,a),matchNode:(s,a,c,d)=>nB(e,s,a,c,d),canApply:s=>sB(e,s),formatChanged:(s,a,c,d)=>cB(e,o,s,a,c,d),getCssText:it(j2,e)}},Kp=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},E5=(e,t,o)=>{const s=_s(!1),a=v=>{Cx(t,!1,o),t.add({},v)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",v=>{const S=v.command;Kp(S)||(Sm(t,o),t.beforeChange())}),e.on("ExecCommand",v=>{const S=v.command;Kp(S)||a(v)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",a),e.on("dragend",a),e.on("keyup",v=>{const S=v.keyCode;if(v.isDefaultPrevented())return;const R=Do.os.isMacOS()&&v.key==="Meta";(S>=33&&S<=36||S>=37&&S<=40||S===45||v.ctrlKey||R)&&(a(),e.nodeChanged()),(S===46||S===8)&&e.nodeChanged(),s.get()&&t.typing&&!yx(D2(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged())}),e.on("keydown",v=>{const S=v.keyCode;if(v.isDefaultPrevented())return;if(S>=33&&S<=36||S>=37&&S<=40||S===45){t.typing&&a(v);return}const R=v.ctrlKey&&!v.altKey||v.metaKey;if((S<16||S>20)&&S!==224&&S!==91&&!t.typing&&!R){t.beforeChange(),Cx(t,!0,o),t.add({},v),s.set(!0);return}(Do.os.isMacOS()?v.metaKey:v.ctrlKey&&!v.altKey)&&t.beforeChange()}),e.on("mousedown",v=>{t.typing&&a(v)});const c=v=>v.inputType==="insertReplacementText",d=v=>v.inputType==="insertText"&&v.data===null,g=v=>v.inputType==="insertFromPaste"||v.inputType==="insertFromDrop";e.on("input",v=>{v.inputType&&(c(v)||d(v)||g(v))&&a(v)}),e.on("AddUndo Undo Redo ClearUndos",v=>{v.isDefaultPrevented()||e.nodeChanged()})},T5=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},q2=e=>{const t=Cl(),o=_s(0),s=_s(0),a={data:[],typing:!1,beforeChange:()=>{YM(e,o,t)},add:(c,d)=>XM(e,a,s,o,t,c,d),dispatchChange:()=>{e.setDirty(!0);const c=D2(e);c.bookmark=J(e.selection),e.dispatch("change",{level:c,lastLevel:qi(a.data,s.get()).getOrUndefined()})},undo:()=>BA(e,a,o,s),redo:()=>PA(e,s,a.data),clear:()=>{JM(e,a,s)},reset:()=>{QM(e,a)},hasUndo:()=>Z1(e,a,s),hasRedo:()=>eB(e,a,s),transact:c=>tB(e,a,o,c),ignore:c=>{IA(e,o,c)},extra:(c,d)=>{LA(e,a,s,c,d)}};return _u(e)||E5(e,a,o),T5(e),a},G2=[9,27,rt.HOME,rt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,rt.DOWN,rt.UP,rt.LEFT,rt.RIGHT].concat(Do.browser.isFirefox()?[224]:[]),Tm="data-mce-placeholder",Wf=e=>e.type==="keydown"||e.type==="keyup",ZS=e=>{const t=e.keyCode;return t===rt.BACKSPACE||t===rt.DELETE},UB=e=>{if(Wf(e)){const t=e.keyCode;return!ZS(e)&&(rt.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||Io(G2,t))}else return!1},O5=e=>Wf(e)&&!(ZS(e)||e.type==="keyup"&&e.keyCode===229),ZB=(e,t,o)=>{if(Jo(X.fromDom(t),!1)){const s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:o===s.nodeName.toLowerCase():!0}else return!1},WB=e=>{var t;const o=e.dom,s=$s(e),a=(t=Xw(e))!==null&&t!==void 0?t:"",c=(d,g)=>{if(UB(d))return;const v=e.getBody(),S=O5(d)?!1:ZB(o,v,s);(o.getAttrib(v,Tm)!==""!==S||g)&&(o.setAttrib(v,Tm,S?a:null),o.setAttrib(v,"aria-placeholder",S?a:null),aE(e,S),e.on(S?"keydown":"keyup",c),e.off(S?"keyup":"keydown",c))};zr(a)&&e.on("init",d=>{c(d,!0),e.on("change SetContent ExecCommand",c),e.on("paste",g=>sl.setEditorTimeout(e,()=>c(g)))})},jB=(e,t)=>({block:e,position:t}),WS=(e,t)=>({from:e,to:t}),K2=(e,t)=>{const o=X.fromDom(e),s=X.fromDom(t.container());return W0(o,s).map(a=>jB(a,t))},qB=e=>!Lo(e.from.block,e.to.block),jS=(e,t)=>Ee(t,a=>Yu(a)||Ua(a.dom),a=>Lo(a,e)).filter(ba).getOr(e),GB=(e,t)=>{const o=X.fromDom(e);return Lo(jS(o,t.from.block),jS(o,t.to.block))},qS=e=>ln(e.from.block.dom)===!1&&ln(e.to.block.dom)===!1,KB=e=>{const t=o=>nf(o)||em(o.dom);return t(e.from.block)&&t(e.to.block)},A5=(e,t,o)=>Jn(o.position.getNode())&&!Jo(o.block)?gp(!1,o.block.dom).bind(s=>s.isEqual(o.position)?tl(t,e,s).bind(a=>K2(e,a)):I.some(o)).getOr(o):o,GS=(e,t,o)=>{const s=K2(e,Ce.fromRangeStart(o)),a=s.bind(c=>tl(t,e,c.position).bind(d=>K2(e,d).map(g=>A5(e,t,g))));return Vr(s,a,WS).filter(c=>qB(c)&&GB(e,c)&&qS(c)&&KB(c))},N5=(e,t,o)=>o.collapsed?GS(e,t,o):I.none(),KS=(e,t)=>{const o=Mn(e);return fd(o,s=>t.isBlock(po(s))).fold(Je(o),s=>o.slice(0,s))},R5=(e,t)=>{const o=KS(e,t);return Ie(o,en),o},YS=(e,t)=>{const o=Jc(t,e);return Ao(o.reverse(),s=>Jo(s)).each(en)},YB=e=>Et(lv(e),t=>!Jo(t)).length===0,D5=(e,t,o,s,a)=>{if(Jo(o))return Nd(o),Na(o.dom);YB(a)&&Jo(t)&&As(a,X.fromTag("br"));const c=zi(o.dom,Ce.before(a.dom));return Ie(R5(t,s),d=>{As(a,d)}),YS(e,t),c},M5=(e,t)=>e.isInline(po(t)),XB=(e,t,o,s)=>{if(Jo(o)){if(Jo(t)){const d=xn((g=>{const v=(S,R)=>Xm(S).fold(()=>R,D=>M5(s,D)?v(D,R.concat(jc(D))):R);return v(g,[])})(o),(g,v)=>(vg(g,v),v),rf());li(t),Pn(t,d)}return en(o),Na(t.dom)}const a=ic(o.dom);return Ie(R5(t,s),c=>{Pn(o,c)}),YS(e,t),a},JB=(e,t)=>{const o=Jc(t,e);return I.from(o[o.length-1])},QB=(e,t)=>ai(t,e)?JB(t,e):I.none(),B5=(e,t)=>{gp(e,t.dom).bind(o=>I.from(o.getNode())).map(X.fromDom).filter(Wa).each(en)},P5=(e,t,o,s)=>(B5(!0,t),B5(!1,o),QB(t,o).fold(it(XB,e,t,o,s),it(D5,e,t,o,s))),jf=(e,t,o,s,a)=>t?P5(e,s,o,a):P5(e,o,s,a),Y2=(e,t)=>{const o=X.fromDom(e.getBody());return N5(o.dom,t,e.selection.getRng()).map(a=>()=>{jf(o,t,a.from.block,a.to.block,e.schema).each(c=>{e.selection.setRng(c.toRange())})})},I5=(e,t,o)=>{const s=t.getRng();return Vr(W0(e,X.fromDom(s.startContainer)),W0(e,X.fromDom(s.endContainer)),(a,c)=>Lo(a,c)?I.none():I.some(()=>{s.deleteContents(),jf(e,!0,a,c,o).each(d=>{t.setRng(d.toRange())})})).getOr(I.none())},XS=(e,t)=>{const o=X.fromDom(t),s=it(Lo,e);return Ti(o,Yu,s).isSome()},e7=(e,t)=>XS(e,t.startContainer)||XS(e,t.endContainer),t7=(e,t)=>{const o=zi(e.dom,Ce.fromRangeStart(t)).isNone(),s=fi(e.dom,Ce.fromRangeEnd(t)).isNone();return!e7(e,t)&&o&&s},qf=e=>I.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),L5=e=>{const t=X.fromDom(e.getBody()),o=e.selection.getRng();return t7(t,o)?qf(e):I5(t,e.selection,e.schema)},X1=(e,t)=>e.selection.isCollapsed()?I.none():L5(e),Om=(e,t,o,s,a)=>I.from(t._selectionOverrides.showCaret(e,o,s,a)),F5=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},Mx=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?I.none():I.some(F5(t)),o7=(e,t,o)=>{const s=vt(1,e.getBody(),t),a=Ce.fromRangeStart(s),c=a.getNode();if(n1(c))return Om(1,e,c,!a.isAtEnd(),!1);const d=a.getNode(!0);if(n1(d))return Om(1,e,d,!1,!1);const g=$f(e.dom.getRoot(),a.getNode());return n1(g)?Om(1,e,g,!1,o):I.none()},Bx=(e,t,o)=>t.collapsed?o7(e,t,o).getOr(t):t,n7=e=>hu(e)||z0(e),nr=e=>pm(e)||S1(e),s7=(e,t)=>{Le(t)&&t.data.length===0&&e.remove(t)},H5=(e,t,o,s,a,c)=>{Om(s,e,c.getNode(!a),a,!0).each(d=>{if(t.collapsed){const g=t.cloneRange();a?g.setEnd(d.startContainer,d.startOffset):g.setStart(d.endContainer,d.endOffset),g.deleteContents()}else t.deleteContents();e.selection.setRng(d)}),s7(e.dom,o)},JS=(e,t)=>{const o=e.selection.getRng();if(!Le(o.commonAncestorContainer))return I.none();const s=t?wr.Forwards:wr.Backwards,a=lu(e.getBody()),c=it(fC,t?a.next:a.prev),d=t?n7:nr,g=r1(s,e.getBody(),o),v=c(g),S=v&&Gr(t,v);if(!S||!mp(g,S))return I.none();if(d(S))return I.some(()=>H5(e,o,g.getNode(),s,t,S));const R=c(S);return R&&d(R)&&mp(S,R)?I.some(()=>H5(e,o,g.getNode(),s,t,R)):I.none()},X2=(e,t)=>JS(e,t),Px=(e,t)=>{const o=e.getBody();return t?Na(o).filter(hu):ic(o).filter(pm)},QS=e=>{const t=e.selection.getRng();return!t.collapsed&&(Px(e,!0).exists(o=>o.isEqual(Ce.fromRangeStart(t)))||Px(e,!1).exists(o=>o.isEqual(Ce.fromRangeEnd(t))))},r7=e=>Ne(e)&&(Yu(X.fromDom(e))||sf(X.fromDom(e))),il=me.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),a7=(e,t)=>{const o=t.getNode(!e),s=e?"after":"before";return dt(o)&&o.getAttribute("data-mce-caret")===s},i7=(e,t,o,s,a)=>{const c=d=>a.isInline(d.nodeName.toLowerCase())&&!iu(o,s,e);return uC(!t,o).fold(()=>uC(t,s).fold(Jt,c),c)},z5=(e,t,o,s)=>{const a=s.getNode(!t);return W0(X.fromDom(e),X.fromDom(o.getNode())).map(c=>Jo(c)?il.remove(c.dom):il.moveToElement(a)).orThunk(()=>I.some(il.moveToElement(a)))},V5=(e,t,o,s)=>tl(t,e,o).bind(a=>r7(a.getNode())||i7(e,t,o,a,s)?I.none():t&&ln(a.getNode())||!t&&ln(a.getNode(!0))?z5(e,t,o,a):t&&pm(o)||!t&&hu(o)?I.some(il.moveToPosition(a)):I.none()),J1=(e,t)=>_o(t)?I.none():e&&ln(t.nextSibling)?I.some(il.moveToElement(t.nextSibling)):!e&&ln(t.previousSibling)?I.some(il.moveToElement(t.previousSibling)):I.none(),ad=(e,t,o)=>o.fold(s=>I.some(il.remove(s)),s=>I.some(il.moveToElement(s)),s=>iu(t,s,e)?I.none():I.some(il.moveToPosition(s))),l7=(e,t,o,s)=>a7(t,o)?J1(t,o.getNode(!t)).orThunk(()=>V5(e,t,o,s)):V5(e,t,o,s).bind(a=>ad(e,o,a)),c7=(e,t,o,s)=>{const a=vt(t?1:-1,e,o),c=Ce.fromRangeStart(a),d=X.fromDom(e);return!t&&pm(c)?I.some(il.remove(c.getNode(!0))):t&&hu(c)?I.some(il.remove(c.getNode())):!t&&hu(c)&&ky(d,c,s)?c6(d,c,s).map(g=>il.remove(g.getNode())):t&&pm(c)&&W_(d,c,s)?d6(d,c,s).map(g=>il.remove(g.getNode())):l7(e,t,c,s)},d7=(e,t)=>o=>(e._selectionOverrides.hideFakeCaret(),Mp(e,t,X.fromDom(o)),!0),u7=(e,t)=>o=>{const s=t?Ce.before(o):Ce.after(o);return e.selection.setRng(s.toRange()),!0},m7=e=>t=>(e.selection.setRng(t.toRange()),!0),$5=(e,t)=>I.from($f(e.getBody(),t)),f7=(e,t)=>{const o=e.selection.getNode();return $5(e,o).filter(ln).fold(()=>c7(e.getBody(),t,e.selection.getRng(),e.schema).map(s=>()=>s.fold(d7(e,t),u7(e,t),m7(e))),()=>I.some(oo))},g7=e=>{Ie(hr(e,".mce-offscreen-selection"),en)},p7=(e,t)=>{const o=e.selection.getNode();return ln(o)&&!tf(o)?$5(e,o.parentNode).filter(ln).fold(()=>I.some(()=>{g7(X.fromDom(e.getBody())),Mp(e,t,X.fromDom(e.selection.getNode())),Q_(e)}),()=>I.some(oo)):QS(e)?I.some(()=>{tk(e,e.selection.getRng(),X.fromDom(e.getBody()))}):I.none()},U5=e=>{const t=e.dom,o=e.selection,s=$f(e.getBody(),o.getNode());if(Ua(s)&&t.isBlock(s)&&t.isEmpty(s)){const a=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(a),o.setRng(Ce.before(a).toRange())}return!0},e4=(e,t)=>e.selection.isCollapsed()?f7(e,t):p7(e,t),h7=(e,t)=>{const o=Ce.fromRangeStart(e.selection.getRng());return tl(t,e.getBody(),o).filter(s=>t?lT(s):a6(s)).bind(s=>dC(t?0:-1,s)).map(s=>()=>e.selection.select(s))},t4=(e,t)=>e.selection.isCollapsed()?h7(e,t):I.none(),Q1=Le,Z5=e=>Q1(e)&&e.data[0]===Ns,W5=e=>Q1(e)&&e.data[e.data.length-1]===Ns,j5=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(Ns)},b7=e=>{var t;if(Q1(e.previousSibling))return W5(e.previousSibling)||e.previousSibling.appendData(Ns),e.previousSibling;if(Q1(e))return Z5(e)||e.insertData(0,Ns),e;{const o=j5(e);return(t=e.parentNode)===null||t===void 0||t.insertBefore(o,e),o}},x7=e=>{var t,o;if(Q1(e.nextSibling))return Z5(e.nextSibling)||e.nextSibling.insertData(0,Ns),e.nextSibling;if(Q1(e))return W5(e)||e.appendData(Ns),e;{const s=j5(e);return e.nextSibling?(t=e.parentNode)===null||t===void 0||t.insertBefore(s,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(s),s}},J2=(e,t)=>e?b7(t):x7(t),v7=it(J2,!0),y7=it(J2,!1),q5=(e,t)=>Le(e.container())?J2(t,e.container()):J2(t,e.getNode()),G5=(e,t)=>{const o=t.get();return o&&e.container()===o&&di(o)},o4=(e,t)=>t.fold(o=>{au(e.get());const s=v7(o);return e.set(s),I.some(Ce(s,s.length-1))},o=>Na(o).map(s=>{if(G5(s,e)){const a=e.get();return Ce(a,1)}else{au(e.get());const a=q5(s,!0);return e.set(a),Ce(a,1)}}),o=>ic(o).map(s=>{if(G5(s,e)){const a=e.get();return Ce(a,a.length-1)}else{au(e.get());const a=q5(s,!1);return e.set(a),Ce(a,a.length-1)}}),o=>{au(e.get());const s=y7(o);return e.set(s),I.some(Ce(s,1))}),K5=(e,t)=>{for(let o=0;o<e.length;o++){const s=e[o].apply(null,t);if(s.isSome())return s}return I.none()},Xa=me.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Y5=(e,t)=>{const o=kf(t,e);return o||e},w7=(e,t,o)=>{const s=pi(o),a=Y5(t,s.container());return mc(e,a,s).fold(()=>fi(a,s).bind(it(mc,e,a)).map(c=>Xa.before(c)),I.none)},C7=(e,t)=>lm(e,t)===null,X5=(e,t,o)=>mc(e,t,o).filter(it(C7,t)),J5=(e,t,o)=>{const s=A1(o);return X5(e,t,s).bind(a=>zi(a,s).isNone()?I.some(Xa.start(a)):I.none())},_7=(e,t,o)=>{const s=pi(o);return X5(e,t,s).bind(a=>fi(a,s).isNone()?I.some(Xa.end(a)):I.none())},k7=(e,t,o)=>{const s=A1(o),a=Y5(t,s.container());return mc(e,a,s).fold(()=>zi(a,s).bind(it(mc,e,a)).map(c=>Xa.after(c)),I.none)},Q5=e=>!Hn(n4(e)),ku=(e,t,o)=>K5([w7,J5,_7,k7],[e,t,o]).filter(Q5),n4=e=>e.fold(bo,bo,bo,bo),eN=e=>e.fold(Je("before"),Je("start"),Je("end"),Je("after")),Q2=e=>e.fold(Xa.before,Xa.before,Xa.after,Xa.after),s4=e=>e.fold(Xa.start,Xa.start,Xa.end,Xa.end),tN=(e,t)=>eN(e)===eN(t)&&n4(e)===n4(t),S7=(e,t,o,s,a,c)=>Vr(mc(t,o,s),mc(t,o,a),(d,g)=>d!==g&&C6(o,d,g)?Xa.after(e?d:g):c).getOr(c),E7=(e,t)=>e.fold(kn,o=>!tN(o,t)),T7=(e,t,o,s,a)=>{const c=Gr(e,a);return tl(e,o,c).map(it(Gr,e)).fold(()=>s.map(Q2),v=>ku(t,o,v).map(it(S7,e,t,o,c,v)).filter(it(E7,s))).filter(Q5)},O7=(e,t)=>e?t.fold(Uo(I.some,Xa.start),I.none,Uo(I.some,Xa.after),I.none):t.fold(I.none,Uo(I.some,Xa.before),I.none,Uo(I.some,Xa.end)),A7=(e,t,o,s)=>{const a=Gr(e,s),c=ku(t,o,a);return ku(t,o,a).bind(it(O7,e)).orThunk(()=>T7(e,t,o,c,s))},N7=e=>Pt(e.selection.getSel().modify),oN=(e,t,o)=>{const s=e?1:-1;return t.setRng(Ce(o.container(),o.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},R7=(e,t)=>{const o=t.selection.getRng(),s=e?Ce.fromRangeEnd(o):Ce.fromRangeStart(o);return N7(t)?e&&Cs(s)?oN(!0,t.selection,s):!e&&ja(s)?oN(!1,t.selection,s):!1:!1};var id;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(id||(id={}));const Ix=(e,t)=>e===wr.Backwards?Il(t):t,D7=(e,t,o)=>e===wr.Forwards?t.next(o):t.prev(o),nN=(e,t,o,s)=>Jn(s.getNode(t===wr.Forwards))?id.Br:iu(o,s)===!1?id.Block:id.Wrap,sN=(e,t,o,s)=>{const a=lu(o);let c=s;const d=[];for(;c;){const g=D7(t,a,c);if(!g)break;if(Jn(g.getNode(!1)))return t===wr.Forwards?{positions:Ix(t,d).concat([g]),breakType:id.Br,breakAt:I.some(g)}:{positions:Ix(t,d),breakType:id.Br,breakAt:I.some(g)};if(!g.isVisible()){c=g;continue}if(e(c,g)){const v=nN(o,t,c,g);return{positions:Ix(t,d),breakType:v,breakAt:I.some(g)}}d.push(g),c=g}return{positions:Ix(t,d),breakType:id.Eol,breakAt:I.none()}},rN=(e,t,o,s)=>t(o,s).breakAt.map(a=>{const c=t(o,a).positions;return e===wr.Backwards?c.concat(a):[a].concat(c)}).getOr([]),r4=(e,t)=>Ir(e,(o,s)=>o.fold(()=>I.some(s),a=>Vr(Ln(a.getClientRects()),Ln(s.getClientRects()),(c,d)=>{const g=Math.abs(t-c.left);return Math.abs(t-d.left)<=g?s:a}).or(o)),I.none()),ew=(e,t)=>Ln(t.getClientRects()).bind(o=>r4(e,o.left)),Lx=it(sN,Ce.isAbove,-1),Fx=it(sN,Ce.isBelow,1),tw=it(rN,-1,Lx),ow=it(rN,1,Fx),aN=(e,t)=>Lx(e,t).breakAt.isNone(),a4=(e,t)=>Fx(e,t).breakAt.isNone(),M7=e=>Na(e).map(t=>[t].concat(Fx(e,t).positions)).getOr([]),B7=e=>ic(e).map(t=>Lx(e,t).positions.concat(t)).getOr([]),P7=(e,t)=>ew(tw(e,t),t),I7=(e,t)=>ew(ow(e,t),t),L7=ln,iN=(e,t)=>Math.abs(e.left-t),lN=(e,t)=>Math.abs(e.right-t),F7=e=>oi(e,"node"),nw=(e,t)=>ml(e,(o,s)=>{const a=Math.min(iN(o,t),lN(o,t)),c=Math.min(iN(s,t),lN(s,t));return c===a&&F7(s)&&L7(s.node)||c<a?s:o}),H7=e=>{const t=o=>no(o,s=>{const a=kl(s);return a.node=e,a});if(dt(e))return t(e.getClientRects());if(Le(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),t(o.getClientRects())}else return[]},cN=e=>Ho(e,H7);var Hx;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Hx||(Hx={}));const dN=(e,t,o,s)=>{let a=s;for(;a=v0(a,e,Pc,t);)if(o(a))return},Gf=(e,t,o,s,a,c)=>{let d=0;const g=[],v=D=>{let P=cN([D]);e===-1&&(P=P.reverse());for(let j=0;j<P.length;j++){const K=P[j];if(!o(K,S)){if(g.length>0&&t(K,Ws(g))&&d++,K.line=d,a(K))return!0;g.push(K)}}return!1},S=Ws(c.getClientRects());if(!S)return g;const R=c.getNode();return R&&(v(R),dN(e,s,v,R)),g},z7=(e,t)=>t.line>e,V7=(e,t)=>t.line===e,$7=it(Gf,Hx.Up,Xd,hf),Wi=it(Gf,Hx.Down,hf,Xd),i4=e=>Ws(e.getClientRects()),U7=(e,t,o,s)=>{const a=lu(t);let c,d,g,v;const S=[];let R=0;e===1?(c=a.next,d=hf,g=Xd,v=Ce.after(s)):(c=a.prev,d=Xd,g=hf,v=Ce.before(s));const D=i4(v);do{if(!v.isVisible())continue;const P=i4(v);if(g(P,D))continue;S.length>0&&d(P,Ws(S))&&R++;const j=kl(P);if(j.position=v,j.line=R,o(j))return S;S.push(j)}while(v=c(v));return S},uN=e=>t=>z7(e,t),l4=e=>t=>V7(e,t),Am=(e,t)=>{e.selection.setRng(t),D0(e,e.selection.getRng())},c4=(e,t,o)=>I.some(Bx(e,t,o)),d4=(e,t,o,s,a,c)=>{const d=t===wr.Forwards,g=lu(e.getBody()),v=it(fC,d?g.next:g.prev),S=d?s:a;if(!o.collapsed){const K=Jd(o);if(c(K))return Om(t,e,K,t===wr.Backwards,!1);if(QS(e)){const Z=o.cloneRange();return Z.collapse(t===wr.Backwards),I.from(Z)}}const R=r1(t,e.getBody(),o);if(S(R))return Mx(e,R.getNode(!d));let D=v(R);const P=Tb(o);if(D)D=Gr(d,D);else return P?I.some(o):I.none();if(S(D))return Om(t,e,D.getNode(!d),d,!1);const j=v(D);return j&&S(j)&&mp(D,j)?Om(t,e,j.getNode(!d),d,!1):P?c4(e,D.toRange(),!1):I.none()},mN=(e,t,o,s,a,c)=>{const d=r1(t,e.getBody(),o),g=Ws(d.getClientRects()),v=t===Hx.Down,S=e.getBody();if(!g)return I.none();if(QS(e)){const Y=v?Ce.fromRangeEnd(o):Ce.fromRangeStart(o);return(v?I7:P7)(S,Y).orThunk(()=>I.from(Y)).map(le=>le.toRange())}const D=(v?Wi:$7)(S,uN(1),d),P=Et(D,l4(1)),j=g.left,K=nw(P,j);if(K&&c(K.node)){const Y=Math.abs(j-K.left),ae=Math.abs(j-K.right);return Om(t,e,K.node,Y<ae,!1)}let Z;if(s(d)?Z=d.getNode():a(d)?Z=d.getNode(!0):Z=Jd(o),Z){const Y=U7(t,S,uN(1),Z);let ae=nw(Et(Y,l4(1)),j);if(ae||(ae=Ws(Et(Y,l4(0))),ae))return c4(e,ae.position.toRange(),!1)}return P.length===0?u4(e,v).filter(v?a:s).map(Y=>Bx(e,Y.toRange(),!1)):I.none()},u4=(e,t)=>{const o=e.selection.getRng(),s=t?Ce.fromRangeEnd(o):Ce.fromRangeStart(o),a=fD(s.container(),e.getBody());if(t){const c=Fx(a,s);return mt(c.positions)}else{const c=Lx(a,s);return Ln(c.positions)}},fN=(e,t,o)=>u4(e,t).filter(o).exists(s=>(e.selection.setRng(s.toRange()),!0)),sw=(e,t)=>{const o=e.dom.createRng();o.setStart(t.container(),t.offset()),o.setEnd(t.container(),t.offset()),e.selection.setRng(o)},gN=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Yp=(e,t,o)=>o4(t,o).map(s=>(sw(e,s),o)),pN=(e,t,o)=>{const s=Ce.fromRangeStart(e);if(e.collapsed)return s;{const a=Ce.fromRangeEnd(e);return o?zi(t,a).getOr(a):fi(t,s).getOr(s)}},rw=(e,t,o)=>{const s=e.getBody(),a=pN(e.selection.getRng(),s,o),c=it(Bp,e);return A7(o,c,s,a).bind(g=>Yp(e,t,g))},m4=(e,t,o)=>{const s=no(hr(X.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),a=Et(s,e),c=Et(o,e);Ie(fr(a,c),it(gN,!1)),Ie(fr(c,a),it(gN,!0))},hN=(e,t)=>{const o=t.get();if(e.selection.isCollapsed()&&!e.composing&&o){const s=Ce.fromRangeStart(e.selection.getRng());Ce.isTextPosition(s)&&!OT(s)&&(sw(e,lD(o,s)),t.set(null))}},bN=(e,t,o,s)=>{if(t.selection.isCollapsed()){const a=Et(s,e);Ie(a,c=>{const d=Ce.fromRangeStart(t.selection.getRng());ku(e,t.getBody(),d).bind(g=>Yp(t,o,g))})}},xN=(e,t,o)=>Oo(e)?rw(e,t,o).isSome():!1,f4=(e,t,o)=>Oo(t)?R7(e,t):!1,Z7=e=>{const t=_s(null),o=it(Bp,e);return e.on("NodeChange",s=>{Oo(e)&&(m4(o,e.dom,s.parents),hN(e,t),bN(o,e,t,s.parents))}),t},vN=it(f4,!0),yN=it(f4,!1),zx=(e,t,o)=>{if(Oo(e)){const s=u4(e,t).getOrThunk(()=>{const a=e.selection.getRng();return t?Ce.fromRangeEnd(a):Ce.fromRangeStart(a)});return ku(it(Bp,e),e.getBody(),s).exists(a=>{const c=Q2(a);return o4(o,c).exists(d=>(sw(e,d),!0))})}else return!1},wN=(e,t)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(t.container(),t.offset()),o},CN=e=>Vr(Na(e),ic(e),(t,o)=>{const s=Gr(!0,t),a=Gr(!1,o);return fi(e,s).forall(c=>c.isEqual(a))}).getOr(!0),g4=(e,t)=>o=>o4(t,o).map(s=>()=>sw(e,s)),aw=(e,t,o,s)=>{const a=e.getBody(),c=it(Bp,e);e.undoManager.ignore(()=>{e.selection.setRng(wN(o,s)),Pp(e),ku(c,a,Ce.fromRangeStart(e.selection.getRng())).map(s4).bind(g4(e,t)).each(Cc)}),e.nodeChanged()},_N=(e,t)=>{const o=kf(t,e);return o||e},kN=(e,t,o,s)=>{const a=_N(e.getBody(),s.container()),c=it(Bp,e),d=ku(c,a,s);return d.bind(v=>o?v.fold(Je(I.some(s4(v))),I.none,Je(I.some(Q2(v))),I.none):v.fold(I.none,Je(I.some(Q2(v))),I.none,Je(I.some(s4(v))))).map(g4(e,t)).getOrThunk(()=>{const v=fp(o,a,s),S=v.bind(R=>ku(c,a,R));return Vr(d,S,()=>mc(c,a,s).bind(R=>CN(R)?I.some(()=>{Mp(e,o,X.fromDom(R))}):I.none())).getOrThunk(()=>S.bind(()=>v.map(R=>()=>{o?aw(e,t,s,R):aw(e,t,R,s)})))})},iw=(e,t,o)=>{if(e.selection.isCollapsed()&&Oo(e)){const s=Ce.fromRangeStart(e.selection.getRng());return kN(e,t,o,s)}return I.none()},SN=e=>Cd(e)>1,p4=(e,t)=>{const o=X.fromDom(e.getBody()),s=X.fromDom(e.selection.getStart()),a=Jc(s,o);return fd(a,t).fold(Je(a),c=>a.slice(0,c))},EN=e=>Cd(e)===1,TN=e=>p4(e,t=>e.schema.isBlock(po(t))||SN(t)),h4=e=>p4(e,t=>e.schema.isBlock(po(t))),lw=(e,t)=>{const o=it(rl,e);return Ho(t,s=>o(s)?[s.dom]:[])},Vx=e=>{const t=h4(e);return lw(e,t)},ON=(e,t,o,s)=>{const a=lw(t,s);if(a.length===0)Mp(t,e,o);else{const c=Cm(o.dom,a);t.selection.setRng(c.toRange())}},AN=(e,t)=>{const o=Et(TN(e),EN);return mt(o).bind(s=>{const a=Ce.fromRangeStart(e.selection.getRng());return NT(t,a,s.dom)&&!_0(s)?I.some(()=>ON(t,e,s,o)):I.none()})},NN=(e,t)=>{const o=t.parentElement;return Jn(t)&&!Rn(o)&&e.dom.isEmpty(o)},b4=e=>_0(X.fromDom(e)),x4=(e,t)=>{const o=e.selection.getStart(),s=NN(e,o)||b4(o)?Cm(o,t):gO(e.selection.getRng(),t);e.selection.setRng(s.toRange())},RN=(e,t)=>{const o=fr(t,Vx(e));o.length>0&&x4(e,o)},v4=e=>Le(e.startContainer),W7=e=>e.startOffset===0&&v4(e),DN=(e,t)=>{const o=t.startContainer.parentElement;return!Rn(o)&&rl(e,X.fromDom(o))},MN=e=>{const t=e.startContainer.parentNode,o=e.endContainer.parentNode;return!Rn(t)&&!Rn(o)&&t.isEqualNode(o)},BN=e=>{const t=e.endContainer;return e.endOffset===(Le(t)?t.length:t.childNodes.length)},PN=e=>MN(e)&&BN(e),IN=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),y4=e=>PN(e)||IN(e),j7=e=>{const t=e.selection.getRng();return W7(t)&&DN(e,t)&&y4(t)},LN=e=>{if(j7(e)){const t=Vx(e);return I.some(()=>{Pp(e),RN(e,t)})}else return I.none()},w4=(e,t)=>e.selection.isCollapsed()?AN(e,t):LN(e),FN=(e,t)=>RT(e,o=>Vi(o.dom),o=>t.isBlock(po(o))),HN=e=>FN(X.fromDom(e.selection.getStart()),e.schema),q7=e=>{const t=e.selection.getRng();return t.collapsed&&(v4(t)||e.dom.isEmpty(t.startContainer))&&!HN(e)},$x=e=>(q7(e)&&x4(e,[]),!0),n=(e,t,o)=>Ne(o)?I.some(()=>{e._selectionOverrides.hideFakeCaret(),Mp(e,t,X.fromDom(o))}):I.none(),r=(e,t)=>{const o=t?z0:S1,s=t?wr.Forwards:wr.Backwards,a=r1(s,e.getBody(),e.selection.getRng());return o(a)?n(e,t,a.getNode(!t)):I.from(Gr(t,a)).filter(c=>o(c)&&mp(a,c)).bind(c=>n(e,t,c.getNode(!t)))},i=(e,t)=>{const o=e.selection.getNode();return ut(o)?n(e,t,o):I.none()},l=(e,t)=>e.selection.isCollapsed()?r(e,t):i(e,t),u=e=>Ee(e,t=>Ua(t.dom)||ln(t.dom)).exists(t=>Ua(t.dom)),m=e=>ls(e??"").getOr(0),p=(e,t)=>{const o=e||Og(t)?"margin":"padding",s=Ur(t,"direction")==="rtl"?"-right":"-left";return o+s},b=(e,t,o,s,a,c)=>{const d=p(o,X.fromDom(c)),g=m(e.getStyle(c,d));if(t==="outdent"){const v=Math.max(0,g-s);e.setStyle(c,d,v?v+a:"")}else{const v=g+s+a;e.setStyle(c,d,v)}},x=(e,t)=>ei(t,o=>{const s=p(Dv(e),o),a=fe(o,s).map(m).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&a>0}),w=e=>{const t=T(e);return!e.mode.isReadOnly()&&(t.length>1||x(e,t))},_=e=>Jl(e)||sf(e),k=e=>Ei(e).exists(_),T=e=>Et(Vu(e.selection.getSelectedBlocks()),t=>!_(t)&&!k(t)&&u(t)),N=(e,t)=>{var o,s;const{dom:a}=e,c=Kw(e),d=(s=(o=/[a-z%]+$/i.exec(c))===null||o===void 0?void 0:o[0])!==null&&s!==void 0?s:"px",g=m(c),v=Dv(e);Ie(T(e),S=>{b(a,t,v,g,d,S.dom)})},B=e=>N(e,"indent"),V=e=>N(e,"outdent"),U=e=>{if(e.selection.isCollapsed()&&w(e)){const t=e.dom,o=e.selection.getRng(),s=Ce.fromRangeStart(o),a=t.getParent(o.startContainer,t.isBlock);if(a!==null&&E1(X.fromDom(a),s,e.schema))return I.some(()=>V(e))}return I.none()},q=(e,t,o)=>Zs([U,e4,X2,(s,a)=>iw(s,t,a),Y2,Ly,t4,l,X1,w4],s=>s(e,o)).filter(s=>e.selection.isEditable()),H=(e,t)=>{q(e,t,!1).fold(()=>{e.selection.isEditable()&&(Pp(e),Q_(e))},Cc)},L=(e,t)=>{q(e,t,!0).fold(()=>{e.selection.isEditable()&&X_(e)},Cc)},W=(e,t)=>{e.addCommand("delete",()=>{H(e,t)}),e.addCommand("forwardDelete",()=>{L(e,t)})},G=5,Q=400,re=e=>e.touches===void 0||e.touches.length!==1?I.none():I.some(e.touches[0]),ge=(e,t)=>{const o=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return o>G||s>G},Te=e=>{const t=Cl(),o=_s(!1),s=Pi(a=>{e.dispatch("longpress",{...a,type:"longpress"}),o.set(!0)},Q);e.on("touchstart",a=>{re(a).each(c=>{s.cancel();const d={x:c.clientX,y:c.clientY,target:a.target};s.throttle(a),o.set(!1),t.set(d)})},!0),e.on("touchmove",a=>{s.cancel(),re(a).each(c=>{t.on(d=>{ge(c,d)&&(t.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",a=>{s.cancel(),a.type!=="touchcancel"&&t.get().filter(c=>c.target.isEqualNode(a.target)).each(()=>{o.get()?a.preventDefault():e.dispatch("tap",{...a,type:"tap"})})},!0)},Oe=(e,t)=>jt(e,t.nodeName),Ae=(e,t)=>Le(t)?!0:dt(t)?!Oe(e.getBlockElements(),t)&&!ol(t)&&!Ld(e,t)&&!Dg(t):!1,tt=(e,t,o)=>bn($_(X.fromDom(o),X.fromDom(t)),s=>Oe(e,s.dom)),at=(e,t)=>{if(Le(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||Oe(e,t.nextSibling)||Dg(t.nextSibling)}return!1},ht=e=>e.dom.create($s(e),m0(e)),Bt=e=>{const t=e.dom,o=e.selection,s=e.schema,a=s.getBlockElements(),c=o.getStart(),d=e.getBody();let g,v,S=!1;const R=$s(e);if(!c||!dt(c))return;const D=d.nodeName.toLowerCase();if(!s.isValidChild(D,R.toLowerCase())||tt(a,d,c))return;const P=o.getRng(),{startContainer:j,startOffset:K,endContainer:Z,endOffset:Y}=P,ae=Pf(e);let le=d.firstChild;for(;le;)if(dt(le)&&Lb(s,le),Ae(s,le)){if(at(a,le)){v=le,le=le.nextSibling,t.remove(v);continue}g||(g=ht(e),d.insertBefore(g,le),S=!0),v=le,le=le.nextSibling,g.appendChild(v)}else g=null,le=le.nextSibling;S&&ae&&(P.setStart(j,K),P.setEnd(Z,Y),o.setRng(P),e.nodeChanged())},Lt=(e,t,o)=>{const s=X.fromDom(ht(e)),a=rf();Pn(s,a),o(t,s);const c=document.createRange();return c.setStartBefore(a.dom),c.setEndBefore(a.dom),c},lo=e=>{e.on("NodeChange",it(Bt,e))},sn=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,zn=(e,t,o)=>function(s){const a=arguments,c=a[a.length-2],d=c>0?t.charAt(c-1):"";if(d==='"')return s;if(d===">"){const g=t.lastIndexOf("<",c);if(g!==-1&&t.substring(g,c).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(a[0])+'">'+e.dom.encode(typeof a[1]=="string"?a[1]:a[0])+"</span>"},$t=(e,t,o)=>{let s=t.length,a=o.content;if(o.format!=="raw"){for(;s--;)a=a.replace(t[s],zn(e,a,nC(e)));o.content=a}},ur=(e,t)=>ei(e,o=>{const s=t.match(o);return s!==null&&s[0].length===t.length}),Zt=e=>{const t="contenteditable",o=" "+qe.trim(c3(e))+" ",s=" "+qe.trim(nC(e))+" ",a=sn(o),c=sn(s),d=d3(e);d.length>0&&e.on("BeforeSetContent",g=>{$t(e,d,g)}),e.parser.addAttributeFilter("class",g=>{let v=g.length;for(;v--;){const S=g[v];a(S)?S.attr(t,"true"):c(S)&&S.attr(t,"false")}}),e.serializer.addAttributeFilter(t,g=>{let v=g.length;for(;v--;){const S=g[v];if(!a(S)&&!c(S))continue;const R=S.attr("data-mce-content");d.length>0&&R?ur(d,R)?(S.name="#text",S.type=3,S.raw=!0,S.value=R):S.remove():S.attr(t,null)}})},fs=e=>oa(X.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),tn=(e,t)=>{t.hasAttribute("data-mce-caret")&&(bh(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},ua=(e,t)=>{const o=fs(e);if(o){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),tn(e,o);return}Ag(o)&&(tn(e,o),e.undoManager.add())}},rs=e=>{e.on("keyup compositionstart",it(ua,e))},sr=ln,xi=(e,t,o)=>d4(t,e,o,hu,pm,sr),eb=(e,t,o)=>mN(t,e,o,c=>hu(c)||z_(c),c=>pm(c)||wy(c),sr),tb=e=>{const t=e.dom.create($s(e));return t.innerHTML='<br data-mce-bogus="1">',t},Nm=(e,t,o)=>{const s=lu(e.getBody()),a=it(fC,t===1?s.next:s.prev);if(o.collapsed){const c=e.dom.getParent(o.startContainer,"PRE");if(!c)return;if(!a(Ce.fromRangeStart(o))){const g=X.fromDom(tb(e));t===1?Vn(X.fromDom(c),g):As(X.fromDom(c),g),e.selection.select(g.dom,!0),e.selection.collapse()}}},Rm=(e,t)=>{const o=t?wr.Forwards:wr.Backwards,s=e.selection.getRng();return xi(o,e,s).orThunk(()=>(Nm(e,o,s),I.none()))},Ux=(e,t)=>{const o=t?1:-1,s=e.selection.getRng();return eb(o,e,s).orThunk(()=>(Nm(e,o,s),I.none()))},Kf=(e,t)=>{const o=t?e.getEnd(!0):e.getStart(!0);return Hn(o)?!t:t},Su=(e,t)=>Rm(e,Kf(e.selection,t)).exists(o=>(Am(e,o),!0)),Yf=(e,t)=>Ux(e,t).exists(o=>(Am(e,o),!0)),Xf=(e,t)=>fN(e,t,t?pm:hu),Jf=(e,t)=>Px(e,!t).map(o=>{const s=o.toRange(),a=e.selection.getRng();return t?s.setStart(a.startContainer,a.startOffset):s.setEnd(a.endContainer,a.endOffset),s}).exists(o=>(Am(e,o),!0)),cw=e=>Io(["figcaption"],po(e)),Zx=(e,t,o)=>{const s=it(Lo,t);return Ee(X.fromDom(e.container()),a=>o.isBlock(po(a)),s).filter(cw)},Qf=(e,t,o)=>t?a4(e.dom,o):aN(e.dom,o),Dm=(e,t)=>{const o=X.fromDom(e.getBody()),s=Ce.fromRangeStart(e.selection.getRng());return Zx(s,o,e.schema).exists(()=>{if(Qf(o,t,s)){const c=Lt(e,o,t?Pn:ms);return e.selection.setRng(c),!0}else return!1})},Eu=(e,t)=>e.selection.isCollapsed()?Dm(e,t):!1,fn=(e,t,o)=>{const s=e.selection.getRng(),a=Ce.fromRangeStart(s);return e.getBody().firstChild===t&&aN(o,a)?(e.execCommand("InsertNewBlockBefore"),!0):!1},eg=(e,t)=>{const o=e.selection.getRng(),s=Ce.fromRangeStart(o);return e.getBody().lastChild===t&&a4(t,s)?(e.execCommand("InsertNewBlockAfter"),!0):!1},ld=(e,t)=>t?I.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>eg(e,o)).getOr(!1):I.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>I.from(e.dom.getParent(o,"details")).map(s=>fn(e,s,o))).getOr(!1),dw=(e,t)=>ld(e,t),C4={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},uw=e=>no(e,t=>({...C4,...t})),mw=e=>no(e,t=>({...C4,...t})),Tu=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,ob=(e,t)=>Ho(uw(e),o=>Tu(o,t)?[o]:[]),_4=(e,t)=>Ho(mw(e),o=>Tu(o,t)?[o]:[]),zt=(e,...t)=>()=>e.apply(null,t),Wx=(e,t)=>Ao(ob(e,t),o=>o.action()),Xp=(e,t)=>Zs(_4(e,t),o=>o.action()),zN=(e,t)=>{const o=t?wr.Forwards:wr.Backwards,s=e.selection.getRng();return d4(e,o,s,z0,S1,ut).exists(a=>(Am(e,a),!0))},ma=(e,t)=>{const o=t?1:-1,s=e.selection.getRng();return mN(e,o,s,z0,S1,ut).exists(a=>(Am(e,a),!0))},Jp=(e,t)=>fN(e,t,t?S1:z0),VN=me.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Qp={...VN,none:e=>VN.none(e)},$N=(e,t)=>k4(e,t,kn),k4=(e,t,o)=>Ho(Mn(e),s=>Qr(s,t)?o(s)?[s]:[]:k4(s,t,o)),K7=(e,t,o=Jt)=>{if(o(t))return I.none();if(Io(e,po(t)))return I.some(t);const s=a=>Qr(a,"table")||o(a);return wa(t,e.join(","),s)},fw=(e,t)=>K7(["td","th"],e,t),S4=e=>$N(e,"th,td"),tg=(e,t)=>Fa(e,"table",t),eh=(e,t,o,s,a=kn)=>{const c=s===1;if(!c&&o<=0)return Qp.first(e[0]);if(c&&o>=e.length-1)return Qp.last(e[e.length-1]);{const d=o+s,g=e[d];return a(g)?Qp.middle(t,g):eh(e,t,d,s,a)}},E4=(e,t)=>tg(e,t).bind(o=>{const s=S4(o);return fd(s,c=>Lo(e,c)).map(c=>({index:c,all:s}))}),UN=(e,t,o)=>E4(e,o).fold(()=>Qp.none(e),a=>eh(a.all,e,a.index,1,t)),gw=(e,t,o)=>E4(e,o).fold(()=>Qp.none(),a=>eh(a.all,e,a.index,-1,t)),Mm=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),ZN=(e,t)=>Ho(t,o=>{const s=Mm(kl(o.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:o},{x:s.right,y:e(s),cell:o}]}),WN=(e,t,o)=>Ir(e,(s,a)=>s.fold(()=>I.some(a),c=>{const d=Math.sqrt(Math.abs(c.x-t)+Math.abs(c.y-o)),g=Math.sqrt(Math.abs(a.x-t)+Math.abs(a.y-o));return I.some(g<d?a:c)}),I.none()),T4=(e,t,o,s,a)=>{const c=hr(X.fromDom(o),"td,th,caption").map(g=>g.dom),d=Et(ZN(e,c),g=>t(g,a));return WN(d,s,a).map(g=>g.cell)},jN=e=>e.bottom,Y7=e=>e.top,be=(e,t)=>e.y<t,wt=(e,t)=>e.y>t,Wt=it(T4,jN,be),gn=it(T4,Y7,wt),es=(e,t)=>Ln(t.getClientRects()).bind(o=>Wt(e,o.left,o.top)).bind(o=>ew(B7(o),t)),gs=(e,t)=>mt(t.getClientRects()).bind(o=>gn(e,o.left,o.top)).bind(o=>ew(M7(o),t)),as=(e,t,o)=>o.breakAt.exists(s=>e(t,s).breakAt.isSome()),Ds=e=>e.breakType===id.Wrap&&e.positions.length===0,nb=e=>e.breakType===id.Br&&e.positions.length===1,qN=(e,t,o)=>{const s=e(t,o);return Ds(s)||!Jn(o.getNode())&&nb(s)?!as(e,t,s):s.breakAt.isNone()},GN=it(qN,Lx),X8=it(qN,Fx),qL=(e,t,o)=>{const s=Ce.fromRangeStart(t);return gp(!e,o).exists(a=>a.isEqual(s))},GL=(e,t,o,s)=>{const a=e.selection.getRng(),c=t?1:-1;return iC()&&qL(t,a,o)?(Om(c,e,o,!t,!1).each(d=>{Am(e,d)}),!0):!1},KL=(e,t,o)=>es(t,o).orThunk(()=>Ln(o.getClientRects()).bind(s=>r4(tw(e,Ce.before(t)),s.left))).getOr(Ce.before(t)),YL=(e,t,o)=>gs(t,o).orThunk(()=>Ln(o.getClientRects()).bind(s=>r4(ow(e,Ce.after(t)),s.left))).getOr(Ce.after(t)),J8=(e,t)=>{const o=t.getNode(e);return xl(o)?I.some(o):I.none()},XL=(e,t,o)=>{t.undoManager.transact(()=>{const s=e?Vn:As,a=Lt(t,X.fromDom(o),s);Am(t,a)})},Q8=(e,t,o)=>{const s=J8(!!t,o),a=t===!1;s.fold(()=>Am(e,o.toRange()),c=>gp(a,e.getBody()).filter(d=>d.isEqual(o)).fold(()=>Am(e,o.toRange()),d=>XL(t,e,c)))},JL=(e,t,o,s)=>{const a=e.selection.getRng(),c=Ce.fromRangeStart(a),d=e.getBody();if(!t&&GN(s,c)){const g=KL(d,o,c);return Q8(e,t,g),!0}else if(t&&X8(s,c)){const g=YL(d,o,c);return Q8(e,t,g),!0}else return!1},eP=(e,t,o)=>I.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>I.from(e.dom.getParent(s,"table")).map(a=>o(e,t,a,s))).getOr(!1),tP=(e,t)=>eP(e,t,GL),X7=(e,t)=>eP(e,t,JL),QL=e=>{const t=um.exact(e,0,e,0);return kE(t)},oP=(e,t,o)=>o.fold(I.none,I.none,(s,a)=>jE(a).map(c=>QL(c)),s=>(e.execCommand("mceTableInsertRowAfter"),nP(e,t,s))),nP=(e,t,o)=>oP(e,t,UN(o,gr)),eF=(e,t,o)=>oP(e,t,gw(o,gr)),sP=(e,t)=>{const o=["table","li","dl"],s=X.fromDom(e.getBody()),a=g=>{const v=po(g);return Lo(g,s)||Io(o,v)},c=e.selection.getRng(),d=X.fromDom(t?c.endContainer:c.startContainer);return fw(d,a).map(g=>(tg(g,a).each(R=>{e.model.table.clearSelectedCells(R.dom)}),e.selection.collapse(!t),(t?nP:eF)(e,a,g).each(R=>{e.selection.setRng(R)}),!0)).getOr(!1)},tF=(e,t,o)=>{const s=Do.os.isMacOS()||Do.os.isiOS();Wx([{keyCode:rt.RIGHT,action:zt(Su,e,!0)},{keyCode:rt.LEFT,action:zt(Su,e,!1)},{keyCode:rt.UP,action:zt(Yf,e,!1)},{keyCode:rt.DOWN,action:zt(Yf,e,!0)},...s?[{keyCode:rt.UP,action:zt(Jf,e,!1),metaKey:!0,shiftKey:!0},{keyCode:rt.DOWN,action:zt(Jf,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:rt.RIGHT,action:zt(tP,e,!0)},{keyCode:rt.LEFT,action:zt(tP,e,!1)},{keyCode:rt.UP,action:zt(X7,e,!1)},{keyCode:rt.DOWN,action:zt(X7,e,!0)},{keyCode:rt.UP,action:zt(X7,e,!1)},{keyCode:rt.UP,action:zt(dw,e,!1)},{keyCode:rt.DOWN,action:zt(dw,e,!0)},{keyCode:rt.RIGHT,action:zt(zN,e,!0)},{keyCode:rt.LEFT,action:zt(zN,e,!1)},{keyCode:rt.UP,action:zt(ma,e,!1)},{keyCode:rt.DOWN,action:zt(ma,e,!0)},{keyCode:rt.RIGHT,action:zt(xN,e,t,!0)},{keyCode:rt.LEFT,action:zt(xN,e,t,!1)},{keyCode:rt.RIGHT,ctrlKey:!s,altKey:s,action:zt(vN,e,t)},{keyCode:rt.LEFT,ctrlKey:!s,altKey:s,action:zt(yN,e,t)},{keyCode:rt.UP,action:zt(Eu,e,!1)},{keyCode:rt.DOWN,action:zt(Eu,e,!0)}],o).each(a=>{o.preventDefault()})},oF=(e,t)=>{e.on("keydown",o=>{o.isDefaultPrevented()||tF(e,t,o)})},Bm=(e,t)=>({container:e,offset:t}),KN=un.DOM,YN=e=>t=>e===t?-1:0,nF=e=>t=>e.isBlock(t)||Io(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",J7=(e,t,o)=>{if(Le(e)&&t>=0)return I.some(Bm(e,t));{const s=Kd(KN);return I.from(s.backwards(e,t,YN(e),o)).map(a=>Bm(a.container,a.container.data.length))}},sF=(e,t,o)=>{if(Le(e)&&t>=e.length)return I.some(Bm(e,t));{const s=Kd(KN);return I.from(s.forwards(e,t,YN(e),o)).map(a=>Bm(a.container,0))}},Q7=(e,t,o)=>{if(!Le(e))return I.none();const s=e.data;if(t>=0&&t<=s.length)return I.some(Bm(e,t));{const a=Kd(KN);return I.from(a.backwards(e,t,YN(e),o)).bind(c=>{const d=c.container.data;return Q7(c.container,t+d.length,o)})}},rP=(e,t,o)=>{if(!Le(e))return I.none();const s=e.data;if(t<=s.length)return I.some(Bm(e,t));{const a=Kd(KN);return I.from(a.forwards(e,t,YN(e),o)).bind(c=>rP(c.container,t-s.length,o))}},e8=(e,t,o,s,a)=>{const c=Kd(e,nF(e));return I.from(c.backwards(t,o,s,a))},rF=e=>e.collapsed&&Le(e.startContainer),aP=e=>Fs(e.toString().replace(/\u00A0/g," ")),iP=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,t8=(e,t)=>e.substring(t.length),aF=(e,t,o)=>{let s;const a=o.charAt(0);for(s=t-1;s>=0;s--){const c=e.charAt(s);if(iP(c))return I.none();if(a===c&&Fn(e,o,s,t))break}return I.some(s)},iF=(e,t,o,s=0)=>{if(!rF(t))return I.none();const a={text:"",offset:0},c=(g,v,S)=>(a.text=S+a.text,a.offset+=v,aF(a.text,a.offset,o).getOr(v)),d=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return e8(e,t.startContainer,t.startOffset,c,d).bind(g=>{const v=t.cloneRange();if(v.setStart(g.container,g.offset),v.setEnd(t.endContainer,t.endOffset),v.collapsed)return I.none();const S=aP(v);return S.lastIndexOf(o)!==0||t8(S,o).length<s?I.none():I.some({text:t8(S,o),range:v,trigger:o})})},lP=(e,t,o,s=0)=>YE(X.fromDom(t.startContainer)).fold(()=>iF(e,t,o,s),a=>{const c=e.createRng();c.selectNode(a.dom);const d=aP(c);return I.some({range:c,text:t8(d,o),trigger:o})}),lF=e=>e.nodeType===fl,cF=e=>e.nodeType===jm,cP=e=>{if(lF(e))return Bm(e,e.data.length);{const t=e.childNodes;return t.length>0?cP(t[t.length-1]):Bm(e,t.length)}},dP=(e,t)=>{const o=e.childNodes;return o.length>0&&t<o.length?dP(o[t],0):o.length>0&&cF(e)&&o.length===t?cP(o[o.length-1]):Bm(e,t)},dF=(e,t)=>{var o;const s=(o=e.getParent(t.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return e8(e,t.container,t.offset,(a,c)=>c===0?-1:c,s).filter(a=>{const c=a.container.data.charAt(a.offset-1);return!iP(c)}).isSome()},uF=e=>t=>{const o=dP(t.startContainer,t.startOffset);return!dF(e,o)},mF=(e,t,o)=>Zs(o.triggers,s=>lP(e,t,s)),fF=(e,t)=>{const o=t(),s=e.selection.getRng();return mF(e.dom,s,o).bind(a=>uP(e,t,a))},uP=(e,t,o,s={})=>{var a;const c=t(),g=(a=e.selection.getRng().startContainer.nodeValue)!==null&&a!==void 0?a:"",v=Et(c.lookupByTrigger(o.trigger),R=>o.text.length>=R.minChars&&R.matches.getOrThunk(()=>uF(e.dom))(o.range,g,o.text));if(v.length===0)return I.none();const S=Promise.all(no(v,R=>R.fetch(o.text,R.maxResults,s).then(P=>({matchText:o.text,items:P,columns:R.columns,onAction:R.onAction,highlightOn:R.highlightOn}))));return I.some({lookupData:S,context:o})};var Pm;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Pm||(Pm={}));const o8=(e,t,o)=>e.stype===Pm.Error?t(e.serror):o(e.svalue),gF=e=>{const t=[],o=[];return Ie(e,s=>{o8(s,a=>o.push(a),a=>t.push(a))}),{values:t,errors:o}},pF=(e,t)=>e.stype===Pm.Error?{stype:Pm.Error,serror:t(e.serror)}:e,hF=(e,t)=>e.stype===Pm.Value?{stype:Pm.Value,svalue:t(e.svalue)}:e,bF=(e,t)=>e.stype===Pm.Value?t(e.svalue):e,xF=(e,t)=>e.stype===Pm.Error?t(e.serror):e,mP=e=>({stype:Pm.Value,svalue:e}),fP=e=>({stype:Pm.Error,serror:e}),Ma={fromResult:e=>e.fold(fP,mP),toResult:e=>o8(e,se.error,se.value),svalue:mP,partition:gF,serror:fP,bind:bF,bindError:xF,map:hF,mapError:pF,fold:o8},n8=e=>ue(e)&&ze(e).length>100?" removed due to size":JSON.stringify(e,null,2),vF=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Je("... (only showing first ten failures)")}]):e;return no(t,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},XN=(e,t)=>Ma.serror([{path:e,getErrorInfo:t}]),yF=(e,t,o)=>XN(e,()=>'Could not find valid *required* value for "'+t+'" in '+n8(o)),wF=(e,t)=>XN(e,()=>'Choice schema did not contain choice key: "'+t+'"'),CF=(e,t,o)=>XN(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+n8(t)),_F=(e,t)=>XN(e,Je(t)),kF=(e,t,o,s)=>an(o,s).fold(()=>CF(e,o,s),c=>c.extract(e.concat(["branch: "+s]),t)),SF=(e,t)=>({extract:(a,c)=>an(c,e).fold(()=>wF(a,e),g=>kF(a,c,t,g)),toString:()=>"chooseOn("+e+"). Possible values: "+ze(t)}),EF=(e,t)=>t,TF=(e,t)=>kt(e)&&kt(t)?JN(e,t):t,gP=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const o={};for(let s=0;s<t.length;s++){const a=t[s];for(const c in a)jt(a,c)&&(o[c]=e(o[c],a[c]))}return o},JN=gP(TF),OF=gP(EF),pP=()=>({tag:"required",process:{}}),AF=e=>({tag:"defaultedThunk",process:e}),hP=e=>AF(Je(e)),NF=()=>({tag:"option",process:{}}),RF=(e,t)=>e.length>0?Ma.svalue(JN(t,OF.apply(void 0,e))):Ma.svalue(t),bP=e=>Uo(Ma.serror,In)(e),DF={consolidateObj:(e,t)=>{const o=Ma.partition(e);return o.errors.length>0?bP(o.errors):RF(o.values,t)},consolidateArr:e=>{const t=Ma.partition(e);return t.errors.length>0?bP(t.errors):Ma.svalue(t.values)}},MF=(e,t,o,s)=>({tag:"field",key:e,newKey:t,presence:o,prop:s}),BF=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),xP=(e,t,o)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},s8=e=>{const t=(s,a)=>Ma.bindError(e(a),c=>_F(s,c)),o=Je("val");return{extract:t,toString:o}},PF=s8(Ma.svalue),IF=(e,t,o,s)=>an(t,o).fold(()=>yF(e,o,t),s),vP=(e,t,o,s)=>{const a=an(e,t).getOrThunk(()=>o(e));return s(a)},LF=(e,t,o)=>o(an(e,t)),FF=(e,t,o,s)=>{const a=an(e,t).map(c=>c===!0?o(e):c);return s(a)},HF=(e,t,o,s,a)=>{const c=g=>a.extract(t.concat([s]),g),d=g=>g.fold(()=>Ma.svalue(I.none()),v=>{const S=a.extract(t.concat([s]),v);return Ma.map(S,I.some)});switch(e.tag){case"required":return IF(t,o,s,c);case"defaultedThunk":return vP(o,s,e.process,c);case"option":return LF(o,s,d);case"defaultedOptionThunk":return FF(o,s,e.process,d);case"mergeWithThunk":return vP(o,s,Je({}),g=>{const v=JN(e.process(o),g);return c(v)})}},zF=(e,t,o)=>{const s={},a=[];for(const c of o)xP(c,(d,g,v,S)=>{const R=HF(v,e,t,d,S);Ma.fold(R,D=>{a.push(...D)},D=>{s[g]=D})},(d,g)=>{s[d]=g(t)});return a.length>0?Ma.serror(a):Ma.svalue(s)},r8=e=>({extract:(s,a)=>zF(s,a,e),toString:()=>`obj{
`+no(e,a=>xP(a,(c,d,g,v)=>c+" -> "+v.toString(),(c,d)=>"state("+c+")")).join(`
`)+"}"}),yP=e=>({extract:(s,a)=>{const c=no(a,(d,g)=>e.extract(s.concat(["["+g+"]"]),d));return DF.consolidateArr(c)},toString:()=>"array("+e.toString()+")"}),VF=e=>s8(t=>e(t).fold(Ma.serror,Ma.svalue)),$F=(e,t,o)=>{const s=t.extract([e],o);return Ma.mapError(s,a=>({input:o,errors:a}))},UF=(e,t,o)=>Ma.toResult($F(e,t,o)),ZF=e=>`Errors: 
`+vF(e.errors).join(`
`)+`

Input object: `+n8(e.input),wP=(e,t)=>SF(e,Xr(t,r8)),WF=Je(PF),QN=(e,t)=>s8(o=>{const s=typeof o;return e(o)?Ma.svalue(o):Ma.serror(`Expected type: ${t} but got: ${s}`)}),jF=QN(E,"number"),eR=QN(bt,"string"),qF=QN(yi,"boolean"),a8=QN(Pt,"function"),O4=MF,CP=BF,GF=e=>VF(t=>Io(e,t)?se.value(t):se.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),_P=(e,t)=>O4(e,e,pP(),t),kP=e=>_P(e,eR),SP=e=>_P(e,a8),KF=(e,t)=>O4(e,e,pP(),yP(t)),i8=(e,t)=>O4(e,e,NF(),t),tR=e=>i8(e,eR),YF=e=>i8(e,a8),XF=(e,t)=>O4(e,e,hP(t),WF()),pw=(e,t,o)=>O4(e,e,hP(t),o),EP=(e,t)=>pw(e,t,jF),JF=(e,t)=>pw(e,t,eR),TP=(e,t,o)=>pw(e,t,GF(o)),l8=(e,t)=>pw(e,t,qF),c8=(e,t)=>pw(e,t,a8),QF=(e,t,o)=>pw(e,t,yP(o)),eH=kP("type"),tH=SP("fetch"),d8=SP("onAction"),oH=c8("onSetup",()=>oo),nH=tR("text"),sH=tR("icon"),rH=tR("tooltip"),aH=tR("label"),iH=l8("active",!1),lH=l8("enabled",!0),OP=l8("primary",!1),cH=e=>XF("columns",e),A4=e=>JF("type",e),dH=r8([eH,kP("trigger"),EP("minChars",1),cH(1),EP("maxResults",10),YF("matches"),tH,d8,QF("highlightOn",[],eR)]),uH=e=>UF("Autocompleter",dH,{trigger:e.ch,...e}),u8=[lH,rH,sH,nH,oH],AP=[iH].concat(u8),mH=[c8("predicate",Jt),TP("scope","node",["node","editor"]),TP("position","selection",["node","selection","line"])],fH=u8.concat([A4("contextformbutton"),OP,d8,CP("original",bo)]),gH=AP.concat([A4("contextformbutton"),OP,d8,CP("original",bo)]),pH=u8.concat([A4("contextformbutton")]),hH=AP.concat([A4("contextformtogglebutton")]),bH=wP("type",{contextformbutton:fH,contextformtogglebutton:gH});r8([A4("contextform"),c8("initValue",Je("")),aH,KF("commands",bH),i8("launch",wP("type",{contextformbutton:pH,contextformtogglebutton:hH}))].concat(mH));const xH=e=>{const t=e.ui.registry.getAll().popups,o=Xr(t,d=>uH(d).fold(g=>{throw new Error(ZF(g))},bo)),s=Ia(ti(o,d=>d.trigger)),a=kc(o);return{dataset:o,triggers:s,lookupByTrigger:d=>Et(a,g=>g.trigger===d)}},vH=(e,t)=>{const o=Pi(t.load,50);e.on("keypress compositionend",s=>{s.which!==27&&o.throttle()}),e.on("keydown",s=>{const a=s.which;a===8?o.throttle():a===27&&t.cancelIfNecessary()}),e.on("remove",o.cancel)},yH=e=>{const t=Cl(),o=_s(!1),s=t.isSet,a=()=>{s()&&(wS(e),dE(e),o.set(!1),t.clear())},c=S=>{s()||(HA(e,S.range),t.set({trigger:S.trigger,matchLength:S.text.length}))},d=pa(()=>xH(e)),g=S=>t.get().map(R=>lP(e.dom,e.selection.getRng(),R.trigger).bind(D=>uP(e,d,D,S))).getOrThunk(()=>fF(e,d)),v=S=>{g(S).fold(a,R=>{c(R.context),R.lookupData.then(D=>{t.get().map(P=>{const j=R.context;P.trigger===j.trigger&&(j.text.length-P.matchLength>=10?a():(t.set({...P,matchLength:j.text.length}),o.get()?cE(e,{lookupData:D}):(o.set(!0),JC(e,{lookupData:D}))))})})})};e.addCommand("mceAutocompleterReload",(S,R)=>{const D=ue(R)?R.fetchOptions:{};v(D)}),e.addCommand("mceAutocompleterClose",a),vH(e,{cancelIfNecessary:a,load:v})},wH=To().browser.isSafari(),NP=e=>Nd(X.fromDom(e)),RP=(e,t)=>{var o;return e.startOffset===0&&e.endOffset===((o=t.textContent)===null||o===void 0?void 0:o.length)},oR=(e,t)=>I.from(e.getParent(t.container(),"details")),DP=(e,t)=>oR(e,t).isSome(),CH=(e,t)=>{const o=I.from(e.getParent(t.startContainer,"details")),s=I.from(e.getParent(t.endContainer,"details"));if(o.isSome()||s.isSome()){const a=o.bind(c=>I.from(e.select("summary",c)[0]));return I.some({startSummary:a,startDetails:o,endDetails:s})}else return I.none()},_H=(e,t)=>Na(t).exists(o=>o.isEqual(e)),kH=(e,t)=>ic(t).exists(o=>Jn(o.getNode())&&zi(t,o).exists(s=>s.isEqual(e))||o.isEqual(e)),SH=(e,t)=>t.startSummary.exists(o=>_H(e,o)),EH=(e,t)=>t.startSummary.exists(o=>kH(e,o)),TH=(e,t)=>t.startDetails.exists(o=>zi(o,e).forall(s=>t.startSummary.exists(a=>!a.contains(e.container())&&a.contains(s.container())))),OH=(e,t,o)=>o.startDetails.exists(s=>fi(e,t).forall(a=>!s.contains(a.container()))),MP=(e,t)=>{const o=t.getNode();Bs(o)||e.selection.setCursorLocation(o,t.offset())},BP=(e,t,o)=>{const s=e.dom.getParent(t.container(),"details");if(s&&!s.open){const a=e.dom.select("summary",s)[0];a&&(o?Na(a):ic(a)).each(d=>MP(e,d))}else MP(e,t)},AH=(e,t)=>{const o=v=>v.contains(e.startContainer),s=v=>v.contains(e.endContainer),a=t.startSummary.exists(o),c=t.startSummary.exists(s),d=t.startDetails.forall(v=>t.endDetails.forall(S=>v!==S));return(a||c)&&!(a&&c)||d},PP=(e,t,o)=>{const{dom:s,selection:a}=e,c=e.getBody();if(o==="character"){const d=Ce.fromRangeStart(a.getRng()),g=s.getParent(d.container(),s.isBlock),v=oR(s,d),S=g&&s.isEmpty(g),R=Rn(g==null?void 0:g.previousSibling),D=Rn(g==null?void 0:g.nextSibling);return S&&(t?D:R)&&fp(!t,c,d).exists(K=>DP(s,K)&&!nv(v,oR(s,K)))?!0:fp(t,c,d).fold(Jt,P=>{const j=oR(s,P);if(DP(s,P)&&!nv(v,j)){if(t||BP(e,P,!1),g&&S){if(t&&R)return!0;if(!t&&D)return!0;BP(e,P,t),e.dom.remove(g)}return!0}else return!1})}else return!1},NH=(e,t,o,s)=>{const c=e.selection.getRng(),d=Ce.fromRangeStart(c),g=e.getBody();return s==="selection"?AH(c,t):o?EH(d,t)||OH(g,d,t):SH(d,t)||TH(d,t)},RH=(e,t,o)=>CH(e.dom,e.selection.getRng()).fold(()=>PP(e,t,o),s=>NH(e,s,t,o)||PP(e,t,o)),DH=(e,t,o)=>{const s=e.selection,a=s.getNode(),c=s.getRng(),d=Ce.fromRangeStart(c);return Tg(a)?(o==="selection"&&RP(c,a)||NT(t,d,a)?NP(a):e.undoManager.transact(()=>{const g=s.getSel();let{anchorNode:v,anchorOffset:S,focusNode:R,focusOffset:D}=g??{};const P=()=>{Ne(v)&&Ne(S)&&Ne(R)&&Ne(D)&&(g==null||g.setBaseAndExtent(v,S,R,D))},j=()=>{v=g==null?void 0:g.anchorNode,S=g==null?void 0:g.anchorOffset,R=g==null?void 0:g.focusNode,D=g==null?void 0:g.focusOffset},K=(Y,ae)=>{Ie(Y.childNodes,le=>{$o(le)&&ae.appendChild(le)})},Z=e.dom.create("span",{"data-mce-bogus":"1"});K(a,Z),a.appendChild(Z),P(),(o==="word"||o==="line")&&(g==null||g.modify("extend",t?"right":"left",o)),!s.isCollapsed()&&RP(s.getRng(),Z)?NP(a):(e.execCommand(t?"ForwardDelete":"Delete"),j(),K(Z,a),P()),e.dom.remove(Z)}),!0):!1},jx=(e,t,o)=>RH(e,t,o)||wH&&DH(e,t,o)?I.some(oo):I.none(),IP=e=>(t,o,s={})=>{const a=t.getBody(),c={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:oo,inputType:o},d=Kb(new InputEvent(e));return t.dispatch(e,{...d,...c,...s})},N4=IP("input"),nR=IP("beforeinput"),LP=To(),FP=LP.os,HP=FP.isMacOS()||FP.isiOS(),MH=LP.browser.isFirefox(),BH=(e,t,o)=>{const s=o.keyCode===rt.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=e.selection.isCollapsed(),c=a?"character":"selection",d=g=>a?g?"word":"line":"selection";Xp([{keyCode:rt.BACKSPACE,action:zt(U,e)},{keyCode:rt.BACKSPACE,action:zt(e4,e,!1)},{keyCode:rt.DELETE,action:zt(e4,e,!0)},{keyCode:rt.BACKSPACE,action:zt(X2,e,!1)},{keyCode:rt.DELETE,action:zt(X2,e,!0)},{keyCode:rt.BACKSPACE,action:zt(iw,e,t,!1)},{keyCode:rt.DELETE,action:zt(iw,e,t,!0)},{keyCode:rt.BACKSPACE,action:zt(Ly,e,!1)},{keyCode:rt.DELETE,action:zt(Ly,e,!0)},{keyCode:rt.BACKSPACE,action:zt(jx,e,!1,c)},{keyCode:rt.DELETE,action:zt(jx,e,!0,c)},...HP?[{keyCode:rt.BACKSPACE,altKey:!0,action:zt(jx,e,!1,d(!0))},{keyCode:rt.DELETE,altKey:!0,action:zt(jx,e,!0,d(!0))},{keyCode:rt.BACKSPACE,metaKey:!0,action:zt(jx,e,!1,d(!1))}]:[{keyCode:rt.BACKSPACE,ctrlKey:!0,action:zt(jx,e,!1,d(!0))},{keyCode:rt.DELETE,ctrlKey:!0,action:zt(jx,e,!0,d(!0))}],{keyCode:rt.BACKSPACE,action:zt(t4,e,!1)},{keyCode:rt.DELETE,action:zt(t4,e,!0)},{keyCode:rt.BACKSPACE,action:zt(l,e,!1)},{keyCode:rt.DELETE,action:zt(l,e,!0)},{keyCode:rt.BACKSPACE,action:zt(X1,e,!1)},{keyCode:rt.DELETE,action:zt(X1,e,!0)},{keyCode:rt.BACKSPACE,action:zt(Y2,e,!1)},{keyCode:rt.DELETE,action:zt(Y2,e,!0)},{keyCode:rt.BACKSPACE,action:zt(w4,e,!1)},{keyCode:rt.DELETE,action:zt(w4,e,!0)}],o).filter(g=>e.selection.isEditable()).each(g=>{o.preventDefault(),nR(e,s).isDefaultPrevented()||(g(),N4(e,s))})},PH=(e,t,o)=>Wx([{keyCode:rt.BACKSPACE,action:zt(U5,e)},{keyCode:rt.DELETE,action:zt(U5,e)},...HP?[{keyCode:rt.BACKSPACE,altKey:!0,action:zt($x,e)},{keyCode:rt.DELETE,altKey:!0,action:zt($x,e)},...o?[{keyCode:MH?224:91,action:zt($x,e)}]:[]]:[{keyCode:rt.BACKSPACE,ctrlKey:!0,action:zt($x,e)},{keyCode:rt.DELETE,ctrlKey:!0,action:zt($x,e)}]],t),IH=(e,t)=>{let o=!1;e.on("keydown",s=>{o=s.keyCode===rt.BACKSPACE,s.isDefaultPrevented()||BH(e,t,s)}),e.on("keyup",s=>{s.isDefaultPrevented()||PH(e,s,o),o=!1})},LH=e=>{for(;e;){if(dt(e)||Le(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},hw=(e,t)=>{const o=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const c=LH(t.firstChild);c&&/^(UL|OL|DL)$/.test(c.nodeName)&&t.insertBefore(o.doc.createTextNode(uo),t.firstChild)}const a=o.createRng();if(t.normalize(),t.hasChildNodes()){const c=new Ys(t,t);let d=t,g;for(;g=c.current();){if(Le(g)){a.setStart(g,0),a.setEnd(g,0);break}if(s[g.nodeName.toLowerCase()]){a.setStartBefore(g),a.setEndBefore(g);break}d=g,g=c.next()}g||(a.setStart(d,0),a.setEnd(d,0))}else Jn(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(a.setStartBefore(t),a.setEndBefore(t)):(a.setStartAfter(t),a.setEndAfter(t)):(a.setStart(t,0),a.setEnd(t,0));e.selection.setRng(a),D0(e,a)},R4=(e,t)=>{const o=e.getRoot();let s,a=t;for(;a!==o&&a&&e.getContentEditable(a)!=="false";){if(e.getContentEditable(a)==="true"){s=a;break}a=a.parentNode}return a!==o?s:o},m8=e=>I.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),FH=e=>m8(e).fold(Je(""),t=>t.nodeName.toUpperCase()),HH=e=>m8(e).filter(t=>sf(X.fromDom(t))).isSome(),f8=e=>{e.innerHTML='<br data-mce-bogus="1">'},zH=(e,t,o)=>{const s=e.dom;I.from(o.style).map(s.parseStyle).each(v=>{const R={...Ca(X.fromDom(t)),...v};s.setStyles(t,R)});const a=I.from(o.class).map(v=>v.split(/\s+/)),c=I.from(t.className).map(v=>Et(v.split(/\s+/),S=>S!==""));Vr(a,c,(v,S)=>{const R=Et(S,P=>!Io(v,P)),D=[...v,...R];s.setAttrib(t,"class",D.join(" "))});const d=["style","class"],g=wi(o,(v,S)=>!Io(d,S));s.setAttribs(t,g)},D4=(e,t)=>{if($s(e).toLowerCase()===t.tagName.toLowerCase()){const s=m0(e);zH(e,t,s)}},zP=(e,t,o,s,a=!0,c,d)=>{const g=e.dom,v=e.schema,S=$s(e),R=o?o.nodeName.toUpperCase():"";let D=t;const P=v.getTextInlineElements();let j;c||R==="TABLE"||R==="HR"?j=g.create(c||S,d||{}):j=o.cloneNode(!1);let K=j;if(!a)g.setAttrib(j,"style",null),g.setAttrib(j,"class",null);else do if(P[D.nodeName]){if(Vi(D)||ol(D))continue;const Z=D.cloneNode(!1);g.setAttrib(Z,"id",""),j.hasChildNodes()?(Z.appendChild(j.firstChild),j.appendChild(Z)):(K=Z,j.appendChild(Z))}while((D=D.parentNode)&&D!==s);return D4(e,j),f8(K),j},VH=(e,t)=>e.dom.getParent(t,Eg),$H=(e,t,o)=>{let s=t;for(;s&&s!==e&&Rn(s.nextSibling);){const a=s.parentElement;if(!a||!o(a))return Eg(a);s=a}return!1},UH=(e,t,o)=>!t&&o.nodeName.toLowerCase()===$s(e)&&e.dom.isEmpty(o)&&$H(e.getBody(),o,s=>jt(e.schema.getTextBlockElements(),s.nodeName.toLowerCase())),ZH=(e,t,o)=>{var s,a,c;const d=t($s(e)),g=VH(e,o);g&&(e.dom.insertAfter(d,g),hw(e,d),((c=(a=(s=o.parentElement)===null||s===void 0?void 0:s.childNodes)===null||a===void 0?void 0:a.length)!==null&&c!==void 0?c:0)>1&&e.dom.remove(o))},WH=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,jH=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},VP=(e,t)=>{const o=e==null?void 0:e.parentNode;return Ne(o)&&o.nodeName===t},$P=e=>Ne(e)&&/^(OL|UL|LI)$/.test(e.nodeName),g8=e=>Ne(e)&&/^(LI|DT|DD)$/.test(e.nodeName),qH=e=>$P(e)&&$P(e.parentNode),sR=e=>{const t=e.parentNode;return g8(t)?t:e},rR=(e,t,o)=>{let s=e[o?"firstChild":"lastChild"];for(;s&&!dt(s);)s=s[o?"nextSibling":"previousSibling"];return s===t},UP=e=>Ir(ti(Ca(X.fromDom(e)),(t,o)=>`${o}: ${t};`),(t,o)=>t+o,""),GH=(e,t,o,s,a)=>{const c=e.dom,d=e.selection.getRng(),g=o.parentNode;if(o===e.getBody()||!g)return;qH(o)&&(a="LI");const v=g8(s)?UP(s):void 0;let S=g8(s)&&v?t(a,{style:UP(s)}):t(a);if(rR(o,s,!0)&&rR(o,s,!1))if(VP(o,"LI")){const R=sR(o);c.insertAfter(S,R),jH(o)?c.remove(R):c.remove(o)}else c.replace(S,o);else if(rR(o,s,!0))VP(o,"LI")?(c.insertAfter(S,sR(o)),S.appendChild(c.doc.createTextNode(" ")),S.appendChild(o)):g.insertBefore(S,o),c.remove(s);else if(rR(o,s,!1))c.insertAfter(S,sR(o)),c.remove(s);else{o=sR(o);const R=d.cloneRange();R.setStartAfter(s),R.setEndAfter(o);const D=R.extractContents();if(a==="LI"&&WH(D,"LI")){const P=Et(no(S.children,X.fromDom),hs(Is("br")));S=D.firstChild,c.insertAfter(D,o),Ie(P,j=>ms(X.fromDom(S),j)),v&&S.setAttribute("style",v)}else c.insertAfter(D,o),c.insertAfter(S,o);c.remove(s)}hw(e,S)},KH=e=>{Ie(Cb(X.fromDom(e),ys),t=>{const o=t.dom;o.nodeValue=Fs(o.data)})},YH=(e,t)=>{const o=e.dom.getParent(t,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},XH=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),p8=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,h8=(e,t)=>Ne(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",JH=(e,t,o)=>{var s;const a=[];if(!o)return;let c=o;for(;c=c.firstChild;){if(e.isBlock(c))return;dt(c)&&!t[c.nodeName.toLowerCase()]&&a.push(c)}let d=a.length;for(;d--;)c=a[d],(!c.hasChildNodes()||c.firstChild===c.lastChild&&((s=c.firstChild)===null||s===void 0?void 0:s.nodeValue)===""||XH(e,c))&&e.remove(c)},b8=(e,t,o)=>Le(t)?e?o===1&&t.data.charAt(o-1)===Ns?0:o:o===t.data.length-1&&t.data.charAt(o)===Ns?t.data.length:o:o,QH=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,b8(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,b8(!1,e.endContainer,e.endOffset)),t},ez=e=>{let t=e;do Le(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},tz=(e,t,o,s,a)=>{var c,d;const g=e.dom,v=(c=R4(g,s))!==null&&c!==void 0?c:g.getRoot();let S=g.getParent(s,g.isBlock);if(!S||!h8(g,S)){if(S=S||v,!S.hasChildNodes()){const j=g.create(t);return D4(e,j),S.appendChild(j),o.setStart(j,0),o.setEnd(j,0),j}let R=s;for(;R&&R.parentNode!==S;)R=R.parentNode;let D;for(;R&&!g.isBlock(R);)D=R,R=R.previousSibling;const P=(d=D==null?void 0:D.parentElement)===null||d===void 0?void 0:d.nodeName;if(D&&P&&e.schema.isValidChild(P,t.toLowerCase())){const j=D.parentNode,K=g.create(t);for(D4(e,K),j.insertBefore(K,D),R=D;R&&!g.isBlock(R);){const Z=R.nextSibling;K.appendChild(R),R=Z}o.setStart(s,a),o.setEnd(s,a)}}return s},oz=(e,t)=>{t.normalize();const o=t.lastChild;(!o||dt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(t,"br")},nz=(e,t)=>{const o=LR(e);return _o(t)?!1:bt(o)?Io(qe.explode(o),t.nodeName.toLowerCase()):o},ZP={insert:(e,t)=>{let o,s,a,c,d=!1;const g=e.dom,v=e.schema,S=v.getNonEmptyElements(),R=e.selection.getRng(),D=$s(e),P=X.fromDom(R.startContainer),j=Oc(P,R.startOffset),K=j.exists(Be=>qm(Be)&&!gr(Be)),Z=R.collapsed&&K,Y=(Be,ct)=>zP(e,o,We,Pe,IR(e),Be,ct),ae=Be=>{const ct=b8(Be,o,s);if(Le(o)&&(Be?ct>0:ct<o.data.length))return!1;if(o.parentNode===We&&d&&!Be||Be&&dt(o)&&o===We.firstChild)return!0;if(p8(o,"TABLE")||p8(o,"HR"))return d&&!Be||!d&&Be;const Ct=new Ys(o,We);Le(o)&&(Be&&ct===0?Ct.prev():!Be&&ct===o.data.length&&Ct.next());let co;for(;co=Ct.current();){if(dt(co)){if(!co.getAttribute("data-mce-bogus")){const fo=co.nodeName.toLowerCase();if(S[fo]&&fo!=="br")return!1}}else if(Le(co)&&!vl(co.data))return!1;Be?Ct.prev():Ct.next()}return!0},le=()=>{let Be;return/^(H[1-6]|PRE|FIGURE)$/.test(a)&&st!=="HGROUP"?Be=Y(D):Be=Y(),nz(e,c)&&h8(g,c)&&g.isEmpty(We,void 0,{includeZwsp:!0})?Be=g.split(c,We):g.insertAfter(Be,We),hw(e,Be),Be};wp(g,R).each(Be=>{R.setStart(Be.startContainer,Be.startOffset),R.setEnd(Be.endContainer,Be.endOffset)}),o=R.startContainer,s=R.startOffset;const ie=!!(t&&t.shiftKey),pe=!!(t&&t.ctrlKey);dt(o)&&o.hasChildNodes()&&!Z&&(d=s>o.childNodes.length-1,o=o.childNodes[Math.min(s,o.childNodes.length-1)]||o,d&&Le(o)?s=o.data.length:s=0);const Pe=R4(g,o);if(!Pe||YH(e,o))return;ie||(o=tz(e,D,R,o,s));let We=g.getParent(o,g.isBlock)||g.getRoot();c=Ne(We==null?void 0:We.parentNode)?g.getParent(We.parentNode,g.isBlock):null,a=We?We.nodeName.toUpperCase():"";const st=c?c.nodeName.toUpperCase():"";if(st==="LI"&&!pe){const Be=c;We=Be,c=Be.parentNode,a=st}if(dt(c)&&UH(e,ie,We))return ZH(e,Y,We);if(/^(LI|DT|DD)$/.test(a)&&dt(c)&&g.isEmpty(We)){GH(e,Y,c,We,D);return}if(!Z&&(We===e.getBody()||!h8(g,We)))return;const ke=We.parentNode;let ye;if(Z)ye=Y(D),j.fold(()=>{Pn(P,X.fromDom(ye))},Be=>{As(Be,X.fromDom(ye))}),e.selection.setCursorLocation(ye,0);else if(Dd(We))ye=bh(We),g.isEmpty(We)&&f8(We),D4(e,ye),hw(e,ye);else if(ae(!1))ye=le();else if(ae(!0)&&ke){ye=ke.insertBefore(Y(),We);const Be=dh(X.fromDom(R.startContainer))&&R.collapsed;hw(e,p8(We,"HR")||Be?ye:We)}else{const Be=QH(R).cloneRange();Be.setEndAfter(We);const ct=Be.extractContents();KH(ct),ez(ct),ye=ct.firstChild,g.insertAfter(ct,We),JH(g,S,ye),oz(g,We),g.isEmpty(We)&&f8(We),ye.normalize(),g.isEmpty(ye)?(g.remove(ye),le()):(D4(e,ye),hw(e,ye))}g.setAttrib(ye,"id",""),e.dispatch("NewBlock",{newBlock:ye})},fakeEventName:"insertParagraph"},sz=(e,t,o)=>{const s=new Ys(t,o);let a;const c=e.getNonEmptyElements();for(;a=s.next();)if(c[a.nodeName.toLowerCase()]||Le(a)&&a.length>0)return!0;return!1},WP=(e,t,o)=>{const s=e.dom.createRng();o?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),D0(e,s)},rz=(e,t)=>{const o=e.selection,s=e.dom,a=o.getRng();let c,d=!1;wp(s,a).each(j=>{a.setStart(j.startContainer,j.startOffset),a.setEnd(j.endContainer,j.endOffset)});let g=a.startOffset,v=a.startContainer;if(dt(v)&&v.hasChildNodes()){const j=g>v.childNodes.length-1;v=v.childNodes[Math.min(g,v.childNodes.length-1)]||v,j&&Le(v)?g=v.data.length:g=0}let S=s.getParent(v,s.isBlock);const R=S&&S.parentNode?s.getParent(S.parentNode,s.isBlock):null,D=R?R.nodeName.toUpperCase():"",P=!!(t&&t.ctrlKey);D==="LI"&&!P&&(S=R),Le(v)&&g>=v.data.length&&(sz(e.schema,v,S||s.getRoot())||(c=s.create("br"),a.insertNode(c),a.setStartAfter(c),a.setEndAfter(c),d=!0)),c=s.create("br"),vf(s,a,c),WP(e,c,d),e.undoManager.add()},az=(e,t)=>{const o=X.fromTag("br");As(X.fromDom(t),o),e.undoManager.add()},iz=(e,t)=>{cz(e.getBody(),t)||Vn(X.fromDom(t),X.fromTag("br"));const o=X.fromTag("br");Vn(X.fromDom(t),o),WP(e,o.dom,!1),e.undoManager.add()},lz=e=>Jn(e.getNode()),cz=(e,t)=>lz(Ce.after(t))?!0:fi(e,Ce.after(t)).map(o=>Jn(o.getNode())).getOr(!1),jP=e=>e&&e.nodeName==="A"&&"href"in e,dz=e=>e.fold(Jt,jP,jP,Jt),uz=e=>{const t=it(Bp,e),o=Ce.fromRangeStart(e.selection.getRng());return ku(t,e.getBody(),o).filter(dz)},mz=(e,t)=>{t.fold(oo,it(az,e),it(iz,e),oo)},qP={insert:(e,t)=>{const o=uz(e);o.isSome()?o.each(it(mz,e)):rz(e,t)},fakeEventName:"insertLineBreak"},GP=(e,t)=>m8(e).filter(o=>t.length>0&&Qr(X.fromDom(o),t)).isSome(),fz=e=>GP(e,jw(e)),gz=e=>GP(e,j4(e)),vc=me.generate([{br:[]},{block:[]},{none:[]}]),pz=(e,t)=>gz(e),KP=e=>(t,o)=>HH(t)===e,YP=(e,t)=>(o,s)=>FH(o)===e.toUpperCase()===t,hz=e=>{const t=R4(e.dom,e.selection.getStart());return _o(t)},M4=e=>YP("pre",e),bz=()=>YP("summary",!0),aR=e=>(t,o)=>lp(t)===e,xz=(e,t)=>fz(e),iR=(e,t)=>t,vz=e=>{const t=$s(e),o=R4(e.dom,e.selection.getStart());return Ne(o)&&e.schema.isValidChild(o.nodeName,t)},yz=e=>{const t=e.selection.getRng(),o=X.fromDom(t.startContainer),a=Oc(o,t.startOffset).map(c=>qm(c)&&!gr(c));return t.collapsed&&a.getOr(!0)},cd=(e,t)=>(o,s)=>Ir(e,(c,d)=>c&&d(o,s),!0)?I.some(t):I.none(),wz=(e,t)=>K5([cd([pz],vc.none()),cd([M4(!0),hz],vc.none()),cd([bz()],vc.br()),cd([M4(!0),aR(!1),iR],vc.br()),cd([M4(!0),aR(!1)],vc.block()),cd([M4(!0),aR(!0),iR],vc.block()),cd([M4(!0),aR(!0)],vc.br()),cd([KP(!0),iR],vc.br()),cd([KP(!0)],vc.block()),cd([xz],vc.br()),cd([iR],vc.br()),cd([vz],vc.block()),cd([yz],vc.block())],[e,!!(t&&t.shiftKey)]).getOr(vc.none()),lR=(e,t,o)=>{t.selection.isCollapsed()||bu(t),!(Ne(o)&&nR(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,o),Ne(o)&&N4(t,e.fakeEventName))},XP=(e,t)=>{const o=()=>lR(qP,e,t),s=()=>lR(ZP,e,t),a=wz(e,t);switch(W4(e)){case"linebreak":a.fold(o,o,oo);break;case"block":a.fold(s,s,oo);break;case"invert":a.fold(s,o,oo);break;default:a.fold(o,s,oo);break}},JP=To(),Cz=JP.os.isiOS()&&JP.browser.isSafari(),QP=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),WM(e.undoManager),e.undoManager.transact(()=>{XP(e,t)}))},_z=e=>{if(!e.collapsed)return!1;const t=e.startContainer;if(Le(t)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,s=t.data.charAt(e.startOffset-1);return o.test(s)}else return!1},kz=e=>{let t=I.none();const o=a=>{t=I.some(a.selection.getBookmark()),a.undoManager.add()},s=(a,c)=>{a.undoManager.undo(),t.fold(oo,d=>a.selection.moveToBookmark(d)),QP(a,c),t=I.none()};e.on("keydown",a=>{a.keyCode===rt.ENTER&&(Cz&&_z(e.selection.getRng())?o(e):QP(e,a))}),e.on("keyup",a=>{a.keyCode===rt.ENTER&&t.each(()=>s(e,a))})},Sz=(e,t,o)=>{const s=Do.os.isMacOS()||Do.os.isiOS();Wx([{keyCode:rt.END,action:zt(Xf,e,!0)},{keyCode:rt.HOME,action:zt(Xf,e,!1)},...s?[]:[{keyCode:rt.HOME,action:zt(Jf,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:rt.END,action:zt(Jf,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:rt.END,action:zt(Jp,e,!0)},{keyCode:rt.HOME,action:zt(Jp,e,!1)},{keyCode:rt.END,action:zt(zx,e,!0,t)},{keyCode:rt.HOME,action:zt(zx,e,!1,t)}],o).each(a=>{o.preventDefault()})},Ez=(e,t)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Sz(e,t,o)})},Tz=e=>{e.on("input",t=>{t.isComposing||p6(e)})},Oz=To(),Az=(e,t,o)=>{Wx([{keyCode:rt.PAGE_UP,action:zt(zx,e,!1,t)},{keyCode:rt.PAGE_DOWN,action:zt(zx,e,!0,t)}],o)},eI=e=>e.stopImmediatePropagation(),tI=e=>e.keyCode===rt.PAGE_UP||e.keyCode===rt.PAGE_DOWN,oI=(e,t,o)=>{o&&!e.get()?t.on("NodeChange",eI,!0):!o&&e.get()&&t.off("NodeChange",eI),e.set(o)},Nz=(e,t)=>{if(Oz.os.isMacOS())return;const o=_s(!1);e.on("keydown",s=>{tI(s)&&oI(o,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()||Az(e,t,s),tI(s)&&o.get()&&(oI(o,e,!1),e.nodeChanged())})},Rz=e=>{e.on("beforeinput",t=>{(!e.selection.isEditable()||bn(t.getTargetRanges(),o=>!zE(e.dom,o)))&&t.preventDefault()})},nI=(e,t)=>{const o=t.container(),s=t.offset();return Le(o)?(o.insertData(s,e),I.some(Ce(o,s+e.length))):Uv(t).map(a=>{const c=X.fromText(e);return t.isAtEnd()?Vn(a,c):As(a,c),Ce(c.dom,e.length)})},sI=it(nI,uo),rI=it(nI," "),Dz=(e,t,o)=>Ty(e,t,o)?sI(t):rI(t),Mz=e=>t=>t.fold(o=>zi(e.dom,Ce.before(o)),o=>Na(o),o=>ic(o),o=>fi(e.dom,Ce.after(o))),Bz=(e,t,o)=>s=>Ty(e,s,o)?sI(t):rI(t),aI=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},Pz=(e,t)=>e.isEditable(e.getParent(t,"summary")),Iz=e=>{const t=Ce.fromRangeStart(e.selection.getRng()),o=X.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=it(Bp,e),a=Ce.fromRangeStart(e.selection.getRng());return ku(s,e.getBody(),a).bind(Mz(o)).map(c=>()=>Bz(o,t,e.schema)(c).each(aI(e)))}else return I.none()},Lz=e=>{const t=()=>{const o=X.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const s=Ce.fromRangeStart(e.selection.getRng());Dz(o,s,e.schema).each(aI(e))};return Wm(Do.browser.isFirefox()&&e.selection.isEditable()&&Pz(e.dom,e.selection.getRng().startContainer),t)},Fz=(e,t)=>{Xp([{keyCode:rt.SPACEBAR,action:zt(Iz,e)},{keyCode:rt.SPACEBAR,action:zt(Lz,e)}],t).each(o=>{t.preventDefault(),nR(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),N4(e,"insertText",{data:" "}))})},Hz=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||Fz(e,t)})},zz=e=>nD(e)?[{keyCode:rt.TAB,action:zt(sP,e,!0)},{keyCode:rt.TAB,shiftKey:!0,action:zt(sP,e,!1)}]:[],Vz=(e,t)=>{Wx([...zz(e)],t).each(o=>{t.preventDefault()})},$z=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||Vz(e,t)})},Uz=e=>{if(e.addShortcut("Meta+P","","mcePrint"),yH(e),_u(e))return _s(null);{const t=Z7(e);return Rz(e),rs(e),oF(e,t),IH(e,t),kz(e),Hz(e),Tz(e),$z(e),Ez(e,t),Nz(e,t),t}};class Zz{constructor(t){this.lastPath=[],this.editor=t;let o;const s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",a=>{const c=t.selection.getRng(),d={startContainer:c.startContainer,startOffset:c.startOffset,endContainer:c.endContainer,endOffset:c.endOffset};(a.type==="nodechange"||!b1(d,o))&&t.dispatch("SelectionChange"),o=d}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const a=t.selection.getStart(!0);a&&Tf(t)&&!s.isSameElementPath(a)&&t.dom.isChildOf(a,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",a=>{!a.isDefaultPrevented()&&Tf(t)&&(t.selection.getNode().nodeName==="IMG"?sl.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const o=this.editor.selection;let s;if(this.editor.initialized&&o&&!GR(this.editor)&&!this.editor.mode.isReadOnly()){const a=this.editor.getBody();s=o.getStart(!0)||a,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,a))&&(s=a);const c=[];this.editor.dom.getParent(s,d=>d===a?!0:(c.push(d),!1)),this.editor.dispatch("NodeChange",{...t,element:s,parents:c})}}isSameElementPath(t){let o;const s=this.editor,a=Il(s.dom.getParents(t,kn,s.getBody()));if(a.length===this.lastPath.length){for(o=a.length;o>=0&&a[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=a,!0}return this.lastPath=a,!1}}const iI=Wc("image"),Wz=e=>{const t=e;return I.from(t[iI])},jz=(e,t)=>{const o=e;o[iI]=t},x8=Wc("event"),qz=e=>{const t=e;return I.from(t[x8])},cR=e=>t=>{const o=t;o[x8]=e},Gz=(e,t)=>cR(t)(e),lI=cR(0),Kz=cR(2),Yz=cR(1),Xz=(e=>t=>{const o=t;return I.from(o[x8]).exists(s=>s===e)})(0),Jz=()=>Object.freeze({length:0,item:e=>null}),v8=Wc("mode"),Qz=e=>{const t=e;return I.from(t[v8])},dR=e=>t=>{const o=t;o[v8]=e},cI=(e,t)=>dR(t)(e),dI=dR(0),y8=dR(2),e9=dR(1),uI=e=>t=>{const o=t;return I.from(o[v8]).exists(s=>s===e)},bw=uI(0),mI=uI(1),t9=(e,t)=>({...t,get length(){return t.length},add:(o,s)=>{if(bw(e))if(bt(o)){if(!Bs(s))return t.add(o,s)}else return t.add(o);return null},remove:o=>{bw(e)&&t.remove(o)},clear:()=>{bw(e)&&t.clear()}}),o9=["none","copy","link","move"],n9=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],w8=()=>{const e=new window.DataTransfer;let t="move",o="all";const s={get dropEffect(){return t},set dropEffect(a){Io(o9,a)&&(t=a)},get effectAllowed(){return o},set effectAllowed(a){Xz(s)&&Io(n9,a)&&(o=a)},get items(){return t9(s,e.items)},get files(){return mI(s)?Jz():e.files},get types(){return e.types},setDragImage:(a,c,d)=>{bw(s)&&(jz(s,{image:a,x:c,y:d}),e.setDragImage(a,c,d))},getData:a=>mI(s)?"":e.getData(a),setData:(a,c)=>{bw(s)&&e.setData(a,c)},clearData:a=>{bw(s)&&e.clearData(a)}};return dI(s),s},s9=e=>{const t=w8(),o=Qz(e);return y8(e),lI(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,Wz(e).each(s=>t.setDragImage(s.image,s.x,s.y)),Ie(e.types,s=>{s!=="Files"&&t.setData(s,e.getData(s))}),Ie(e.files,s=>t.items.add(s)),qz(e).each(s=>{Gz(t,s)}),o.each(s=>{cI(e,s),cI(t,s)}),t},r9=e=>{const t=e.getData("text/html");return t===""?I.none():I.some(t)},fI=(e,t)=>e.setData("text/html",t),gI="x-tinymce/html",uR=Je(gI),C8="<!-- "+gI+" -->",a9=e=>C8+e,i9=e=>e.replace(C8,""),pI=e=>e.indexOf(C8)!==-1,l9=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),c9=(e,t)=>{let o="<"+e;const s=ti(t,(a,c)=>c+'="'+Wn.encodeAllRaw(a)+'"');return s.length&&(o+=" "+s.join(" ")),o+">"},d9=(e,t,o)=>{const s=e.split(/\n\n/),a=c9(t,o),c="</"+t+">",d=no(s,v=>v.split(/\n/).join("<br />")),g=v=>a+v+c;return d.length===1?d[0]:no(d,g).join("")},hI="%MCEPASTEBIN%",u9=(e,t)=>{const{dom:o,selection:s}=e,a=e.getBody();t.set(s.getRng());const c=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},hI);Do.browser.isFirefox()&&o.setStyle(c,"left",o.getStyle(a,"direction",!0)==="rtl"?65535:-65535),o.bind(c,"beforedeactivate focusin focusout",d=>{d.stopPropagation()}),c.focus(),s.select(c,!0)},m9=(e,t)=>{const o=e.dom;if(_8(e)){let s;const a=t.get();for(;s=_8(e);)o.remove(s),o.unbind(s);a&&e.selection.setRng(a)}t.set(null)},_8=e=>e.dom.get("mcepastebin"),f9=e=>Ne(e)&&e.id==="mcepastebin",g9=e=>{const t=e.dom,o=(d,g)=>{d.appendChild(g),t.remove(g,!0)},[s,...a]=Et(e.getBody().childNodes,f9);Ie(a,d=>{o(s,d)});const c=t.select("div[id=mcepastebin]",s);for(let d=c.length-1;d>=0;d--){const g=t.create("div");s.insertBefore(g,c[d]),o(g,c[d])}return s?s.innerHTML:""},bI=e=>e===hI,p9=e=>{const t=_s(null);return{create:()=>u9(e,t),remove:()=>m9(e,t),getEl:()=>_8(e),getHtml:()=>g9(e),getLastRng:t.get}},xI=(e,t)=>(qe.each(t,o=>{eo(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),h9=e=>{const t=oc(),o=Wp({},t);let s="";const a=t.getVoidElements(),c=qe.makeMap("script noscript style textarea video audio iframe object"," "),d=t.getBlockElements(),g=v=>{const S=v.name,R=v;if(S==="br"){s+=`
`;return}if(S!=="wbr"){if(a[S]&&(s+=" "),c[S]){s+=" ";return}if(v.type===3&&(s+=v.value),!(v.name in t.getVoidElements())){let D=v.firstChild;if(D)do g(D);while(D=D.next)}d[S]&&R.next&&(s+=`
`,S==="p"&&(s+=`
`))}};return e=xI(e,[/<!\[[^\]]+\]>/g]),g(o.parse(e)),s},vI=e=>(e=xI(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,s,a)=>!s&&!a?" ":uo],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),b9=e=>{let t=0;return()=>e+t++},x9=e=>{const t=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return qe.hasOwn(o,t)?"image/"+o[t]:"image/"+t},v9=(e,t)=>{const o=Wp({sanitize:Fv(e),sandbox_iframes:rC(e)},e.schema);o.addNodeFilter("meta",a=>{qe.each(a,c=>{c.remove()})});const s=o.parse(t,{forced_root_block:!1,isRootContent:!0});return gm({validate:!0},e.schema).serialize(s)},yI=(e,t)=>({content:e,cancelled:t}),y9=(e,t,o)=>{const s=e.dom.create("div",{style:"display:none"},t),a=mE(e,s,o);return yI(a.node.innerHTML,a.isDefaultPrevented())},w9=(e,t,o)=>{const s=uE(e,t,o),a=v9(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?y9(e,a,o):yI(a,s.isDefaultPrevented())},C9=(e,t,o)=>w9(e,t,o),k8=(e,t)=>(e.insertContent(t,{merge:eC(e),paste:!0}),!0),S8=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),_9=(e,t)=>S8(t)&&bn(sC(e),o=>Fl(t.toLowerCase(),`.${o.toLowerCase()}`)),k9=(e,t,o)=>(e.undoManager.extra(()=>{o(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),S9=(e,t,o)=>(e.undoManager.extra(()=>{o(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),E9=(e,t,o)=>!e.selection.isCollapsed()&&S8(t)?S9(e,t,o):!1,T9=(e,t,o)=>_9(e,t)?k9(e,t,o):!1,O9=(e,t)=>{qe.each([E9,T9,k8],o=>!o(e,t,k8))},A9=(e,t,o)=>{o||!tC(e)?k8(e,t):O9(e,t)},N9=b9("mceclip"),R9=e=>{const t=w8();return fI(t,e),y8(t),t},wI=(e,t,o,s,a)=>{const c=C9(e,t,o);if(!c.cancelled){const d=c.content,g=()=>A9(e,d,s);a?nR(e,"insertFromPaste",{dataTransfer:R9(d)}).isDefaultPrevented()||(g(),N4(e,"insertFromPaste")):g()}},mR=(e,t,o,s)=>{const a=o||pI(t);wI(e,i9(t),a,!1,s)},E8=(e,t,o)=>{const s=e.dom.encode(t).replace(/\r\n/g,`
`),a=Id(s,a3(e)),c=d9(a,$s(e),m0(e));wI(e,c,!1,!0,o)},CI=e=>{const t={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const s=e.types[o];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},sb=(e,t)=>t in e&&e[t].length>0,_I=e=>sb(e,"text/html")||sb(e,"text/plain"),D9=(e,t)=>{const o=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Ne(o)?e.dom.encode(o[1]):void 0},M9=(e,t,o,s)=>{const a=N9(),c=la(e)&&Ne(o.name),d=c?D9(e,o.name):a,g=c?o.name:void 0,v=t.create(a,o,s,d,g);return t.add(v),v},B9=(e,t)=>{Hk(t.uri).each(({data:o,type:s,base64Encoded:a})=>{const c=a?o:btoa(o),d=t.file,g=e.editorUpload.blobCache,v=g.getByData(c,s),S=v??M9(e,g,d,c);mR(e,`<img src="${S.blobUri()}">`,!1,!0)})},P9=e=>e.type==="paste",I9=e=>Promise.all(no(e,t=>$O(t).then(o=>({file:t,uri:o})))),L9=e=>{const t=sC(e);return o=>yn(o.type,"image/")&&bn(t,s=>x9(s)===o.type)},F9=(e,t)=>{const o=t.items?Ho(Dt(t.items),a=>a.kind==="file"?[a.getAsFile()]:[]):[],s=t.files?Dt(t.files):[];return Et(o.length>0?o:s,L9(e))},kI=(e,t,o)=>{const s=P9(t)?t.clipboardData:t.dataTransfer;if(Iv(e)&&s){const a=F9(e,s);if(a.length>0)return t.preventDefault(),I9(a).then(c=>{o&&e.selection.setRng(o),Ie(c,d=>{B9(e,d)})}),!0}return!1},H9=e=>{var t,o;return Do.os.isAndroid()&&((o=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||o===void 0?void 0:o.length)===0},z9=e=>rt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,T8=(e,t,o,s,a)=>{let c=vI(o);const d=sb(t,uR())||pI(o),g=!d&&l9(c),v=S8(c);(bI(c)||!c.length||g&&!v)&&(s=!0),(s||v)&&(sb(t,"text/plain")&&g?c=t["text/plain"]:c=h9(c)),!bI(c)&&(s?E8(e,c,a):mR(e,c,d,a))},V9=(e,t,o)=>{let s;const a=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",c=>{z9(c)&&!c.isDefaultPrevented()&&(s=c.shiftKey&&c.keyCode===86)}),e.on("paste",c=>{if(c.isDefaultPrevented()||H9(c))return;const d=o.get()==="text"||s;s=!1;const g=CI(c.clipboardData);!_I(g)&&kI(e,c,a())||(sb(g,"text/html")?(c.preventDefault(),T8(e,g,g["text/html"],d,!0)):sb(g,"text/plain")&&sb(g,"text/uri-list")?(c.preventDefault(),T8(e,g,g["text/plain"],d,!0)):(t.create(),sl.setEditorTimeout(e,()=>{const v=t.getHtml();t.remove(),T8(e,g,v,d,!1)},0)))})},$9=e=>{const t=a=>yn(a,"webkit-fake-url"),o=a=>yn(a,"data:"),s=a=>{var c;return((c=a.data)===null||c===void 0?void 0:c.paste)===!0};e.parser.addNodeFilter("img",(a,c,d)=>{if(!Iv(e)&&s(d))for(const g of a){const v=g.attr("src");bt(v)&&!g.attr("data-mce-object")&&v!==Do.transparentSrc&&(t(v)||!i3(e)&&o(v))&&g.remove()}})},U9=(e,t,o)=>{V9(e,t,o),$9(e)},Z9=(e,t)=>{t.get()==="text"?(t.set("html"),QC(e,!1)):(t.set("text"),QC(e,!0)),e.focus()},W9=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{Z9(e,t)}),e.addCommand("mceInsertClipboardContent",(o,s)=>{s.html&&mR(e,s.html,s.internal,!1),s.text&&E8(e,s.text,!1)})},j9=(e,t,o)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",o),e.setData(uR(),t),!0}catch{return!1}else return!1},SI=(e,t,o,s)=>{j9(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):o(t.html,s)},EI=e=>(t,o)=>{const{dom:s,selection:a}=e,c=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),d=s.create("div",{contenteditable:"true"},t);s.setStyles(c,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),c.appendChild(d),s.add(e.getBody(),c);const g=a.getRng();d.focus();const v=s.createRng();v.selectNodeContents(d),a.setRng(v),sl.setEditorTimeout(e,()=>{a.setRng(g),s.remove(c),o()},0)},TI=e=>({html:a9(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),q9=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),OI=e=>!e.selection.isCollapsed()||q9(e),G9=e=>t=>{!t.isDefaultPrevented()&&OI(e)&&e.selection.isEditable()&&SI(t,TI(e),EI(e),()=>{if(Do.browser.isChromium()||Do.browser.isFirefox()){const o=e.selection.getRng();sl.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},K9=e=>t=>{!t.isDefaultPrevented()&&OI(e)&&SI(t,TI(e),EI(e),oo)},Y9=e=>{e.on("cut",G9(e)),e.on("copy",K9(e))},AI=(e,t)=>{var o,s;return fm.getCaretRangeFromPoint((o=t.clientX)!==null&&o!==void 0?o:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},X9=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},NI=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},J9=e=>bn(e.files,t=>/^image\//.test(t.type)),Q9=(e,t,o,s)=>{const a=e.getParent(o,d=>Ld(t,d));if(!Rn(e.getParent(o,"summary")))return!0;if(a&&jt(s,"text/html")){const d=new DOMParser().parseFromString(s["text/html"],"text/html").body;return!Rn(d.querySelector(a.nodeName.toLowerCase()))}else return!1},eV=e=>{e.on("input",t=>{const o=s=>Rn(s.querySelector("summary"));if(t.inputType==="deleteByDrag"){const s=Et(e.dom.select("details"),o);Ie(s,a=>{Jn(a.firstChild)&&a.firstChild.remove();const c=e.dom.create("summary");c.appendChild(rf().dom),a.prepend(c)})}})},tV=(e,t)=>{o1(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),Iv(e)||e.on("drop",o=>{const s=o.dataTransfer;s&&J9(s)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const s=AI(e,o);if(_o(s))return;const a=CI(o.dataTransfer),c=sb(a,uR());if((!_I(a)||X9(a))&&kI(e,o,s))return;const d=a[uR()],g=d||a["text/html"]||a["text/plain"],v=Q9(e.dom,e.schema,s.startContainer,a),S=t.get();S&&!v||g&&(o.preventDefault(),sl.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(d||S&&v)&&e.execCommand("Delete"),NI(e,s);const R=vI(g);a["text/html"]?mR(e,R,c,!0):E8(e,R,!0)})}))}),e.on("dragstart",o=>{t.set(!0)}),e.on("dragover dragend",o=>{Iv(e)&&!t.get()&&(o.preventDefault(),NI(e,AI(e,o))),o.type==="dragend"&&t.set(!1)}),eV(e)},oV=e=>{const t=a=>c=>{a(e,c)},o=n3(e);Pt(o)&&e.on("PastePreProcess",t(o));const s=QR(e);Pt(s)&&e.on("PastePostProcess",t(s))},nV=(e,t)=>{e.on("PastePreProcess",o=>{o.content=t(e,o.content,o.internal)})},sV=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,RI=e=>qe.trim(e).replace(sV,Hc).toLowerCase(),rV=(e,t,o)=>{const s=eD(e);if(o||s==="all"||!r3(e))return t;const a=s?s.split(/[, ]/):[];if(a&&s!=="none"){const c=e.dom,d=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(g,v,S,R)=>{const D=c.parseStyle(c.decode(S)),P={};for(let K=0;K<a.length;K++){const Z=D[a[K]];let Y=Z,ae=c.getStyle(d,a[K],!0);/color/.test(a[K])&&(Y=RI(Y),ae=RI(ae)),ae!==Y&&(P[a[K]]=Z)}const j=c.serializeStyle(P,"span");return j?v+' style="'+j+'"'+R:v+R})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(c,d,g,v)=>d+' style="'+g+'"'+v),t},aV=e=>{(Do.browser.isChromium()||Do.browser.isSafari())&&nV(e,rV)},iV=e=>{const t=_s(!1),o=_s(oC(e)?"text":"html"),s=p9(e);aV(e),W9(e,o),oV(e),e.on("PreInit",()=>{Y9(e),tV(e,t),U9(e,s,o)})},lV=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},cV=e=>{e.parser.addNodeFilter("details",t=>{const o=sD(e);Ie(t,s=>{o==="expanded"?s.attr("open","open"):o==="collapsed"&&s.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{const o=rD(e);Ie(t,s=>{o==="expanded"?s.attr("open","open"):o==="collapsed"&&s.attr("open",null)})})},dV=e=>{lV(e),cV(e)},uV=Jn,DI=Le,mV=e=>ln(e.dom),fV=e=>Ua(e.dom),MI=e=>t=>Lo(X.fromDom(e),t),gV=(e,t,o)=>Ee(X.fromDom(e),s=>fV(s)||o.isBlock(po(s)),MI(t)).getOr(X.fromDom(t)).dom,BI=(e,t)=>Ee(X.fromDom(e),mV,MI(t)),PI=(e,t,o)=>{const s=new Ys(e,t),a=o?s.next.bind(s):s.prev.bind(s);let c=e;for(let d=o?e:a();d&&!uV(d);d=a())ui(d)&&(c=d);return c},pV=(e,t,o)=>{const a=Ce.fromRangeStart(e).getNode(),c=gV(a,t,o),d=PI(a,c,!1),g=PI(a,c,!0),v=document.createRange();return BI(d,c).fold(()=>{DI(d)?v.setStart(d,0):v.setStartBefore(d)},S=>v.setStartBefore(S.dom)),BI(g,c).fold(()=>{DI(g)?v.setEnd(g,g.data.length):v.setEndAfter(g)},S=>v.setEndAfter(S.dom)),v},hV=e=>{const t=pV(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(fk(t))},bV=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),hV(e))})};var xw;(function(e){e.Before="before",e.After="after"})(xw||(xw={}));const xV=(e,t)=>Math.abs(e.left-t),vV=(e,t)=>Math.abs(e.right-t),yV=(e,t)=>e>=t.top&&e<=t.bottom,wV=(e,t)=>e.top<t.bottom&&e.bottom>t.top,CV=(e,t)=>{const o=Rr(e,t)/Math.min(e.height,t.height);return wV(e,t)&&o>.5},_V=(e,t)=>{const o=Et(e,s=>yV(t,s));return s0(o).fold(()=>[[],e],s=>{const{pass:a,fail:c}=ul(e,d=>CV(d,s));return[a,c]})},kV=(e,t)=>({node:e.node,position:xV(e,t)<vV(e,t)?xw.Before:xw.After}),SV=(e,t,o)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),O8=(e,t,o,s)=>{const a=D=>ui(D.node)?I.some(D):dt(D.node)?O8(Dt(D.node.childNodes),t,o,!1):I.none(),c=(D,P,j)=>a(P).filter(K=>Math.abs(j(D,t,o)-j(K,t,o))<2&&Le(K.node)),d=(D,P)=>{const j=Dn(D,(K,Z)=>P(K,t,o)-P(Z,t,o));return Zs(j,a).map(K=>s&&!Le(K.node)&&j.length>1?c(K,j[1],P).getOr(K):K)},[g,v]=_V(cN(e),o),{pass:S,fail:R}=ul(v,D=>D.top<o);return d(g,SV).orThunk(()=>d(R,r0)).orThunk(()=>d(S,r0))},EV=(e,t,o,s)=>{const a=(c,d)=>{const g=S=>dt(S)&&S.classList.contains("mce-drag-container"),v=Et(c.dom.childNodes,hs(g));return d.fold(()=>O8(v,o,s,!0),S=>{const R=Et(v,D=>D!==S.dom);return O8(R,o,s,!0)}).orThunk(()=>(Lo(c,e)?I.none():lh(c)).bind(R=>a(R,I.some(c))))};return a(t,I.none())},TV=(e,t,o)=>{const s=X.fromDom(e),a=gl(s),d=X.fromPoint(a,t,o).filter(g=>ai(s,g)).getOr(s);return EV(s,d,t,o)},II=(e,t,o)=>TV(e,t,o).filter(s=>x0(s.node)).map(s=>kV(s,t)),LI=e=>{var t,o;const s=e.getBoundingClientRect(),a=e.ownerDocument,c=a.documentElement,d=a.defaultView;return{top:s.top+((t=d==null?void 0:d.scrollY)!==null&&t!==void 0?t:0)-c.clientTop,left:s.left+((o=d==null?void 0:d.scrollX)!==null&&o!==void 0?o:0)-c.clientLeft}},OV=e=>e.inline?LI(e.getBody()):{left:0,top:0},AV=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},NV=e=>{const t=e.getBody(),o=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},a={left:t.scrollLeft||o.scrollLeft,top:t.scrollTop||o.scrollTop};return e.inline?s:a},RV=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const o=LI(e.getContentAreaContainer()),s=NV(e);return{left:t.pageX-o.left+s.left,top:t.pageY-o.top+s.top}}return{left:t.pageX,top:t.pageY}},DV=(e,t,o)=>({pageX:o.left-e.left+t.left,pageY:o.top-e.top+t.top}),MV=(e,t)=>DV(OV(e),AV(e),RV(e,t)),FI=e=>({target:e,srcElement:e}),BV=(e,t,o,s)=>({...t,dataTransfer:s,type:e,...FI(o)}),PV=(e,t,o)=>{const s=Ke("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:s,initEvent:s,preventDefault:oo,stopImmediatePropagation:oo,stopPropagation:oo,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:s,initMouseEvent:s,getModifierState:s,dataTransfer:o,...FI(t)}},IV=(e,t)=>{const o=s9(e);return t==="dragstart"?(lI(o),dI(o)):t==="drop"?(Kz(o),y8(o)):(Yz(o),e9(o)),o},LV=(e,t,o,s)=>{const a=IV(o,e);return Bs(s)?PV(e,t,a):BV(e,s,t,a)},fR=32,FV=100,gR=8,pR=16,HI=ln,HV=eu(HI,Ua),zV=(e,t,o)=>HI(o)&&o!==t&&e.isEditable(o.parentElement),VV=(e,t,o)=>_o(t)||t===o||e.dom.isChildOf(t,o)?!1:e.dom.isEditable(t),$V=(e,t,o,s)=>{const a=e.dom,c=t.cloneNode(!0);a.setStyles(c,{width:o,height:s}),a.setAttrib(c,"data-mce-selected",null);const d=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(d,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:s}),a.setStyles(c,{margin:0,boxSizing:"border-box"}),d.appendChild(c),d},UV=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},hR=(e,t)=>o=>()=>{const s=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:s+t,behavior:"smooth"})},zI=hR("left",-fR),VI=hR("left",fR),$I=hR("top",-fR),UI=hR("top",fR),ZV=(e,t,o,s,a,c,d,g,v,S,R,D)=>{let P=0,j=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+o>a&&(P=t.pageX+o-a),t.pageY+s>c&&(j=t.pageY+s-c),e.style.width=o-P+"px",e.style.height=s-j+"px";const K=v.clientHeight,Z=v.clientWidth,Y=d+v.getBoundingClientRect().top,ae=g+v.getBoundingClientRect().left;R.on(le=>{le.intervalId.clear(),le.dragging&&D&&(d+gR>=K?le.intervalId.set(UI(S)):d-gR<=0?le.intervalId.set($I(S)):g+gR>=Z?le.intervalId.set(VI(S)):g-gR<=0?le.intervalId.set(zI(S)):Y+pR>=window.innerHeight?le.intervalId.set(UI(window)):Y-pR<=0?le.intervalId.set($I(window)):ae+pR>=window.innerWidth?le.intervalId.set(VI(window)):ae-pR<=0&&le.intervalId.set(zI(window)))})},ZI=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},WV=(e,t)=>{const o=e.getParent(t.parentNode,e.isBlock);ZI(t),o&&o!==e.getRoot()&&e.isEmpty(o)&&Nd(X.fromDom(o))},jV=e=>e.button===0,qV=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),GV=(e,t)=>o=>{if(jV(o)){const s=Ao(t.dom.getParents(o.target),HV).getOr(null);if(Ne(s)&&zV(t.dom,t.getBody(),s)){const a=t.dom.getPos(s),c=t.getBody(),d=t.getDoc().documentElement;e.set({element:s,dataTransfer:w8(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(t.inline?c.scrollWidth:d.offsetWidth)-2,maxY:(t.inline?c.scrollHeight:d.offsetHeight)-2,relX:o.pageX-a.x,relY:o.pageY-a.y,width:s.offsetWidth,height:s.offsetHeight,ghost:$V(t,s,s.offsetWidth,s.offsetHeight),intervalId:Lh(FV)})}}},KV=(e,t,o)=>{e._selectionOverrides.hideFakeCaret(),II(e.getBody(),t,o).fold(()=>e.selection.placeCaretAt(t,o),s=>{const a=e._selectionOverrides.showCaret(1,s.node,s.position===xw.Before,!1);a?e.selection.setRng(a):e.selection.placeCaretAt(t,o)})},B4=(e,t,o,s,a)=>{t==="dragstart"&&fI(s,e.dom.getOuterHTML(o));const c=LV(t,o,s,a);return e.dispatch(t,c)},YV=(e,t)=>{const o=Gg((a,c)=>KV(t,a,c),0);t.on("remove",o.cancel);const s=e;return a=>e.on(c=>{const d=Math.max(Math.abs(a.screenX-c.screenX),Math.abs(a.screenY-c.screenY));if(!c.dragging&&d>10){const g=B4(t,"dragstart",c.element,c.dataTransfer,a);if(Ne(g.dataTransfer)&&(c.dataTransfer=g.dataTransfer),g.isDefaultPrevented())return;c.dragging=!0,t.focus()}if(c.dragging){const g=a.currentTarget===t.getDoc().documentElement,v=qV(c,MV(t,a));UV(c.ghost,t.getBody()),ZV(c.ghost,v,c.width,c.height,c.maxX,c.maxY,a.clientY,a.clientX,t.getContentAreaContainer(),t.getWin(),s,g),o.throttle(a.clientX,a.clientY)}})},XV=e=>{const t=e.getSel();if(Ne(t)){const s=t.getRangeAt(0).startContainer;return Le(s)?s.parentNode:s}else return null},JV=(e,t)=>o=>{e.on(s=>{var a;if(s.intervalId.clear(),s.dragging){if(VV(t,XV(t.selection),s.element)){const c=(a=t.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&a!==void 0?a:t.getBody();B4(t,"drop",c,s.dataTransfer,o).isDefaultPrevented()||t.undoManager.transact(()=>{WV(t.dom,s.element),r9(s.dataTransfer).each(g=>t.insertContent(g)),t._selectionOverrides.hideFakeCaret()})}B4(t,"dragend",t.getBody(),s.dataTransfer,o)}}),jI(e)},WI=(e,t,o)=>{e.on(s=>{s.intervalId.clear(),s.dragging&&o.fold(()=>B4(t,"dragend",s.element,s.dataTransfer),a=>B4(t,"dragend",s.element,s.dataTransfer,a))}),jI(e)},QV=(e,t)=>o=>WI(e,t,I.some(o)),jI=e=>{e.on(t=>{t.intervalId.clear(),ZI(t.ghost)}),e.clear()},e$=e=>{const t=Cl(),o=un.DOM,s=document,a=GV(t,e),c=YV(t,e),d=JV(t,e),g=QV(t,e);e.on("mousedown",a),e.on("mousemove",c),e.on("mouseup",d),o.bind(s,"mousemove",c),o.bind(s,"mouseup",g),e.on("remove",()=>{o.unbind(s,"mousemove",c),o.unbind(s,"mouseup",g)}),e.on("keydown",v=>{v.keyCode===rt.ESC&&WI(t,e,I.none())})},t$=e=>{const t=a=>{if(!a.isDefaultPrevented()){const c=a.dataTransfer;c&&(Io(c.types,"Files")||c.files.length>0)&&(a.preventDefault(),a.type==="drop"&&Ox(e,"Dropped file type is not supported"))}},o=a=>{Bf(e,a.target)&&t(a)},s=()=>{const a=un.DOM,c=e.dom,d=document,g=e.inline?e.getBody():e.getDoc(),v=["drop","dragover"];Ie(v,S=>{a.bind(d,S,o),c.bind(g,S,t)}),e.on("remove",()=>{Ie(v,S=>{a.unbind(d,S,o),c.unbind(g,S,t)})})};e.on("init",()=>{sl.setEditorTimeout(e,s,0)})},o$=e=>{e$(e),p0(e)&&t$(e)},n$=e=>{const t=Gg(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const s=Bx(e,o,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},s$=e=>{e.on("init",()=>{e.on("focusin",t=>{const o=t.target;if(ut(o)){const s=$f(e.getBody(),o),a=ln(s)?s:o;e.selection.getNode()!==a&&Mx(e,a).each(c=>e.selection.setRng(c))}})})},P4=ln,qI=(e,t)=>$f(e.getBody(),t),r$=e=>{const t=e.selection,o=e.dom,s=e.getBody(),a=Vv(e,s,o.isBlock,()=>Pf(e)),c="sel-"+o.uniqueId(),d="data-mce-selected";let g;const v=st=>Ne(st)&&o.hasClass(st,"mce-offscreen-selection"),S=st=>st!==s&&(P4(st)||ut(st))&&o.isChildOf(st,s)&&o.isEditable(st.parentNode),R=st=>{st&&t.setRng(st)},D=(st,ke,ye,Be=!0)=>e.dispatch("ShowCaret",{target:ke,direction:st,before:ye}).isDefaultPrevented()?null:(Be&&t.scrollIntoView(ke,st===-1),a.show(ye,ke)),P=st=>{st.hasAttribute("data-mce-caret")&&(bh(st),t.scrollIntoView(st))},j=()=>{e.on("click",ke=>{o.isEditable(ke.target)||(ke.preventDefault(),e.focus())}),e.on("blur NewBlock",pe),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",ke=>{const ye=ke.target,Be=qI(e,ye);P4(Be)?(ke.preventDefault(),Mx(e,Be).each(ie)):S(ye)&&Mx(e,ye).each(ie)},!0),e.on("mousedown",ke=>{const ye=ke.target;if(ye!==s&&ye.nodeName!=="HTML"&&!o.isChildOf(ye,s)||!NB(e,ke.clientX,ke.clientY))return;pe(),We();const Be=qI(e,ye);P4(Be)?(ke.preventDefault(),Mx(e,Be).each(ie)):II(s,ke.clientX,ke.clientY).each(ct=>{ke.preventDefault();const Ct=D(1,ct.node,ct.position===xw.Before,!1);R(Ct),Va(Be)?Be.focus():e.getBody().focus()})}),e.on("keypress",ke=>{rt.modifierPressed(ke)||P4(t.getNode())&&ke.preventDefault()}),e.on("GetSelectionRange",ke=>{let ye=ke.range;if(g){if(!g.parentNode){g=null;return}ye=ye.cloneRange(),ye.selectNode(g),ke.range=ye}}),e.on("SetSelectionRange",ke=>{ke.range=Y(ke.range);const ye=ie(ke.range,ke.forward);ye&&(ke.range=ye)});const st=ke=>dt(ke)&&ke.id==="mcepastebin";e.on("AfterSetSelectionRange",ke=>{const ye=ke.range,Be=ye.startContainer.parentElement;!Z(ye)&&!st(Be)&&We(),v(Be)||pe()}),o$(e),n$(e),s$(e)},K=st=>Or(st)||Oi(st)||qa(st),Z=st=>K(st.startContainer)||K(st.endContainer),Y=st=>{const ke=e.schema.getVoidElements(),ye=o.createRng(),Be=st.startContainer,ct=st.startOffset,Ct=st.endContainer,co=st.endOffset;return jt(ke,Be.nodeName.toLowerCase())?ct===0?ye.setStartBefore(Be):ye.setStartAfter(Be):ye.setStart(Be,ct),jt(ke,Ct.nodeName.toLowerCase())?co===0?ye.setEndBefore(Ct):ye.setEndAfter(Ct):ye.setEnd(Ct,co),ye},ae=(st,ke)=>{const ye=X.fromDom(e.getBody()),Be=e.getDoc(),ct=oa(ye,"#"+c).getOrThunk(()=>{const fo=X.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Be);return An(fo,"id",c),Pn(ye,fo),fo}),Ct=o.createRng();li(ct),Zr(ct,[X.fromText(uo,Be),X.fromDom(ke),X.fromText(uo,Be)]),Ct.setStart(ct.dom.firstChild,1),Ct.setEnd(ct.dom.lastChild,0),ql(ct,{top:o.getPos(st,e.getBody()).y+"px"}),v_(ct);const co=t.getSel();return co&&(co.removeAllRanges(),co.addRange(Ct)),Ct},le=st=>{const ke=st.cloneNode(!0),ye=e.dispatch("ObjectSelected",{target:st,targetClone:ke});if(ye.isDefaultPrevented())return null;const Be=ae(st,ye.targetClone),ct=X.fromDom(st);return Ie(hr(X.fromDom(e.getBody()),`*[${d}]`),Ct=>{Lo(ct,Ct)||ds(Ct,d)}),o.getAttrib(st,d)||st.setAttribute(d,"1"),g=st,We(),Be},ie=(st,ke)=>{if(!st)return null;if(st.collapsed){if(!Z(st)){const Ct=ke?1:-1,co=r1(Ct,s,st),fo=co.getNode(!ke);if(Ne(fo)){if(x0(fo))return D(Ct,fo,ke?!co.isAtEnd():!1,!1);if(di(fo)&&ln(fo.nextSibling)){const Cn=o.createRng();return Cn.setStart(fo,0),Cn.setEnd(fo,0),Cn}}const on=co.getNode(ke);if(Ne(on)){if(x0(on))return D(Ct,on,ke?!1:!co.isAtEnd(),!1);if(di(on)&&ln(on.previousSibling)){const Cn=o.createRng();return Cn.setStart(on,1),Cn.setEnd(on,1),Cn}}}return null}let ye=st.startContainer,Be=st.startOffset;const ct=st.endOffset;if(Le(ye)&&Be===0&&P4(ye.parentNode)&&(ye=ye.parentNode,Be=o.nodeIndex(ye),ye=ye.parentNode),!dt(ye))return null;if(ct===Be+1&&ye===st.endContainer){const Ct=ye.childNodes[Be];if(S(Ct))return le(Ct)}return null},pe=()=>{g&&g.removeAttribute(d),oa(X.fromDom(e.getBody()),"#"+c).each(en),g=null},Pe=()=>{a.destroy(),g=null},We=()=>{a.hide()};return _u(e)||j(),{showCaret:D,showBlockCaretContainer:P,hideFakeCaret:We,destroy:Pe}},a$=(e,t)=>{let o=t;for(let s=e.previousSibling;Le(s);s=s.previousSibling)o+=s.data.length;return o},GI=(e,t,o,s,a)=>{if(Le(o)&&(s<0||s>o.data.length))return[];const c=a&&Le(o)?[a$(o,s)]:[s];let d=o;for(;d!==t&&d.parentNode;)c.push(e.nodeIndex(d,a)),d=d.parentNode;return d===t?c.reverse():[]},A8=(e,t,o,s,a,c,d=!1)=>{const g=GI(e,t,o,s,d),v=GI(e,t,a,c,d);return{start:g,end:v}},KI=(e,t)=>{const o=t.slice(),s=o.pop();return E(s)?Ir(o,(c,d)=>c.bind(g=>I.from(g.childNodes[d])),I.some(e)).bind(c=>Le(c)&&(s<0||s>c.data.length)?I.none():I.some({node:c,offset:s})):I.none()},YI=(e,t)=>KI(e,t.start).bind(({node:o,offset:s})=>KI(e,t.end).map(({node:a,offset:c})=>{const d=document.createRange();return d.setStart(o,s),d.setEnd(a,c),d})),i$=(e,t,o,s=!1)=>A8(e,t,o.startContainer,o.startOffset,o.endContainer,o.endOffset,s),vw=(e,t,o)=>{if(t&&e.isEmpty(t)&&!o(t)){const s=t.parentNode;e.remove(t,Le(t.firstChild)&&vl(t.firstChild.data)),vw(e,s,o)}},bR=(e,t,o,s=!0)=>{const a=t.startContainer.parentNode,c=t.endContainer.parentNode;t.deleteContents(),s&&!o(t.startContainer)&&(Le(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),Le(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),vw(e,a,o),a!==c&&vw(e,c,o))},N8=(e,t)=>I.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),XI=(e,t,o)=>{const s=e.dynamicPatternsLookup({text:o,block:t});return{...e,blockPatterns:He(s).concat(e.blockPatterns),inlinePatterns:Ze(s).concat(e.inlinePatterns)}},JI=(e,t,o,s)=>{const a=e.createRng();return a.setStart(t,0),a.setEnd(o,s),a.toString()},l$=e=>/^\s[^\s]/.test(e),QI=(e,t,o)=>{sF(t,0,t).each(a=>{const c=a.container;rP(c,o.start.length,t).each(v=>{const S=e.createRng();S.setStart(c,0),S.setEnd(v.container,v.offset),bR(e,S,R=>R===t)});const d=X.fromDom(c),g=qu(d);l$(g)&&Eb(d,g.slice(1))})},c$=(e,t)=>{const o=e.dom,s=t.pattern,a=YI(o.getRoot(),t.range).getOrDie("Unable to resolve path range"),c=(d,g)=>{const v=g.get(d);return ce(v)&&Ln(v).exists(S=>jt(S,"block"))};return N8(e,a).each(d=>{s.type==="block-format"?c(s.format,e.formatter)&&e.undoManager.transact(()=>{QI(e.dom,d,s),e.formatter.apply(s.format)}):s.type==="block-command"&&e.undoManager.transact(()=>{QI(e.dom,d,s),e.execCommand(s.cmd,!1,s.value)})}),!0},d$=e=>Dn(e,(t,o)=>o.start.length-t.start.length),u$=(e,t)=>{const o=d$(e),s=t.replace(uo," ");return Ao(o,a=>t.indexOf(a.start)===0||s.indexOf(a.start)===0)},m$=(e,t,o,s)=>{var a;const c=e.dom,d=$s(e);if(!c.is(t,d))return[];const g=(a=t.textContent)!==null&&a!==void 0?a:"";return u$(o.blockPatterns,g).map(v=>qe.trim(g).length===v.start.length?[]:[{pattern:v,range:A8(c,c.getRoot(),t,0,t,0,s)}]).getOr([])},f$=(e,t)=>{if(t.length===0)return;const o=e.selection.getBookmark();Ie(t,s=>c$(e,s)),e.selection.moveToBookmark(o)},eL=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),xR=(e,t)=>{const o=e.createRng();return o.setStartAfter(t.start),o.setEndBefore(t.end),o},tL=(e,t,o)=>{const s=YI(e.getRoot(),o).getOrDie("Unable to resolve path range"),a=s.startContainer,c=s.endContainer,d=s.endOffset===0?c:c.splitText(s.endOffset),g=s.startOffset===0?a:a.splitText(s.startOffset),v=g.parentNode,S=d.parentNode;return{prefix:t,end:S.insertBefore(eL(e,t+"-end"),d),start:v.insertBefore(eL(e,t+"-start"),g)}},oL=(e,t,o)=>{vw(e,e.get(t.prefix+"-end"),o),vw(e,e.get(t.prefix+"-start"),o)},R8=e=>e.start.length===0,g$=e=>(t,o)=>{const a=t.data.substring(0,o),c=a.lastIndexOf(e.charAt(e.length-1)),d=a.lastIndexOf(e);return d!==-1?d+e.length:c!==-1?c+1:-1},nL=(e,t,o,s)=>{const a=t.start;return e8(e,s.container,s.offset,g$(a),o).bind(d=>{var g,v;const S=(v=(g=o.textContent)===null||g===void 0?void 0:g.indexOf(a))!==null&&v!==void 0?v:-1;if(S!==-1&&d.offset>=S+a.length){const D=e.createRng();return D.setStart(d.container,d.offset-a.length),D.setEnd(d.container,d.offset),I.some(D)}else{const D=d.offset-a.length;return Q7(d.container,D,o).map(P=>{const j=e.createRng();return j.setStart(P.container,P.offset),j.setEnd(d.container,d.offset),j}).filter(P=>P.toString()===a).orThunk(()=>nL(e,t,o,Bm(d.container,0)))}})},p$=(e,t,o,s,a,c=!1)=>{if(t.start.length===0&&!c){const d=e.createRng();return d.setStart(o,s),d.setEnd(o,s),I.some(d)}return J7(o,s,a).bind(d=>nL(e,t,a,d).bind(v=>{var S;if(c){if(v.endContainer===d.container&&v.endOffset===d.offset)return I.none();if(d.offset===0&&((S=v.endContainer.textContent)===null||S===void 0?void 0:S.length)===v.endOffset)return I.none()}return I.some(v)}))},h$=(e,t,o,s)=>{const a=e.dom,c=a.getRoot(),d=o.pattern,g=o.position.container,v=o.position.offset;return Q7(g,v-o.pattern.end.length,t).bind(S=>{const R=A8(a,c,S.container,S.offset,g,v,s);if(R8(d))return I.some({matches:[{pattern:d,startRng:R,endRng:R}],position:S});{const D=vR(e,o.remainingPatterns,S.container,S.offset,t,s),P=D.getOr({matches:[],position:S}),j=P.position;return p$(a,d,j.container,j.offset,t,D.isNone()).map(Z=>{const Y=i$(a,c,Z,s);return{matches:P.matches.concat([{pattern:d,startRng:Y,endRng:R}]),position:Bm(Z.startContainer,Z.startOffset)}})}})},vR=(e,t,o,s,a,c)=>{const d=e.dom;return J7(o,s,d.getRoot()).bind(g=>{const v=JI(d,a,o,s);for(let S=0;S<t.length;S++){const R=t[S];if(!Fl(v,R.end))continue;const D=t.slice();D.splice(S,1);const P=h$(e,a,{pattern:R,remainingPatterns:D,position:g},c);if(P.isNone()&&s>0)return vR(e,t,o,s-1,a,c);if(P.isSome())return P}return I.none()})},sL=(e,t,o)=>{e.selection.setRng(o),t.type==="inline-format"?Ie(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},b$=(e,t,o,s)=>{const a=xR(e.dom,o);bR(e.dom,a,s),sL(e,t,a)},x$=(e,t,o,s,a)=>{const c=e.dom,d=xR(c,s),g=xR(c,o);bR(c,g,a),bR(c,d,a);const v={prefix:o.prefix,start:o.end,end:s.start},S=xR(c,v);sL(e,t,S)},v$=(e,t)=>{const o=Wc("mce_textpattern"),s=xn(t,(a,c)=>{const d=tL(e,o+`_end${a.length}`,c.endRng);return a.concat([{...c,endMarker:d}])},[]);return xn(s,(a,c)=>{const d=s.length-a.length-1,g=R8(c.pattern)?c.endMarker:tL(e,o+`_start${d}`,c.startRng);return a.concat([{...c,startMarker:g}])},[])},y$=e=>Dn(e,(t,o)=>o.end.length-t.end.length),w$=(e,t)=>{const o=ei(e,s=>bn(t,a=>s.pattern.start===a.pattern.start&&s.pattern.end===a.pattern.end));return e.length===t.length?o?e:t:e.length>t.length?e:t},rL=(e,t,o,s,a,c)=>{const d=vR(e,a.inlinePatterns,o,s,t,c).fold(()=>[],v=>v.matches),g=vR(e,y$(a.inlinePatterns),o,s,t,c).fold(()=>[],v=>v.matches);return w$(d,g)},aL=(e,t)=>{if(t.length===0)return;const o=e.dom,s=e.selection.getBookmark(),a=v$(o,t);Ie(a,c=>{const d=o.getParent(c.startMarker.start,o.isBlock),g=v=>v===d;R8(c.pattern)?b$(e,c.pattern,c.endMarker,g):x$(e,c.pattern,c.startMarker,c.endMarker,g),oL(o,c.endMarker,g),oL(o,c.startMarker,g)}),e.selection.moveToBookmark(s)},C$=(e,t)=>{const o=e.selection.getRng();return N8(e,o).map(s=>{var a;const c=Math.max(0,o.startOffset),d=XI(t,s,(a=s.textContent)!==null&&a!==void 0?a:""),g=rL(e,s,o.startContainer,c,d,!0),v=m$(e,s,d,!0);return v.length>0||g.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{gv(e),aL(e,g),f$(e,v);const S=e.selection.getRng(),R=J7(S.startContainer,S.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),R.each(D=>{const P=D.container;P.data.charAt(D.offset-1)===Za&&(P.deleteData(D.offset-1,1),vw(e.dom,P.parentNode,j=>j===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},_$=(e,t)=>{const o=e.selection.getRng();N8(e,o).map(s=>{const a=Math.max(0,o.startOffset-1),c=JI(e.dom,s,o.startContainer,a),d=XI(t,s,c),g=rL(e,s,o.startContainer,a,d,!1);g.length>0&&e.undoManager.transact(()=>{aL(e,g)})})},iL=(e,t,o)=>{for(let s=0;s<e.length;s++)if(o(e[s],t))return!0;return!1},k$=(e,t)=>iL(e,t,(o,s)=>o===s.keyCode&&!rt.modifierPressed(s)),S$=(e,t)=>iL(e,t,(o,s)=>o.charCodeAt(0)===s.charCode),E$=e=>{const t=[",",".",";",":","!","?"],o=[32],s=()=>et(l3(e),Lv(e)),a=()=>oD(e);e.on("keydown",d=>{if(d.keyCode===13&&!rt.modifierPressed(d)&&e.selection.isCollapsed()){const g=s();(g.inlinePatterns.length>0||g.blockPatterns.length>0||a())&&C$(e,g)&&d.preventDefault()}},!0);const c=()=>{if(e.selection.isCollapsed()){const d=s();(d.inlinePatterns.length>0||a())&&_$(e,d)}};e.on("keyup",d=>{k$(o,d)&&c()}),e.on("keypress",d=>{S$(t,d)&&sl.setEditorTimeout(e,c)})},T$=e=>{E$(e)},O$=e=>{const t=qe.each,o=rt.BACKSPACE,s=rt.DELETE,a=e.dom,c=e.selection,d=e.parser,g=Do.browser,v=g.isFirefox(),S=g.isChromium()||g.isSafari(),R=Do.deviceType.isiPhone()||Do.deviceType.isiPad(),D=Do.os.isMacOS()||Do.os.isiOS(),P=(ft,qt)=>{try{e.getDoc().execCommand(ft,!1,String(qt))}catch{}},j=ft=>ft.isDefaultPrevented(),K=()=>{const ft=Ge=>{const Gt=a.create("body"),Eo=Ge.cloneContents();return Gt.appendChild(Eo),c.serializer.serialize(Gt,{format:"html"})},qt=Ge=>{const Gt=ft(Ge),Eo=a.createRng();Eo.selectNode(e.getBody());const pn=ft(Eo);return Gt===pn};e.on("keydown",Ge=>{const Gt=Ge.keyCode;if(!j(Ge)&&(Gt===s||Gt===o)&&e.selection.isEditable()){const Eo=e.selection.isCollapsed(),pn=e.getBody();if(Eo&&!Jo(X.fromDom(pn))||!Eo&&!qt(e.selection.getRng()))return;Ge.preventDefault(),e.setContent(""),pn.firstChild&&a.isBlock(pn.firstChild)?e.selection.setCursorLocation(pn.firstChild,0):e.selection.setCursorLocation(pn,0),e.nodeChanged()}})},Z=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},Y=()=>{e.inline||a.bind(e.getDoc(),"mousedown mouseup",ft=>{let qt;if(ft.target===e.getDoc().documentElement)if(qt=c.getRng(),e.getBody().focus(),ft.type==="mousedown"){if(Or(qt.startContainer))return;c.placeCaretAt(ft.clientX,ft.clientY)}else c.setRng(qt)})},ae=()=>{e.on("keydown",ft=>{if(!j(ft)&&ft.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(c.isCollapsed()&&c.getRng().startOffset===0){const qt=c.getNode(),Ge=qt.previousSibling;if(qt.nodeName==="HR"){a.remove(qt),ft.preventDefault();return}Ge&&Ge.nodeName&&Ge.nodeName.toLowerCase()==="hr"&&(a.remove(Ge),ft.preventDefault())}}})},le=()=>{Range.prototype.getClientRects||e.on("mousedown",ft=>{if(!j(ft)&&ft.target.nodeName==="HTML"){const qt=e.getBody();qt.blur(),sl.setEditorTimeout(e,()=>{qt.focus()})}})},ie=()=>{const ft=Pv(e);e.on("click",qt=>{const Ge=qt.target;/^(IMG|HR)$/.test(Ge.nodeName)&&a.isEditable(Ge)&&(qt.preventDefault(),e.selection.select(Ge),e.nodeChanged()),Ge.nodeName==="A"&&a.hasClass(Ge,ft)&&Ge.childNodes.length===0&&a.isEditable(Ge.parentNode)&&(qt.preventDefault(),c.select(Ge))})},pe=()=>{const ft=()=>{const Ge=a.getAttribs(c.getStart().cloneNode(!1));return()=>{const Gt=c.getStart();Gt!==e.getBody()&&(a.setAttrib(Gt,"style",null),t(Ge,Eo=>{Gt.setAttributeNode(Eo.cloneNode(!0))}))}},qt=()=>!c.isCollapsed()&&a.getParent(c.getStart(),a.isBlock)!==a.getParent(c.getEnd(),a.isBlock);e.on("keypress",Ge=>{let Gt;return!j(Ge)&&(Ge.keyCode===8||Ge.keyCode===46)&&qt()?(Gt=ft(),e.getDoc().execCommand("delete",!1),Gt(),Ge.preventDefault(),!1):!0}),a.bind(e.getDoc(),"cut",Ge=>{if(!j(Ge)&&qt()){const Gt=ft();sl.setEditorTimeout(e,()=>{Gt()})}})},Pe=()=>{e.on("keydown",ft=>{if(!j(ft)&&ft.keyCode===o&&c.isCollapsed()&&c.getRng().startOffset===0){const qt=c.getNode().previousSibling;if(qt&&qt.nodeName&&qt.nodeName.toLowerCase()==="table")return ft.preventDefault(),!1}return!0})},We=()=>{e.on("keydown",ft=>{if(j(ft)||ft.keyCode!==rt.BACKSPACE)return;let qt=c.getRng();const Ge=qt.startContainer,Gt=qt.startOffset,Eo=a.getRoot();let pn=Ge;if(!(!qt.collapsed||Gt!==0)){for(;pn.parentNode&&pn.parentNode.firstChild===pn&&pn.parentNode!==Eo;)pn=pn.parentNode;pn.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,pn),qt=a.createRng(),qt.setStart(Ge,0),qt.setEnd(Ge,0),c.setRng(qt))}})},st=()=>{const ft=()=>{P("StyleWithCSS",!1),P("enableInlineTableEditing",!1),Yw(e)||P("enableObjectResizing",!1)};e3(e)||e.on("BeforeExecCommand mousedown",ft)},ke=()=>{const ft=()=>{t(a.select("a:not([data-mce-block])"),qt=>{var Ge;let Gt=qt.parentNode;const Eo=a.getRoot();if((Gt==null?void 0:Gt.lastChild)===qt){for(;Gt&&!a.isBlock(Gt);){if(((Ge=Gt.parentNode)===null||Ge===void 0?void 0:Ge.lastChild)!==Gt||Gt===Eo)return;Gt=Gt.parentNode}a.add(Gt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",qt=>{(qt.type==="setcontent"||qt.command==="mceInsertLink")&&ft()})},ye=()=>{e.on("init",()=>{P("DefaultParagraphSeparator",$s(e))})},Be=ft=>{const qt=ft.getBody(),Ge=ft.selection.getRng();return Ge.startContainer===Ge.endContainer&&Ge.startContainer===qt&&Ge.startOffset===0&&Ge.endOffset===qt.childNodes.length},ct=()=>{e.on("keyup focusin mouseup",ft=>{!rt.modifierPressed(ft)&&!Be(e)&&c.normalize()},!0)},Ct=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},co=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},fo=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",ft=>{let qt;ft.target.nodeName==="HTML"&&(qt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(qt),e.selection.normalize(),e.nodeChanged())}))},on=()=>{D&&e.on("keydown",ft=>{rt.metaKeyPressed(ft)&&!ft.shiftKey&&(ft.keyCode===37||ft.keyCode===39)&&(ft.preventDefault(),e.selection.getSel().modify("move",ft.keyCode===37?"backward":"forward","lineboundary"))})},Cn=()=>{e.on("click",ft=>{let qt=ft.target;do if(qt.tagName==="A"){ft.preventDefault();return}while(qt=qt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ps=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",ft=>{ft.preventDefault()})})},fa=()=>{d.addNodeFilter("br",ft=>{let qt=ft.length;for(;qt--;)ft[qt].attr("class")==="Apple-interchange-newline"&&ft[qt].remove()})},nn=oo,Qe=()=>{if(!v||e.removed)return!1;const ft=e.selection.getSel();return!ft||!ft.rangeCount||ft.rangeCount===0},pt=()=>{S&&(Y(),ie(),ps(),Z(),R&&(co(),fo(),Cn())),v&&(le(),st(),Ct(),on())},Bo=()=>{e.on("drop",ft=>{var qt;const Ge=(qt=ft.dataTransfer)===null||qt===void 0?void 0:qt.getData("text/html");bt(Ge)&&/^<img[^>]*>$/.test(Ge)&&e.dispatch("dragend",new window.DragEvent("dragend",ft))})},vo=()=>{We(),K(),Do.windowsPhone||ct(),S&&(Y(),ie(),ye(),ps(),Pe(),fa(),R?(co(),fo(),Cn()):Z()),v&&(ae(),le(),pe(),st(),ke(),Ct(),on(),Pe(),Bo())};return _u(e)?pt():vo(),{refreshContentEditable:nn,isHidden:Qe}},D8=un.DOM,A$=(e,t)=>{const o=X.fromDom(e.getBody()),s=Bn(Ac(o)),a=X.fromTag("style");An(a,"type","text/css"),Pn(a,X.fromText(t)),Pn(s,a),e.on("remove",()=>{en(a)})},N$=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,M8=e=>wi(e,t=>Bs(t)===!1),lL=e=>{const t=e.options.get,o=e.editorUpload.blobCache;return M8({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:N$(e),sandbox_iframes:t("sandbox_iframes"),sanitize:t("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},cL=e=>{const t=e.options.get;return M8({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},R$=e=>{const t=e.options.get;return{...lL(e),...cL(e),...M8({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},D$=e=>{const t=Wp(lL(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(o,s)=>{const a=e.dom,c="data-mce-"+s;let d=o.length;for(;d--;){const g=o[d];let v=g.attr(s);if(v&&!g.attr(c)){if(v.indexOf("data:")===0||v.indexOf("blob:")===0)continue;s==="style"?(v=a.serializeStyle(a.parseStyle(v),g.name),v.length||(v=null),g.attr(c,v),g.attr(s,v)):s==="tabindex"?(g.attr(c,v),g.attr(s,null)):g.attr(c,e.convertURL(v,s,g.name))}}}),t.addNodeFilter("script",o=>{let s=o.length;for(;s--;){const a=o[s],c=a.attr("type")||"no/type";c.indexOf("mce-")!==0&&a.attr("type","mce-"+c)}}),u3(e)&&t.addNodeFilter("#cdata",o=>{var s;let a=o.length;for(;a--;){const c=o[a];c.type=8,c.name="#comment",c.value="[CDATA["+e.dom.encode((s=c.value)!==null&&s!==void 0?s:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let s=o.length;const a=e.schema.getNonEmptyElements();for(;s--;){const c=o[s];c.isEmpty(a)&&c.getAll("br").length===0&&c.append(new Da("br",1))}}),t},M$=e=>{const t=XR(e);t&&sl.setEditorTimeout(e,()=>{let o;t===!0?o=e:o=e.editorManager.get(t),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},B$=e=>{const t=e.dom.getRoot();!e.inline&&(!Tf(e)||e.selection.getStart(!0)===t)&&Na(t).each(o=>{const s=o.getNode(),a=xl(s)?Na(s).getOr(o):o;e.selection.setRng(a.toRange())})},P$=e=>{e.bindPendingEventDelegates(),e.initialized=!0,rE(e),e.focus(!0),B$(e),e.nodeChanged({initial:!0});const t=dp(e);Pt(t)&&t.call(e,e),M$(e)},B8=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,I$=(e,t,o)=>{const{pass:s,fail:a}=ul(t,g=>tinymce.Resource.has(V2(g))),d=[...s.map(g=>{const v=tinymce.Resource.get(V2(g));return bt(v)?Promise.resolve(B8(e).loadRawCss(g,v)):Promise.resolve()}),B8(e).loadAll(a)];return e.inline?d:d.concat([e.ui.styleSheetLoader.loadAll(o)])},dL=e=>{const t=B8(e),o=X4(e),s=e.contentCSS,a=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(o)},c=()=>{e.removed?a():e.on("remove",a)};if(e.contentStyles.length>0){let v="";qe.each(e.contentStyles,S=>{v+=S+`\r
`}),e.dom.addStyle(v)}const d=Promise.all(I$(e,s,o)).then(c).catch(c),g=$R(e);return g&&A$(e,g),d},L$=e=>{const t=e.getDoc(),o=e.getBody();ey(e),JR(e)||(t.body.spellcheck=!1,D8.setAttrib(o,"spellcheck","false")),e.quirks=O$(e),sE(e);const s=UR(e);s!==void 0&&(o.dir=s);const a=h0(e);a&&e.on("BeforeSetContent",c=>{qe.each(a,d=>{c.content=c.content.replace(d,g=>"<!--mce:protected "+escape(g)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",c=>{e.composing=c.type==="compositionstart"})},F$=e=>{_u(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},P8=e=>{e.removed!==!0&&(F$(e),P$(e))},H$=e=>{let t=!1;const o=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(o),t=!0,e.setProgressState(!1)}},uL=e=>{const t=e.getElement();let o=e.getDoc();e.inline&&(D8.addClass(t,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const s=e.getBody();s.disabled=!0,e.readonly=e3(e),e._editableRoot=So(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&D8.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=VB(e),e.schema=oc(cL(e)),e.dom=un(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:zR(e),referrerPolicy:Gw(e),onSetAttrib:d=>{e.dispatch("SetAttrib",d)},force_hex_color:aD(e)}),e.parser=D$(e),e.serializer=kx(R$(e),e),e.selection=kS(e.dom,e.getWin(),e.serializer,e),e.annotator=WC(e),e.formatter=Dx(e),e.undoManager=q2(e),e._nodeChangeDispatcher=new Zz(e),e._selectionOverrides=r$(e),Te(e),dV(e),Zt(e),_u(e)||(bV(e),T$(e));const a=Uz(e);W(e,a),lo(e),WB(e),iV(e);const c=MA(e);L$(e),c.fold(()=>{const d=H$(e);dL(e).then(()=>{P8(e),d()})},d=>{e.setProgressState(!0),dL(e).then(()=>{d().then(g=>{e.setProgressState(!1),P8(e),yS(e)},g=>{e.notificationManager.open({type:"error",text:String(g)}),P8(e),yS(e)})})})},z$=kn,V$=(e,t,o)=>Uu(e,t,z$,o),I8=un.DOM,$$=(e,t,o,s)=>{const a=X.fromTag("iframe");return s.each(c=>An(a,"tabindex",c)),Yn(a,o),Yn(a,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Ks(a,"tox-edit-area__iframe"),a},U$=e=>{let t=Vs(e)+"<html><head>";Yc(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=ap(e),s=ip(e),a=e.translate(YR(e));return _f(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+_f(e)+'" />'),t+=`</head><body id="${o}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${a}"><br></body></html>`,t},Z$=(e,t)=>{const o=e.translate("Rich Text Area"),s=ri(X.fromDom(e.getElement()),"tabindex").bind(ls),a=$$(e.id,o,Fo(e),s).dom;a.onload=()=>{a.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=a,e.iframeHTML=U$(e),I8.add(t.iframeContainer,a)},W$=e=>{const t=e.iframeElement,o=()=>{e.contentDocument=t.contentDocument,uL(e)};if(tD(e)||Do.browser.isFirefox()){const s=e.getDoc();s.open(),s.write(e.iframeHTML),s.close(),o()}else{const s=V$(X.fromDom(t),"load",()=>{s.unbind(),o()});t.srcdoc=e.iframeHTML}},j$=(e,t)=>{Z$(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=I8.isHidden(t.editorContainer)),e.getElement().style.display="none",I8.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,W$(e)},mL=un.DOM,q$=(e,t,o)=>{const s=q1.get(o),a=q1.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=qe.trim(o),s&&qe.inArray(t,o)===-1){if(e.plugins[o])return;try{const c=s(e,a)||{};e.plugins[o]=c,Pt(c.init)&&(c.init(e,a),t.push(o))}catch(c){zS(e,o,c)}}},G$=e=>e.replace(/^\-/,""),K$=e=>{const t=[];Ie(ru(e),o=>{q$(e,t,G$(o))})},Y$=e=>{const t=qe.trim(q4(e)),o=e.ui.registry.getAll().icons,s={...qp.get("default").icons,...qp.get(t).icons};Qo(s,(a,c)=>{jt(o,c)||e.ui.registry.addIcon(c,a)})},X$=e=>{const t=cp(e);if(bt(t)){const o=Zf.get(t);e.theme=o(e,Zf.urls[t])||{},Pt(e.theme.init)&&e.theme.init(e,Zf.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},J$=e=>{const t=Qw(e),o=Gp.get(t);e.model=o(e,Gp.urls[t])},Q$=e=>{const t=e.theme.renderUI;return t?t():gL(e)},eU=e=>{const t=e.getElement(),s=cp(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},fL=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),tU=e=>{const t=mL.create("div");return mL.insertAfter(t,e),fL(t,t)},gL=e=>{const t=e.getElement();return e.inline?fL(null):tU(t)},oU=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,bt(cp(e))?Q$(e):Pt(cp(e))?eU(e):gL(e)},nU=(e,t)=>{const o={show:I.from(t.show).getOr(oo),hide:I.from(t.hide).getOr(oo),isEnabled:I.from(t.isEnabled).getOr(kn),setEnabled:s=>{e.mode.isReadOnly()||I.from(t.setEnabled).each(a=>a(s))}};e.ui={...e.ui,...o}},sU=async e=>{e.dispatch("ScriptsLoaded"),Y$(e),X$(e),J$(e),K$(e);const t=await oU(e);nU(e,I.from(t.api).getOr({})),e.editorContainer=t.editorContainer,IB(e),e.inline?uL(e):j$(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},qx=un.DOM,pL=e=>e.charAt(0)==="-",rU=(e,t)=>{const o=K4(t),s=VR(t);if(!Ta.hasCode(o)&&o!=="en"){const a=zr(s)?s:`${t.editorManager.baseURL}/langs/${o}.js`;e.add(a).catch(()=>{f5(t,a,o)})}},aU=(e,t)=>{const o=cp(e);if(bt(o)&&!pL(o)&&!jt(Zf.urls,o)){const s=Q4(e),a=s?e.documentBaseURI.toAbsolute(s):`themes/${o}/theme${t}.js`;Zf.load(o,a).catch(()=>{g5(e,a,o)})}},iU=(e,t)=>{const o=Qw(e);if(o!=="plugin"&&!jt(Gp.urls,o)){const s=ZR(e),a=bt(s)?e.documentBaseURI.toAbsolute(s):`models/${o}/model${t}.js`;Gp.load(o,a).catch(()=>{HS(e,a,o)})}},lU=e=>I.from(FR(e)).filter(zr).map(t=>({url:t,name:I.none()})),hL=(e,t,o)=>I.from(t).filter(s=>zr(s)&&!qp.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${o}.js`,name:I.some(s)})),cU=(e,t,o)=>{const s=hL(t,"default",o),a=lU(t).orThunk(()=>hL(t,q4(t),""));Ie(cb([s,a]),c=>{e.add(c.url).catch(()=>{DB(t,c.url,c.name.getOrUndefined())})})},dU=(e,t)=>{const o=(s,a)=>{q1.load(s,a).catch(()=>{FS(e,a,s)})};Qo(KR(e),(s,a)=>{o(a,s),e.options.set("plugins",ru(e).concat(a))}),Ie(ru(e),s=>{s=qe.trim(s),s&&!q1.urls[s]&&!pL(s)&&o(s,`plugins/${s}/plugin${t}.js`)})},uU=e=>{const t=cp(e);return!bt(t)||Ne(Zf.get(t))},mU=e=>{const t=Qw(e);return Ne(Gp.get(t))},fU=(e,t)=>{const o=jr.ScriptLoader,s=()=>{!e.removed&&uU(e)&&mU(e)&&sU(e)};aU(e,t),iU(e,t),rU(o,e),cU(o,e,t),dU(e,t),o.loadQueue().then(s,s)},gU=(e,t)=>Hb.forElement(e,{contentCssCors:ac(t),referrerPolicy:Gw(t)}),pU=e=>{const t=e.id;Ta.setCode(K4(e));const o=()=>{qx.unbind(window,"ready",o),e.render()};if(!Zd.Event.domLoaded){qx.bind(window,"ready",o);return}if(!e.getElement())return;const s=X.fromDom(e.getElement()),a=Ts(s);e.on("remove",()=>{Fm(s.dom.attributes,d=>ds(s,d.name)),Yn(s,a)}),e.ui.styleSheetLoader=gU(s,e),Qh(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const c=e.getElement().form||qx.getParent(t,"form");c&&(e.formElement=c,g0(e)&&!Ed(e.getElement())&&(qx.insertAfter(qx.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=d=>{e.dispatch(d.type,d)},qx.bind(c,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Bv(e)&&!c.submit.nodeType&&!c.submit.length&&!c._mceOldSubmit&&(c._mceOldSubmit=c.submit,c.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),c._mceOldSubmit(c)))),e.windowManager=IS(e),e.notificationManager=BS(e),g3(e)&&e.on("GetContent",d=>{d.save&&(d.content=qx.encode(d.content))}),e1(e)&&e.on("submit",()=>{e.initialized&&e.save()}),jR(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),fU(e,e.suffix)},hU=(e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),fE(e,t))},bU=e=>e._editableRoot,xU=(e,t)=>({sections:Je(e),options:Je(t)}),bL=To().deviceType,xL=bL.isPhone(),vU=bL.isTablet(),I4=e=>{if(_o(e))return[];{const t=ce(e)?e:e.split(/[ ,]/),o=no(t,Hl);return Et(o,zr)}},yU=(e,t)=>{const o=Hm(t,(s,a)=>Io(e,a));return xU(o.t,o.f)},wU=(e,t,o={})=>{const s=e.sections(),a=an(s,t).getOr({});return qe.extend({},o,a)},L8=(e,t)=>jt(e.sections(),t),CU=(e,t)=>L8(e,t)?e.sections()[t]:{},_U=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:an(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),kU=(e,t)=>{var o;const s=(o=t.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?qe.extend({},e.external_plugins,s):s},SU=(e,t)=>[...I4(e),...I4(t)],EU=(e,t,o,s)=>e&&L8(t,"mobile")?s:o,TU=(e,t,o,s)=>{const a=I4(o.forced_plugins),c=I4(s.plugins),d=CU(t,"mobile"),g=d.plugins?I4(d.plugins):c,v=EU(e,t,c,g),S=SU(a,v);return qe.extend(s,{forced_plugins:a,plugins:S})},OU=(e,t)=>e&&L8(t,"mobile"),AU=(e,t,o,s,a)=>{var c;const d=e?{mobile:_U((c=a.mobile)!==null&&c!==void 0?c:{},t)}:{},g=yU(["mobile"],JN(d,a)),v=qe.extend(o,s,g.options(),OU(e,g)?wU(g,"mobile"):{},{external_plugins:kU(s,g.options())});return TU(e,g,s,v)},NU=(e,t)=>AU(xL||vU,xL,t,e,t),RU=(e,t)=>vS(e,t),DU=e=>{const t=(s,a)=>{e.formatter.toggle(s,a),e.nodeChanged()},o=s=>()=>{Ie("left,center,right,justify".split(","),a=>{s!==a&&e.formatter.remove("align"+a)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},MU=e=>{const t=o=>()=>{const s=e.selection,a=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return bn(a,c=>Ne(e.formatter.matchNode(c,o)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},BU=e=>{DU(e),MU(e)},PU=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const o=e.getDoc();let s;try{o.execCommand(t)}catch{s=!0}if(t==="paste"&&!o.queryCommandEnabled(t)&&(s=!0),s||!o.queryCommandSupported(t)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Do.os.isMacOS()||Do.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:a,type:"error"})}}})},IU=(e,t,o,s)=>{const a=X.fromDom(e.getRoot());return T1(a,Ce.fromRangeStart(t),s)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Np(a,Ce.fromRangeEnd(t),s)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},LU=e=>{if(typeof e!="string"){const t=qe.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},FU=(e,t)=>{const o=e.selection,s=e.dom;return/^ | $/.test(t)?IU(s,o.getRng(),t,e.schema):t},yR=(e,t)=>{if(e.selection.isEditable()){const{content:o,details:s}=LU(t);E2(e,{...s,content:FU(e,o),format:"html",set:!1,selection:!0}).each(a=>{const c=mn(e,a.content,s);T2(e,c,a),e.addVisual()})}},HU=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,o,s)=>{yR(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,o,s)=>{yR(e,e.dom.encode(s))},insertHTML:(t,o,s)=>{yR(e,s)},mceInsertContent:(t,o,s)=>{yR(e,s)},mceSetContent:(t,o,s)=>{e.setContent(s)},mceReplaceContent:(t,o,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(s3(e))}})},zU={"font-size":"size","font-family":"face"},VU=Is("font"),$U=(e,t,o)=>{const s=c=>fe(c,e).orThunk(()=>VU(c)?an(zU,e).bind(d=>ri(c,d)):I.none()),a=c=>Lo(X.fromDom(t),c);return ox(X.fromDom(o),c=>s(c),a)},UU=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),ZU=(e,t)=>I.from(un.DOM.getStyle(t,e,!0)),vL=e=>(t,o)=>I.from(o).map(X.fromDom).filter(ba).bind(s=>$U(e,t,s.dom).or(ZU(e,s.dom))).getOr(""),WU=vL("font-size"),jU=Uo(UU,vL("font-family")),qU=e=>Na(e.getBody()).bind(t=>{const o=t.container();return I.from(Le(o)?o.parentNode:o)}),GU=e=>I.from(e.selection.getRng()).bind(t=>{const o=e.getBody();return t.startContainer===o&&t.startOffset===0?I.none():I.from(e.selection.getStart(!0))}),KU=(e,t)=>GU(e).orThunk(it(qU,e)).map(X.fromDom).filter(ba).bind(t),F8=(e,t)=>KU(e,Pa(I.some,t)),yL=(e,t)=>{if(/^[0-9.]+$/.test(t)){const o=parseInt(t,10);if(o>=1&&o<=7){const s=Hv(e),a=f3(e);return a.length>0?a[o-1]||t:s[o-1]||t}else return t}else return t},YU=e=>{const t=e.split(/\s*,\s*/);return no(t,o=>o.indexOf(" ")!==-1&&!(yn(o,'"')||yn(o,"'"))?`'${o}'`:o).join(",")},XU=(e,t)=>{const o=yL(e,t);e.formatter.toggle("fontname",{value:YU(o)}),e.nodeChanged()},JU=e=>F8(e,t=>jU(e.getBody(),t.dom)).getOr(""),QU=(e,t)=>{e.formatter.toggle("fontsize",{value:yL(e,t)}),e.nodeChanged()},eZ=e=>F8(e,t=>WU(e.getBody(),t.dom)).getOr(""),tZ=e=>F8(e,t=>{const o=X.fromDom(e.getBody()),s=ox(t,c=>fe(c,"line-height"),it(Lo,o)),a=()=>{const c=parseFloat(Ur(t,"line-height")),d=parseFloat(Ur(t,"font-size"));return String(c/d)};return s.getOrThunk(a)}).getOr(""),oZ=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},nZ=e=>{const t=(o,s)=>{e.formatter.toggle(o,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{t(o)},"ForeColor,HiliteColor":(o,s,a)=>{t(o,{value:a})},BackColor:(o,s,a)=>{t("hilitecolor",{value:a})},FontName:(o,s,a)=>{XU(e,a)},FontSize:(o,s,a)=>{QU(e,a)},LineHeight:(o,s,a)=>{oZ(e,a)},Lang:(o,s,a)=>{var c;t(o,{value:a.code,customValue:(c=a.customCode)!==null&&c!==void 0?c:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(o,s,a)=>{t(bt(a)?a:"p")},mceToggleFormat:(o,s,a)=>{t(a)}})},sZ=e=>{const t=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>t(o),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>JU(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>eZ(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>tZ(e))},rZ=e=>{nZ(e),sZ(e)},aZ=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},iZ=e=>{e.editorCommands.addCommands({Indent:()=>{B(e)},Outdent:()=>{V(e)}}),e.editorCommands.addCommands({Outdent:()=>w(e)},"state")},lZ=e=>{const t=(o,s,a)=>{const c=bt(a)?{href:a}:a,d=e.dom.getParent(e.selection.getNode(),"a");ue(c)&&bt(c.href)&&(c.href=c.href.replace(/ /g,"%20"),(!d||!c.href)&&e.formatter.remove("link"),c.href&&e.formatter.apply("link",c,d))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})},cZ=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const s=o.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const a=e.selection.getBookmark();e.dom.split(s,o),e.selection.moveToBookmark(a)}}}})},dZ=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(t==="insertunorderedlist"&&o.tagName==="UL"||t==="insertorderedlist"&&o.tagName==="OL")}},"state")},uZ=e=>{cZ(e),dZ(e)},mZ=(e,t,o,s)=>{const a=e.dom,c=g=>a.isBlock(g)&&g.parentElement===o,d=c(t)?t:a.getParent(s,c,o);return I.from(d).map(X.fromDom)},wL=(e,t)=>{const o=e.dom,s=e.selection.getRng(),a=t?e.selection.getStart():e.selection.getEnd(),c=t?s.startContainer:s.endContainer,d=R4(o,c);if(!d||!d.isContentEditable)return;const g=t?As:Vn,v=$s(e);mZ(e,a,d,c).each(S=>{const R=zP(e,c,S.dom,d,!1,v);g(S,X.fromDom(R)),e.selection.setCursorLocation(R,0),e.dispatch("NewBlock",{newBlock:R}),N4(e,"insertParagraph")})},fZ=e=>wL(e,!0),gZ=e=>wL(e,!1),pZ=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{fZ(e)},InsertNewBlockAfter:()=>{gZ(e)}})},hZ=e=>{e.editorCommands.addCommands({insertParagraph:()=>{lR(ZP,e)},mceInsertNewLine:(t,o,s)=>{XP(e,s)},InsertLineBreak:(t,o,s)=>{lR(qP,e)}})},bZ=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,o,s)=>{let a=0;e.dom.getParent(e.selection.getNode(),c=>dt(c)&&a++===s?(e.selection.select(c),!1):!0,e.getBody())},mceSelectNode:(t,o,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),Ua);if(t){const o=e.dom.createRng();o.selectNodeContents(t),e.selection.setRng(o)}}})},xZ=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,o,s)=>{const a=s??e.selection.getNode();if(a!==e.getBody()){const c=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(c)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,o,s)=>{If(e,s===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},vZ=e=>{BU(e),PU(e),aZ(e),bZ(e),HU(e),lZ(e),iZ(e),pZ(e),hZ(e),uZ(e),rZ(e),xZ(e)},yZ=["toggleview"],CL=e=>Io(yZ,e.toLowerCase());class _L{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,o=!1,s,a){const c=this.editor,d=t.toLowerCase(),g=a==null?void 0:a.skip_focus;if(c.removed||(d!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(d)&&!g?c.focus():IE(c)),c.dispatch("BeforeExecCommand",{command:t,ui:o,value:s}).isDefaultPrevented()))return!1;const S=this.commands.exec[d];return Pt(S)?(S(d,o,s),c.dispatch("ExecCommand",{command:t,ui:o,value:s}),!0):!1}queryCommandState(t){if(!CL(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=t.toLowerCase(),s=this.commands.state[o];return Pt(s)?s(o):!1}queryCommandValue(t){if(!CL(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=t.toLowerCase(),s=this.commands.value[o];return Pt(s)?s(o):""}addCommands(t,o="exec"){const s=this.commands;Qo(t,(a,c)=>{Ie(c.toLowerCase().split(","),d=>{s[o][d]=a})})}addCommand(t,o,s){const a=t.toLowerCase();this.commands.exec[a]=(c,d,g)=>o.call(s??this.editor,d,g)}queryCommandSupported(t){const o=t.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(t,o,s){this.commands.state[t.toLowerCase()]=()=>o.call(s??this.editor)}addQueryValueHandler(t,o,s){this.commands.value[t.toLowerCase()]=()=>o.call(s??this.editor)}}const Gx="data-mce-contenteditable",wZ=(e,t,o)=>{Ul(e,t)&&!o?xd(e,t):o&&Ks(e,t)},H8=(e,t,o)=>{try{e.getDoc().execCommand(t,!1,String(o))}catch{}},wR=(e,t)=>{e.dom.contentEditable=t?"true":"false"},CZ=e=>{Ie(hr(e,'*[contenteditable="true"]'),t=>{An(t,Gx,"true"),wR(t,!1)})},_Z=e=>{Ie(hr(e,`*[${Gx}="true"]`),t=>{ds(t,Gx),wR(t,!0)})},kZ=e=>{I.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},SZ=e=>{e.selection.setRng(e.selection.getRng())},EZ=(e,t)=>{const o=X.fromDom(e.getBody());wZ(o,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),kZ(e),e.readonly=!0,wR(o,!1),CZ(o)):(e.readonly=!1,e.hasEditableRoot()&&wR(o,!0),_Z(o),H8(e,"StyleWithCSS",!1),H8(e,"enableInlineTableEditing",!1),H8(e,"enableObjectResizing",!1),gy(e)&&e.focus(),SZ(e),e.nodeChanged())},Kx=e=>e.readonly,kL=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Kx(e)&&Ie(t,o=>{o.attr(Gx,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Gx,t=>{Kx(e)&&Ie(t,o=>{o.attr("contenteditable",o.attr(Gx))})}),e.serializer.addTempAttr(Gx)},TZ=e=>{e.serializer?kL(e):e.on("PreInit",()=>{kL(e)})},OZ=e=>e.type==="click",AZ=["copy"],NZ=e=>Io(AZ,e.type),RZ=(e,t)=>Fa(t,"a",s=>Lo(s,X.fromDom(e.getBody()))).bind(s=>ri(s,"href")),DZ=(e,t)=>{if(OZ(t)&&!rt.metaKeyPressed(t)){const o=X.fromDom(t.target);RZ(e,o).each(s=>{if(t.preventDefault(),/^#/.test(s)){const a=e.dom.select(`${s},[name="${lg(s,"#")}"]`);a.length&&e.selection.scrollIntoView(a[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else NZ(t)&&e.dispatch(t.type,t)},MZ=e=>{e.on("ShowCaret",t=>{Kx(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{Kx(e)&&t.preventDefault()})},BZ=qe.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class z8{static isNative(t){return!!BZ[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Jt}fire(t,o){return this.dispatch(t,o)}dispatch(t,o){const s=t.toLowerCase(),a=Yb(s,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(a);const c=this.bindings[s];if(c)for(let d=0,g=c.length;d<g;d++){const v=c[d];if(!v.removed){if(v.once&&this.off(s,v.func),a.isImmediatePropagationStopped())return a;if(v.func.call(this.scope,a)===!1)return a.preventDefault(),a}}return a}on(t,o,s,a){if(o===!1&&(o=Jt),o){const c={func:o,removed:!1};a&&qe.extend(c,a);const d=t.toLowerCase().split(" ");let g=d.length;for(;g--;){const v=d[g];let S=this.bindings[v];S||(S=[],this.toggleEvent(v,!0)),s?S=[c,...S]:S=[...S,c],this.bindings[v]=S}}return this}off(t,o){if(t){const s=t.toLowerCase().split(" ");let a=s.length;for(;a--;){const c=s[a];let d=this.bindings[c];if(!c)return Qo(this.bindings,(g,v)=>{this.toggleEvent(v,!1),delete this.bindings[v]}),this;if(d){if(!o)d.length=0;else{const g=ul(d,v=>v.func===o);d=g.fail,this.bindings[c]=d,Ie(g.pass,v=>{v.removed=!0})}d.length||(this.toggleEvent(t,!1),delete this.bindings[c])}}}else Qo(this.bindings,(s,a)=>{this.toggleEvent(a,!1)}),this.bindings={};return this}once(t,o,s){return this.on(t,o,s,{once:!0})}has(t){t=t.toLowerCase();const o=this.bindings[t];return!(!o||o.length===0)}}const L4=e=>(e._eventDispatcher||(e._eventDispatcher=new z8({scope:e,toggleEvent:(t,o)=>{z8.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,o)}})),e._eventDispatcher),V8={fire(e,t,o){return this.dispatch(e,t,o)},dispatch(e,t,o){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return Yb(e.toLowerCase(),t??{},s);const a=L4(s).dispatch(e,t);if(o!==!1&&s.parent){let c=s.parent();for(;c&&!a.isPropagationStopped();)c.dispatch(e,a,!1),c=c.parent?c.parent():void 0}return a},on(e,t,o){return L4(this).on(e,t,o)},off(e,t){return L4(this).off(e,t)},once(e,t){return L4(this).once(e,t)},hasEventListeners(e){return L4(this).has(e)}},CR=un.DOM;let Yx;const _R=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const o=Jw(e);return o?(e.eventRoot||(e.eventRoot=CR.select(o)[0]),e.eventRoot):e.getBody()},PZ=e=>!e.hidden&&!Kx(e),SL=(e,t,o)=>{PZ(e)?e.dispatch(t,o):Kx(e)&&DZ(e,o)},EL=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const o=_R(e,t);if(Jw(e)){if(Yx||(Yx={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Yx&&(Qo(Yx,(a,c)=>{e.dom.unbind(_R(e,c))}),Yx=null)})),Yx[t])return;const s=a=>{const c=a.target,d=e.editorManager.get();let g=d.length;for(;g--;){const v=d[g].getBody();(v===c||CR.isChildOf(c,v))&&SL(d[g],t,a)}};Yx[t]=s,CR.bind(o,t,s)}else{const s=a=>{SL(e,t,a)};CR.bind(o,t,s),e.delegates[t]=s}},TL={...V8,bindPendingEventDelegates(){const e=this;qe.each(e._pendingNativeEvents,t=>{EL(e,t)})},toggleNativeEvent(e,t){const o=this;e==="focus"||e==="blur"||o.removed||(t?o.initialized?EL(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(_R(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),o=e.dom;e.delegates&&(Qo(e.delegates,(s,a)=>{e.dom.unbind(_R(e,a),a,s)}),delete e.delegates),!e.inline&&t&&o&&(t.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(t),o.unbind(e.getContainer()))}},IZ=e=>bt(e)?{value:e.split(/[ ,]/),valid:!0}:ao(e,bt)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},LZ=e=>{const t=(()=>{switch(e){case"array":return ce;case"boolean":return yi;case"function":return Pt;case"number":return E;case"object":return ue;case"string":return bt;case"string[]":return IZ;case"object[]":return o=>ao(o,ue);case"regexp":return o=>eo(o,RegExp);default:return kn}})();return o=>$8(o,t,`The value must be a ${e}.`)},FZ=e=>bt(e.processor),OL=(e,t)=>{const o=bs(t.message)?"":`. ${t.message}`;return e+o},AL=e=>e.valid,$8=(e,t,o="")=>{const s=t(e);return yi(s)?s?{value:e,valid:!0}:{valid:!1,message:o}:s},HZ=(e,t,o)=>{if(!Bs(t)){const s=$8(t,o);if(AL(s))return s.value;console.error(OL(`Invalid default value passed for the "${e}" option`,s))}},zZ=(e,t)=>{const o={},s={},a=(D,P,j)=>{const K=$8(P,j);return AL(K)?(s[D]=K.value,!0):(console.warn(OL(`Invalid value passed for the ${D} option`,K)),!1)},c=(D,P)=>{const j=FZ(P)?LZ(P.processor):P.processor,K=HZ(D,P.default,j);o[D]={...P,default:K,processor:j},an(s,D).orThunk(()=>an(t,D)).each(Y=>a(D,Y,j))},d=D=>jt(o,D);return{register:c,isRegistered:d,get:D=>an(s,D).orThunk(()=>an(o,D).map(P=>P.default)).getOrUndefined(),set:(D,P)=>{if(d(D)){const j=o[D];return j.immutable?(console.error(`"${D}" is an immutable option and cannot be updated`),!1):a(D,P,j.processor)}else return console.warn(`"${D}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:D=>{const P=d(D);return P&&delete s[D],P},isSet:D=>jt(s,D)}},VZ=["design","readonly"],NL=(e,t,o,s)=>{const a=o[t.get()],c=o[s];try{c.activate()}catch(d){console.error(`problem while activating editor mode ${s}:`,d);return}a.deactivate(),a.editorReadOnly!==c.editorReadOnly&&EZ(e,c.editorReadOnly),t.set(s),tE(e,s)},$Z=(e,t,o,s)=>{if(s!==o.get()){if(!jt(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?NL(e,o,t,s):e.on("init",()=>NL(e,o,t,s))}},UZ=(e,t,o)=>{if(Io(VZ,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...o,deactivate:()=>{try{o.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}}}},ZZ=e=>{const t=_s("design"),o=_s({design:{activate:oo,deactivate:oo,editorReadOnly:!1},readonly:{activate:oo,deactivate:oo,editorReadOnly:!0}});return TZ(e),MZ(e),{isReadOnly:()=>Kx(e),set:s=>$Z(e,o.get(),t,s),get:()=>t.get(),register:(s,a)=>{o.set(UZ(o.get(),s,a))}}},U8=qe.each,Z8=qe.explode,WZ={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},RL=qe.makeMap("alt,ctrl,shift,meta,access"),jZ=e=>e in RL,qZ=e=>{const t={},o=Do.os.isMacOS()||Do.os.isiOS();U8(Z8(e.toLowerCase(),"+"),c=>{jZ(c)?t[c]=!0:/^[0-9]{2,}$/.test(c)?t.keyCode=parseInt(c,10):(t.charCode=c.charCodeAt(0),t.keyCode=WZ[c]||c.toUpperCase().charCodeAt(0))});const s=[t.keyCode];let a;for(a in RL)t[a]?s.push(a):t[a]=!1;return t.id=s.join(","),t.access&&(t.alt=!0,o?t.ctrl=!0:t.shift=!0),t.meta&&(o?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class DL{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const o=this;t.on("keyup keypress keydown",s=>{(o.hasModifier(s)||o.isFunctionKey(s))&&!s.isDefaultPrevented()&&(U8(o.shortcuts,a=>{o.matchShortcut(s,a)&&(o.pendingPatterns=a.subpatterns.slice(0),s.type==="keydown"&&o.executeShortcutAction(a))}),o.matchShortcut(s,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&s.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(t,o,s,a){const c=this,d=c.normalizeCommandFunc(s);return U8(Z8(qe.trim(t)),g=>{const v=c.createShortcut(g,o,d,a);c.shortcuts[v.id]=v}),!0}remove(t){const o=this.createShortcut(t);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(t){const o=this,s=t;return typeof s=="string"?()=>{o.editor.execCommand(s,!1,null)}:qe.isArray(s)?()=>{o.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,o,s,a){const c=qe.map(Z8(t,">"),qZ);return c[c.length-1]=qe.extend(c[c.length-1],{func:s,scope:a||this.editor}),qe.extend(c[0],{desc:this.editor.translate(o),subpatterns:c.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,o){return!o||o.ctrl!==t.ctrlKey||o.meta!==t.metaKey||o.alt!==t.altKey||o.shift!==t.shiftKey?!1:t.keyCode===o.keyCode||t.charCode&&t.charCode===o.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const GZ=()=>{const e={},t={},o={},s={},a={},c={},d={},g={},v=(R,D)=>(P,j)=>{R[P.toLowerCase()]={...j,type:D}},S=(R,D)=>s[R.toLowerCase()]=D;return{addButton:v(e,"button"),addGroupToolbarButton:v(e,"grouptoolbarbutton"),addToggleButton:v(e,"togglebutton"),addMenuButton:v(e,"menubutton"),addSplitButton:v(e,"splitbutton"),addMenuItem:v(t,"menuitem"),addNestedMenuItem:v(t,"nestedmenuitem"),addToggleMenuItem:v(t,"togglemenuitem"),addAutocompleter:v(o,"autocompleter"),addContextMenu:v(a,"contextmenu"),addContextToolbar:v(c,"contexttoolbar"),addContextForm:v(c,"contextform"),addSidebar:v(d,"sidebar"),addView:v(g,"views"),addIcon:S,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:o,contextMenus:a,contextToolbars:c,sidebars:d,views:g})}},KZ=()=>{const e=GZ();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Xx=un.DOM,ML=qe.extend,YZ=qe.each;class kR{constructor(t,o,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,ML(this,TL);const a=this;this.id=t,this.hidden=!1;const c=NU(s.defaultOptions,o);this.options=zZ(a,c),Aa(a);const d=this.options.get;d("deprecation_warnings")&&AS(o,c);const g=d("suffix");g&&(s.suffix=g),this.suffix=s.suffix;const v=d("base_url");v&&s._setBaseUrl(v),this.baseUri=s.baseURI;const S=Gw(a);S&&(jr.ScriptLoader._setReferrerPolicy(S),un.DOM.styleSheetLoader._setReferrerPolicy(S));const R=ac(a);Ne(R)&&un.DOM.styleSheetLoader._setContentCssCors(R),Nr.languageLoad=d("language_load"),Nr.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new Ml(Yc(a),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Qh(a),this.hasVisual=Ro(a),this.shortcuts=new DL(this),this.editorCommands=new _L(this),vZ(this);const D=d("cache_suffix");D&&(Do.cacheSuffix=D.replace(/^[\?\&]+/,"")),this.ui={registry:KZ(),styleSheetLoader:void 0,show:oo,hide:oo,setEnabled:oo,isEnabled:kn},this.mode=ZZ(a),s.dispatch("SetupEditor",{editor:this});const P=t1(a);Pt(P)&&P.call(a,a)}render(){pU(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return Pf(this)}translate(t){return Ta.translate(t)}getParam(t,o,s){const a=this.options;return a.isRegistered(t)||(Ne(s)?a.register(t,{processor:s,default:o}):a.register(t,{processor:kn,default:o})),!a.isSet(t)&&!Bs(o)?o:a.get(t)}hasPlugin(t,o){return Io(ru(this),t)?o?q1.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,o,s){this.editorCommands.addCommand(t,o,s)}addQueryStateHandler(t,o,s){this.editorCommands.addQueryStateHandler(t,o,s)}addQueryValueHandler(t,o,s){this.editorCommands.addQueryValueHandler(t,o,s)}addShortcut(t,o,s,a){this.shortcuts.add(t,o,s,a)}execCommand(t,o,s,a){return this.editorCommands.execCommand(t,o,s,a)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Xx.show(t.getContainer()),Xx.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Xx.hide(t.getContainer()),Xx.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,o){this.dispatch("ProgressState",{state:t,time:o})}load(t={}){const o=this,s=o.getElement();if(o.removed)return"";if(s){const a={...t,load:!0},c=Ed(s)?s.value:s.innerHTML,d=o.setContent(c,a);return a.no_events||o.dispatch("LoadContent",{...a,element:s}),d}else return""}save(t={}){const o=this;let s=o.getElement();if(!s||!o.initialized||o.removed)return"";const a={...t,save:!0,element:s};let c=o.getContent(a);const d={...a,content:c};if(d.no_events||o.dispatch("SaveContent",d),d.format==="raw"&&o.dispatch("RawSaveContent",d),c=d.content,Ed(s))s.value=c;else{(t.is_removing||!o.inline)&&(s.innerHTML=c);const g=Xx.getParent(o.id,"form");g&&YZ(g.elements,v=>v.name===o.id?(v.value=c,!1):!0)}return d.element=a.element=s=null,d.set_dirty!==!1&&o.setDirty(!1),c}setContent(t,o){return TS(this,t,o)}getContent(t){return JA(this,t)}insertContent(t,o){o&&(t=ML({content:t},o)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?TS(this,this.startContent,{format:"raw"}):TS(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const o=!this.isNotDirty;this.isNotDirty=!t,t&&t!==o&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Xx.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Xx.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const o=t.iframeElement;o&&(t.contentWindow=o.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const o=t.getWin();o&&(t.contentDocument=o.document)}return t.contentDocument}getBody(){var t,o;const s=this.getDoc();return(o=(t=this.bodyElement)!==null&&t!==void 0?t:s==null?void 0:s.body)!==null&&o!==void 0?o:null}convertURL(t,o,s){const a=this,c=a.options.get,d=o3(a);if(Pt(d))return d.call(a,t,s,!0,o);if(!c("convert_urls")||s==="link"||ue(s)&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const g=new Ml(t);return g.protocol!=="http"&&g.protocol!=="https"&&g.protocol!==""?t:c("relative_urls")?a.documentBaseURI.toRelative(t):(t=a.documentBaseURI.toAbsolute(t,c("remove_script_host")),t)}addVisual(t){RU(this,t)}setEditableRoot(t){hU(this,t)}hasEditableRoot(){return bU(this)}remove(){Tx(this)}destroy(t){TB(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const yw=un.DOM,SR=qe.each;let BL=!1,ER,ll=[];const TR=e=>{const t=e.type;SR(rb.get(),o=>{switch(t){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},PL=e=>{if(e!==BL){const t=un.DOM;e?(t.bind(window,"resize",TR),t.bind(window,"scroll",TR)):(t.unbind(window,"resize",TR),t.unbind(window,"scroll",TR)),BL=e}},IL=e=>{const t=ll;return ll=Et(ll,o=>e!==o),rb.activeEditor===e&&(rb.activeEditor=ll.length>0?ll[0]:null),rb.focusedEditor===e&&(rb.focusedEditor=null),t.length!==ll.length},XZ=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(IL(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},JZ=document.compatMode!=="CSS1Compat",rb={...V8,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.4",releaseDate:"2024-06-19",i18n:Ta,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",o="",s=Ml.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));const a=window.tinymce||window.tinyMCEPreInit;if(a)t=a.base||a.baseURL,o=a.suffix;else{const c=document.getElementsByTagName("script");for(let d=0;d<c.length;d++){const g=c[d].src||"";if(g==="")continue;const v=g.substring(g.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(g)){v.indexOf(".min")!==-1&&(o=".min"),t=g.substring(0,g.lastIndexOf("/"));break}}if(!t&&document.currentScript){const d=document.currentScript.src;d.indexOf(".min")!==-1&&(o=".min"),t=d.substring(0,d.lastIndexOf("/"))}}e.baseURL=new Ml(s).toAbsolute(t),e.documentBaseURL=s,e.baseURI=new Ml(e.baseURL),e.suffix=o,e6(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&Qo(s,(a,c)=>{Nr.PluginManager.urls[c]=a})},init(e){const t=this;let o;const s=qe.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=(R,D)=>R.inline&&D.tagName.toLowerCase()in s,c=R=>{let D=R.id;return D||(D=an(R,"name").filter(P=>!yw.get(P)).getOrThunk(yw.uniqueId),R.setAttribute("id",D)),D},d=R=>{const D=e[R];if(D)return D.apply(t,[])},g=R=>Do.browser.isIE()||Do.browser.isEdge()?(G1("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):JZ?(G1("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):bt(R.selector)?yw.select(R.selector):Ne(R.target)?[R.target]:[];let v=R=>{o=R};const S=()=>{let R=0;const D=[];let P;const j=(K,Z,Y)=>{const ae=new kR(K,Z,t);D.push(ae),ae.on("init",()=>{++R===P.length&&v(D)}),ae.targetElm=ae.targetElm||Y,ae.render()};yw.unbind(window,"ready",S),d("onpageload"),P=Lr(g(e)),qe.each(P,K=>{XZ(t.get(K.id))}),P=qe.grep(P,K=>!t.get(K.id)),P.length===0?v([]):SR(P,K=>{a(e,K)?G1("Could not initialize inline editor on invalid inline target element",K):j(c(K),e,K)})};return yw.bind(window,"ready",S),new Promise(R=>{o?R(o):v=D=>{R(D)}})},get(e){return arguments.length===0?ll.slice(0):bt(e)?Ao(ll,t=>t.id===e).getOr(null):E(e)&&ll[e]?ll[e]:null},add(e){const t=this,o=t.get(e.id);return o===e||(o===null&&ll.push(e),PL(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),ER||(ER=s=>{const a=t.dispatch("BeforeUnload");if(a.returnValue)return s.preventDefault(),s.returnValue=a.returnValue,a.returnValue},window.addEventListener("beforeunload",ER))),e},createEditor(e,t){return this.add(new kR(e,t,this))},remove(e){const t=this;let o;if(!e){for(let s=ll.length-1;s>=0;s--)t.remove(ll[s]);return}if(bt(e)){SR(yw.select(e),s=>{o=t.get(s.id),o&&t.remove(o)});return}return o=e,Rn(t.get(o.id))?null:(IL(o)&&t.dispatch("RemoveEditor",{editor:o}),ll.length===0&&window.removeEventListener("beforeunload",ER),o.remove(),PL(ll.length>0),o)},execCommand(e,t,o){var s;const a=this,c=ue(o)?(s=o.id)!==null&&s!==void 0?s:o.index:o;switch(e){case"mceAddEditor":{if(!a.get(c)){const d=o.options;new kR(c,d,a).render()}return!0}case"mceRemoveEditor":{const d=a.get(c);return d&&d.remove(),!0}case"mceToggleEditor":{const d=a.get(c);return d?(d.isHidden()?d.show():d.hide(),!0):(a.execCommand("mceAddEditor",!1,o),!0)}}return a.activeEditor?a.activeEditor.execCommand(e,t,o):!1},triggerSave:()=>{SR(ll,e=>{e.save()})},addI18n:(e,t)=>{Ta.add(e,t)},translate:e=>Ta.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Ml(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Ml(this.baseURL)}};rb.setup();const QZ=(()=>{const e=Cl(),t=c=>({items:c,types:ze(c),getType:d=>an(c,d).getOrUndefined()}),o=c=>{e.set(c)},s=()=>e.get().getOrUndefined(),a=e.clear;return{FakeClipboardItem:t,write:o,read:s,clear:a}})(),LL=Math.min,ww=Math.max,OR=Math.round,FL=(e,t,o)=>{let s=t.x,a=t.y;const c=e.w,d=e.h,g=t.w,v=t.h,S=(o||"").split("");return S[0]==="b"&&(a+=v),S[1]==="r"&&(s+=g),S[0]==="c"&&(a+=OR(v/2)),S[1]==="c"&&(s+=OR(g/2)),S[3]==="b"&&(a-=d),S[4]==="r"&&(s-=c),S[3]==="c"&&(a-=OR(d/2)),S[4]==="c"&&(s-=OR(c/2)),Cw(s,a,c,d)},eW=(e,t,o,s)=>{for(let a=0;a<s.length;a++){const c=FL(e,t,s[a]);if(c.x>=o.x&&c.x+c.w<=o.w+o.x&&c.y>=o.y&&c.y+c.h<=o.h+o.y)return s[a]}return null},tW=(e,t,o)=>Cw(e.x-t,e.y-o,e.w+t*2,e.h+o*2),oW=(e,t)=>{const o=ww(e.x,t.x),s=ww(e.y,t.y),a=LL(e.x+e.w,t.x+t.w),c=LL(e.y+e.h,t.y+t.h);return a-o<0||c-s<0?null:Cw(o,s,a-o,c-s)},nW=(e,t,o)=>{let s=e.x,a=e.y,c=e.x+e.w,d=e.y+e.h;const g=t.x+t.w,v=t.y+t.h,S=ww(0,t.x-s),R=ww(0,t.y-a),D=ww(0,c-g),P=ww(0,d-v);return s+=S,a+=R,o&&(c+=S,d+=R,s-=D,a-=P),c-=D,d-=P,Cw(s,a,c-s,d-a)},Cw=(e,t,o,s)=>({x:e,y:t,w:o,h:s}),sW={inflate:tW,relativePosition:FL,findBestRelativePosition:eW,intersect:oW,clamp:nW,create:Cw,fromClientRect:e=>Cw(e.left,e.top,e.width,e.height)},rW=(e,t,o=1e3)=>{let s=!1,a=null;const c=S=>(...R)=>{s||(s=!0,a!==null&&(clearTimeout(a),a=null),S.apply(null,R))},d=c(e),g=c(t);return{start:(...S)=>{!s&&a===null&&(a=setTimeout(()=>g.apply(null,S),o))},resolve:d,reject:g}},aW=(()=>{const e={},t={},o={};return{load:(v,S)=>{const R=`Script at URL "${S}" failed to load`,D=`Script at URL "${S}" did not call \`tinymce.Resource.add('${v}', data)\` within 1 second`;if(e[v]!==void 0)return e[v];{const P=new Promise((j,K)=>{const Z=rW(j,K);t[v]=Z.resolve,jr.ScriptLoader.loadScript(S).then(()=>Z.start(D),()=>Z.reject(R))});return e[v]=P,P}},add:(v,S)=>{t[v]!==void 0&&(t[v](S),delete t[v]),e[v]=Promise.resolve(S),o[v]=S},has:v=>v in o,get:v=>o[v],unload:v=>{delete e[v]}}})(),iW=()=>(()=>{let e={},t=[];const o={getItem:s=>{const a=e[s];return a||null},setItem:(s,a)=>{t.push(s),e[s]=String(a)},key:s=>t[s],removeItem:s=>{t=t.filter(a=>a===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),o})();let F4;try{const e="__storage_test__";F4=window.localStorage,F4.setItem(e,e),F4.removeItem(e)}catch{F4=iW()}var lW=F4;const cW={geom:{Rect:sW},util:{Delay:sl,Tools:qe,VK:rt,URI:Ml,EventDispatcher:z8,Observable:V8,I18n:Ta,LocalStorage:lW,ImageUploader:zB},dom:{EventUtils:Zd,TreeWalker:Ys,TextSeeker:Kd,DOMUtils:un,ScriptLoader:jr,RangeUtils:fm,Serializer:kx,StyleSheetLoader:wn,ControlSelection:p1,BookmarkManager:f1,Selection:kS,Event:Zd.Event},html:{Styles:Ug,Entities:Wn,Node:Da,Schema:oc,DomParser:Wp,Writer:B_,Serializer:gm},Env:Do,AddOnManager:Nr,Annotator:WC,Formatter:Dx,UndoManager:q2,EditorCommands:_L,WindowManager:IS,NotificationManager:BS,EditorObservable:TL,Shortcuts:DL,Editor:kR,FocusManager:kp,EditorManager:rb,DOM:un.DOM,ScriptLoader:jr.ScriptLoader,PluginManager:q1,ThemeManager:Zf,ModelManager:Gp,IconManager:qp,Resource:aW,FakeClipboard:QZ,trim:qe.trim,isArray:qe.isArray,is:qe.is,toArray:qe.toArray,makeMap:qe.makeMap,each:qe.each,map:qe.map,grep:qe.grep,inArray:qe.inArray,extend:qe.extend,walk:qe.walk,resolve:qe.resolve,explode:qe.explode,_addCacheSuffix:qe._addCacheSuffix},HL=qe.extend(rb,cW),dW=e=>{try{ib.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(HL),dW(HL)})()})(jL);var gW=jL.exports;const DW=fW(gW);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){const ib=Object.getPrototypeOf,Du=(n,r,i)=>{var l;return!!i(n,r.prototype)||((l=n.constructor)===null||l===void 0?void 0:l.name)===r.name},Mu=n=>r=>(i=>{const l=typeof i;return i===null?"null":l==="object"&&Array.isArray(i)?"array":l==="object"&&Du(i,String,(u,m)=>m.isPrototypeOf(u))?"string":l})(r)===n,ud=n=>r=>typeof r===n,yc=n=>r=>n===r,Co=Mu("string"),Pr=Mu("object"),sg=n=>((r,i)=>Pr(r)&&Du(r,i,(l,u)=>ib(l)===u))(n,Object),Qa=Mu("array"),md=yc(null),Kr=ud("boolean"),mr=yc(void 0),Pl=n=>n==null,_t=n=>!Pl(n),Ft=ud("function"),jo=ud("number"),wc=(n,r)=>{if(Qa(n)){for(let i=0,l=n.length;i<l;++i)if(!r(n[i]))return!1;return!0}return!1},Xe=()=>{},eo=n=>()=>n(),bt=(n,r)=>(...i)=>n(r.apply(null,i)),ue=n=>()=>n,kt=n=>n,ce=(n,r)=>n===r;function Rn(n,...r){return(...i)=>{const l=r.concat(i);return n.apply(null,l)}}const yi=n=>r=>!n(r),Bs=n=>()=>{throw new Error(n)},_o=n=>n(),Ne=ue(!1),Pt=ue(!0);class E{constructor(r,i){this.tag=r,this.value=i}static some(r){return new E(!0,r)}static none(){return E.singletonNone}fold(r,i){return this.tag?i(this.value):r()}isSome(){return this.tag}isNone(){return!this.tag}map(r){return this.tag?E.some(r(this.value)):E.none()}bind(r){return this.tag?r(this.value):E.none()}exists(r){return this.tag&&r(this.value)}forall(r){return!this.tag||r(this.value)}filter(r){return!this.tag||r(this.value)?this:E.none()}getOr(r){return this.tag?this.value:r}or(r){return this.tag?this:r}getOrThunk(r){return this.tag?this.value:r()}orThunk(r){return this.tag?this:r()}getOrDie(r){if(this.tag)return this.value;throw new Error(r??"Called getOrDie on None")}static from(r){return _t(r)?E.some(r):E.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(r){this.tag&&r(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}E.singletonNone=new E(!1);const ao=Array.prototype.slice,oo=Array.prototype.indexOf,Uo=Array.prototype.push,Pa=(n,r)=>oo.call(n,r),Je=(n,r)=>{const i=Pa(n,r);return i===-1?E.none():E.some(i)},bo=(n,r)=>Pa(n,r)>-1,Yr=(n,r)=>{for(let i=0,l=n.length;i<l;i++)if(r(n[i],i))return!0;return!1},it=(n,r)=>{const i=[];for(let l=0;l<n;l++)i.push(r(l));return i},hs=(n,r)=>{const i=[];for(let l=0;l<n.length;l+=r){const u=ao.call(n,l,l+r);i.push(u)}return i},Ke=(n,r)=>{const i=n.length,l=new Array(i);for(let u=0;u<i;u++){const m=n[u];l[u]=r(m,u)}return l},xt=(n,r)=>{for(let i=0,l=n.length;i<l;i++)r(n[i],i)},Cc=(n,r)=>{const i=[],l=[];for(let u=0,m=n.length;u<m;u++){const p=n[u];(r(p,u)?i:l).push(p)}return{pass:i,fail:l}},Jt=(n,r)=>{const i=[];for(let l=0,u=n.length;l<u;l++){const m=n[l];r(m,l)&&i.push(m)}return i},kn=(n,r,i)=>(((l,u)=>{for(let m=l.length-1;m>=0;m--)u(l[m],m)})(n,(l,u)=>{i=r(i,l,u)}),i),I=(n,r,i)=>(xt(n,(l,u)=>{i=r(i,l,u)}),i),qo=(n,r)=>((i,l,u)=>{for(let m=0,p=i.length;m<p;m++){const b=i[m];if(l(b,m))return E.some(b);if(u(b,m))break}return E.none()})(n,r,Ne),dl=(n,r)=>{for(let i=0,l=n.length;i<l;i++)if(r(n[i],i))return E.some(i);return E.none()},hn=n=>{const r=[];for(let i=0,l=n.length;i<l;++i){if(!Qa(n[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+n);Uo.apply(r,n[i])}return r},qn=(n,r)=>hn(Ke(n,r)),_c=(n,r)=>{for(let i=0,l=n.length;i<l;++i)if(r(n[i],i)!==!0)return!1;return!0},Io=n=>{const r=ao.call(n,0);return r.reverse(),r},bn=(n,r)=>Jt(n,i=>!bo(r,i)),no=(n,r)=>{const i={};for(let l=0,u=n.length;l<u;l++){const m=n[l];i[String(m)]=r(m,l)}return i},Ie=n=>[n],Fm=(n,r)=>{const i=ao.call(n,0);return i.sort(r),i},ul=(n,r)=>r>=0&&r<n.length?E.some(n[r]):E.none(),Et=n=>ul(n,0),xn=n=>ul(n,n.length-1),Ir=Ft(Array.from)?Array.from:n=>ao.call(n),_r=(n,r)=>{for(let i=0;i<n.length;i++){const l=r(n[i],i);if(l.isSome())return l}return E.none()},Ao=Object.keys,fd=Object.hasOwnProperty,In=(n,r)=>{const i=Ao(n);for(let l=0,u=i.length;l<u;l++){const m=i[l];r(n[m],m)}},Ho=(n,r)=>ei(n,(i,l)=>({k:l,v:r(i,l)})),ei=(n,r)=>{const i={};return In(n,(l,u)=>{const m=r(l,u);i[m.k]=m.v}),i},Il=n=>(r,i)=>{n[i]=r},fr=(n,r,i,l)=>{In(n,(u,m)=>{(r(u,m)?i:l)(u,m)})},Ll=(n,r)=>{const i={};return fr(n,r,Il(i),Xe),i},Dn=(n,r)=>{const i=[];return In(n,(l,u)=>{i.push(r(l,u))}),i},qi=(n,r)=>{const i=Ao(n);for(let l=0,u=i.length;l<u;l++){const m=i[l],p=n[m];if(r(p,m,n))return E.some(p)}return E.none()},Ln=n=>Dn(n,kt),mt=(n,r)=>Dt(n,r)?E.from(n[r]):E.none(),Dt=(n,r)=>fd.call(n,r),Zs=(n,r)=>Dt(n,r)&&n[r]!==void 0&&n[r]!==null,Lr=(n,r,i=ce)=>n.exists(l=>i(l,r)),ze=n=>{const r=[],i=l=>{r.push(l)};for(let l=0;l<n.length;l++)n[l].each(i);return r},Fr=(n,r,i)=>n.isSome()&&r.isSome()?E.some(i(n.getOrDie(),r.getOrDie())):E.none(),Qo=(n,r)=>n!=null?E.some(r(n)):E.none(),Xr=(n,r)=>n?E.some(r):E.none(),vn=(n,r,i)=>r===""||n.length>=r.length&&n.substr(i,i+r.length)===r,gd=(n,r)=>Hm(n,r)?((i,l)=>i.substring(l))(n,r.length):n,kr=(n,r,i=0,l)=>{const u=n.indexOf(r,i);return u!==-1&&(!!mr(l)||u+r.length<=l)},Hm=(n,r)=>vn(n,r,0),wi=(n,r)=>vn(n,r,n.length-r.length),ti=(ub=/^\s+|\s+$/g,n=>n.replace(ub,"")),kc=n=>n.length>0,an=n=>!kc(n),jt=n=>n.style!==void 0&&Ft(n.style.getPropertyValue),oi=n=>{if(n==null)throw new Error("Node cannot be null or undefined");return{dom:n}},ga=(n,r)=>{const i=document.createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||i.childNodes.length>1){const l="HTML does not have a single root node";throw console.error(l,n),new Error(l)}return oi(i.childNodes[0])},Ia=(n,r)=>{const i=document.createElement(n);return oi(i)},pd=(n,r)=>{const i=document.createTextNode(n);return oi(i)},ot=oi,rg=typeof window<"u"?window:Function("return this;")(),Tn=(n,r)=>((i,l)=>{let u=l??rg;for(let m=0;m<i.length&&u!=null;++m)u=u[i[m]];return u})(n.split("."),r),zm=Object.getPrototypeOf,hd=n=>{const r=Tn("ownerDocument.defaultView",n);return Pr(n)&&((i=>((l,u)=>{const m=((p,b)=>Tn(p,b))(l,u);if(m==null)throw new Error(l+" not available on this browser");return m})("HTMLElement",i))(r).prototype.isPrototypeOf(n)||/^HTML\w*Element$/.test(zm(n).constructor.name))},Hr=n=>n.dom.nodeName.toLowerCase(),ml=n=>r=>(i=>i.dom.nodeType)(r)===n,Sr=n=>Ws(n)&&hd(n.dom),Ws=ml(1),pa=ml(3),nh=ml(9),Bu=ml(11),ag=n=>r=>Ws(r)&&Hr(r)===n,sh=(n,r)=>{const i=n.dom;if(i.nodeType!==1)return!1;{const l=i;if(l.matches!==void 0)return l.matches(r);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(r);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(r);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")}},Vm=n=>n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11||n.childElementCount===0,Go=(n,r)=>n.dom===r.dom,Es=(n,r)=>{const i=n.dom,l=r.dom;return i!==l&&i.contains(l)},Er=n=>ot(n.dom.ownerDocument),Pu=n=>nh(n)?n:Er(n),ig=n=>ot(Pu(n).dom.documentElement),$m=n=>ot(Pu(n).dom.defaultView),Ci=n=>E.from(n.dom.parentNode).map(ot),rr=n=>E.from(n.dom.parentElement).map(ot),lg=n=>E.from(n.dom.offsetParent).map(ot),Fn=n=>Ke(n.dom.childNodes,ot),yn=(n,r)=>{const i=n.dom.childNodes;return E.from(i[r]).map(ot)},Fl=n=>yn(n,0),_i=(n,r)=>({element:n,offset:r}),Hl=(n,r)=>{const i=Fn(n);return i.length>0&&r<i.length?_i(i[r],0):_i(n,r)},Sc=n=>Bu(n)&&_t(n.dom.host),Iu=Ft(Element.prototype.attachShadow)&&Ft(Node.prototype.getRootNode),zr=ue(Iu),bs=Iu?n=>ot(n.dom.getRootNode()):Pu,Gi=n=>Sc(n)?n:ot(Pu(n).dom.body),ls=n=>{const r=bs(n);return Sc(r)?E.some(r):E.none()},bd=n=>ot(n.dom.host),Ps=n=>{const r=pa(n)?n.dom.parentNode:n.dom;if(r==null||r.ownerDocument===null)return!1;const i=r.ownerDocument;return ls(ot(r)).fold(()=>i.body.contains(r),(l=Ps,u=bd,m=>l(u(m))));var l,u},ni=()=>cg(ot(document)),cg=n=>{const r=n.dom.body;if(r==null)throw new Error("Body is not available yet");return ot(r)},Tr=(n,r,i)=>{if(!(Co(i)||Kr(i)||jo(i)))throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",i,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(r,i+"")},Kt=(n,r,i)=>{Tr(n.dom,r,i)},ki=(n,r)=>{const i=n.dom;In(r,(l,u)=>{Tr(i,u,l)})},js=(n,r)=>{const i=n.dom.getAttribute(r);return i===null?void 0:i},qs=(n,r)=>E.from(js(n,r)),zl=(n,r)=>{const i=n.dom;return!(!i||!i.hasAttribute)&&i.hasAttribute(r)},Sn=(n,r)=>{n.dom.removeAttribute(r)},xs=(n,r,i)=>{if(!Co(i))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",i,":: Element ",n),new Error("CSS value must be a string: "+i);jt(n)&&n.style.setProperty(r,i)},Ec=(n,r)=>{jt(n)&&n.style.removeProperty(r)},Ht=(n,r,i)=>{const l=n.dom;xs(l,r,i)},Ki=(n,r)=>{const i=n.dom;In(r,(l,u)=>{xs(i,u,l)})},Vl=(n,r)=>{const i=n.dom;In(r,(l,u)=>{l.fold(()=>{Ec(i,u)},m=>{xs(i,u,m)})})},Gn=(n,r)=>{const i=n.dom,l=window.getComputedStyle(i).getPropertyValue(r);return l!==""||Ps(n)?l:Si(i,r)},Si=(n,r)=>jt(n)?n.style.getPropertyValue(r):"",vs=(n,r)=>{const i=n.dom,l=Si(i,r);return E.from(l).filter(u=>u.length>0)},Lu=n=>{const r={},i=n.dom;if(jt(i))for(let l=0;l<i.style.length;l++){const u=i.style.item(l);r[u]=i.style[u]}return r},Um=(n,r,i)=>{const l=Ia(n);return Ht(l,r,i),vs(l,r).isSome()},Mo=(n,r)=>{const i=n.dom;Ec(i,r),Lr(qs(n,"style").map(ti),"")&&Sn(n,"style")},z=n=>n.dom.offsetWidth,ne=(n,r)=>{const i=u=>{const m=r(u);if(m<=0||m===null){const p=Gn(u,n);return parseFloat(p)||0}return m},l=(u,m)=>I(m,(p,b)=>{const x=Gn(u,b),w=x===void 0?0:parseInt(x,10);return isNaN(w)?p:p+w},0);return{set:(u,m)=>{if(!jo(m)&&!m.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+m);const p=u.dom;jt(p)&&(p.style[n]=m+"px")},get:i,getOuter:i,aggregate:l,max:(u,m,p)=>{const b=l(u,p);return m>b?m-b:0}}},de=ne("height",n=>{const r=n.dom;return Ps(n)?r.getBoundingClientRect().height:r.offsetHeight}),_e=n=>de.get(n),Ue=n=>de.getOuter(n),Tt=(n,r)=>({left:n,top:r,translate:(i,l)=>Tt(n+i,r+l)}),Xt=Tt,To=(n,r)=>n!==void 0?n:r!==void 0?r:0,ko=n=>{const r=n.dom.ownerDocument,i=r.body,l=r.defaultView,u=r.documentElement;if(i===n.dom)return Xt(i.offsetLeft,i.offsetTop);const m=To(l==null?void 0:l.pageYOffset,u.scrollTop),p=To(l==null?void 0:l.pageXOffset,u.scrollLeft),b=To(u.clientTop,i.clientTop),x=To(u.clientLeft,i.clientLeft);return Kn(n).translate(p-x,m-b)},Kn=n=>{const r=n.dom,i=r.ownerDocument.body;return i===r?Xt(i.offsetLeft,i.offsetTop):Ps(n)?(l=>{const u=l.getBoundingClientRect();return Xt(u.left,u.top)})(r):Xt(0,0)},Xo=ne("width",n=>n.dom.offsetWidth),On=n=>Xo.get(n),ha=n=>Xo.getOuter(n),si=n=>{let r,i=!1;return(...l)=>(i||(i=!0,r=n.apply(null,l)),r)},Do=()=>dg(0,0),dg=(n,r)=>({major:n,minor:r}),$l={nu:dg,detect:(n,r)=>{const i=String(r).toLowerCase();return n.length===0?Do():((l,u)=>{const m=((b,x)=>{for(let w=0;w<b.length;w++){const _=b[w];if(_.test(x))return _}})(l,u);if(!m)return{major:0,minor:0};const p=b=>Number(u.replace(m,"$"+b));return dg(p(1),p(2))})(n,i)},unknown:Do},lb=(n,r)=>{const i=String(r).toLowerCase();return qo(n,l=>l.search(i))},ug=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Jr=n=>r=>kr(r,n),Ew=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:n=>kr(n,"edge/")&&kr(n,"chrome")&&kr(n,"safari")&&kr(n,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ug],search:n=>kr(n,"chrome")&&!kr(n,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:n=>kr(n,"msie")||kr(n,"trident")},{name:"Opera",versionRegexes:[ug,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Jr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Jr("firefox")},{name:"Safari",versionRegexes:[ug,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:n=>(kr(n,"safari")||kr(n,"mobile/"))&&kr(n,"applewebkit")}],tv=[{name:"Windows",search:Jr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:n=>kr(n,"iphone")||kr(n,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Jr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Jr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Jr("linux"),versionRegexes:[]},{name:"Solaris",search:Jr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Jr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Jr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ov={browsers:ue(Ew),oses:ue(tv)},V4="Edge",$4="Chromium",qe="Opera",Zm="Firefox",nv="Safari",cb=n=>{const r=n.current,i=n.version,l=u=>()=>r===u;return{current:r,version:i,isEdge:l(V4),isChromium:l($4),isIE:l("IE"),isOpera:l(qe),isFirefox:l(Zm),isSafari:l(nv)}},Vr=()=>cb({current:void 0,version:$l.unknown()}),Tw=cb,Wm="Windows",Ow="Android",Aw="Linux",sv="macOS",Nw="Solaris",Rw="FreeBSD",Dw="ChromeOS",db=n=>{const r=n.current,i=n.version,l=u=>()=>r===u;return{current:r,version:i,isWindows:l(Wm),isiOS:l("iOS"),isAndroid:l(Ow),isMacOS:l(sv),isLinux:l(Aw),isSolaris:l(Nw),isFreeBSD:l(Rw),isChromeOS:l(Dw)}},Mw=()=>db({current:void 0,version:$l.unknown()}),rv=db,av=n=>window.matchMedia(n).matches;var ub;let jm=si(()=>((n,r,i)=>{const l=ov.browsers(),u=ov.oses(),m=r.bind(x=>((w,_)=>_r(_.brands,k=>{const T=k.brand.toLowerCase();return qo(w,N=>{var B;return T===((B=N.brand)===null||B===void 0?void 0:B.toLowerCase())}).map(N=>({current:N.name,version:$l.nu(parseInt(k.version,10),0)}))}))(l,x)).orThunk(()=>((x,w)=>lb(x,w).map(_=>{const k=$l.detect(_.versionRegexes,w);return{current:_.name,version:k}}))(l,n)).fold(Vr,Tw),p=((x,w)=>lb(x,w).map(_=>{const k=$l.detect(_.versionRegexes,w);return{current:_.name,version:k}}))(u,n).fold(Mw,rv),b=((x,w,_,k)=>{const T=x.isiOS()&&/ipad/i.test(_)===!0,N=x.isiOS()&&!T,B=x.isiOS()||x.isAndroid(),V=B||k("(pointer:coarse)"),U=T||!N&&B&&k("(min-device-width:768px)"),q=N||B&&!U,H=w.isSafari()&&x.isiOS()&&/safari/i.test(_)===!1,L=!q&&!U&&!H;return{isiPad:ue(T),isiPhone:ue(N),isTablet:ue(U),isPhone:ue(q),isTouch:ue(V),isAndroid:x.isAndroid,isiOS:x.isiOS,isWebView:ue(H),isDesktop:ue(L)}})(p,m,n,i);return{browser:m,os:p,deviceType:b}})(navigator.userAgent,E.from(navigator.userAgentData),av));const fl=()=>jm(),po=n=>{const r=ot((m=>{if(zr()&&_t(m.target)){const p=ot(m.target);if(Ws(p)&&(b=>_t(b.dom.shadowRoot))(p)&&m.composed&&m.composedPath){const b=m.composedPath();if(b)return Et(b)}}return E.from(m.target)})(n).getOr(n.target)),i=()=>n.stopPropagation(),l=()=>n.preventDefault(),u=bt(l,i);return((m,p,b,x,w,_,k)=>({target:m,x:p,y:b,stop:x,prevent:w,kill:_,raw:k}))(r,n.clientX,n.clientY,i,l,u,n)},rh=(n,r,i,l,u)=>{const m=((p,b)=>x=>{p(x)&&b(po(x))})(i,l);return n.dom.addEventListener(r,m,u),{unbind:Rn(Yi,n,r,m,u)}},Yi=(n,r,i,l)=>{n.dom.removeEventListener(r,i,l)},Fu=(n,r)=>{Ci(n).each(i=>{i.dom.insertBefore(r.dom,n.dom)})},qm=(n,r)=>{(l=>E.from(l.dom.nextSibling).map(ot))(n).fold(()=>{Ci(n).each(l=>{ys(l,r)})},l=>{Fu(l,r)})},ba=(n,r)=>{Fl(n).fold(()=>{ys(n,r)},i=>{n.dom.insertBefore(r.dom,i.dom)})},ys=(n,r)=>{n.dom.appendChild(r.dom)},Gm=(n,r)=>{xt(r,i=>{ys(n,i)})},ah=n=>{n.dom.textContent="",xt(Fn(n),r=>{Is(r)})},Is=n=>{const r=n.dom;r.parentNode!==null&&r.parentNode.removeChild(r)},cs=n=>{const r=n!==void 0?n.dom:document,i=r.body.scrollLeft||r.documentElement.scrollLeft,l=r.body.scrollTop||r.documentElement.scrollTop;return Xt(i,l)},An=(n,r,i)=>{const l=(i!==void 0?i.dom:document).defaultView;l&&l.scrollTo(n,r)},Yn=(n,r,i,l)=>({x:n,y:r,width:i,height:l,right:n+i,bottom:r+l}),xa=n=>{const r=n===void 0?window:n,i=r.document,l=cs(ot(i));return(u=>{const m=u===void 0?window:u;return fl().browser.isFirefox()?E.none():E.from(m.visualViewport)})(r).fold(()=>{const u=r.document.documentElement,m=u.clientWidth,p=u.clientHeight;return Yn(l.left,l.top,m,p)},u=>Yn(Math.max(u.pageLeft,l.left),Math.max(u.pageTop,l.top),u.width,u.height))},ri=()=>ot(document),Km=(n,r)=>n.view(r).fold(ue([]),i=>{const l=n.owner(i),u=Km(n,l);return[i].concat(u)});var ds=Object.freeze({__proto__:null,view:n=>{var r;return(n.dom===document?E.none():E.from((r=n.dom.defaultView)===null||r===void 0?void 0:r.frameElement)).map(ot)},owner:n=>Er(n)});const mg=n=>{const r=ri(),i=cs(r);return((u,m)=>{const p=m.owner(u),b=Km(m,p);return E.some(b)})(n,ds).fold(Rn(ko,n),u=>{const m=Kn(n),p=kn(u,(b,x)=>{const w=Kn(x);return{left:b.left+w.left,top:b.top+w.top}},{left:0,top:0});return Xt(p.left+m.left+i.left,p.top+m.top+i.top)})},Ts=(n,r,i,l)=>({x:n,y:r,width:i,height:l,right:n+i,bottom:r+l}),Gs=n=>{const r=ko(n),i=ha(n),l=Ue(n);return Ts(r.left,r.top,i,l)},Ls=n=>{const r=mg(n),i=ha(n),l=Ue(n);return Ts(r.left,r.top,i,l)},Ym=(n,r)=>{const i=Math.max(n.x,r.x),l=Math.max(n.y,r.y),u=Math.min(n.right,r.right),m=Math.min(n.bottom,r.bottom);return Ts(i,l,u-i,m-l)},Xn=()=>xa(window);var fg=tinymce.util.Tools.resolve("tinymce.ThemeManager");const ih=n=>{const r=m=>m(n),i=ue(n),l=()=>u,u={tag:!0,inner:n,fold:(m,p)=>p(n),isValue:Pt,isError:Ne,map:m=>mo.value(m(n)),mapError:l,bind:r,exists:r,forall:r,getOr:i,or:l,getOrThunk:i,orThunk:l,getOrDie:i,each:m=>{m(n)},toOptional:()=>E.some(n)};return u},gg=n=>{const r=()=>i,i={tag:!1,inner:n,fold:(l,u)=>l(n),isValue:Ne,isError:Pt,map:r,mapError:l=>mo.error(l(n)),bind:r,exists:Ne,forall:Pt,getOr:kt,or:kt,getOrThunk:_o,orThunk:_o,getOrDie:Bs(String(n)),each:Xe,toOptional:E.none};return i},mo={value:ih,error:gg,fromOption:(n,r)=>n.fold(()=>gg(r),ih)};var Ks;(function(n){n[n.Error=0]="Error",n[n.Value=1]="Value"})(Ks||(Ks={}));const pg=(n,r,i)=>n.stype===Ks.Error?r(n.serror):i(n.svalue),xd=n=>({stype:Ks.Value,svalue:n}),mb=n=>({stype:Ks.Error,serror:n}),Ul=xd,vd=mb,Bw=pg,fb=(n,r,i,l)=>({tag:"field",key:n,newKey:r,presence:i,prop:l}),Tc=(n,r,i)=>{switch(n.tag){case"field":return r(n.key,n.newKey,n.presence,n.prop);case"custom":return i(n.newKey,n.instantiator)}},iv=n=>(...r)=>{if(r.length===0)throw new Error("Can't merge zero objects");const i={};for(let l=0;l<r.length;l++){const u=r[l];for(const m in u)Dt(u,m)&&(i[m]=n(i[m],u[m]))}return i},X=iv((n,r)=>sg(n)&&sg(r)?X(n,r):r),Zl=iv((n,r)=>r),Qr=n=>({tag:"defaultedThunk",process:n}),yd=n=>Qr(ue(n)),gb=n=>({tag:"mergeWithThunk",process:n}),pb=n=>{const r=(l=>{const u=[],m=[];return xt(l,p=>{pg(p,b=>m.push(b),b=>u.push(b))}),{values:u,errors:m}})(n);return r.errors.length>0?(i=r.errors,bt(vd,hn)(i)):Ul(r.values);var i},Lo=n=>Pr(n)&&Ao(n).length>100?" removed due to size":JSON.stringify(n,null,2),ai=(n,r)=>vd([{path:n,getErrorInfo:r}]),wd=n=>({extract:(r,i)=>((l,u)=>l.stype===Ks.Error?u(l.serror):l)(n(i),l=>((u,m)=>ai(u,ue(m)))(r,l)),toString:ue("val")}),gl=wd(Ul),hb=(n,r,i,l)=>l(mt(n,r).getOrThunk(()=>i(n))),Hu=(n,r,i,l,u)=>{const m=b=>u.extract(r.concat([l]),b),p=b=>b.fold(()=>Ul(E.none()),x=>((w,_)=>w.stype===Ks.Value?{stype:Ks.Value,svalue:_(w.svalue)}:w)(u.extract(r.concat([l]),x),E.some));switch(n.tag){case"required":return((b,x,w,_)=>mt(x,w).fold(()=>((k,T,N)=>ai(k,()=>'Could not find valid *required* value for "'+T+'" in '+Lo(N)))(b,w,x),_))(r,i,l,m);case"defaultedThunk":return hb(i,l,n.process,m);case"option":return((b,x,w)=>w(mt(b,x)))(i,l,p);case"defaultedOptionThunk":return((b,x,w,_)=>_(mt(b,x).map(k=>k===!0?w(b):k)))(i,l,n.process,p);case"mergeWithThunk":return hb(i,l,ue({}),b=>{const x=X(n.process(i),b);return m(x)})}},Ei=n=>({extract:(r,i)=>n().extract(r,i),toString:()=>n().toString()}),lh=n=>Ao(Ll(n,_t)),ea=n=>{const r=St(n),i=kn(n,(l,u)=>Tc(u,m=>X(l,{[m]:!0}),ue(l)),{});return{extract:(l,u)=>{const m=Kr(u)?[]:lh(u),p=Jt(m,b=>!Zs(i,b));return p.length===0?r.extract(l,u):((b,x)=>ai(b,()=>"There are unsupported fields: ["+x.join(", ")+"] specified"))(l,p)},toString:r.toString}},St=n=>({extract:(r,i)=>((l,u,m)=>{const p={},b=[];for(const x of m)Tc(x,(w,_,k,T)=>{const N=Hu(k,l,u,w,T);Bw(N,B=>{b.push(...B)},B=>{p[_]=B})},(w,_)=>{p[w]=_(u)});return b.length>0?vd(b):Ul(p)})(r,i,n),toString:()=>`obj{
`+Ke(n,i=>Tc(i,(l,u,m,p)=>l+" -> "+p.toString(),(l,u)=>"state("+l+")")).join(`
`)+"}"}),va=n=>({extract:(r,i)=>{const l=Ke(i,(u,m)=>n.extract(r.concat(["["+m+"]"]),u));return pb(l)},toString:()=>"array("+n.toString()+")"}),Wl=(n,r)=>{const i=r!==void 0?r:kt;return{extract:(l,u)=>{const m=[];for(const p of n){const b=p.extract(l,u);if(b.stype===Ks.Value)return{stype:Ks.Value,svalue:i(b.svalue)};m.push(b)}return pb(m)},toString:()=>"oneOf("+Ke(n,l=>l.toString()).join(", ")+")"}},lv=(n,r)=>({extract:(i,l)=>{const u=Ao(l),m=((p,b)=>va(wd(n)).extract(p,b))(i,u);return((p,b)=>p.stype===Ks.Value?b(p.svalue):p)(m,p=>{const b=Ke(p,x=>fb(x,x,{tag:"required",process:{}},r));return St(b).extract(i,l)})},toString:()=>"setOf("+r.toString()+")"}),ch=bt(va,St),Mn=ue(gl),Oc=(n,r)=>wd(i=>{const l=typeof i;return n(i)?Ul(i):vd(`Expected type: ${r} but got: ${l}`)}),Xm=Oc(jo,"number"),Os=Oc(Co,"string"),Cd=Oc(Kr,"boolean"),dh=Oc(Ft,"function"),hg=n=>{if(Object(n)!==n)return!0;switch({}.toString.call(n).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(n).every(r=>hg(n[r]));default:return!1}},bb=wd(n=>hg(n)?Ul(n):vd("Expected value to be acceptable for sending via postMessage")),_d=(n,r)=>({extract:(i,l)=>mt(l,n).fold(()=>((u,m)=>ai(u,()=>'Choice schema did not contain choice key: "'+m+'"'))(i,n),u=>((m,p,b,x)=>mt(b,x).fold(()=>((w,_,k)=>ai(w,()=>'The chosen schema: "'+k+'" did not exist in branches: '+Lo(_)))(m,b,x),w=>w.extract(m.concat(["branch: "+x]),p)))(i,l,r,u)),toString:()=>"chooseOn("+n+"). Possible values: "+Ao(r)}),jl=n=>wd(r=>n(r).fold(vd,Ul)),Ac=(n,r)=>lv(i=>n(i).fold(mb,xd),r),Bn=(n,r,i)=>{return l=((u,m,p)=>((b,x)=>b.stype===Ks.Error?{stype:Ks.Error,serror:x(b.serror)}:b)(m.extract([u],p),b=>({input:p,errors:b})))(n,r,i),pg(l,mo.error,mo.value);var l},Xi=n=>n.fold(r=>{throw new Error(zu(r))},kt),ta=(n,r,i)=>Xi(Bn(n,r,i)),zu=n=>`Errors: 
`+(r=>{const i=r.length>10?r.slice(0,10).concat([{path:[],getErrorInfo:ue("... (only showing first ten failures)")}]):r;return Ke(i,l=>"Failed path: ("+l.path.join(" > ")+`)
`+l.getErrorInfo())})(n.errors).join(`
`)+`

Input object: `+Lo(n.input),ya=(n,r)=>_d(n,Ho(r,St)),cv=(n,r)=>((i,l)=>{const u=si(l);return{extract:(m,p)=>u().extract(m,p),toString:()=>u().toString()}})(0,r),ws=fb,$r=(n,r)=>({tag:"custom",newKey:n,instantiator:r}),Ti=n=>jl(r=>bo(n,r)?mo.value(r):mo.error(`Unsupported value: "${r}", choose one of "${n.join(", ")}".`)),Ee=n=>ws(n,n,{tag:"required",process:{}},Mn()),La=(n,r)=>ws(n,n,{tag:"required",process:{}},r),xb=n=>La(n,Xm),us=n=>La(n,Os),wa=(n,r)=>ws(n,n,{tag:"required",process:{}},Ti(r)),oa=n=>La(n,dh),Fa=(n,r)=>ws(n,n,{tag:"required",process:{}},St(r)),bg=(n,r)=>ws(n,n,{tag:"required",process:{}},ch(r)),gr=(n,r)=>ws(n,n,{tag:"required",process:{}},va(r)),zo=n=>ws(n,n,{tag:"option",process:{}},Mn()),ii=(n,r)=>ws(n,n,{tag:"option",process:{}},r),kd=n=>ii(n,Xm),pr=n=>ii(n,Os),uh=(n,r)=>ii(n,Ti(r)),ql=n=>ii(n,dh),Ur=(n,r)=>ii(n,va(r)),Ha=(n,r)=>ii(n,St(r)),fe=(n,r)=>ws(n,n,yd(r),Mn()),Ca=(n,r,i)=>ws(n,n,yd(r),i),xg=(n,r)=>Ca(n,r,Xm),Nc=(n,r)=>Ca(n,r,Os),As=(n,r,i)=>Ca(n,r,Ti(i)),Vn=(n,r)=>Ca(n,r,Cd),ms=(n,r)=>Ca(n,r,dh),Pn=(n,r,i)=>Ca(n,r,va(i)),vg=(n,r,i)=>Ca(n,r,St(i)),Ot=n=>{let r=n;return{get:()=>r,set:i=>{r=i}}},Zr=n=>{if(!Qa(n))throw new Error("cases must be an array");if(n.length===0)throw new Error("there must be at least one case");const r=[],i={};return xt(n,(l,u)=>{const m=Ao(l);if(m.length!==1)throw new Error("one and only one name per case");const p=m[0],b=l[p];if(i[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Qa(b))throw new Error("case arguments must be an array");r.push(p),i[p]=(...x)=>{const w=x.length;if(w!==b.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+b.length+" ("+b+"), got "+w);return{fold:(..._)=>{if(_.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+_.length);return _[u].apply(null,x)},match:_=>{const k=Ao(_);if(r.length!==k.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+`
Actual: `+k.join(","));if(!_c(r,T=>bo(k,T)))throw new Error("Not all branches were specified when using match. Specified: "+k.join(", ")+`
Required: `+r.join(", "));return _[p].apply(null,x)},log:_=>{console.log(_,{constructors:r,constructor:p,params:x})}}}}),i};Zr([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const li=(n,r)=>((i,l)=>({[i]:l}))(n,r),en=n=>(r=>{const i={};return xt(r,l=>{i[l.key]=l.value}),i})(n),_a=n=>Ft(n)?n:Ne,vb=(n,r,i)=>{let l=n.dom;const u=_a(i);for(;l.parentNode;){l=l.parentNode;const m=ot(l),p=r(m);if(p.isSome())return p;if(u(m))break}return E.none()},Vu=(n,r,i)=>{const l=r(n),u=_a(i);return l.orThunk(()=>u(n)?E.none():vb(n,r,u))},mh=(n,r)=>Go(n.element,r.event.target),yg={can:Pt,abort:Ne,run:Xe},Sd=n=>{if(!Zs(n,"can")&&!Zs(n,"abort")&&!Zs(n,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(n,null,2)+" does not have can, abort, or run!");return{...yg,...n}},ar=ue,Gl=ar("touchstart"),$u=ar("touchmove"),Kl=ar("touchend"),Uu=ar("touchcancel"),na=ar("mousedown"),wg=ar("mousemove"),Rc=ar("mouseout"),yb=ar("mouseup"),Ji=ar("mouseover"),Dc=ar("focusin"),Cg=ar("focusout"),sa=ar("keydown"),wb=ar("keyup"),pl=ar("input"),hl=ar("change"),ci=ar("click"),_g=ar("transitioncancel"),Jm=ar("transitionend"),Cb=ar("transitionstart"),hr=ar("selectstart"),os=n=>ue("alloy."+n),Ys={tap:os("tap")},za=os("focus"),Zu=os("blur.post"),dt=os("paste.post"),Va=os("receive"),ka=os("execute"),Qi=os("focus.item"),$a=Ys.tap,Wu=os("longpress"),kg=os("sandbox.close"),_b=os("typeahead.cancel"),bl=os("system.init"),kb=os("system.touchmove"),xl=os("system.touchend"),ju=os("system.scroll"),Ed=os("system.resize"),Le=os("system.attached"),Qm=os("system.detached"),Td=os("system.dismissRequested"),Mc=os("system.repositionRequested"),Bc=os("focusmanager.shifted"),Sg=os("slotcontainer.visibility"),Jn=os("system.external.element.scroll"),ef=os("change.tab"),Ua=os("dismiss.tab"),ln=os("highlight"),tf=os("dehighlight"),xo=(n,r)=>{Tg(n,n.element,r,{})},ut=(n,r,i)=>{Tg(n,n.element,r,i)},Od=n=>{xo(n,ka())},Eg=(n,r,i)=>{Tg(n,r,i,{})},Tg=(n,r,i,l)=>{const u={target:r,...l};n.getSystem().triggerEvent(i,r,u)},Za=(n,r,i,l)=>{n.getSystem().triggerEvent(i,r,l.event)},uo=n=>en(n),Ad=(n,r)=>({key:n,value:Sd({abort:r})}),Sb=n=>({key:n,value:Sd({run:(r,i)=>{i.event.prevent()}})}),Re=(n,r)=>({key:n,value:Sd({run:r})}),of=(n,r,i)=>({key:n,value:Sd({run:(l,u)=>{r.apply(void 0,[l,u].concat(i))}})}),qu=n=>r=>({key:n,value:Sd({run:(i,l)=>{mh(i,l)&&r(i,l)}})}),Gu=(n,r,i)=>((l,u)=>Re(l,(m,p)=>{m.getSystem().getByUid(u).each(b=>{Za(b,b.element,l,p)})}))(n,r.partUids[i]),Eb=(n,r)=>Re(n,(i,l)=>{const u=l.event,m=i.getSystem().getByDom(u.target).getOrThunk(()=>Vu(u.target,p=>i.getSystem().getByDom(p).toOptional(),Ne).getOr(i));r(i,m,l)}),Yl=n=>Re(n,(r,i)=>{i.cut()}),dv=n=>Re(n,(r,i)=>{i.stop()}),Ku=(n,r)=>qu(n)(r),cn=qu(Le()),Xl=qu(Qm()),uv=qu(bl()),Sa=(fh=ka(),n=>Re(fh,n)),Og=n=>n.dom.innerHTML,Wa=(n,r)=>{const i=Er(n).dom,l=ot(i.createDocumentFragment()),u=((m,p)=>{const b=(p||document).createElement("div");return b.innerHTML=m,Fn(ot(b))})(r,i);Gm(l,u),ah(n),ys(n,l)},nf=(n,r)=>ot(n.dom.cloneNode(r)),Jl=n=>(r=>{if(Sc(r))return"#shadow-root";{const i=(l=>nf(l,!1))(r);return(l=>{const u=Ia("div"),m=ot(l.dom.cloneNode(!0));return ys(u,m),Og(u)})(i)}})(n),sf=uo([((n,r)=>({key:n,value:Sd({can:(i,l)=>{const u=l.event,m=u.originator,p=u.target;return!((b,x,w)=>Go(x,b.element)&&!Go(x,w))(i,m,p)||(console.warn(za()+` did not get interpreted by the desired target. 
Originator: `+Jl(m)+`
Target: `+Jl(p)+`
Check the `+za()+" event handlers"),!1)}})}))(za())]);var fh,Yu=Object.freeze({__proto__:null,events:sf});let Xu=0;const lt=n=>{const r=new Date().getTime(),i=Math.floor(1e9*Math.random());return Xu++,n+"_"+i+Xu+String(r)},mv=ue("alloy-id-"),rf=ue("data-alloy-id"),Nd=mv(),fv=rf(),Ns=(n,r)=>{Object.defineProperty(n.dom,fv,{value:r,writable:!0})},Rd=n=>{const r=Ws(n)?n.dom[fv]:null;return E.from(r)},Fs=n=>lt(n),gv=kt,gh=n=>{const r=u=>`The component must be in a context to execute: ${u}`+(n?`
`+Jl(n().element)+" is not in context.":""),i=u=>()=>{throw new Error(r(u))},l=u=>()=>{console.warn(r(u))};return{debugInfo:ue("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:i("build"),buildOrPatch:i("buildOrPatch"),addToWorld:i("addToWorld"),removeFromWorld:i("removeFromWorld"),addToGui:i("addToGui"),removeFromGui:i("removeFromGui"),getByUid:i("getByUid"),getByDom:i("getByDom"),isConnected:Ne}},Ju=gh(),Dd=n=>Ke(n,r=>wi(r,"/*")?r.substring(0,r.length-2):r),di=(n,r)=>{const i=n.toString(),l=i.indexOf(")")+1,u=i.indexOf("("),m=i.substring(u+1,l-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:r,parameters:Dd(m)}),n},Or=lt("alloy-premade"),Ag=n=>(Object.defineProperty(n.element.dom,Or,{value:n.uid,writable:!0}),li(Or,n)),ph=n=>mt(n,Or),Cs=n=>((r,i)=>{const l=i.toString(),u=l.indexOf(")")+1,m=l.indexOf("("),p=l.substring(m+1,u-1).split(/,\s*/);return r.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Dd(p.slice(1))}),r})((r,...i)=>n(r.getApis(),r,...i),n),ja={init:()=>Xs({readState:ue("No State required")})},Xs=n=>n,Oi=(n,r)=>{const i={};return In(n,(l,u)=>{In(l,(m,p)=>{const b=mt(i,p).getOr([]);i[p]=b.concat([r(u,m)])})}),i},qa=n=>({classes:mr(n.classes)?[]:n.classes,attributes:mr(n.attributes)?{}:n.attributes,styles:mr(n.styles)?{}:n.styles}),hh=n=>n.cHandler,bh=(n,r)=>({name:n,handler:r}),Tb=(n,r)=>{const i={};return xt(n,l=>{i[l.name()]=l.handlers(r)}),i},Ng=(n,r,i)=>{const l=r[i];return l?((u,m,p,b)=>{try{const x=Fm(p,(w,_)=>{const k=w[m],T=_[m],N=b.indexOf(k),B=b.indexOf(T);if(N===-1)throw new Error("The ordering for "+u+" does not have an entry for "+k+`.
Order specified: `+JSON.stringify(b,null,2));if(B===-1)throw new Error("The ordering for "+u+" does not have an entry for "+T+`.
Order specified: `+JSON.stringify(b,null,2));return N<B?-1:B<N?1:0});return mo.value(x)}catch(x){return mo.error([x])}})("Event: "+i,"name",n,l).map(u=>(m=>({can:((x,w)=>(..._)=>I(x,(k,T)=>k&&(N=>N.can)(T).apply(void 0,_),!0))(m),abort:((x,w)=>(..._)=>I(x,(k,T)=>k||(N=>N.abort)(T).apply(void 0,_),!1))(m),run:(...x)=>{xt(m,w=>{w.run.apply(void 0,x)})}}))(Ke(u,m=>m.handler))):((u,m)=>mo.error(["The event ("+u+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ke(m,p=>p.name),null,2)]))(i,n)},pv=(n,r)=>((i,l)=>{const u=(p=>{const b=[],x=[];return xt(p,w=>{w.fold(_=>{b.push(_)},_=>{x.push(_)})}),{errors:b,values:x}})(i);return u.errors.length>0?(m=u.errors,mo.error(hn(m))):((p,b)=>p.length===0?mo.value(b):mo.value(X(b,Zl.apply(void 0,p))))(u.values,l);var m})(Dn(n,(i,l)=>(i.length===1?mo.value(i[0].handler):Ng(i,r,l)).map(u=>{const m=(b=>{const x=(w=>Ft(w)?{can:Pt,abort:Ne,run:w}:w)(b);return(w,_,...k)=>{const T=[w,_].concat(k);x.abort.apply(void 0,T)?_.stop():x.can.apply(void 0,T)&&x.run.apply(void 0,T)}})(u),p=i.length>1?Jt(r[l],b=>Yr(i,x=>x.name===b)).join(" > "):i[0].name;return li(l,((b,x)=>({handler:b,purpose:x}))(m,p))})),{}),Md="alloy.base.behaviour",Ob=St([ws("dom","dom",{tag:"required",process:{}},St([Ee("tag"),fe("styles",{}),fe("classes",[]),fe("attributes",{}),zo("value"),zo("innerHtml")])),Ee("components"),Ee("uid"),fe("events",{}),fe("apis",{}),ws("eventOrder","eventOrder",(Wr={[ka()]:["disabling",Md,"toggling","typeaheadevents"],[za()]:[Md,"focusing","keying"],[bl()]:[Md,"disabling","toggling","representing"],[pl()]:[Md,"representing","streaming","invalidating"],[Qm()]:[Md,"representing","item-events","tooltipping"],[na()]:["focusing",Md,"item-type-events"],[Gl()]:["focusing",Md,"item-type-events"],[Ji()]:["item-type-events","tooltipping"],[Va()]:["receiving","reflecting","tooltipping"]},gb(ue(Wr))),Mn()),zo("domModification")]),Pw=n=>n.events,xh=(n,r)=>{const i=js(n,r);return i===void 0||i===""?[]:i.split(" ")},Ql=n=>n.dom.classList!==void 0,Ab=n=>xh(n,"class"),ui=(n,r)=>((i,l,u)=>{const m=xh(i,l).concat([u]);return Kt(i,l,m.join(" ")),!0})(n,"class",r),Nb=(n,r)=>((i,l,u)=>{const m=Jt(xh(i,l),p=>p!==u);return m.length>0?Kt(i,l,m.join(" ")):Sn(i,l),!1})(n,"class",r),$n=(n,r)=>{Ql(n)?n.dom.classList.add(r):ui(n,r)},Rb=n=>{(Ql(n)?n.dom.classList:Ab(n)).length===0&&Sn(n,"class")},Un=(n,r)=>{Ql(n)?n.dom.classList.remove(r):Nb(n,r),Rb(n)},ra=(n,r)=>Ql(n)&&n.dom.classList.contains(r),Pc=(n,r)=>{xt(r,i=>{$n(n,i)})},Ai=(n,r)=>{xt(r,i=>{Un(n,i)})},vl=n=>Ql(n)?(r=>{const i=r.dom.classList,l=new Array(i.length);for(let u=0;u<i.length;u++){const m=i.item(u);m!==null&&(l[u]=m)}return l})(n):Ab(n),ec=n=>n.dom.value,Bd=(n,r)=>{if(r===void 0)throw new Error("Value.set was undefined");n.dom.value=r},vh=(n,r,i)=>{i.fold(()=>ys(n,r),l=>{Go(l,r)||(Fu(l,r),Is(l))})},Pd=(n,r,i)=>{const l=Ke(r,i),u=Fn(n);return xt(u.slice(l.length),Is),l},Id=(n,r,i,l)=>{const u=yn(n,r),m=l(i,u),p=((b,x,w)=>yn(b,x).map(_=>{if(w.exists(k=>!Go(k,_))){const k=w.map(Hr).getOr("span"),T=Ia(k);return Fu(_,T),T}return _}))(n,r,u);return vh(n,m.element,p),m},Db=(n,r)=>{const i=Ao(n),l=Ao(r),u=bn(l,i),m=((p,b)=>{const x={},w={};return fr(p,(_,k)=>!Dt(r,k)||_!==r[k],Il(x),Il(w)),{t:x,f:w}})(n).t;return{toRemove:u,toSet:m}},Iw=(n,r)=>{const i=r.filter(l=>Hr(l)===n.tag&&!(u=>u.innerHtml.isSome()&&u.domChildren.length>0)(n)&&!(u=>Dt(u.dom,Or))(l)).bind(l=>((u,m)=>{try{const p=((b,x)=>{const{class:w,style:_,...k}=(W=>I(W.dom.attributes,(G,Q)=>(G[Q.name]=Q.value,G),{}))(x),{toSet:T,toRemove:N}=Db(b.attributes,k),B=Lu(x),{toSet:V,toRemove:U}=Db(b.styles,B),q=vl(x),H=bn(q,b.classes),L=bn(b.classes,q);return xt(N,W=>Sn(x,W)),ki(x,T),Pc(x,L),Ai(x,H),xt(U,W=>Mo(x,W)),Ki(x,V),b.innerHtml.fold(()=>{const W=b.domChildren;((G,Q)=>{Pd(G,Q,(re,ge)=>{const Te=yn(G,ge);return vh(G,re,Te),re})})(x,W)},W=>{Wa(x,W)}),(()=>{const W=x,G=b.value.getOrUndefined();G!==ec(W)&&Bd(W,G??"")})(),x})(u,m);return E.some(p)}catch{return E.none()}})(n,l)).getOrThunk(()=>(l=>{const u=Ia(l.tag);ki(u,l.attributes),Pc(u,l.classes),Ki(u,l.styles),l.innerHtml.each(p=>Wa(u,p));const m=l.domChildren;return Gm(u,m),l.value.each(p=>{Bd(u,p)}),u})(n));return Ns(i,n.uid),i},Mb=n=>{const r=(i=>{const l=mt(i,"behaviours").getOr({});return qn(Ao(l),u=>{const m=l[u];return _t(m)?[m.me]:[]})})(n);return((i,l)=>((u,m)=>{const p=Ke(m,x=>Ha(x.name(),[Ee("config"),fe("state",ja)])),b=Bn("component.behaviours",St(p),u.behaviours).fold(x=>{throw new Error(zu(x)+`
Complete spec:
`+JSON.stringify(u,null,2))},kt);return{list:m,data:Ho(b,x=>{const w=x.map(_=>({config:_.config,state:_.state.init(_.config)}));return ue(w)})}})(i,l))(n,r)},Rg=(n,r)=>{const i=()=>T,l=Ot(Ju),u=Xi((N=>Bn("custom.definition",Ob,N))(n)),m=Mb(n),p=(N=>N.list)(m),b=(N=>N.data)(m),x=((N,B,V)=>{const U={...(q=N).dom,uid:q.uid,domChildren:Ke(q.components,re=>re.element)};var q;const H=(re=>re.domModification.fold(()=>qa({}),qa))(N),L={"alloy.base.modification":H},W=B.length>0?((re,ge,Te,Oe)=>{const Ae={...ge};xt(Te,lo=>{Ae[lo.name()]=lo.exhibit(re,Oe)});const tt=Oi(Ae,(lo,sn)=>({name:lo,modification:sn})),at=lo=>kn(lo,(sn,zn)=>({...zn.modification,...sn}),{}),ht=kn(tt.classes,(lo,sn)=>sn.modification.concat(lo),[]),Bt=at(tt.attributes),Lt=at(tt.styles);return qa({classes:ht,attributes:Bt,styles:Lt})})(V,L,B,U):H;return G=U,Q=W,{...G,attributes:{...G.attributes,...Q.attributes},styles:{...G.styles,...Q.styles},classes:G.classes.concat(Q.classes)};var G,Q})(u,p,b),w=Iw(x,r),_=((N,B,V)=>{const U={"alloy.base.behaviour":Pw(N)};return((q,H,L,W)=>{const G=((Q,re,ge)=>{const Te={...ge,...Tb(re,Q)};return Oi(Te,bh)})(q,L,W);return pv(G,H)})(V,N.eventOrder,B,U).getOrDie()})(u,p,b),k=Ot(u.components),T={uid:n.uid,getSystem:l.get,config:N=>{const B=b;return(Ft(B[N.name()])?B[N.name()]:()=>{throw new Error("Could not find "+N.name()+" in "+JSON.stringify(n,null,2))})()},hasConfigured:N=>Ft(b[N.name()]),spec:n,readState:N=>b[N]().map(B=>B.state.readState()).getOr("not enabled"),getApis:()=>u.apis,connect:N=>{l.set(N)},disconnect:()=>{l.set(gh(i))},element:w,syncComponents:()=>{const N=Fn(w),B=qn(N,V=>l.get().getByDom(V).fold(()=>[],Ie));k.set(B)},components:k.get,events:_};return T},Nn=n=>{const r=pd(n);return Bb({element:r})},Bb=n=>{const r=ta("external.component",ea([Ee("element"),zo("uid")]),n),i=Ot(gh()),l=r.uid.getOrThunk(()=>Fs("external"));Ns(r.element,l);const u={uid:l,getSystem:i.get,config:E.none,hasConfigured:Ne,connect:m=>{i.set(m)},disconnect:()=>{i.set(gh(()=>u))},getApis:()=>({}),element:r.element,spec:n,readState:ue("No state"),syncComponents:Xe,components:ue([]),events:{}};return Ag(u)},hv=Fs,yh=(n,r)=>ph(n).getOrThunk(()=>((i,l)=>{const{events:u,...m}=gv(i),p=((x,w)=>{const _=mt(x,"components").getOr([]);return w.fold(()=>Ke(_,Ar),k=>Ke(_,(T,N)=>yh(T,yn(k,N))))})(m,l),b={...m,events:{...Yu,...u},components:p};return mo.value(Rg(b,l))})((i=>Dt(i,"uid"))(n)?n:{uid:hv(""),...n},r).getOrDie()),Ar=n=>yh(n,E.none()),Jo=Ag;var Wr,Dg=(n,r,i,l,u)=>n(i,l)?E.some(i):Ft(u)&&u(i)?E.none():r(i,l,u);const wh=(n,r,i)=>{let l=n.dom;const u=Ft(i)?i:Ne;for(;l.parentNode;){l=l.parentNode;const m=ot(l);if(r(m))return E.some(m);if(u(m))break}return E.none()},bv=(n,r,i)=>Dg((l,u)=>u(l),wh,n,r,i),Ch=(n,r,i)=>bv(n,r,i).isSome(),Ni=(n,r,i)=>wh(n,l=>sh(l,r),i),Pb=(n,r)=>((i,l)=>qo(i.dom.childNodes,u=>{return m=ot(u),sh(m,r);var m}).map(ot))(n),Zn=(n,r)=>((i,l)=>{const u=l===void 0?document:l.dom;return Vm(u)?E.none():E.from(u.querySelector(i)).map(ot)})(r,n),Ri=(n,r,i)=>Dg((l,u)=>sh(l,u),Ni,n,r,i),Qu="aria-controls",af=()=>{const n=lt(Qu);return{id:n,link:r=>{Kt(r,Qu,n)},unlink:r=>{Sn(r,Qu)}}},Js=(n,r)=>Ch(r,i=>Go(i,n.element),Ne)||((i,l)=>(u=>bv(u,m=>{if(!Ws(m))return!1;const p=js(m,"id");return p!==void 0&&p.indexOf(Qu)>-1}).bind(m=>{const p=js(m,"id"),b=bs(m);return Zn(b,`[${Qu}="${p}"]`)}))(l).exists(u=>Js(i,u)))(n,r);var Ic;(function(n){n[n.STOP=0]="STOP",n[n.NORMAL=1]="NORMAL",n[n.LOGGING=2]="LOGGING"})(Ic||(Ic={}));const Mg=Ot({}),Ib=["alloy/data/Fields","alloy/debugging/Debugging"],Lb=(n,r,i)=>((l,u,m)=>{switch(mt(Mg.get(),l).orThunk(()=>{const p=Ao(Mg.get());return _r(p,b=>l.indexOf(b)>-1?E.some(Mg.get()[b]):E.none())}).getOr(Ic.NORMAL)){case Ic.NORMAL:return m(Lw());case Ic.LOGGING:{const p=((x,w)=>{const _=[],k=new Date().getTime();return{logEventCut:(T,N,B)=>{_.push({outcome:"cut",target:N,purpose:B})},logEventStopped:(T,N,B)=>{_.push({outcome:"stopped",target:N,purpose:B})},logNoParent:(T,N,B)=>{_.push({outcome:"no-parent",target:N,purpose:B})},logEventNoHandlers:(T,N)=>{_.push({outcome:"no-handlers-left",target:N})},logEventResponse:(T,N,B)=>{_.push({outcome:"response",purpose:B,target:N})},write:()=>{const T=new Date().getTime();bo(["mousemove","mouseover","mouseout",bl()],x)||console.log(x,{event:x,time:T-k,target:w.dom,sequence:Ke(_,N=>bo(["cut","stopped","response"],N.outcome)?"{"+N.purpose+"} "+N.outcome+" at ("+Jl(N.target)+")":N.outcome)})}}})(l,u),b=m(p);return p.write(),b}case Ic.STOP:return!0}})(n,r,i),Lw=ue({logEventCut:Xe,logEventStopped:Xe,logNoParent:Xe,logEventNoHandlers:Xe,logEventResponse:Xe,write:Xe}),em=ue([Ee("menu"),Ee("selectedMenu")]),tm=ue([Ee("item"),Ee("selectedItem")]);ue(St(tm().concat(em())));const Bg=ue(St(tm())),Ld=Fa("initSize",[Ee("numColumns"),Ee("numRows")]),Pg=()=>Fa("markers",[Ee("backgroundMenu")].concat(em()).concat(tm())),tc=n=>Fa("markers",Ke(n,Ee)),Ig=(n,r,i)=>((()=>{const l=new Error;if(l.stack!==void 0){const u=l.stack.split(`
`);qo(u,m=>m.indexOf("alloy")>0&&!Yr(Ib,p=>m.indexOf(p)>-1)).getOr("unknown")}})(),ws(r,r,i,jl(l=>mo.value((...u)=>l.apply(void 0,u))))),ho=n=>Ig(0,n,yd(Xe)),aa=n=>Ig(0,n,yd(E.none)),yl=n=>Ig(0,n,{tag:"required",process:{}}),Fb=n=>Ig(0,n,{tag:"required",process:{}}),wn=(n,r)=>$r(n,ue(r)),Fw=n=>$r(n,kt),Hb=ue(Ld),br=(n,r,i,l,u,m,p,b=!1)=>({x:n,y:r,bubble:i,direction:l,placement:u,restriction:m,label:`${p}-${u}`,alwaysFit:b}),Lc=Zr([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),_h=Lc.southeast,kh=Lc.southwest,zb=Lc.northeast,Vb=Lc.northwest,xv=Lc.south,Sh=Lc.north,vv=Lc.east,Lg=Lc.west,Fc=(n,r,i,l)=>{const u=n+r;return u>l?i:u<i?l:u},mi=(n,r,i)=>Math.min(Math.max(n,r),i),xr=(n,r)=>no(["left","right","top","bottom"],i=>mt(r,i).map(l=>((u,m)=>{switch(m){case 1:return u.x;case 0:return u.x+u.width;case 2:return u.y;case 3:return u.y+u.height}})(n,l))),Fd="layout",Hd=n=>n.x,yv=(n,r)=>n.x+n.width/2-r.width/2,wv=(n,r)=>n.x+n.width-r.width,Eh=(n,r)=>n.y-r.height,Fg=n=>n.y+n.height,Th=(n,r)=>n.y+n.height/2-r.height/2,ir=(n,r,i)=>br(Hd(n),Fg(n),i.southeast(),_h(),"southeast",xr(n,{left:1,top:3}),Fd),ns=(n,r,i)=>br(wv(n,r),Fg(n),i.southwest(),kh(),"southwest",xr(n,{right:0,top:3}),Fd),lr=(n,r,i)=>br(Hd(n),Eh(n,r),i.northeast(),zb(),"northeast",xr(n,{left:1,bottom:2}),Fd),dn=(n,r,i)=>br(wv(n,r),Eh(n,r),i.northwest(),Vb(),"northwest",xr(n,{right:0,bottom:2}),Fd),ia=(n,r,i)=>br(yv(n,r),Eh(n,r),i.north(),Sh(),"north",xr(n,{bottom:2}),Fd),Wn=(n,r,i)=>br(yv(n,r),Fg(n),i.south(),xv(),"south",xr(n,{top:3}),Fd),cr=(n,r,i)=>br((l=>l.x+l.width)(n),Th(n,r),i.east(),vv(),"east",xr(n,{left:0}),Fd),Hg=(n,r,i)=>br(((l,u)=>l.x-u.width)(n,r),Th(n,r),i.west(),Lg(),"west",xr(n,{right:1}),Fd),$b=()=>[ir,ns,lr,dn,Wn,ia,cr,Hg],lf=()=>[ns,ir,dn,lr,Wn,ia,cr,Hg],Ub=()=>[lr,dn,ir,ns,ia,Wn],zd=()=>[dn,lr,ns,ir,ia,Wn],Oh=()=>[ir,ns,lr,dn,Wn,ia],zg=()=>[ns,ir,dn,lr,Wn,ia];var Hw=Object.freeze({__proto__:null,events:n=>uo([Re(Va(),(r,i)=>{const l=n.channels,u=Ao(l),m=i,p=((b,x)=>x.universal?b:Jt(b,w=>bo(x.channels,w)))(u,m);xt(p,b=>{const x=l[b],w=x.schema,_=ta("channel["+b+`] data
Receiver: `+Jl(r.element),w,m.data);x.onReceive(r,_)})})])}),zw=[La("channels",Ac(mo.value,ea([yl("onReceive"),fe("schema",Mn())])))];const cf=(n,r,i)=>uv((l,u)=>{i(l,n,r)}),df=n=>({key:n,value:void 0}),Di=(n,r,i,l,u,m,p)=>{const b=_=>Zs(_,i)?_[i]():E.none(),x=Ho(u,(_,k)=>((T,N,B)=>((V,U,q)=>{const H=q.toString(),L=H.indexOf(")")+1,W=H.indexOf("("),G=H.substring(W+1,L-1).split(/,\s*/);return V.toFunctionAnnotation=()=>({name:U,parameters:Dd(G.slice(0,1).concat(G.slice(3)))}),V})((V,...U)=>{const q=[V].concat(U);return V.config({name:ue(T)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+T+". Using API: "+B)},H=>{const L=Array.prototype.slice.call(q,1);return N.apply(void 0,[V,H.config,H.state].concat(L))})},B,N))(i,_,k)),w={...Ho(m,(_,k)=>di(_,k)),...x,revoke:Rn(df,i),config:_=>{const k=ta(i+"-config",n,_);return{key:i,value:{config:k,me:w,configAsRaw:si(()=>ta(i+"-config",n,_)),initialConfig:_,state:p}}},schema:ue(r),exhibit:(_,k)=>Fr(b(_),mt(l,"exhibit"),(T,N)=>N(k,T.config,T.state)).getOrThunk(()=>qa({})),name:ue(i),handlers:_=>b(_).map(k=>mt(l,"events").getOr(()=>({}))(k.config,k.state)).getOr({})};return w},Ve=n=>en(n),Zb=ea([Ee("fields"),Ee("name"),fe("active",{}),fe("apis",{}),fe("state",ja),fe("extra",{})]),Hs=n=>{const r=ta("Creating behaviour: "+n.name,Zb,n);return((i,l,u,m,p,b)=>{const x=ea(i),w=Ha(l,[(_=i,ii("config",ea(_)))]);var _;return Di(x,w,l,u,m,p,b)})(r.fields,r.name,r.active,r.apis,r.extra,r.state)},Vg=ea([Ee("branchKey"),Ee("branches"),Ee("name"),fe("active",{}),fe("apis",{}),fe("state",ja),fe("extra",{})]),Vd=n=>{const r=ta("Creating behaviour: "+n.name,Vg,n);return((i,l,u,m,p,b)=>{const x=i,w=Ha(l,[ii("config",i)]);return Di(x,w,l,u,m,p,b)})(ya(r.branchKey,r.branches),r.name,r.active,r.apis,r.extra,r.state)},oc=ue(void 0),Ea=Hs({fields:zw,name:"receiving",active:Hw});var Vw=Object.freeze({__proto__:null,exhibit:(n,r)=>qa({classes:[],styles:r.useFixed()?{}:{position:"relative"}})});const Ga=(n,r=!1)=>n.dom.focus({preventScroll:r}),Wb=n=>n.dom.blur(),$g=n=>{const r=bs(n).dom;return n.dom===r.activeElement},Mi=(n=ri())=>E.from(n.dom.activeElement).map(ot),Bi=n=>Mi(bs(n)).filter(r=>n.dom.contains(r.dom)),uf=(n,r)=>{const i=bs(r),l=Mi(i).bind(m=>{const p=b=>Go(m,b);return p(r)?E.some(r):((b,x)=>{const w=_=>{for(let k=0;k<_.childNodes.length;k++){const T=ot(_.childNodes[k]);if(x(T))return E.some(T);const N=w(_.childNodes[k]);if(N.isSome())return N}return E.none()};return w(b.dom)})(r,p)}),u=n(r);return l.each(m=>{Mi(i).filter(p=>Go(p,m)).fold(()=>{Ga(m)},Xe)}),u},Ka=(n,r,i,l,u)=>{const m=p=>p+"px";return{position:n,left:r.map(m),top:i.map(m),right:l.map(m),bottom:u.map(m)}},jb=(n,r)=>{Vl(n,(i=>({...i,position:E.some(i.position)}))(r))},Hc=Zr([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Ug=(n,r,i,l,u,m)=>{const p=r.rect,b=p.x-i,x=p.y-l,w=u-(b+p.width),_=m-(x+p.height),k=E.some(b),T=E.some(x),N=E.some(w),B=E.some(_),V=E.none();return r.direction.fold(()=>Ka(n,k,T,V,V),()=>Ka(n,V,T,N,V),()=>Ka(n,k,V,V,B),()=>Ka(n,V,V,N,B),()=>Ka(n,k,T,V,V),()=>Ka(n,k,V,V,B),()=>Ka(n,k,T,V,V),()=>Ka(n,V,T,N,V))},qb=(n,r)=>n.fold(()=>{const i=r.rect;return Ka("absolute",E.some(i.x),E.some(i.y),E.none(),E.none())},(i,l,u,m)=>Ug("absolute",r,i,l,u,m),(i,l,u,m)=>Ug("fixed",r,i,l,u,m)),Ah=(n,r)=>{const i=Rn(mg,r),l=n.fold(i,i,()=>{const p=cs();return mg(r).translate(-p.left,-p.top)}),u=ha(r),m=Ue(r);return Ts(l.left,l.top,u,m)},$w=(n,r)=>r.fold(()=>n.fold(Xn,Xn,Ts),i=>n.fold(ue(i),ue(i),()=>{const l=Gb(n,i.x,i.y);return Ts(l.left,l.top,i.width,i.height)})),Gb=(n,r,i)=>{const l=Xt(r,i);return n.fold(ue(l),ue(l),()=>{const u=cs();return l.translate(-u.left,-u.top)})};Hc.none;const Kb=Hc.relative,Yb=Hc.fixed,Zg="data-alloy-placement",Cv=n=>qs(n,Zg),$d=Zr([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),vr=(n,r,i,l)=>{const u=n.bubble,m=u.offset,p=((W,G,Q)=>{const re=(tt,at)=>G[tt].map(ht=>{const Bt=tt==="top"||tt==="bottom",Lt=Bt?Q.top:Q.left,lo=(tt==="left"||tt==="top"?Math.max:Math.min)(ht,at)+Lt;return Bt?mi(lo,W.y,W.bottom):mi(lo,W.x,W.right)}).getOr(at),ge=re("left",W.x),Te=re("top",W.y),Oe=re("right",W.right),Ae=re("bottom",W.bottom);return Ts(ge,Te,Oe-ge,Ae-Te)})(l,n.restriction,m),b=n.x+m.left,x=n.y+m.top,w=Ts(b,x,r,i),{originInBounds:_,sizeInBounds:k,visibleW:T,visibleH:N}=((W,G)=>{const{x:Q,y:re,right:ge,bottom:Te}=G,{x:Oe,y:Ae,right:tt,bottom:at,width:ht,height:Bt}=W;return{originInBounds:Oe>=Q&&Oe<=ge&&Ae>=re&&Ae<=Te,sizeInBounds:tt<=ge&&tt>=Q&&at<=Te&&at>=re,visibleW:Math.min(ht,Oe>=Q?ge-Oe:tt-Q),visibleH:Math.min(Bt,Ae>=re?Te-Ae:at-re)}})(w,p),B=_&&k,V=B?w:((W,G)=>{const{x:Q,y:re,right:ge,bottom:Te}=G,{x:Oe,y:Ae,width:tt,height:at}=W,ht=Math.max(Q,ge-tt),Bt=Math.max(re,Te-at),Lt=mi(Oe,Q,ht),lo=mi(Ae,re,Bt),sn=Math.min(Lt+tt,ge)-Lt,zn=Math.min(lo+at,Te)-lo;return Ts(Lt,lo,sn,zn)})(w,p),U=V.width>0&&V.height>0,{maxWidth:q,maxHeight:H}=((W,G,Q)=>{const re=ue(G.bottom-Q.y),ge=ue(Q.bottom-G.y),Te=((at,ht,Bt,Lt)=>at.fold(ht,ht,Lt,Lt,ht,Lt,Bt,Bt))(W,ge,ge,re),Oe=ue(G.right-Q.x),Ae=ue(Q.right-G.x);return{maxWidth:((at,ht,Bt,Lt)=>at.fold(ht,Lt,ht,Lt,Bt,Bt,ht,Lt))(W,Ae,Ae,Oe),maxHeight:Te}})(n.direction,V,l),L={rect:V,maxHeight:H,maxWidth:q,direction:n.direction,placement:n.placement,classes:{on:u.classesOn,off:u.classesOff},layout:n.label,testY:x};return B||n.alwaysFit?$d.fit(L):$d.nofit(L,T,N,U)},Ud=n=>{const r=Ot(E.none()),i=()=>r.get().each(n);return{clear:()=>{i(),r.set(E.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:l=>{i(),r.set(E.some(l))}}},nc=()=>Ud(n=>n.unbind()),En=()=>{const n=Ud(Xe);return{...n,on:r=>n.get().each(r)}},Zd=Pt,yr=(n,r,i)=>((l,u,m,p)=>rh(l,u,m,p,!1))(n,r,Zd,i),Wg=(n,r,i)=>((l,u,m,p)=>rh(l,u,m,p,!0))(n,r,Zd,i),Nh=po,mf=["top","bottom","right","left"],zc="data-alloy-transition-timer",Xb=(n,r,i,l,u,m)=>{const p=((b,x,w)=>w.exists(_=>{const k=b.mode;return k==="all"||_[k]!==x[k]}))(l,u,m);if(p||((b,x)=>((w,_)=>_c(_,k=>ra(w,k)))(b,x.classes))(n,l)){Ht(n,"position",i.position);const b=Ah(r,n),x=qb(r,{...u,rect:b}),w=no(mf,_=>x[_]);((_,k)=>{const T=N=>parseFloat(N).toFixed(3);return qi(k,(N,B)=>!((V,U,q=ce)=>Fr(V,U,q).getOr(V.isNone()&&U.isNone()))(_[B].map(T),N.map(T))).isSome()})(i,w)&&(Vl(n,w),p&&((_,k)=>{Pc(_,k.classes),qs(_,zc).each(T=>{clearTimeout(parseInt(T,10)),Sn(_,zc)}),((T,N)=>{const B=nc(),V=nc();let U;const q=G=>{var Q;const re=(Q=G.raw.pseudoElement)!==null&&Q!==void 0?Q:"";return Go(G.target,T)&&an(re)&&bo(mf,G.raw.propertyName)},H=G=>{if(Pl(G)||q(G)){B.clear(),V.clear();const Q=G==null?void 0:G.raw.type;(Pl(Q)||Q===Jm())&&(clearTimeout(U),Sn(T,zc),Ai(T,N.classes))}},L=yr(T,Cb(),G=>{q(G)&&(L.unbind(),B.set(yr(T,Jm(),H)),V.set(yr(T,_g(),H)))}),W=(G=>{const Q=Oe=>{const Ae=Gn(G,Oe).split(/\s*,\s*/);return Jt(Ae,kc)},re=Oe=>{if(Co(Oe)&&/^[\d.]+/.test(Oe)){const Ae=parseFloat(Oe);return wi(Oe,"ms")?Ae:1e3*Ae}return 0},ge=Q("transition-delay"),Te=Q("transition-duration");return I(Te,(Oe,Ae,tt)=>{const at=re(ge[tt])+re(Ae);return Math.max(Oe,at)},0)})(T);requestAnimationFrame(()=>{U=setTimeout(H,W+17),Kt(T,zc,U)})})(_,k)})(n,l),z(n))}else Ai(n,l.classes)},Vc=(n,r)=>{((i,l)=>{const u=de.max(i,l,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);Ht(i,"max-height",u+"px")})(n,Math.floor(r))},om=ue((n,r)=>{Vc(n,r),Ki(n,{"overflow-x":"hidden","overflow-y":"auto"})}),nm=ue((n,r)=>{Vc(n,r)}),Rh=(n,r,i)=>n[r]===void 0?i:n[r],Dh=(n,r,i,l)=>{const u=((m,p,b,x)=>{Mo(p,"max-height"),Mo(p,"max-width");const w={width:ha(_=p),height:Ue(_)};var _;return((k,T,N,B,V,U)=>{const q=B.width,H=B.height,L=(W,G,Q,re,ge)=>{const Te=W(N,B,V,k,U),Oe=vr(Te,q,H,U);return Oe.fold(ue(Oe),(Ae,tt,at,ht)=>(ge===ht?at>re||tt>Q:!ge&&ht)?Oe:$d.nofit(G,Q,re,ge))};return I(T,(W,G)=>{const Q=Rn(L,G);return W.fold(ue(W),Q)},$d.nofit({rect:N,maxHeight:B.height,maxWidth:B.width,direction:_h(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:N.y},-1,-1,!1)).fold(kt,kt)})(p,x.preference,m,w,b,x.bounds)})(n,r,i,l);return((m,p,b)=>{const x=qb(b.origin,p);b.transition.each(w=>{Xb(m,b.origin,x,w,p,b.lastPlacement)}),jb(m,x)})(r,u,l),((m,p)=>{((b,x)=>{Kt(b,Zg,x)})(m,p.placement)})(r,u),((m,p)=>{const b=p.classes;Ai(m,b.off),Pc(m,b.on)})(r,u),((m,p,b)=>{(0,b.maxHeightFunction)(m,p.maxHeight)})(r,u,l),((m,p,b)=>{(0,b.maxWidthFunction)(m,p.maxWidth)})(r,u,l),{layout:u.layout,placement:u.placement}},un=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],wl=(n,r,i,l=1)=>{const u=n*l,m=r*l,p=x=>mt(i,x).getOr([]),b=(x,w,_)=>{const k=bn(un,_);return{offset:Xt(x,w),classesOn:qn(_,p),classesOff:qn(k,p)}};return{southeast:()=>b(-n,r,["top","alignLeft"]),southwest:()=>b(n,r,["top","alignRight"]),south:()=>b(-n/2,r,["top","alignCentre"]),northeast:()=>b(-n,-r,["bottom","alignLeft"]),northwest:()=>b(n,-r,["bottom","alignRight"]),north:()=>b(-n/2,-r,["bottom","alignCentre"]),east:()=>b(n,-r/2,["valignCentre","left"]),west:()=>b(-n,-r/2,["valignCentre","right"]),insetNortheast:()=>b(u,m,["top","alignLeft","inset"]),insetNorthwest:()=>b(-u,m,["top","alignRight","inset"]),insetNorth:()=>b(-u/2,m,["top","alignCentre","inset"]),insetSoutheast:()=>b(u,-m,["bottom","alignLeft","inset"]),insetSouthwest:()=>b(-u,-m,["bottom","alignRight","inset"]),insetSouth:()=>b(-u/2,-m,["bottom","alignCentre","inset"]),insetEast:()=>b(-u,-m/2,["valignCentre","right","inset"]),insetWest:()=>b(u,-m/2,["valignCentre","left","inset"])}},jg=()=>wl(0,0,{}),$c=kt,sc=(n,r)=>i=>_v(i)==="rtl"?r:n,_v=n=>Gn(n,"direction")==="rtl"?"rtl":"ltr";var jr;(function(n){n.TopToBottom="toptobottom",n.BottomToTop="bottomtotop"})(jr||(jr={}));const _s="data-alloy-vertical-dir",kv=n=>Ch(n,r=>Ws(r)&&js(r,"data-alloy-vertical-dir")===jr.BottomToTop),Uc=()=>Ha("layouts",[Ee("onLtr"),Ee("onRtl"),zo("onBottomLtr"),zo("onBottomRtl")]),qg=(n,r,i,l,u,m,p)=>{const b=p.map(kv).getOr(!1),x=r.layouts.map(T=>T.onLtr(n)),w=r.layouts.map(T=>T.onRtl(n)),_=b?r.layouts.bind(T=>T.onBottomLtr.map(N=>N(n))).or(x).getOr(u):x.getOr(i),k=b?r.layouts.bind(T=>T.onBottomRtl.map(N=>N(n))).or(w).getOr(m):w.getOr(l);return sc(_,k)(n)};var Wd=[Ee("hotspot"),zo("bubble"),fe("overrides",{}),Uc(),wn("placement",(n,r,i)=>{const l=r.hotspot,u=Ah(i,l.element),m=qg(n.element,r,Oh(),zg(),Ub(),zd(),E.some(r.hotspot.element));return E.some($c({anchorBox:u,bubble:r.bubble.getOr(jg()),overrides:r.overrides,layouts:m}))})],Mh=[Ee("x"),Ee("y"),fe("height",0),fe("width",0),fe("bubble",jg()),fe("overrides",{}),Uc(),wn("placement",(n,r,i)=>{const l=Gb(i,r.x,r.y),u=Ts(l.left,l.top,r.width,r.height),m=qg(n.element,r,$b(),lf(),$b(),lf(),E.none());return E.some($c({anchorBox:u,bubble:r.bubble,overrides:r.overrides,layouts:m}))})];const Bh=Zr([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Jb=n=>n.fold(kt,(r,i,l)=>r.translate(-i,-l)),U4=n=>n.fold(kt,kt),ff=n=>I(n,(r,i)=>r.translate(i.left,i.top),Xt(0,0)),Qb=n=>{const r=Ke(n,U4);return ff(r)},Sv=Bh.screen,Z4=Bh.absolute,Ph=(n,r,i)=>{const l=Er(n.element),u=cs(l),m=((p,b,x)=>{const w=$m(x.root).dom;return E.from(w.frameElement).map(ot).filter(_=>{const k=Er(_),T=Er(p.element);return Go(k,T)}).map(ko)})(n,0,i).getOr(u);return Z4(m,u.left,u.top)},Ta=(n,r,i,l)=>{const u=Sv(Xt(n,r));return E.some(((m,p,b)=>({point:m,width:p,height:b}))(u,i,l))},Nr=(n,r,i,l,u)=>n.map(m=>{const p=[r,m.point],b=(x=()=>Qb(p),w=()=>Qb(p),_=()=>(L=>{const W=Ke(L,Jb);return ff(W)})(p),l.fold(x,w,_));var x,w,_;const k=(V=b.left,U=b.top,q=m.width,H=m.height,{x:V,y:U,width:q,height:H}),T=i.showAbove?Ub():Oh(),N=i.showAbove?zd():zg(),B=qg(u,i,T,N,T,N,E.none());var V,U,q,H;return $c({anchorBox:k,bubble:i.bubble.getOr(jg()),overrides:i.overrides,layouts:B})});var Ih=[Ee("node"),Ee("root"),zo("bubble"),Uc(),fe("overrides",{}),fe("showAbove",!1),wn("placement",(n,r,i)=>{const l=Ph(n,0,r);return r.node.filter(Ps).bind(u=>{const m=u.dom.getBoundingClientRect(),p=Ta(m.left,m.top,m.width,m.height),b=r.node.getOr(n.element);return Nr(p,l,r,i,b)})})];const Lh=(n,r,i,l)=>({start:n,soffset:r,finish:i,foffset:l}),Cl=Zr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Gg=(Cl.before,Cl.on,Cl.after,n=>n.fold(kt,kt,kt)),Pi=Zr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),rc={domRange:Pi.domRange,relative:Pi.relative,exact:Pi.exact,exactFromRange:n=>Pi.exact(n.start,n.soffset,n.finish,n.foffset),getWin:n=>{const r=(i=>i.match({domRange:l=>ot(l.startContainer),relative:(l,u)=>Gg(l),exact:(l,u,m,p)=>l}))(n);return $m(r)},range:Lh},jd=(n,r,i)=>{const l=n.document.createRange();var u;return u=l,r.fold(m=>{u.setStartBefore(m.dom)},(m,p)=>{u.setStart(m.dom,p)},m=>{u.setStartAfter(m.dom)}),((m,p)=>{p.fold(b=>{m.setEndBefore(b.dom)},(b,x)=>{m.setEnd(b.dom,x)},b=>{m.setEndAfter(b.dom)})})(l,i),l},Zc=(n,r,i,l,u)=>{const m=n.document.createRange();return m.setStart(r.dom,i),m.setEnd(l.dom,u),m},sm=n=>({left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}),_l=Zr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),gf=(n,r,i)=>r(ot(i.startContainer),i.startOffset,ot(i.endContainer),i.endOffset),Kg=(n,r)=>((i,l)=>{const u=((m,p)=>p.match({domRange:b=>({ltr:ue(b),rtl:E.none}),relative:(b,x)=>({ltr:si(()=>jd(m,b,x)),rtl:si(()=>E.some(jd(m,x,b)))}),exact:(b,x,w,_)=>({ltr:si(()=>Zc(m,b,x,w,_)),rtl:si(()=>E.some(Zc(m,w,_,b,x)))})}))(i,l);return((m,p)=>{const b=p.ltr();return b.collapsed?p.rtl().filter(x=>x.collapsed===!1).map(x=>_l.rtl(ot(x.endContainer),x.endOffset,ot(x.startContainer),x.startOffset)).getOrThunk(()=>gf(0,_l.ltr,b)):gf(0,_l.ltr,b)})(0,u)})(n,r).match({ltr:(i,l,u,m)=>{const p=n.document.createRange();return p.setStart(i.dom,l),p.setEnd(u.dom,m),p},rtl:(i,l,u,m)=>{const p=n.document.createRange();return p.setStart(u.dom,m),p.setEnd(i.dom,l),p}});_l.ltr,_l.rtl;const Fh=(n,r,i)=>Jt(((l,u)=>{const m=Ft(u)?u:Ne;let p=l.dom;const b=[];for(;p.parentNode!==null&&p.parentNode!==void 0;){const x=p.parentNode,w=ot(x);if(b.push(w),m(w)===!0)break;p=x}return b})(n,i),r),qr=(n,r)=>((i,l)=>{const u=l===void 0?document:l.dom;return Vm(u)?[]:Ke(u.querySelectorAll(i),ot)})(r,n),e0=n=>{if(n.rangeCount>0){const r=n.getRangeAt(0),i=n.getRangeAt(n.rangeCount-1);return E.some(Lh(ot(r.startContainer),r.startOffset,ot(i.endContainer),i.endOffset))}return E.none()},t0=n=>{if(n.anchorNode===null||n.focusNode===null)return e0(n);{const r=ot(n.anchorNode),i=ot(n.focusNode);return((l,u,m,p)=>{const b=((w,_,k,T)=>{const N=Er(w).dom.createRange();return N.setStart(w.dom,_),N.setEnd(k.dom,T),N})(l,u,m,p),x=Go(l,m)&&u===p;return b.collapsed&&!x})(r,n.anchorOffset,i,n.focusOffset)?E.some(Lh(r,n.anchorOffset,i,n.focusOffset)):e0(n)}},Hh=(n,r)=>(i=>{const l=i.getClientRects(),u=l.length>0?l[0]:i.getBoundingClientRect();return u.width>0||u.height>0?E.some(u).map(sm):E.none()})(Kg(n,r)),Uw=((n,r)=>{const i=l=>n(l)?E.from(l.dom.nodeValue):E.none();return{get:l=>{if(!n(l))throw new Error("Can only get text value of a text node");return i(l).getOr("")},getOption:i,set:(l,u)=>{if(!n(l))throw new Error("Can only set raw text value of a text node");l.dom.nodeValue=u}}})(pa),zh=(n,r)=>({element:n,offset:r}),o0=(n,r)=>pa(n)?zh(n,r):((i,l)=>{const u=Fn(i);if(u.length===0)return zh(i,l);if(l<u.length)return zh(u[l],0);{const m=u[u.length-1],p=pa(m)?(b=>Uw.get(b))(m).length:Fn(m).length;return zh(m,p)}})(n,r),pf=n=>n.foffset!==void 0,Wc=(n,r)=>r.getSelection.getOrThunk(()=>()=>(i=>(l=>E.from(l.getSelection()))(i).filter(l=>l.rangeCount>0).bind(t0))(n))().map(i=>{if(pf(i)){const l=o0(i.start,i.soffset),u=o0(i.finish,i.foffset);return rc.range(l.element,l.offset,u.element,u.offset)}return i});var Ev=[zo("getSelection"),Ee("root"),zo("bubble"),Uc(),fe("overrides",{}),fe("showAbove",!1),wn("placement",(n,r,i)=>{const l=$m(r.root).dom,u=Ph(n,0,r),m=Wc(l,r).bind(b=>{if(pf(b))return((w,_)=>(k=>{const T=k.getBoundingClientRect();return T.width>0||T.height>0?E.some(T).map(sm):E.none()})(Kg(w,_)))(l,rc.exactFromRange(b)).orThunk(()=>{const w=pd("\uFEFF");Fu(b.start,w);const _=Hh(l,rc.exact(w,0,w,1));return Is(w),_}).bind(w=>Ta(w.left,w.top,w.width,w.height));{const x=Ho(b,_=>_.dom.getBoundingClientRect()),w={left:Math.min(x.firstCell.left,x.lastCell.left),right:Math.max(x.firstCell.right,x.lastCell.right),top:Math.min(x.firstCell.top,x.lastCell.top),bottom:Math.max(x.firstCell.bottom,x.lastCell.bottom)};return Ta(w.left,w.top,w.right-w.left,w.bottom-w.top)}}),p=Wc(l,r).bind(b=>pf(b)?Ws(b.start)?E.some(b.start):rr(b.start):E.some(b.firstCell)).getOr(n.element);return Nr(m,u,r,i,p)})];const Vh="link-layout",$h=n=>n.x+n.width,jc=(n,r)=>n.x-r.width,qd=(n,r)=>n.y-r.height+n.height,Uh=n=>n.y,Yg=(n,r,i)=>br($h(n),Uh(n),i.southeast(),_h(),"southeast",xr(n,{left:0,top:2}),Vh),Gd=(n,r,i)=>br(jc(n,r),Uh(n),i.southwest(),kh(),"southwest",xr(n,{right:1,top:2}),Vh),Kd=(n,r,i)=>br($h(n),qd(n,r),i.northeast(),zb(),"northeast",xr(n,{left:0,bottom:3}),Vh),rm=(n,r,i)=>br(jc(n,r),qd(n,r),i.northwest(),Vb(),"northwest",xr(n,{right:1,bottom:3}),Vh),kl=()=>[Yg,Gd,Kd,rm],Yd=()=>[Gd,Yg,rm,Kd];var Zw=[Ee("item"),Uc(),fe("overrides",{}),wn("placement",(n,r,i)=>{const l=Ah(i,r.item.element),u=qg(n.element,r,kl(),Yd(),kl(),Yd(),E.none());return E.some($c({anchorBox:l,bubble:jg(),overrides:r.overrides,layouts:u}))})],Xg=ya("type",{selection:Ev,node:Ih,hotspot:Wd,submenu:Zw,makeshift:Mh});const Xd=[gr("classes",Os),As("mode","all",["all","layout","placement"])],hf=[fe("useFixed",Ne),zo("getBounds")],n0=[La("anchor",Xg),Ha("transition",Xd)],s0=(n,r,i,l,u,m)=>{const p=ta("placement.info",St(n0),u),b=p.anchor,x=l.element,w=i.get(l.uid);uf(()=>{Ht(x,"position","fixed");const _=vs(x,"visibility");Ht(x,"visibility","hidden");const k=r.useFixed()?(()=>{const T=document.documentElement;return Yb(0,0,T.clientWidth,T.clientHeight)})():(T=>{const N=ko(T.element),B=T.element.dom.getBoundingClientRect();return Kb(N.left,N.top,B.width,B.height)})(n);b.placement(n,b,k).each(T=>{const N=m.orThunk(()=>r.getBounds.map(_o)),B=((V,U,q,H,L,W)=>((G,Q,re,ge,Te,Oe,Ae,tt)=>{const at=Rh(Ae,"maxHeightFunction",om()),ht=Rh(Ae,"maxWidthFunction",Xe),Bt=G.anchorBox,Lt=G.origin,lo={bounds:$w(Lt,Oe),origin:Lt,preference:ge,maxHeightFunction:at,maxWidthFunction:ht,lastPlacement:Te,transition:tt};return Dh(Bt,Q,re,lo)})(((G,Q)=>((re,ge)=>({anchorBox:re,origin:ge}))(G,Q))(U.anchorBox,V),H.element,U.bubble,U.layouts,L,q,U.overrides,W))(k,T,N,l,w,p.transition);i.set(l.uid,B)}),_.fold(()=>{Mo(x,"visibility")},T=>{Ht(x,"visibility",T)}),vs(x,"left").isNone()&&vs(x,"top").isNone()&&vs(x,"right").isNone()&&vs(x,"bottom").isNone()&&Lr(vs(x,"position"),"fixed")&&Mo(x,"position")},x)};var r0=Object.freeze({__proto__:null,position:(n,r,i,l,u)=>{const m=E.none();s0(n,r,i,l,u,m)},positionWithinBounds:s0,getMode:(n,r,i)=>r.useFixed()?"fixed":"absolute",reset:(n,r,i,l)=>{const u=l.element;xt(["position","left","right","top","bottom"],m=>Mo(u,m)),(m=>{Sn(m,Zg)})(u),i.clear(l.uid)}});const Rr=Hs({fields:hf,name:"positioning",active:Vw,apis:r0,state:Object.freeze({__proto__:null,init:()=>{let n={};return Xs({readState:()=>n,clear:r=>{_t(r)?delete n[r]:n={}},set:(r,i)=>{n[r]=i},get:r=>mt(n,r)})}})}),Zh=n=>n.getSystem().isConnected(),Jd=n=>{xo(n,Qm());const r=n.components();xt(r,Jd)},Ii=n=>{const r=n.components();xt(r,Ii),xo(n,Le())},a0=(n,r)=>{n.getSystem().addToWorld(r),Ps(n.element)&&Ii(r)},Jg=n=>{Jd(n),n.getSystem().removeFromWorld(n)},Qd=(n,r)=>{ys(n.element,r.element)},eu=(n,r)=>{Wh(n,r,ys)},Wh=(n,r,i)=>{n.getSystem().addToWorld(r),i(n.element,r.element),Ps(n.element)&&Ii(r),n.syncComponents()},jh=n=>{Jd(n),Is(n.element),n.getSystem().removeFromWorld(n)},qc=n=>{const r=Ci(n.element).bind(i=>n.getSystem().getByDom(i).toOptional());jh(n),r.each(i=>{i.syncComponents()})},tu=n=>{const r=n.components();xt(r,jh),ah(n.element),n.syncComponents()},Qg=(n,r)=>{Tv(n,r,ys)},ou=(n,r)=>{Tv(n,r,qm)},Tv=(n,r,i)=>{i(n,r.element);const l=Fn(r.element);xt(l,u=>{r.getByDom(u).each(Ii)})},ep=n=>{const r=Fn(n.element);xt(r,i=>{n.getByDom(i).each(Jd)}),Is(n.element)},tp=(n,r,i,l)=>{i.get().each(p=>{tu(n)});const u=r.getAttachPoint(n);eu(u,n);const m=n.getSystem().build(l);return eu(n,m),i.set(m),m},i0=(n,r,i,l)=>{const u=tp(n,r,i,l);return r.onOpen(n,u),u},op=(n,r,i)=>{i.get().each(l=>{tu(n),qc(n),r.onClose(n,l),i.clear()})},Gc=(n,r,i)=>i.isOpen(),nu=(n,r,i)=>{const l=r.getAttachPoint(n);Ht(n.element,"position",Rr.getMode(l)),((u,m,p,b)=>{vs(u.element,m).fold(()=>{Sn(u.element,p)},x=>{Kt(u.element,p,x)}),Ht(u.element,m,"hidden")})(n,"visibility",r.cloakVisibilityAttr)},np=(n,r,i)=>{(l=>Yr(["top","left","right","bottom"],u=>vs(l,u).isSome()))(n.element)||Mo(n.element,"position"),((l,u,m)=>{qs(l.element,m).fold(()=>Mo(l.element,u),p=>Ht(l.element,u,p))})(n,"visibility",r.cloakVisibilityAttr)};var l0=Object.freeze({__proto__:null,cloak:nu,decloak:np,open:i0,openWhileCloaked:(n,r,i,l,u)=>{nu(n,r),i0(n,r,i,l),u(),np(n,r)},close:op,isOpen:Gc,isPartOf:(n,r,i,l)=>Gc(0,0,i)&&i.get().exists(u=>r.isPartOf(n,u,l)),getState:(n,r,i)=>i.get(),setContent:(n,r,i,l)=>i.get().map(()=>tp(n,r,i,l))}),el=Object.freeze({__proto__:null,events:(n,r)=>uo([Re(kg(),(i,l)=>{op(i,n,r)})])}),am=[ho("onOpen"),ho("onClose"),Ee("isPartOf"),Ee("getAttachPoint"),fe("cloakVisibilityAttr","data-precloak-visibility")],bf=Object.freeze({__proto__:null,init:()=>{const n=En(),r=ue("not-implemented");return Xs({readState:r,isOpen:n.isSet,clear:n.clear,set:n.set,get:n.get})}});const io=Hs({fields:am,name:"sandboxing",active:el,apis:l0,state:bf}),Oa=ue("dismiss.popups"),xf=ue("reposition.popups"),Ce=ue("mouse.released"),qh=ea([fe("isExtraPart",Ne),Ha("fireEventInstead",[fe("event",Td())])]),c0=n=>{const r=ta("Dismissal",qh,n);return{[Oa()]:{schema:ea([Ee("target")]),onReceive:(i,l)=>{io.isOpen(i)&&(io.isPartOf(i,l.target)||r.isExtraPart(i,l.target)||r.fireEventInstead.fold(()=>io.close(i),u=>xo(i,u.event)))}}}},Ov=ea([Ha("fireEventInstead",[fe("event",Mc())]),oa("doReposition")]),vf=n=>{const r=ta("Reposition",Ov,n);return{[xf()]:{onReceive:i=>{io.isOpen(i)&&r.fireEventInstead.fold(()=>r.doReposition(i),l=>xo(i,l.event))}}}},Li=(n,r,i)=>{r.store.manager.onLoad(n,r,i)},yf=(n,r,i)=>{r.store.manager.onUnload(n,r,i)};var Gh=Object.freeze({__proto__:null,onLoad:Li,onUnload:yf,setValue:(n,r,i,l)=>{r.store.manager.setValue(n,r,i,l)},getValue:(n,r,i)=>r.store.manager.getValue(n,r,i),getState:(n,r,i)=>i}),d0=Object.freeze({__proto__:null,events:(n,r)=>{const i=n.resetOnDom?[cn((l,u)=>{Li(l,n,r)}),Xl((l,u)=>{yf(l,n,r)})]:[cf(n,r,Li)];return uo(i)}});const sp=()=>{const n=Ot(null);return Xs({set:n.set,get:n.get,isNotSet:()=>n.get()===null,clear:()=>{n.set(null)},readState:()=>({mode:"memory",value:n.get()})})},Kh=()=>{const n=Ot({}),r=Ot({});return Xs({readState:()=>({mode:"dataset",dataByValue:n.get(),dataByText:r.get()}),lookup:i=>mt(n.get(),i).orThunk(()=>mt(r.get(),i)),update:i=>{const l=n.get(),u=r.get(),m={},p={};xt(i,b=>{m[b.value]=b,mt(b,"meta").each(x=>{mt(x,"text").each(w=>{p[w]=b})})}),n.set({...l,...m}),r.set({...u,...p})},clear:()=>{n.set({}),r.set({})}})};var u0=Object.freeze({__proto__:null,memory:sp,dataset:Kh,manual:()=>Xs({readState:Xe}),init:n=>n.store.manager.state(n)});const Av=(n,r,i,l)=>{const u=r.store;i.update([l]),u.setValue(n,l),r.onSetValue(n,l)};var Yh=[zo("initialValue"),Ee("getFallbackEntry"),Ee("getDataKey"),Ee("setValue"),wn("manager",{setValue:Av,getValue:(n,r,i)=>{const l=r.store,u=l.getDataKey(n);return i.lookup(u).getOrThunk(()=>l.getFallbackEntry(u))},onLoad:(n,r,i)=>{r.store.initialValue.each(l=>{Av(n,r,i,l)})},onUnload:(n,r,i)=>{i.clear()},state:Kh})],Nv=[Ee("getValue"),fe("setValue",Xe),zo("initialValue"),wn("manager",{setValue:(n,r,i,l)=>{r.store.setValue(n,l),r.onSetValue(n,l)},getValue:(n,r,i)=>r.store.getValue(n),onLoad:(n,r,i)=>{r.store.initialValue.each(l=>{r.store.setValue(n,l)})},onUnload:Xe,state:ja.init})],Rv=[zo("initialValue"),wn("manager",{setValue:(n,r,i,l)=>{i.set(l),r.onSetValue(n,l)},getValue:(n,r,i)=>i.get(),onLoad:(n,r,i)=>{r.store.initialValue.each(l=>{i.isNotSet()&&i.set(l)})},onUnload:(n,r,i)=>{i.clear()},state:sp})],Ww=[Ca("store",{mode:"memory"},ya("mode",{memory:Rv,manual:Nv,dataset:Yh})),ho("onSetValue"),fe("resetOnDom",!1)];const nt=Hs({fields:Ww,name:"representing",active:d0,apis:Gh,extra:{setValueFrom:(n,r)=>{const i=nt.getValue(r);nt.setValue(n,i)}},state:u0}),zs=(n,r)=>vg(n,{},Ke(r,i=>{return l=i.name(),u="Cannot configure "+i.name()+" for "+n,ws(l,l,{tag:"option",process:{}},wd(m=>vd("The field: "+l+" is forbidden. "+u)));var l,u}).concat([$r("dump",kt)])),wf=n=>n.dump,Qs=(n,r)=>({...Ve(r),...n.dump}),Kc=zs,Cf=Qs,Xh="placeholder",rp=Zr([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),f=n=>Dt(n,"uiType"),h=(n,r,i,l)=>((u,m,p,b)=>f(p)&&p.uiType===Xh?((x,w,_,k)=>x.exists(T=>T!==_.owner)?rp.single(!0,ue(_)):mt(k,_.name).fold(()=>{throw new Error("Unknown placeholder component: "+_.name+`
Known: [`+Ao(k)+`]
Namespace: `+x.getOr("none")+`
Spec: `+JSON.stringify(_,null,2))},T=>T.replace()))(u,0,p,b):rp.single(!1,ue(p)))(n,0,i,l).fold((u,m)=>{const p=f(i)?m(r,i.config,i.validated):m(r),b=mt(p,"components").getOr([]),x=qn(b,w=>h(n,r,w,l));return[{...p,components:x}]},(u,m)=>{if(f(i)){const p=m(r,i.config,i.validated);return i.validated.preprocess.getOr(kt)(p)}return m(r)}),y=rp.single,C=rp.multiple,O=ue(Xh),A=Zr([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),M=fe("factory",{sketch:kt}),F=fe("schema",[]),$=Ee("name"),J=ws("pname","pname",Qr(n=>"<alloy."+lt(n.name)+">"),Mn()),oe=$r("schema",()=>[zo("preprocess")]),ee=fe("defaults",ue({})),te=fe("overrides",ue({})),se=St([M,F,$,J,ee,te]),he=St([M,F,$,ee,te]),me=St([M,F,$,J,ee,te]),Se=St([M,oe,$,Ee("unit"),J,ee,te]),De=n=>n.fold(E.some,E.none,E.some,E.some),Fe=n=>{const r=i=>i.name;return n.fold(r,r,r,r)},Me=(n,r)=>i=>{const l=ta("Converting part type",r,i);return n(l)},He=Me(A.required,se),Ze=Me(A.external,he),et=Me(A.optional,me),At=Me(A.group,Se),Nt=ue("entirety");var No=Object.freeze({__proto__:null,required:He,external:Ze,optional:et,group:At,asNamedPart:De,name:Fe,asCommon:n=>n.fold(kt,kt,kt,kt),original:Nt});const Vt=(n,r,i,l)=>X(r.defaults(n,i,l),i,{uid:n.partUids[r.name]},r.overrides(n,i,l)),ro=(n,r)=>{const i={};return xt(r,l=>{De(l).each(u=>{const m=to(n,u.pname);i[u.name]=p=>{const b=ta("Part: "+u.name+" in "+n,St(u.schema),p);return{...m,config:p,validated:b}}})}),i},to=(n,r)=>({uiType:O(),owner:n,name:r}),Vo=(n,r,i)=>({uiType:O(),owner:n,name:r,config:i,validated:{}}),je=n=>qn(n,r=>r.fold(E.none,E.some,E.none,E.none).map(i=>Fa(i.name,i.schema.concat([Fw(Nt())]))).toArray()),er=n=>Ke(n,Fe),ks=(n,r,i)=>((l,u,m)=>{const p={},b={};return xt(m,x=>{x.fold(w=>{p[w.pname]=y(!0,(_,k,T)=>w.factory.sketch(Vt(_,w,k,T)))},w=>{const _=u.parts[w.name];b[w.name]=ue(w.factory.sketch(Vt(u,w,_[Nt()]),_))},w=>{p[w.pname]=y(!1,(_,k,T)=>w.factory.sketch(Vt(_,w,k,T)))},w=>{p[w.pname]=C(!0,(_,k,T)=>{const N=_[w.name];return Ke(N,B=>w.factory.sketch(X(w.defaults(_,B,T),B,w.overrides(_,B))))})})}),{internals:ue(p),externals:ue(b)}})(0,r,i),Aa=(n,r,i)=>((l,u,m,p)=>{const b=Ho(p,(w,_)=>((k,T)=>{let N=!1;return{name:ue(k),required:()=>T.fold((B,V)=>B,(B,V)=>B),used:()=>N,replace:()=>{if(N)throw new Error("Trying to use the same placeholder more than once: "+k);return N=!0,T}}})(_,w)),x=((w,_,k,T)=>qn(k,N=>h(w,_,N,T)))(l,u,m,b);return In(b,w=>{if(w.used()===!1&&w.required())throw new Error("Placeholder: "+w.name()+` was not found in components list
Namespace: `+l.getOr("none")+`
Components: `+JSON.stringify(u.components,null,2))}),x})(E.some(n),r,r.components,i),Fo=(n,r,i)=>{const l=r.partUids[i];return n.getSystem().getByUid(l).toOptional()},Vs=(n,r,i)=>Fo(n,r,i).getOrDie("Could not find part: "+i),Yc=(n,r,i)=>{const l={},u=r.partUids,m=n.getSystem();return xt(i,p=>{l[p]=ue(m.getByUid(u[p]))}),l},ap=(n,r)=>{const i=n.getSystem();return Ho(r.partUids,(l,u)=>ue(i.getByUid(l)))},ip=n=>Ao(n.partUids),_f=(n,r,i)=>{const l={},u=r.partUids,m=n.getSystem();return xt(i,p=>{l[p]=ue(m.getByUid(u[p]).getOrDie())}),l},lp=(n,r)=>{const i=er(r);return en(Ke(i,l=>({key:l,value:n+"-"+l})))},$s=n=>ws("partUids","partUids",gb(r=>lp(r.uid,n)),Mn());var m0=Object.freeze({__proto__:null,generate:ro,generateOne:Vo,schemas:je,names:er,substitutes:ks,components:Aa,defaultUids:lp,defaultUidsSchema:$s,getAllParts:ap,getAllPartNames:ip,getPart:Fo,getPartOrDie:Vs,getParts:Yc,getPartsOrDie:_f});const W4=(n,r,i,l,u)=>{const m=((p,b)=>(p.length>0?[Fa("parts",p)]:[]).concat([Ee("uid"),fe("dom",{}),fe("components",[]),Fw("originalSpec"),fe("debug.sketcher",{})]).concat(b))(l,u);return ta(n+" [SpecSchema]",ea(m.concat(r)),i)},jw=(n,r,i,l,u)=>{const m=j4(u),p=je(i),b=$s(i),x=W4(n,r,m,p,[b]),w=ks(0,x,i);return l(x,Aa(n,x,w.internals()),m,w.externals())},j4=n=>(r=>Dt(r,"uid"))(n)?n:{...n,uid:Fs("uid")},IR=ea([Ee("name"),Ee("factory"),Ee("configFields"),fe("apis",{}),fe("extraApis",{})]),LR=ea([Ee("name"),Ee("factory"),Ee("configFields"),Ee("partFields"),fe("apis",{}),fe("extraApis",{})]),Fi=n=>{const r=ta("Sketcher for "+n.name,IR,n),i=Ho(r.apis,Cs),l=Ho(r.extraApis,(u,m)=>di(u,m));return{name:r.name,configFields:r.configFields,sketch:u=>((m,p,b,x)=>{const w=j4(x);return b(W4(m,p,w,[],[]),w)})(r.name,r.configFields,r.factory,u),...i,...l}},la=n=>{const r=ta("Sketcher for "+n.name,LR,n),i=ro(r.name,r.partFields),l=Ho(r.apis,Cs),u=Ho(r.extraApis,(m,p)=>di(m,p));return{name:r.name,partFields:r.partFields,configFields:r.configFields,sketch:m=>jw(r.name,r.configFields,r.partFields,r.factory,m),parts:i,...l,...u}},Jh=n=>ag("input")(n)&&js(n,"type")!=="radio"||ag("textarea")(n);var q4=Object.freeze({__proto__:null,getCurrent:(n,r,i)=>r.find(n)});const FR=[Ee("find")],wo=Hs({fields:FR,name:"composing",apis:q4}),HR=["input","button","textarea","select"],G4=(n,r,i)=>{(r.disabled()?Dv:Kw)(n,r)},qw=(n,r)=>r.useNative===!0&&bo(HR,Hr(n.element)),zR=n=>{Kt(n.element,"disabled","disabled")},Gw=n=>{Sn(n.element,"disabled")},K4=n=>{Kt(n.element,"aria-disabled","true")},VR=n=>{Kt(n.element,"aria-disabled","false")},Dv=(n,r,i)=>{r.disableClass.each(l=>{$n(n.element,l)}),(qw(n,r)?zR:K4)(n),r.onDisabled(n)},Kw=(n,r,i)=>{r.disableClass.each(l=>{Un(n.element,l)}),(qw(n,r)?Gw:VR)(n),r.onEnabled(n)},Y4=(n,r)=>qw(n,r)?(i=>zl(i.element,"disabled"))(n):(i=>js(i.element,"aria-disabled")==="true")(n);var $R=Object.freeze({__proto__:null,enable:Kw,disable:Dv,isDisabled:Y4,onLoad:G4,set:(n,r,i,l)=>{(l?Dv:Kw)(n,r)}}),X4=Object.freeze({__proto__:null,exhibit:(n,r)=>qa({classes:r.disabled()?r.disableClass.toArray():[]}),events:(n,r)=>uo([Ad(ka(),(i,l)=>Y4(i,n)),cf(n,r,G4)])}),UR=[ms("disabled",Ne),fe("useNative",!0),zo("disableClass"),ho("onDisabled"),ho("onEnabled")];const Mt=Hs({fields:UR,name:"disabling",active:X4,apis:$R}),Yw=(n,r,i,l)=>{const u=qr(n.element,"."+r.highlightClass);xt(u,m=>{Yr(l,p=>Go(p.element,m))||(Un(m,r.highlightClass),n.getSystem().getByDom(m).each(p=>{r.onDehighlight(n,p),xo(p,tf())}))})},f0=(n,r,i,l)=>{Yw(n,r,0,[l]),Xw(n,r,i,l)||($n(l.element,r.highlightClass),r.onHighlight(n,l),xo(l,ln()))},Xw=(n,r,i,l)=>ra(l.element,r.highlightClass),Jw=(n,r,i)=>Zn(n.element,"."+r.itemClass).bind(l=>n.getSystem().getByDom(l).toOptional()),J4=(n,r,i)=>{const l=qr(n.element,"."+r.itemClass);return(l.length>0?E.some(l[l.length-1]):E.none()).bind(u=>n.getSystem().getByDom(u).toOptional())},cp=(n,r,i,l)=>{const u=qr(n.element,"."+r.itemClass);return dl(u,m=>ra(m,r.highlightClass)).bind(m=>{const p=Fc(m,l,0,u.length-1);return n.getSystem().getByDom(u[p]).toOptional()})},Q4=(n,r,i)=>{const l=qr(n.element,"."+r.itemClass);return ze(Ke(l,u=>n.getSystem().getByDom(u).toOptional()))};var Qw=Object.freeze({__proto__:null,dehighlightAll:(n,r,i)=>Yw(n,r,0,[]),dehighlight:(n,r,i,l)=>{Xw(n,r,i,l)&&(Un(l.element,r.highlightClass),r.onDehighlight(n,l),xo(l,tf()))},highlight:f0,highlightFirst:(n,r,i)=>{Jw(n,r).each(l=>{f0(n,r,i,l)})},highlightLast:(n,r,i)=>{J4(n,r).each(l=>{f0(n,r,i,l)})},highlightAt:(n,r,i,l)=>{((u,m,p,b)=>{const x=qr(u.element,"."+m.itemClass);return E.from(x[b]).fold(()=>mo.error(new Error("No element found with index "+b)),u.getSystem().getByDom)})(n,r,0,l).fold(u=>{throw u},u=>{f0(n,r,i,u)})},highlightBy:(n,r,i,l)=>{const u=Q4(n,r);qo(u,l).each(m=>{f0(n,r,i,m)})},isHighlighted:Xw,getHighlighted:(n,r,i)=>Zn(n.element,"."+r.highlightClass).bind(l=>n.getSystem().getByDom(l).toOptional()),getFirst:Jw,getLast:J4,getPrevious:(n,r,i)=>cp(n,r,0,-1),getNext:(n,r,i)=>cp(n,r,0,1),getCandidates:Q4}),ZR=[Ee("highlightClass"),Ee("itemClass"),ho("onHighlight"),ho("onDehighlight")];const Oo=Hs({fields:ZR,name:"highlighting",apis:Qw}),WR=[8],im=[9],su=[13],Mv=[27],Hi=[32],Qh=[37],g0=[38],Bv=[39],e1=[40],jR=(n,r,i)=>{const l=Io(n.slice(0,r)),u=Io(n.slice(r+1));return qo(l.concat(u),i)},qR=(n,r,i)=>{const l=Io(n.slice(0,r));return qo(l,i)},GR=(n,r,i)=>{const l=n.slice(0,r),u=n.slice(r+1);return qo(u.concat(l),i)},e3=(n,r,i)=>{const l=n.slice(r+1);return qo(l,i)},So=n=>r=>{const i=r.raw;return bo(n,i.which)},ac=n=>r=>_c(n,i=>i(r)),ru=n=>n.raw.shiftKey===!0,KR=n=>n.raw.ctrlKey===!0,p0=yi(ru),Ro=(n,r)=>({matches:n,classification:r}),t3=(n,r,i)=>{r.exists(l=>i.exists(u=>Go(u,l)))||ut(n,Bc(),{prevFocus:r,newFocus:i})},Pv=()=>{const n=r=>Bi(r.element);return{get:n,set:(r,i)=>{const l=n(r);r.getSystem().triggerFocus(i,r.element);const u=n(r);t3(r,l,u)}}},YR=()=>{const n=r=>Oo.getHighlighted(r).map(i=>i.element);return{get:n,set:(r,i)=>{const l=n(r);r.getSystem().getByDom(i).fold(Xe,m=>{Oo.highlight(r,m)});const u=n(r);t3(r,l,u)}}};var t1;(function(n){n.OnFocusMode="onFocus",n.OnEnterOrSpaceMode="onEnterOrSpace",n.OnApiMode="onApi"})(t1||(t1={}));const dp=(n,r,i,l,u)=>{const m=(b,x,w,_,k)=>{return(T=w(b,x,_,k),N=x.event,qo(T,B=>B.matches(N)).map(B=>B.classification)).bind(B=>B(b,x,_,k));var T,N},p={schema:()=>n.concat([fe("focusManager",Pv()),Ca("focusInside","onFocus",jl(b=>bo(["onFocus","onEnterOrSpace","onApi"],b)?mo.value(b):mo.error("Invalid value for focusInside"))),wn("handler",p),wn("state",r),wn("sendFocusIn",u)]),processKey:m,toEvents:(b,x)=>{const w=b.focusInside!==t1.OnFocusMode?E.none():u(b).map(k=>Re(za(),(T,N)=>{k(T,b,x),N.stop()})),_=[Re(sa(),(k,T)=>{m(k,T,i,b,x).fold(()=>{((N,B)=>{const V=So(Hi.concat(su))(B.event);b.focusInside===t1.OnEnterOrSpaceMode&&V&&mh(N,B)&&u(b).each(U=>{U(N,b,x),B.stop()})})(k,T)},N=>{T.stop()})}),Re(wb(),(k,T)=>{m(k,T,l,b,x).each(N=>{T.stop()})})];return uo(w.toArray().concat(_))}};return p},o3=n=>{const r=[zo("onEscape"),zo("onEnter"),fe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),fe("firstTabstop",0),fe("useTabstopAt",Pt),zo("visibilitySelector")].concat([n]),i=(_,k)=>{const T=_.visibilitySelector.bind(N=>Ri(k,N)).getOr(k);return _e(T)>0},l=(_,k)=>k.focusManager.get(_).bind(T=>Ri(T,k.selector)),u=(_,k,T)=>{((N,B)=>{const V=qr(N.element,B.selector),U=Jt(V,q=>i(B,q));return E.from(U[B.firstTabstop])})(_,k).each(N=>{k.focusManager.set(_,N)})},m=(_,k,T,N)=>{const B=qr(_.element,T.selector);return l(_,T).bind(V=>dl(B,Rn(Go,V)).bind(U=>((q,H,L,W,G)=>G(H,L,Q=>((re,ge)=>i(re,ge)&&re.useTabstopAt(ge))(W,Q)).fold(()=>W.cyclic?E.some(!0):E.none(),Q=>(W.focusManager.set(q,Q),E.some(!0))))(_,B,U,T,N)))},p=(_,k,T)=>{const N=T.cyclic?jR:qR;return m(_,0,T,N)},b=(_,k,T)=>{const N=T.cyclic?GR:e3;return m(_,0,T,N)},x=ue([Ro(ac([ru,So(im)]),p),Ro(So(im),b),Ro(ac([p0,So(su)]),(_,k,T)=>T.onEnter.bind(N=>N(_,k)))]),w=ue([Ro(So(Mv),(_,k,T)=>T.onEscape.bind(N=>N(_,k))),Ro(So(im),(_,k,T)=>l(_,T).filter(N=>!T.useTabstopAt(N)).bind(N=>((B=>(V=>Ci(V))(B).bind(Fl).exists(V=>Go(V,B)))(N)?p:b)(_,k,T)))]);return dp(r,ja.init,x,w,()=>E.some(u))};var XR=o3($r("cyclic",Ne)),JR=o3($r("cyclic",Pt));const h0=(n,r,i)=>Jh(i)&&So(Hi)(r.event)?E.none():((l,u,m)=>(Eg(l,m,ka()),E.some(!0)))(n,0,i),o1=(n,r)=>E.some(!0),Iv=[fe("execute",h0),fe("useSpace",!1),fe("useEnter",!0),fe("useControlEnter",!1),fe("useDown",!1)],n3=(n,r,i)=>i.execute(n,r,n.element);var QR=dp(Iv,ja.init,(n,r,i,l)=>{const u=i.useSpace&&!Jh(n.element)?Hi:[],m=i.useEnter?su:[],p=i.useDown?e1:[],b=u.concat(m).concat(p);return[Ro(So(b),n3)].concat(i.useControlEnter?[Ro(ac([KR,So(su)]),n3)]:[])},(n,r,i,l)=>i.useSpace&&!Jh(n.element)?[Ro(So(Hi),o1)]:[],()=>E.none());const s3=()=>{const n=En();return Xs({readState:()=>n.get().map(r=>({numRows:String(r.numRows),numColumns:String(r.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(r,i)=>{n.set({numRows:r,numColumns:i})},getNumRows:()=>n.get().map(r=>r.numRows),getNumColumns:()=>n.get().map(r=>r.numColumns)})};var eD=Object.freeze({__proto__:null,flatgrid:s3,init:n=>n.state(n)});const r3=n=>(r,i,l,u)=>{const m=n(r.element);return a3(m,r,i,l,u)},eC=(n,r)=>{const i=sc(n,r);return r3(i)},tC=(n,r)=>{const i=sc(r,n);return r3(i)},oC=n=>(r,i,l,u)=>a3(n,r,i,l,u),a3=(n,r,i,l,u)=>l.focusManager.get(r).bind(m=>n(r.element,m,l,u)).map(m=>(l.focusManager.set(r,m),!0)),i3=oC,l3=oC,Lv=oC,nC=n=>!(r=>r.offsetWidth<=0&&r.offsetHeight<=0)(n.dom),c3=(n,r,i)=>{const l=qr(n,i);return((u,m)=>dl(u,p=>Go(p,r)).map(p=>({index:p,candidates:u})))(Jt(l,nC))},d3=(n,r)=>dl(n,i=>Go(r,i)),u3=(n,r,i,l)=>l(Math.floor(r/i),r%i).bind(u=>{const m=u.row*i+u.column;return m>=0&&m<n.length?E.some(n[m]):E.none()}),m3=(n,r,i,l,u)=>u3(n,r,l,(m,p)=>{const b=m===i-1?n.length-m*l:l,x=Fc(p,u,0,b-1);return E.some({row:m,column:x})}),Fv=(n,r,i,l,u)=>u3(n,r,l,(m,p)=>{const b=Fc(m,u,0,i-1),x=b===i-1?n.length-b*l:l,w=mi(p,0,x-1);return E.some({row:b,column:w})}),tD=[Ee("selector"),fe("execute",h0),aa("onEscape"),fe("captureTab",!1),Hb()],oD=(n,r,i)=>{Zn(n.element,r.selector).each(l=>{r.focusManager.set(n,l)})},Hv=n=>(r,i,l,u)=>c3(r,i,l.selector).bind(m=>n(m.candidates,m.index,u.getNumRows().getOr(l.initSize.numRows),u.getNumColumns().getOr(l.initSize.numColumns))),f3=(n,r,i)=>i.captureTab?E.some(!0):E.none(),g3=Hv((n,r,i,l)=>m3(n,r,i,l,-1)),sC=Hv((n,r,i,l)=>m3(n,r,i,l,1)),nD=Hv((n,r,i,l)=>Fv(n,r,i,l,-1)),sD=Hv((n,r,i,l)=>Fv(n,r,i,l,1)),rD=ue([Ro(So(Qh),eC(g3,sC)),Ro(So(Bv),tC(g3,sC)),Ro(So(g0),i3(nD)),Ro(So(e1),l3(sD)),Ro(ac([ru,So(im)]),f3),Ro(ac([p0,So(im)]),f3),Ro(So(Hi.concat(su)),(n,r,i,l)=>((u,m)=>m.focusManager.get(u).bind(p=>Ri(p,m.selector)))(n,i).bind(u=>i.execute(n,r,u)))]),aD=ue([Ro(So(Mv),(n,r,i)=>i.onEscape(n,r)),Ro(So(Hi),o1)]);var rC=dp(tD,s3,rD,aD,()=>E.some(oD));const p3=(n,r,i,l,u)=>{const m=(p,b,x)=>u(p,b,l,0,x.length-1,x[b],w=>{return _=x[w],Hr(_)==="button"&&js(_,"disabled")==="disabled"?m(p,w,x):E.from(x[w]);var _});return c3(n,i,r).bind(p=>{const b=p.index,x=p.candidates;return m(b,b,x)})},aC=(n,r,i,l)=>p3(n,r,i,l,(u,m,p,b,x,w,_)=>{const k=mi(m+p,b,x);return k===u?E.from(w):_(k)}),b0=(n,r,i,l)=>p3(n,r,i,l,(u,m,p,b,x,w,_)=>{const k=Fc(m,p,b,x);return k===u?E.none():_(k)}),h3=[Ee("selector"),fe("getInitial",E.none),fe("execute",h0),aa("onEscape"),fe("executeOnMove",!1),fe("allowVertical",!0),fe("allowHorizontal",!0),fe("cycles",!0)],zv=(n,r,i)=>((l,u)=>u.focusManager.get(l).bind(m=>Ri(m,u.selector)))(n,i).bind(l=>i.execute(n,r,l)),b3=(n,r,i)=>{r.getInitial(n).orThunk(()=>Zn(n.element,r.selector)).each(l=>{r.focusManager.set(n,l)})},x3=(n,r,i)=>(i.cycles?b0:aC)(n,i.selector,r,-1),v3=(n,r,i)=>(i.cycles?b0:aC)(n,i.selector,r,1),y3=n=>(r,i,l,u)=>n(r,i,l,u).bind(()=>l.executeOnMove?zv(r,i,l):E.some(!0)),iD=ue([Ro(So(Hi),o1),Ro(So(Mv),(n,r,i)=>i.onEscape(n,r))]);var lD=dp(h3,ja.init,(n,r,i,l)=>{const u=[...i.allowHorizontal?Qh:[]].concat(i.allowVertical?g0:[]),m=[...i.allowHorizontal?Bv:[]].concat(i.allowVertical?e1:[]);return[Ro(So(u),y3(eC(x3,v3))),Ro(So(m),y3(tC(x3,v3))),Ro(So(su),zv),Ro(So(Hi),zv)]},iD,()=>E.some(b3));const au=(n,r,i)=>E.from(n[r]).bind(l=>E.from(l[i]).map(u=>({rowIndex:r,columnIndex:i,cell:u}))),w3=(n,r,i,l)=>{const u=n[r].length,m=Fc(i,l,0,u-1);return au(n,r,m)},C3=(n,r,i,l)=>{const u=Fc(i,l,0,n.length-1),m=n[u].length,p=mi(r,0,m-1);return au(n,u,p)},_3=(n,r,i,l)=>{const u=n[r].length,m=mi(i+l,0,u-1);return au(n,r,m)},k3=(n,r,i,l)=>{const u=mi(i+l,0,n.length-1),m=n[u].length,p=mi(r,0,m-1);return au(n,u,p)},S3=[Fa("selectors",[Ee("row"),Ee("cell")]),fe("cycles",!0),fe("previousSelector",E.none),fe("execute",h0)],cD=(n,r,i)=>{r.previousSelector(n).orThunk(()=>{const l=r.selectors;return Zn(n.element,l.cell)}).each(l=>{r.focusManager.set(n,l)})},Vv=(n,r)=>(i,l,u)=>{const m=u.cycles?n:r;return Ri(l,u.selectors.row).bind(p=>{const b=qr(p,u.selectors.cell);return d3(b,l).bind(x=>{const w=qr(i,u.selectors.row);return d3(w,p).bind(_=>{const k=((T,N)=>Ke(T,B=>qr(B,N.selectors.cell)))(w,u);return m(k,_,x).map(T=>T.cell)})})})},iC=Vv((n,r,i)=>w3(n,r,i,-1),(n,r,i)=>_3(n,r,i,-1)),n1=Vv((n,r,i)=>w3(n,r,i,1),(n,r,i)=>_3(n,r,i,1)),x0=Vv((n,r,i)=>C3(n,i,r,-1),(n,r,i)=>k3(n,i,r,-1)),dD=Vv((n,r,i)=>C3(n,i,r,1),(n,r,i)=>k3(n,i,r,1)),lC=ue([Ro(So(Qh),eC(iC,n1)),Ro(So(Bv),tC(iC,n1)),Ro(So(g0),i3(x0)),Ro(So(e1),l3(dD)),Ro(So(Hi.concat(su)),(n,r,i)=>Bi(n.element).bind(l=>i.execute(n,r,l)))]),uD=ue([Ro(So(Hi),o1)]);var E3=dp(S3,ja.init,lC,uD,()=>E.some(cD));const T3=[Ee("selector"),fe("execute",h0),fe("moveOnTab",!1)],cC=(n,r,i)=>i.focusManager.get(n).bind(l=>i.execute(n,r,l)),mD=(n,r,i)=>{Zn(n.element,r.selector).each(l=>{r.focusManager.set(n,l)})},O3=(n,r,i)=>b0(n,i.selector,r,-1),A3=(n,r,i)=>b0(n,i.selector,r,1),s1=ue([Ro(So(g0),Lv(O3)),Ro(So(e1),Lv(A3)),Ro(ac([ru,So(im)]),(n,r,i,l)=>i.moveOnTab?Lv(O3)(n,r,i,l):E.none()),Ro(ac([p0,So(im)]),(n,r,i,l)=>i.moveOnTab?Lv(A3)(n,r,i,l):E.none()),Ro(So(su),cC),Ro(So(Hi),cC)]),up=ue([Ro(So(Hi),o1)]);var $v=dp(T3,ja.init,s1,up,()=>E.some(mD));const v0=[aa("onSpace"),aa("onEnter"),aa("onShiftEnter"),aa("onLeft"),aa("onRight"),aa("onTab"),aa("onShiftTab"),aa("onUp"),aa("onDown"),aa("onEscape"),fe("stopSpaceKeyup",!1),zo("focusIn")];var fD=dp(v0,ja.init,(n,r,i)=>[Ro(So(Hi),i.onSpace),Ro(ac([p0,So(su)]),i.onEnter),Ro(ac([ru,So(su)]),i.onShiftEnter),Ro(ac([ru,So(im)]),i.onShiftTab),Ro(ac([p0,So(im)]),i.onTab),Ro(So(g0),i.onUp),Ro(So(e1),i.onDown),Ro(So(Qh),i.onLeft),Ro(So(Bv),i.onRight),Ro(So(Hi),i.onSpace)],(n,r,i)=>[...i.stopSpaceKeyup?[Ro(So(Hi),o1)]:[],Ro(So(Mv),i.onEscape)],n=>n.focusIn);const kf=XR.schema(),iu=JR.schema(),dC=lD.schema(),N3=rC.schema(),gD=E3.schema(),R3=QR.schema(),y0=$v.schema(),w0=fD.schema(),vt=Vd({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:kf,cyclic:iu,flow:dC,flatgrid:N3,matrix:gD,execution:R3,menu:y0,special:w0}),name:"keying",active:{events:(n,r)=>n.handler.toEvents(n,r)},apis:{focusIn:(n,r,i)=>{r.sendFocusIn(r).fold(()=>{n.getSystem().triggerFocus(n.element,n.element)},l=>{l(n,r,i)})},setGridSize:(n,r,i,l,u)=>{(m=>Zs(m,"setGridSize"))(i)?i.setGridSize(l,u):console.error("Layout does not support setGridSize")}},state:eD}),uC=(n,r)=>{uf(()=>{((i,l,u)=>{const m=i.components();(x=>{xt(x.components(),w=>Is(w.element)),ah(x.element),x.syncComponents()})(i);const p=u(l),b=bn(m,p);xt(b,x=>{Jd(x),i.getSystem().removeFromWorld(x)}),xt(p,x=>{Zh(x)?Qd(i,x):(i.getSystem().addToWorld(x),Qd(i,x),Ps(i.element)&&Ii(x))}),i.syncComponents()})(n,r,()=>Ke(r,n.getSystem().build))},n.element)},r1=(n,r)=>{uf(()=>{((i,l,u)=>{const m=i.components(),p=qn(l,w=>ph(w).toArray());xt(m,w=>{bo(p,w)||Jg(w)});const b=((w,_,k)=>Pd(w,_,(T,N)=>Id(w,N,T,k)))(n.element,r,n.getSystem().buildOrPatch),x=bn(m,b);xt(x,w=>{Zh(w)&&Jg(w)}),xt(b,w=>{Zh(w)||a0(i,w)}),i.syncComponents()})(n,r)},n.element)},Uv=(n,r,i,l)=>{Jg(r);const u=Id(n.element,i,l,n.getSystem().buildOrPatch);a0(n,u),n.syncComponents()},mC=(n,r,i)=>{const l=n.getSystem().build(i);Wh(n,l,r)},fC=(n,r,i,l)=>{qc(r),mC(n,(u,m)=>((p,b,x)=>{yn(p,x).fold(()=>{ys(p,b)},w=>{Fu(w,b)})})(u,m,i),l)},mp=(n,r)=>n.components(),wr=(n,r,i,l,u)=>{const m=mp(n);return E.from(m[l]).map(p=>(u.fold(()=>qc(p),b=>{(r.reuseDom?Uv:fC)(n,p,l,b)}),p))};var pD=Object.freeze({__proto__:null,append:(n,r,i,l)=>{mC(n,ys,l)},prepend:(n,r,i,l)=>{mC(n,ba,l)},remove:(n,r,i,l)=>{const u=mp(n);qo(u,p=>Go(l.element,p.element)).each(qc)},replaceAt:wr,replaceBy:(n,r,i,l,u)=>{const m=mp(n);return dl(m,l).bind(p=>wr(n,r,0,p,u))},set:(n,r,i,l)=>(r.reuseDom?r1:uC)(n,l),contents:mp});const Rt=Hs({fields:[Vn("reuseDom",!0)],name:"replacing",apis:pD}),Qt=(n,r)=>{const i=((l,u)=>{const m=uo(u);return Hs({fields:[Ee("enabled")],name:l,active:{events:ue(m)}})})(n,r);return{key:n,value:{config:{},me:i,configAsRaw:ue({}),initialConfig:{},state:ja}}},Zv=(n,r)=>{r.ignore||(Ga(n.element),r.onFocus(n))};var a1=Object.freeze({__proto__:null,focus:Zv,blur:(n,r)=>{r.ignore||Wb(n.element)},isFocused:n=>$g(n.element)}),D3=Object.freeze({__proto__:null,exhibit:(n,r)=>{const i=r.ignore?{}:{attributes:{tabindex:"-1"}};return qa(i)},events:n=>uo([Re(za(),(r,i)=>{Zv(r,n),i.stop()})].concat(n.stopMousedown?[Re(na(),(r,i)=>{i.event.prevent()})]:[]))}),Wv=[ho("onFocus"),fe("stopMousedown",!1),fe("ignore",!1)];const It=Hs({fields:Wv,name:"focusing",active:D3,apis:a1}),i1=(n,r,i,l)=>{const u=i.get();i.set(l),((m,p,b)=>{p.toggleClass.each(x=>{b.get()?$n(m.element,x):Un(m.element,x)})})(n,r,i),((m,p,b)=>{const x=p.aria;x.update(m,x,b.get())})(n,r,i),u!==l&&r.onToggled(n,l)},gC=(n,r,i)=>{i1(n,r,i,!i.get())},M3=(n,r,i)=>{i1(n,r,i,r.selected)};var pC=Object.freeze({__proto__:null,onLoad:M3,toggle:gC,isOn:(n,r,i)=>i.get(),on:(n,r,i)=>{i1(n,r,i,!0)},off:(n,r,i)=>{i1(n,r,i,!1)},set:i1}),lu=Object.freeze({__proto__:null,exhibit:()=>qa({}),events:(n,r)=>{const i=(l=n,u=r,m=gC,Sa(b=>{m(b,l,u)}));var l,u,m;const p=cf(n,r,M3);return uo(hn([n.toggleOnExecute?[i]:[],[p]]))}});const B3=(n,r,i)=>{Kt(n.element,"aria-expanded",i)};var hD=[fe("selected",!1),zo("toggleClass"),fe("toggleOnExecute",!0),ho("onToggled"),Ca("aria",{mode:"none"},ya("mode",{pressed:[fe("syncWithExpanded",!1),wn("update",(n,r,i)=>{Kt(n.element,"aria-pressed",i),r.syncWithExpanded&&B3(n,0,i)})],checked:[wn("update",(n,r,i)=>{Kt(n.element,"aria-checked",i)})],expanded:[wn("update",B3)],selected:[wn("update",(n,r,i)=>{Kt(n.element,"aria-selected",i)})],none:[wn("update",Xe)]}))];const so=Hs({fields:hD,name:"toggling",active:lu,apis:pC,state:{init:()=>{const n=Ot(!1);return{get:()=>n.get(),set:r=>n.set(r),clear:()=>n.set(!1),readState:()=>n.get()}}}}),hC=()=>{const n=(r,i)=>{i.stop(),Od(r)};return[Re(ci(),n),Re($a(),n),Yl(Gl()),Yl(na())]},C0=n=>uo(hn([n.map(r=>Sa((i,l)=>{r(i),l.stop()})).toArray(),hC()])),P3="alloy.item-hover",I3="alloy.item-focus",tl="alloy.item-toggled",fp=n=>{(Bi(n.element).isNone()||It.isFocused(n))&&(It.isFocused(n)||It.focus(n),ut(n,P3,{item:n}))},bC=n=>{ut(n,I3,{item:n})},gp=ue(P3),fi=ue(I3),zi=ue(tl),Na=n=>n.toggling.map(r=>r.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),ic=[Ee("data"),Ee("components"),Ee("dom"),fe("hasSubmenu",!1),zo("toggling"),Kc("itemBehaviours",[so,It,vt,nt]),fe("ignoreFocus",!1),fe("domModification",{}),wn("builder",n=>({dom:n.dom,domModification:{...n.domModification,attributes:{role:Na(n),...n.domModification.attributes,"aria-haspopup":n.hasSubmenu,...n.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Cf(n.itemBehaviours,[n.toggling.fold(so.revoke,r=>so.config((i=>({aria:{mode:"checked"},...Ll(i,(l,u)=>u!=="exclusive"),onToggled:(l,u)=>{Ft(i.onToggled)&&i.onToggled(l,u),((m,p)=>{ut(m,tl,{item:m,state:p})})(l,u)}}))(r))),It.config({ignore:n.ignoreFocus,stopMousedown:n.ignoreFocus,onFocus:r=>{bC(r)}}),vt.config({mode:"execution"}),nt.config({store:{mode:"memory",initialValue:n.data}}),Qt("item-type-events",[...hC(),Re(Ji(),fp),Re(Qi(),It.focus)])]),components:n.components,eventOrder:n.eventOrder})),fe("eventOrder",{})],xC=[Ee("dom"),Ee("components"),wn("builder",n=>({dom:n.dom,components:n.components,events:uo([dv(Qi())])}))],Vi=ue("item-widget"),lm=ue([He({name:"widget",overrides:n=>({behaviours:Ve([nt.config({store:{mode:"manual",getValue:r=>n.data,setValue:Xe}})])})})]),bD=[Ee("uid"),Ee("data"),Ee("components"),Ee("dom"),fe("autofocus",!1),fe("ignoreFocus",!1),Kc("widgetBehaviours",[nt,It,vt]),fe("domModification",{}),$s(lm()),wn("builder",n=>{const r=ks(Vi(),n,lm()),i=Aa(Vi(),n,r.internals()),l=m=>Fo(m,n,"widget").map(p=>(vt.focusIn(p),p)),u=(m,p)=>(Jh(p.event.target)||n.autofocus&&p.setSource(m.element),E.none());return{dom:n.dom,components:i,domModification:n.domModification,events:uo([Sa((m,p)=>{l(m).each(b=>{p.stop()})}),Re(Ji(),fp),Re(Qi(),(m,p)=>{n.autofocus?l(m):It.focus(m)})]),behaviours:Cf(n.widgetBehaviours,[nt.config({store:{mode:"memory",initialValue:n.data}}),It.config({ignore:n.ignoreFocus,onFocus:m=>{bC(m)}}),vt.config({mode:"special",focusIn:n.autofocus?m=>{l(m)}:oc(),onLeft:u,onRight:u,onEscape:(m,p)=>It.isFocused(m)||n.autofocus?(n.autofocus&&p.setSource(m.element),E.none()):(It.focus(m),E.some(!0))})])}})],xD=ya("type",{widget:bD,item:ic,separator:xC}),vD=ue([At({factory:{sketch:n=>{const r=ta("menu.spec item",xD,n);return r.builder(r)}},name:"items",unit:"item",defaults:(n,r)=>Dt(r,"uid")?r:{...r,uid:Fs("item")},overrides:(n,r)=>({type:r.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}})})]),L3=ue([Ee("value"),Ee("items"),Ee("dom"),Ee("components"),fe("eventOrder",{}),zs("menuBehaviours",[Oo,nt,wo,vt]),Ca("movement",{mode:"menu",moveOnTab:!0},ya("mode",{grid:[Hb(),wn("config",(n,r)=>({mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:r.initSize.numColumns,numRows:r.initSize.numRows},focusManager:n.focusManager}))],matrix:[wn("config",(n,r)=>({mode:"matrix",selectors:{row:r.rowSelector,cell:"."+n.markers.item},previousSelector:r.previousSelector,focusManager:n.focusManager})),Ee("rowSelector"),fe("previousSelector",E.none)],menu:[fe("moveOnTab",!0),wn("config",(n,r)=>({mode:"menu",selector:"."+n.markers.item,moveOnTab:r.moveOnTab,focusManager:n.focusManager}))]})),La("markers",Bg()),fe("fakeFocus",!1),fe("focusManager",Pv()),ho("onHighlight"),ho("onDehighlight")]),vC=ue("alloy.menu-focus"),cu=la({name:"Menu",configFields:L3(),partFields:vD(),factory:(n,r,i,l)=>({uid:n.uid,dom:n.dom,markers:n.markers,behaviours:Qs(n.menuBehaviours,[Oo.config({highlightClass:n.markers.selectedItem,itemClass:n.markers.item,onHighlight:n.onHighlight,onDehighlight:n.onDehighlight}),nt.config({store:{mode:"memory",initialValue:n.value}}),wo.config({find:E.some}),vt.config(n.movement.config(n,n.movement))]),events:uo([Re(fi(),(u,m)=>{const p=m.event;u.getSystem().getByDom(p.target).each(b=>{Oo.highlight(u,b),m.stop(),ut(u,vC(),{menu:u,item:b})})}),Re(gp(),(u,m)=>{const p=m.event.item;Oo.highlight(u,p)}),Re(zi(),(u,m)=>{const{item:p,state:b}=m.event;b&&js(p.element,"role")==="menuitemradio"&&((x,w)=>{const _=qr(x.element,'[role="menuitemradio"][aria-checked="true"]');xt(_,k=>{Go(k,w.element)||x.getSystem().getByDom(k).each(T=>{so.off(T)})})})(u,p)})]),components:r,eventOrder:n.eventOrder,domModification:{attributes:{role:"menu"}}})}),yC=(n,r,i,l)=>mt(i,l).bind(u=>mt(n,u).bind(m=>{const p=yC(n,r,i,m);return E.some([m].concat(p))})).getOr([]),F3=n=>n.type==="prepared"?E.some(n.menu):E.none(),yD=()=>{const n=Ot({}),r=Ot({}),i=Ot({}),l=En(),u=Ot({}),m=x=>p(x).bind(F3),p=x=>mt(r.get(),x),b=x=>mt(n.get(),x);return{setMenuBuilt:(x,w)=>{r.set({...r.get(),[x]:{type:"prepared",menu:w}})},setContents:(x,w,_,k)=>{l.set(x),n.set(_),r.set(w),u.set(k);const T=((N,B)=>{const V={};In(N,(L,W)=>{xt(L,G=>{V[G]=W})});const U=B,q=ei(B,(L,W)=>({k:L,v:W})),H=Ho(q,(L,W)=>[W].concat(yC(V,U,q,W)));return Ho(V,L=>mt(H,L).getOr([L]))})(k,_);i.set(T)},expand:x=>mt(n.get(),x).map(w=>{const _=mt(i.get(),x).getOr([]);return[w].concat(_)}),refresh:x=>mt(i.get(),x),collapse:x=>mt(i.get(),x).bind(w=>w.length>1?E.some(w.slice(1)):E.none()),lookupMenu:p,lookupItem:b,otherMenus:x=>{const w=u.get();return bn(Ao(w),x)},getPrimary:()=>l.get().bind(m),getMenus:()=>r.get(),clear:()=>{n.set({}),r.set({}),i.set({}),l.clear()},isClear:()=>l.get().isNone(),getTriggeringPath:(x,w)=>{const _=Jt(b(x).toArray(),k=>m(k).isSome());return mt(i.get(),x).bind(k=>{const T=Io(_.concat(k));return(N=>{const B=[];for(let V=0;V<N.length;V++){const U=N[V];if(!U.isSome())return E.none();B.push(U.getOrDie())}return E.some(B)})(qn(T,(N,B)=>((V,U,q)=>m(V).bind(H=>(L=>qi(n.get(),(W,G)=>W===L))(V).bind(L=>U(L).map(W=>({triggeredMenu:H,triggeringItem:W,triggeringPath:q})))))(N,w,T.slice(0,B+1)).fold(()=>Lr(l.get(),N)?[]:[E.none()],V=>[E.some(V)])))})}}},wD=F3,H3=lt("tiered-menu-item-highlight"),wC=lt("tiered-menu-item-dehighlight");var Ra;(function(n){n[n.HighlightMenuAndItem=0]="HighlightMenuAndItem",n[n.HighlightJustMenu=1]="HighlightJustMenu",n[n.HighlightNone=2]="HighlightNone"})(Ra||(Ra={}));const CC=ue("collapse-item"),Sf=Fi({name:"TieredMenu",configFields:[Fb("onExecute"),Fb("onEscape"),yl("onOpenMenu"),yl("onOpenSubmenu"),ho("onRepositionMenu"),ho("onCollapseMenu"),fe("highlightOnOpen",Ra.HighlightMenuAndItem),Fa("data",[Ee("primary"),Ee("menus"),Ee("expansions")]),fe("fakeFocus",!1),ho("onHighlightItem"),ho("onDehighlightItem"),ho("onHover"),Pg(),Ee("dom"),fe("navigateOnHover",!0),fe("stayInDom",!1),zs("tmenuBehaviours",[vt,Oo,wo,Rt]),fe("eventOrder",{})],apis:{collapseMenu:(n,r)=>{n.collapseMenu(r)},highlightPrimary:(n,r)=>{n.highlightPrimary(r)},repositionMenus:(n,r)=>{n.repositionMenus(r)}},factory:(n,r)=>{const i=En(),l=yD(),u=L=>nt.getValue(L).value,m=L=>Ho(n.data.menus,(W,G)=>qn(W.items,Q=>Q.type==="separator"?[]:[Q.data.value])),p=Oo.highlight,b=(L,W)=>{p(L,W),Oo.getHighlighted(W).orThunk(()=>Oo.getFirst(W)).each(G=>{n.fakeFocus?Oo.highlight(W,G):Eg(L,G.element,Qi())})},x=(L,W)=>ze(Ke(W,G=>L.lookupMenu(G).bind(Q=>Q.type==="prepared"?E.some(Q.menu):E.none()))),w=(L,W,G)=>{const Q=x(W,W.otherMenus(G));xt(Q,re=>{Ai(re.element,[n.markers.backgroundMenu]),n.stayInDom||Rt.remove(L,re)})},_=(L,W)=>{const G=(Q=>i.get().getOrThunk(()=>{const re={},ge=qr(Q.element,`.${n.markers.item}`),Te=Jt(ge,Oe=>js(Oe,"aria-haspopup")==="true");return xt(Te,Oe=>{Q.getSystem().getByDom(Oe).each(Ae=>{const tt=u(Ae);re[tt]=Ae})}),i.set(re),re}))(L);In(G,(Q,re)=>{const ge=bo(W,re);Kt(Q.element,"aria-expanded",ge)})},k=(L,W,G)=>E.from(G[0]).bind(Q=>W.lookupMenu(Q).bind(re=>{if(re.type==="notbuilt")return E.none();{const ge=re.menu,Te=x(W,G.slice(1));return xt(Te,Oe=>{$n(Oe.element,n.markers.backgroundMenu)}),Ps(ge.element)||Rt.append(L,Jo(ge)),Ai(ge.element,[n.markers.backgroundMenu]),b(L,ge),w(L,W,G),E.some(ge)}}));let T;(function(L){L[L.HighlightSubmenu=0]="HighlightSubmenu",L[L.HighlightParent=1]="HighlightParent"})(T||(T={}));const N=(L,W,G=T.HighlightSubmenu)=>{if(W.hasConfigured(Mt)&&Mt.isDisabled(W))return E.some(W);{const Q=u(W);return l.expand(Q).bind(re=>(_(L,re),E.from(re[0]).bind(ge=>l.lookupMenu(ge).bind(Te=>{const Oe=((Ae,tt,at)=>{if(at.type==="notbuilt"){const ht=Ae.getSystem().build(at.nbMenu());return l.setMenuBuilt(tt,ht),ht}return at.menu})(L,ge,Te);return Ps(Oe.element)||Rt.append(L,Jo(Oe)),n.onOpenSubmenu(L,W,Oe,Io(re)),G===T.HighlightSubmenu?(Oo.highlightFirst(Oe),k(L,l,re)):(Oo.dehighlightAll(Oe),E.some(W))}))))}},B=(L,W)=>{const G=u(W);return l.collapse(G).bind(Q=>(_(L,Q),k(L,l,Q).map(re=>(n.onCollapseMenu(L,W,re),re))))},V=L=>(W,G)=>Ri(G.getSource(),`.${n.markers.item}`).bind(Q=>W.getSystem().getByDom(Q).toOptional().bind(re=>L(W,re).map(Pt))),U=uo([Re(vC(),(L,W)=>{const G=W.event.item;l.lookupItem(u(G)).each(()=>{const Q=W.event.menu;Oo.highlight(L,Q);const re=u(W.event.item);l.refresh(re).each(ge=>w(L,l,ge))})}),Sa((L,W)=>{const G=W.event.target;L.getSystem().getByDom(G).each(Q=>{u(Q).indexOf("collapse-item")===0&&B(L,Q),N(L,Q,T.HighlightSubmenu).fold(()=>{n.onExecute(L,Q)},Xe)})}),cn((L,W)=>{(G=>{const Q=((ge,Te,Oe)=>Ho(Oe,(Ae,tt)=>{const at=()=>cu.sketch({...Ae,value:tt,markers:n.markers,fakeFocus:n.fakeFocus,onHighlight:(ht,Bt)=>{ut(ht,H3,{menuComp:ht,itemComp:Bt})},onDehighlight:(ht,Bt)=>{ut(ht,wC,{menuComp:ht,itemComp:Bt})},focusManager:n.fakeFocus?YR():Pv()});return tt===Te?{type:"prepared",menu:ge.getSystem().build(at())}:{type:"notbuilt",nbMenu:at}}))(G,n.data.primary,n.data.menus),re=m();return l.setContents(n.data.primary,Q,n.data.expansions,re),l.getPrimary()})(L).each(G=>{Rt.append(L,Jo(G)),n.onOpenMenu(L,G),n.highlightOnOpen===Ra.HighlightMenuAndItem?b(L,G):n.highlightOnOpen===Ra.HighlightJustMenu&&p(L,G)})}),Re(H3,(L,W)=>{n.onHighlightItem(L,W.event.menuComp,W.event.itemComp)}),Re(wC,(L,W)=>{n.onDehighlightItem(L,W.event.menuComp,W.event.itemComp)}),...n.navigateOnHover?[Re(gp(),(L,W)=>{const G=W.event.item;((Q,re)=>{const ge=u(re);l.refresh(ge).bind(Te=>(_(Q,Te),k(Q,l,Te)))})(L,G),N(L,G,T.HighlightParent),n.onHover(L,G)})]:[]]),q=L=>Oo.getHighlighted(L).bind(Oo.getHighlighted),H={collapseMenu:L=>{q(L).each(W=>{B(L,W)})},highlightPrimary:L=>{l.getPrimary().each(W=>{b(L,W)})},repositionMenus:L=>{l.getPrimary().bind(G=>q(L).bind(Q=>{const re=u(Q),ge=Ln(l.getMenus()),Te=ze(Ke(ge,wD));return l.getTriggeringPath(re,Oe=>((Ae,tt,at)=>_r(tt,ht=>{if(!ht.getSystem().isConnected())return E.none();const Bt=Oo.getCandidates(ht);return qo(Bt,Lt=>u(Lt)===at)}))(0,Te,Oe))}).map(Q=>({primary:G,triggeringPath:Q}))).fold(()=>{(G=>E.from(G.components()[0]).filter(Q=>js(Q.element,"role")==="menu"))(L).each(G=>{n.onRepositionMenu(L,G,[])})},({primary:G,triggeringPath:Q})=>{n.onRepositionMenu(L,G,Q)})}};return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:Qs(n.tmenuBehaviours,[vt.config({mode:"special",onRight:V((L,W)=>Jh(W.element)?E.none():N(L,W,T.HighlightSubmenu)),onLeft:V((L,W)=>Jh(W.element)?E.none():B(L,W)),onEscape:V((L,W)=>B(L,W).orThunk(()=>n.onEscape(L,W).map(()=>L))),focusIn:(L,W)=>{l.getPrimary().each(G=>{Eg(L,G.element,Qi())})}}),Oo.config({highlightClass:n.markers.selectedMenu,itemClass:n.markers.menu}),wo.config({find:L=>Oo.getHighlighted(L)}),Rt.config({})]),eventOrder:n.eventOrder,apis:H,events:U}},extraApis:{tieredData:(n,r,i)=>({primary:n,menus:r,expansions:i}),singleData:(n,r)=>({primary:n,menus:li(n,r),expansions:{}}),collapseItem:n=>({value:lt(CC()),meta:{text:n}})}}),jn=Fi({name:"InlineView",configFields:[Ee("lazySink"),ho("onShow"),ho("onHide"),ql("onEscape"),zs("inlineBehaviours",[io,nt,Ea]),Ha("fireDismissalEventInstead",[fe("event",Td())]),Ha("fireRepositionEventInstead",[fe("event",Mc())]),fe("getRelated",E.none),fe("isExtraPart",Ne),fe("eventOrder",E.none)],factory:(n,r)=>{const i=(p,b,x,w)=>{const _=n.lazySink(p).getOrDie();io.openWhileCloaked(p,b,()=>Rr.positionWithinBounds(_,p,x,w())),nt.setValue(p,E.some({mode:"position",config:x,getBounds:w}))},l=(p,b,x,w)=>{const _=((k,T,N,B,V)=>{const U=()=>k.lazySink(T),q=B.type==="horizontal"?{layouts:{onLtr:()=>Oh(),onRtl:()=>zg()}}:{},H=L=>(W=>W.length===2)(L)?q:{};return Sf.sketch({dom:{tag:"div"},data:B.data,markers:B.menu.markers,highlightOnOpen:B.menu.highlightOnOpen,fakeFocus:B.menu.fakeFocus,onEscape:()=>(io.close(T),k.onEscape.map(L=>L(T)),E.some(!0)),onExecute:()=>E.some(!0),onOpenMenu:(L,W)=>{Rr.positionWithinBounds(U().getOrDie(),W,N,V())},onOpenSubmenu:(L,W,G,Q)=>{const re=U().getOrDie();Rr.position(re,G,{anchor:{type:"submenu",item:W,...H(Q)}})},onRepositionMenu:(L,W,G)=>{const Q=U().getOrDie();Rr.positionWithinBounds(Q,W,N,V()),xt(G,re=>{const ge=H(re.triggeringPath);Rr.position(Q,re.triggeredMenu,{anchor:{type:"submenu",item:re.triggeringItem,...ge}})})}})})(n,p,b,x,w);io.open(p,_),nt.setValue(p,E.some({mode:"menu",menu:_}))},u=p=>{io.isOpen(p)&&nt.getValue(p).each(b=>{switch(b.mode){case"menu":io.getState(p).each(Sf.repositionMenus);break;case"position":const x=n.lazySink(p).getOrDie();Rr.positionWithinBounds(x,p,b.config,b.getBounds())}})},m={setContent:(p,b)=>{io.setContent(p,b)},showAt:(p,b,x)=>{const w=E.none;i(p,b,x,w)},showWithinBounds:i,showMenuAt:(p,b,x)=>{l(p,b,x,E.none)},showMenuWithinBounds:l,hide:p=>{io.isOpen(p)&&(nt.setValue(p,E.none()),io.close(p))},getContent:p=>io.getState(p),reposition:u,isOpen:io.isOpen};return{uid:n.uid,dom:n.dom,behaviours:Qs(n.inlineBehaviours,[io.config({isPartOf:(p,b,x)=>Js(b,x)||((w,_)=>n.getRelated(w).exists(k=>Js(k,_)))(p,x),getAttachPoint:p=>n.lazySink(p).getOrDie(),onOpen:p=>{n.onShow(p)},onClose:p=>{n.onHide(p)}}),nt.config({store:{mode:"memory",initialValue:E.none()}}),Ea.config({channels:{...c0({isExtraPart:r.isExtraPart,...n.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...vf({...n.fireRepositionEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({}),doReposition:u})}})]),eventOrder:n.eventOrder,apis:m}},apis:{showAt:(n,r,i,l)=>{n.showAt(r,i,l)},showWithinBounds:(n,r,i,l,u)=>{n.showWithinBounds(r,i,l,u)},showMenuAt:(n,r,i,l)=>{n.showMenuAt(r,i,l)},showMenuWithinBounds:(n,r,i,l,u)=>{n.showMenuWithinBounds(r,i,l,u)},hide:(n,r)=>{n.hide(r)},isOpen:(n,r)=>n.isOpen(r),getContent:(n,r)=>n.getContent(r),setContent:(n,r,i)=>{n.setContent(r,i)},reposition:(n,r)=>{n.reposition(r)}}});var jv=tinymce.util.Tools.resolve("tinymce.util.Delay");const Dr=Fi({name:"Button",factory:n=>{const r=C0(n.action),i=n.dom.tag,l=u=>mt(n.dom,"attributes").bind(m=>mt(m,u));return{uid:n.uid,dom:n.dom,components:n.components,events:r,behaviours:Cf(n.buttonBehaviours,[It.config({}),vt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:i==="button"?{type:l("type").getOr("button"),...l("role").map(u=>({role:u})).getOr({})}:{role:n.role.getOr(l("role").getOr("button"))}},eventOrder:n.eventOrder}},configFields:[fe("uid",void 0),Ee("dom"),fe("components",[]),Kc("buttonBehaviours",[It,vt]),zo("action"),zo("role"),fe("eventOrder",{})]}),cm=n=>{const r=ga(n),i=Fn(r),l=(p=>{const b=p.dom.attributes!==void 0?p.dom.attributes:[];return I(b,(x,w)=>w.name==="class"?x:{...x,[w.name]:w.value},{})})(r),u=(p=>Array.prototype.slice.call(p.dom.classList,0))(r),m=i.length===0?{}:{innerHtml:Og(r)};return{tag:Hr(r),classes:u,attributes:l,...m}},Zo=n=>{const r=(i=>i.uid!==void 0)(n)&&Zs(n,"uid")?n.uid:Fs("memento");return{get:i=>i.getSystem().getByUid(r).getOrDie(),getOpt:i=>i.getSystem().getByUid(r).toOptional(),asSpec:()=>({...n,uid:r})}},{entries:z3,setPrototypeOf:ol,isFrozen:G8,getPrototypeOf:qv,getOwnPropertyDescriptor:l1}=Object;let{freeze:Ya,seal:Sl,create:CD}=Object,{apply:_C,construct:kC}=typeof Reflect<"u"&&Reflect;_C||(_C=function(n,r,i){return n.apply(r,i)}),Ya||(Ya=function(n){return n}),Sl||(Sl=function(n){return n}),kC||(kC=function(n,r){return new n(...r)});const _D=El(Array.prototype.forEach),V3=El(Array.prototype.pop),du=El(Array.prototype.push),Ef=El(String.prototype.toLowerCase),SC=El(String.prototype.toString),kD=El(String.prototype.match),lc=El(String.prototype.replace),EC=El(String.prototype.indexOf),TC=El(String.prototype.trim),$i=El(RegExp.prototype.test),Tf=(Gv=TypeError,function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return kC(Gv,r)});var Gv;function El(n){return function(r){for(var i=arguments.length,l=new Array(i>1?i-1:0),u=1;u<i;u++)l[u-1]=arguments[u];return _C(n,r,l)}}function $o(n,r,i){var l;i=(l=i)!==null&&l!==void 0?l:Ef,ol&&ol(n,null);let u=r.length;for(;u--;){let m=r[u];if(typeof m=="string"){const p=i(m);p!==m&&(G8(r)||(r[u]=p),m=p)}n[m]=!0}return n}function Of(n){const r=CD(null);for(const[i,l]of z3(n))r[i]=l;return r}function Kv(n,r){for(;n!==null;){const i=l1(n,r);if(i){if(i.get)return El(i.get);if(typeof i.value=="function")return El(i.value)}n=qv(n)}return function(i){return console.warn("fallback value for",i),null}}const OC=Ya(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),AC=Ya(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Yv=Ya(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),NC=Ya(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Af=Ya(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),RC=Ya(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),$3=Ya(["#text"]),U3=Ya(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Xv=Ya(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),dm=Ya(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),c1=Ya(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),DC=Sl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Jv=Sl(/<%[\w\W]*|[\w\W]*%>/gm),Z3=Sl(/\${[\w\W]*}/gm),Qv=Sl(/^data-[\-\w.\u00B7-\uFFFF]/),MC=Sl(/^aria-[\-\w]+$/),W3=Sl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),SD=Sl(/^(?:\w+script|data):/i),uu=Sl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),j3=Sl(/^html$/i);var q3=Object.freeze({__proto__:null,MUSTACHE_EXPR:DC,ERB_EXPR:Jv,TMPLIT_EXPR:Z3,DATA_ATTR:Qv,ARIA_ATTR:MC,IS_ALLOWED_URI:W3,IS_SCRIPT_OR_DATA:SD,ATTR_WHITESPACE:uu,DOCTYPE_NAME:j3});const Tl=()=>typeof window>"u"?null:window;var Cr=function n(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Tl();const i=be=>n(be);if(i.version="3.0.5",i.removed=[],!r||!r.document||r.document.nodeType!==9)return i.isSupported=!1,i;const l=r.document,u=l.currentScript;let{document:m}=r;const{DocumentFragment:p,HTMLTemplateElement:b,Node:x,Element:w,NodeFilter:_,NamedNodeMap:k=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:T,DOMParser:N,trustedTypes:B}=r,V=w.prototype,U=Kv(V,"cloneNode"),q=Kv(V,"nextSibling"),H=Kv(V,"childNodes"),L=Kv(V,"parentNode");if(typeof b=="function"){const be=m.createElement("template");be.content&&be.content.ownerDocument&&(m=be.content.ownerDocument)}let W,G="";const{implementation:Q,createNodeIterator:re,createDocumentFragment:ge,getElementsByTagName:Te}=m,{importNode:Oe}=l;let Ae={};i.isSupported=typeof z3=="function"&&typeof L=="function"&&Q&&Q.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:tt,ERB_EXPR:at,TMPLIT_EXPR:ht,DATA_ATTR:Bt,ARIA_ATTR:Lt,IS_SCRIPT_OR_DATA:lo,ATTR_WHITESPACE:sn}=q3;let{IS_ALLOWED_URI:zn}=q3,$t=null;const ur=$o({},[...OC,...AC,...Yv,...Af,...$3]);let Zt=null;const fs=$o({},[...U3,...Xv,...dm,...c1]);let tn=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ua=null,rs=null,sr=!0,xi=!0,eb=!1,tb=!0,Nm=!1,Rm=!1,Ux=!1,Kf=!1,Su=!1,Yf=!1,Xf=!1,Jf=!0,cw=!1,Zx=!0,Qf=!1,Dm={},Eu=null;const fn=$o({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let eg=null;const ld=$o({},["audio","video","img","source","image","track"]);let dw=null;const C4=$o({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),uw="http://www.w3.org/1998/Math/MathML",mw="http://www.w3.org/2000/svg",Tu="http://www.w3.org/1999/xhtml";let ob=Tu,_4=!1,zt=null;const Wx=$o({},[uw,mw,Tu],SC);let Xp;const zN=["application/xhtml+xml","text/html"];let ma,Jp=null;const VN=m.createElement("form"),G7=function(be){return be instanceof RegExp||be instanceof Function},Qp=function(be){if(!Jp||Jp!==be){if(be&&typeof be=="object"||(be={}),be=Of(be),Xp=Xp=zN.indexOf(be.PARSER_MEDIA_TYPE)===-1?"text/html":be.PARSER_MEDIA_TYPE,ma=Xp==="application/xhtml+xml"?SC:Ef,$t="ALLOWED_TAGS"in be?$o({},be.ALLOWED_TAGS,ma):ur,Zt="ALLOWED_ATTR"in be?$o({},be.ALLOWED_ATTR,ma):fs,zt="ALLOWED_NAMESPACES"in be?$o({},be.ALLOWED_NAMESPACES,SC):Wx,dw="ADD_URI_SAFE_ATTR"in be?$o(Of(C4),be.ADD_URI_SAFE_ATTR,ma):C4,eg="ADD_DATA_URI_TAGS"in be?$o(Of(ld),be.ADD_DATA_URI_TAGS,ma):ld,Eu="FORBID_CONTENTS"in be?$o({},be.FORBID_CONTENTS,ma):fn,ua="FORBID_TAGS"in be?$o({},be.FORBID_TAGS,ma):{},rs="FORBID_ATTR"in be?$o({},be.FORBID_ATTR,ma):{},Dm="USE_PROFILES"in be&&be.USE_PROFILES,sr=be.ALLOW_ARIA_ATTR!==!1,xi=be.ALLOW_DATA_ATTR!==!1,eb=be.ALLOW_UNKNOWN_PROTOCOLS||!1,tb=be.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Nm=be.SAFE_FOR_TEMPLATES||!1,Rm=be.WHOLE_DOCUMENT||!1,Su=be.RETURN_DOM||!1,Yf=be.RETURN_DOM_FRAGMENT||!1,Xf=be.RETURN_TRUSTED_TYPE||!1,Kf=be.FORCE_BODY||!1,Jf=be.SANITIZE_DOM!==!1,cw=be.SANITIZE_NAMED_PROPS||!1,Zx=be.KEEP_CONTENT!==!1,Qf=be.IN_PLACE||!1,zn=be.ALLOWED_URI_REGEXP||W3,ob=be.NAMESPACE||Tu,tn=be.CUSTOM_ELEMENT_HANDLING||{},be.CUSTOM_ELEMENT_HANDLING&&G7(be.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(tn.tagNameCheck=be.CUSTOM_ELEMENT_HANDLING.tagNameCheck),be.CUSTOM_ELEMENT_HANDLING&&G7(be.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(tn.attributeNameCheck=be.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),be.CUSTOM_ELEMENT_HANDLING&&typeof be.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(tn.allowCustomizedBuiltInElements=be.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Nm&&(xi=!1),Yf&&(Su=!0),Dm&&($t=$o({},[...$3]),Zt=[],Dm.html===!0&&($o($t,OC),$o(Zt,U3)),Dm.svg===!0&&($o($t,AC),$o(Zt,Xv),$o(Zt,c1)),Dm.svgFilters===!0&&($o($t,Yv),$o(Zt,Xv),$o(Zt,c1)),Dm.mathMl===!0&&($o($t,Af),$o(Zt,dm),$o(Zt,c1))),be.ADD_TAGS&&($t===ur&&($t=Of($t)),$o($t,be.ADD_TAGS,ma)),be.ADD_ATTR&&(Zt===fs&&(Zt=Of(Zt)),$o(Zt,be.ADD_ATTR,ma)),be.ADD_URI_SAFE_ATTR&&$o(dw,be.ADD_URI_SAFE_ATTR,ma),be.FORBID_CONTENTS&&(Eu===fn&&(Eu=Of(Eu)),$o(Eu,be.FORBID_CONTENTS,ma)),Zx&&($t["#text"]=!0),Rm&&$o($t,["html","head","body"]),$t.table&&($o($t,["tbody"]),delete ua.tbody),be.TRUSTED_TYPES_POLICY){if(typeof be.TRUSTED_TYPES_POLICY.createHTML!="function")throw Tf('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof be.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Tf('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');W=be.TRUSTED_TYPES_POLICY,G=W.createHTML("")}else W===void 0&&(W=function(wt,Wt){if(typeof wt!="object"||typeof wt.createPolicy!="function")return null;let gn=null;const es="data-tt-policy-suffix";Wt&&Wt.hasAttribute(es)&&(gn=Wt.getAttribute(es));const gs="dompurify"+(gn?"#"+gn:"");try{return wt.createPolicy(gs,{createHTML:as=>as,createScriptURL:as=>as})}catch{return console.warn("TrustedTypes policy "+gs+" could not be created."),null}}(B,u)),W!==null&&typeof G=="string"&&(G=W.createHTML(""));Ya&&Ya(be),Jp=be}},$N=$o({},["mi","mo","mn","ms","mtext"]),k4=$o({},["foreignobject","desc","title","annotation-xml"]),K7=$o({},["title","style","font","a","script"]),fw=$o({},AC);$o(fw,Yv),$o(fw,NC);const S4=$o({},Af);$o(S4,RC);const tg=function(be){du(i.removed,{element:be});try{be.parentNode.removeChild(be)}catch{be.remove()}},eh=function(be,wt){try{du(i.removed,{attribute:wt.getAttributeNode(be),from:wt})}catch{du(i.removed,{attribute:null,from:wt})}if(wt.removeAttribute(be),be==="is"&&!Zt[be])if(Su||Yf)try{tg(wt)}catch{}else try{wt.setAttribute(be,"")}catch{}},E4=function(be){let wt,Wt;if(Kf)be="<remove></remove>"+be;else{const gs=kD(be,/^[\r\n\t ]+/);Wt=gs&&gs[0]}Xp==="application/xhtml+xml"&&ob===Tu&&(be='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+be+"</body></html>");const gn=W?W.createHTML(be):be;if(ob===Tu)try{wt=new N().parseFromString(gn,Xp)}catch{}if(!wt||!wt.documentElement){wt=Q.createDocument(ob,"template",null);try{wt.documentElement.innerHTML=_4?G:gn}catch{}}const es=wt.body||wt.documentElement;return be&&Wt&&es.insertBefore(m.createTextNode(Wt),es.childNodes[0]||null),ob===Tu?Te.call(wt,Rm?"html":"body")[0]:Rm?wt.documentElement:es},UN=function(be){return re.call(be.ownerDocument||be,be,_.SHOW_ELEMENT|_.SHOW_COMMENT|_.SHOW_TEXT,null,!1)},gw=function(be){return typeof x=="object"?be instanceof x:be&&typeof be=="object"&&typeof be.nodeType=="number"&&typeof be.nodeName=="string"},Mm=function(be,wt,Wt){Ae[be]&&_D(Ae[be],gn=>{gn.call(i,wt,Wt,Jp)})},ZN=function(be){let wt;if(Mm("beforeSanitizeElements",be,null),(Wt=be)instanceof T&&(typeof Wt.nodeName!="string"||typeof Wt.textContent!="string"||typeof Wt.removeChild!="function"||!(Wt.attributes instanceof k)||typeof Wt.removeAttribute!="function"||typeof Wt.setAttribute!="function"||typeof Wt.namespaceURI!="string"||typeof Wt.insertBefore!="function"||typeof Wt.hasChildNodes!="function"))return tg(be),!0;var Wt;const gn=ma(be.nodeName);if(Mm("uponSanitizeElement",be,{tagName:gn,allowedTags:$t}),be.hasChildNodes()&&!gw(be.firstElementChild)&&(!gw(be.content)||!gw(be.content.firstElementChild))&&$i(/<[/\w]/g,be.innerHTML)&&$i(/<[/\w]/g,be.textContent))return tg(be),!0;if(!$t[gn]||ua[gn]){if(!ua[gn]&&T4(gn)&&(tn.tagNameCheck instanceof RegExp&&$i(tn.tagNameCheck,gn)||tn.tagNameCheck instanceof Function&&tn.tagNameCheck(gn)))return!1;if(Zx&&!Eu[gn]){const es=L(be)||be.parentNode,gs=H(be)||be.childNodes;if(gs&&es)for(let as=gs.length-1;as>=0;--as)es.insertBefore(U(gs[as],!0),q(be))}return tg(be),!0}return be instanceof w&&!function(es){let gs=L(es);gs&&gs.tagName||(gs={namespaceURI:ob,tagName:"template"});const as=Ef(es.tagName),Ds=Ef(gs.tagName);return!!zt[es.namespaceURI]&&(es.namespaceURI===mw?gs.namespaceURI===Tu?as==="svg":gs.namespaceURI===uw?as==="svg"&&(Ds==="annotation-xml"||$N[Ds]):!!fw[as]:es.namespaceURI===uw?gs.namespaceURI===Tu?as==="math":gs.namespaceURI===mw?as==="math"&&k4[Ds]:!!S4[as]:es.namespaceURI===Tu?!(gs.namespaceURI===mw&&!k4[Ds])&&!(gs.namespaceURI===uw&&!$N[Ds])&&!S4[as]&&(K7[as]||!fw[as]):!(Xp!=="application/xhtml+xml"||!zt[es.namespaceURI]))}(be)?(tg(be),!0):gn!=="noscript"&&gn!=="noembed"&&gn!=="noframes"||!$i(/<\/no(script|embed|frames)/i,be.innerHTML)?(Nm&&be.nodeType===3&&(wt=be.textContent,wt=lc(wt,tt," "),wt=lc(wt,at," "),wt=lc(wt,ht," "),be.textContent!==wt&&(du(i.removed,{element:be.cloneNode()}),be.textContent=wt)),Mm("afterSanitizeElements",be,null),!1):(tg(be),!0)},WN=function(be,wt,Wt){if(Jf&&(wt==="id"||wt==="name")&&(Wt in m||Wt in VN))return!1;if(!(xi&&!rs[wt]&&$i(Bt,wt))){if(!(sr&&$i(Lt,wt))){if(!Zt[wt]||rs[wt]){if(!(T4(be)&&(tn.tagNameCheck instanceof RegExp&&$i(tn.tagNameCheck,be)||tn.tagNameCheck instanceof Function&&tn.tagNameCheck(be))&&(tn.attributeNameCheck instanceof RegExp&&$i(tn.attributeNameCheck,wt)||tn.attributeNameCheck instanceof Function&&tn.attributeNameCheck(wt))||wt==="is"&&tn.allowCustomizedBuiltInElements&&(tn.tagNameCheck instanceof RegExp&&$i(tn.tagNameCheck,Wt)||tn.tagNameCheck instanceof Function&&tn.tagNameCheck(Wt))))return!1}else if(!dw[wt]){if(!$i(zn,lc(Wt,sn,""))){if((wt!=="src"&&wt!=="xlink:href"&&wt!=="href"||be==="script"||EC(Wt,"data:")!==0||!eg[be])&&!(eb&&!$i(lo,lc(Wt,sn,"")))){if(Wt)return!1}}}}}return!0},T4=function(be){return be.indexOf("-")>0},jN=function(be){let wt,Wt,gn,es;Mm("beforeSanitizeAttributes",be,null);const{attributes:gs}=be;if(!gs)return;const as={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Zt};for(es=gs.length;es--;){wt=gs[es];const{name:Ds,namespaceURI:nb}=wt;Wt=Ds==="value"?wt.value:TC(wt.value);const qN=Wt;if(gn=ma(Ds),as.attrName=gn,as.attrValue=Wt,as.keepAttr=!0,as.forceKeepAttr=void 0,Mm("uponSanitizeAttribute",be,as),Wt=as.attrValue,as.forceKeepAttr)continue;if(!as.keepAttr){eh(Ds,be);continue}if(!tb&&$i(/\/>/i,Wt)){eh(Ds,be);continue}Nm&&(Wt=lc(Wt,tt," "),Wt=lc(Wt,at," "),Wt=lc(Wt,ht," "));const GN=ma(be.nodeName);if(WN(GN,gn,Wt)){if(!cw||gn!=="id"&&gn!=="name"||(eh(Ds,be),Wt="user-content-"+Wt),W&&typeof B=="object"&&typeof B.getAttributeType=="function"&&!nb)switch(B.getAttributeType(GN,gn)){case"TrustedHTML":Wt=W.createHTML(Wt);break;case"TrustedScriptURL":Wt=W.createScriptURL(Wt)}if(Wt!==qN)try{nb?be.setAttributeNS(nb,Ds,Wt):be.setAttribute(Ds,Wt)}catch{eh(Ds,be)}}else eh(Ds,be)}Mm("afterSanitizeAttributes",be,null)},Y7=function be(wt){let Wt;const gn=UN(wt);for(Mm("beforeSanitizeShadowDOM",wt,null);Wt=gn.nextNode();)Mm("uponSanitizeShadowNode",Wt,null),ZN(Wt)||(Wt.content instanceof p&&be(Wt.content),jN(Wt));Mm("afterSanitizeShadowDOM",wt,null)};return i.sanitize=function(be){let wt,Wt,gn,es,gs=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_4=!be,_4&&(be="<!-->"),typeof be!="string"&&!gw(be)){if(typeof be.toString!="function")throw Tf("toString is not a function");if(typeof(be=be.toString())!="string")throw Tf("dirty is not a string, aborting")}if(!i.isSupported)return be;if(Ux||Qp(gs),i.removed=[],typeof be=="string"&&(Qf=!1),Qf){if(be.nodeName){const nb=ma(be.nodeName);if(!$t[nb]||ua[nb])throw Tf("root node is forbidden and cannot be sanitized in-place")}}else if(be instanceof x)wt=E4("<!---->"),Wt=wt.ownerDocument.importNode(be,!0),Wt.nodeType===1&&Wt.nodeName==="BODY"||Wt.nodeName==="HTML"?wt=Wt:wt.appendChild(Wt);else{if(!Su&&!Nm&&!Rm&&be.indexOf("<")===-1)return W&&Xf?W.createHTML(be):be;if(wt=E4(be),!wt)return Su?null:Xf?G:""}wt&&Kf&&tg(wt.firstChild);const as=UN(Qf?be:wt);for(;gn=as.nextNode();)ZN(gn)||(gn.content instanceof p&&Y7(gn.content),jN(gn));if(Qf)return be;if(Su){if(Yf)for(es=ge.call(wt.ownerDocument);wt.firstChild;)es.appendChild(wt.firstChild);else es=wt;return(Zt.shadowroot||Zt.shadowrootmode)&&(es=Oe.call(l,es,!0)),es}let Ds=Rm?wt.outerHTML:wt.innerHTML;return Rm&&$t["!doctype"]&&wt.ownerDocument&&wt.ownerDocument.doctype&&wt.ownerDocument.doctype.name&&$i(j3,wt.ownerDocument.doctype.name)&&(Ds="<!DOCTYPE "+wt.ownerDocument.doctype.name+`>
`+Ds),Nm&&(Ds=lc(Ds,tt," "),Ds=lc(Ds,at," "),Ds=lc(Ds,ht," ")),W&&Xf?W.createHTML(Ds):Ds},i.setConfig=function(be){Qp(be),Ux=!0},i.clearConfig=function(){Jp=null,Ux=!1},i.isValidAttribute=function(be,wt,Wt){Jp||Qp({});const gn=ma(be),es=ma(wt);return WN(gn,es,Wt)},i.addHook=function(be,wt){typeof wt=="function"&&(Ae[be]=Ae[be]||[],du(Ae[be],wt))},i.removeHook=function(be){if(Ae[be])return V3(Ae[be])},i.removeHooks=function(be){Ae[be]&&(Ae[be]=[])},i.removeAllHooks=function(){Ae={}},i}();const G3=n=>Cr().sanitize(n);var gi=tinymce.util.Tools.resolve("tinymce.util.I18n");const ED={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},BC="temporary-placeholder",_0=n=>()=>mt(n,BC).getOr("!not found!"),Nf=(n,r)=>{const i=n.toLowerCase();if(gi.isRtl()){const l=((u,m)=>wi(u,m)?u:((p,b)=>p+b)(u,m))(i,"-rtl");return Dt(r,l)?l:i}return i},PC=(n,r)=>mt(r,Nf(n,r)),IC=(n,r)=>{const i=r();return PC(n,i).getOrThunk(_0(i))},LC=()=>Qt("add-focusable",[cn(n=>{Pb(n.element,"svg").each(r=>Kt(r,"focusable","false"))})]),K3=(n,r,i,l)=>{var u,m;const p=(x=>!!gi.isRtl()&&Dt(ED,x))(r)?["tox-icon--flip"]:[],b=mt(i,Nf(r,i)).or(l).getOrThunk(_0(i));return{dom:{tag:n.tag,attributes:(u=n.attributes)!==null&&u!==void 0?u:{},classes:n.classes.concat(p),innerHtml:b},behaviours:Ve([...(m=n.behaviours)!==null&&m!==void 0?m:[],LC()])}},Ol=(n,r,i,l=E.none())=>K3(r,n,i(),l),Y3={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},FC=Fi({name:"Notification",factory:n=>{const r=Zo({dom:cm(`<p>${G3(n.translationProvider(n.text))}</p>`),behaviours:Ve([Rt.config({})])}),i=_=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${_}%`}}}),l=_=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${_}%`}}),u=Zo({dom:{tag:"div",classes:n.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},l(0)],behaviours:Ve([Rt.config({})])}),m={updateProgress:(_,k)=>{_.getSystem().isConnected()&&u.getOpt(_).each(T=>{Rt.set(T,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(k)]},l(k)])})},updateText:(_,k)=>{if(_.getSystem().isConnected()){const T=r.get(_);Rt.set(T,[Nn(k)])}}},p=hn([n.icon.toArray(),n.level.toArray(),n.level.bind(_=>E.from(Y3[_])).toArray()]),b=Zo(Dr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Ol("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":n.translationProvider("Close")}},n.iconProvider)],action:_=>{n.onAction(_)}})),x=((_,k,T)=>{const N=T(),B=qo(_,V=>Dt(N,Nf(V,N)));return K3({tag:"div",classes:["tox-notification__icon"]},B.getOr(BC),N,E.none())})(p,0,n.iconProvider),w=[x,{dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:Ve([Rt.config({})])}];return{uid:n.uid,dom:{tag:"div",attributes:{role:"alert"},classes:n.level.map(_=>["tox-notification","tox-notification--in",`tox-notification--${_}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Ve([It.config({}),Qt("notification-events",[Re(Dc(),_=>{b.getOpt(_).each(It.focus)})])]),components:w.concat(n.progress?[u.asSpec()]:[]).concat(n.closeButton?[b.asSpec()]:[]),apis:m}},configFields:[zo("level"),Ee("progress"),zo("icon"),Ee("onAction"),Ee("text"),Ee("iconProvider"),Ee("translationProvider"),Vn("closeButton",!0)],apis:{updateProgress:(n,r,i)=>{n.updateProgress(r,i)},updateText:(n,r,i)=>{n.updateText(r,i)}}});var Al,d1,pp=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),X3=tinymce.util.Tools.resolve("tinymce.EditorManager"),hp=tinymce.util.Tools.resolve("tinymce.Env");(function(n){n.default="wrap",n.floating="floating",n.sliding="sliding",n.scrolling="scrolling"})(Al||(Al={})),function(n){n.auto="auto",n.top="top",n.bottom="bottom"}(d1||(d1={}));const Ko=n=>r=>r.options.get(n),u1=n=>r=>E.from(n(r)),Rf=n=>{const r=hp.deviceType.isPhone(),i=hp.deviceType.isTablet()||r,l=n.options.register,u=p=>Co(p)||p===!1,m=p=>Co(p)||jo(p);l("skin",{processor:p=>Co(p)||p===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:m,default:Math.max(n.getElement().offsetHeight,400)}),l("width",{processor:m,default:pp.DOM.getStyle(n.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:p=>Co(p)||Kr(p),default:!r}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:p=>Kr(p)||Co(p)||Qa(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),it(9,p=>{l("toolbar"+(p+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:i?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:d1.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:n.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:u,default:"#top"}),l("anchor_bottom",{processor:u,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:p=>p==="both"||Kr(p),default:!hp.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:n.hasPlugin("help")}),l("default_font_stack",{processor:"string[]",default:[]})},m1=Ko("readonly"),HC=Ko("height"),zC=Ko("width"),VC=u1(Ko("min_width")),$C=u1(Ko("min_height")),k0=u1(Ko("max_width")),UC=u1(Ko("max_height")),ZC=u1(Ko("style_formats")),J3=Ko("style_formats_merge"),Q3=Ko("style_formats_autohide"),WC=Ko("content_langs"),f1=Ko("removed_menuitems"),bp=Ko("toolbar_mode"),eE=Ko("toolbar_groups"),jC=Ko("toolbar_location"),TD=Ko("fixed_toolbar_container"),OD=Ko("fixed_toolbar_container_target"),tE=Ko("toolbar_persist"),oE=Ko("toolbar_sticky_offset"),nE=Ko("menubar"),ey=Ko("toolbar"),sE=Ko("file_picker_callback"),rE=Ko("file_picker_validator_handler"),aE=Ko("font_size_input_default_unit"),qC=Ko("file_picker_types"),GC=Ko("typeahead_urls"),KC=Ko("anchor_top"),iE=Ko("anchor_bottom"),YC=Ko("draggable_modal"),lE=Ko("statusbar"),XC=Ko("elementpath"),JC=Ko("branding"),cE=Ko("resize"),dE=Ko("paste_as_text"),uE=Ko("sidebar_show"),mE=Ko("promotion"),QC=Ko("help_accessibility"),fE=Ko("default_font_stack"),rt=n=>n.options.get("skin")===!1,mu=n=>n.options.get("menubar")!==!1,ty=n=>{const r=n.options.get("skin_url");if(rt(n))return r;if(r)return n.documentBaseURI.toAbsolute(r);{const i=n.options.get("skin");return X3.baseURL+"/skins/ui/"+i}},S0=n=>E.from(n.options.get("skin_url")),E0=n=>n.options.get("line_height_formats").split(" "),g1=n=>{const r=ey(n),i=Co(r),l=Qa(r)&&r.length>0;return!p1(n)&&(l||i||r===!0)},e_=n=>{const r=it(9,l=>n.options.get("toolbar"+(l+1))),i=Jt(r,Co);return Xr(i.length>0,i)},p1=n=>e_(n).fold(()=>{const r=ey(n);return wc(r,Co)&&r.length>0},Pt),t_=n=>jC(n)===d1.bottom,gE=n=>{var r;if(!n.inline)return E.none();const i=(r=TD(n))!==null&&r!==void 0?r:"";if(i.length>0)return Zn(ni(),i);const l=OD(n);return _t(l)?E.some(ot(l)):E.none()},xp=n=>n.inline&&gE(n).isSome(),T0=n=>gE(n).getOrThunk(()=>Gi(bs(ot(n.getElement())))),vp=n=>n.inline&&!mu(n)&&!g1(n)&&!p1(n),h1=n=>(n.options.get("toolbar_sticky")||n.inline)&&!xp(n)&&!vp(n),Df=n=>!xp(n)&&n.options.get("ui_mode")==="split",pE=n=>{const r=n.options.get("menu");return Ho(r,i=>({...i,items:i.items}))};var AD=Object.freeze({__proto__:null,get ToolbarMode(){return Al},get ToolbarLocation(){return d1},register:Rf,getSkinUrl:ty,getSkinUrlOption:S0,isReadOnly:m1,isSkinDisabled:rt,getHeightOption:HC,getWidthOption:zC,getMinWidthOption:VC,getMinHeightOption:$C,getMaxWidthOption:k0,getMaxHeightOption:UC,getUserStyleFormats:ZC,shouldMergeStyleFormats:J3,shouldAutoHideStyleFormats:Q3,getLineHeightFormats:E0,getContentLanguages:WC,getRemovedMenuItems:f1,isMenubarEnabled:mu,isMultipleToolbars:p1,isToolbarEnabled:g1,isToolbarPersist:tE,getMultipleToolbarsOption:e_,getUiContainer:T0,useFixedContainer:xp,isSplitUiMode:Df,getToolbarMode:bp,isDraggableModal:YC,isDistractionFree:vp,isStickyToolbar:h1,getStickyToolbarOffset:oE,getToolbarLocation:jC,isToolbarLocationBottom:t_,getToolbarGroups:eE,getMenus:pE,getMenubar:nE,getToolbar:ey,getFilePickerCallback:sE,getFilePickerTypes:qC,useTypeaheadUrls:GC,getAnchorTop:KC,getAnchorBottom:iE,getFilePickerValidatorHandler:rE,getFontSizeInputDefaultUnit:aE,useStatusBar:lE,useElementPath:XC,promotionEnabled:mE,useBranding:JC,getResize:cE,getPasteAsText:dE,getSidebarShow:uE,useHelpAccessibility:QC,getDefaultFontStack:fE});const ND="[data-mce-autocompleter]",o_=n=>Ri(n,ND);var n_;(function(n){n[n.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",n[n.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(n_||(n_={}));var Xc=n_;const s_="tox-menu-nav__js",oy="tox-collection__item",ny="tox-swatch",RD={normal:s_,color:ny},hE="tox-collection__item--enabled",bE="tox-collection__item-icon",r_="tox-collection__item-label",xE="tox-collection__item-caret",Nl="tox-collection__item--active",O0="tox-collection__item-container",vE="tox-collection__item-container--row",yE=n=>mt(RD,n).getOr(s_),DD=n=>n==="color"?"tox-swatches":"tox-menu",a_=n=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:DD(n),tieredMenu:"tox-tiered-menu"}),yp=n=>{const r=a_(n);return{backgroundMenu:r.backgroundMenu,selectedMenu:r.selectedMenu,menu:r.menu,selectedItem:r.selectedItem,item:yE(n)}},MD=(n,r,i)=>{const l=a_(i);return{tag:"div",classes:hn([[l.menu,`tox-menu-${r}-column`],n?[l.hasIcons]:[]])}},BD=[cu.parts.items({})],um=(n,r,i)=>{const l=a_(i);return{dom:{tag:"div",classes:hn([[l.tieredMenu]])},markers:yp(i)}},A0=ue([zo("data"),fe("inputAttributes",{}),fe("inputStyles",{}),fe("tag","input"),fe("inputClasses",[]),ho("onSetValue"),fe("styles",{}),fe("eventOrder",{}),zs("inputBehaviours",[nt,It]),fe("selectOnFocus",!0)]),wE=n=>Ve([It.config({onFocus:n.selectOnFocus?r=>{const i=r.element,l=ec(i);i.dom.setSelectionRange(0,l.length)}:Xe})]),CE=n=>({...wE(n),...Qs(n.inputBehaviours,[nt.config({store:{mode:"manual",...n.data.map(r=>({initialValue:r})).getOr({}),getValue:r=>ec(r.element),setValue:(r,i)=>{ec(r.element)!==i&&Bd(r.element,i)}},onSetValue:n.onSetValue})])}),_E=n=>({tag:n.tag,attributes:{type:"text",...n.inputAttributes},styles:n.inputStyles,classes:n.inputClasses}),mm=Fi({name:"Input",configFields:A0(),factory:(n,r)=>({uid:n.uid,dom:_E(n),components:[],behaviours:CE(n),eventOrder:n.eventOrder})}),kE=lt("refetch-trigger-event"),SE=lt("redirect-menu-item-interaction"),i_="tox-menu__searcher",b1=n=>Zn(n.element,`.${i_}`).bind(r=>n.getSystem().getByDom(r).toOptional()),EE=b1,l_=n=>({fetchPattern:nt.getValue(n),selectionStart:n.element.dom.selectionStart,selectionEnd:n.element.dom.selectionEnd}),PD=n=>{const r=(u,m)=>(m.cut(),E.none()),i=(u,m)=>{const p={interactionEvent:m.event,eventType:m.event.raw.type};return ut(u,SE,p),E.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[oy]},components:[mm.sketch({inputClasses:[i_,"tox-textfield"],inputAttributes:{...n.placeholder.map(u=>({placeholder:n.i18n(u)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Ve([Qt(l,[Re(pl(),u=>{xo(u,kE)}),Re(sa(),(u,m)=>{m.event.raw.key==="Escape"&&m.stop()})]),vt.config({mode:"special",onLeft:r,onRight:r,onSpace:r,onEnter:i,onEscape:i,onUp:i,onDown:i})]),eventOrder:{keydown:[l,vt.name()]}})]}},sy="tox-collection--results__js",c_=n=>{var r;return n.dom?{...n,dom:{...n.dom,attributes:{...(r=n.dom.attributes)!==null&&r!==void 0?r:{},id:lt("aria-item-search-result-id"),"aria-selected":"false"}}}:n},d_=(n,r)=>i=>{const l=hs(i,r);return Ke(l,u=>({dom:n,components:u}))},TE=(n,r)=>{const i=[];let l=[];return xt(n,(u,m)=>{r(u,m)?(l.length>0&&i.push(l),l=[],(Dt(u.dom,"innerHtml")||u.components&&u.components.length>0)&&l.push(u)):l.push(u)}),l.length>0&&i.push(l),Ke(i,u=>({dom:{tag:"div",classes:["tox-collection__group"]},components:u}))},N0=(n,r,i)=>cu.parts.items({preprocess:l=>{const u=Ke(l,i);return n!=="auto"&&n>1?d_({tag:"div",classes:["tox-collection__group"]},n)(u):TE(u,(m,p)=>r[p].type==="separator")}}),u_=(n,r,i=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(n===1?["tox-collection--list"]:["tox-collection--grid"])},components:[N0(n,r,kt)]}),wp=n=>Yr(n,r=>"icon"in r&&r.icon!==void 0),cc=n=>(console.error(zu(n)),console.log(n),E.none()),ry=(n,r,i,l,u)=>{const m=(p=i,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[cu.parts.items({preprocess:b=>TE(b,(x,w)=>p[w].type==="separator")})]});var p;return{value:n,dom:m.dom,components:m.components,items:i}},fm=(n,r,i,l,u)=>{if(u.menuType==="color"){const m=(p=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[cu.parts.items({preprocess:p!=="auto"?d_({tag:"div",classes:["tox-swatches__row"]},p):kt})]}]}))(l);return{value:n,dom:m.dom,components:m.components,items:i}}if(u.menuType==="normal"&&l==="auto"){const m=u_(l,i);return{value:n,dom:m.dom,components:m.components,items:i}}if(u.menuType==="normal"||u.menuType==="searchable"){const m=u.menuType!=="searchable"?u_(l,i):u.searchMode.searchMode==="search-with-field"?((p,b,x)=>{const w=lt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(p===1?["tox-collection--list"]:["tox-collection--grid"])},components:[PD({i18n:gi.translate,placeholder:x.placeholder}),{dom:{tag:"div",classes:[...p===1?["tox-collection--list"]:["tox-collection--grid"],sy],attributes:{id:w}},components:[N0(p,b,c_)]}]}})(l,i,u.searchMode):((p,b,x=!0)=>{const w=lt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",sy].concat(p===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:w}},components:[N0(p,b,c_)]}})(l,i);return{value:n,dom:m.dom,components:m.components,items:i}}if(u.menuType==="listpreview"&&l!=="auto"){const m=(p=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[cu.parts.items({preprocess:d_({tag:"div",classes:["tox-collection__group"]},p)})]}))(l);return{value:n,dom:m.dom,components:m.components,items:i}}return{value:n,dom:MD(r,l,u.menuType),components:BD,items:i}},Rs=us("type"),m_=us("name"),f_=us("label"),fu=us("text"),g_=us("title"),OE=us("icon"),ay=us("value"),K8=oa("fetch"),ID=oa("getSubmenuItems"),x1=oa("onAction"),p_=oa("onItemAction"),Cp=ms("onSetup",()=>Xe),LD=pr("name"),Mf=pr("text"),nl=pr("icon"),iy=pr("tooltip"),h_=pr("label"),AE=pr("shortcut"),NE=ql("select"),ly=Vn("active",!1),RE=Vn("borderless",!1),dc=Vn("enabled",!0),v1=Vn("primary",!1),b_=n=>fe("columns",n),cy=fe("meta",{}),dy=ms("onAction",Xe),_p=n=>Nc("type",n),x_=n=>ws("name","name",Qr(()=>lt(`${n}-name`)),Os),DE=St([Rs,Mf]),FD=St([_p("autocompleteitem"),ly,dc,cy,ay,Mf,nl]),R0=[dc,iy,nl,Mf,Cp],D0=St([Rs,x1].concat(R0)),v_=n=>Bn("toolbarbutton",D0,n),uy=[ly].concat(R0),y_=St(uy.concat([Rs,x1])),ME=n=>Bn("ToggleButton",y_,n),w_=[ms("predicate",Ne),As("scope","node",["node","editor"]),As("position","selection",["node","selection","line"])],HD=R0.concat([_p("contextformbutton"),v1,x1,$r("original",kt)]),BE=uy.concat([_p("contextformbutton"),v1,x1,$r("original",kt)]),PE=R0.concat([_p("contextformbutton")]),zD=uy.concat([_p("contextformtogglebutton")]),VD=ya("type",{contextformbutton:HD,contextformtogglebutton:BE}),$D=St([_p("contextform"),ms("initValue",ue("")),h_,gr("commands",VD),ii("launch",ya("type",{contextformbutton:PE,contextformtogglebutton:zD}))].concat(w_)),UD=St([_p("contexttoolbar"),us("items")].concat(w_)),ZD=[Rs,us("src"),pr("alt"),Pn("classes",[],Os)],WD=St(ZD),C_=[Rs,fu,LD,Pn("classes",["tox-collection__item-label"],Os)],__=St(C_),IE=Ei(()=>_d("type",{cardimage:WD,cardtext:__,cardcontainer:Y8})),Y8=St([Rs,Nc("direction","horizontal"),Nc("align","left"),Nc("valign","middle"),gr("items",IE)]),kp=[dc,Mf,AE,ws("value","value",Qr(()=>lt("menuitem-value")),Mn()),cy],jD=St([Rs,h_,gr("items",IE),Cp,dy].concat(kp)),qD=St([Rs,ly,nl].concat(kp)),sl=[Rs,us("fancytype"),dy],GD=[fe("initData",{})].concat(sl),KD=[ql("select"),vg("initData",{},[Vn("allowCustomColors",!0),Nc("storageKey","default"),Ur("colors",Mn())])].concat(sl),YD=ya("fancytype",{inserttable:GD,colorswatch:KD}),XD=St([Rs,Cp,dy,nl].concat(kp)),JD=St([Rs,ID,Cp,nl].concat(kp)),y1=St([Rs,nl,ly,Cp,x1].concat(kp)),M0=(n,r,i)=>{const l=qr(n.element,"."+i);if(l.length>0){const u=dl(l,m=>{const p=m.dom.getBoundingClientRect().top,b=l[0].dom.getBoundingClientRect().top;return Math.abs(p-b)>r}).getOr(l.length);return E.some({numColumns:u,numRows:Math.ceil(l.length/u)})}return E.none()},B0=n=>((r,i)=>Ve([Qt(r,i)]))(lt("unnamed-events"),n),my=lt("tooltip.exclusive"),Bf=lt("tooltip.show"),Sp=lt("tooltip.hide"),LE=(n,r,i)=>{n.getSystem().broadcastOn([my],{})};var QD=Object.freeze({__proto__:null,hideAllExclusive:LE,setComponents:(n,r,i,l)=>{i.getTooltip().each(u=>{u.getSystem().isConnected()&&Rt.set(u,l)})}}),e6=Object.freeze({__proto__:null,events:(n,r)=>{const i=l=>{r.getTooltip().each(u=>{qc(u),n.onHide(l,u),r.clearTooltip()}),r.clearTimer()};return uo(hn([[Re(Bf,l=>{r.resetTimer(()=>{(u=>{if(!r.isShowing()){LE(u);const m=n.lazySink(u).getOrDie(),p=u.getSystem().build({dom:n.tooltipDom,components:n.tooltipComponents,events:uo(n.mode==="normal"?[Re(Ji(),b=>{xo(u,Bf)}),Re(Rc(),b=>{xo(u,Sp)})]:[]),behaviours:Ve([Rt.config({})])});r.setTooltip(p),eu(m,p),n.onShow(u,p),Rr.position(m,p,{anchor:n.anchor(u)})}})(l)},n.delay)}),Re(Sp,l=>{r.resetTimer(()=>{i(l)},n.delay)}),Re(Va(),(l,u)=>{const m=u;m.universal||bo(m.channels,my)&&i(l)}),Xl(l=>{i(l)})],n.mode==="normal"?[Re(Dc(),l=>{xo(l,Bf)}),Re(Zu(),l=>{xo(l,Sp)}),Re(Ji(),l=>{xo(l,Bf)}),Re(Rc(),l=>{xo(l,Sp)})]:[Re(ln(),(l,u)=>{xo(l,Bf)}),Re(tf(),l=>{xo(l,Sp)})]]))}}),t6=[Ee("lazySink"),Ee("tooltipDom"),fe("exclusive",!0),fe("tooltipComponents",[]),fe("delay",300),As("mode","normal",["normal","follow-highlight"]),fe("anchor",n=>({type:"hotspot",hotspot:n,layouts:{onLtr:ue([Wn,ia,ir,lr,ns,dn]),onRtl:ue([Wn,ia,ir,lr,ns,dn])}})),ho("onHide"),ho("onShow")],o6=Object.freeze({__proto__:null,init:()=>{const n=En(),r=En(),i=()=>{n.on(clearTimeout)},l=ue("not-implemented");return Xs({getTooltip:r.get,isShowing:r.isSet,setTooltip:r.set,clearTooltip:r.clear,clearTimer:i,resetTimer:(u,m)=>{i(),n.set(setTimeout(u,m))},readState:l})}});const FE=Hs({fields:t6,name:"tooltipping",active:e6,state:o6,apis:QD}),k_="silver.readonly",S_=St([La("readonly",Cd)]),fy=(n,r)=>{const i=n.mainUi.outerContainer.element,l=[n.mainUi.mothership,...n.uiMotherships];r&&xt(l,u=>{u.broadcastOn([Oa()],{target:i})}),xt(l,u=>{u.broadcastOn([k_],{readonly:r})})},HE=(n,r)=>{n.on("init",()=>{n.mode.isReadOnly()&&fy(r,!0)}),n.on("SwitchMode",()=>fy(r,n.mode.isReadOnly())),m1(n)&&n.mode.set("readonly")},tr=()=>Ea.config({channels:{[k_]:{schema:S_,onReceive:(n,r)=>{Mt.set(n,r.readonly)}}}}),w1=n=>Mt.config({disabled:n}),Pf=n=>Mt.config({disabled:n,disableClass:"tox-tbtn--disabled"}),gy=n=>Mt.config({disabled:n,disableClass:"tox-tbtn--disabled",useNative:!1}),py=(n,r)=>{const i=n.getApi(r);return l=>{l(i)}},gu=(n,r)=>cn(i=>{py(n,i)(l=>{const u=n.onSetup(l);Ft(u)&&r.set(u)})}),If=(n,r)=>Xl(i=>py(n,i)(r.get())),zE=(n,r)=>Sa((i,l)=>{py(n,i)(n.onAction),n.triggersSubmenu||r!==Xc.CLOSE_ON_EXECUTE||(i.getSystem().isConnected()&&xo(i,kg()),l.stop())}),VE={[ka()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Ep=ze,Tp=(n,r,i,l)=>{const u=Ot(Xe);return{type:"item",dom:r.dom,components:Ep(r.optComponents),data:n.data,eventOrder:VE,hasSubmenu:n.triggersSubmenu,itemBehaviours:Ve([Qt("item-events",[zE(n,i),gu(n,u),If(n,u)]),(m=()=>!n.enabled||l.isDisabled(),Mt.config({disabled:m,disableClass:"tox-collection__item--state-disabled"})),tr(),Rt.config({})].concat(n.itemBehaviours))};var m},Op=n=>({value:n.value,meta:{text:n.text.getOr(""),...n.meta}}),$E=n=>{const r=hp.os.isMacOS()||hp.os.isiOS(),i=r?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},l=n.split("+"),u=Ke(l,m=>{const p=m.toLowerCase().trim();return Dt(i,p)?i[p]:m});return r?u.join(""):u.join("+")},E_=(n,r,i=[bE])=>Ol(n,{tag:"div",classes:i},r),UE=n=>({dom:{tag:"div",classes:[r_]},components:[Nn(gi.translate(n))]}),hy=(n,r)=>({dom:{tag:"div",classes:r,innerHtml:n}}),n6=(n,r)=>({dom:{tag:"div",classes:[r_]},components:[{dom:{tag:n.tag,styles:n.styles},components:[Nn(gi.translate(r))]}]}),s6=n=>({dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[Nn($E(n))]}),ZE=n=>E_("checkmark",n,["tox-collection__item-checkmark"]),WE=n=>{const r=n.map(i=>({attributes:{title:gi.translate(i),id:lt("menu-item")}})).getOr({});return{tag:"div",classes:[s_,oy],...r}},C1=(n,r,i,l=E.none())=>n.presets==="color"?((u,m,p)=>{const b=u.ariaLabel,x=u.value,w=u.iconContent.map(_=>((k,T,N)=>{const B=T();return PC(k,B).or(N).getOrThunk(_0(B))})(_,m.icons,p));return{dom:(()=>{const _=ny,k=w.getOr(""),T=b.map(B=>({title:m.translate(B)})).getOr({}),N={tag:"div",attributes:T,classes:[_]};return x==="custom"?{...N,tag:"button",classes:[...N.classes,"tox-swatches__picker-btn"],innerHtml:k}:x==="remove"?{...N,classes:[...N.classes,"tox-swatch--remove"],innerHtml:k}:_t(x)?{...N,attributes:{...N.attributes,"data-mce-color":x},styles:{"background-color":x},innerHtml:k}:N})(),optComponents:[]}})(n,r,l):((u,m,p,b)=>{const x={tag:"div",classes:[bE]},w=p?u.iconContent.map(N=>Ol(N,x,m.icons,b)).orThunk(()=>E.some({dom:x})):E.none(),_=u.checkMark,k=E.from(u.meta).fold(()=>UE,N=>Dt(N,"style")?Rn(n6,N.style):UE),T=u.htmlContent.fold(()=>u.textContent.map(k),N=>E.some(hy(N,[r_])));return{dom:WE(u.ariaLabel),optComponents:[w,T,u.shortcutContent.map(s6),_,u.caret]}})(n,r,i,l),jE=(n,r)=>mt(n,"tooltipWorker").map(i=>[FE.config({lazySink:r.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:l=>({type:"submenu",item:l,overrides:{maxHeightFunction:nm}}),mode:"follow-highlight",onShow:(l,u)=>{i(m=>{FE.setComponents(l,[Bb({element:ot(m)})])})}})]).getOr([]),qE=(n,r)=>{const i=(l=>pp.DOM.encode(l))(gi.translate(n));if(r.length>0){const l=new RegExp((u=>u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(r),"gi");return i.replace(l,u=>`<span class="tox-autocompleter-highlight">${u}</span>`)}return i},GE=(n,r)=>Ke(n,i=>{switch(i.type){case"cardcontainer":return((m,p)=>{const b=m.direction==="vertical"?"tox-collection__item-container--column":vE,x=m.align==="left"?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right";return{dom:{tag:"div",classes:[O0,b,x,(()=>{switch(m.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}})()]},components:p}})(i,GE(i.items,r));case"cardimage":return((m,p,b)=>({dom:{tag:"img",classes:p,attributes:{src:m,alt:b.getOr("")}}}))(i.src,i.classes,i.alt);case"cardtext":const l=i.name.exists(m=>bo(r.cardText.highlightOn,m)),u=l?E.from(r.cardText.matchText).getOr(""):"";return hy(qE(i.text,u),i.classes)}}),T_=ro(Vi(),lm()),KE=n=>({value:JE(n)}),YE=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,O_=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,XE=n=>YE.test(n)||O_.test(n),JE=n=>gd(n,"#").toUpperCase(),_1=n=>{const r=n.toString(16);return(r.length===1?"0"+r:r).toUpperCase()},P0=n=>{const r=_1(n.red)+_1(n.green)+_1(n.blue);return KE(r)},A_=Math.min,Da=Math.max,by=Math.round,QE=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,eT=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Lf=(n,r,i,l)=>({red:n,green:r,blue:i,alpha:l}),xy=n=>{const r=parseInt(n,10);return r.toString()===n&&r>=0&&r<=255},N_=n=>{let r,i,l;const u=(n.hue||0)%360;let m=n.saturation/100,p=n.value/100;if(m=Da(0,A_(m,1)),p=Da(0,A_(p,1)),m===0)return r=i=l=by(255*p),Lf(r,i,l,1);const b=u/60,x=p*m,w=x*(1-Math.abs(b%2-1)),_=p-x;switch(Math.floor(b)){case 0:r=x,i=w,l=0;break;case 1:r=w,i=x,l=0;break;case 2:r=0,i=x,l=w;break;case 3:r=0,i=w,l=x;break;case 4:r=w,i=0,l=x;break;case 5:r=x,i=0,l=w;break;default:r=i=l=0}return r=by(255*(r+_)),i=by(255*(i+_)),l=by(255*(l+_)),Lf(r,i,l,1)},I0=n=>{const r=(m=>{const p=(x=>({value:x.value.replace(YE,(_,k,T,N)=>k+k+T+T+N+N)}))(m),b=O_.exec(p.value);return b===null?["FFFFFF","FF","FF","FF"]:b})(n),i=parseInt(r[1],16),l=parseInt(r[2],16),u=parseInt(r[3],16);return Lf(i,l,u,1)},tT=(n,r,i,l)=>{const u=parseInt(n,10),m=parseInt(r,10),p=parseInt(i,10),b=parseFloat(l);return Lf(u,m,p,b)},R_=n=>{if(n==="transparent")return E.some(Lf(0,0,0,0));const r=QE.exec(n);if(r!==null)return E.some(tT(r[1],r[2],r[3],"1"));const i=eT.exec(n);return i!==null?E.some(tT(i[1],i[2],i[3],i[4])):E.none()},oT=n=>`rgba(${n.red},${n.green},${n.blue},${n.alpha})`,D_=Lf(255,0,0,1),M_=(n,r)=>{n.dispatch("ResizeContent",r)},nT=(n,r)=>{n.dispatch("TextColorChange",r)},sT=(n,r)=>n.dispatch("ResolveName",{name:r.nodeName.toLowerCase(),target:r}),L0=(n,r)=>()=>{n(),r()},ca=n=>Ap(n,"NodeChange",r=>{r.setEnabled(n.selection.isEditable())}),vy=(n,r)=>i=>{const l=ca(n)(i),u=((m,p)=>b=>{const x=nc(),w=()=>{b.setActive(m.formatter.match(p));const _=m.formatter.formatChanged(p,b.setActive);x.set(_)};return m.initialized?w():m.once("init",w),()=>{m.off("init",w),x.clear()}})(n,r)(i);return()=>{l(),u()}},Ap=(n,r,i)=>l=>{const u=()=>i(l),m=()=>{i(l),n.on(r,u)};return n.initialized?m():n.once("init",m),()=>{n.off("init",m),n.off(r,u)}},rT=n=>r=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("mceToggleFormat",!1,r.format)})},Ui=(n,r)=>()=>n.execCommand(r);var Ff=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const B_={},gm=n=>mt(B_,n).getOrThunk(()=>{const r=`tinymce-custom-colors-${n}`,i=Ff.getItem(r);if(Pl(i)){const u=Ff.getItem("tinymce-custom-colors");Ff.setItem(r,_t(u)?u:"[]")}const l=((u,m=10)=>{const p=Ff.getItem(u),b=Co(p)?JSON.parse(p):[],x=m-(w=b).length<0?w.slice(0,m):w;var w;const _=k=>{x.splice(k,1)};return{add:k=>{Je(x,k).each(_),x.unshift(k),x.length>m&&x.pop(),Ff.setItem(u,JSON.stringify(x))},state:()=>x.slice(0)}})(r,10);return B_[n]=l,l}),P_=(n,r)=>{gm(n).add(r)},k1=(n,r,i)=>({hue:n,saturation:r,value:i}),F0=n=>{let r=0,i=0,l=0;const u=n.red/255,m=n.green/255,p=n.blue/255,b=Math.min(u,Math.min(m,p)),x=Math.max(u,Math.max(m,p));return b===x?(l=b,k1(0,0,100*l)):(r=u===b?3:p===b?1:5,r=60*(r-(u===b?m-p:p===b?u-m:p-u)/(x-b)),i=(x-b)/x,l=x,k1(Math.round(r),Math.round(100*i),Math.round(100*l)))},aT=n=>P0(N_(n)),r6=n=>{return(r=n,XE(r)?E.some({value:JE(r)}):E.none()).orThunk(()=>R_(n).map(P0)).getOrThunk(()=>{const i=document.createElement("canvas");i.height=1,i.width=1;const l=i.getContext("2d");l.clearRect(0,0,i.width,i.height),l.fillStyle="#FFFFFF",l.fillStyle=n,l.fillRect(0,0,1,1);const u=l.getImageData(0,0,1,1).data,m=u[0],p=u[1],b=u[2],x=u[3];return P0(Lf(m,p,b,x))});var r},I_="forecolor",L_="hilitecolor",iT=n=>{const r=[];for(let i=0;i<n.length;i+=2)r.push({text:n[i+1],value:"#"+r6(n[i]).value,icon:"checkmark",type:"choiceitem"});return r},uc=n=>r=>r.options.get(n),H0="#000000",yy=(n,r)=>r===I_&&n.options.isSet("color_map_foreground")?uc("color_map_foreground")(n):r===L_&&n.options.isSet("color_map_background")?uc("color_map_background")(n):uc("color_map")(n),pu=(n,r="default")=>Math.max(5,Math.ceil(Math.sqrt(yy(n,r).length))),F_=(n,r)=>{const i=uc("color_cols")(n),l=pu(n,r);return i===pu(n)?l:i},H_=(n,r="default")=>Math.round(r===I_?uc("color_cols_foreground")(n):r===L_?uc("color_cols_background")(n):uc("color_cols")(n)),lT=uc("custom_colors"),a6=uc("color_default_foreground"),z0=uc("color_default_background"),S1=(n,r)=>{const i=ot(n.selection.getStart()),l=r==="hilitecolor"?Vu(i,u=>{if(Ws(u)){const m=Gn(u,"background-color");return Xr(R_(m).exists(p=>p.alpha!==0),m)}return E.none()}).getOr("rgba(0, 0, 0, 0)"):Gn(i,"color");return R_(l).map(u=>"#"+P0(u).value)},z_=n=>{const r="choiceitem",i={type:r,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return n?[i,{type:r,text:"Custom color",icon:"color-picker",value:"custom"}]:[i]},wy=(n,r,i,l)=>{i==="custom"?U_(n)(u=>{u.each(m=>{P_(r,m),n.execCommand("mceApplyTextcolor",r,m),l(m)})},S1(n,r).getOr(H0)):i==="remove"?(l(""),n.execCommand("mceRemoveTextcolor",r)):(l(i),n.execCommand("mceApplyTextcolor",r,i))},hu=(n,r,i)=>n.concat((l=>Ke(gm(l).state(),u=>({type:"choiceitem",text:u,icon:"checkmark",value:u})))(r).concat(z_(i))),pm=(n,r,i)=>l=>{l(hu(n,r,i))},V_=(n,r,i)=>{const l=r==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";n.setIconFill(l,i)},cT=(n,r)=>{n.setTooltip(r)},$_=(n,r)=>i=>{const l=S1(n,r);return Lr(l,i.toUpperCase())},Jc=(n,r,i)=>{if(an(i))return r==="forecolor"?"Text color":"Background color";const l=r==="forecolor"?"Text color {0}":"Background color {0}",u=hu(yy(n,r),r,!1),m=qo(u,p=>p.value===i).getOr({text:""}).text;return n.translate([l,n.translate(m)])},Cy=(n,r,i,l)=>{n.ui.registry.addSplitButton(r,{tooltip:Jc(n,i,l.get()),presets:"color",icon:r==="forecolor"?"text-color":"highlight-bg-color",select:$_(n,i),columns:H_(n,i),fetch:pm(yy(n,i),i,lT(n)),onAction:u=>{wy(n,i,l.get(),Xe)},onItemAction:(u,m)=>{wy(n,i,m,p=>{l.set(p),nT(n,{name:r,color:p})})},onSetup:u=>{V_(u,r,l.get());const m=p=>{p.name===r&&(V_(u,p.name,p.color),cT(u,Jc(n,i,p.color)))};return n.on("TextColorChange",m),L0(ca(n)(u),()=>{n.off("TextColorChange",m)})}})},dT=(n,r,i,l,u)=>{n.ui.registry.addNestedMenuItem(r,{text:l,icon:r==="forecolor"?"text-color":"highlight-bg-color",onSetup:m=>(cT(m,Jc(n,i,u.get())),V_(m,r,u.get()),ca(n)(m)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:$_(n,i),initData:{storageKey:i},onAction:m=>{wy(n,i,m.value,p=>{u.set(p),nT(n,{name:r,color:p})})}}]})},U_=n=>(r,i)=>{let l=!1;const u={colorpicker:i};n.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:u,onAction:(m,p)=>{p.name==="hex-valid"&&(l=p.value)},onSubmit:m=>{const p=m.getData().colorpicker;l?(r(E.from(p)),m.close()):n.windowManager.alert(n.translate(["Invalid hex color code: {0}",p]))},onClose:Xe,onCancel:()=>{r(E.none())}})},_y=(n,r,i,l,u,m,p,b)=>{const x=wp(r),w=uT(r,i,l,u!=="color"?"normal":"color",m,p,b);return fm(n,x,w,l,{menuType:u})},uT=(n,r,i,l,u,m,p)=>ze(Ke(n,b=>{return b.type==="choiceitem"?(x=b,Bn("choicemenuitem",qD,x)).fold(cc,w=>E.some(((_,k,T,N,B,V,U,q=!0)=>{const H=C1({presets:T,textContent:k?_.text:E.none(),htmlContent:E.none(),ariaLabel:_.text,iconContent:_.icon,shortcutContent:k?_.shortcut:E.none(),checkMark:k?E.some(ZE(U.icons)):E.none(),caret:E.none(),value:_.value},U,q);return X(Tp({data:Op(_),enabled:_.enabled,getApi:L=>({setActive:W=>{so.set(L,W)},isActive:()=>so.isOn(L),isEnabled:()=>!Mt.isDisabled(L),setEnabled:W=>Mt.set(L,!W)}),onAction:L=>N(_.value),onSetup:L=>(L.setActive(B),Xe),triggersSubmenu:!1,itemBehaviours:[]},H,V,U),{toggling:{toggleClass:hE,toggleOnExecute:!1,selected:_.active,exclusive:!0}})})(w,i===1,l,r,m(w.value),u,p,wp(n)))):E.none();var x})),E1=(n,r)=>{const i=yp(r);return n===1?{mode:"menu",moveOnTab:!0}:n==="auto"?{mode:"grid",selector:"."+i.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(r==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:l=>r==="color"?Zn(l.element,"[aria-checked=true]"):E.none()}},Z_=lt("cell-over"),mT=lt("cell-execute"),i6=(n,r,i)=>{const l=m=>ut(m,mT,{row:n,col:r}),u=(m,p)=>{p.stop(),l(m)};return Ar({dom:{tag:"div",attributes:{role:"button","aria-label":i}},behaviours:Ve([Qt("insert-table-picker-cell",[Re(Ji(),It.focus),Re(ka(),l),Re(ci(),u),Re($a(),u)]),so.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),It.config({onFocus:m=>ut(m,Z_,{row:n,col:r})})])})},l6=n=>qn(n,r=>Ke(r,Jo)),V0=(n,r)=>Nn(`${r}x${n}`),W_={inserttable:(n,r)=>{const i=(p=>(b,x)=>p.shared.providers.translate(["{0} columns, {1} rows",x,b]))(r),l=((p,b,x)=>{const w=[];for(let _=0;_<10;_++){const k=[];for(let T=0;T<10;T++){const N=p(_+1,T+1);k.push(i6(_,T,N))}w.push(k)}return w})(i),u=V0(0,0),m=Zo({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[u],behaviours:Ve([Rt.config({})])});return{type:"widget",data:{value:lt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[T_.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:l6(l).concat(m.asSpec()),behaviours:Ve([Qt("insert-table-picker",[cn(p=>{Rt.set(m.get(p),[u])}),Eb(Z_,(p,b,x)=>{const{row:w,col:_}=x.event;((k,T,N,B,V)=>{for(let U=0;U<10;U++)for(let q=0;q<10;q++)so.set(k[U][q],U<=T&&q<=N)})(l,w,_),Rt.set(m.get(p),[V0(w+1,_+1)])}),Eb(mT,(p,b,x)=>{const{row:w,col:_}=x.event;n.onAction({numRows:w+1,numColumns:_+1}),xo(p,kg())})]),vt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:(n,r)=>{const i=((p,b)=>{const x=p.initData.allowCustomColors&&b.colorinput.hasCustomColors();return p.initData.colors.fold(()=>hu(b.colorinput.getColors(p.initData.storageKey),p.initData.storageKey,x),w=>w.concat(z_(x)))})(n,r),l=r.colorinput.getColorCols(n.initData.storageKey),u="color",m={..._y(lt("menu-value"),i,p=>{n.onAction({value:p})},l,u,Xc.CLOSE_ON_EXECUTE,n.select.getOr(Ne),r.shared.providers),markers:yp(u),movement:E1(l,u)};return{type:"widget",data:{value:lt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[T_.widget(cu.sketch(m))]}}},ky=n=>({type:"separator",dom:{tag:"div",classes:[oy,"tox-collection__group-heading"]},components:n.text.map(Nn).toArray()});var c6=Object.freeze({__proto__:null,getCoupled:(n,r,i,l)=>i.getOrCreate(n,r,l),getExistingCoupled:(n,r,i,l)=>i.getExisting(n,r,l)}),d6=[La("others",Ac(mo.value,Mn()))],fT=Object.freeze({__proto__:null,init:()=>{const n={},r=(l,u)=>{if(Ao(l.others).length===0)throw new Error("Cannot find any known coupled components");return mt(n,u)},i=ue({});return Xs({readState:i,getExisting:(l,u,m)=>r(u,m).orThunk(()=>(mt(u.others,m).getOrDie("No information found for coupled component: "+m),E.none())),getOrCreate:(l,u,m)=>r(u,m).getOrThunk(()=>{const p=mt(u.others,m).getOrDie("No information found for coupled component: "+m)(l),b=l.getSystem().build(p);return n[m]=b,b})})}});const Qn=Hs({fields:d6,name:"coupling",apis:c6,state:fT}),Sy=n=>{let r=E.none(),i=[];const l=p=>{u()?m(p):i.push(p)},u=()=>r.isSome(),m=p=>{r.each(b=>{setTimeout(()=>{p(b)},0)})};return n(p=>{u()||(r=E.some(p),xt(i,m),i=[])}),{get:l,map:p=>Sy(b=>{l(x=>{b(p(x))})}),isReady:u}},gT={nu:Sy,pure:n=>Sy(r=>{r(n)})},u6=n=>{setTimeout(()=>{throw n},0)},Hf=n=>{const r=i=>{n().then(i,u6)};return{map:i=>Hf(()=>n().then(i)),bind:i=>Hf(()=>n().then(l=>i(l).toPromise())),anonBind:i=>Hf(()=>n().then(()=>i.toPromise())),toLazy:()=>gT.nu(r),toCached:()=>{let i=null;return Hf(()=>(i===null&&(i=n()),i))},toPromise:n,get:r}},zf=n=>Hf(()=>new Promise(n)),hm=n=>Hf(()=>Promise.resolve(n)),pT=ue("sink"),hT=ue(et({name:pT(),overrides:ue({dom:{tag:"div"},behaviours:Ve([Rr.config({useFixed:Pt})]),events:uo([Yl(sa()),Yl(na()),Yl(ci())])})})),j_=(n,r)=>{const i=n.getHotspot(r).getOr(r),l="hotspot",u=n.getAnchorOverrides();return n.layouts.fold(()=>({type:l,hotspot:i,overrides:u}),m=>({type:l,hotspot:i,overrides:u,layouts:m}))},Ey=(n,r,i,l,u,m,p)=>((x,w,_,k,T,N,B)=>{const V=((q,H,L)=>(0,q.fetch)(L).map(H))(x,w,k),U=T1(k,x);return V.map(q=>q.bind(H=>E.from(Sf.sketch({...N.menu(),uid:Fs(""),data:H,highlightOnOpen:B,onOpenMenu:(L,W)=>{const G=U().getOrDie();Rr.position(G,W,{anchor:_}),io.decloak(T)},onOpenSubmenu:(L,W,G)=>{const Q=U().getOrDie();Rr.position(Q,G,{anchor:{type:"submenu",item:W}}),io.decloak(T)},onRepositionMenu:(L,W,G)=>{const Q=U().getOrDie();Rr.position(Q,W,{anchor:_}),xt(G,re=>{Rr.position(Q,re.triggeredMenu,{anchor:{type:"submenu",item:re.triggeringItem}})})},onEscape:()=>(It.focus(k),io.close(T),E.some(!0))}))))})(n,r,j_(n,i),i,l,u,p).map(x=>(x.fold(()=>{io.isOpen(l)&&io.close(l)},w=>{io.cloak(l),io.open(l,w),m(l)}),l)),m6=(n,r,i,l,u,m,p)=>(io.close(l),hm(l)),Ty=(n,r,i,l,u,m)=>{const p=Qn.getCoupled(i,"sandbox");return(io.isOpen(p)?m6:Ey)(n,r,i,p,l,u,m)},T1=(n,r)=>n.getSystem().getByUid(r.uid+"-"+pT()).map(i=>()=>mo.value(i)).getOrThunk(()=>r.lazySink.fold(()=>()=>mo.error(new Error("No internal sink is specified, nor could an external sink be found")),i=>()=>i(n))),bT=n=>{io.getState(n).each(r=>{Sf.repositionMenus(r)})},Np=(n,r,i)=>{const l=af(),u=T1(r,n);return{dom:{tag:"div",classes:n.sandboxClasses,attributes:{id:l.id,role:"listbox"}},behaviours:Cf(n.sandboxBehaviours,[nt.config({store:{mode:"memory",initialValue:r}}),io.config({onOpen:(m,p)=>{const b=j_(n,r);l.link(r.element),n.matchWidth&&((x,w,_)=>{const k=wo.getCurrent(w).getOr(w),T=On(x.element);_?Ht(k.element,"min-width",T+"px"):((N,B)=>{Xo.set(N,B)})(k.element,T)})(b.hotspot,p,n.useMinWidth),n.onOpen(b,m,p),i!==void 0&&i.onOpen!==void 0&&i.onOpen(m,p)},onClose:(m,p)=>{l.unlink(r.element),i!==void 0&&i.onClose!==void 0&&i.onClose(m,p)},isPartOf:(m,p,b)=>Js(p,b)||Js(r,b),getAttachPoint:()=>u().getOrDie()}),wo.config({find:m=>io.getState(m).bind(p=>wo.getCurrent(p))}),Ea.config({channels:{...c0({isExtraPart:Ne}),...vf({doReposition:bT})}})])}},Oy=n=>{const r=Qn.getCoupled(n,"sandbox");bT(r)},Ay=()=>[fe("sandboxClasses",[]),Kc("sandboxBehaviours",[wo,Ea,io,nt])],xT=ue([Ee("dom"),Ee("fetch"),ho("onOpen"),aa("onExecute"),fe("getHotspot",E.some),fe("getAnchorOverrides",ue({})),Uc(),zs("dropdownBehaviours",[so,Qn,vt,It]),Ee("toggleClass"),fe("eventOrder",{}),zo("lazySink"),fe("matchWidth",!1),fe("useMinWidth",!1),zo("role")].concat(Ay())),f6=ue([Ze({schema:[Pg(),fe("fakeFocus",!1)],name:"menu",defaults:n=>({onExecute:n.onExecute})}),hT()]),Rl=la({name:"Dropdown",configFields:xT(),partFields:f6(),factory:(n,r,i,l)=>{const u=x=>{io.getState(x).each(w=>{Sf.highlightPrimary(w)})},m=(x,w,_)=>Ty(n,kt,x,l,w,_),p={expand:x=>{so.isOn(x)||m(x,Xe,Ra.HighlightNone).get(Xe)},open:x=>{so.isOn(x)||m(x,Xe,Ra.HighlightMenuAndItem).get(Xe)},refetch:x=>Qn.getExistingCoupled(x,"sandbox").fold(()=>m(x,Xe,Ra.HighlightMenuAndItem).map(Xe),w=>Ey(n,kt,x,w,l,Xe,Ra.HighlightMenuAndItem).map(Xe)),isOpen:so.isOn,close:x=>{so.isOn(x)&&m(x,Xe,Ra.HighlightMenuAndItem).get(Xe)},repositionMenus:x=>{so.isOn(x)&&Oy(x)}},b=(x,w)=>(Od(x),E.some(!0));return{uid:n.uid,dom:n.dom,components:r,behaviours:Qs(n.dropdownBehaviours,[so.config({toggleClass:n.toggleClass,aria:{mode:"expanded"}}),Qn.config({others:{sandbox:x=>Np(n,x,{onOpen:()=>so.on(x),onClose:()=>so.off(x)})}}),vt.config({mode:"special",onSpace:b,onEnter:b,onDown:(x,w)=>{if(Rl.isOpen(x)){const _=Qn.getCoupled(x,"sandbox");u(_)}else Rl.open(x);return E.some(!0)},onEscape:(x,w)=>Rl.isOpen(x)?(Rl.close(x),E.some(!0)):E.none()}),It.config({})]),events:C0(E.some(x=>{m(x,u,Ra.HighlightMenuAndItem).get(Xe)})),eventOrder:{...n.eventOrder,[ka()]:["disabling","toggling","alloy.base.behaviour"]},apis:p,domModification:{attributes:{"aria-haspopup":"true",...n.role.fold(()=>({}),x=>({role:x})),...n.dom.tag==="button"?{type:mt(n.dom,"attributes").bind(x=>mt(x,"type")).getOr("button")}:{}}}}},apis:{open:(n,r)=>n.open(r),refetch:(n,r)=>n.refetch(r),expand:(n,r)=>n.expand(r),close:(n,r)=>n.close(r),isOpen:(n,r)=>n.isOpen(r),repositionMenus:(n,r)=>n.repositionMenus(r)}}),q_=(n,r,i)=>{EE(n).each(l=>{var u;((m,p)=>{qs(p.element,"id").each(b=>Kt(m.element,"aria-activedescendant",b))})(l,i),(ra((u=r).element,sy)?E.some(u.element):Zn(u.element,"."+sy)).each(m=>{qs(m,"id").each(p=>Kt(l.element,"aria-controls",p))})}),Kt(i.element,"aria-selected","true")},g6=(n,r,i)=>{Kt(i.element,"aria-selected","false")},vT=n=>Qn.getExistingCoupled(n,"sandbox").bind(b1).map(l_).map(r=>r.fetchPattern).getOr("");var Ny;(function(n){n[n.ContentFocus=0]="ContentFocus",n[n.UiFocus=1]="UiFocus"})(Ny||(Ny={}));const p6=(n,r,i,l,u)=>{const m=i.shared.providers,p=x=>u?{...x,shortcut:E.none(),icon:x.text.isSome()?E.none():x.icon}:x;switch(n.type){case"menuitem":return(b=n,Bn("menuitem",XD,b)).fold(cc,x=>E.some(((w,_,k,T=!0)=>{const N=C1({presets:"normal",iconContent:w.icon,textContent:w.text,htmlContent:E.none(),ariaLabel:w.text,caret:E.none(),checkMark:E.none(),shortcutContent:w.shortcut},k,T);return Tp({data:Op(w),getApi:B=>({isEnabled:()=>!Mt.isDisabled(B),setEnabled:V=>Mt.set(B,!V)}),enabled:w.enabled,onAction:w.onAction,onSetup:w.onSetup,triggersSubmenu:!1,itemBehaviours:[]},N,_,k)})(p(x),r,m,l)));case"nestedmenuitem":return(x=>Bn("nestedmenuitem",JD,x))(n).fold(cc,x=>E.some(((w,_,k,T=!0,N=!1)=>{const B=N?(V=k.icons,E_("chevron-down",V,[xE])):(q=>E_("chevron-right",q,[xE]))(k.icons);var V;const U=C1({presets:"normal",iconContent:w.icon,textContent:w.text,htmlContent:E.none(),ariaLabel:w.text,caret:E.some(B),checkMark:E.none(),shortcutContent:w.shortcut},k,T);return Tp({data:Op(w),getApi:q=>({isEnabled:()=>!Mt.isDisabled(q),setEnabled:H=>Mt.set(q,!H),setIconFill:(H,L)=>{Zn(q.element,`svg path[class="${H}"], rect[class="${H}"]`).each(W=>{Kt(W,"fill",L)})},setTooltip:H=>{const L=k.translate(H);ki(q.element,{"aria-label":L,title:L})}}),enabled:w.enabled,onAction:Xe,onSetup:w.onSetup,triggersSubmenu:!0,itemBehaviours:[]},U,_,k)})(p(x),r,m,l,u)));case"togglemenuitem":return(x=>Bn("togglemenuitem",y1,x))(n).fold(cc,x=>E.some(((w,_,k,T=!0)=>{const N=C1({iconContent:w.icon,textContent:w.text,htmlContent:E.none(),ariaLabel:w.text,checkMark:E.some(ZE(k.icons)),caret:E.none(),shortcutContent:w.shortcut,presets:"normal",meta:w.meta},k,T);return X(Tp({data:Op(w),enabled:w.enabled,getApi:B=>({setActive:V=>{so.set(B,V)},isActive:()=>so.isOn(B),isEnabled:()=>!Mt.isDisabled(B),setEnabled:V=>Mt.set(B,!V)}),onAction:w.onAction,onSetup:w.onSetup,triggersSubmenu:!1,itemBehaviours:[]},N,_,k),{toggling:{toggleClass:hE,toggleOnExecute:!1,selected:w.active}})})(p(x),r,m,l)));case"separator":return(x=>Bn("separatormenuitem",DE,x))(n).fold(cc,x=>E.some(ky(x)));case"fancymenuitem":return(x=>Bn("fancymenuitem",YD,x))(n).fold(cc,x=>((w,_)=>mt(W_,w.fancytype).map(k=>k(w,_)))(x,i));default:return console.error("Unknown item in general menu",n),E.none()}var b},yT=(n,r,i,l,u,m,p)=>{const b=l===1,x=!b||wp(n);return ze(Ke(n,w=>{switch(w.type){case"separator":return(_=w,Bn("Autocompleter.Separator",DE,_)).fold(cc,k=>E.some(ky(k)));case"cardmenuitem":return(k=>Bn("cardmenuitem",jD,k))(w).fold(cc,k=>E.some(((T,N,B,V)=>{const U={dom:WE(T.label),optComponents:[E.some({dom:{tag:"div",classes:[O0,vE]},components:GE(T.items,V)})]};return Tp({data:Op({text:E.none(),...T}),enabled:T.enabled,getApi:q=>({isEnabled:()=>!Mt.isDisabled(q),setEnabled:H=>{Mt.set(q,!H),xt(qr(q.element,"*"),L=>{q.getSystem().getByDom(L).each(W=>{W.hasConfigured(Mt)&&Mt.set(W,!H)})})}}),onAction:T.onAction,onSetup:T.onSetup,triggersSubmenu:!1,itemBehaviours:E.from(V.itemBehaviours).getOr([])},U,N,B.providers)})({...k,onAction:T=>{k.onAction(T),i(k.value,k.meta)}},u,m,{itemBehaviours:jE(k.meta,m),cardText:{matchText:r,highlightOn:p}})));default:return(k=>Bn("Autocompleter.Item",FD,k))(w).fold(cc,k=>E.some(((T,N,B,V,U,q,H,L=!0)=>{const W=C1({presets:V,textContent:E.none(),htmlContent:B?T.text.map(G=>qE(G,N)):E.none(),ariaLabel:T.text,iconContent:T.icon,shortcutContent:E.none(),checkMark:E.none(),caret:E.none(),value:T.value},H.providers,L,T.icon);return Tp({data:Op(T),enabled:T.enabled,getApi:ue({}),onAction:G=>U(T.value,T.meta),onSetup:ue(Xe),triggersSubmenu:!1,itemBehaviours:jE(T.meta,H)},W,q,H.providers)})(k,r,b,"normal",i,u,m,x)))}var _}))},$0=(n,r,i,l,u,m)=>{const p=wp(r),b=ze(Ke(r,w=>{const _=k=>p6(k,i,l,(T=>u?!Dt(T,"text"):p)(k),u);return w.type==="nestedmenuitem"&&w.getSubmenuItems().length<=0?_({...w,enabled:!1}):_(w)})),x=(w=>w.searchMode==="no-search"?{menuType:"normal"}:{menuType:"searchable",searchMode:w})(m);return(u?ry:fm)(n,p,b,1,x)},U0=n=>Sf.singleData(n.value,n),G_=(n,r)=>{const i=lt("autocompleter"),l=Ot(!1),u=Ot(!1),m=Ar(jn.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:i}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Ve([Qt("dismissAutocompleter",[Re(Td(),()=>_()),Re(ln(),(N,B)=>{qs(B.event.target,"id").each(V=>Kt(ot(n.getBody()),"aria-activedescendant",V))})])]),lazySink:r.getSink})),p=()=>jn.isOpen(m),b=u.get,x=()=>{if(p()){jn.hide(m),n.dom.remove(i,!1);const N=ot(n.getBody());qs(N,"aria-owns").filter(B=>B===i).each(()=>{Sn(N,"aria-owns"),Sn(N,"aria-activedescendant")})}},w=()=>jn.getContent(m).bind(N=>ul(N.components(),0)),_=()=>n.execCommand("mceAutocompleterClose"),k=N=>{const B=(V=>{const U=_r(V,q=>E.from(q.columns)).getOr(1);return qn(V,q=>{const H=q.items;return yT(H,q.matchText,(L,W)=>{const G=n.selection.getRng();((Q,re)=>o_(ot(re.startContainer)).map(ge=>{const Te=Q.createRng();return Te.selectNode(ge.dom),Te}))(n.dom,G).each(Q=>{const re={hide:()=>_(),reload:ge=>{x(),n.execCommand("mceAutocompleterReload",!1,{fetchOptions:ge})}};l.set(!0),q.onAction(re,Q,L,W),l.set(!1)})},U,Xc.BUBBLE_TO_SANDBOX,r,q.highlightOn)})})(N);B.length>0?(((V,U)=>{var q;(q=ot(n.getBody()),Zn(q,ND)).each(H=>{const L=_r(V,W=>E.from(W.columns)).getOr(1);jn.showMenuAt(m,{anchor:{type:"node",root:ot(n.getBody()),node:E.from(H)}},((W,G,Q,re)=>{const ge=E1(G,re),Te=yp(re);return{data:U0({...W,movement:ge,menuBehaviours:B0(G!=="auto"?[]:[cn((Oe,Ae)=>{M0(Oe,4,Te.item).each(({numColumns:tt,numRows:at})=>{vt.setGridSize(Oe,at,tt)})})])}),menu:{markers:yp(re),fakeFocus:Q===Ny.ContentFocus}}})(fm("autocompleter-value",!0,U,L,{menuType:"normal"}),L,Ny.ContentFocus,"normal"))}),w().each(Oo.highlightFirst)})(N,B),Kt(ot(n.getBody()),"aria-owns",i),n.inline||T()):x()},T=()=>{n.dom.get(i)&&n.dom.remove(i,!1);const N=n.getDoc().documentElement,B=n.selection.getNode(),V=(U=>nf(U,!0))(m.element);Ki(V,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${B.offsetTop}px`,left:`${B.offsetLeft}px`}),n.dom.add(N,V.dom),Zn(V,'[role="menu"]').each(U=>{Mo(U,"position"),Mo(U,"max-height")})};n.on("AutocompleterStart",({lookupData:N})=>{u.set(!0),l.set(!1),k(N)}),n.on("AutocompleterUpdate",({lookupData:N})=>k(N)),n.on("AutocompleterEnd",()=>{x(),u.set(!1),l.set(!1)}),((N,B)=>{const V=(q,H)=>{ut(q,sa(),{raw:H})},U=()=>N.getMenu().bind(Oo.getHighlighted);B.on("keydown",q=>{const H=q.which;N.isActive()&&(N.isMenuOpen()?H===13?(U().each(Od),q.preventDefault()):H===40?(U().fold(()=>{N.getMenu().each(Oo.highlightFirst)},L=>{V(L,q)}),q.preventDefault(),q.stopImmediatePropagation()):H!==37&&H!==38&&H!==39||U().each(L=>{V(L,q),q.preventDefault(),q.stopImmediatePropagation()}):H!==13&&H!==38&&H!==40||N.cancelIfNecessary())}),B.on("NodeChange",q=>{N.isActive()&&!N.isProcessingAction()&&o_(ot(q.element)).isNone()&&N.cancelIfNecessary()})})({cancelIfNecessary:_,isMenuOpen:p,isActive:b,isProcessingAction:l.get,getMenu:w},n)},h6=["visible","hidden","clip"],wT=n=>ti(n).length>0&&!bo(h6,n),CT=n=>{if(Sr(n)){const r=Gn(n,"overflow-x"),i=Gn(n,"overflow-y");return wT(r)||wT(i)}return!1},Rp=(n,r)=>Df(n)?(i=>{const l=Fh(i,CT),u=l.length===0?ls(i).map(bd).map(m=>Fh(m,CT)).getOr([]):l;return Et(u).map(m=>({element:m,others:u.slice(1)}))})(r):E.none(),Dp=n=>{const r=[...Ke(n.others,Gs),Xn()];return((i,l)=>I(l,(u,m)=>Ym(u,m),i))(Gs(n.element),r)},O1=(n,r,i)=>Ri(n,r,i).isSome(),_T=(n,r)=>{let i=null;return{cancel:()=>{i!==null&&(clearTimeout(i),i=null)},schedule:(...l)=>{i=setTimeout(()=>{n.apply(null,l),i=null},r)}}},kT=n=>{const r=n.raw;return r.touches===void 0||r.touches.length!==1?E.none():E.some(r.touches[0])},b6=(n,r)=>{const i={stopBackspace:!0,...r},l=(k=>{const T=En(),N=Ot(!1),B=_T(U=>{k.triggerEvent(Wu(),U),N.set(!0)},400),V=en([{key:Gl(),value:U=>(kT(U).each(q=>{B.cancel();const H={x:q.clientX,y:q.clientY,target:U.target};B.schedule(U),N.set(!1),T.set(H)}),E.none())},{key:$u(),value:U=>(B.cancel(),kT(U).each(q=>{T.on(H=>{((L,W)=>{const G=Math.abs(L.clientX-W.x),Q=Math.abs(L.clientY-W.y);return G>5||Q>5})(q,H)&&T.clear()})}),E.none())},{key:Kl(),value:U=>(B.cancel(),T.get().filter(q=>Go(q.target,U.target)).map(q=>N.get()?(U.prevent(),!1):k.triggerEvent($a(),U)))}]);return{fireIfReady:(U,q)=>mt(V,q).bind(H=>H(U))}})(i),u=Ke(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),k=>yr(n,k,T=>{l.fireIfReady(T,k).each(N=>{N&&T.kill()}),i.triggerEvent(k,T)&&T.kill()})),m=En(),p=yr(n,"paste",k=>{l.fireIfReady(k,"paste").each(T=>{T&&k.kill()}),i.triggerEvent("paste",k)&&k.kill(),m.set(setTimeout(()=>{i.triggerEvent(dt(),k)},0))}),b=yr(n,"keydown",k=>{i.triggerEvent("keydown",k)?k.kill():i.stopBackspace&&(T=>T.raw.which===WR[0]&&!bo(["input","textarea"],Hr(T.target))&&!O1(T.target,'[contenteditable="true"]'))(k)&&k.prevent()}),x=yr(n,"focusin",k=>{i.triggerEvent("focusin",k)&&k.kill()}),w=En(),_=yr(n,"focusout",k=>{i.triggerEvent("focusout",k)&&k.kill(),w.set(setTimeout(()=>{i.triggerEvent(Zu(),k)},0))});return{unbind:()=>{xt(u,k=>{k.unbind()}),b.unbind(),x.unbind(),_.unbind(),p.unbind(),m.on(clearTimeout),w.on(clearTimeout)}}},ST=(n,r)=>{const i=mt(n,"target").getOr(r);return Ot(i)},Z0=Zr([{stopped:[]},{resume:["element"]},{complete:[]}]),ET=(n,r,i,l,u,m)=>{const p=n(r,l),b=((x,w)=>{const _=Ot(!1),k=Ot(!1);return{stop:()=>{_.set(!0)},cut:()=>{k.set(!0)},isStopped:_.get,isCut:k.get,event:x,setSource:w.set,getSource:w.get}})(i,u);return p.fold(()=>(m.logEventNoHandlers(r,l),Z0.complete()),x=>{const w=x.descHandler;return hh(w)(b),b.isStopped()?(m.logEventStopped(r,x.element,w.purpose),Z0.stopped()):b.isCut()?(m.logEventCut(r,x.element,w.purpose),Z0.complete()):Ci(x.element).fold(()=>(m.logNoParent(r,x.element,w.purpose),Z0.complete()),_=>(m.logEventResponse(r,x.element,w.purpose),Z0.resume(_)))})},K_=(n,r,i,l,u,m)=>ET(n,r,i,l,u,m).fold(Pt,p=>K_(n,r,i,p,u,m),Ne),TT=(n,r,i,l,u)=>{const m=ST(i,l);return K_(n,r,i,l,m,u)},x6=()=>{const n=(()=>{const l={};return{registerId:(u,m,p)=>{In(p,(b,x)=>{const w=l[x]!==void 0?l[x]:{};w[m]=((_,k)=>({cHandler:Rn.apply(void 0,[_.handler].concat(k)),purpose:_.purpose}))(b,u),l[x]=w})},unregisterId:u=>{In(l,(m,p)=>{Dt(m,u)&&delete m[u]})},filterByType:u=>mt(l,u).map(m=>Dn(m,(p,b)=>((x,w)=>({id:x,descHandler:w}))(b,p))).getOr([]),find:(u,m,p)=>mt(l,m).bind(b=>Vu(p,x=>((w,_)=>Rd(_).bind(k=>mt(w,k)).map(k=>((T,N)=>({element:T,descHandler:N}))(_,k)))(b,x),u))}})(),r={},i=l=>{Rd(l.element).each(u=>{delete r[u],n.unregisterId(u)})};return{find:(l,u,m)=>n.find(l,u,m),filter:l=>n.filterByType(l),register:l=>{const u=(p=>{const b=p.element;return Rd(b).getOrThunk(()=>((x,w)=>{const _=lt(Nd+"uid-");return Ns(w,_),_})(0,p.element))})(l);Zs(r,u)&&((p,b)=>{const x=r[b];if(x!==p)throw new Error('The tagId "'+b+'" is already used by: '+Jl(x.element)+`
Cannot use it for: `+Jl(p.element)+`
The conflicting element is`+(Ps(x.element)?" ":" not ")+"already in the DOM");i(p)})(l,u);const m=[l];n.registerId(m,u,l.events),r[u]=l},unregister:i,getById:l=>mt(r,l)}},Qc=Fi({name:"Container",factory:n=>{const{attributes:r,...i}=n.dom;return{uid:n.uid,dom:{tag:"div",attributes:{role:"presentation",...r},...i},components:n.components,behaviours:wf(n.containerBehaviours),events:n.events,domModification:n.domModification,eventOrder:n.eventOrder}},configFields:[fe("components",[]),zs("containerBehaviours",[]),fe("events",{}),fe("domModification",{}),fe("eventOrder",{})]}),Y_=n=>{const r=U=>Ci(n.element).fold(Pt,q=>Go(U,q)),i=x6(),l=(U,q)=>i.find(r,U,q),u=b6(n.element,{triggerEvent:(U,q)=>Lb(U,q.target,H=>((L,W,G,Q)=>TT(L,W,G,G.target,Q))(l,U,q,H))}),m={debugInfo:ue("real"),triggerEvent:(U,q,H)=>{Lb(U,q,L=>TT(l,U,H,q,L))},triggerFocus:(U,q)=>{Rd(U).fold(()=>{Ga(U)},H=>{Lb(za(),U,L=>(((W,G,Q,re,ge)=>{const Te=ST(Q,re);ET(W,G,Q,re,Te,ge)})(l,za(),{originator:q,kill:Xe,prevent:Xe,target:U},U,L),!1))})},triggerEscape:(U,q)=>{m.triggerEvent("keydown",U.element,q.event)},getByUid:U=>B(U),getByDom:U=>V(U),build:Ar,buildOrPatch:yh,addToGui:U=>{x(U)},removeFromGui:U=>{w(U)},addToWorld:U=>{p(U)},removeFromWorld:U=>{b(U)},broadcast:U=>{k(U)},broadcastOn:(U,q)=>{T(U,q)},broadcastEvent:(U,q)=>{N(U,q)},isConnected:Pt},p=U=>{U.connect(m),pa(U.element)||(i.register(U),xt(U.components(),p),m.triggerEvent(bl(),U.element,{target:U.element}))},b=U=>{pa(U.element)||(xt(U.components(),b),i.unregister(U)),U.disconnect()},x=U=>{eu(n,U)},w=U=>{qc(U)},_=U=>{const q=i.filter(Va());xt(q,H=>{const L=H.descHandler;hh(L)(U)})},k=U=>{_({universal:!0,data:U})},T=(U,q)=>{_({universal:!1,channels:U,data:q})},N=(U,q)=>((H,L,W)=>{const G=(Q=>{const re=Ot(!1);return{stop:()=>{re.set(!0)},cut:Xe,isStopped:re.get,isCut:Ne,event:Q,setSource:Bs("Cannot set source of a broadcasted event"),getSource:Bs("Cannot get source of a broadcasted event")}})(L);return xt(H,Q=>{const re=Q.descHandler;hh(re)(G)}),G.isStopped()})(i.filter(U),q),B=U=>i.getById(U).fold(()=>mo.error(new Error('Could not find component with uid: "'+U+'" in system.')),mo.value),V=U=>{const q=Rd(U).getOr("not found");return B(q)};return p(n),{root:n,element:n.element,destroy:()=>{u.unbind(),Is(n.element)},add:x,remove:w,getByUid:B,getByDom:V,addToWorld:p,removeFromWorld:b,broadcast:k,broadcastOn:T,broadcastEvent:N}},v6=ue([fe("prefix","form-field"),zs("fieldBehaviours",[wo,nt])]),Mp=ue([et({schema:[Ee("dom")],name:"label"}),et({factory:{sketch:n=>({uid:n.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:n.text}})},schema:[Ee("text")],name:"aria-descriptor"}),He({factory:{sketch:n=>{const r=((i,l)=>{const u={};return In(i,(m,p)=>{bo(l,p)||(u[p]=m)}),u})(n,["factory"]);return n.factory.sketch(r)}},schema:[Ee("factory")],name:"field"})]),Wo=la({name:"FormField",configFields:v6(),partFields:Mp(),factory:(n,r,i,l)=>{const u=Qs(n.fieldBehaviours,[wo.config({find:b=>Fo(b,n,"field")}),nt.config({store:{mode:"manual",getValue:b=>wo.getCurrent(b).bind(nt.getValue),setValue:(b,x)=>{wo.getCurrent(b).each(w=>{nt.setValue(w,x)})}}})]),m=uo([cn((b,x)=>{const w=Yc(b,n,["label","field","aria-descriptor"]);w.field().each(_=>{const k=lt(n.prefix);w.label().each(T=>{Kt(T.element,"for",k),Kt(_.element,"id",k)}),w["aria-descriptor"]().each(T=>{const N=lt(n.prefix);Kt(T.element,"id",N),Kt(_.element,"aria-describedby",N)})})})]),p={getField:b=>Fo(b,n,"field"),getLabel:b=>Fo(b,n,"label")};return{uid:n.uid,dom:n.dom,components:r,behaviours:u,events:m,apis:p}},apis:{getField:(n,r)=>n.getField(r),getLabel:(n,r)=>n.getLabel(r)}});var y6=Object.freeze({__proto__:null,exhibit:(n,r)=>qa({attributes:en([{key:r.tabAttr,value:"true"}])})}),Bp=[fe("tabAttr","data-alloy-tabstop")];const Hn=Hs({fields:Bp,name:"tabstopping",active:y6});var w6=tinymce.util.Tools.resolve("tinymce.html.Entities");const mc=(n,r,i,l)=>{const u=C6(n,r,i,l);return Wo.sketch(u)},C6=(n,r,i,l)=>({dom:OT(i),components:n.toArray().concat([r]),fieldBehaviours:Ve(l)}),OT=n=>({tag:"div",classes:["tox-form__group"].concat(n)}),Gr=(n,r)=>Wo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Nn(r.translate(n))]}),pi=lt("form-component-change"),A1=lt("form-close"),bm=lt("form-cancel"),bu=lt("form-action"),Pp=lt("form-submit"),X_=lt("form-block"),J_=lt("form-unblock"),AT=lt("form-tabchange"),W0=lt("form-resize"),Q_=(n,r,i)=>{const l=n.label.map(k=>Gr(k,r)),u=r.icons(),m=k=>(T,N)=>{Ri(N.event.target,"[data-collection-item-value]").each(B=>{k(T,N,B,js(B,"data-collection-item-value"))})},p=m((k,T,N,B)=>{T.stop(),r.isDisabled()||ut(k,bu,{name:n.name,value:B})}),b=[Re(Ji(),m((k,T,N)=>{Ga(N)})),Re(ci(),p),Re($a(),p),Re(Dc(),m((k,T,N)=>{Zn(k.element,"."+Nl).each(B=>{Un(B,Nl)}),$n(N,Nl)})),Re(Cg(),m(k=>{Zn(k.element,"."+Nl).each(T=>{Un(T,Nl)})})),Sa(m((k,T,N,B)=>{ut(k,bu,{name:n.name,value:B})}))],x=(k,T)=>Ke(qr(k.element,".tox-collection__item"),T),w=Wo.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(n.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:kt},behaviours:Ve([Mt.config({disabled:r.isDisabled,onDisabled:k=>{x(k,T=>{$n(T,"tox-collection__item--state-disabled"),Kt(T,"aria-disabled",!0)})},onEnabled:k=>{x(k,T=>{Un(T,"tox-collection__item--state-disabled"),Sn(T,"aria-disabled")})}}),tr(),Rt.config({}),nt.config({store:{mode:"memory",initialValue:i.getOr([])},onSetValue:(k,T)=>{((N,B)=>{const V=Ke(B,H=>{const L=gi.translate(H.text),W=n.columns===1?`<div class="tox-collection__item-label">${L}</div>`:"",G=`<div class="tox-collection__item-icon">${(ge=>{var Te;return(Te=u[ge])!==null&&Te!==void 0?Te:ge})(H.icon)}</div>`,Q={_:" "," - ":" ","-":" "},re=L.replace(/\_| \- |\-/g,ge=>Q[ge]);return`<div class="tox-collection__item${r.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${w6.encodeAllRaw(H.value)}" title="${re}" aria-label="${re}">${G}${W}</div>`}),U=n.columns!=="auto"&&n.columns>1?hs(V,n.columns):[V],q=Ke(U,H=>`<div class="tox-collection__group">${H.join("")}</div>`);Wa(N.element,q.join(""))})(k,T),n.columns==="auto"&&M0(k,5,"tox-collection__item").each(({numRows:N,numColumns:B})=>{vt.setGridSize(k,N,B)}),xo(k,W0)}}),Hn.config({}),vt.config((_=n.columns,_===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:_==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:`.${oy}`}})),Qt("collection-events",b)]),eventOrder:{[ka()]:["disabling","alloy.base.behaviour","collection-events"]}});var _;return mc(l,w,["tox-form__group--collection"],[])},NT=["input","textarea"],ek=n=>{const r=Hr(n);return bo(NT,r)},tk=(n,r)=>{const i=r.getRoot(n).getOr(n.element);Un(i,r.invalidClass),r.notify.each(l=>{ek(n.element)&&Kt(n.element,"aria-invalid",!1),l.getContainer(n).each(u=>{Wa(u,l.validHtml)}),l.onValid(n)})},RT=(n,r,i,l)=>{const u=r.getRoot(n).getOr(n.element);$n(u,r.invalidClass),r.notify.each(m=>{ek(n.element)&&Kt(n.element,"aria-invalid",!0),m.getContainer(n).each(p=>{Wa(p,l)}),m.onInvalid(n,l)})},DT=(n,r,i)=>r.validator.fold(()=>hm(mo.value(!0)),l=>l.validate(n)),Ry=(n,r,i)=>(r.notify.each(l=>{l.onValidate(n)}),DT(n,r).map(l=>n.getSystem().isConnected()?l.fold(u=>(RT(n,r,0,u),mo.error(u)),u=>(tk(n,r),mo.value(u))):mo.error("No longer in system")));var _6=Object.freeze({__proto__:null,markValid:tk,markInvalid:RT,query:DT,run:Ry,isInvalid:(n,r)=>{const i=r.getRoot(n).getOr(n.element);return ra(i,r.invalidClass)}}),ok=Object.freeze({__proto__:null,events:(n,r)=>n.validator.map(i=>uo([Re(i.onEvent,l=>{Ry(l,n).get(kt)})].concat(i.validateOnLoad?[cn(l=>{Ry(l,n).get(Xe)})]:[]))).getOr({})}),MT=[Ee("invalidClass"),fe("getRoot",E.none),Ha("notify",[fe("aria","alert"),fe("getContainer",E.none),fe("validHtml",""),ho("onValid"),ho("onInvalid"),ho("onValidate")]),Ha("validator",[Ee("validate"),fe("onEvent","input"),fe("validateOnLoad",!0)])];const xu=Hs({fields:MT,name:"invalidating",active:ok,apis:_6,extra:{validation:n=>r=>{const i=nt.getValue(r);return hm(n(i))}}}),j0=Hs({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:()=>uo([Ad(hr(),Pt)]),exhibit:()=>qa({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})})}),BT=lt("color-input-change"),Dy=lt("color-swatch-change"),PT=lt("color-picker-cancel"),q0=et({schema:[Ee("dom")],name:"label"}),ed=n=>et({name:n+"-edge",overrides:r=>r.model.manager.edgeActions[n].fold(()=>({}),i=>({events:uo([of(Gl(),(l,u,m)=>i(l,m),[r]),of(na(),(l,u,m)=>i(l,m),[r]),of(wg(),(l,u,m)=>{m.mouseIsDown.get()&&i(l,m)},[r])])}))}),IT=ed("top-left"),LT=ed("top"),k6=ed("top-right"),S6=ed("right"),E6=ed("bottom-right"),T6=ed("bottom"),nk=ed("bottom-left"),FT=ed("left"),HT=He({name:"thumb",defaults:ue({dom:{styles:{position:"absolute"}}}),overrides:n=>({events:uo([Gu(Gl(),n,"spectrum"),Gu($u(),n,"spectrum"),Gu(Kl(),n,"spectrum"),Gu(na(),n,"spectrum"),Gu(wg(),n,"spectrum"),Gu(yb(),n,"spectrum")])})}),N1=n=>ru(n.event);var O6=[q0,FT,S6,LT,T6,IT,k6,nk,E6,HT,He({schema:[$r("mouseIsDown",()=>Ot(!1))],name:"spectrum",overrides:n=>{const r=n.model.manager,i=(l,u)=>r.getValueFromEvent(u).map(m=>r.setValueFrom(l,n,m));return{behaviours:Ve([vt.config({mode:"special",onLeft:(l,u)=>r.onLeft(l,n,N1(u)),onRight:(l,u)=>r.onRight(l,n,N1(u)),onUp:(l,u)=>r.onUp(l,n,N1(u)),onDown:(l,u)=>r.onDown(l,n,N1(u))}),Hn.config({}),It.config({})]),events:uo([Re(Gl(),i),Re($u(),i),Re(na(),i),Re(wg(),(l,u)=>{n.mouseIsDown.get()&&i(l,u)})])}}})];const R1=ue("slider.change.value"),sk=n=>{const r=n.event.raw;if((i=>i.type.indexOf("touch")!==-1)(r)){const i=r;return i.touches!==void 0&&i.touches.length===1?E.some(i.touches[0]).map(l=>Xt(l.clientX,l.clientY)):E.none()}{const i=r;return i.clientX!==void 0?E.some(i).map(l=>Xt(l.clientX,l.clientY)):E.none()}},Ip=n=>n.model.minX,Lp=n=>n.model.minY,G0=n=>n.model.minX-1,My=n=>n.model.minY-1,Fp=n=>n.model.maxX,xm=n=>n.model.maxY,K0=n=>n.model.maxX+1,Y0=n=>n.model.maxY+1,zT=(n,r,i)=>r(n)-i(n),X0=n=>zT(n,Fp,Ip),rk=n=>zT(n,xm,Lp),VT=n=>X0(n)/2,$T=n=>rk(n)/2,D1=(n,r)=>r?n.stepSize*n.speedMultiplier:n.stepSize,UT=n=>n.snapToGrid,ak=n=>n.snapStart,By=n=>n.rounded,Py=(n,r)=>n[r+"-edge"]!==void 0,J0=n=>Py(n,"left"),ZT=n=>Py(n,"right"),WT=n=>Py(n,"top"),jT=n=>Py(n,"bottom"),vm=n=>n.model.value.get(),Vf=(n,r)=>({x:n,y:r}),fc=(n,r)=>{ut(n,R1(),{value:r})},Iy=(n,r,i,l)=>n<r?n:n>i?i:n===r?r-1:Math.max(r,n-l),ik=(n,r,i,l)=>n>i?n:n<r?r:n===i?i+1:Math.min(i,n+l),qT=(n,r,i)=>Math.max(r,Math.min(i,n)),Ly=n=>{const{min:r,max:i,range:l,value:u,step:m,snap:p,snapStart:b,rounded:x,hasMinEdge:w,hasMaxEdge:_,minBound:k,maxBound:T,screenRange:N}=n,B=w?r-1:r,V=_?i+1:i;if(u<k)return B;if(u>T)return V;{const U=((H,L,W)=>Math.min(W,Math.max(H,L))-L)(u,k,T),q=qT(U/N*l+r,B,V);return p&&q>=r&&q<=i?((H,L,W,G,Q)=>Q.fold(()=>{const re=H-L,ge=Math.round(re/G)*G;return qT(L+ge,L-1,W+1)},re=>{const ge=(H-re)%G,Te=Math.round(ge/G),Oe=Math.floor((H-re)/G),Ae=Math.floor((W-re)/G),tt=re+Math.min(Ae,Oe+Te)*G;return Math.max(re,tt)}))(q,r,i,m,b):x?Math.round(q):q}},$f=n=>{const{min:r,max:i,range:l,value:u,hasMinEdge:m,hasMaxEdge:p,maxBound:b,maxOffset:x,centerMinEdge:w,centerMaxEdge:_}=n;return u<r?m?0:w:u>i?p?b:_:(u-r)/l*x},lk="top",GT="right",Fy="bottom",Hy="left",vu=n=>n.element.dom.getBoundingClientRect(),gc=(n,r)=>n[r],Q0=n=>{const r=vu(n);return gc(r,Hy)},KT=n=>{const r=vu(n);return gc(r,GT)},ex=n=>{const r=vu(n);return gc(r,lk)},ck=n=>{const r=vu(n);return gc(r,Fy)},zy=n=>{const r=vu(n);return gc(r,"width")},YT=n=>{const r=vu(n);return gc(r,"height")},dk=(n,r,i)=>(n+r)/2-i,XT=(n,r)=>{const i=vu(n),l=vu(r),u=gc(i,Hy),m=gc(i,GT),p=gc(l,Hy);return dk(u,m,p)},M1=(n,r)=>{const i=vu(n),l=vu(r),u=gc(i,lk),m=gc(i,Fy),p=gc(l,lk);return dk(u,m,p)},Vy=(n,r)=>{ut(n,R1(),{value:r})},uk=(n,r,i)=>{const l={min:Ip(r),max:Fp(r),range:X0(r),value:i,step:D1(r),snap:UT(r),snapStart:ak(r),rounded:By(r),hasMinEdge:J0(r),hasMaxEdge:ZT(r),minBound:Q0(n),maxBound:KT(n),screenRange:zy(n)};return Ly(l)},$y=n=>(r,i,l)=>((u,m,p,b)=>{const x=(u>0?ik:Iy)(vm(p),Ip(p),Fp(p),D1(p,b));return Vy(m,x),E.some(x)})(n,r,i,l).map(Pt),tx=(n,r,i,l,u,m)=>{const p=((b,x,w,_,k)=>{const T=zy(b),N=_.bind(U=>E.some(XT(U,b))).getOr(0),B=k.bind(U=>E.some(XT(U,b))).getOr(T),V={min:Ip(x),max:Fp(x),range:X0(x),value:w,hasMinEdge:J0(x),hasMaxEdge:ZT(x),minBound:Q0(b),minOffset:0,maxBound:KT(b),maxOffset:T,centerMinEdge:N,centerMaxEdge:B};return $f(V)})(r,m,i,l,u);return Q0(r)-Q0(n)+p},A6=$y(-1),mk=$y(1),N6=E.none,R6=E.none,fk={"top-left":E.none(),top:E.none(),"top-right":E.none(),right:E.some((n,r)=>{fc(n,K0(r))}),"bottom-right":E.none(),bottom:E.none(),"bottom-left":E.none(),left:E.some((n,r)=>{fc(n,G0(r))})};var D6=Object.freeze({__proto__:null,setValueFrom:(n,r,i)=>{const l=uk(n,r,i);return Vy(n,l),l},setToMin:(n,r)=>{const i=Ip(r);Vy(n,i)},setToMax:(n,r)=>{const i=Fp(r);Vy(n,i)},findValueOfOffset:uk,getValueFromEvent:n=>sk(n).map(r=>r.left),findPositionOfValue:tx,setPositionFromValue:(n,r,i,l)=>{const u=vm(i),m=tx(n,l.getSpectrum(n),u,l.getLeftEdge(n),l.getRightEdge(n),i),p=On(r.element)/2;Ht(r.element,"left",m-p+"px")},onLeft:A6,onRight:mk,onUp:N6,onDown:R6,edgeActions:fk});const Uy=(n,r)=>{ut(n,R1(),{value:r})},gk=(n,r,i)=>{const l={min:Lp(r),max:xm(r),range:rk(r),value:i,step:D1(r),snap:UT(r),snapStart:ak(r),rounded:By(r),hasMinEdge:WT(r),hasMaxEdge:jT(r),minBound:ex(n),maxBound:ck(n),screenRange:YT(n)};return Ly(l)},JT=n=>(r,i,l)=>((u,m,p,b)=>{const x=(u>0?ik:Iy)(vm(p),Lp(p),xm(p),D1(p,b));return Uy(m,x),E.some(x)})(n,r,i,l).map(Pt),pk=(n,r,i,l,u,m)=>{const p=((b,x,w,_,k)=>{const T=YT(b),N=_.bind(U=>E.some(M1(U,b))).getOr(0),B=k.bind(U=>E.some(M1(U,b))).getOr(T),V={min:Lp(x),max:xm(x),range:rk(x),value:w,hasMinEdge:WT(x),hasMaxEdge:jT(x),minBound:ex(b),minOffset:0,maxBound:ck(b),maxOffset:T,centerMinEdge:N,centerMaxEdge:B};return $f(V)})(r,m,i,l,u);return ex(r)-ex(n)+p},M6=E.none,B6=E.none,P6=JT(-1),I6=JT(1),L6={"top-left":E.none(),top:E.some((n,r)=>{fc(n,My(r))}),"top-right":E.none(),right:E.none(),"bottom-right":E.none(),bottom:E.some((n,r)=>{fc(n,Y0(r))}),"bottom-left":E.none(),left:E.none()};var F6=Object.freeze({__proto__:null,setValueFrom:(n,r,i)=>{const l=gk(n,r,i);return Uy(n,l),l},setToMin:(n,r)=>{const i=Lp(r);Uy(n,i)},setToMax:(n,r)=>{const i=xm(r);Uy(n,i)},findValueOfOffset:gk,getValueFromEvent:n=>sk(n).map(r=>r.top),findPositionOfValue:pk,setPositionFromValue:(n,r,i,l)=>{const u=vm(i),m=pk(n,l.getSpectrum(n),u,l.getTopEdge(n),l.getBottomEdge(n),i),p=_e(r.element)/2;Ht(r.element,"top",m-p+"px")},onLeft:M6,onRight:B6,onUp:P6,onDown:I6,edgeActions:L6});const Zy=(n,r)=>{ut(n,R1(),{value:r})},B1=(n,r)=>({x:n,y:r}),Wy=(n,r)=>(i,l,u)=>((m,p,b,x,w)=>{const _=m>0?ik:Iy,k=p?vm(x).x:_(vm(x).x,Ip(x),Fp(x),D1(x,w)),T=p?_(vm(x).y,Lp(x),xm(x),D1(x,w)):vm(x).y;return Zy(b,B1(k,T)),E.some(k)})(n,r,i,l,u).map(Pt),H6=Wy(-1,!1),z6=Wy(1,!1),QT=Wy(-1,!0),V6=Wy(1,!0),$6={"top-left":E.some((n,r)=>{fc(n,Vf(G0(r),My(r)))}),top:E.some((n,r)=>{fc(n,Vf(VT(r),My(r)))}),"top-right":E.some((n,r)=>{fc(n,Vf(K0(r),My(r)))}),right:E.some((n,r)=>{fc(n,Vf(K0(r),$T(r)))}),"bottom-right":E.some((n,r)=>{fc(n,Vf(K0(r),Y0(r)))}),bottom:E.some((n,r)=>{fc(n,Vf(VT(r),Y0(r)))}),"bottom-left":E.some((n,r)=>{fc(n,Vf(G0(r),Y0(r)))}),left:E.some((n,r)=>{fc(n,Vf(G0(r),$T(r)))})};var U6=Object.freeze({__proto__:null,setValueFrom:(n,r,i)=>{const l=uk(n,r,i.left),u=gk(n,r,i.top),m=B1(l,u);return Zy(n,m),m},setToMin:(n,r)=>{const i=Ip(r),l=Lp(r);Zy(n,B1(i,l))},setToMax:(n,r)=>{const i=Fp(r),l=xm(r);Zy(n,B1(i,l))},getValueFromEvent:n=>sk(n),setPositionFromValue:(n,r,i,l)=>{const u=vm(i),m=tx(n,l.getSpectrum(n),u.x,l.getLeftEdge(n),l.getRightEdge(n),i),p=pk(n,l.getSpectrum(n),u.y,l.getTopEdge(n),l.getBottomEdge(n),i),b=On(r.element)/2,x=_e(r.element)/2;Ht(r.element,"left",m-b+"px"),Ht(r.element,"top",p-x+"px")},onLeft:H6,onRight:z6,onUp:QT,onDown:V6,edgeActions:$6});const pc=la({name:"Slider",configFields:[fe("stepSize",1),fe("speedMultiplier",10),fe("onChange",Xe),fe("onChoose",Xe),fe("onInit",Xe),fe("onDragStart",Xe),fe("onDragEnd",Xe),fe("snapToGrid",!1),fe("rounded",!0),zo("snapStart"),La("model",ya("mode",{x:[fe("minX",0),fe("maxX",100),$r("value",n=>Ot(n.mode.minX)),Ee("getInitialValue"),wn("manager",D6)],y:[fe("minY",0),fe("maxY",100),$r("value",n=>Ot(n.mode.minY)),Ee("getInitialValue"),wn("manager",F6)],xy:[fe("minX",0),fe("maxX",100),fe("minY",0),fe("maxY",100),$r("value",n=>Ot({x:n.mode.minX,y:n.mode.minY})),Ee("getInitialValue"),wn("manager",U6)]})),zs("sliderBehaviours",[vt,nt]),$r("mouseIsDown",()=>Ot(!1))],partFields:O6,factory:(n,r,i,l)=>{const u=H=>Vs(H,n,"thumb"),m=H=>Vs(H,n,"spectrum"),p=H=>Fo(H,n,"left-edge"),b=H=>Fo(H,n,"right-edge"),x=H=>Fo(H,n,"top-edge"),w=H=>Fo(H,n,"bottom-edge"),_=n.model,k=_.manager,T=(H,L)=>{k.setPositionFromValue(H,L,n,{getLeftEdge:p,getRightEdge:b,getTopEdge:x,getBottomEdge:w,getSpectrum:m})},N=(H,L)=>{_.value.set(L);const W=u(H);T(H,W)},B=H=>{const L=n.mouseIsDown.get();n.mouseIsDown.set(!1),L&&Fo(H,n,"thumb").each(W=>{const G=_.value.get();n.onChoose(H,W,G)})},V=(H,L)=>{L.stop(),n.mouseIsDown.set(!0),n.onDragStart(H,u(H))},U=(H,L)=>{L.stop(),n.onDragEnd(H,u(H)),B(H)},q=H=>{Fo(H,n,"spectrum").map(vt.focusIn)};return{uid:n.uid,dom:n.dom,components:r,behaviours:Qs(n.sliderBehaviours,[vt.config({mode:"special",focusIn:q}),nt.config({store:{mode:"manual",getValue:H=>_.value.get(),setValue:N}}),Ea.config({channels:{[Ce()]:{onReceive:B}}})]),events:uo([Re(R1(),(H,L)=>{((W,G)=>{N(W,G);const Q=u(W);n.onChange(W,Q,G)})(H,L.event.value)}),cn((H,L)=>{const W=_.getInitialValue();_.value.set(W);const G=u(H);T(H,G);const Q=m(H);n.onInit(H,G,Q,_.value.get())}),Re(Gl(),V),Re(Kl(),U),Re(na(),(H,L)=>{q(H),V(H,L)}),Re(yb(),U)]),apis:{resetToMin:H=>{k.setToMin(H,n)},resetToMax:H=>{k.setToMax(H,n)},setValue:N,refresh:T},domModification:{styles:{position:"relative"}}}},apis:{setValue:(n,r,i)=>{n.setValue(r,i)},resetToMin:(n,r)=>{n.resetToMin(r)},resetToMax:(n,r)=>{n.resetToMax(r)},refresh:(n,r)=>{n.refresh(r)}}}),hk=lt("rgb-hex-update"),eO=lt("slider-update"),jy=lt("palette-update"),tO="form",Z6=[zs("formBehaviours",[nt])],oO=n=>"<alloy.field."+n+">",W6=(n,r)=>({uid:n.uid,dom:n.dom,components:r,behaviours:Qs(n.formBehaviours,[nt.config({store:{mode:"manual",getValue:i=>{const l=ap(i,n);return Ho(l,(u,m)=>u().bind(p=>{return b=wo.getCurrent(p),x=new Error(`Cannot find a current component to extract the value from for form part '${m}': `+Jl(p.element)),b.fold(()=>mo.error(x),mo.value);var b,x}).map(nt.getValue))},setValue:(i,l)=>{In(l,(u,m)=>{Fo(i,n,m).each(p=>{wo.getCurrent(p).each(b=>{nt.setValue(b,u)})})})}}})]),apis:{getField:(i,l)=>Fo(i,n,l).bind(wo.getCurrent)}}),P1={getField:Cs((n,r,i)=>n.getField(r,i)),sketch:n=>{const r=(()=>{const m=[];return{field:(p,b)=>(m.push(p),Vo(tO,oO(p),b)),record:ue(m)}})(),i=n(r),l=r.record(),u=Ke(l,m=>He({name:m,pname:oO(m)}));return jw(tO,Z6,u,W6,i)}},nO=lt("valid-input"),sO=lt("invalid-input"),rO=lt("validating-input"),bk="colorcustom.rgb.",j6=(n,r,i,l)=>{const u=(_,k)=>xu.config({invalidClass:r("invalid"),notify:{onValidate:T=>{ut(T,rO,{type:_})},onValid:T=>{ut(T,nO,{type:_,value:nt.getValue(T)})},onInvalid:T=>{ut(T,sO,{type:_,value:nt.getValue(T)})}},validator:{validate:T=>{const N=nt.getValue(T),B=k(N)?mo.value(!0):mo.error(n("aria.input.invalid"));return hm(B)},validateOnLoad:!1}}),m=(_,k,T,N,B)=>{const V=n(bk+"range"),U=Wo.parts.label({dom:{tag:"label",attributes:{"aria-label":N}},components:[Nn(T)]}),q=Wo.parts.field({data:B,factory:mm,inputAttributes:{type:"text",...k==="hex"?{"aria-live":"polite"}:{}},inputClasses:[r("textfield")],inputBehaviours:Ve([u(k,_),Hn.config({})]),onSetValue:W=>{xu.isInvalid(W)&&xu.run(W).get(Xe)}}),H=[U,q],L=k!=="hex"?[Wo.parts["aria-descriptor"]({text:V})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:H.concat(L)}},p=(_,k)=>{const T=k.red,N=k.green,B=k.blue;nt.setValue(_,{red:T,green:N,blue:B})},b=Zo({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),x=(_,k)=>{b.getOpt(_).each(T=>{Ht(T.element,"background-color","#"+k.value)})};return Fi({factory:()=>{const _={red:Ot(E.some(255)),green:Ot(E.some(255)),blue:Ot(E.some(255)),hex:Ot(E.some("ffffff"))},k=G=>_[G].get(),T=(G,Q)=>{_[G].set(Q)},N=G=>{const Q=G.red,re=G.green,ge=G.blue;T("red",E.some(Q)),T("green",E.some(re)),T("blue",E.some(ge))},B=(G,Q)=>{const re=Q.event;re.type!=="hex"?T(re.type,E.none()):l(G)},V=(G,Q)=>{const re=Q.event;(ge=>ge.type==="hex")(re)?((ge,Te)=>{i(ge);const Oe=KE(Te);T("hex",E.some(Oe.value));const Ae=I0(Oe);p(ge,Ae),N(Ae),ut(ge,hk,{hex:Oe}),x(ge,Oe)})(G,re.value):((ge,Te,Oe)=>{const Ae=parseInt(Oe,10);T(Te,E.some(Ae)),k("red").bind(tt=>k("green").bind(at=>k("blue").map(ht=>Lf(tt,at,ht,1)))).each(tt=>{const at=((ht,Bt)=>{const Lt=P0(Bt);return P1.getField(ht,"hex").each(lo=>{It.isFocused(lo)||nt.setValue(ht,{hex:Lt.value})}),Lt})(ge,tt);ut(ge,hk,{hex:at}),x(ge,at)})})(G,re.type,re.value)},U=G=>({label:n(bk+G+".label"),description:n(bk+G+".description")}),q=U("red"),H=U("green"),L=U("blue"),W=U("hex");return X(P1.sketch(G=>({dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":n("aria.color.picker")}},components:[G.field("red",Wo.sketch(m(xy,"red",q.label,q.description,255))),G.field("green",Wo.sketch(m(xy,"green",H.label,H.description,255))),G.field("blue",Wo.sketch(m(xy,"blue",L.label,L.description,255))),G.field("hex",Wo.sketch(m(XE,"hex",W.label,W.description,"ffffff"))),b.asSpec()],formBehaviours:Ve([xu.config({invalidClass:r("form-invalid")}),Qt("rgb-form-events",[Re(nO,V),Re(sO,B),Re(rO,B)])])})),{apis:{updateHex:(G,Q)=>{nt.setValue(G,{hex:Q.value}),((re,ge)=>{const Te=I0(ge);p(re,Te),N(Te)})(G,Q),x(G,Q)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(_,k,T)=>{_.updateHex(k,T)}},extraApis:{}})},q6=(n,r)=>Fi({name:"ColourPicker",configFields:[Ee("dom"),fe("onValidHex",Xe),fe("onInvalidHex",Xe)],factory:l=>{const u=j6(n,r,l.onValidHex,l.onInvalidHex),m=((V,U)=>{const q=pc.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[U("sv-palette-spectrum")]}}),H=pc.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[U("sv-palette-thumb")],innerHtml:`<div class=${U("sv-palette-inner-thumb")} role="presentation"></div>`}}),L=(W,G)=>{const{width:Q,height:re}=W,ge=W.getContext("2d");if(ge===null)return;ge.fillStyle=G,ge.fillRect(0,0,Q,re);const Te=ge.createLinearGradient(0,0,Q,0);Te.addColorStop(0,"rgba(255,255,255,1)"),Te.addColorStop(1,"rgba(255,255,255,0)"),ge.fillStyle=Te,ge.fillRect(0,0,Q,re);const Oe=ge.createLinearGradient(0,0,0,re);Oe.addColorStop(0,"rgba(0,0,0,0)"),Oe.addColorStop(1,"rgba(0,0,0,1)"),ge.fillStyle=Oe,ge.fillRect(0,0,Q,re)};return Fi({factory:W=>{const G=ue({x:0,y:0}),Q=Ve([wo.config({find:E.some}),It.config({})]);return pc.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":V(["Saturation {0}%, Brightness {1}%",0,0])},classes:[U("sv-palette")]},model:{mode:"xy",getInitialValue:G},rounded:!1,components:[q,H],onChange:(re,ge,Te)=>{jo(Te)||Kt(re.element,"aria-valuetext",V(["Saturation {0}%, Brightness {1}%",Math.floor(Te.x),Math.floor(100-Te.y)])),ut(re,jy,{value:Te})},onInit:(re,ge,Te,Oe)=>{L(Te.element.dom,oT(D_))},sliderBehaviours:Q})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(W,G,Q)=>{((re,ge)=>{const Te=re.components()[0].element.dom,Oe=k1(ge,100,100),Ae=N_(Oe);L(Te,oT(Ae))})(G,Q)},setThumb:(W,G,Q)=>{((re,ge)=>{const Te=F0(I0(ge));pc.setValue(re,{x:Te.saturation,y:100-Te.value}),Kt(re.element,"aria-valuetext",V(["Saturation {0}%, Brightness {1}%",Te.saturation,Te.value]))})(G,Q)}},extraApis:{}})})(n,r),p={paletteRgba:Ot(D_),paletteHue:Ot(0)},b=Zo(((V,U)=>{const q=pc.parts.spectrum({dom:{tag:"div",classes:[U("hue-slider-spectrum")],attributes:{role:"presentation"}}}),H=pc.parts.thumb({dom:{tag:"div",classes:[U("hue-slider-thumb")],attributes:{role:"presentation"}}});return pc.sketch({dom:{tag:"div",classes:[U("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ue(0)},components:[q,H],sliderBehaviours:Ve([It.config({})]),onChange:(L,W,G)=>{Kt(L.element,"aria-valuenow",Math.floor(360-3.6*G)),ut(L,eO,{value:G})}})})(0,r)),x=Zo(m.sketch({})),w=Zo(u.sketch({})),_=(V,U,q)=>{x.getOpt(V).each(H=>{m.setHue(H,q)})},k=(V,U)=>{w.getOpt(V).each(q=>{u.updateHex(q,U)})},T=(V,U,q)=>{b.getOpt(V).each(H=>{pc.setValue(H,(L=>100-L/360*100)(q))})},N=(V,U)=>{x.getOpt(V).each(q=>{m.setThumb(q,U)})},B=(V,U,q,H)=>{((L,W)=>{const G=I0(L);p.paletteRgba.set(G),p.paletteHue.set(W)})(U,q),xt(H,L=>{L(V,U,q)})};return{uid:l.uid,dom:l.dom,components:[x.asSpec(),b.asSpec(),w.asSpec()],behaviours:Ve([Qt("colour-picker-events",[Re(hk,(()=>{const V=[_,T,N];return(U,q)=>{const H=q.event.hex,L=(W=>F0(I0(W)))(H);B(U,H,L.hue,V)}})()),Re(jy,(()=>{const V=[k];return(U,q)=>{const H=q.event.value,L=p.paletteHue.get(),W=k1(L,H.x,100-H.y),G=aT(W);B(U,G,L,V)}})()),Re(eO,(()=>{const V=[_,k];return(U,q)=>{const H=(re=>(100-re)/100*360)(q.event.value),L=p.paletteRgba.get(),W=F0(L),G=k1(H,W.saturation,W.value),Q=aT(G);B(U,Q,H,V)}})())]),wo.config({find:V=>w.getOpt(V)}),vt.config({mode:"acyclic"})])}}}),Uf=()=>wo.config({find:E.some}),xk=n=>wo.config({find:r=>yn(r.element,n).bind(i=>r.getSystem().getByDom(i).toOptional())}),qy=St([fe("preprocess",kt),fe("postprocess",kt)]),G6=(n,r)=>{const i=ta("RepresentingConfigs.memento processors",qy,r);return nt.config({store:{mode:"manual",getValue:l=>{const u=n.get(l),m=nt.getValue(u);return i.postprocess(m)},setValue:(l,u)=>{const m=i.preprocess(u),p=n.get(l);nt.setValue(p,m)}}})},ym=(n,r,i)=>nt.config({store:{mode:"manual",...n.map(l=>({initialValue:l})).getOr({}),getValue:r,setValue:i}}),aO=(n,r,i)=>ym(n,l=>r(l.element),(l,u)=>i(l.element,u)),Gy=n=>nt.config({store:{mode:"memory",initialValue:n}}),K6={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"};var iO=tinymce.util.Tools.resolve("tinymce.Resource"),wm=tinymce.util.Tools.resolve("tinymce.util.Tools");const ox=(n,r)=>{let i=null;const l=()=>{md(i)||(clearTimeout(i),i=null)};return{cancel:l,throttle:(...u)=>{l(),i=setTimeout(()=>{i=null,n.apply(null,u)},r)}}},nx=lt("alloy-fake-before-tabstop"),Ky=lt("alloy-fake-after-tabstop"),Yy=n=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:n},behaviours:Ve([It.config({ignore:!0}),Hn.config({})])}),sx=(n,r)=>({dom:{tag:"div",classes:["tox-navobj",...n.getOr([])]},components:[Yy([nx]),r,Yy([Ky])],behaviours:Ve([xk(1)])}),vk=(n,r)=>{ut(n,sa(),{raw:{which:9,shiftKey:r}})},yu=(n,r)=>{const i=r.element;ra(i,nx)?vk(n,!0):ra(i,Ky)&&vk(n,!1)},Hp=n=>O1(n,["."+nx,"."+Ky].join(","),Ne),Xy=lt("update-dialog"),lO=lt("update-title"),cO=lt("update-body"),dO=lt("update-footer"),I1=lt("body-send-message"),Jy=lt("dialog-focus-shifted"),Qy=fl().browser,zp=Qy.isSafari(),Y6=Qy.isFirefox(),e2=zp||Y6,yk=Qy.isChromium(),X6=({scrollTop:n,scrollHeight:r,clientHeight:i})=>Math.ceil(n)+i>=r,wk=(n,r)=>n.scrollTo(0,r==="bottom"?99999999:r),Ck=(n,r,i)=>{const l=n.dom;E.from(l.contentDocument).fold(i,u=>{let m=0;const p=((x,w)=>{const _=x.body;return E.from(!/^<!DOCTYPE (html|HTML)/.test(w)&&(!yk&&!zp||_t(_)&&(_.scrollTop!==0||Math.abs(_.scrollHeight-_.clientHeight)>1))?_:x.documentElement)})(u,r).map(x=>(m=x.scrollTop,x)).forall(X6),b=()=>{const x=l.contentWindow;_t(x)&&(p?wk(x,"bottom"):!p&&e2&&m!==0&&wk(x,m))};zp&&l.addEventListener("load",b,{once:!0}),u.open(),u.write(r),u.close(),zp||b()})},J6=Xr(e2,zp?500:200).map(n=>((r,i)=>{let l=null,u=null;return{cancel:()=>{md(l)||(clearTimeout(l),l=null,u=null)},throttle:(...m)=>{u=m,md(l)&&(l=setTimeout(()=>{const p=u;l=null,u=null,r.apply(null,p)},i))}}})(Ck,n)),uO=lt("toolbar.button.execute"),Vp=lt("common-button-display-events"),mO={[ka()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Le()]:["toolbar-button-events",Vp],[na()]:["focusing","alloy.base.behaviour",Vp]},_k=n=>Ht(n.element,"width",Gn(n.element,"width")),fO=(n,r,i)=>Ol(n,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:i},r),t2=(n,r)=>fO(n,r,[]),Cm=(n,r)=>fO(n,r,[Rt.config({})]),gO=(n,r,i)=>({dom:{tag:"span",classes:[`${r}__select-label`]},components:[Nn(i.translate(n))],behaviours:Ve([Rt.config({})])}),rl=lt("update-menu-text"),td=lt("update-menu-icon"),o2=(n,r,i)=>{const l=Ot(Xe),u=n.text.map(T=>Zo(gO(T,r,i.providers))),m=n.icon.map(T=>Zo(Cm(T,i.providers.icons))),p=(T,N)=>{const B=nt.getValue(T);return It.focus(B),ut(B,"keydown",{raw:N.event.raw}),Rl.close(B),E.some(!0)},b=n.role.fold(()=>({}),T=>({role:T})),x=n.tooltip.fold(()=>({}),T=>{const N=i.providers.translate(T);return{title:N,"aria-label":N}}),w=Ol("chevron-down",{tag:"div",classes:[`${r}__select-chevron`]},i.providers.icons),_=lt("common-button-display-events");return Zo(Rl.sketch({...n.uid?{uid:n.uid}:{},...b,dom:{tag:"button",classes:[r,`${r}--select`].concat(Ke(n.classes,T=>`${r}--${T}`)),attributes:{...x}},components:Ep([m.map(T=>T.asSpec()),u.map(T=>T.asSpec()),E.some(w)]),matchWidth:!0,useMinWidth:!0,onOpen:(T,N,B)=>{n.searchable&&(V=>{EE(V).each(U=>It.focus(U))})(B)},dropdownBehaviours:Ve([...n.dropdownBehaviours,w1(()=>n.disabled||i.providers.isDisabled()),tr(),j0.config({}),Rt.config({}),Qt("dropdown-events",[gu(n,l),If(n,l)]),Qt(_,[cn((T,N)=>_k(T))]),Qt("menubutton-update-display-text",[Re(rl,(T,N)=>{u.bind(B=>B.getOpt(T)).each(B=>{Rt.set(B,[Nn(i.providers.translate(N.event.text))])})}),Re(td,(T,N)=>{m.bind(B=>B.getOpt(T)).each(B=>{Rt.set(B,[Cm(N.event.icon,i.providers.icons)])})})])]),eventOrder:X(mO,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Le()]:["toolbar-button-events","dropdown-events",_]}),sandboxBehaviours:Ve([vt.config({mode:"special",onLeft:p,onRight:p}),Qt("dropdown-sandbox-events",[Re(kE,(T,N)=>{(B=>{const V=nt.getValue(B),U=b1(B).map(l_);Rl.refetch(V).get(()=>{const q=Qn.getCoupled(V,"sandbox");U.each(H=>b1(q).each(L=>((W,G)=>{nt.setValue(W,G.fetchPattern),W.element.dom.selectionStart=G.selectionStart,W.element.dom.selectionEnd=G.selectionEnd})(L,H)))})})(T),N.stop()}),Re(SE,(T,N)=>{((B,V)=>{(U=>io.getState(U).bind(Oo.getHighlighted).bind(Oo.getHighlighted))(B).each(U=>{((q,H,L,W)=>{const G={...W,target:H};q.getSystem().triggerEvent(L,H,G)})(B,U.element,V.event.eventType,V.event.interactionEvent)})})(T,N),N.stop()})])]),lazySink:i.getSink,toggleClass:`${r}--active`,parts:{menu:{...um(0,n.columns,n.presets),fakeFocus:n.searchable,onHighlightItem:q_,onCollapseMenu:(T,N,B)=>{Oo.getHighlighted(B).each(V=>{q_(T,B,V)})},onDehighlightItem:g6}},getAnchorOverrides:()=>({maxHeightFunction:(T,N)=>{om()(T,N-10)}}),fetch:T=>zf(Rn(n.fetch,T))})).asSpec()},pO=n=>n.type==="separator",Q6={type:"separator"},kk=(n,r)=>{const i=((l,u)=>{const m=I(l,(p,b)=>(x=>Co(x))(b)?b===""?p:b==="|"?p.length>0&&!pO(p[p.length-1])?p.concat([Q6]):p:Dt(u,b.toLowerCase())?p.concat([u[b.toLowerCase()]]):p:p.concat([b]),[]);return m.length>0&&pO(m[m.length-1])&&m.pop(),m})(Co(n)?n.split(" "):n,r);return kn(i,(l,u)=>{if((m=>Dt(m,"getSubmenuItems"))(u)){const m=(b=>{const x=mt(b,"value").getOrThunk(()=>lt("generated-menu-item"));return X({value:x},b)})(u),p=((b,x)=>{const w=b.getSubmenuItems(),_=kk(w,x);return{item:b,menus:X(_.menus,{[b.value]:_.items}),expansions:X(_.expansions,{[b.value]:b.value})}})(m,r);return{menus:X(l.menus,p.menus),items:[p.item,...l.items],expansions:X(l.expansions,p.expansions)}}return{...l,items:[u,...l.items]}},{menus:{},expansions:{},items:[]})},L1=(n,r,i,l)=>{const u=lt("primary-menu"),m=kk(n,i.shared.providers.menuItems());if(m.items.length===0)return E.none();const p=(k=>k.search.fold(()=>({searchMode:"no-search"}),T=>({searchMode:"search-with-field",placeholder:T.placeholder})))(l),b=$0(u,m.items,r,i,l.isHorizontalMenu,p),x=(k=>k.search.fold(()=>({searchMode:"no-search"}),T=>({searchMode:"search-with-results"})))(l),w=Ho(m.menus,(k,T)=>$0(T,k,r,i,!1,x)),_=X(w,li(u,b));return E.from(Sf.tieredData(u,_,m.expansions))},Sk=n=>!Dt(n,"items"),Ek="data-value",Tk=(n,r,i,l)=>Ke(i,u=>Sk(u)?{type:"togglemenuitem",text:u.text,value:u.value,active:u.value===l,onAction:()=>{nt.setValue(n,u.value),ut(n,pi,{name:r}),It.focus(n)}}:{type:"nestedmenuitem",text:u.text,getSubmenuItems:()=>Tk(n,r,u.items,l)}),n2=(n,r)=>_r(n,i=>Sk(i)?Xr(i.value===r,i):n2(i.items,r)),hO=Fi({name:"HtmlSelect",configFields:[Ee("options"),zs("selectBehaviours",[It,nt]),fe("selectClasses",[]),fe("selectAttributes",{}),zo("data")],factory:(n,r)=>{const i=Ke(n.options,u=>({dom:{tag:"option",value:u.value,innerHtml:u.text}})),l=n.data.map(u=>li("initialValue",u)).getOr({});return{uid:n.uid,dom:{tag:"select",classes:n.selectClasses,attributes:n.selectAttributes},components:i,behaviours:Qs(n.selectBehaviours,[It.config({}),nt.config({store:{mode:"manual",getValue:u=>ec(u.element),setValue:(u,m)=>{const p=Et(n.options);qo(n.options,b=>b.value===m).isSome()?Bd(u.element,m):u.element.dom.selectedIndex===-1&&m===""&&p.each(b=>Bd(u.element,b.value))},...l}})])}}}),eM=ue([fe("field1Name","field1"),fe("field2Name","field2"),yl("onLockedChange"),tc(["lockClass"]),fe("locked",!1),Kc("coupledFieldBehaviours",[wo,nt])]),bO=(n,r)=>He({factory:Wo,name:n,overrides:i=>({fieldBehaviours:Ve([Qt("coupled-input-behaviour",[Re(pl(),l=>{((u,m,p)=>Fo(u,m,p).bind(wo.getCurrent))(l,i,r).each(u=>{Fo(l,i,"lock").each(m=>{so.isOn(m)&&i.onLockedChange(l,u,m)})})})])])})}),xO=ue([bO("field1","field2"),bO("field2","field1"),He({factory:Dr,schema:[Ee("dom")],name:"lock",overrides:n=>({buttonBehaviours:Ve([so.config({selected:n.locked,toggleClass:n.markers.lockClass,aria:{mode:"pressed"}})])})})]),hi=la({name:"FormCoupledInputs",configFields:eM(),partFields:xO(),factory:(n,r,i,l)=>({uid:n.uid,dom:n.dom,components:r,behaviours:Cf(n.coupledFieldBehaviours,[wo.config({find:E.some}),nt.config({store:{mode:"manual",getValue:u=>{const m=_f(u,n,["field1","field2"]);return{[n.field1Name]:nt.getValue(m.field1()),[n.field2Name]:nt.getValue(m.field2())}},setValue:(u,m)=>{const p=_f(u,n,["field1","field2"]);Zs(m,n.field1Name)&&nt.setValue(p.field1(),m[n.field1Name]),Zs(m,n.field2Name)&&nt.setValue(p.field2(),m[n.field2Name])}}})]),apis:{getField1:u=>Fo(u,n,"field1"),getField2:u=>Fo(u,n,"field2"),getLock:u=>Fo(u,n,"lock")}}),apis:{getField1:(n,r)=>n.getField1(r),getField2:(n,r)=>n.getField2(r),getLock:(n,r)=>n.getLock(r)}}),rx=n=>{const r=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(n);if(r!==null){const i=parseFloat(r[1]),l=r[2];return mo.value({value:i,unit:l})}return mo.error(n)},Ok=(n,r)=>{const i={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=u=>Dt(i,u);return n.unit===r?E.some(n.value):l(n.unit)&&l(r)?i[n.unit]===i[r]?E.some(n.value):E.some(n.value/i[n.unit]*i[r]):E.none()},s2=n=>E.none(),Ak=(n,r)=>{const i=n.label.map(_=>Gr(_,r)),l=[Mt.config({disabled:()=>n.disabled||r.isDisabled()}),tr(),vt.config({mode:"execution",useEnter:n.multiline!==!0,useControlEnter:n.multiline===!0,execute:_=>(xo(_,Pp),E.some(!0))}),Qt("textfield-change",[Re(pl(),(_,k)=>{ut(_,pi,{name:n.name})}),Re(dt(),(_,k)=>{ut(_,pi,{name:n.name})})]),Hn.config({})],u=n.validation.map(_=>xu.config({getRoot:k=>rr(k.element),invalidClass:"tox-invalid",validator:{validate:k=>{const T=nt.getValue(k),N=_.validator(T);return hm(N===!0?mo.value(T):mo.error(N))},validateOnLoad:_.validateOnLoad}})).toArray(),m={...n.placeholder.fold(ue({}),_=>({placeholder:r.translate(_)})),...n.inputMode.fold(ue({}),_=>({inputmode:_}))},p=Wo.parts.field({tag:n.multiline===!0?"textarea":"input",...n.data.map(_=>({data:_})).getOr({}),inputAttributes:m,inputClasses:[n.classname],inputBehaviours:Ve(hn([l,u])),selectOnFocus:!1,factory:mm}),b=n.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[p]}:p,x=(n.flex?["tox-form__group--stretched"]:[]).concat(n.maximized?["tox-form-group--maximize"]:[]),w=[Mt.config({disabled:()=>n.disabled||r.isDisabled(),onDisabled:_=>{Wo.getField(_).each(Mt.disable)},onEnabled:_=>{Wo.getField(_).each(Mt.enable)}}),tr()];return mc(i,b,x,w)},ax=(n,r)=>r.getAnimationRoot.fold(()=>n.element,i=>i(n)),od=n=>n.dimension.property,$p=(n,r)=>n.dimension.getDimension(r),ix=(n,r)=>{const i=ax(n,r);Ai(i,[r.shrinkingClass,r.growingClass])},r2=(n,r)=>{Un(n.element,r.openClass),$n(n.element,r.closedClass),Ht(n.element,od(r),"0px"),z(n.element)},_m=(n,r)=>{Un(n.element,r.closedClass),$n(n.element,r.openClass),Mo(n.element,od(r))},vO=(n,r,i,l)=>{i.setCollapsed(),Ht(n.element,od(r),$p(r,n.element)),ix(n,r),r2(n,r),r.onStartShrink(n),r.onShrunk(n)},Nk=(n,r,i,l)=>{const u=l.getOrThunk(()=>$p(r,n.element));i.setCollapsed(),Ht(n.element,od(r),u),z(n.element);const m=ax(n,r);Un(m,r.growingClass),$n(m,r.shrinkingClass),r2(n,r),r.onStartShrink(n)},lx=(n,r,i)=>{const l=$p(r,n.element);(l==="0px"?vO:Nk)(n,r,i,E.some(l))},yO=(n,r,i)=>{const l=ax(n,r),u=ra(l,r.shrinkingClass),m=$p(r,n.element);_m(n,r);const p=$p(r,n.element);(u?()=>{Ht(n.element,od(r),m),z(n.element)}:()=>{r2(n,r)})(),Un(l,r.shrinkingClass),$n(l,r.growingClass),_m(n,r),Ht(n.element,od(r),p),i.setExpanded(),r.onStartGrow(n)},Rk=(n,r,i)=>{const l=ax(n,r);return ra(l,r.growingClass)===!0},Dk=(n,r,i)=>{const l=ax(n,r);return ra(l,r.shrinkingClass)===!0};var wO=Object.freeze({__proto__:null,refresh:(n,r,i)=>{if(i.isExpanded()){Mo(n.element,od(r));const l=$p(r,n.element);Ht(n.element,od(r),l)}},grow:(n,r,i)=>{i.isExpanded()||yO(n,r,i)},shrink:(n,r,i)=>{i.isExpanded()&&lx(n,r,i)},immediateShrink:(n,r,i)=>{i.isExpanded()&&vO(n,r,i)},hasGrown:(n,r,i)=>i.isExpanded(),hasShrunk:(n,r,i)=>i.isCollapsed(),isGrowing:Rk,isShrinking:Dk,isTransitioning:(n,r,i)=>Rk(n,r)||Dk(n,r),toggleGrow:(n,r,i)=>{(i.isExpanded()?lx:yO)(n,r,i)},disableTransitions:ix,immediateGrow:(n,r,i)=>{i.isExpanded()||(_m(n,r),Ht(n.element,od(r),$p(r,n.element)),ix(n,r),i.setExpanded(),r.onStartGrow(n),r.onGrown(n))}}),Mk=Object.freeze({__proto__:null,exhibit:(n,r,i)=>{const l=r.expanded;return qa(l?{classes:[r.openClass],styles:{}}:{classes:[r.closedClass],styles:li(r.dimension.property,"0px")})},events:(n,r)=>uo([Ku(Jm(),(i,l)=>{l.event.raw.propertyName===n.dimension.property&&(ix(i,n),r.isExpanded()&&Mo(i.element,n.dimension.property),(r.isExpanded()?n.onGrown:n.onShrunk)(i))})])}),CO=[Ee("closedClass"),Ee("openClass"),Ee("shrinkingClass"),Ee("growingClass"),zo("getAnimationRoot"),ho("onShrunk"),ho("onStartShrink"),ho("onGrown"),ho("onStartGrow"),fe("expanded",!1),La("dimension",ya("property",{width:[wn("property","width"),wn("getDimension",n=>On(n)+"px")],height:[wn("property","height"),wn("getDimension",n=>_e(n)+"px")]}))];const Zi=Hs({fields:CO,name:"sliding",active:Mk,apis:wO,state:Object.freeze({__proto__:null,init:n=>{const r=Ot(n.expanded);return Xs({isExpanded:()=>r.get()===!0,isCollapsed:()=>r.get()===!1,setCollapsed:Rn(r.set,!1),setExpanded:Rn(r.set,!0),readState:()=>"expanded: "+r.get()})}})}),Bk=n=>({isEnabled:()=>!Mt.isDisabled(n),setEnabled:r=>Mt.set(n,!r),setActive:r=>{const i=n.element;r?($n(i,"tox-tbtn--enabled"),Kt(i,"aria-pressed",!0)):(Un(i,"tox-tbtn--enabled"),Sn(i,"aria-pressed"))},isActive:()=>ra(n.element,"tox-tbtn--enabled"),setText:r=>{ut(n,rl,{text:r})},setIcon:r=>ut(n,td,{icon:r})}),F1=(n,r,i,l,u=!0)=>o2({text:n.text,icon:n.icon,tooltip:n.tooltip,searchable:n.search.isSome(),role:l,fetch:(m,p)=>{const b={pattern:n.search.isSome()?vT(m):""};n.fetch(x=>{p(L1(x,Xc.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:n.search}))},b,Bk(m))},onSetup:n.onSetup,getApi:Bk,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...u?[Hn.config({})]:[]]},r,i.shared),_O=(n,r,i)=>{const l=m=>p=>{const b=!p.isActive();p.setActive(b),m.storage.set(b),i.shared.getSink().each(x=>{r().getOpt(x).each(w=>{Ga(w.element),ut(w,bu,{name:m.name,value:m.storage.get()})})})},u=m=>p=>{p.setActive(m.storage.get())};return m=>{m(Ke(n,p=>{const b=p.text.fold(()=>({}),x=>({text:x}));return{type:p.type,active:!1,...b,onAction:l(p),onSetup:u(p)}}))}},Pk=n=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:n,"aria-label":n}},components:[Nn(n)]}),kO=lt("leaf-label-event-id"),a2=({leaf:n,onLeafAction:r,visible:i,treeId:l,selectedId:u,backstage:m})=>{const p=n.menu.map(x=>F1(x,"tox-mbtn",m,E.none(),i)),b=[Pk(n.title)];return p.each(x=>b.push(x)),Dr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(i?["tox-tree--leaf__label--visible"]:[])},components:b,role:"treeitem",action:x=>{r(n.id),x.getSystem().broadcastOn([`update-active-item-${l}`],{value:n.id})},eventOrder:{[sa()]:[kO,"keying"]},buttonBehaviours:Ve([...i?[Hn.config({})]:[],so.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Ea.config({channels:{[`update-active-item-${l}`]:{onReceive:(x,w)=>{(w.value===n.id?so.on:so.off)(x)}}}}),Qt(kO,[cn((x,w)=>{u.each(_=>{(_===n.id?so.on:so.off)(x)})}),Re(sa(),(x,w)=>{const _=w.event.raw.code==="ArrowLeft",k=w.event.raw.code==="ArrowRight";_?(Ni(x.element,".tox-tree--directory").each(T=>{x.getSystem().getByDom(T).each(N=>{Pb(T,".tox-tree--directory__label").each(B=>{N.getSystem().getByDom(B).each(It.focus)})})}),w.stop()):k&&w.stop()})])])})},SO=lt("directory-label-event-id"),tM=({directory:n,visible:r,noChildren:i,backstage:l})=>{const u=n.menu.map(w=>F1(w,"tox-mbtn",l,E.none())),m=[{dom:{tag:"div",classes:["tox-chevron"]},components:[(p="chevron-right",b=l.shared.providers.icons,((w,_,k)=>Ol(w,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:[]},_))(p,b))]},Pk(n.title)];var p,b;u.each(w=>{m.push(w)});const x=w=>{Ni(w.element,".tox-tree--directory").each(_=>{w.getSystem().getByDom(_).each(k=>{const T=!so.isOn(k);so.toggle(k),ut(w,"expand-tree-node",{expanded:T,node:n.id})})})};return Dr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(r?["tox-tree--directory__label--visible"]:[])},components:m,action:x,eventOrder:{[sa()]:[SO,"keying"]},buttonBehaviours:Ve([...r?[Hn.config({})]:[],Qt(SO,[Re(sa(),(w,_)=>{const k=_.event.raw.code==="ArrowRight",T=_.event.raw.code==="ArrowLeft";k&&i&&_.stop(),(k||T)&&Ni(w.element,".tox-tree--directory").each(N=>{w.getSystem().getByDom(N).each(B=>{!so.isOn(B)&&k||so.isOn(B)&&T?(x(w),_.stop()):T&&!so.isOn(B)&&(Ni(B.element,".tox-tree--directory").each(V=>{Pb(V,".tox-tree--directory__label").each(U=>{B.getSystem().getByDom(U).each(It.focus)})}),_.stop())})})})])])})},oM=({children:n,onLeafAction:r,visible:i,treeId:l,expandedIds:u,selectedId:m,backstage:p})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:n.map(b=>b.type==="leaf"?a2({leaf:b,selectedId:m,onLeafAction:r,visible:i,treeId:l,backstage:p}):i2({directory:b,expandedIds:u,selectedId:m,onLeafAction:r,labelTabstopping:i,treeId:l,backstage:p})),behaviours:Ve([Zi.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:i}),Rt.config({})])}),nM=lt("directory-event-id"),i2=({directory:n,onLeafAction:r,labelTabstopping:i,treeId:l,backstage:u,expandedIds:m,selectedId:p})=>{const{children:b}=n,x=Ot(m),w=m.includes(n.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[tM({directory:n,visible:i,noChildren:n.children.length===0,backstage:u}),oM({children:b,expandedIds:m,selectedId:p,onLeafAction:r,visible:w,treeId:l,backstage:u})],behaviours:Ve([Qt(nM,[cn((_,k)=>{so.set(_,w)}),Re("expand-tree-node",(_,k)=>{const{expanded:T,node:N}=k.event;x.set(T?[...x.get(),N]:x.get().filter(B=>B!==N))})]),so.config({...n.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(_,k)=>{const T=_.components()[1],N=(B=k,b.map(V=>V.type==="leaf"?a2({leaf:V,selectedId:p,onLeafAction:r,visible:B,treeId:l,backstage:u}):i2({directory:V,expandedIds:x.get(),selectedId:p,onLeafAction:r,labelTabstopping:B,treeId:l,backstage:u})));var B;k?Zi.grow(T):Zi.shrink(T),Rt.set(T,N)}})])}},cx=lt("tree-event-id");var EO=Object.freeze({__proto__:null,events:(n,r)=>{const i=n.stream.streams.setup(n,r);return uo([Re(n.event,i),Xl(()=>r.cancel())].concat(n.cancelEvent.map(l=>[Re(l,()=>r.cancel())]).getOr([])))}});const TO=n=>{const r=Ot(null);return Xs({readState:()=>({timer:r.get()!==null?"set":"unset"}),setTimer:i=>{r.set(i)},cancel:()=>{const i=r.get();i!==null&&i.cancel()}})};var sM=Object.freeze({__proto__:null,throttle:TO,init:n=>n.stream.streams.state(n)}),rM=[La("stream",ya("mode",{throttle:[Ee("delay"),fe("stopEvent",!0),wn("streams",{setup:(n,r)=>{const i=n.stream,l=ox(n.onStream,i.delay);return r.setTimer(l),(u,m)=>{l.throttle(u,m),i.stopEvent&&m.stop()}},state:TO})]})),fe("event","input"),zo("cancelEvent"),yl("onStream")];const Ik=Hs({fields:rM,name:"streaming",active:EO,state:sM}),l2=(n,r,i)=>{const l=nt.getValue(i);nt.setValue(r,l),OO(r)},dx=(n,r)=>{const i=n.element,l=ec(i),u=i.dom;js(i,"type")!=="number"&&r(u,l)},OO=n=>{dx(n,(r,i)=>r.setSelectionRange(i.length,i.length))},c2=ue("alloy.typeahead.itemexecute"),aM=ue([zo("lazySink"),Ee("fetch"),fe("minChars",5),fe("responseTime",1e3),ho("onOpen"),fe("getHotspot",E.some),fe("getAnchorOverrides",ue({})),fe("layouts",E.none()),fe("eventOrder",{}),vg("model",{},[fe("getDisplayText",n=>n.meta!==void 0&&n.meta.text!==void 0?n.meta.text:n.value),fe("selectsOver",!0),fe("populateFromBrowse",!0)]),ho("onSetValue"),aa("onExecute"),ho("onItemExecute"),fe("inputClasses",[]),fe("inputAttributes",{}),fe("inputStyles",{}),fe("matchWidth",!0),fe("useMinWidth",!1),fe("dismissOnBlur",!0),tc(["openClass"]),zo("initialData"),zs("typeaheadBehaviours",[It,nt,Ik,vt,so,Qn]),$r("lazyTypeaheadComp",()=>Ot(E.none)),$r("previewing",()=>Ot(!0))].concat(A0()).concat(Ay())),AO=ue([Ze({schema:[Pg()],name:"menu",overrides:n=>({fakeFocus:!0,onHighlightItem:(r,i,l)=>{n.previewing.get()?n.lazyTypeaheadComp.get().each(u=>{((m,p,b)=>{if(m.selectsOver){const x=nt.getValue(p),w=m.getDisplayText(x),_=nt.getValue(b);return m.getDisplayText(_).indexOf(w)===0?E.some(()=>{l2(0,p,b),((k,T)=>{dx(k,(N,B)=>N.setSelectionRange(T,B.length))})(p,w.length)}):E.none()}return E.none()})(n.model,u,l).fold(()=>{n.model.selectsOver?(Oo.dehighlight(i,l),n.previewing.set(!0)):n.previewing.set(!1)},m=>{m(),n.previewing.set(!1)})}):n.lazyTypeaheadComp.get().each(u=>{n.model.populateFromBrowse&&l2(n.model,u,l),qs(l.element,"id").each(m=>Kt(u.element,"aria-activedescendant",m))})},onExecute:(r,i)=>n.lazyTypeaheadComp.get().map(l=>(ut(l,c2(),{item:i}),!0)),onHover:(r,i)=>{n.previewing.set(!1),n.lazyTypeaheadComp.get().each(l=>{n.model.populateFromBrowse&&l2(n.model,l,i)})}})})]),NO=la({name:"Typeahead",configFields:aM(),partFields:AO(),factory:(n,r,i,l)=>{const u=(k,T,N)=>{n.previewing.set(!1);const B=Qn.getCoupled(k,"sandbox");if(io.isOpen(B))wo.getCurrent(B).each(V=>{Oo.getHighlighted(V).fold(()=>{N(V)},()=>{Za(B,V.element,"keydown",T)})});else{const V=U=>{wo.getCurrent(U).each(N)};Ey(n,p(k),k,B,l,V,Ra.HighlightMenuAndItem).get(Xe)}},m=wE(n),p=k=>T=>T.map(N=>{const B=Ln(N.menus),V=qn(B,U=>Jt(U.items,q=>q.type==="item"));return nt.getState(k).update(Ke(V,U=>U.data)),N}),b=k=>wo.getCurrent(k),x="typeaheadevents",w=[It.config({}),nt.config({onSetValue:n.onSetValue,store:{mode:"dataset",getDataKey:k=>ec(k.element),getFallbackEntry:k=>({value:k,meta:{}}),setValue:(k,T)=>{Bd(k.element,n.model.getDisplayText(T))},...n.initialData.map(k=>li("initialValue",k)).getOr({})}}),Ik.config({stream:{mode:"throttle",delay:n.responseTime,stopEvent:!1},onStream:(k,T)=>{const N=Qn.getCoupled(k,"sandbox");if(It.isFocused(k)&&ec(k.element).length>=n.minChars){const B=b(N).bind(U=>Oo.getHighlighted(U).map(nt.getValue));n.previewing.set(!0);const V=U=>{b(N).each(q=>{B.fold(()=>{n.model.selectsOver&&Oo.highlightFirst(q)},H=>{Oo.highlightBy(q,L=>nt.getValue(L).value===H.value),Oo.getHighlighted(q).orThunk(()=>(Oo.highlightFirst(q),E.none()))})})};Ey(n,p(k),k,N,l,V,Ra.HighlightJustMenu).get(Xe)}},cancelEvent:_b()}),vt.config({mode:"special",onDown:(k,T)=>(u(k,T,Oo.highlightFirst),E.some(!0)),onEscape:k=>{const T=Qn.getCoupled(k,"sandbox");return io.isOpen(T)?(io.close(T),E.some(!0)):E.none()},onUp:(k,T)=>(u(k,T,Oo.highlightLast),E.some(!0)),onEnter:k=>{const T=Qn.getCoupled(k,"sandbox"),N=io.isOpen(T);if(N&&!n.previewing.get())return b(T).bind(B=>Oo.getHighlighted(B)).map(B=>(ut(k,c2(),{item:B}),!0));{const B=nt.getValue(k);return xo(k,_b()),n.onExecute(T,k,B),N&&io.close(T),E.some(!0)}}}),so.config({toggleClass:n.markers.openClass,aria:{mode:"expanded"}}),Qn.config({others:{sandbox:k=>Np(n,k,{onOpen:()=>so.on(k),onClose:()=>{n.lazyTypeaheadComp.get().each(T=>Sn(T.element,"aria-activedescendant")),so.off(k)}})}}),Qt(x,[cn(k=>{n.lazyTypeaheadComp.set(E.some(k))}),Xl(k=>{n.lazyTypeaheadComp.set(E.none())}),Sa(k=>{const T=Xe;Ty(n,p(k),k,l,T,Ra.HighlightMenuAndItem).get(Xe)}),Re(c2(),(k,T)=>{const N=Qn.getCoupled(k,"sandbox");l2(n.model,k,T.event.item),xo(k,_b()),n.onItemExecute(k,N,T.event.item,nt.getValue(k)),io.close(N),OO(k)})].concat(n.dismissOnBlur?[Re(Zu(),k=>{const T=Qn.getCoupled(k,"sandbox");Bi(T.element).isNone()&&io.close(T)})]:[]))],_={[Qm()]:[nt.name(),Ik.name(),x],...n.eventOrder};return{uid:n.uid,dom:_E(X(n,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...m,...Qs(n.typeaheadBehaviours,w)},eventOrder:_}}}),Up=n=>({...n,toCached:()=>Up(n.toCached()),bindFuture:r=>Up(n.bind(i=>i.fold(l=>hm(mo.error(l)),l=>r(l)))),bindResult:r=>Up(n.map(i=>i.bind(r))),mapResult:r=>Up(n.map(i=>i.map(r))),mapError:r=>Up(n.map(i=>i.mapError(r))),foldResult:(r,i)=>n.map(l=>l.fold(r,i)),withTimeout:(r,i)=>Up(zf(l=>{let u=!1;const m=setTimeout(()=>{u=!0,l(mo.error(i()))},r);n.get(p=>{u||(clearTimeout(m),l(p))})}))}),RO=n=>Up(zf(n)),ux=(n,r,i=[],l,u,m)=>{const p=r.fold(()=>({}),w=>({action:w})),b={buttonBehaviours:Ve([w1(()=>!n.enabled||m.isDisabled()),tr(),Hn.config({}),Qt("button press",[Sb("click"),Sb("mousedown")])].concat(i)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},x=X(b,{dom:l});return X(x,{components:u})},DO=(n,r,i,l=[])=>{const u={tag:"button",classes:["tox-tbtn"],attributes:n.tooltip.map(b=>({"aria-label":i.translate(b),title:i.translate(b)})).getOr({})},m=n.icon.map(b=>t2(b,i.icons)),p=Ep([m]);return ux(n,r,l,u,p,i)},d2=n=>{switch(n){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}},MO=(n,r,i,l=[],u=[])=>{const m=i.translate(n.text),p=n.icon.map(_=>t2(_,i.icons)),b=[p.getOrThunk(()=>Nn(m))],x=n.buttonType.getOr(n.primary||n.borderless?"primary":"secondary"),w=[...d2(x),...p.isSome()?["tox-button--icon"]:[],...n.borderless?["tox-button--naked"]:[],...u];return ux(n,r,l,{tag:"button",classes:w,attributes:{title:m}},b,i)},BO=(n,r,i,l=[],u=[])=>{const m=MO(n,E.some(r),i,l,u);return Dr.sketch(m)},PO=(n,r)=>i=>{r==="custom"?ut(i,bu,{name:n,value:{}}):r==="submit"?xo(i,Pp):r==="cancel"?xo(i,bm):console.error("Unknown button type: ",r)},u2=(n,r,i)=>{if(((l,u)=>u==="menu")(0,r)){const l=()=>p,u=n,m={...n,type:"menubutton",search:E.none(),onSetup:b=>(b.setEnabled(n.enabled),Xe),fetch:_O(u.items,l,i)},p=Zo(F1(m,"tox-tbtn",i,E.none()));return p.asSpec()}if(((l,u)=>u==="custom"||u==="cancel"||u==="submit")(0,r)){const l=PO(n.name,r),u={...n,borderless:!1};return BO(u,l,i.shared.providers,[])}if(((l,u)=>u==="togglebutton")(0,r))return((l,u)=>{var m,p;const b=l.icon.map(H=>Cm(H,u.icons)).map(Zo),x=l.buttonType.getOr(l.primary?"primary":"secondary"),w={...l,name:(m=l.name)!==null&&m!==void 0?m:"",primary:x==="primary",tooltip:E.from(l.tooltip),enabled:(p=l.enabled)!==null&&p!==void 0&&p,borderless:!1},_=w.tooltip.map(H=>({"aria-label":u.translate(H),title:u.translate(H)})).getOr({}),k=d2(x??"secondary"),T=l.icon.isSome()&&l.text.isSome(),N={tag:"button",classes:[...k.concat(l.icon.isSome()?["tox-button--icon"]:[]),...l.active?["tox-button--enabled"]:[],...T?["tox-button--icon-and-text"]:[]],attributes:_},B=u.translate(l.text.getOr("")),V=Nn(B),U=[...Ep([b.map(H=>H.asSpec())]),...l.text.isSome()?[V]:[]],q=ux(w,E.some(H=>{ut(H,bu,{name:l.name,value:{setIcon:L=>{b.map(W=>W.getOpt(H).each(G=>{Rt.set(G,[Cm(L,u.icons)])}))}}})}),[],N,U,u);return Dr.sketch(q)})(n,i.shared.providers);throw console.error("Unknown footer button type: ",r),new Error("Unknown footer button type")},IO={type:"separator"},LO=n=>({type:"menuitem",value:n.url,text:n.title,meta:{attach:n.attach},onAction:Xe}),Lk=(n,r)=>({type:"menuitem",value:r,text:n,meta:{attach:void 0},onAction:Xe}),FO=(n,r)=>(i=>Ke(i,LO))(((i,l)=>Jt(l,u=>u.type===i))(n,r)),iM=n=>FO("header",n.targets),lM=n=>FO("anchor",n.targets),cM=n=>E.from(n.anchorTop).map(r=>Lk("<top>",r)).toArray(),HO=n=>E.from(n.anchorBottom).map(r=>Lk("<bottom>",r)).toArray(),Fk=(n,r)=>{const i=n.toLowerCase();return Jt(r,l=>{var u;const m=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,p=(u=l.value)!==null&&u!==void 0?u:"";return kr(m.toLowerCase(),i)||kr(p.toLowerCase(),i)})},zO=lt("aria-invalid"),Hk=(n,r)=>{n.dom.checked=r},VO=n=>n.dom.checked,or=n=>(r,i,l,u)=>mt(i,"name").fold(()=>n(i,u,E.none()),m=>r.field(m,n(i,u,mt(l,m)))),dM={bar:or((n,r)=>((i,l)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ke(i.items,l.interpreter)}))(n,r.shared)),collection:or((n,r,i)=>Q_(n,r.shared.providers,i)),alertbanner:or((n,r)=>((i,l)=>{const u=IC(i.icon,l.icons);return Qc.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${i.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:i.url?void 0:u},components:i.url?[Dr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:u,attributes:{title:l.translate(i.iconTooltip)}},action:m=>ut(m,bu,{name:"alert-banner",value:i.url}),buttonBehaviours:Ve([LC()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:l.translate(i.text)}}]})})(n,r.shared.providers)),input:or((n,r,i)=>((l,u,m)=>Ak({name:l.name,multiline:!1,label:l.label,inputMode:l.inputMode,placeholder:l.placeholder,flex:!1,disabled:!l.enabled,classname:"tox-textfield",validation:E.none(),maximized:l.maximized,data:m},u))(n,r.shared.providers,i)),textarea:or((n,r,i)=>((l,u,m)=>Ak({name:l.name,multiline:!0,label:l.label,inputMode:E.none(),placeholder:l.placeholder,flex:!0,disabled:!l.enabled,classname:"tox-textarea",validation:E.none(),maximized:l.maximized,data:m},u))(n,r.shared.providers,i)),label:or((n,r)=>((i,l)=>{const u="tox-label";return{dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"label",classes:[u,...i.align==="center"?[`${u}--center`]:[],...i.align==="end"?[`${u}--end`]:[]]},components:[Nn(l.providers.translate(i.label))]},...Ke(i.items,l.interpreter)],behaviours:Ve([Uf(),Rt.config({}),(m=E.none(),aO(m,Og,Wa)),vt.config({mode:"acyclic"})])};var m})(n,r.shared)),iframe:(tS=(n,r,i)=>((l,u,m)=>{const p="tox-dialog__iframe",b=l.transparent?[]:[`${p}--opaque`],x=l.border?["tox-navobj-bordered"]:[],w={...l.label.map(N=>({title:N})).getOr({}),...m.map(N=>({srcdoc:N})).getOr({}),...l.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},_=((N,B)=>{const V=Ot(N.getOr(""));return{getValue:U=>V.get(),setValue:(U,q)=>{if(V.get()!==q){const H=U.element,L=()=>Kt(H,"srcdoc",q);B?J6.fold(ue(Ck),W=>W.throttle)(H,q,L):L()}V.set(q)}}})(m,l.streamContent),k=l.label.map(N=>Gr(N,u)),T=Wo.parts.field({factory:{sketch:N=>sx(E.from(x),{uid:N.uid,dom:{tag:"iframe",attributes:w,classes:[p,...b]},behaviours:Ve([Hn.config({}),It.config({}),ym(m,_.getValue,_.setValue),Ea.config({channels:{[Jy]:{onReceive:(B,V)=>{V.newFocus.each(U=>{rr(B.element).each(q=>{(Go(B.element,U)?$n:Un)(q,"tox-navobj-bordered-focus")})})}}}})])})}});return mc(k,T,["tox-form__group--stretched"],[])})(n,r.shared.providers,i),(n,r,i,l)=>{const u=X(r,{source:"dynamic"});return or(tS)(n,u,i,l)}),button:or((n,r)=>((i,l)=>{const u=PO(i.name,"custom");return m=E.none(),p=Wo.parts.field({factory:Dr,...MO(i,E.some(u),l,[Gy(""),Uf()])}),mc(m,p,[],[]);var m,p})(n,r.shared.providers)),checkbox:or((n,r,i)=>((l,u,m)=>{const p=k=>(k.element.dom.click(),E.some(!0)),b=Wo.parts.field({factory:{sketch:kt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Ve([Uf(),Mt.config({disabled:()=>!l.enabled||u.isDisabled(),onDisabled:k=>{rr(k.element).each(T=>$n(T,"tox-checkbox--disabled"))},onEnabled:k=>{rr(k.element).each(T=>Un(T,"tox-checkbox--disabled"))}}),Hn.config({}),It.config({}),aO(m,VO,Hk),vt.config({mode:"special",onEnter:p,onSpace:p,stopSpaceKeyup:!0}),Qt("checkbox-events",[Re(hl(),(k,T)=>{ut(k,pi,{name:l.name})})])])}),x=Wo.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Nn(u.translate(l.label))],behaviours:Ve([j0.config({})])}),w=k=>Ol(k==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+k]},u.icons),_=Zo({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[w("checked"),w("unchecked")]});return Wo.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[b,_.asSpec(),x],fieldBehaviours:Ve([Mt.config({disabled:()=>!l.enabled||u.isDisabled()}),tr()])})})(n,r.shared.providers,i)),colorinput:or((n,r,i)=>((l,u,m,p)=>{const b=Wo.parts.field({factory:mm,inputClasses:["tox-textfield"],data:p,onSetValue:k=>xu.run(k).get(Xe),inputBehaviours:Ve([Mt.config({disabled:u.providers.isDisabled}),tr(),Hn.config({}),xu.config({invalidClass:"tox-textbox-field-invalid",getRoot:k=>rr(k.element),notify:{onValid:k=>{const T=nt.getValue(k);ut(k,BT,{color:T})}},validator:{validateOnLoad:!1,validate:k=>{const T=nt.getValue(k);if(T.length===0)return hm(mo.value(!0));{const N=Ia("span");Ht(N,"background-color",T);const B=vs(N,"background-color").fold(()=>mo.error("blah"),V=>mo.value(T));return hm(B)}}}})]),selectOnFocus:!1}),x=l.label.map(k=>Gr(k,u.providers)),w=(k,T)=>{ut(k,Dy,{value:T})},_=Zo(((k,T)=>Rl.sketch({dom:k.dom,components:k.components,toggleClass:"mce-active",dropdownBehaviours:Ve([w1(T.providers.isDisabled),tr(),j0.config({}),Hn.config({})]),layouts:k.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:T.getSink,fetch:N=>zf(B=>k.fetch(B)).map(B=>E.from(U0(X(_y(lt("menu-value"),B,V=>{k.onItemAction(N,V)},k.columns,k.presets,Xc.CLOSE_ON_EXECUTE,Ne,T.providers),{movement:E1(k.columns,k.presets)})))),parts:{menu:um(0,0,k.presets)}}))({dom:{tag:"span",attributes:{"aria-label":u.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ns,ir,Wn],onLtr:()=>[ir,ns,Wn]},components:[],fetch:pm(m.getColors(l.storageKey),l.storageKey,m.hasCustomColors()),columns:m.getColorCols(l.storageKey),presets:"color",onItemAction:(k,T)=>{_.getOpt(k).each(N=>{T==="custom"?m.colorPicker(B=>{B.fold(()=>xo(N,PT),V=>{w(N,V),P_(l.storageKey,V)})},"#ffffff"):w(N,T==="remove"?"":T)})}},u));return Wo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:x.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[b,_.asSpec()]}]),fieldBehaviours:Ve([Qt("form-field-events",[Re(BT,(k,T)=>{_.getOpt(k).each(N=>{Ht(N.element,"background-color",T.event.color)}),ut(k,pi,{name:l.name})}),Re(Dy,(k,T)=>{Wo.getField(k).each(N=>{nt.setValue(N,T.event.value),wo.getCurrent(k).each(It.focus)})}),Re(PT,(k,T)=>{Wo.getField(k).each(N=>{wo.getCurrent(k).each(It.focus)})})])])})})(n,r.shared,r.colorinput,i)),colorpicker:or((n,r,i)=>((l,u,m)=>{const p=w=>"tox-"+w,b=q6((w=>_=>Co(_)?w.translate(K6[_]):w.translate(_))(u),p),x=Zo(b.sketch({dom:{tag:"div",classes:[p("color-picker-container")],attributes:{role:"presentation"}},onValidHex:w=>{ut(w,bu,{name:"hex-valid",value:!0})},onInvalidHex:w=>{ut(w,bu,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[x.asSpec()],behaviours:Ve([ym(m,w=>{const _=x.get(w);return wo.getCurrent(_).bind(k=>nt.getValue(k).hex).map(k=>"#"+gd(k,"#")).getOr("")},(w,_)=>{const k=E.from(/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(_)).bind(N=>ul(N,1)),T=x.get(w);wo.getCurrent(T).fold(()=>{console.log("Can not find form")},N=>{nt.setValue(N,{hex:k.getOr("")}),P1.getField(N,"hex").each(B=>{xo(B,pl())})})}),Uf()])}})(0,r.shared.providers,i)),dropzone:or((n,r,i)=>((l,u,m)=>{const p=(B,V)=>{V.stop()},b=B=>(V,U)=>{xt(B,q=>{q(V,U)})},x=(B,V)=>{var U;if(!Mt.isDisabled(B)){const q=V.event.raw;_(B,(U=q.dataTransfer)===null||U===void 0?void 0:U.files)}},w=(B,V)=>{const U=V.event.raw.target;_(B,U.files)},_=(B,V)=>{V&&(nt.setValue(B,((U,q)=>{const H=wm.explode(q.getOption("images_file_types"));return Jt(Ir(U),L=>Yr(H,W=>wi(L.name.toLowerCase(),`.${W.toLowerCase()}`)))})(V,u)),ut(B,pi,{name:l.name}))},k=Zo({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Ve([Qt("input-file-events",[Yl(ci()),Yl($a())])])}),T=l.label.map(B=>Gr(B,u)),N=Wo.parts.field({factory:{sketch:B=>({uid:B.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Ve([Gy(m.getOr([])),Uf(),Mt.config({}),so.config({toggleClass:"dragenter",toggleOnExecute:!1}),Qt("dropzone-events",[Re("dragenter",b([p,so.toggle])),Re("dragleave",b([p,so.toggle])),Re("dragover",p),Re("drop",b([p,x])),Re(hl(),w)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Nn(u.translate("Drop an image here"))]},Dr.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Nn(u.translate("Browse for an image")),k.asSpec()],action:V=>{k.get(V).element.dom.click()},buttonBehaviours:Ve([Hn.config({}),w1(u.isDisabled),tr()])})]}]})}});return mc(T,N,["tox-form__group--stretched"],[])})(n,r.shared.providers,i)),grid:or((n,r)=>((i,l)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${i.columns}col`]},components:Ke(i.items,l.interpreter)}))(n,r.shared)),listbox:or((n,r,i)=>((l,u,m)=>{const p=u.shared.providers,b=m.bind(k=>n2(l.items,k)).orThunk(()=>Et(l.items).filter(Sk)),x=l.label.map(k=>Gr(k,p)),w=Wo.parts.field({dom:{},factory:{sketch:k=>o2({uid:k.uid,text:b.map(T=>T.text),icon:E.none(),tooltip:l.label,role:E.none(),fetch:(T,N)=>{const B=Tk(T,l.name,l.items,nt.getValue(T));N(L1(B,Xc.CLOSE_ON_EXECUTE,u,{isHorizontalMenu:!1,search:E.none()}))},onSetup:ue(Xe),getApi:ue({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Hn.config({}),ym(b.map(T=>T.value),T=>js(T.element,Ek),(T,N)=>{n2(l.items,N).each(B=>{Kt(T.element,Ek,B.value),ut(T,rl,{text:B.text})})})]},"tox-listbox",u.shared)}}),_={dom:{tag:"div",classes:["tox-listboxfield"]},components:[w]};return Wo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:hn([x.toArray(),[_]]),fieldBehaviours:Ve([Mt.config({disabled:ue(!l.enabled),onDisabled:k=>{Wo.getField(k).each(Mt.disable)},onEnabled:k=>{Wo.getField(k).each(Mt.enable)}})])})})(n,r,i)),selectbox:or((n,r,i)=>((l,u,m)=>{const p=Ke(l.items,k=>({text:u.translate(k.text),value:k.value})),b=l.label.map(k=>Gr(k,u)),x=Wo.parts.field({dom:{},...m.map(k=>({data:k})).getOr({}),selectAttributes:{size:l.size},options:p,factory:hO,selectBehaviours:Ve([Mt.config({disabled:()=>!l.enabled||u.isDisabled()}),Hn.config({}),Qt("selectbox-change",[Re(hl(),(k,T)=>{ut(k,pi,{name:l.name})})])])}),w=l.size>1?E.none():E.some(Ol("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},u.icons)),_={dom:{tag:"div",classes:["tox-selectfield"]},components:hn([[x],w.toArray()])};return Wo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:hn([b.toArray(),[_]]),fieldBehaviours:Ve([Mt.config({disabled:()=>!l.enabled||u.isDisabled(),onDisabled:k=>{Wo.getField(k).each(Mt.disable)},onEnabled:k=>{Wo.getField(k).each(Mt.enable)}}),tr()])})})(n,r.shared.providers,i)),sizeinput:or((n,r)=>((i,l)=>{let u=s2;const m=lt("ratio-event"),p=N=>Ol(N,{tag:"span",classes:["tox-icon","tox-lock-icon__"+N]},l.icons),b=hi.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:l.translate(i.label.getOr("Constrain proportions"))}},components:[p("lock"),p("unlock")],buttonBehaviours:Ve([Mt.config({disabled:()=>!i.enabled||l.isDisabled()}),tr(),Hn.config({})])}),x=N=>({dom:{tag:"div",classes:["tox-form__group"]},components:N}),w=N=>Wo.parts.field({factory:mm,inputClasses:["tox-textfield"],inputBehaviours:Ve([Mt.config({disabled:()=>!i.enabled||l.isDisabled()}),tr(),Hn.config({}),Qt("size-input-events",[Re(Dc(),(B,V)=>{ut(B,m,{isField1:N})}),Re(hl(),(B,V)=>{ut(B,pi,{name:i.name})})])]),selectOnFocus:!1}),_=N=>({dom:{tag:"label",classes:["tox-label"]},components:[Nn(l.translate(N))]}),k=hi.parts.field1(x([Wo.parts.label(_("Width")),w(!0)])),T=hi.parts.field2(x([Wo.parts.label(_("Height")),w(!1)]));return hi.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[k,T,x([_(" "),b])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(N,B,V)=>{rx(nt.getValue(N)).each(U=>{u(U).each(q=>{nt.setValue(B,(H=>{const L={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4};let W=H.value.toFixed((G=H.unit)in L?L[G]:1);var G;return W.indexOf(".")!==-1&&(W=W.replace(/\.?0*$/,"")),W+H.unit})(q))})})},coupledFieldBehaviours:Ve([Mt.config({disabled:()=>!i.enabled||l.isDisabled(),onDisabled:N=>{hi.getField1(N).bind(Wo.getField).each(Mt.disable),hi.getField2(N).bind(Wo.getField).each(Mt.disable),hi.getLock(N).each(Mt.disable)},onEnabled:N=>{hi.getField1(N).bind(Wo.getField).each(Mt.enable),hi.getField2(N).bind(Wo.getField).each(Mt.enable),hi.getLock(N).each(Mt.enable)}}),tr(),Qt("size-input-events2",[Re(m,(N,B)=>{const V=B.event.isField1,U=V?hi.getField1(N):hi.getField2(N),q=V?hi.getField2(N):hi.getField1(N),H=U.map(nt.getValue).getOr(""),L=q.map(nt.getValue).getOr("");u=((W,G)=>{const Q=rx(W).toOptional(),re=rx(G).toOptional();return Fr(Q,re,(ge,Te)=>Ok(ge,Te.unit).map(Oe=>Te.value/Oe).map(Oe=>{return Ae=Oe,tt=Te.unit,at=>Ok(at,tt).map(ht=>({value:ht*Ae,unit:tt}));var Ae,tt}).getOr(s2)).getOr(s2)})(H,L)})])])})})(n,r.shared.providers)),slider:or((n,r,i)=>((l,u,m)=>{const p=pc.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Nn(u.translate(l.label))]}),b=pc.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),x=pc.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return pc.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:l.min,maxX:l.max,getInitialValue:ue(m.getOrThunk(()=>(Math.abs(l.max)-Math.abs(l.min))/2))},components:[p,b,x],sliderBehaviours:Ve([Uf(),It.config({})]),onChoose:(w,_,k)=>{ut(w,pi,{name:l.name,value:k})}})})(n,r.shared.providers,i)),urlinput:or((n,r,i)=>((l,u,m,p)=>{const b=u.shared.providers,x=H=>{const L=nt.getValue(H);m.addToHistory(L.value,l.filetype)},w={...p.map(H=>({initialData:H})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":zO,type:"url"},minChars:0,responseTime:0,fetch:H=>{const L=((G,Q,re)=>{var ge,Te;const Oe=nt.getValue(Q),Ae=(Te=(ge=Oe==null?void 0:Oe.meta)===null||ge===void 0?void 0:ge.text)!==null&&Te!==void 0?Te:Oe.value;return re.getLinkInformation().fold(()=>[],tt=>{const at=Fk(Ae,(Bt=>Ke(Bt,Lt=>Lk(Lt,Lt)))(re.getHistory(G)));return G==="file"?(ht=[at,Fk(Ae,iM(tt)),Fk(Ae,hn([cM(tt),lM(tt),HO(tt)]))],I(ht,(Bt,Lt)=>Bt.length===0||Lt.length===0?Bt.concat(Lt):Bt.concat(IO,Lt),[])):at;var ht})})(l.filetype,H,m),W=L1(L,Xc.BUBBLE_TO_SANDBOX,u,{isHorizontalMenu:!1,search:E.none()});return hm(W)},getHotspot:H=>U.getOpt(H),onSetValue:(H,L)=>{H.hasConfigured(xu)&&xu.run(H).get(Xe)},typeaheadBehaviours:Ve([...m.getValidationHandler().map(H=>xu.config({getRoot:L=>rr(L.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(L,W)=>{T.getOpt(L).each(G=>{Kt(G.element,"title",b.translate(W))})}},validator:{validate:L=>{const W=nt.getValue(L);return RO(G=>{H({type:l.filetype,url:W.value},Q=>{if(Q.status==="invalid"){const re=mo.error(Q.message);G(re)}else{const re=mo.value(Q.message);G(re)}})})},validateOnLoad:!1}})).toArray(),Mt.config({disabled:()=>!l.enabled||b.isDisabled()}),Hn.config({}),Qt("urlinput-events",[Re(pl(),H=>{const L=ec(H.element),W=L.trim();W!==L&&Bd(H.element,W),l.filetype==="file"&&ut(H,pi,{name:l.name})}),Re(hl(),H=>{ut(H,pi,{name:l.name}),x(H)}),Re(dt(),H=>{ut(H,pi,{name:l.name}),x(H)})])]),eventOrder:{[pl()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:H=>H.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:u.shared.getSink,parts:{menu:um(0,0,"normal")},onExecute:(H,L,W)=>{ut(L,Pp,{})},onItemExecute:(H,L,W,G)=>{x(H),ut(H,pi,{name:l.name})}},_=Wo.parts.field({...w,factory:NO}),k=l.label.map(H=>Gr(H,b)),T=Zo(((H,L,W=H,G=H)=>Ol(W,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+H],attributes:{title:b.translate(G),"aria-live":"polite",...L.fold(()=>({}),Q=>({id:Q}))}},b.icons))("invalid",E.some(zO),"warning")),N=Zo({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[T.asSpec()]}),B=m.getUrlPicker(l.filetype),V=lt("browser.url.event"),U=Zo({dom:{tag:"div",classes:["tox-control-wrap"]},components:[_,N.asSpec()],behaviours:Ve([Mt.config({disabled:()=>!l.enabled||b.isDisabled()})])}),q=Zo(BO({name:l.name,icon:E.some("browse"),text:l.picker_text.or(l.label).getOr(""),enabled:l.enabled,primary:!1,buttonType:E.none(),borderless:!0},H=>xo(H,V),b,[],["tox-browse-url"]));return Wo.sketch({dom:OT([]),components:k.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:hn([[U.asSpec()],B.map(()=>q.asSpec()).toArray()])}]),fieldBehaviours:Ve([Mt.config({disabled:()=>!l.enabled||b.isDisabled(),onDisabled:H=>{Wo.getField(H).each(Mt.disable),q.getOpt(H).each(Mt.disable)},onEnabled:H=>{Wo.getField(H).each(Mt.enable),q.getOpt(H).each(Mt.enable)}}),tr(),Qt("url-input-events",[Re(V,H=>{wo.getCurrent(H).each(L=>{const W=nt.getValue(L),G={fieldname:l.name,...W};B.each(Q=>{Q(G).get(re=>{nt.setValue(L,re),ut(H,pi,{name:l.name})})})})})])])})})(n,r,r.urlinput,i)),customeditor:or(n=>{const r=En(),i=Zo({dom:{tag:n.tag}}),l=En();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Ve([Qt("custom-editor-events",[cn(u=>{i.getOpt(u).each(m=>{((p=>Dt(p,"init"))(n)?n.init(m.element.dom):iO.load(n.scriptId,n.scriptUrl).then(p=>p(m.element.dom,n.settings))).then(p=>{l.on(b=>{p.setValue(b)}),l.clear(),r.set(p)})})})]),ym(E.none(),()=>r.get().fold(()=>l.get().getOr(""),u=>u.getValue()),(u,m)=>{r.get().fold(()=>l.set(m),p=>p.setValue(m))}),Uf()]),components:[i.asSpec()]}}),htmlpanel:or(n=>n.presets==="presentation"?Qc.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:n.html}}):Qc.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:n.html,attributes:{role:"document"}},containerBehaviours:Ve([Hn.config({}),It.config({})])})),imagepreview:or((n,r,i)=>((l,u)=>{const m=Ot(u.getOr({url:""})),p=Zo({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:u.map(_=>({src:_.url})).getOr({})}}),b=Zo({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[p.asSpec()]}),x={};l.height.each(_=>x.height=_);const w=u.map(_=>({url:_.url,zoom:E.from(_.zoom),cachedWidth:E.from(_.cachedWidth),cachedHeight:E.from(_.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:x,attributes:{role:"presentation"}},components:[b.asSpec()],behaviours:Ve([Uf(),ym(w,()=>m.get(),(_,k)=>{const T={url:k.url};k.zoom.each(B=>T.zoom=B),k.cachedWidth.each(B=>T.cachedWidth=B),k.cachedHeight.each(B=>T.cachedHeight=B),m.set(T);const N=()=>{const{cachedWidth:B,cachedHeight:V,zoom:U}=T;if(!mr(B)&&!mr(V)){if(mr(U)){const H=((L,W,G)=>{const Q=On(L),re=_e(L);return Math.min(Q/W,re/G,1)})(_.element,B,V);T.zoom=H}const q=((H,L,W,G,Q)=>{const re=W*Q,ge=G*Q,Te=Math.max(0,H/2-re/2),Oe=Math.max(0,L/2-ge/2);return{left:Te.toString()+"px",top:Oe.toString()+"px",width:re.toString()+"px",height:ge.toString()+"px"}})(On(_.element),_e(_.element),B,V,T.zoom);b.getOpt(_).each(H=>{Ki(H.element,q)})}};p.getOpt(_).each(B=>{const V=B.element;var U;k.url!==js(V,"src")&&(Kt(V,"src",k.url),Un(_.element,"tox-imagepreview__loaded")),N(),(U=V,new Promise((q,H)=>{const L=()=>{G(),q(U)},W=[yr(U,"load",L),yr(U,"error",()=>{G(),H("Unable to load data from image: "+U.dom.src)})],G=()=>xt(W,Q=>Q.unbind());U.dom.complete&&L()})).then(q=>{_.getSystem().isConnected()&&($n(_.element,"tox-imagepreview__loaded"),T.cachedWidth=q.dom.naturalWidth,T.cachedHeight=q.dom.naturalHeight,N())})})})])}})(n,i)),table:or((n,r)=>((i,l)=>{const u=b=>({dom:{tag:"td",innerHtml:l.translate(b)}});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(p=i.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ke(p,b=>({dom:{tag:"th",innerHtml:l.translate(b)}}))}]}),(m=i.cells,{dom:{tag:"tbody"},components:Ke(m,b=>({dom:{tag:"tr"},components:Ke(b,u)}))})],behaviours:Ve([Hn.config({}),It.config({})])};var m,p})(n,r.shared.providers)),tree:or((n,r)=>((i,l)=>{const u=i.onLeafAction.getOr(Xe),m=i.onToggleExpand.getOr(Xe),p=i.defaultExpandedIds,b=Ot(p),x=Ot(i.defaultSelectedId),w=lt("tree-id"),_=(k,T)=>i.items.map(N=>N.type==="leaf"?a2({leaf:N,selectedId:k,onLeafAction:u,visible:!0,treeId:w,backstage:l}):i2({directory:N,selectedId:k,onLeafAction:u,expandedIds:T,labelTabstopping:!0,treeId:w,backstage:l}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:_(x.get(),b.get()),behaviours:Ve([vt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Qt(cx,[Re("expand-tree-node",(k,T)=>{const{expanded:N,node:B}=T.event;b.set(N?[...b.get(),B]:b.get().filter(V=>V!==B)),m(b.get(),{expanded:N,node:B})})]),Ea.config({channels:{[`update-active-item-${w}`]:{onReceive:(k,T)=>{x.set(E.some(T.value)),Rt.set(k,_(E.some(T.value),b.get()))}}}}),Rt.config({})])}})(n,r)),panel:or((n,r)=>((i,l)=>({dom:{tag:"div",classes:i.classes},components:Ke(i.items,l.shared.interpreter)}))(n,r))},$O={field:(n,r)=>r,record:ue([])},UO=(n,r,i,l)=>{const u=X(l,{shared:{interpreter:m=>zk(n,m,i,u)}});return zk(n,r,i,u)},zk=(n,r,i,l)=>mt(dM,r.type).fold(()=>(console.error(`Unknown factory type "${r.type}", defaulting to container: `,r),r),u=>u(n,r,i,l)),Vk=(n,r,i)=>zk($O,n,r,i),km="layout-inset",m2=n=>n.x,ZO=(n,r)=>n.x+n.width/2-r.width/2,$k=(n,r)=>n.x+n.width-r.width,Uk=n=>n.y,Zk=(n,r)=>n.y+n.height-r.height,f2=(n,r)=>n.y+n.height/2-r.height/2,g2=(n,r,i)=>br($k(n,r),Zk(n,r),i.insetSouthwest(),Vb(),"southwest",xr(n,{right:0,bottom:3}),km),p2=(n,r,i)=>br(m2(n),Zk(n,r),i.insetSoutheast(),zb(),"southeast",xr(n,{left:1,bottom:3}),km),H1=(n,r,i)=>br($k(n,r),Uk(n),i.insetNorthwest(),kh(),"northwest",xr(n,{right:0,top:2}),km),z1=(n,r,i)=>br(m2(n),Uk(n),i.insetNortheast(),_h(),"northeast",xr(n,{left:1,top:2}),km),hc=(n,r,i)=>br(ZO(n,r),Uk(n),i.insetNorth(),xv(),"north",xr(n,{top:2}),km),mx=(n,r,i)=>br(ZO(n,r),Zk(n,r),i.insetSouth(),Sh(),"south",xr(n,{bottom:3}),km),WO=(n,r,i)=>br($k(n,r),f2(n,r),i.insetEast(),Lg(),"east",xr(n,{right:0}),km),bi=(n,r,i)=>br(m2(n),f2(n,r),i.insetWest(),vv(),"west",xr(n,{left:1}),km),nd=n=>{switch(n){case"north":return hc;case"northeast":return z1;case"northwest":return H1;case"south":return mx;case"southeast":return p2;case"southwest":return g2;case"east":return WO;case"west":return bi}},jO=(n,r,i,l,u)=>Cv(l).map(nd).getOr(hc)(n,r,i,l,u),Wk=n=>{switch(n){case"north":return mx;case"northeast":return p2;case"northwest":return g2;case"south":return hc;case"southeast":return z1;case"southwest":return H1;case"east":return bi;case"west":return WO}},jk=(n,r,i,l,u)=>Cv(l).map(Wk).getOr(hc)(n,r,i,l,u),fx={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},uM=(n,r,i)=>{const l={maxHeightFunction:nm()};return()=>i()?{type:"node",root:Gi(bs(n())),node:E.from(n()),bubble:wl(12,12,fx),layouts:{onRtl:()=>[z1],onLtr:()=>[H1]},overrides:l}:{type:"hotspot",hotspot:r(),bubble:wl(-12,12,fx),layouts:{onRtl:()=>[ir,ns,Wn],onLtr:()=>[ns,ir,Wn]},overrides:l}},gx=(n,r,i,l)=>{const u={maxHeightFunction:nm()};return()=>l()?{type:"node",root:Gi(bs(r())),node:E.from(r()),bubble:wl(12,12,fx),layouts:{onRtl:()=>[hc],onLtr:()=>[hc]},overrides:u}:n?{type:"node",root:Gi(bs(r())),node:E.from(r()),bubble:wl(0,-Ue(r()),fx),layouts:{onRtl:()=>[ia],onLtr:()=>[ia]},overrides:u}:{type:"hotspot",hotspot:i(),bubble:wl(0,0,fx),layouts:{onRtl:()=>[ia],onLtr:()=>[ia]},overrides:u}},h2=(n,r,i)=>()=>i()?{type:"node",root:Gi(bs(n())),node:E.from(n()),layouts:{onRtl:()=>[hc],onLtr:()=>[hc]}}:{type:"hotspot",hotspot:r(),layouts:{onRtl:()=>[Wn],onLtr:()=>[Wn]}},qk=(n,r)=>()=>({type:"selection",root:r(),getSelection:()=>{const i=n.selection.getRng(),l=n.model.table.getSelectedCells();if(l.length>1){const u=l[0],m=l[l.length-1],p={firstCell:ot(u),lastCell:ot(m)};return E.some(p)}return E.some(rc.range(ot(i.startContainer),i.startOffset,ot(i.endContainer),i.endOffset))}}),mM=n=>r=>({type:"node",root:n(),node:r}),sd=(n,r,i,l)=>{const u=xp(n),m=()=>ot(n.getBody()),p=()=>ot(n.getContentAreaContainer()),b=()=>u||!l();return{inlineDialog:uM(p,r,b),inlineBottomDialog:gx(n.inline,p,i,b),banner:h2(p,r,b),cursor:qk(n,m),node:mM(m)}},fM=n=>(r,i)=>{U_(n)(r,i)},gM=n=>()=>lT(n),Dl=n=>r=>yy(n,r),px=n=>r=>H_(n,r),bc=n=>()=>YC(n),qO=n=>Zs(n,"items"),Yo=n=>Zs(n,"format"),Zp=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],hx=n=>I(n,(r,i)=>{if(Dt(i,"items")){const l=hx(i.items);return{customFormats:r.customFormats.concat(l.customFormats),formats:r.formats.concat([{title:i.title,items:l.formats}])}}if(Dt(i,"inline")||(l=>Dt(l,"block"))(i)||(l=>Dt(l,"selector"))(i)){const l=`custom-${Co(i.name)?i.name:i.title.toLowerCase()}`;return{customFormats:r.customFormats.concat([{name:l,format:i}]),formats:r.formats.concat([{title:i.title,format:l,icon:i.icon}])}}return{...r,formats:r.formats.concat(i)}},{customFormats:[],formats:[]}),Gk=n=>ZC(n).map(r=>{const i=((l,u)=>{const m=hx(u),p=b=>{xt(b,x=>{l.formatter.has(x.name)||l.formatter.register(x.name,x.format)})};return l.formatter?p(m.customFormats):l.on("init",()=>{p(m.customFormats)}),m.formats})(n,r);return J3(n)?Zp.concat(i):i}).getOr(Zp),b2=(n,r,i)=>({...n,type:"formatter",isSelected:r(n.format),getStylePreview:i(n.format)}),x2=(n,r,i,l)=>{const u=m=>Ke(m,p=>qO(p)?(b=>{const x=u(b.items);return{...b,type:"submenu",getStyleItems:ue(x)}})(p):Yo(p)?(b=>b2(b,i,l))(p):(b=>{const x=Ao(b);return x.length===1&&bo(x,"title")})(p)?{...p,type:"separator"}:(b=>{const x=Co(b.name)?b.name:lt(b.title),w=`custom-${x}`,_={...b,type:"formatter",format:w,isSelected:i(w),getStylePreview:l(w)};return n.formatter.register(x,_),_})(p));return u(r)},pM=wm.trim,v2=n=>r=>!!((i=>_t(i)&&i.nodeType===1)(r)&&(r.contentEditable===n||r.getAttribute("data-mce-contenteditable")===n)),hM=v2("true"),GO=v2("false"),Kk=(n,r,i,l,u)=>({type:n,title:r,url:i,level:l,attach:u}),y2=n=>n.innerText||n.textContent,KO=n=>(r=>r&&r.nodeName==="A"&&(r.id||r.name)!==void 0)(n)&&YO(n),bx=n=>n&&/^(H[1-6])$/.test(n.nodeName),YO=n=>(r=>{let i=r;for(;i=i.parentNode;){const l=i.contentEditable;if(l&&l!=="inherit")return hM(i)}return!1})(n)&&!GO(n),bM=n=>bx(n)&&YO(n),xM=n=>{var r;const i=(l=>l.id?l.id:lt("h"))(n);return Kk("header",(r=y2(n))!==null&&r!==void 0?r:"","#"+i,(l=>bx(l)?parseInt(l.nodeName.substr(1),10):0)(n),()=>{n.id=i})},vM=n=>{const r=n.id||n.name,i=y2(n);return Kk("anchor",i||"#"+r,"#"+r,0,Xe)},yM=n=>pM(n.title).length>0,XO=n=>{const r=(i=>Ke(qr(ot(i),"h1,h2,h3,h4,h5,h6,a:not([href])"),u=>u.dom))(n);return Jt((i=>Ke(Jt(i,bM),xM))(r).concat((i=>Ke(Jt(i,KO),vM))(r)),yM)},w2="tinymce-url-history",JO=n=>Co(n)&&/^https?/.test(n),Yk=n=>Pr(n)&&qi(n,r=>{return!(Qa(i=r)&&i.length<=5&&_c(i,JO));var i}).isNone(),Xk=()=>{const n=Ff.getItem(w2);if(n===null)return{};let r;try{r=JSON.parse(n)}catch(i){if(i instanceof SyntaxError)return console.log("Local storage "+w2+" was not valid JSON",i),{};throw i}return Yk(r)?r:(console.log("Local storage "+w2+" was not valid format",r),{})},wM=n=>{const r=Xk();return mt(r,n).getOr([])},CM=(n,r)=>{if(!JO(n))return;const i=Xk(),l=mt(i,r).getOr([]),u=Jt(l,m=>m!==n);i[r]=[n].concat(u).slice(0,5),(m=>{if(!Yk(m))throw new Error(`Bad format for history:
`+JSON.stringify(m));Ff.setItem(w2,JSON.stringify(m))})(i)},Jk=n=>!!n,QO=n=>Ho(wm.makeMap(n,/[, ]/),Jk),C2=n=>E.from(sE(n)),eA=n=>E.from(n).filter(Co).getOrUndefined(),_M=n=>({getHistory:wM,addToHistory:CM,getLinkInformation:()=>(r=>GC(r)?E.some({targets:XO(r.getBody()),anchorTop:eA(KC(r)),anchorBottom:eA(iE(r))}):E.none())(n),getValidationHandler:()=>(r=>E.from(rE(r)))(n),getUrlPicker:r=>((i,l)=>((u,m)=>{const p=(b=>{const x=E.from(qC(b)).filter(Jk).map(QO);return C2(b).fold(Ne,w=>x.fold(Pt,_=>Ao(_).length>0&&_))})(u);return Kr(p)?p?C2(u):E.none():p[m]?C2(u):E.none()})(i,l).map(u=>m=>zf(p=>{const b={filetype:l,fieldname:m.fieldname,...E.from(m.meta).getOr({})};u.call(i,(x,w)=>{if(!Co(x))throw new Error("Expected value to be string");if(w!==void 0&&!Pr(w))throw new Error("Expected meta to be a object");p({value:x,meta:w})},m.value,b)})))(n,r)}),dr=m0,wu=No,kM=ue([fe("shell",!1),Ee("makeItem"),fe("setupItem",Xe),Kc("listBehaviours",[Rt])]),SM=et({name:"items",overrides:()=>({behaviours:Ve([Rt.config({})])})}),tA=ue([SM]),Ml=la({name:ue("CustomList")(),configFields:kM(),partFields:tA(),factory:(n,r,i,l)=>{const u=n.shell?{behaviours:[Rt.config({})],components:[]}:{behaviours:[],components:r};return{uid:n.uid,dom:n.dom,components:u.components,behaviours:Qs(n.listBehaviours,u.behaviours),apis:{setItems:(m,p)=>{var b;(b=m,n.shell?E.some(b):Fo(b,n,"items")).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},x=>{const w=Rt.contents(x),_=p.length,k=_-w.length,T=k>0?it(k,()=>n.makeItem()):[],N=w.slice(_);xt(N,V=>Rt.remove(x,V)),xt(T,V=>Rt.append(x,V));const B=Rt.contents(x);xt(B,(V,U)=>{n.setupItem(m,V,p[U],U)})})}}}},apis:{setItems:(n,r,i)=>{n.setItems(r,i)}}}),V1=ue([Ee("dom"),fe("shell",!0),zs("toolbarBehaviours",[Rt])]),Qk=ue([et({name:"groups",overrides:()=>({behaviours:Ve([Rt.config({})])})})]),xc=la({name:"Toolbar",configFields:V1(),partFields:Qk(),factory:(n,r,i,l)=>{const u=n.shell?{behaviours:[Rt.config({})],components:[]}:{behaviours:[],components:r};return{uid:n.uid,dom:n.dom,components:u.components,behaviours:Qs(n.toolbarBehaviours,u.behaviours),apis:{setGroups:(m,p)=>{var b;(b=m,n.shell?E.some(b):Fo(b,n,"groups")).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},x=>{Rt.set(x,p)})},refresh:Xe},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(n,r,i)=>{n.setGroups(r,i)}}}),oA=Xe,EM=Ne,eS=ue([]);var tS,nA=Object.freeze({__proto__:null,setup:oA,isDocked:EM,getBehaviours:eS});const oS=n=>(Lr(vs(n,"position"),"fixed")?E.none():lg(n)).orThunk(()=>{const r=Ia("span");return Ci(n).bind(i=>{ys(i,r);const l=lg(r);return Is(r),l})}),sA=n=>oS(n).map(ko).getOrThunk(()=>Xt(0,0)),TM=(n,r)=>{const i=n.element;$n(i,r.transitionClass),Un(i,r.fadeOutClass),$n(i,r.fadeInClass),r.onShow(n)},OM=(n,r)=>{const i=n.element;$n(i,r.transitionClass),Un(i,r.fadeInClass),$n(i,r.fadeOutClass),r.onHide(n)},rA=(n,r)=>n.y>=r.y,nS=(n,r)=>n.bottom<=r.bottom,_2=(n,r,i)=>({location:"top",leftX:r,topY:i.bounds.y-n.y}),k2=(n,r,i)=>({location:"bottom",leftX:r,bottomY:n.bottom-i.bounds.bottom}),sS=n=>n.box.x-n.win.x,rS=(n,r,i)=>i.getInitialPos().map(l=>{const u=((m,p)=>{const b=p.optScrollEnv.fold(ue(m.bounds.y),x=>x.scrollElmTop+(m.bounds.y-x.currentScrollTop));return Xt(m.bounds.x,b)})(l,r);return{box:Ts(u.left,u.top,On(n),_e(n)),location:l.location}}),aA=(n,r,i,l,u)=>{const m=((b,x)=>{const w=x.optScrollEnv.fold(ue(b.y),_=>b.y+_.currentScrollTop-_.scrollElmTop);return Xt(b.x,w)})(r,i),p=Ts(m.left,m.top,r.width,r.height);l.setInitialPos({style:Lu(n),position:Gn(n,"position")||"static",bounds:p,location:u.location})},Wp=(n,r,i)=>i.getInitialPos().bind(l=>{var u;switch(i.clearInitialPos(),l.position){case"static":return E.some({morph:"static"});case"absolute":const m=oS(n).getOr(ni()),p=Gs(m),b=(u=m.dom.scrollTop)!==null&&u!==void 0?u:0;return E.some({morph:"absolute",positionCss:Ka("absolute",mt(l.style,"left").map(x=>r.x-p.x),mt(l.style,"top").map(x=>r.y-p.y+b),mt(l.style,"right").map(x=>p.right-r.right),mt(l.style,"bottom").map(x=>p.bottom-r.bottom))});default:return E.none()}}),aS=n=>{switch(n.location){case"top":return E.some({morph:"fixed",positionCss:Ka("fixed",E.some(n.leftX),E.some(n.topY),E.none(),E.none())});case"bottom":return E.some({morph:"fixed",positionCss:Ka("fixed",E.some(n.leftX),E.none(),E.none(),E.some(n.bottomY))});default:return E.none()}},iA=(n,r,i)=>{const l=n.element;return Lr(vs(l,"position"),"fixed")?((u,m,p)=>((b,x,w)=>rS(b,x,w).filter(({box:_})=>((k,T,N)=>_c(k,B=>{switch(B){case"bottom":return nS(T,N.bounds);case"top":return rA(T,N.bounds)}}))(w.getModes(),_,x)).bind(({box:_})=>Wp(b,_,w)))(u,m,p).orThunk(()=>m.optScrollEnv.bind(b=>rS(u,m,p)).bind(({box:b,location:x})=>{const w=Xn(),_=sS({win:w,box:b}),k=x==="top"?_2(w,_,m):k2(w,_,m);return aS(k)})))(l,r,i):((u,m,p)=>{const b=Gs(u),x=Xn(),w=((_,k,T)=>{const N=k.win,B=k.box,V=sS(k);return _r(_,U=>{switch(U){case"bottom":return nS(B,T.bounds)?E.none():E.some(k2(N,V,T));case"top":return rA(B,T.bounds)?E.none():E.some(_2(N,V,T));default:return E.none()}}).getOr({location:"no-dock"})})(p.getModes(),{win:x,box:b},m);return w.location==="top"||w.location==="bottom"?(aA(u,b,m,p,w),aS(w)):E.none()})(l,r,i)},iS=(n,r,i)=>{i.setDocked(!1),xt(["left","right","top","bottom","position"],l=>Mo(n.element,l)),r.onUndocked(n)},S2=(n,r,i,l)=>{const u=l.position==="fixed";i.setDocked(u),jb(n.element,l),(u?r.onDocked:r.onUndocked)(n)},E2=(n,r,i,l,u=!1)=>{r.contextual.each(m=>{m.lazyContext(n).each(p=>{const b=((x,w)=>x.y<w.bottom&&x.bottom>w.y)(p,l.bounds);b!==i.isVisible()&&(i.setVisible(b),u&&!b?(Pc(n.element,[m.fadeOutClass]),m.onHide(n)):(b?TM:OM)(n,m))})})},T2=(n,r,i,l,u)=>{E2(n,r,i,l,!0),S2(n,r,i,u.positionCss)},$1=(n,r,i)=>{n.getSystem().isConnected()&&((l,u,m)=>{const p=u.lazyViewport(l);E2(l,u,m,p),iA(l,p,m).each(b=>{((x,w,_,k,T)=>{switch(T.morph){case"static":return iS(x,w,_);case"absolute":return S2(x,w,_,T.positionCss);case"fixed":T2(x,w,_,k,T)}})(l,u,m,p,b)})})(n,r,i)},lS=(n,r,i)=>{i.isDocked()&&((l,u,m)=>{const p=l.element;m.setDocked(!1);const b=u.lazyViewport(l);((x,w,_)=>{const k=x.element;return rS(k,w,_).bind(({box:T})=>Wp(k,T,_))})(l,b,m).each(x=>{switch(x.morph){case"static":iS(l,u,m);break;case"absolute":S2(l,u,m,x.positionCss)}}),m.setVisible(!0),u.contextual.each(x=>{Ai(p,[x.fadeInClass,x.fadeOutClass,x.transitionClass]),x.onShow(l)}),$1(l,u,m)})(n,r,i)},lA=n=>(r,i,l)=>{const u=i.lazyViewport(r);((m,p,b,x)=>{const w=Gs(m),_=Xn(),k=x(_,sS({win:_,box:w}),p);return k.location==="bottom"||k.location==="top"?(((T,N,B,V,U)=>{V.getInitialPos().fold(()=>aA(T,N,B,V,U),()=>Xe)})(m,w,p,b,k),aS(k)):E.none()})(r.element,u,l,n).each(m=>{T2(r,i,l,u,m)})},cA=lA(_2),AM=lA(k2);var NM=Object.freeze({__proto__:null,refresh:$1,reset:lS,isDocked:(n,r,i)=>i.isDocked(),getModes:(n,r,i)=>i.getModes(),setModes:(n,r,i,l)=>i.setModes(l),forceDockToTop:cA,forceDockToBottom:AM}),RM=Object.freeze({__proto__:null,events:(n,r)=>uo([Ku(Jm(),(i,l)=>{n.contextual.each(u=>{ra(i.element,u.transitionClass)&&(Ai(i.element,[u.transitionClass,u.fadeInClass]),(r.isVisible()?u.onShown:u.onHidden)(i)),l.stop()})}),Re(ju(),(i,l)=>{$1(i,n,r)}),Re(Jn(),(i,l)=>{$1(i,n,r)}),Re(Ed(),(i,l)=>{lS(i,n,r)})])}),dA=[Ha("contextual",[us("fadeInClass"),us("fadeOutClass"),us("transitionClass"),oa("lazyContext"),ho("onShow"),ho("onShown"),ho("onHide"),ho("onHidden")]),ms("lazyViewport",()=>({bounds:Xn(),optScrollEnv:E.none()})),Pn("modes",["top","bottom"],Os),ho("onDocked"),ho("onUndocked")];const ss=Hs({fields:dA,name:"docking",active:RM,apis:NM,state:Object.freeze({__proto__:null,init:n=>{const r=Ot(!1),i=Ot(!0),l=En(),u=Ot(n.modes);return Xs({isDocked:r.get,setDocked:r.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:i.get,setVisible:i.set,getModes:u.get,setModes:u.set,readState:()=>`docked:  ${r.get()}, visible: ${i.get()}, modes: ${u.get().join(",")}`})}})}),O2=ue(lt("toolbar-height-change")),Cu={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},uA="tox-tinymce--toolbar-sticky-on",mA="tox-tinymce--toolbar-sticky-off",A2=(n,r)=>bo(ss.getModes(n),r),cS=n=>{const r=n.element;rr(r).each(i=>{const l="padding-"+ss.getModes(n)[0];if(ss.isDocked(n)){const u=On(i);Ht(r,"width",u+"px"),Ht(i,l,(m=>Ue(m)+(parseInt(Gn(m,"margin-top"),10)||0)+(parseInt(Gn(m,"margin-bottom"),10)||0))(r)+"px")}else Mo(r,"width"),Mo(i,l)})},fA=(n,r)=>{r?(Un(n,Cu.fadeOutClass),Pc(n,[Cu.transitionClass,Cu.fadeInClass])):(Un(n,Cu.fadeInClass),Pc(n,[Cu.fadeOutClass,Cu.transitionClass]))},gA=(n,r)=>{const i=ot(n.getContainer());r?($n(i,uA),Un(i,mA)):($n(i,mA),Un(i,uA))},pA=(n,r)=>{const i=En(),l=r.getSink,u=b=>{l().each(x=>b(x.element))},m=b=>{n.inline||cS(b),gA(n,ss.isDocked(b)),b.getSystem().broadcastOn([xf()],{}),l().each(x=>x.getSystem().broadcastOn([xf()],{}))},p=n.inline?[]:[Ea.config({channels:{[O2()]:{onReceive:cS}}})];return[It.config({}),ss.config({contextual:{lazyContext:b=>{const x=Ue(b.element),w=n.inline?n.getContentAreaContainer():n.getContainer();return E.from(w).map(_=>{const k=Gs(ot(_));return Rp(n,b.element).fold(()=>{const T=k.height-x,N=k.y+(A2(b,"top")?0:x);return Ts(k.x,N,k.width,T)},T=>{const N=Ym(k,Dp(T)),B=A2(b,"top")?N.y:N.y+x;return Ts(N.x,B,N.width,N.height-x)})})},onShow:()=>{u(b=>fA(b,!0))},onShown:b=>{u(x=>Ai(x,[Cu.transitionClass,Cu.fadeInClass])),i.get().each(x=>{((w,_)=>{const k=Er(_);Mi(k).filter(T=>!Go(_,T)).filter(T=>Go(T,ot(k.dom.body))||Es(w,T)).each(()=>Ga(_))})(b.element,x),i.clear()})},onHide:b=>{((x,w)=>Bi(x).orThunk(()=>w().toOptional().bind(_=>Bi(_.element))))(b.element,l).fold(i.clear,i.set),u(x=>fA(x,!1))},onHidden:()=>{u(b=>Ai(b,[Cu.transitionClass]))},...Cu},lazyViewport:b=>Rp(n,b.element).fold(()=>{const x=Xn(),w=oE(n),_=x.y+(A2(b,"top")?w:0),k=x.height-(A2(b,"bottom")?w:0);return{bounds:Ts(x.x,_,x.width,k),optScrollEnv:E.none()}},x=>({bounds:Dp(x),optScrollEnv:E.some({currentScrollTop:x.element.dom.scrollTop,scrollElmTop:ko(x.element).top})})),modes:[r.header.getDockingMode()],onDocked:m,onUndocked:m}),...p]};var DM=Object.freeze({__proto__:null,setup:(n,r,i)=>{n.inline||(r.header.isPositionedAtTop()||n.on("ResizeEditor",()=>{i().each(ss.reset)}),n.on("ResizeWindow ResizeEditor",()=>{i().each(cS)}),n.on("SkinLoaded",()=>{i().each(l=>{ss.isDocked(l)?ss.reset(l):ss.refresh(l)})}),n.on("FullscreenStateChanged",()=>{i().each(ss.reset)})),n.on("AfterScrollIntoView",l=>{i().each(u=>{ss.refresh(u);const m=u.element;nC(m)&&((p,b)=>{const x=Er(b),w=$m(b).dom.innerHeight,_=cs(x),k=ot(p.elm),T=Ls(k),N=_e(k),B=T.y,V=B+N,U=ko(b),q=_e(b),H=U.top,L=H+q,W=Math.abs(H-_.top)<2,G=Math.abs(L-(_.top+w))<2;if(W&&B<L)An(_.left,B-q,x);else if(G&&V>H){const Q=B-w+N+q;An(_.left,Q,x)}})(l,m)})}),n.on("PostRender",()=>{gA(n,!1)})},isDocked:n=>n().map(ss.isDocked).getOr(!1),getBehaviours:pA});const MM=St([Rs,La("items",Wl([ch([m_,gr("items",Os)]),Os]))].concat(R0)),BM=[pr("text"),pr("tooltip"),pr("icon"),Ca("search",!1,Wl([Cd,St([pr("placeholder")])],n=>Kr(n)?n?E.some({placeholder:E.none()}):E.none():E.some(n))),oa("fetch"),ms("onSetup",()=>Xe)],dS=St([Rs,...BM]),hA=n=>Bn("menubutton",dS,n),PM=St([Rs,iy,nl,Mf,NE,K8,Cp,As("presets","normal",["normal","color","listpreview"]),b_(1),x1,p_]);var uS=Fi({factory:(n,r)=>{const i={focus:vt.focusIn,setMenus:(l,u)=>{const m=Ke(u,p=>{const b={type:"menubutton",text:p.text,fetch:w=>{w(p.getItems())}},x=hA(b).mapError(w=>zu(w)).getOrDie();return F1(x,"tox-mbtn",r.backstage,E.some("menuitem"))});Rt.set(l,m)}};return{uid:n.uid,dom:n.dom,components:[],behaviours:Ve([Rt.config({}),Qt("menubar-events",[cn(l=>{n.onSetup(l)}),Re(Ji(),(l,u)=>{Zn(l.element,".tox-mbtn--active").each(m=>{Ri(u.event.target,".tox-mbtn").each(p=>{Go(m,p)||l.getSystem().getByDom(m).each(b=>{l.getSystem().getByDom(p).each(x=>{Rl.expand(x),Rl.close(b),It.focus(x)})})})})}),Re(Bc(),(l,u)=>{u.event.prevFocus.bind(m=>l.getSystem().getByDom(m).toOptional()).each(m=>{u.event.newFocus.bind(p=>l.getSystem().getByDom(p).toOptional()).each(p=>{Rl.isOpen(m)&&(Rl.expand(p),Rl.close(m))})})})]),vt.config({mode:"flow",selector:".tox-mbtn",onEscape:l=>(n.onEscape(l),E.some(!0))}),Hn.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ee("dom"),Ee("uid"),Ee("onEscape"),Ee("backstage"),fe("onSetup",Xe)],apis:{focus:(n,r)=>{n.focus(r)},setMenus:(n,r,i)=>{n.setMenus(r,i)}}});const bA="container",IM=[zs("slotBehaviours",[])],xx=n=>"<alloy.field."+n+">",xA=(n,r)=>{const i=_=>ip(n),l=(_,k)=>(T,N)=>Fo(T,n,N).map(B=>_(B,N)).getOr(k),u=(_,k)=>js(_.element,"aria-hidden")!=="true",m=l(u,!1),p=l((_,k)=>{if(u(_)){const T=_.element;Ht(T,"display","none"),Kt(T,"aria-hidden","true"),ut(_,Sg(),{name:k,visible:!1})}}),b=(_=>(k,T)=>{xt(T,N=>_(k,N))})(p),x=l((_,k)=>{if(!u(_)){const T=_.element;Mo(T,"display"),Sn(T,"aria-hidden"),ut(_,Sg(),{name:k,visible:!0})}}),w={getSlotNames:i,getSlot:(_,k)=>Fo(_,n,k),isShowing:m,hideSlot:p,hideAllSlots:_=>b(_,i()),showSlot:x};return{uid:n.uid,dom:n.dom,components:r,behaviours:wf(n.slotBehaviours),apis:w}},LM=Ho({getSlotNames:(n,r)=>n.getSlotNames(r),getSlot:(n,r,i)=>n.getSlot(r,i),isShowing:(n,r,i)=>n.isShowing(r,i),hideSlot:(n,r,i)=>n.hideSlot(r,i),hideAllSlots:(n,r)=>n.hideAllSlots(r),showSlot:(n,r,i)=>n.showSlot(r,i)},n=>Cs(n)),da={...LM,sketch:n=>{const r=(()=>{const m=[];return{slot:(p,b)=>(m.push(p),Vo(bA,xx(p),b)),record:ue(m)}})(),i=n(r),l=r.record(),u=Ke(l,m=>He({name:m,pname:xx(m)}));return jw(bA,IM,u,xA,i)}},FM=St([nl,iy,ms("onShow",Xe),ms("onHide",Xe),Cp]),HM=n=>({element:()=>n.element.dom}),zM=(n,r)=>{const i=Ke(Ao(r),l=>{const u=r[l],m=Xi((p=>Bn("sidebar",FM,p))(u));return{name:l,getApi:HM,onSetup:m.onSetup,onShow:m.onShow,onHide:m.onHide}});return Ke(i,l=>{const u=Ot(Xe);return n.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:B0([gu(l,u),If(l,u),Re(Sg(),(m,p)=>{const b=p.event;qo(i,w=>w.name===b.name).each(w=>{(b.visible?w.onShow:w.onHide)(w.getApi(m))})})])})})},VM=n=>da.sketch(r=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:zM(r,n),slotBehaviours:B0([cn(i=>da.hideAllSlots(i))])})),U1=(n,r)=>{Kt(n,"role",r)},vA=n=>wo.getCurrent(n).bind(r=>Zi.isGrowing(r)||Zi.hasGrown(r)?wo.getCurrent(r).bind(i=>qo(da.getSlotNames(i),l=>da.isShowing(i,l))):E.none()),N2=lt("FixSizeEvent"),mS=lt("AutoSizeEvent");var yA=Object.freeze({__proto__:null,block:(n,r,i,l)=>{Kt(n.element,"aria-busy",!0);const u=r.getRoot(n).getOr(n),m=Ve([vt.config({mode:"special",onTab:()=>E.some(!0),onShiftTab:()=>E.some(!0)}),It.config({})]),p=l(u,m),b=u.getSystem().build(p);Rt.append(u,Jo(b)),b.hasConfigured(vt)&&r.focus&&vt.focusIn(b),i.isBlocked()||r.onBlock(n),i.blockWith(()=>Rt.remove(u,b))},unblock:(n,r,i)=>{Sn(n.element,"aria-busy"),i.isBlocked()&&r.onUnblock(n),i.clear()},isBlocked:(n,r,i)=>i.isBlocked()}),$M=[ms("getRoot",E.none),Vn("focus",!0),ho("onBlock"),ho("onUnblock")];const rd=Hs({fields:$M,name:"blocking",apis:yA,state:Object.freeze({__proto__:null,init:()=>{const n=Ud(r=>r.destroy());return Xs({readState:n.isSet,blockWith:r=>{n.set({destroy:r})},clear:n.clear,isBlocked:n.isSet})}})}),wA=n=>wo.getCurrent(n).each(r=>Ga(r.element,!0)),UM=(n,r,i)=>{const l=Ot(!1),u=En(),m=b=>{var x;l.get()&&(!(w=>w.type==="focusin")(x=b)||!(x.composed?Et(x.composedPath()):E.from(x.target)).map(ot).filter(Ws).exists(w=>ra(w,"mce-pastebin")))&&(b.preventDefault(),wA(r()),n.editorManager.setActive(n))};n.inline||n.on("PreInit",()=>{n.dom.bind(n.getWin(),"focusin",m),n.on("BeforeExecCommand",b=>{b.command.toLowerCase()==="mcefocus"&&b.value!==!0&&m(b)})});const p=b=>{b!==l.get()&&(l.set(b),((x,w,_,k)=>{const T=w.element;if(((N,B)=>{const V="tabindex",U=`data-mce-${V}`;E.from(N.iframeElement).map(ot).each(q=>{B?(qs(q,V).each(H=>Kt(q,U,H)),Kt(q,V,-1)):(Sn(q,V),qs(q,U).each(H=>{Kt(q,V,H),Sn(q,U)}))})})(x,_),_)rd.block(w,(N=>(B,V)=>({dom:{tag:"div",attributes:{"aria-label":N.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:cm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}))(k)),Mo(T,"display"),Sn(T,"aria-hidden"),x.hasFocus()&&wA(w);else{const N=wo.getCurrent(w).exists(B=>$g(B.element));rd.unblock(w),Ht(T,"display","none"),Kt(T,"aria-hidden","true"),N&&x.focus()}})(n,r(),b,i.providers),((x,w)=>{x.dispatch("AfterProgressState",{state:w})})(n,b))};n.on("ProgressState",b=>{if(u.on(clearTimeout),jo(b.time)){const x=jv.setEditorTimeout(n,()=>p(b.state),b.time);u.set(x)}else p(b.state),u.clear()})},fS=(n,r,i)=>({within:n,extra:r,withinWidth:i}),CA=(n,r,i)=>{const l=I(n,(p,b)=>((x,w)=>{const _=i(x);return E.some({element:x,start:w,finish:w+_,width:_})})(b,p.len).fold(ue(p),x=>({len:x.finish,list:p.list.concat([x])})),{len:0,list:[]}).list,u=Jt(l,p=>p.finish<=r),m=kn(u,(p,b)=>p+b.width,0);return{within:u,extra:l.slice(u.length),withinWidth:m}},R2=n=>Ke(n,r=>r.element),_A=(n,r)=>{const i=Ke(r,l=>Jo(l));xc.setGroups(n,i)},kA=(n,r,i)=>{const l=r.builtGroups.get();if(l.length===0)return;const u=Vs(n,r,"primary"),m=Qn.getCoupled(n,"overflowGroup");Ht(u.element,"visibility","hidden");const p=l.concat([m]),b=_r(p,w=>Bi(w.element).bind(_=>w.getSystem().getByDom(_).toOptional()));i([]),_A(u,p);const x=((w,_,k,T)=>{const N=((q,H,L)=>{const W=CA(H,q,L);return W.extra.length===0?E.some(W):E.none()})(w,_,k).getOrThunk(()=>CA(_,w-k(T),k)),B=N.within,V=N.extra,U=N.withinWidth;return V.length===1&&V[0].width<=k(T)?((q,H,L)=>{const W=R2(q.concat(H));return fS(W,[],L)})(B,V,U):V.length>=1?((q,H,L,W)=>{const G=R2(q).concat([L]);return fS(G,R2(H),W)})(B,V,T,U):((q,H,L)=>fS(R2(q),[],L))(B,0,U)})(On(u.element),r.builtGroups.get(),w=>On(w.element),m);x.extra.length===0?(Rt.remove(u,m),i([])):(_A(u,x.within),i(x.extra)),Mo(u.element,"visibility"),z(u.element),b.each(It.focus)},SA=ue([zs("splitToolbarBehaviours",[Qn]),$r("builtGroups",()=>Ot([]))]),D2=ue([tc(["overflowToggledClass"]),ql("getOverflowBounds"),Ee("lazySink"),$r("overflowGroups",()=>Ot([])),ho("onOpened"),ho("onClosed")].concat(SA())),gS=ue([He({factory:xc,schema:V1(),name:"primary"}),Ze({schema:V1(),name:"overflow"}),Ze({name:"overflow-button"}),Ze({name:"overflow-group"})]),vx=ue((n,r)=>{((i,l)=>{const u=Xo.max(i,l,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);Ht(i,"max-width",u+"px")})(n,Math.floor(r))}),EA=ue([tc(["toggledClass"]),Ee("lazySink"),oa("fetch"),ql("getBounds"),Ha("fireDismissalEventInstead",[fe("event",Td())]),Uc(),ho("onToggled")]),ZM=ue([Ze({name:"button",overrides:n=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Ve([so.config({toggleClass:n.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:n.onToggled})])})}),Ze({factory:xc,schema:V1(),name:"toolbar",overrides:n=>({toolbarBehaviours:Ve([vt.config({mode:"cyclic",onEscape:r=>(Fo(r,n,"button").each(It.focus),E.none())})])})})]),M2=En(),yx=(n,r)=>{const i=Qn.getCoupled(n,"toolbarSandbox");io.isOpen(i)?io.close(i):io.open(i,r.toolbar())},wx=(n,r,i,l)=>{const u=i.getBounds.map(p=>p()),m=i.lazySink(n).getOrDie();Rr.positionWithinBounds(m,r,{anchor:{type:"hotspot",hotspot:n,layouts:l,overrides:{maxWidthFunction:vx()}}},u)},Cx=(n,r,i,l,u)=>{xc.setGroups(r,u),wx(n,r,i,l),so.on(n)},Sm=la({name:"FloatingToolbarButton",factory:(n,r,i,l)=>({...Dr.sketch({...l.button(),action:u=>{yx(u,l)},buttonBehaviours:Cf({dump:l.button().buttonBehaviours},[Qn.config({others:{toolbarSandbox:u=>((m,p,b)=>{const x=af();return{dom:{tag:"div",attributes:{id:x.id}},behaviours:Ve([vt.config({mode:"special",onEscape:w=>(io.close(w),E.some(!0))}),io.config({onOpen:(w,_)=>{const k=M2.get().getOr(!1);b.fetch().get(T=>{Cx(m,_,b,p.layouts,T),x.link(m.element),k||vt.focusIn(_)})},onClose:()=>{so.off(m),M2.get().getOr(!1)||It.focus(m),x.unlink(m.element)},isPartOf:(w,_,k)=>Js(_,k)||Js(m,k),getAttachPoint:()=>b.lazySink(m).getOrDie()}),Ea.config({channels:{...c0({isExtraPart:Ne,...b.fireDismissalEventInstead.map(w=>({fireEventInstead:{event:w.event}})).getOr({})}),...vf({doReposition:()=>{io.getState(Qn.getCoupled(m,"toolbarSandbox")).each(w=>{wx(m,w,b,p.layouts)})}})}})])}})(u,i,n)}})])}),apis:{setGroups:(u,m)=>{io.getState(Qn.getCoupled(u,"toolbarSandbox")).each(p=>{Cx(u,p,n,i.layouts,m)})},reposition:u=>{io.getState(Qn.getCoupled(u,"toolbarSandbox")).each(m=>{wx(u,m,n,i.layouts)})},toggle:u=>{yx(u,l)},toggleWithoutFocusing:u=>{((m,p)=>{M2.set(!0),yx(m,p),M2.clear()})(u,l)},getToolbar:u=>io.getState(Qn.getCoupled(u,"toolbarSandbox")),isOpen:u=>io.isOpen(Qn.getCoupled(u,"toolbarSandbox"))}}),configFields:EA(),partFields:ZM(),apis:{setGroups:(n,r,i)=>{n.setGroups(r,i)},reposition:(n,r)=>{n.reposition(r)},toggle:(n,r)=>{n.toggle(r)},toggleWithoutFocusing:(n,r)=>{n.toggleWithoutFocusing(r)},getToolbar:(n,r)=>n.getToolbar(r),isOpen:(n,r)=>n.isOpen(r)}}),WM=ue([Ee("items"),tc(["itemSelector"]),zs("tgroupBehaviours",[vt])]),jM=ue([At({name:"items",unit:"item"})]),B2=la({name:"ToolbarGroup",configFields:WM(),partFields:jM(),factory:(n,r,i,l)=>({uid:n.uid,dom:n.dom,components:r,behaviours:Qs(n.tgroupBehaviours,[vt.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}})}),TA=n=>Ke(n,r=>Jo(r)),OA=(n,r,i)=>{kA(n,i,l=>{i.overflowGroups.set(l),r.getOpt(n).each(u=>{Sm.setGroups(u,TA(l))})})},AA=la({name:"SplitFloatingToolbar",configFields:D2(),partFields:gS(),factory:(n,r,i,l)=>{const u=Zo(Sm.sketch({fetch:()=>zf(m=>{m(TA(n.overflowGroups.get()))}),layouts:{onLtr:()=>[ns,ir],onRtl:()=>[ir,ns],onBottomLtr:()=>[dn,lr],onBottomRtl:()=>[lr,dn]},getBounds:i.getOverflowBounds,lazySink:n.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:n.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(m,p)=>n[p?"onOpened":"onClosed"](m)}));return{uid:n.uid,dom:n.dom,components:r,behaviours:Qs(n.splitToolbarBehaviours,[Qn.config({others:{overflowGroup:()=>B2.sketch({...l["overflow-group"](),items:[u.asSpec()]})}})]),apis:{setGroups:(m,p)=>{n.builtGroups.set(Ke(p,m.getSystem().build)),OA(m,u,n)},refresh:m=>OA(m,u,n),toggle:m=>{u.getOpt(m).each(p=>{Sm.toggle(p)})},toggleWithoutFocusing:m=>{u.getOpt(m).each(Sm.toggleWithoutFocusing)},isOpen:m=>u.getOpt(m).map(Sm.isOpen).getOr(!1),reposition:m=>{u.getOpt(m).each(p=>{Sm.reposition(p)})},getOverflow:m=>u.getOpt(m).bind(Sm.getToolbar)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(n,r,i)=>{n.setGroups(r,i)},refresh:(n,r)=>{n.refresh(r)},reposition:(n,r)=>{n.reposition(r)},toggle:(n,r)=>{n.toggle(r)},toggleWithoutFocusing:(n,r)=>{n.toggle(r)},isOpen:(n,r)=>n.isOpen(r),getOverflow:(n,r)=>n.getOverflow(r)}}),qM=ue([tc(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),ho("onOpened"),ho("onClosed")].concat(SA())),GM=ue([He({factory:xc,schema:V1(),name:"primary"}),He({factory:xc,schema:V1(),name:"overflow",overrides:n=>({toolbarBehaviours:Ve([Zi.config({dimension:{property:"height"},closedClass:n.markers.closedClass,openClass:n.markers.openClass,shrinkingClass:n.markers.shrinkingClass,growingClass:n.markers.growingClass,onShrunk:r=>{Fo(r,n,"overflow-button").each(i=>{so.off(i),It.focus(i)}),n.onClosed(r)},onGrown:r=>{vt.focusIn(r),n.onOpened(r)},onStartGrow:r=>{Fo(r,n,"overflow-button").each(so.on)}}),vt.config({mode:"acyclic",onEscape:r=>(Fo(r,n,"overflow-button").each(It.focus),E.some(!0))})])})}),Ze({name:"overflow-button",overrides:n=>({buttonBehaviours:Ve([so.config({toggleClass:n.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Ze({name:"overflow-group"})]),NA=(n,r)=>{Fo(n,r,"overflow-button").bind(()=>Fo(n,r,"overflow")).each(i=>{pS(n,r),Zi.toggleGrow(i)})},pS=(n,r)=>{Fo(n,r,"overflow").each(i=>{kA(n,r,l=>{const u=Ke(l,m=>Jo(m));xc.setGroups(i,u)}),Fo(n,r,"overflow-button").each(l=>{Zi.hasGrown(i)&&so.on(l)}),Zi.refresh(i)})},hS=la({name:"SplitSlidingToolbar",configFields:qM(),partFields:GM(),factory:(n,r,i,l)=>{const u="alloy.toolbar.toggle";return{uid:n.uid,dom:n.dom,components:r,behaviours:Qs(n.splitToolbarBehaviours,[Qn.config({others:{overflowGroup:m=>B2.sketch({...l["overflow-group"](),items:[Dr.sketch({...l["overflow-button"](),action:p=>{xo(m,u)}})]})}}),Qt("toolbar-toggle-events",[Re(u,m=>{NA(m,n)})])]),apis:{setGroups:(m,p)=>{((b,x)=>{const w=Ke(x,b.getSystem().build);n.builtGroups.set(w)})(m,p),pS(m,n)},refresh:m=>pS(m,n),toggle:m=>NA(m,n),isOpen:m=>((p,b)=>Fo(p,b,"overflow").map(Zi.hasGrown).getOr(!1))(m,n)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(n,r,i)=>{n.setGroups(r,i)},refresh:(n,r)=>{n.refresh(r)},toggle:(n,r)=>{n.toggle(r)},isOpen:(n,r)=>n.isOpen(r)}}),RA=n=>{const r=n.title.fold(()=>({}),i=>({attributes:{title:i}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...r},components:[B2.parts.items({})],items:n.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Ve([Hn.config({}),It.config({})])}},P2=n=>B2.sketch(RA(n)),bS=(n,r)=>{const i=cn(l=>{const u=Ke(n.initGroups,P2);xc.setGroups(l,u)});return Ve([gy(n.providers.isDisabled),tr(),vt.config({mode:r,onEscape:n.onEscape,selector:".tox-toolbar__group"}),Qt("toolbar-events",[i])])},DA=n=>{const r=n.cyclicKeying?"cyclic":"acyclic";return{uid:n.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":RA({title:E.none(),items:[]}),"overflow-button":DO({name:"more",icon:E.some("more-drawer"),enabled:!0,tooltip:E.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:E.none(),borderless:!1},E.none(),n.providers)},splitToolbarBehaviours:bS(n,r)}},KM=n=>{const r=DA(n),i=AA.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return AA.sketch({...r,lazySink:n.getSink,getOverflowBounds:()=>{const l=n.moreDrawerData.lazyHeader().element,u=Ls(l),m=ig(l),p=Ls(m),b=Math.max(m.dom.scrollHeight,p.height);return Ts(u.x+4,p.y,u.width-8,b)},parts:{...r.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:n.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:l=>n.onToggled(l,!0),onClosed:l=>n.onToggled(l,!1)})},_u=n=>{const r=hS.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),i=hS.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=DA(n);return hS.sketch({...l,components:[r,i],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:u=>{u.getSystem().broadcastOn([O2()],{type:"opened"}),n.onToggled(u,!0)},onClosed:u=>{u.getSystem().broadcastOn([O2()],{type:"closed"}),n.onToggled(u,!1)}})},xS=n=>{const r=n.cyclicKeying?"cyclic":"acyclic";return xc.sketch({uid:n.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(n.type===Al.scrolling?["tox-toolbar--scrolling"]:[])},components:[xc.parts.groups({})],toolbarBehaviours:bS(n,r)})},MA=[Mf,nl,pr("tooltip"),As("buttonType","secondary",["primary","secondary"]),Vn("borderless",!1),oa("onAction")],I2={button:[...MA,fu,wa("type",["button"])],togglebutton:[...MA,Vn("active",!1),wa("type",["togglebutton"])]},Us=[wa("type",["group"]),Pn("buttons",[],ya("type",I2))],YM=ya("type",{...I2,group:Us}),XM=St([Pn("buttons",[],YM),oa("onShow"),oa("onHide")]),BA=(n,r)=>((i,l)=>{var u,m;const p=i.type==="togglebutton",b=i.icon.map(H=>Cm(H,l.icons)).map(Zo),x={...i,name:p?i.text.getOr(i.icon.getOr("")):(u=i.text)!==null&&u!==void 0?u:i.icon.getOr(""),primary:i.buttonType==="primary",buttonType:E.from(i.buttonType),tooltip:i.tooltip,icon:i.icon,enabled:!0,borderless:i.borderless},w=d2((m=i.buttonType)!==null&&m!==void 0?m:"secondary"),_=p?i.text.map(l.translate):E.some(l.translate(i.text)),k=_.map(Nn),T=x.tooltip.or(_).map(H=>({"aria-label":l.translate(H),title:l.translate(H)})).getOr({}),N=b.map(H=>H.asSpec()),B=Ep([N,k]),V=i.icon.isSome()&&k.isSome(),U={tag:"button",classes:w.concat(...i.icon.isSome()&&!V?["tox-button--icon"]:[]).concat(...V?["tox-button--icon-and-text"]:[]).concat(...i.borderless?["tox-button--naked"]:[]).concat(...i.type==="togglebutton"&&i.active?["tox-button--enabled"]:[]),attributes:T},q=ux(x,E.some(H=>{const L=W=>{b.map(G=>G.getOpt(H).each(Q=>{Rt.set(Q,[Cm(W,l.icons)])}))};return p?i.onAction({setIcon:L,setActive:W=>{const G=H.element;W?($n(G,"tox-button--enabled"),Kt(G,"aria-pressed",!0)):(Un(G,"tox-button--enabled"),Sn(G,"aria-pressed"))},isActive:()=>ra(H.element,"tox-button--enabled")}):i.type==="button"?i.onAction({setIcon:L}):void 0}),[],U,B,l);return Dr.sketch(q)})(n,r),PA=fl().deviceType,JM=PA.isPhone(),QM=PA.isTablet();var Z1=la({name:"silver.View",configFields:[Ee("viewConfig")],partFields:[et({factory:{sketch:n=>{let r=!1;const i=Ke(n.buttons,l=>l.type==="group"?(r=!0,((u,m)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ke(u.buttons,p=>BA(p,m))}))(l,n.providers)):BA(l,n.providers));return{uid:n.uid,dom:{tag:"div",classes:[r?"tox-view__toolbar":"tox-view__header",...JM||QM?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Ve([It.config({}),vt.config({mode:"flow",selector:"button, .tox-button",focusInside:t1.OnEnterOrSpaceMode})]),components:r?i:[Qc.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Qc.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:i})]}}},schema:[Ee("buttons"),Ee("providers")],name:"header"}),et({factory:{sketch:n=>({uid:n.uid,dom:{tag:"div",classes:["tox-view__pane"]}})},schema:[],name:"pane"})],factory:(n,r,i,l)=>{const u={getPane:m=>dr.getPart(m,n,"pane"),getOnShow:m=>n.viewConfig.onShow,getOnHide:m=>n.viewConfig.onHide};return{uid:n.uid,dom:n.dom,components:r,apis:u}},apis:{getPane:(n,r)=>n.getPane(r),getOnShow:(n,r)=>n.getOnShow(r),getOnHide:(n,r)=>n.getOnHide(r)}});const eB=(n,r,i)=>Dn(r,(l,u)=>{const m=Xi(Bn("view",XM,l));return n.slot(u,Z1.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:m,components:[...m.buttons.length>0?[Z1.parts.header({buttons:m.buttons,providers:i})]:[],Z1.parts.pane({})]}))}),tB=(n,r)=>da.sketch(i=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:eB(i,n,r),slotBehaviours:B0([cn(l=>da.hideAllSlots(l))])})),IA=n=>qo(da.getSlotNames(n),r=>da.isShowing(n,r)),LA=(n,r,i)=>{da.getSlot(n,r).each(l=>{Z1.getPane(l).each(u=>{var m;i(l)((m=u.element.dom,{getContainer:ue(m)}))})})};var L2=Fi({factory:(n,r)=>{const i={setViews:(l,u)=>{Rt.set(l,[tB(u,r.backstage.shared.providers)])},whichView:l=>wo.getCurrent(l).bind(IA),toggleView:(l,u,m,p)=>wo.getCurrent(l).exists(b=>{const x=IA(b),w=x.exists(k=>p===k),_=da.getSlot(b,p).isSome();return _&&(da.hideAllSlots(b),w?((k=>{const T=k.element;Ht(T,"display","none"),Kt(T,"aria-hidden","true")})(l),u()):(m(),(k=>{const T=k.element;Mo(T,"display"),Sn(T,"aria-hidden")})(l),da.showSlot(b,p),((k,T)=>{LA(k,T,Z1.getOnShow)})(b,p)),x.each(k=>((T,N)=>LA(T,N,Z1.getOnHide))(b,k))),_})};return{uid:n.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Ve([Rt.config({}),wo.config({find:l=>{const u=Rt.contents(l);return Et(u)}})]),apis:i}},name:"silver.ViewWrapper",configFields:[Ee("backstage")],apis:{setViews:(n,r,i)=>n.setViews(r,i),toggleView:(n,r,i,l,u)=>n.toggleView(r,i,l,u),whichView:(n,r)=>n.whichView(r)}});const oB=wu.optional({factory:uS,name:"menubar",schema:[Ee("backstage")]}),nB=wu.optional({factory:{sketch:n=>Ml.sketch({uid:n.uid,dom:n.dom,listBehaviours:Ve([vt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>xS({type:n.type,uid:lt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:n.providers,onEscape:()=>(n.onEscape(),E.some(!0))}),setupItem:(r,i,l,u)=>{xc.setGroups(i,l)},shell:!0})},name:"multiple-toolbar",schema:[Ee("dom"),Ee("onEscape")]}),sB=wu.optional({factory:{sketch:n=>(i=>i.type===Al.sliding?_u:i.type===Al.floating?KM:xS)(n)({type:n.type,uid:n.uid,onEscape:()=>(n.onEscape(),E.some(!0)),onToggled:(i,l)=>n.onToolbarToggled(l),cyclicKeying:!1,initGroups:[],getSink:n.getSink,providers:n.providers,moreDrawerData:{lazyToolbar:n.lazyToolbar,lazyMoreButton:n.lazyMoreButton,lazyHeader:n.lazyHeader},attributes:n.attributes})},name:"toolbar",schema:[Ee("dom"),Ee("onEscape"),Ee("getSink")]}),rB=wu.optional({factory:{sketch:n=>{const r=n.editor,i=n.sticky?pA:eS;return{uid:n.uid,dom:n.dom,components:n.components,behaviours:Ve(i(r,n.sharedBackstage))}}},name:"header",schema:[Ee("dom")]}),aB=wu.optional({factory:{sketch:n=>({uid:n.uid,dom:n.dom,components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:"⚡️Upgrade"}}]})},name:"promotion",schema:[Ee("dom")]}),iB=wu.optional({name:"socket",schema:[Ee("dom")]}),lB=wu.optional({factory:{sketch:n=>({uid:n.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Ve([Hn.config({}),It.config({}),Zi.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:r=>{wo.getCurrent(r).each(da.hideAllSlots),xo(r,mS)},onGrown:r=>{xo(r,mS)},onStartGrow:r=>{ut(r,N2,{width:vs(r.element,"width").getOr("")})},onStartShrink:r=>{ut(r,N2,{width:On(r.element)+"px"})}}),Rt.config({}),wo.config({find:r=>{const i=Rt.contents(r);return Et(i)}})])}],behaviours:Ve([xk(0),Qt("sidebar-sliding-events",[Re(N2,(r,i)=>{Ht(r.element,"width",i.event.width)}),Re(mS,(r,i)=>{Mo(r.element,"width")})])])})},name:"sidebar",schema:[Ee("dom")]}),cB=wu.optional({factory:{sketch:n=>({uid:n.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Ve([Rt.config({}),rd.config({focus:!1}),wo.config({find:r=>Et(r.components())})]),components:[]})},name:"throbber",schema:[Ee("dom")]}),dB=wu.optional({factory:L2,name:"viewWrapper",schema:[Ee("backstage")]}),uB=wu.optional({factory:{sketch:n=>({uid:n.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:n.components})},name:"editorContainer",schema:[]});var mn=la({name:"OuterContainer",factory:(n,r,i)=>{let l=!1;const u={getSocket:m=>dr.getPart(m,n,"socket"),setSidebar:(m,p,b)=>{dr.getPart(m,n,"sidebar").each(x=>((w,_,k)=>{wo.getCurrent(w).each(T=>{Rt.set(T,[VM(_)]);const N=k==null?void 0:k.toLowerCase();Co(N)&&Dt(_,N)&&wo.getCurrent(T).each(B=>{da.showSlot(B,N),Zi.immediateGrow(T),Mo(T.element,"width"),U1(w.element,"region")})})})(x,p,b))},toggleSidebar:(m,p)=>{dr.getPart(m,n,"sidebar").each(b=>((x,w)=>{wo.getCurrent(x).each(_=>{wo.getCurrent(_).each(k=>{Zi.hasGrown(_)?da.isShowing(k,w)?(Zi.shrink(_),U1(x.element,"presentation")):(da.hideAllSlots(k),da.showSlot(k,w),U1(x.element,"region")):(da.hideAllSlots(k),da.showSlot(k,w),Zi.grow(_),U1(x.element,"region"))})})})(b,p))},whichSidebar:m=>dr.getPart(m,n,"sidebar").bind(vA).getOrNull(),getHeader:m=>dr.getPart(m,n,"header"),getToolbar:m=>dr.getPart(m,n,"toolbar"),setToolbar:(m,p)=>{dr.getPart(m,n,"toolbar").each(b=>{const x=Ke(p,P2);b.getApis().setGroups(b,x)})},setToolbars:(m,p)=>{dr.getPart(m,n,"multiple-toolbar").each(b=>{const x=Ke(p,w=>Ke(w,P2));Ml.setItems(b,x)})},refreshToolbar:m=>{dr.getPart(m,n,"toolbar").each(p=>p.getApis().refresh(p))},toggleToolbarDrawer:m=>{dr.getPart(m,n,"toolbar").each(p=>{Qo(p.getApis().toggle,b=>b(p))})},toggleToolbarDrawerWithoutFocusing:m=>{dr.getPart(m,n,"toolbar").each(p=>{Qo(p.getApis().toggleWithoutFocusing,b=>b(p))})},isToolbarDrawerToggled:m=>dr.getPart(m,n,"toolbar").bind(p=>E.from(p.getApis().isOpen).map(b=>b(p))).getOr(!1),getThrobber:m=>dr.getPart(m,n,"throbber"),focusToolbar:m=>{dr.getPart(m,n,"toolbar").orThunk(()=>dr.getPart(m,n,"multiple-toolbar")).each(p=>{vt.focusIn(p)})},setMenubar:(m,p)=>{dr.getPart(m,n,"menubar").each(b=>{uS.setMenus(b,p)})},focusMenubar:m=>{dr.getPart(m,n,"menubar").each(p=>{uS.focus(p)})},setViews:(m,p)=>{dr.getPart(m,n,"viewWrapper").each(b=>{L2.setViews(b,p)})},toggleView:(m,p)=>dr.getPart(m,n,"viewWrapper").exists(b=>L2.toggleView(b,()=>u.showMainView(m),()=>u.hideMainView(m),p)),whichView:m=>dr.getPart(m,n,"viewWrapper").bind(L2.whichView).getOrNull(),hideMainView:m=>{l=u.isToolbarDrawerToggled(m),l&&u.toggleToolbarDrawer(m),dr.getPart(m,n,"editorContainer").each(p=>{const b=p.element;Ht(b,"display","none"),Kt(b,"aria-hidden","true")})},showMainView:m=>{l&&u.toggleToolbarDrawer(m),dr.getPart(m,n,"editorContainer").each(p=>{const b=p.element;Mo(b,"display"),Sn(b,"aria-hidden")})}};return{uid:n.uid,dom:n.dom,components:r,apis:u,behaviours:n.behaviours}},configFields:[Ee("dom"),Ee("behaviours")],partFields:[rB,oB,sB,nB,iB,lB,aB,cB,dB,uB],apis:{getSocket:(n,r)=>n.getSocket(r),setSidebar:(n,r,i,l)=>{n.setSidebar(r,i,l)},toggleSidebar:(n,r,i)=>{n.toggleSidebar(r,i)},whichSidebar:(n,r)=>n.whichSidebar(r),getHeader:(n,r)=>n.getHeader(r),getToolbar:(n,r)=>n.getToolbar(r),setToolbar:(n,r,i)=>{n.setToolbar(r,i)},setToolbars:(n,r,i)=>{n.setToolbars(r,i)},refreshToolbar:(n,r)=>n.refreshToolbar(r),toggleToolbarDrawer:(n,r)=>{n.toggleToolbarDrawer(r)},toggleToolbarDrawerWithoutFocusing:(n,r)=>{n.toggleToolbarDrawerWithoutFocusing(r)},isToolbarDrawerToggled:(n,r)=>n.isToolbarDrawerToggled(r),getThrobber:(n,r)=>n.getThrobber(r),setMenubar:(n,r,i)=>{n.setMenubar(r,i)},focusMenubar:(n,r)=>{n.focusMenubar(r)},focusToolbar:(n,r)=>{n.focusToolbar(r)},setViews:(n,r,i)=>{n.setViews(r,i)},toggleView:(n,r,i)=>n.toggleView(r,i),whichView:(n,r)=>n.whichView(r)}});const FA={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},vS=n=>n.split(" "),yS=(n,r)=>{const i={...FA,...r.menus},l=Ao(r.menus).length>0,u=r.menubar===void 0||r.menubar===!0?vS("file edit view insert format tools table help"):vS(r.menubar===!1?"":r.menubar),m=Jt(u,b=>{const x=Dt(FA,b);return l?x||mt(r.menus,b).exists(w=>Dt(w,"items")):x}),p=Ke(m,b=>{const x=i[b];return((w,_,k)=>{const T=f1(k).split(/[ ,]/);return{text:w.title,getItems:()=>qn(w.items,N=>{const B=N.toLowerCase();return B.trim().length===0||Yr(T,V=>V===B)?[]:B==="separator"||B==="|"?[{type:"separator"}]:_.menuItems[B]?[_.menuItems[B]]:[]})}})({title:x.title,items:vS(x.items)},r,n)});return Jt(p,b=>b.getItems().length>0&&Yr(b.getItems(),x=>Co(x)||x.type!=="separator"))},HA=(n,r,i)=>(n.on("remove",()=>i.unload(r)),i.load(r)),wS=(n,r,i,l)=>(n.on("remove",()=>l.unloadRawCss(r)),l.loadRawCss(r,i)),mB=async(n,r)=>{const i="ui/"+S0(n).getOr("default")+"/skin.css",l=tinymce.Resource.get(i);return Co(l)?Promise.resolve(wS(n,i,l,n.ui.styleSheetLoader)):HA(n,r+"/skin.min.css",n.ui.styleSheetLoader)},zA=async(n,r)=>{var i;if(i=ot(n.getElement()),ls(i).isSome()){const l="ui/"+S0(n).getOr("default")+"/skin.shadowdom.css",u=tinymce.Resource.get(l);return Co(u)?(wS(n,l,u,pp.DOM.styleSheetLoader),Promise.resolve()):HA(n,r+"/skin.shadowdom.min.css",pp.DOM.styleSheetLoader)}},VA=(n,r)=>(async(i,l)=>{S0(l).fold(()=>{const m=ty(l);m&&l.contentCSS.push(m+(i?"/content.inline":"/content")+".min.css")},m=>{const p="ui/"+m+(i?"/content.inline":"/content")+".css",b=tinymce.Resource.get(p);if(Co(b))wS(l,p,b,l.ui.styleSheetLoader);else{const x=ty(l);x&&l.contentCSS.push(x+(i?"/content.inline":"/content")+".min.css")}});const u=ty(l);if(!rt(l)&&Co(u))return Promise.all([mB(l,u),zA(l,u)]).then()})(n,r).then((i=>{const l=()=>{i._skinLoaded=!0,(u=>{u.dispatch("SkinLoaded")})(i)};return()=>{i.initialized?l():i.on("init",l)}})(r),((i,l)=>()=>((u,m)=>{u.dispatch("SkinLoadError",m)})(i,{message:"Skin could not be loaded"}))(r)),fB=Rn(VA,!1),gB=Rn(VA,!0),jp=(n,r,i)=>n.translate([r,n.translate(i)]),pB=(n,r)=>{const i=(m,p,b,x)=>{const w=n.shared.providers.translate(m.title);if(m.type==="separator")return E.some({type:"separator",text:w});if(m.type==="submenu"){const _=qn(m.getStyleItems(),k=>l(k,p,x));return p===0&&_.length<=0?E.none():E.some({type:"nestedmenuitem",text:w,enabled:_.length>0,getSubmenuItems:()=>qn(m.getStyleItems(),k=>l(k,p,x))})}return E.some({type:"togglemenuitem",text:w,icon:m.icon,active:m.isSelected(x),enabled:!b,onAction:r.onAction(m),...m.getStylePreview().fold(()=>({}),_=>({meta:{style:_}}))})},l=(m,p,b)=>{const x=m.type==="formatter"&&r.isInvalid(m);return p===0?x?[]:i(m,p,!1,b).toArray():i(m,p,x,b).toArray()},u=m=>{const p=r.getCurrentValue(),b=r.shouldHide?0:1;return qn(m,x=>l(x,b,p))};return{validateItems:u,getFetch:(m,p)=>(b,x)=>{const w=p(),_=u(w);x(L1(_,Xc.CLOSE_ON_EXECUTE,m,{isHorizontalMenu:!1,search:E.none()}))}}},W1=(n,r,i)=>{const l=i.dataset,u=l.type==="basic"?()=>Ke(l.data,m=>b2(m,i.isSelectedFor,i.getPreviewFor)):l.getData;return{items:pB(r,i),getStyleItems:u}},_x=(n,r,i,l,u)=>{const{items:m,getStyleItems:p}=W1(0,r,i);return o2({text:i.icon.isSome()?E.none():i.text,icon:i.icon,tooltip:E.from(i.tooltip),role:E.none(),fetch:m.getFetch(r,p),onSetup:b=>{const x=w=>b.setTooltip(jp(n,l,w.value));return n.on(u,x),L0(Ap(n,"NodeChange",w=>{const _=w.getComponent();i.updateText(_),Mt.set(w.getComponent(),!n.selection.isEditable())})(b),()=>n.off(u,x))},getApi:b=>({getComponent:ue(b),setTooltip:x=>{const w=r.shared.providers.translate(x);ki(b.element,{"aria-label":w,title:w})}}),columns:1,presets:"normal",classes:i.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",r.shared)};var j1;(function(n){n[n.SemiColon=0]="SemiColon",n[n.Space=1]="Space"})(j1||(j1={}));const F2=(n,r,i)=>{const l=(u=((m,p)=>p===j1.SemiColon?m.replace(/;$/,"").split(";"):m.split(" "))(n.options.get(r),i),Ke(u,m=>{let p=m,b=m;const x=m.split("=");return x.length>1&&(p=x[0],b=x[1]),{title:p,format:b}}));var u;return{type:"basic",data:l}},$A="Alignment {0}",CS="left",_S=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],kS=n=>{const r={type:"basic",data:_S};return{tooltip:jp(n,$A,CS),text:E.none(),icon:E.some("align-left"),isSelectedFor:i=>()=>n.formatter.match(i),getCurrentValue:E.none,getPreviewFor:i=>E.none,onAction:i=>()=>qo(_S,l=>l.format===i.format).each(l=>n.execCommand(l.command)),updateText:i=>{const l=qo(_S,u=>n.formatter.match(u.format)).fold(ue(CS),u=>u.title.toLowerCase());ut(i,td,{icon:`align-${l}`}),((u,m)=>{u.dispatch("AlignTextUpdate",m)})(n,{value:l})},dataset:r,shouldHide:!1,isInvalid:i=>!n.formatter.canApply(i.format)}},UA=(n,r)=>{const i=r(),l=Ke(i,u=>u.format);return E.from(n.formatter.closest(l)).bind(u=>qo(i,m=>m.format===u)).orThunk(()=>Xr(n.formatter.match("p"),{title:"Paragraph",format:"p"}))},ZA="Block {0}",SS="Paragraph",WA=n=>{const r=F2(n,"block_formats",j1.SemiColon);return{tooltip:jp(n,ZA,SS),text:E.some(SS),icon:E.none(),isSelectedFor:i=>()=>n.formatter.match(i),getCurrentValue:E.none,getPreviewFor:i=>()=>{const l=n.formatter.get(i);return l?E.some({tag:l.length>0&&(l[0].inline||l[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(i))}):E.none()},onAction:rT(n),updateText:i=>{const l=UA(n,()=>r.data).fold(ue(SS),u=>u.title);ut(i,rl,{text:l}),((u,m)=>{u.dispatch("BlocksTextUpdate",m)})(n,{value:l})},dataset:r,shouldHide:!1,isInvalid:i=>!n.formatter.canApply(i.format)}},jA="Font {0}",ES="System Font",hB=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],qA=n=>{const r=n.split(/\s*,\s*/);return Ke(r,i=>i.replace(/^['"]+|['"]+$/g,""))},GA=(n,r)=>r.length>0&&_c(r,i=>n.indexOf(i.toLowerCase())>-1),KA=n=>{const r=()=>{const l=w=>w?qA(w)[0]:"",u=n.queryCommandValue("FontName"),m=i.data,p=u?u.toLowerCase():"",b=fE(n);return{matchOpt:qo(m,w=>{const _=w.format;return _.toLowerCase()===p||l(_).toLowerCase()===l(p).toLowerCase()}).orThunk(()=>Xr(((w,_)=>{if(w.indexOf("-apple-system")===0||_.length>0){const k=qA(w.toLowerCase());return GA(k,hB)||GA(k,_)}return!1})(p,b),{title:ES,format:p})),font:u}},i=F2(n,"font_family_formats",j1.SemiColon);return{tooltip:jp(n,jA,ES),text:E.some(ES),icon:E.none(),isSelectedFor:l=>u=>u.exists(m=>m.format===l),getCurrentValue:()=>{const{matchOpt:l}=r();return l},getPreviewFor:l=>()=>E.some({tag:"div",styles:l.indexOf("dings")===-1?{"font-family":l}:{}}),onAction:l=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("FontName",!1,l.format)})},updateText:l=>{const{matchOpt:u,font:m}=r(),p=u.fold(ue(m),b=>b.title);ut(l,rl,{text:p}),((b,x)=>{b.dispatch("FontFamilyTextUpdate",x)})(n,{value:p})},dataset:i,shouldHide:!1,isInvalid:Ne}},bB={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},xB=(()=>{const n="[0-9]+",r="[eE][+-]?"+n,i=u=>`(?:${u})?`,l=["Infinity",n+"\\."+i(n)+i(r),"\\."+n+i(r),n+i(r)].join("|");return new RegExp(`^([+-]?(?:${l}))(.*)$`)})(),kx=(n,r)=>E.from(xB.exec(n)).bind(i=>{const l=Number(i[1]),u=i[2];return((m,p)=>Yr(p,b=>Yr(bB[b],x=>m===x)))(u,r)?E.some({value:l,unit:u}):E.none()}),YA={tab:ue(9),escape:ue(27),enter:ue(13),backspace:ue(8),delete:ue(46),left:ue(37),up:ue(38),right:ue(39),down:ue(40),space:ue(32),home:ue(36),end:ue(35),pageUp:ue(33),pageDown:ue(34)},XA="Font size {0}",JA="12pt",vB={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},yB={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},TS=(n,r)=>/[0-9.]+px$/.test(n)?((i,l)=>{const u=Math.pow(10,l);return Math.round(i*u)/u})(72*parseInt(n,10)/96,r||0)+"pt":mt(yB,n).getOr(n),wB=n=>mt(vB,n).getOr(""),QA=n=>{const r=()=>{let u=E.none();const m=l.data,p=n.queryCommandValue("FontSize");if(p)for(let b=3;u.isNone()&&b>=0;b--){const x=TS(p,b),w=wB(x);u=qo(m,_=>_.format===p||_.format===x||_.format===w)}return{matchOpt:u,size:p}},i=ue(E.none),l=F2(n,"font_size_formats",j1.Space);return{tooltip:jp(n,XA,JA),text:E.some(JA),icon:E.none(),isSelectedFor:u=>m=>m.exists(p=>p.format===u),getPreviewFor:i,getCurrentValue:()=>{const{matchOpt:u}=r();return u},onAction:u=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("FontSize",!1,u.format)})},updateText:u=>{const{matchOpt:m,size:p}=r(),b=m.fold(ue(p),x=>x.title);ut(u,rl,{text:b}),((x,w)=>{x.dispatch("FontSizeTextUpdate",w)})(n,{value:b})},dataset:l,shouldHide:!1,isInvalid:Ne}},e5="Format {0}",OS=(n,r)=>{const i="Paragraph";return{tooltip:jp(n,e5,i),text:E.some(i),icon:E.none(),isSelectedFor:l=>()=>n.formatter.match(l),getCurrentValue:E.none,getPreviewFor:l=>()=>{const u=n.formatter.get(l);return u!==void 0?E.some({tag:u.length>0&&(u[0].inline||u[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(l))}):E.none()},onAction:rT(n),updateText:l=>{const u=b=>qO(b)?qn(b.items,u):Yo(b)?[{title:b.title,format:b.format}]:[],m=qn(Gk(n),u),p=UA(n,ue(m)).fold(ue(i),b=>b.title);ut(l,rl,{text:p}),((b,x)=>{b.dispatch("StylesTextUpdate",x)})(n,{value:p})},shouldHide:Q3(n),isInvalid:l=>!n.formatter.canApply(l.format),dataset:r}},t5=ue([Ee("toggleClass"),Ee("fetch"),yl("onExecute"),fe("getHotspot",E.some),fe("getAnchorOverrides",ue({})),Uc(),yl("onItemExecute"),zo("lazySink"),Ee("dom"),ho("onOpen"),zs("splitDropdownBehaviours",[Qn,vt,It]),fe("matchWidth",!1),fe("useMinWidth",!1),fe("eventOrder",{}),zo("role")].concat(Ay())),CB=He({factory:Dr,schema:[Ee("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Ve([It.revoke()])}),overrides:n=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(n.uid).each(Od)},buttonBehaviours:Ve([so.config({toggleOnExecute:!1,toggleClass:n.toggleClass})])})}),_B=He({factory:Dr,schema:[Ee("dom")],name:"button",defaults:()=>({buttonBehaviours:Ve([It.revoke()])}),overrides:n=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(n.uid).each(i=>{n.onExecute(i,r)})}})}),o5=ue([CB,_B,et({factory:{sketch:n=>({uid:n.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:n.text}})},schema:[Ee("text")],name:"aria-descriptor"}),Ze({schema:[Pg()],name:"menu",defaults:n=>({onExecute:(r,i)=>{r.getSystem().getByUid(n.uid).each(l=>{n.onItemExecute(l,r,i)})}})}),hT()]),H2=la({name:"SplitDropdown",configFields:t5(),partFields:o5(),factory:(n,r,i,l)=>{const u=w=>{wo.getCurrent(w).each(_=>{Oo.highlightFirst(_),vt.focusIn(_)})},m=w=>{Ty(n,kt,w,l,u,Ra.HighlightMenuAndItem).get(Xe)},p=w=>{const _=Vs(w,n,"button");return Od(_),E.some(!0)},b={...uo([cn((w,_)=>{Fo(w,n,"aria-descriptor").each(k=>{const T=lt("aria");Kt(k.element,"id",T),Kt(w.element,"aria-describedby",T)})})]),...C0(E.some(m))},x={repositionMenus:w=>{so.isOn(w)&&Oy(w)}};return{uid:n.uid,dom:n.dom,components:r,apis:x,eventOrder:{...n.eventOrder,[ka()]:["disabling","toggling","alloy.base.behaviour"]},events:b,behaviours:Qs(n.splitDropdownBehaviours,[Qn.config({others:{sandbox:w=>{const _=Vs(w,n,"arrow");return Np(n,w,{onOpen:()=>{so.on(_),so.on(w)},onClose:()=>{so.off(_),so.off(w)}})}}}),vt.config({mode:"special",onSpace:p,onEnter:p,onDown:w=>(m(w),E.some(!0))}),It.config({}),so.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:n.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:(n,r)=>n.repositionMenus(r)}}),n5=n=>({isEnabled:()=>!Mt.isDisabled(n),setEnabled:r=>Mt.set(n,!r),setText:r=>ut(n,rl,{text:r}),setIcon:r=>ut(n,td,{icon:r})}),kB=n=>({setActive:r=>{so.set(n,r)},isActive:()=>so.isOn(n),isEnabled:()=>!Mt.isDisabled(n),setEnabled:r=>Mt.set(n,!r),setText:r=>ut(n,rl,{text:r}),setIcon:r=>ut(n,td,{icon:r})}),s5=(n,r)=>n.map(i=>({"aria-label":r.translate(i),title:r.translate(i)})).getOr({}),r5=lt("focus-button"),AS=(n,r,i,l,u)=>{const m=r.map(b=>Zo(gO(b,"tox-tbtn",u))),p=n.map(b=>Zo(Cm(b,u.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(r.isSome()?["tox-tbtn--select"]:[]),attributes:s5(i,u)},components:Ep([p.map(b=>b.asSpec()),m.map(b=>b.asSpec())]),eventOrder:{[na()]:["focusing","alloy.base.behaviour",Vp],[Le()]:[Vp,"toolbar-group-button-events"]},buttonBehaviours:Ve([gy(u.isDisabled),tr(),Qt(Vp,[cn((b,x)=>_k(b)),Re(rl,(b,x)=>{m.bind(w=>w.getOpt(b)).each(w=>{Rt.set(w,[Nn(u.translate(x.event.text))])})}),Re(td,(b,x)=>{p.bind(w=>w.getOpt(b)).each(w=>{Rt.set(w,[Cm(x.event.icon,u.icons)])})}),Re(na(),(b,x)=>{x.event.prevent(),xo(b,r5)})])].concat(l.getOr([])))}},Sx=(n,r,i)=>{var l;const u=Ot(Xe),m=AS(n.icon,n.text,n.tooltip,E.none(),i);return Dr.sketch({dom:m.dom,components:m.components,eventOrder:mO,buttonBehaviours:{...Ve([Qt("toolbar-button-events",[(p={onAction:n.onAction,getApi:r.getApi},Sa((b,x)=>{py(p,b)(w=>{ut(b,uO,{buttonApi:w}),p.onAction(w)})})),gu(r,u),If(r,u)]),gy(()=>!n.enabled||i.isDisabled()),tr()].concat(r.toolbarButtonBehaviours)),[Vp]:(l=m.buttonBehaviours)===null||l===void 0?void 0:l[Vp]}});var p},a5=(n,r,i)=>Sx(n,{toolbarButtonBehaviours:i.length>0?[Qt("toolbarButtonWith",i)]:[],getApi:n5,onSetup:n.onSetup},r),Ex=(n,r,i)=>Sx(n,{toolbarButtonBehaviours:[Rt.config({}),so.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(i.length>0?[Qt("toolbarToggleButtonWith",i)]:[]),getApi:kB,onSetup:n.onSetup},r),SB=(n,r,i)=>l=>zf(u=>r.fetch(u)).map(u=>E.from(U0(X(_y(lt("menu-value"),u,m=>{r.onItemAction(n(l),m)},r.columns,r.presets,Xc.CLOSE_ON_EXECUTE,r.select.getOr(Ne),i),{movement:E1(r.columns,r.presets),menuBehaviours:B0(r.columns!=="auto"?[]:[cn((m,p)=>{M0(m,4,yE(r.presets)).each(({numRows:b,numColumns:x})=>{vt.setGridSize(m,b,x)})})])})))),EB=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Tx=(n,r)=>(i,l,u)=>{const m=n(i).mapError(p=>zu(p)).getOrDie();return r(m,l,u)},TB={button:Tx(v_,(n,r)=>{return i=n,l=r.shared.providers,a5(i,l,[]);var i,l}),togglebutton:Tx(ME,(n,r)=>{return i=n,l=r.shared.providers,Ex(i,l,[]);var i,l}),menubutton:Tx(hA,(n,r)=>F1(n,"tox-tbtn",r,E.none(),!1)),splitbutton:Tx(n=>Bn("SplitButton",PM,n),(n,r)=>((i,l)=>{const u=b=>({isEnabled:()=>!Mt.isDisabled(b),setEnabled:x=>Mt.set(b,!x),setIconFill:(x,w)=>{Zn(b.element,`svg path[class="${x}"], rect[class="${x}"]`).each(_=>{Kt(_,"fill",w)})},setActive:x=>{Kt(b.element,"aria-pressed",x),Zn(b.element,"span").each(w=>{b.getSystem().getByDom(w).each(_=>so.set(_,x))})},isActive:()=>Zn(b.element,"span").exists(x=>b.getSystem().getByDom(x).exists(so.isOn)),setText:x=>Zn(b.element,"span").each(w=>b.getSystem().getByDom(w).each(_=>ut(_,rl,{text:x}))),setIcon:x=>Zn(b.element,"span").each(w=>b.getSystem().getByDom(w).each(_=>ut(_,td,{icon:x}))),setTooltip:x=>{const w=l.providers.translate(x);ki(b.element,{"aria-label":w,title:w})}}),m=Ot(Xe),p={getApi:u,onSetup:i.onSetup};return H2.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...s5(i.tooltip,l.providers)}},onExecute:b=>{const x=u(b);x.isEnabled()&&i.onAction(x)},onItemExecute:(b,x,w)=>{},splitDropdownBehaviours:Ve([Pf(l.providers.isDisabled),tr(),Qt("split-dropdown-events",[cn((b,x)=>_k(b)),Re(r5,It.focus),gu(p,m),If(p,m)]),j0.config({})]),eventOrder:{[Le()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:l.getSink,fetch:SB(u,i,l.providers),parts:{menu:um(0,i.columns,i.presets)},components:[H2.parts.button(AS(i.icon,i.text,E.none(),E.some([so.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),l.providers)),H2.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:IC("chevron-down",l.providers.icons)},buttonBehaviours:Ve([Pf(l.providers.isDisabled),tr(),LC()])}),H2.parts["aria-descriptor"]({text:l.providers.translate("To open the popup, press Shift+Enter")})]})})(n,r.shared)),grouptoolbarbutton:Tx(n=>Bn("GroupToolbarButton",MM,n),(n,r,i)=>{const l=i.ui.registry.getAll().buttons,u={[_s]:r.shared.header.isPositionedAtTop()?jr.TopToBottom:jr.BottomToTop};if(bp(i)===Al.floating)return((m,p,b,x)=>{const w=p.shared,_=Ot(Xe),k={toolbarButtonBehaviours:[],getApi:n5,onSetup:m.onSetup},T=[Qt("toolbar-group-button-events",[gu(k,_),If(k,_)])];return Sm.sketch({lazySink:w.getSink,fetch:()=>zf(N=>{N(Ke(b(m.items),P2))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:AS(m.icon,m.text,m.tooltip,E.some(T),w.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:x}}}})})(n,r,m=>qp(i,{buttons:l,toolbar:m,allowToolbarGroups:!1},r,E.none()),u);throw new Error("Toolbar groups are only supported when using floating toolbar mode")})},OB={styles:(n,r)=>{const i={type:"advanced",...r.styles};return _x(n,r,OS(n,i),e5,"StylesTextUpdate")},fontsize:(n,r)=>_x(n,r,QA(n),XA,"FontSizeTextUpdate"),fontsizeinput:(n,r)=>((i,l,u)=>{let m=E.none();const p=Ap(i,"NodeChange SwitchMode",L=>{const W=L.getComponent();m=E.some(W),u.updateInputValue(W),Mt.set(W,!i.selection.isEditable())}),b=L=>({getComponent:ue(L)}),x=Ot(Xe),w=lt("custom-number-input-events"),_=(L,W,G)=>{const Q=m.map(Ae=>nt.getValue(Ae)).getOr(""),re=u.getNewValue(Q,L),ge=Q.length-`${re}`.length,Te=m.map(Ae=>Ae.element.dom.selectionStart-ge),Oe=m.map(Ae=>Ae.element.dom.selectionEnd-ge);u.onAction(re,G),m.each(Ae=>{nt.setValue(Ae,re),W&&(Te.each(tt=>Ae.element.dom.selectionStart=tt),Oe.each(tt=>Ae.element.dom.selectionEnd=tt))})},k=(L,W)=>_((G,Q)=>G-Q,L,W),T=(L,W)=>_((G,Q)=>G+Q,L,W),N=L=>rr(L.element).fold(E.none,W=>(Ga(W),E.some(!0))),B=L=>$g(L.element)?(Fl(L.element).each(W=>Ga(W)),E.some(!0)):E.none(),V=(L,W,G,Q)=>{const re=Ot(Xe),ge=l.shared.providers.translate(G),Te=lt("altExecuting"),Oe=Ap(i,"NodeChange SwitchMode",tt=>{Mt.set(tt.getComponent(),!i.selection.isEditable())}),Ae=tt=>{Mt.isDisabled(tt)||L(!0)};return Dr.sketch({dom:{tag:"button",attributes:{title:ge,"aria-label":ge},classes:Q.concat(W)},components:[t2(W,l.shared.providers.icons)],buttonBehaviours:Ve([Mt.config({}),Qt(Te,[gu({onSetup:Oe,getApi:b},re),If({getApi:b},re),Re(sa(),(tt,at)=>{at.event.raw.keyCode!==YA.space()&&at.event.raw.keyCode!==YA.enter()||Mt.isDisabled(tt)||L(!1)}),Re(ci(),Ae),Re(Kl(),Ae)])]),eventOrder:{[sa()]:[Te,"keying"],[ci()]:[Te,"alloy.base.behaviour"],[Kl()]:[Te,"alloy.base.behaviour"]}})},U=Zo(V(L=>k(!1,L),"minus","Decrease font size",[])),q=Zo(V(L=>T(!1,L),"plus","Increase font size",[])),H=Zo({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[mm.sketch({inputBehaviours:Ve([Mt.config({}),Qt(w,[gu({onSetup:p,getApi:b},x),If({getApi:b},x)]),Qt("input-update-display-text",[Re(rl,(L,W)=>{nt.setValue(L,W.event.text)}),Re(Cg(),L=>{u.onAction(nt.getValue(L))}),Re(hl(),L=>{u.onAction(nt.getValue(L))})]),vt.config({mode:"special",onEnter:L=>(_(kt,!0,!0),E.some(!0)),onEscape:N,onUp:L=>(T(!0,!1),E.some(!0)),onDown:L=>(k(!0,!1),E.some(!0)),onLeft:(L,W)=>(W.cut(),E.none()),onRight:(L,W)=>(W.cut(),E.none())})])})],behaviours:Ve([It.config({}),vt.config({mode:"special",onEnter:B,onSpace:B,onEscape:N}),Qt("input-wrapper-events",[Re(Ji(),L=>{xt([U,q],W=>{const G=ot(W.get(L).element.dom);$g(G)&&Wb(G)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[U.asSpec(),H.asSpec(),q.asSpec()],behaviours:Ve([It.config({}),vt.config({mode:"flow",focusInside:t1.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:L=>$g(L.element)?E.none():(Ga(L.element),E.some(!0))})])}})(n,r,(i=>{const l=()=>i.queryCommandValue("FontSize");return{updateInputValue:u=>ut(u,rl,{text:l()}),onAction:(u,m)=>i.execCommand("FontSize",!1,u,{skip_focus:!m}),getNewValue:(u,m)=>{kx(u,["unsupportedLength","empty"]);const p=l(),b=kx(u,["unsupportedLength","empty"]).or(kx(p,["unsupportedLength","empty"])),x=b.map(N=>N.value).getOr(16),w=aE(i),_=b.map(N=>N.unit).filter(N=>N!=="").getOr(w),k=m(x,(N=>{var B;return(B={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[N])!==null&&B!==void 0?B:{step:1}})(_).step),T=`${(N=>N>=0)(k)?k:x}${_}`;return T!==p&&((N,B)=>{N.dispatch("FontSizeInputTextUpdate",B)})(i,{value:T}),T}}})(n)),fontfamily:(n,r)=>_x(n,r,KA(n),jA,"FontFamilyTextUpdate"),blocks:(n,r)=>_x(n,r,WA(n),ZA,"BlocksTextUpdate"),align:(n,r)=>_x(n,r,kS(n),$A,"AlignTextUpdate")},qp=(n,r,i,l)=>{const u=(p=>{const b=p.toolbar,x=p.buttons;return b===!1?[]:b===void 0||b===!0?(w=>{const _=Ke(EB,k=>{const T=Jt(k.items,N=>Dt(w,N)||Dt(OB,N));return{name:k.name,items:T}});return Jt(_,k=>k.items.length>0)})(x):Co(b)?(w=>{const _=w.split("|");return Ke(_,k=>({items:k.trim().split(" ")}))})(b):(w=>wc(w,_=>Dt(_,"name")&&Dt(_,"items")))(b)?b:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])})(r),m=Ke(u,p=>{const b=qn(p.items,x=>x.trim().length===0?[]:((w,_,k,T,N,B)=>mt(_,k.toLowerCase()).orThunk(()=>B.bind(V=>_r(V,U=>mt(_,U+k.toLowerCase())))).fold(()=>mt(OB,k.toLowerCase()).map(V=>V(w,N)),V=>V.type!=="grouptoolbarbutton"||T?((U,q,H)=>mt(TB,U.type).fold(()=>(console.error("skipping button defined by",U),E.none()),L=>E.some(L(U,q,H))))(V,N,w):(console.warn(`Ignoring the '${k}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),E.none())))(n,r.buttons,x,r.allowToolbarGroups,i,l).toArray());return{title:E.from(n.translate(p.name)),items:b}});return Jt(m,p=>p.items.length>0)},Gp=(n,r,i,l)=>{const u=r.mainUi.outerContainer,m=i.toolbar,p=i.buttons;if(wc(m,Co)){const b=m.map(x=>{const w={toolbar:x,buttons:p,allowToolbarGroups:i.allowToolbarGroups};return qp(n,w,l,E.none())});mn.setToolbars(u,b)}else mn.setToolbar(u,qp(n,i,l,E.none()))},NS=fl(),i5=NS.os.isiOS()&&NS.os.version.major<=12;var AB=Object.freeze({__proto__:null,render:(n,r,i,l,u)=>{const{mainUi:m,uiMotherships:p}=r,b=Ot(0),x=m.outerContainer;fB(n);const w=ot(u.targetNode),_=Gi(bs(w));ou(w,m.mothership),((B,V,U)=>{Df(B)&&ou(U.mainUi.mothership.element,U.popupUi.mothership),Qg(V,U.dialogUi.mothership)})(n,_,r),n.on("SkinLoaded",()=>{mn.setSidebar(x,i.sidebar,uE(n)),Gp(n,r,i,l),b.set(n.getWin().innerWidth),mn.setMenubar(x,yS(n,i)),mn.setViews(x,i.views),((B,V)=>{const{uiMotherships:U}=V,q=B.dom;let H=B.getWin();const L=B.getDoc().documentElement,W=Ot(Xt(H.innerWidth,H.innerHeight)),G=Ot(Xt(L.offsetWidth,L.offsetHeight)),Q=()=>{const Oe=W.get();Oe.left===H.innerWidth&&Oe.top===H.innerHeight||(W.set(Xt(H.innerWidth,H.innerHeight)),M_(B))},re=()=>{const Oe=B.getDoc().documentElement,Ae=G.get();Ae.left===Oe.offsetWidth&&Ae.top===Oe.offsetHeight||(G.set(Xt(Oe.offsetWidth,Oe.offsetHeight)),M_(B))},ge=Oe=>{((Ae,tt)=>{Ae.dispatch("ScrollContent",tt)})(B,Oe)};q.bind(H,"resize",Q),q.bind(H,"scroll",ge);const Te=Wg(ot(B.getBody()),"load",re);B.on("hide",()=>{xt(U,Oe=>{Ht(Oe.element,"display","none")})}),B.on("show",()=>{xt(U,Oe=>{Mo(Oe.element,"display")})}),B.on("NodeChange",re),B.on("remove",()=>{Te.unbind(),q.unbind(H,"resize",Q),q.unbind(H,"scroll",ge),H=null})})(n,r)});const k=mn.getSocket(x).getOrDie("Could not find expected socket element");if(i5){Ki(k.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const B=((U,q)=>{let H=null;return{cancel:()=>{md(H)||(clearTimeout(H),H=null)},throttle:(...L)=>{md(H)&&(H=setTimeout(()=>{H=null,U.apply(null,L)},20))}}})(()=>{n.dispatch("ScrollContent")}),V=yr(k.element,"scroll",B.throttle);n.on("remove",V.unbind)}HE(n,r),n.addCommand("ToggleSidebar",(B,V)=>{mn.toggleSidebar(x,V),n.dispatch("ToggleSidebar")}),n.addQueryValueHandler("ToggleSidebar",()=>{var B;return(B=mn.whichSidebar(x))!==null&&B!==void 0?B:""}),n.addCommand("ToggleView",(B,V)=>{if(mn.toggleView(x,V)){const U=x.element;m.mothership.broadcastOn([Oa()],{target:U}),xt(p,q=>{q.broadcastOn([Oa()],{target:U})}),md(mn.whichView(x))&&(n.focus(),n.nodeChanged(),mn.refreshToolbar(x))}}),n.addQueryValueHandler("ToggleView",()=>{var B;return(B=mn.whichView(x))!==null&&B!==void 0?B:""});const T=bp(n);T!==Al.sliding&&T!==Al.floating||n.on("ResizeWindow ResizeEditor ResizeContent",()=>{const B=n.getWin().innerWidth;B!==b.get()&&(mn.refreshToolbar(r.mainUi.outerContainer),b.set(B))});const N={setEnabled:B=>{fy(r,!B)},isEnabled:()=>!Mt.isDisabled(x)};return{iframeContainer:k.element.dom,editorContainer:x.element.dom,api:N}}});const RS=n=>/^[0-9\.]+(|px)$/i.test(""+n)?E.some(parseInt(""+n,10)):E.none(),DS=n=>jo(n)?n+"px":n,z2=(n,r,i)=>{const l=r.filter(m=>n<m),u=i.filter(m=>n>m);return l.or(u).getOr(n)},l5=n=>{const r=zC(n),i=VC(n),l=k0(n);return RS(r).map(u=>z2(u,i,l))},{ToolbarLocation:MS,ToolbarMode:c5}=AD,NB=(n,r,i,l,u)=>{const{mainUi:m,uiMotherships:p}=i,b=pp.DOM,x=xp(n),w=h1(n),_=k0(n).or(l5(n)),k=l.shared.header,T=k.isPositionedAtTop,N=bp(n),B=N===c5.sliding||N===c5.floating,V=Ot(!1),U=()=>V.get()&&!n.removed,q=G=>B?G.fold(ue(0),Q=>Q.components().length>1?_e(Q.components()[1].element):0):0,H=()=>{xt(p,G=>{G.broadcastOn([xf()],{})})},L=G=>{if(!U())return;x||u.on(re=>{const ge=_.getOrThunk(()=>{const Te=RS(Gn(ni(),"margin-left")).getOr(0);return On(ni())-ko(r).left+Te});Ht(re.element,"max-width",ge+"px")});const Q=x?E.none():(()=>{if(x)return E.none();if(ko(m.outerContainer.element).left+ha(m.outerContainer.element)>=window.innerWidth-40||vs(m.outerContainer.element,"width").isSome()){Ht(m.outerContainer.element,"position","absolute"),Ht(m.outerContainer.element,"left","0px"),Mo(m.outerContainer.element,"width");const re=ha(m.outerContainer.element);return E.some(re)}return E.none()})();B&&mn.refreshToolbar(m.outerContainer),x||(re=>{u.on(ge=>{const Te=mn.getToolbar(m.outerContainer),Oe=q(Te),Ae=Gs(r),{top:tt,left:at}=((Lt,lo)=>Df(Lt)?oS(lo):E.none())(n,m.outerContainer.element).fold(()=>({top:T()?Math.max(Ae.y-_e(ge.element)+Oe,0):Ae.bottom,left:Ae.x}),Lt=>{var lo;const sn=Gs(Lt),zn=(lo=Lt.dom.scrollTop)!==null&&lo!==void 0?lo:0,$t=Go(Lt,ni()),ur=$t?Math.max(Ae.y-_e(ge.element)+Oe,0):Ae.y-sn.y+zn-_e(ge.element)+Oe;return{top:T()?ur:Ae.bottom,left:$t?Ae.x:Ae.x-sn.x}}),ht={position:"absolute",left:Math.round(at)+"px",top:Math.round(tt)+"px"},Bt=re.map(Lt=>{const lo=cs(),sn=window.innerWidth-(at-lo.left);return{width:Math.max(Math.min(Lt,sn),150)+"px"}}).getOr({});Ki(m.outerContainer.element,{...ht,...Bt})})})(Q),w&&u.on(G),H()},W=()=>!(x||!w||!U())&&u.get().exists(G=>{const Q=k.getDockingMode(),re=(Te=>{switch(jC(n)){case MS.auto:const Oe=mn.getToolbar(m.outerContainer),Ae=q(Oe),tt=_e(Te.element)-Ae,at=Gs(r);if(at.y>tt)return"top";{const ht=ig(r),Bt=Math.max(ht.dom.scrollHeight,_e(ht));return at.bottom<Bt-tt||Xn().bottom<at.bottom-tt?"bottom":"top"}case MS.bottom:return"bottom";case MS.top:default:return"top"}})(G);return re!==Q&&(ge=re,u.on(Te=>{ss.setModes(Te,[ge]),k.setDockingMode(ge);const Oe=T()?jr.TopToBottom:jr.BottomToTop;Kt(Te.element,_s,Oe)}),!0);var ge});return{isVisible:U,isPositionedAtTop:T,show:()=>{V.set(!0),Ht(m.outerContainer.element,"display","flex"),b.addClass(n.getBody(),"mce-edit-focus"),xt(p,G=>{Mo(G.element,"display")}),W(),Df(n)?L(G=>ss.isDocked(G)?ss.reset(G):ss.refresh(G)):L(ss.refresh)},hide:()=>{V.set(!1),Ht(m.outerContainer.element,"display","none"),b.removeClass(n.getBody(),"mce-edit-focus"),xt(p,G=>{Ht(G.element,"display","none")})},update:L,updateMode:()=>{W()&&L(ss.reset)},repositionPopups:H}},d5=(n,r)=>{const i=Gs(n);return{pos:r?i.y:i.bottom,bounds:i}};var RB=Object.freeze({__proto__:null,render:(n,r,i,l,u)=>{const{mainUi:m}=r,p=En(),b=ot(u.targetNode),x=NB(n,b,r,l,p),w=tE(n);gB(n);const _=()=>{if(p.isSet())return void x.show();p.set(mn.getHeader(m.outerContainer).getOrDie());const T=T0(n);Df(n)?(ou(b,m.mothership),ou(b,r.popupUi.mothership)):Qg(T,m.mothership),Qg(T,r.dialogUi.mothership),Gp(n,r,i,l),mn.setMenubar(m.outerContainer,yS(n,i)),x.show(),((N,B,V,U)=>{const q=Ot(d5(B,V.isPositionedAtTop())),H=Q=>{const{pos:re,bounds:ge}=d5(B,V.isPositionedAtTop()),{pos:Te,bounds:Oe}=q.get(),Ae=ge.height!==Oe.height||ge.width!==Oe.width;q.set({pos:re,bounds:ge}),Ae&&M_(N,Q),V.isVisible()&&(Te!==re?V.update(ss.reset):Ae&&(V.updateMode(),V.repositionPopups()))};U||(N.on("activate",V.show),N.on("deactivate",V.hide)),N.on("SkinLoaded ResizeWindow",()=>V.update(ss.reset)),N.on("NodeChange keydown",Q=>{requestAnimationFrame(()=>H(Q))});let L=0;const W=ox(()=>V.update(ss.refresh),33);N.on("ScrollWindow",()=>{const Q=cs().left;Q!==L&&(L=Q,W.throttle()),V.updateMode()}),Df(N)&&N.on("ElementScroll",Q=>{V.update(ss.refresh)});const G=nc();G.set(Wg(ot(N.getBody()),"load",Q=>H(Q.raw))),N.on("remove",()=>{G.clear()})})(n,b,x,w),n.nodeChanged()};n.on("show",_),n.on("hide",x.hide),w||(n.on("focus",_),n.on("blur",x.hide)),n.on("init",()=>{(n.hasFocus()||w)&&_()}),HE(n,r);const k={show:_,hide:x.hide,setEnabled:T=>{fy(r,!T)},isEnabled:()=>!Mt.isDisabled(m.outerContainer)};return{editorContainer:m.outerContainer.element.dom,api:k}}});const u5="contexttoolbar-hide",BS=(n,r)=>Re(uO,(i,l)=>{const u=(m=>({hide:()=>xo(m,kg()),getValue:()=>nt.getValue(m)}))(n.get(i));r.onAction(u,l.event.buttonApi)}),q1=(n,r)=>{const i=n.label.fold(()=>({}),m=>({"aria-label":m})),l=Zo(mm.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:n.initValue(),inputAttributes:i,selectOnFocus:!0,inputBehaviours:Ve([vt.config({mode:"special",onEnter:m=>u.findPrimary(m).map(p=>(Od(p),!0)),onLeft:(m,p)=>(p.cut(),E.none()),onRight:(m,p)=>(p.cut(),E.none())})])})),u=((m,p,b)=>{const x=Ke(p,w=>Zo(((_,k,T)=>(N=>N.type==="contextformtogglebutton")(k)?((N,B,V)=>{const{primary:U,...q}=B.original,H=Xi(ME({...q,type:"togglebutton",onAction:Xe}));return Ex(H,V,[BS(N,B)])})(_,k,T):((N,B,V)=>{const{primary:U,...q}=B.original,H=Xi(v_({...q,type:"button",onAction:Xe}));return a5(H,V,[BS(N,B)])})(_,k,T))(m,w,b)));return{asSpecs:()=>Ke(x,w=>w.asSpec()),findPrimary:w=>_r(p,(_,k)=>_.primary?E.from(x[k]).bind(T=>T.getOpt(w)).filter(yi(Mt.isDisabled)):E.none())}})(l,n.commands,r);return[{title:E.none(),items:[l.asSpec()]},{title:E.none(),items:u.asSpecs()}]},Zf=(n,r,i)=>r.bottom-n.y>=i&&n.bottom-r.y>=i,PS=n=>{const r=(i=>{const l=i.getBoundingClientRect();if(l.height<=0&&l.width<=0){const u=Hl(ot(i.startContainer),i.startOffset).element;return(pa(u)?Ci(u):E.some(u)).filter(Ws).map(m=>m.dom.getBoundingClientRect()).getOr(l)}return l})(n.selection.getRng());if(n.inline){const i=cs();return Ts(i.left+r.left,i.top+r.top,r.width,r.height)}{const i=Ls(ot(n.getBody()));return Ts(i.x+r.left,i.y+r.top,r.width,r.height)}},IS=(n,r,i,l=0)=>{const u=xa(window),m=Gs(ot(n.getContentAreaContainer())),p=mu(n)||g1(n)||p1(n),{x:b,width:x}=((w,_,k)=>{const T=Math.max(w.x+k,_.x);return{x:T,width:Math.min(w.right-k,_.right)-T}})(m,u,l);if(n.inline&&!p)return Ts(b,u.y,x,u.height);{const w=r.header.isPositionedAtTop(),{y:_,bottom:k}=((T,N,B,V,U,q)=>{const H=ot(T.getContainer()),L=Zn(H,".tox-editor-header").getOr(H),W=Gs(L),G=W.y>=N.bottom,Q=V&&!G;if(T.inline&&Q)return{y:Math.max(W.bottom+q,B.y),bottom:B.bottom};if(T.inline&&!Q)return{y:B.y,bottom:Math.min(W.y-q,B.bottom)};const re=U==="line"?Gs(H):N;return Q?{y:Math.max(W.bottom+q,B.y),bottom:Math.min(re.bottom-q,B.bottom)}:{y:Math.max(re.y+q,B.y),bottom:Math.min(W.y-q,B.bottom)}})(n,m,u,w,i,l);return Ts(b,_,x,k-_)}},LS={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},Ox={maxHeightFunction:nm(),maxWidthFunction:vx()},m5=n=>n==="node",Ax=(n,r,i,l,u)=>{const m=PS(n),p=l.lastElement().exists(b=>Go(i,b));return((b,x)=>{const w=b.selection.getRng(),_=Hl(ot(w.startContainer),w.startOffset);return w.startContainer===w.endContainer&&w.startOffset===w.endOffset-1&&Go(_.element,x)})(n,i)?p?jO:hc:p?((b,x,w)=>{const _=vs(b,"position");Ht(b,"position",x);const k=Zf(m,Gs(r),-20)&&!l.isReposition()?jk:jO;return _.each(T=>Ht(b,"position",T)),k})(r,l.getMode()):(l.getMode()==="fixed"?u.y+cs().top:u.y)+(_e(r)+12)<=m.y?hc:mx},Nx=(n,r,i,l)=>{const u=p=>(b,x,w,_,k)=>({...Ax(n,_,p,i,k)({...b,y:k.y,height:k.height},x,w,_,k),alwaysFit:!0}),m=p=>m5(l)?[u(p)]:[];return r?{onLtr:p=>[Wn,ir,ns,lr,dn,ia].concat(m(p)),onRtl:p=>[Wn,ns,ir,dn,lr,ia].concat(m(p))}:{onLtr:p=>[ia,Wn,lr,ir,dn,ns].concat(m(p)),onRtl:p=>[ia,Wn,dn,ns,lr,ir].concat(m(p))}},FS=(n,r)=>{const i=Jt(r,m=>m.predicate(n.dom)),{pass:l,fail:u}=Cc(i,m=>m.type==="contexttoolbar");return{contextToolbars:l,contextForms:u}},DB=(n,r)=>{const i={},l=[],u=[],m={},p={},b=Ao(n);return xt(b,x=>{const w=n[x];w.type==="contextform"?((_,k)=>{const T=Xi(Bn("ContextForm",$D,k));i[_]=T,T.launch.map(N=>{m["form:"+_]={...k.launch,type:N.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{r(T)}}}),T.scope==="editor"?u.push(T):l.push(T),p[_]=T})(x,w):w.type==="contexttoolbar"&&((_,k)=>{var T;(T=k,Bn("ContextToolbar",UD,T)).each(N=>{k.scope==="editor"?u.push(N):l.push(N),p[_]=N})})(x,w)}),{forms:i,inNodeScope:l,inEditorScope:u,lookupTable:p,formNavigators:m}},f5=lt("forward-slide"),g5=lt("backward-slide"),HS=lt("change-slide-event"),zS="tox-pop--resizing",G1="tox-pop--transition",MB=(n,r,i,l)=>{const u=l.backstage,m=u.shared,p=fl().deviceType.isTouch,b=En(),x=En(),w=En(),_=Ar((Q=>{const re=Ot([]);return jn.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:ge=>{re.set([]),jn.getContent(ge).each(Te=>{Mo(Te.element,"visibility")}),Un(ge.element,zS),Mo(ge.element,"width")},inlineBehaviours:Ve([Qt("context-toolbar-events",[Ku(Jm(),(ge,Te)=>{Te.event.raw.propertyName==="width"&&(Un(ge.element,zS),Mo(ge.element,"width"))}),Re(HS,(ge,Te)=>{const Oe=ge.element;Mo(Oe,"width");const Ae=On(Oe);jn.setContent(ge,Te.event.contents),$n(Oe,zS);const tt=On(Oe);Ht(Oe,"width",Ae+"px"),jn.getContent(ge).each(at=>{Te.event.focus.bind(ht=>(Ga(ht),Bi(Oe))).orThunk(()=>(vt.focusIn(at),Mi(bs(Oe))))}),setTimeout(()=>{Ht(ge.element,"width",tt+"px")},0)}),Re(f5,(ge,Te)=>{jn.getContent(ge).each(Oe=>{re.set(re.get().concat([{bar:Oe,focus:Mi(bs(ge.element))}]))}),ut(ge,HS,{contents:Te.event.forwardContents,focus:E.none()})}),Re(g5,(ge,Te)=>{xn(re.get()).each(Oe=>{re.set(re.get().slice(0,re.get().length-1)),ut(ge,HS,{contents:Jo(Oe.bar),focus:Oe.focus})})})]),vt.config({mode:"special",onEscape:ge=>xn(re.get()).fold(()=>Q.onEscape(),Te=>(xo(ge,g5),E.some(!0)))})]),lazySink:()=>mo.value(Q.sink)})})({sink:i,onEscape:()=>(n.focus(),E.some(!0))})),k=()=>{const Q=w.get().getOr("node"),re=m5(Q)?1:0;return IS(n,m,Q,re)},T=()=>!(n.removed||p()&&u.isContextMenuOpen()),N=()=>{if(T()){const Q=k(),re=Lr(w.get(),"node")?((ge,Te)=>Te.filter(Oe=>Ps(Oe)&&Sr(Oe)).map(Ls).getOrThunk(()=>PS(ge)))(n,b.get()):PS(n);return Q.height<=0||!Zf(re,Q,.01)}return!0},B=()=>{b.clear(),x.clear(),w.clear(),jn.hide(_)},V=()=>{if(jn.isOpen(_)){const Q=_.element;Mo(Q,"display"),N()?Ht(Q,"display","none"):(x.set(0),jn.reposition(_))}},U=Q=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Q],behaviours:Ve([vt.config({mode:"acyclic"}),Qt("pop-dialog-wrap-events",[cn(re=>{n.shortcuts.add("ctrl+F9","focus statusbar",()=>vt.focusIn(re))}),Xl(re=>{n.shortcuts.remove("ctrl+F9")})])])}),q=si(()=>DB(r,Q=>{const re=H([Q]);ut(_,f5,{forwardContents:U(re)})})),H=Q=>{const{buttons:re}=n.ui.registry.getAll(),ge={...re,...q().formNavigators},Te=bp(n)===Al.scrolling?Al.scrolling:Al.default,Oe=hn(Ke(Q,Ae=>Ae.type==="contexttoolbar"?((tt,at)=>qp(n,{buttons:tt,toolbar:at.items,allowToolbarGroups:!1},l.backstage,E.some(["form:"])))(ge,Ae):((tt,at)=>q1(tt,at))(Ae,m.providers)));return xS({type:Te,uid:lt("context-toolbar"),initGroups:Oe,onEscape:E.none,cyclicKeying:!0,providers:m.providers})},L=(Q,re)=>{if(G.cancel(),!T())return;const ge=H(Q),Te=Q[0].position,Oe=((tt,at)=>{const ht=tt==="node"?m.anchors.node(at):m.anchors.cursor(),Bt=((Lt,lo,sn,zn)=>lo==="line"?{bubble:wl(12,0,LS),layouts:{onLtr:()=>[cr],onRtl:()=>[Hg]},overrides:Ox}:{bubble:wl(0,12,LS,1/12),layouts:Nx(Lt,sn,zn,lo),overrides:Ox})(n,tt,p(),{lastElement:b.get,isReposition:()=>Lr(x.get(),0),getMode:()=>Rr.getMode(i)});return X(ht,Bt)})(Te,re);w.set(Te),x.set(1);const Ae=_.element;Mo(Ae,"display"),(tt=>Lr(Fr(tt,b.get(),Go),!0))(re)||(Un(Ae,G1),Rr.reset(i,_)),jn.showWithinBounds(_,U(ge),{anchor:Oe,transition:{classes:[G1],mode:"placement"}},()=>E.some(k())),re.fold(b.clear,b.set),N()&&Ht(Ae,"display","none")};let W=!1;const G=ox(()=>{!n.hasFocus()||n.removed||W||(ra(_.element,G1)?G.throttle():((Q,re)=>{const ge=ot(re.getBody()),Te=Ae=>Go(Ae,ge),Oe=ot(re.selection.getNode());return(Ae=>!Te(Ae)&&!Es(ge,Ae))(Oe)?E.none():((Ae,tt,at)=>{const ht=FS(Ae,tt);if(ht.contextForms.length>0)return E.some({elem:Ae,toolbars:[ht.contextForms[0]]});{const Bt=FS(Ae,at);if(Bt.contextForms.length>0)return E.some({elem:Ae,toolbars:[Bt.contextForms[0]]});if(ht.contextToolbars.length>0||Bt.contextToolbars.length>0){const Lt=(lo=>{if(lo.length<=1)return lo;{const sn=Zt=>Yr(lo,fs=>fs.position===Zt),zn=Zt=>Jt(lo,fs=>fs.position===Zt),$t=sn("selection"),ur=sn("node");if($t||ur){if(ur&&$t){const Zt=zn("node"),fs=Ke(zn("selection"),tn=>({...tn,position:"node"}));return Zt.concat(fs)}return zn($t?"selection":"node")}return zn("line")}})(ht.contextToolbars.concat(Bt.contextToolbars));return E.some({elem:Ae,toolbars:Lt})}return E.none()}})(Oe,Q.inNodeScope,Q.inEditorScope).orThunk(()=>((Ae,tt,at)=>Ae(tt)?E.none():vb(tt,ht=>{if(Ws(ht)){const{contextToolbars:Bt,contextForms:Lt}=FS(ht,at.inNodeScope),lo=Lt.length>0?Lt:(sn=>{if(sn.length<=1)return sn;{const zn=$t=>qo(sn,ur=>ur.position===$t);return zn("selection").orThunk(()=>zn("node")).orThunk(()=>zn("line")).map($t=>$t.position).fold(()=>[],$t=>Jt(sn,ur=>ur.position===$t))}})(Bt);return lo.length>0?E.some({elem:ht,toolbars:lo}):E.none()}return E.none()},Ae))(Te,Oe,Q))})(q(),n).fold(B,Q=>{L(Q.toolbars,E.some(Q.elem))}))},17);n.on("init",()=>{n.on("remove",B),n.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",V),n.on("click keyup focus SetContent",G.throttle),n.on(u5,B),n.on("contexttoolbar-show",Q=>{const re=q();mt(re.lookupTable,Q.toolbarKey).each(ge=>{L([ge],Xr(Q.target!==n,Q.target)),jn.getContent(_).each(vt.focusIn)})}),n.on("focusout",Q=>{jv.setEditorTimeout(n,()=>{Bi(i.element).isNone()&&Bi(_.element).isNone()&&B()},0)}),n.on("SwitchMode",()=>{n.mode.isReadOnly()&&B()}),n.on("AfterProgressState",Q=>{Q.state?B():n.hasFocus()&&G.throttle()}),n.on("dragstart",()=>{W=!0}),n.on("dragend drop",()=>{W=!1}),n.on("NodeChange",Q=>{Bi(_.element).fold(G.throttle,Xe)})})},V2=(n,r)=>{const i=()=>{const l=r.getOptions(n),u=r.getCurrent(n).map(r.hash),m=En();return Ke(l,p=>({type:"togglemenuitem",text:r.display(p),onSetup:b=>{const x=_=>{_&&(m.on(k=>k.setActive(!1)),m.set(b)),b.setActive(_)};x(Lr(u,r.hash(p)));const w=r.watcher(n,p,x);return()=>{m.clear(),w()}},onAction:()=>r.setCurrent(n,p)}))};n.ui.registry.addMenuButton(r.name,{tooltip:r.text,icon:r.icon,fetch:l=>l(i()),onSetup:r.onToolbarSetup}),n.ui.registry.addNestedMenuItem(r.name,{type:"nestedmenuitem",text:r.text,getSubmenuItems:i,onSetup:r.onMenuSetup})},BB=n=>{V2(n,(r=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:E0,hash:i=>((l,u)=>kx(l,["fixed","relative","empty"]).map(({value:m,unit:p})=>m+p))(i).getOr(i),display:kt,watcher:(i,l,u)=>i.formatter.formatChanged("lineheight",u,!1,{value:l}).unbind,getCurrent:i=>E.from(i.queryCommandValue("LineHeight")),setCurrent:(i,l)=>i.execCommand("LineHeight",!1,l),onToolbarSetup:ca(r),onMenuSetup:ca(r)}))(n)),(r=>E.from(WC(r)).map(i=>({name:"language",text:"Language",icon:"language",getOptions:ue(i),hash:l=>mr(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,u,m)=>{var p;return l.formatter.formatChanged("lang",m,!1,{value:u.code,customValue:(p=u.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:l=>{const u=ot(l.selection.getNode());return Vu(u,m=>E.some(m).filter(Ws).bind(p=>qs(p,"lang").map(b=>({code:b,customCode:qs(p,"data-mce-lang").getOrUndefined(),title:""}))))},setCurrent:(l,u)=>l.execCommand("Lang",!1,u),onToolbarSetup:l=>{const u=nc();return l.setActive(r.formatter.match("lang",{},void 0,!0)),u.set(r.formatter.formatChanged("lang",l.setActive,!0)),L0(u.clear,ca(r)(l))},onMenuSetup:ca(r)})))(n).each(r=>V2(n,r))},PB=n=>Ap(n,"NodeChange",r=>{r.setEnabled(n.queryCommandState("outdent")&&n.selection.isEditable())}),p5=(n,r)=>i=>{i.setActive(r.get());const l=u=>{r.set(u.state),i.setActive(u.state)};return n.on("PastePlainTextToggle",l),L0(()=>n.off("PastePlainTextToggle",l),ca(n)(i))},$2=(n,r)=>()=>{n.execCommand("mceToggleFormat",!1,r)},IB=n=>{(r=>{(i=>{wm.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(l,u)=>{i.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onSetup:vy(i,l.name),onAction:$2(i,l.name)})});for(let l=1;l<=6;l++){const u="h"+l;i.ui.registry.addToggleButton(u,{text:u.toUpperCase(),tooltip:"Heading "+l,onSetup:vy(i,u),onAction:$2(i,u)})}})(r),(i=>{wm.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],l=>{i.ui.registry.addButton(l.name,{tooltip:l.text,icon:l.icon,onAction:Ui(i,l.action)})}),wm.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],l=>{i.ui.registry.addButton(l.name,{tooltip:l.text,icon:l.icon,onSetup:ca(i),onAction:Ui(i,l.action)})})})(r),(i=>{wm.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],l=>{i.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onAction:Ui(i,l.action),onSetup:vy(i,l.name)})})})(r)})(n),(r=>{wm.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],i=>{r.ui.registry.addMenuItem(i.name,{text:i.text,icon:i.icon,shortcut:i.shortcut,onAction:Ui(r,i.action)})}),wm.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],i=>{r.ui.registry.addMenuItem(i.name,{text:i.text,icon:i.icon,shortcut:i.shortcut,onSetup:ca(r),onAction:Ui(r,i.action)})}),r.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:ca(r),onAction:$2(r,"code")})})(n)},U2=(n,r)=>Ap(n,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",i=>{i.setEnabled(!n.mode.isReadOnly()&&n.undoManager[r]())}),LB=n=>Ap(n,"VisualAid",r=>{r.setActive(n.hasVisual)}),h5=(n,r)=>{(i=>{xt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],l=>{i.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onAction:Ui(i,l.cmd),onSetup:vy(i,l.name)})}),i.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:ca(i),onAction:Ui(i,"JustifyNone")})})(n),IB(n),((i,l)=>{((u,m)=>{const p=W1(0,m,kS(u));u.ui.registry.addNestedMenuItem("align",{text:m.shared.providers.translate("Align"),onSetup:ca(u),getSubmenuItems:()=>p.items.validateItems(p.getStyleItems())})})(i,l),((u,m)=>{const p=W1(0,m,KA(u));u.ui.registry.addNestedMenuItem("fontfamily",{text:m.shared.providers.translate("Fonts"),onSetup:ca(u),getSubmenuItems:()=>p.items.validateItems(p.getStyleItems())})})(i,l),((u,m)=>{const p={type:"advanced",...m.styles},b=W1(0,m,OS(u,p));u.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:ca(u),getSubmenuItems:()=>b.items.validateItems(b.getStyleItems())})})(i,l),((u,m)=>{const p=W1(0,m,WA(u));u.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:ca(u),getSubmenuItems:()=>p.items.validateItems(p.getStyleItems())})})(i,l),((u,m)=>{const p=W1(0,m,QA(u));u.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:ca(u),getSubmenuItems:()=>p.items.validateItems(p.getStyleItems())})})(i,l)})(n,r),(i=>{(l=>{l.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:U2(l,"hasUndo"),onAction:Ui(l,"undo")}),l.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:U2(l,"hasRedo"),onAction:Ui(l,"redo")})})(i),(l=>{l.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:U2(l,"hasUndo"),onAction:Ui(l,"undo")}),l.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:U2(l,"hasRedo"),onAction:Ui(l,"redo")})})(i)})(n),(i=>{(b=>{b.addCommand("mceApplyTextcolor",(x,w)=>{((_,k,T)=>{_.undoManager.transact(()=>{_.focus(),_.formatter.apply(k,{value:T}),_.nodeChanged()})})(b,x,w)}),b.addCommand("mceRemoveTextcolor",x=>{((w,_)=>{w.undoManager.transact(()=>{w.focus(),w.formatter.remove(_,{value:null},void 0,!0),w.nodeChanged()})})(b,x)})})(i);const l=a6(i),u=z0(i),m=Ot(l),p=Ot(u);Cy(i,"forecolor","forecolor",m),Cy(i,"backcolor","hilitecolor",p),dT(i,"forecolor","forecolor","Text color",m),dT(i,"backcolor","hilitecolor","Background color",p)})(n),(i=>{(l=>{l.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Ui(l,"mceToggleVisualAid")})})(i),(l=>{l.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:LB(l),onAction:Ui(l,"mceToggleVisualAid")})})(i)})(n),(i=>{(l=>{l.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:PB(l),onAction:Ui(l,"outdent")}),l.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:ca(l),onAction:Ui(l,"indent")})})(i)})(n),BB(n),(i=>{const l=Ot(dE(i)),u=()=>i.execCommand("mceTogglePlainTextPaste");i.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:u,onSetup:p5(i,l)}),i.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:u,onSetup:p5(i,l)})})(n)},FB=n=>Co(n)?n.split(/[ ,]/):n,b5=n=>r=>r.options.get(n),x5=b5("contextmenu_never_use_native"),HB=b5("contextmenu_avoid_overlap"),v5=n=>{const r=n.ui.registry.getAll().contextMenus,i=n.options.get("contextmenu");return n.options.isSet("contextmenu")?i:Jt(i,l=>Dt(r,l))},K1=(n,r)=>({type:"makeshift",x:n,y:r}),VS=n=>n.type==="longpress"||n.type.indexOf("touch")===0,zB=(n,r)=>r.type==="contextmenu"||r.type==="longpress"?n.inline?(i=>{if(VS(i)){const l=i.touches[0];return K1(l.pageX,l.pageY)}return K1(i.pageX,i.pageY)})(r):((i,l)=>{const u=pp.DOM.getPos(i);return((m,p,b)=>K1(m.x+p,m.y+b))(l,u.x,u.y)})(n.getContentAreaContainer(),(i=>{if(VS(i)){const l=i.touches[0];return K1(l.clientX,l.clientY)}return K1(i.clientX,i.clientY)})(r)):y5(n),y5=n=>({type:"selection",root:ot(n.selection.getNode())}),w5=(n,r,i)=>{switch(i){case"node":return(l=>({type:"node",node:E.some(ot(l.selection.getNode())),root:ot(l.getBody())}))(n);case"point":return zB(n,r);case"selection":return y5(n)}},VB=(n,r,i,l,u,m)=>{const p=i(),b=w5(n,r,m);L1(p,Xc.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:E.none()}).map(x=>{r.preventDefault(),jn.showMenuAt(u,{anchor:b},{menu:{markers:yp("normal")},data:x})})},$B={onLtr:()=>[Wn,ir,ns,lr,dn,ia,hc,mx,z1,p2,H1,g2],onRtl:()=>[Wn,ns,ir,dn,lr,ia,hc,mx,H1,g2,z1,p2]},C5={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},Y1=(n,r,i,l,u,m)=>{const p=fl(),b=p.os.isiOS(),x=p.os.isMacOS(),w=p.os.isAndroid(),_=p.deviceType.isTouch(),k=()=>{const T=i();((N,B,V,U,q,H,L)=>{const W=((G,Q,re)=>{const ge=w5(G,Q,re);return{bubble:wl(0,re==="point"?12:0,C5),layouts:$B,overrides:{maxWidthFunction:vx(),maxHeightFunction:nm()},...ge}})(N,B,H);L1(V,Xc.CLOSE_ON_EXECUTE,U,{isHorizontalMenu:!0,search:E.none()}).map(G=>{B.preventDefault();const Q=L?Ra.HighlightMenuAndItem:Ra.HighlightNone;jn.showMenuWithinBounds(q,{anchor:W},{menu:{markers:yp("normal"),highlightOnOpen:Q},data:G,type:"horizontal"},()=>E.some(IS(N,U.shared,H==="node"?"node":"selection"))),N.dispatch(u5)})})(n,r,T,l,u,m,!(w||b||x&&_))};if((x||b)&&m!=="node"){const T=()=>{(N=>{const B=N.selection.getRng(),V=()=>{jv.setEditorTimeout(N,()=>{N.selection.setRng(B)},10),H()};N.once("touchend",V);const U=L=>{L.preventDefault(),L.stopImmediatePropagation()};N.on("mousedown",U,!0);const q=()=>H();N.once("longpresscancel",q);const H=()=>{N.off("touchend",V),N.off("longpresscancel",q),N.off("mousedown",U)}})(n),k()};((N,B)=>{const V=N.selection;if(V.isCollapsed()||B.touches.length<1)return!1;{const U=B.touches[0],q=V.getRng();return Hh(N.getWin(),rc.domRange(q)).exists(H=>H.left<=U.clientX&&H.right>=U.clientX&&H.top<=U.clientY&&H.bottom>=U.clientY)}})(n,r)?T():(n.once("selectionchange",T),n.once("touchend",()=>n.off("selectionchange",T)))}else k()},_5=n=>Co(n)?n==="|":n.type==="separator",$S={type:"separator"},k5=n=>{const r=i=>({text:i.text,icon:i.icon,enabled:i.enabled,shortcut:i.shortcut});if(Co(n))return n;switch(n.type){case"separator":return $S;case"submenu":return{type:"nestedmenuitem",...r(n),getSubmenuItems:()=>{const l=n.getSubmenuItems();return Co(l)?l:Ke(l,k5)}};default:const i=n;return{type:"menuitem",...r(i),onAction:eo(i.onAction)}}},Rx=(n,r)=>{if(r.length===0)return n;const i=xn(n).filter(l=>!_5(l)).fold(()=>[],l=>[$S]);return n.concat(i).concat(r).concat([$S])},al=(n,r)=>!(i=>i.type==="longpress"||Dt(i,"touches"))(r)&&(r.button!==2||r.target===n.getBody()&&r.pointerType===""),Z2=(n,r)=>al(n,r)?n.selection.getStart(!0):r.target,S5=(n,r,i)=>{const l=fl().deviceType.isTouch,u=Ar(jn.sketch({dom:{tag:"div"},lazySink:r,onEscape:()=>n.focus(),onShow:()=>i.setContextMenuState(!0),onHide:()=>i.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Ve([Qt("dismissContextMenu",[Re(Td(),(b,x)=>{io.close(b),n.focus()})])])})),m=()=>jn.hide(u),p=b=>{if(x5(n)&&b.preventDefault(),((w,_)=>_.ctrlKey&&!x5(w))(n,b)||(w=>v5(w).length===0)(n))return;const x=((w,_)=>{const k=HB(w),T=al(w,_)?"selection":"point";if(kc(k)){const N=Z2(w,_);return O1(ot(N),k)?"node":T}return T})(n,b);(l()?Y1:VB)(n,b,()=>{const w=Z2(n,b),_=n.ui.registry.getAll(),k=v5(n);return((T,N,B)=>{const V=I(N,(U,q)=>mt(T,q.toLowerCase()).map(H=>{const L=H.update(B);if(Co(L)&&kc(ti(L)))return Rx(U,L.split(" "));if(Qa(L)&&L.length>0){const W=Ke(L,k5);return Rx(U,W)}return U}).getOrThunk(()=>U.concat([q])),[]);return V.length>0&&_5(V[V.length-1])&&V.pop(),V})(_.contextMenus,k,w)},i,u,x)};n.on("init",()=>{const b="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(l()?"":" ResizeWindow");n.on(b,m),n.on("longpress contextmenu",p)})},US=Zr([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),W2=n=>r=>r.translate(-n.left,-n.top),j2=n=>r=>r.translate(n.left,n.top),Em=n=>(r,i)=>I(n,(l,u)=>u(l),Xt(r,i)),Dx=(n,r,i)=>n.fold(Em([j2(i),W2(r)]),Em([W2(r)]),Em([])),Kp=(n,r,i)=>n.fold(Em([j2(i)]),Em([]),Em([j2(r)])),E5=(n,r,i)=>n.fold(Em([]),Em([W2(i)]),Em([j2(r),W2(i)])),T5=(n,r,i)=>{const l=n.fold((u,m)=>({position:E.some("absolute"),left:E.some(u+"px"),top:E.some(m+"px")}),(u,m)=>({position:E.some("absolute"),left:E.some(u-i.left+"px"),top:E.some(m-i.top+"px")}),(u,m)=>({position:E.some("fixed"),left:E.some(u+"px"),top:E.some(m+"px")}));return{right:E.none(),bottom:E.none(),...l}},q2=(n,r,i,l)=>{const u=(m,p)=>(b,x)=>{const w=m(r,i,l);return p(b.getOr(w.left),x.getOr(w.top))};return n.fold(u(E5,G2),u(Kp,Tm),u(Dx,Wf))},G2=US.offset,Tm=US.absolute,Wf=US.fixed,ZS=(n,r)=>{const i=js(n,r);return mr(i)?NaN:parseInt(i,10)},UB=(n,r,i,l,u,m)=>{const p=((w,_,k,T)=>((N,B)=>{const V=N.element,U=ZS(V,B.leftAttr),q=ZS(V,B.topAttr);return isNaN(U)||isNaN(q)?E.none():E.some(Xt(U,q))})(w,_).fold(()=>k,N=>Wf(N.left+T.left,N.top+T.top)))(n,r,i,l),b=r.mustSnap?ZB(n,r,p,u,m):WB(n,r,p,u,m),x=Dx(p,u,m);return((w,_,k)=>{const T=w.element;Kt(T,_.leftAttr,k.left+"px"),Kt(T,_.topAttr,k.top+"px")})(n,r,x),b.fold(()=>({coord:Wf(x.left,x.top),extra:E.none()}),w=>({coord:w.output,extra:w.extra}))},O5=(n,r,i,l)=>_r(n,u=>{const m=u.sensor;return((b,x,w,_,k,T)=>{const N=Kp(b,k,T),B=Kp(x,k,T);return Math.abs(N.left-B.left)<=w&&Math.abs(N.top-B.top)<=_})(r,m,u.range.left,u.range.top,i,l)?E.some({output:q2(u.output,r,i,l),extra:u.extra}):E.none()}),ZB=(n,r,i,l,u)=>{const m=r.getSnapPoints(n);return O5(m,i,l,u).orThunk(()=>I(m,(b,x)=>{const w=x.sensor,_=((k,T,N,B,V,U)=>{const q=Kp(k,V,U),H=Kp(T,V,U),L=Math.abs(q.left-H.left),W=Math.abs(q.top-H.top);return Xt(L,W)})(i,w,x.range.left,x.range.top,l,u);return b.deltas.fold(()=>({deltas:E.some(_),snap:E.some(x)}),k=>(_.left+_.top)/2<=(k.left+k.top)/2?{deltas:E.some(_),snap:E.some(x)}:b)},{deltas:E.none(),snap:E.none()}).snap.map(b=>({output:q2(b.output,i,l,u),extra:b.extra})))},WB=(n,r,i,l,u)=>{const m=r.getSnapPoints(n);return O5(m,i,l,u)};var jB=Object.freeze({__proto__:null,snapTo:(n,r,i,l)=>{const u=r.getTarget(n.element);if(r.repositionTarget){const m=Er(n.element),p=cs(m),b=sA(u),x=((_,k,T)=>({coord:q2(_.output,_.output,k,T),extra:_.extra}))(l,p,b),w=T5(x.coord,0,b);Vl(u,w)}}});const WS="data-initial-z-index",K2=(n,r)=>{n.getSystem().addToGui(r),(i=>{Ci(i.element).filter(Ws).each(l=>{vs(l,"z-index").each(u=>{Kt(l,WS,u)}),Ht(l,"z-index",Gn(i.element,"z-index"))})})(r)},qB=n=>{(r=>{Ci(r.element).filter(Ws).each(i=>{qs(i,WS).fold(()=>Mo(i,"z-index"),l=>Ht(i,"z-index",l)),Sn(i,WS)})})(n),n.getSystem().removeFromGui(n)},jS=(n,r,i)=>n.getSystem().build(Qc.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[r]},events:i}));var GB=Ha("snaps",[Ee("getSnapPoints"),ho("onSensor"),Ee("leftAttr"),Ee("topAttr"),fe("lazyViewport",Xn),fe("mustSnap",!1)]);const qS=[fe("useFixed",Ne),Ee("blockerClass"),fe("getTarget",kt),fe("onDrag",Xe),fe("repositionTarget",!0),fe("onDrop",Xe),ms("getBounds",Xn),GB],KB=n=>{return(r=vs(n,"left"),i=vs(n,"top"),l=vs(n,"position"),r.isSome()&&i.isSome()&&l.isSome()?E.some(((u,m,p)=>(p==="fixed"?Wf:G2)(parseInt(u,10),parseInt(m,10)))(r.getOrDie(),i.getOrDie(),l.getOrDie())):E.none()).getOrThunk(()=>{const u=ko(n);return Tm(u.left,u.top)});var r,i,l},A5=(n,r)=>({bounds:n.getBounds(),height:Ue(r.element),width:ha(r.element)}),GS=(n,r,i,l,u)=>{const m=i.update(l,u),p=i.getStartData().getOrThunk(()=>A5(r,n));m.each(b=>{((x,w,_,k)=>{const T=w.getTarget(x.element);if(w.repositionTarget){const N=Er(x.element),B=cs(N),V=sA(T),U=KB(T),q=((L,W,G,Q,re,ge,Te)=>((Oe,Ae,tt,at,ht)=>{const Bt=ht.bounds,Lt=Kp(Ae,tt,at),lo=mi(Lt.left,Bt.x,Bt.x+Bt.width-ht.width),sn=mi(Lt.top,Bt.y,Bt.y+Bt.height-ht.height),zn=Tm(lo,sn);return Ae.fold(()=>{const $t=E5(zn,tt,at);return G2($t.left,$t.top)},ue(zn),()=>{const $t=Dx(zn,tt,at);return Wf($t.left,$t.top)})})(0,W.fold(()=>{const Oe=(Ae=G,tt=ge.left,at=ge.top,Ae.fold((Bt,Lt)=>G2(Bt+tt,Lt+at),(Bt,Lt)=>Tm(Bt+tt,Lt+at),(Bt,Lt)=>Wf(Bt+tt,Lt+at)));var Ae,tt,at;const ht=Dx(Oe,Q,re);return Wf(ht.left,ht.top)},Oe=>{const Ae=UB(L,Oe,G,ge,Q,re);return Ae.extra.each(tt=>{Oe.onSensor(L,tt)}),Ae.coord}),Q,re,Te))(x,w.snaps,U,B,V,k,_),H=T5(q,0,V);Vl(T,H)}w.onDrag(x,T,k)})(n,r,p,b)})},N5=(n,r,i,l)=>{r.each(qB),i.snaps.each(m=>{((p,b)=>{((x,w)=>{const _=x.element;Sn(_,w.leftAttr),Sn(_,w.topAttr)})(p,b)})(n,m)});const u=i.getTarget(n.element);l.reset(),i.onDrop(n,u)},KS=n=>(r,i)=>{const l=u=>{i.setStartData(A5(r,u))};return uo([Re(ju(),u=>{i.getStartData().each(()=>l(u))}),...n(r,i,l)])};var R5=Object.freeze({__proto__:null,getData:n=>E.from(Xt(n.x,n.y)),getDelta:(n,r)=>Xt(r.left-n.left,r.top-n.top)});const YS=(n,r,i)=>[Re(na(),(l,u)=>{if(u.event.raw.button!==0)return;u.stop();const m=()=>N5(l,E.some(x),n,r),p=_T(m,200),b={drop:m,delayDrop:p.schedule,forceDrop:m,move:w=>{p.cancel(),GS(l,n,r,R5,w)}},x=jS(l,n.blockerClass,(w=>uo([Re(na(),w.forceDrop),Re(yb(),w.drop),Re(wg(),(_,k)=>{w.move(k.event)}),Re(Rc(),w.delayDrop)]))(b));i(l),K2(l,x)})],YB=[...qS,wn("dragger",{handlers:KS(YS)})];var D5=Object.freeze({__proto__:null,getData:n=>{const r=n.raw.touches;return r.length===1?(i=>{const l=i[0];return E.some(Xt(l.clientX,l.clientY))})(r):E.none()},getDelta:(n,r)=>Xt(r.left-n.left,r.top-n.top)});const M5=(n,r,i)=>{const l=En(),u=m=>{N5(m,l.get(),n,r),l.clear()};return[Re(Gl(),(m,p)=>{p.stop();const b=()=>u(m),x={drop:b,delayDrop:Xe,forceDrop:b,move:_=>{GS(m,n,r,D5,_)}},w=jS(m,n.blockerClass,(_=>uo([Re(Gl(),_.forceDrop),Re(Kl(),_.drop),Re(Uu(),_.drop),Re($u(),(k,T)=>{_.move(T.event)})]))(x));l.set(w),i(m),K2(m,w)}),Re($u(),(m,p)=>{p.stop(),GS(m,n,r,D5,p.event)}),Re(Kl(),(m,p)=>{p.stop(),u(m)}),Re(Uu(),u)]},XB=YB,JB=[...qS,wn("dragger",{handlers:KS(M5)})],QB=[...qS,wn("dragger",{handlers:KS((n,r,i)=>[...YS(n,r,i),...M5(n,r,i)])})];var B5=Object.freeze({__proto__:null,mouse:XB,touch:JB,mouseOrTouch:QB}),P5=Object.freeze({__proto__:null,init:()=>{let n=E.none(),r=E.none();const i=ue({});return Xs({readState:i,reset:()=>{n=E.none(),r=E.none()},update:(l,u)=>l.getData(u).bind(m=>((p,b)=>{const x=n.map(w=>p.getDelta(w,b));return n=E.some(b),x})(l,m)),getStartData:()=>r,setStartData:l=>{r=E.some(l)}})}});const jf=Vd({branchKey:"mode",branches:B5,name:"dragging",active:{events:(n,r)=>n.dragger.handlers(n,r)},extra:{snap:n=>({sensor:n.sensor,range:n.range,output:n.output,extra:E.from(n.extra)})},state:P5,apis:jB}),Y2=(n,r,i,l,u,m)=>n.fold(()=>jf.snap({sensor:Tm(i-20,l-20),range:Xt(u,m),output:Tm(E.some(i),E.some(l)),extra:{td:r}}),p=>{const b=i-20,x=l-20,w=p.element.dom.getBoundingClientRect();return jf.snap({sensor:Tm(b,x),range:Xt(40,40),output:Tm(E.some(i-w.width/2),E.some(l-w.height/2)),extra:{td:r}})}),I5=(n,r,i)=>({getSnapPoints:n,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(l,u)=>{const m=u.td;((p,b)=>p.exists(x=>Go(x,b)))(r.get(),m)||(r.set(m),i(m))},mustSnap:!0}),XS=n=>Zo(Dr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Ve([jf.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:n}),j0.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),e7=(n,r)=>{const i=Ot([]),l=Ot([]),u=Ot(!1),m=En(),p=En(),b=H=>{const L=Ls(H);return Y2(k.getOpt(r),H,L.x,L.y,L.width,L.height)},x=H=>{const L=Ls(H);return Y2(T.getOpt(r),H,L.right,L.bottom,L.width,L.height)},w=I5(()=>Ke(i.get(),H=>b(H)),m,H=>{p.get().each(L=>{n.dispatch("TableSelectorChange",{start:H,finish:L})})}),_=I5(()=>Ke(l.get(),H=>x(H)),p,H=>{m.get().each(L=>{n.dispatch("TableSelectorChange",{start:L,finish:H})})}),k=XS(w),T=XS(_),N=Ar(k.asSpec()),B=Ar(T.asSpec()),V=(H,L,W,G)=>{const Q=W(L);jf.snapTo(H,Q),((re,ge,Te,Oe)=>{const Ae=ge.dom.getBoundingClientRect();Mo(re.element,"display");const tt=$m(ot(n.getBody())).dom.innerHeight,at=Ae[G]<0,ht=((Bt,Lt)=>Bt[G]>Lt)(Ae,tt);(at||ht)&&Ht(re.element,"display","none")})(H,L)},U=H=>V(N,H,b,"top"),q=H=>V(B,H,x,"bottom");fl().deviceType.isTouch()&&(n.on("TableSelectionChange",H=>{u.get()||(eu(r,N),eu(r,B),u.set(!0)),m.set(H.start),p.set(H.finish),H.otherCells.each(L=>{i.set(L.upOrLeftCells),l.set(L.downOrRightCells),U(H.start),q(H.finish)})}),n.on("ResizeEditor ResizeWindow ScrollContent",()=>{m.get().each(U),p.get().each(q)}),n.on("TableSelectionClear",()=>{u.get()&&(qc(N),qc(B),u.set(!1)),m.clear(),p.clear()}))},t7=(n,r,i)=>{var l;const u=(l=r.delimiter)!==null&&l!==void 0?l:"›";return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Ve([vt.config({mode:"flow",selector:"div[role=button]"}),Mt.config({disabled:i.isDisabled}),tr(),Hn.config({}),Rt.config({}),Qt("elementPathEvents",[cn((m,p)=>{n.shortcuts.add("alt+F11","focus statusbar elementpath",()=>vt.focusIn(m)),n.on("NodeChange",b=>{const x=(_=>{const k=[];let T=_.length;for(;T-- >0;){const B=_[T];if(B.nodeType===1&&(N=B).nodeName!=="BR"&&!N.getAttribute("data-mce-bogus")&&N.getAttribute("data-mce-type")!=="bookmark"){const V=sT(n,B);if(V.isDefaultPrevented()||k.push({name:V.name,element:B}),V.isPropagationStopped())break}}var N;return k})(b.parents),w=x.length>0?I(x,(_,k,T)=>{const N=((B,V,U)=>Dr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":U,"aria-level":U+1}},components:[Nn(B)],action:q=>{n.focus(),n.selection.select(V),n.nodeChanged()},buttonBehaviours:Ve([w1(i.isDisabled),tr()])}))(k.name,k.element,T);return T===0?_.concat([N]):_.concat([{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Nn(` ${u} `)]},N])},[]):[];Rt.set(m,w)})})])]),components:[]}};var qf;(function(n){n[n.None=0]="None",n[n.Both=1]="Both",n[n.Vertical=2]="Vertical"})(qf||(qf={}));const L5=(n,r,i)=>{const l=ot(n.getContainer()),u=((m,p,b,x,w)=>{const _={height:z2(x+p.top,$C(m),UC(m))};return b===qf.Both&&(_.width=z2(w+p.left,VC(m),k0(m))),_})(n,r,i,_e(l),On(l));In(u,(m,p)=>{jo(m)&&Ht(l,p,DS(m))}),(m=>{m.dispatch("ResizeEditor")})(n)},X1=(n,r,i,l)=>{const u=Xt(20*i,20*l);return L5(n,u,r),E.some(!0)},Om=(n,r)=>{const i=()=>{const l=[],u=QC(n),m=XC(n),p=JC(n)||n.hasPlugin("wordcount");return m&&l.push(t7(n,{},r)),u&&l.push((()=>{const b=$E("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Nn(gi.translate(["Press {0} for help",b]))]}})()),p&&l.push((()=>{const b=[];return n.hasPlugin("wordcount")&&b.push(((x,w)=>{const _=(k,T,N)=>Rt.set(k,[Nn(w.translate(["{0} "+N,T[N]]))]);return Dr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Ve([w1(w.isDisabled),tr(),Hn.config({}),Rt.config({}),nt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Qt("wordcount-events",[Sa(k=>{const T=nt.getValue(k),N=T.mode==="words"?"characters":"words";nt.setValue(k,{mode:N,count:T.count}),_(k,T.count,N)}),cn(k=>{x.on("wordCountUpdate",T=>{const{mode:N}=nt.getValue(k);nt.setValue(k,{mode:N,count:T.wordCount}),_(k,T.wordCount,N)})})])]),eventOrder:{[ka()]:["disabling","alloy.base.behaviour","wordcount-events"]}})})(n,r)),JC(n)&&b.push({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v6",rel:"noopener",target:"_blank","aria-label":gi.translate(["Powered by {0}","Tiny"])},innerHtml:`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`.trim()},behaviours:Ve([It.config({})])}]}),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:b}})()),l.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...(()=>{const b="tox-statusbar__text-container--flex-start",x="tox-statusbar__text-container--flex-end";if(u){const w="tox-statusbar__text-container-3-cols";return p||m?p&&!m?[w,x]:[w,b]:[w,"tox-statusbar__text-container--space-around"]}return[p&&!m?x:b]})()]},components:l}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const l=i(),u=((m,p)=>{const b=(w=>{const _=cE(w);return _===!1?qf.None:_==="both"?qf.Both:qf.Vertical})(m);if(b===qf.None)return E.none();const x=b===qf.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return E.some(Ol("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:p.translate("Resize"),"aria-label":p.translate(x)},behaviours:[jf.config({mode:"mouse",repositionTarget:!1,onDrag:(w,_,k)=>L5(m,k,b),blockerClass:"tox-blocker"}),vt.config({mode:"special",onLeft:()=>X1(m,b,-1,0),onRight:()=>X1(m,b,1,0),onUp:()=>X1(m,b,0,-1),onDown:()=>X1(m,b,0,1)}),Hn.config({}),It.config({})]},p.icons))})(n,r);return l.concat(u.toArray())})()}},F5=(n,r)=>r.get().getOrDie(`UI for ${n} has not been rendered`),Mx=(n,r)=>{const i=n.inline,l=i?RB:AB,u=h1(n)?DM:nA,m=(()=>{const Q=En(),re=En(),ge=En();return{dialogUi:Q,popupUi:re,mainUi:ge,getUiMotherships:()=>{const Te=Q.get().map(Ae=>Ae.mothership),Oe=re.get().map(Ae=>Ae.mothership);return Te.fold(()=>Oe.toArray(),Ae=>Oe.fold(()=>[Ae],tt=>Go(Ae.element,tt.element)?[Ae]:[Ae,tt]))},lazyGetInOuterOrDie:(Te,Oe)=>()=>ge.get().bind(Ae=>Oe(Ae.outerContainer)).getOrDie(`Could not find ${Te} element in OuterContainer`)}})(),p=En(),b=En(),x=En(),w=fl().deviceType.isTouch()?["tox-platform-touch"]:[],_=t_(n),k=bp(n),T=Zo({dom:{tag:"div",classes:["tox-anchorbar"]}}),N=Zo({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),B=()=>m.mainUi.get().map(Q=>Q.outerContainer).bind(mn.getHeader),V=m.lazyGetInOuterOrDie("anchor bar",T.getOpt),U=m.lazyGetInOuterOrDie("bottom anchor bar",N.getOpt),q=m.lazyGetInOuterOrDie("toolbar",mn.getToolbar),H=m.lazyGetInOuterOrDie("throbber",mn.getThrobber),L=((Q,re,ge,Te)=>{const Oe=Ot(!1),Ae=($t=>{const ur=Ot(t_($t)?"bottom":"top");return{isPositionedAtTop:()=>ur.get()==="top",getDockingMode:ur.get,setDockingMode:ur.set}})(re),tt={icons:()=>re.ui.registry.getAll().icons,menuItems:()=>re.ui.registry.getAll().menuItems,translate:gi.translate,isDisabled:()=>re.mode.isReadOnly()||!re.ui.isEnabled(),getOption:re.options.get},at=_M(re),ht=($t=>{const ur=rs=>()=>$t.formatter.match(rs),Zt=rs=>()=>{const sr=$t.formatter.get(rs);return sr!==void 0?E.some({tag:sr.length>0&&(sr[0].inline||sr[0].block)||"div",styles:$t.dom.parseStyle($t.formatter.getCssText(rs))}):E.none()},fs=Ot([]),tn=Ot([]),ua=Ot(!1);return $t.on("PreInit",rs=>{const sr=Gk($t),xi=x2($t,sr,ur,Zt);fs.set(xi)}),$t.on("addStyleModifications",rs=>{const sr=x2($t,rs.items,ur,Zt);tn.set(sr),ua.set(rs.replace)}),{getData:()=>{const rs=ua.get()?[]:fs.get(),sr=tn.get();return rs.concat(sr)}}})(re),Bt=($t=>({colorPicker:fM($t),hasCustomColors:gM($t),getColors:Dl($t),getColorCols:px($t)}))(re),Lt=($t=>({isDraggableModal:bc($t)}))(re),lo={shared:{providers:tt,anchors:sd(re,ge,Te,Ae.isPositionedAtTop),header:Ae},urlinput:at,styles:ht,colorinput:Bt,dialog:Lt,isContextMenuOpen:()=>Oe.get(),setContextMenuState:$t=>Oe.set($t)},sn={...lo,shared:{...lo.shared,interpreter:$t=>Vk($t,{},sn),getSink:Q.popup}},zn={...lo,shared:{...lo.shared,interpreter:$t=>Vk($t,{},zn),getSink:Q.dialog}};return{popup:sn,dialog:zn}})({popup:()=>mo.fromOption(m.popupUi.get().map(Q=>Q.sink),"(popup) UI has not been rendered"),dialog:()=>mo.fromOption(m.dialogUi.get().map(Q=>Q.sink),"UI has not been rendered")},n,V,U),W=()=>{const Q=(()=>{const lo={attributes:{[_s]:_?jr.BottomToTop:jr.TopToBottom}},sn=mn.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:L.popup,onEscape:()=>{n.focus()}}),zn=mn.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:L.popup.shared.getSink,providers:L.popup.shared.providers,onEscape:()=>{n.focus()},onToolbarToggled:xi=>{((eb,tb)=>{eb.dispatch("ToggleToolbarDrawer",{state:tb})})(n,xi)},type:k,lazyToolbar:q,lazyHeader:()=>B().getOrDie("Could not find header element"),...lo}),$t=mn.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:L.popup.shared.providers,onEscape:()=>{n.focus()},type:k}),ur=p1(n),Zt=g1(n),fs=mu(n),tn=mE(n),ua=mn.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),rs=ur||Zt||fs,sr=tn?[ua,sn]:[sn];return mn.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(rs?[]:["tox-editor-header--empty"]),...lo},components:hn([fs?sr:[],ur?[$t]:Zt?[zn]:[],xp(n)?[]:[T.asSpec()]]),sticky:h1(n),editor:n,sharedBackstage:L.popup.shared})})(),re={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[mn.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),mn.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]},ge=mn.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:L.popup}),Te=mn.parts.viewWrapper({backstage:L.popup}),Oe=lE(n)&&!i?E.some(Om(n,L.popup.shared.providers)):E.none(),Ae=hn([_?[]:[Q],i?[]:[re],_?[Q]:[]]),tt=mn.parts.editorContainer({components:hn([Ae,i?[]:[N.asSpec(),...Oe.toArray()]])}),at=vp(n),ht={role:"application",...gi.isRtl()?{dir:"rtl"}:{},...at?{"aria-hidden":"true"}:{}},Bt=Ar(mn.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(i?["tox-tinymce-inline"]:[]).concat(_?["tox-tinymce--toolbar-bottom"]:[]).concat(w),styles:{visibility:"hidden",...at?{opacity:"0",border:"0"}:{}},attributes:ht},components:[tt,...i?[]:[Te],ge],behaviours:Ve([tr(),Mt.config({disableClass:"tox-tinymce--disabled"}),vt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Lt=Y_(Bt);return p.set(Lt),{mothership:Lt,outerContainer:Bt}},G=Q=>{const re=DS((Te=>(Ae=>{const tt=HC(Ae),at=$C(Ae),ht=UC(Ae);return RS(tt).map(Bt=>z2(Bt,at,ht))})(Te).getOr(HC(Te)))(n)),ge=DS((Te=>l5(Te).getOr(zC(Te)))(n));return n.inline||(Um("div","width",ge)&&Ht(Q.element,"width",ge),Um("div","height",re)?Ht(Q.element,"height",re):Ht(Q.element,"height","400px")),re};return{popups:{backstage:L.popup,getMothership:()=>F5("popups",x)},dialogs:{backstage:L.dialog,getMothership:()=>F5("dialogs",b)},renderUI:()=>{const Q=W(),re=(()=>{const Te=T0(n),Oe=Go(ni(),Te)&&Gn(Te,"display")==="grid",Ae={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(w),attributes:{...gi.isRtl()?{dir:"rtl"}:{}}},behaviours:Ve([Rr.config({useFixed:()=>u.isDocked(B)})])},tt={dom:{styles:{width:document.body.clientWidth+"px"}},events:uo([Re(Ed(),Bt=>{Ht(Bt.element,"width",document.body.clientWidth+"px")})])},at=Ar(X(Ae,Oe?tt:{})),ht=Y_(at);return b.set(ht),{sink:at,mothership:ht}})(),ge=Df(n)?(()=>{const Te={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(w),attributes:{...gi.isRtl()?{dir:"rtl"}:{}}},behaviours:Ve([Rr.config({useFixed:()=>u.isDocked(B),getBounds:()=>r.getPopupSinkBounds()})])},Oe=Ar(Te),Ae=Y_(Oe);return x.set(Ae),{sink:Oe,mothership:Ae}})():(Te=>(x.set(Te.mothership),Te))(re);return m.dialogUi.set(re),m.popupUi.set(ge),m.mainUi.set(Q),(Te=>{const{mainUi:Oe,popupUi:Ae,uiMotherships:tt}=Te;Ho(eE(n),(Zt,fs)=>{n.ui.registry.addGroupToolbarButton(fs,Zt)});const{buttons:at,menuItems:ht,contextToolbars:Bt,sidebars:Lt,views:lo}=n.ui.registry.getAll(),sn=e_(n),zn={menuItems:ht,menus:pE(n),menubar:nE(n),toolbar:sn.getOrThunk(()=>ey(n)),allowToolbarGroups:k===Al.floating,buttons:at,sidebar:Lt,views:lo};var $t;$t=Oe.outerContainer,n.addShortcut("alt+F9","focus menubar",()=>{mn.focusMenubar($t)}),n.addShortcut("alt+F10","focus toolbar",()=>{mn.focusToolbar($t)}),n.addCommand("ToggleToolbarDrawer",(Zt,fs)=>{fs!=null&&fs.skipFocus?mn.toggleToolbarDrawerWithoutFocusing($t):mn.toggleToolbarDrawer($t)}),n.addQueryStateHandler("ToggleToolbarDrawer",()=>mn.isToolbarDrawerToggled($t)),((Zt,fs,tn)=>{const ua=(fn,eg)=>{xt([fs,...tn],ld=>{ld.broadcastEvent(fn,eg)})},rs=(fn,eg)=>{xt([fs,...tn],ld=>{ld.broadcastOn([fn],eg)})},sr=fn=>rs(Oa(),{target:fn.target}),xi=ri(),eb=yr(xi,"touchstart",sr),tb=yr(xi,"touchmove",fn=>ua(kb(),fn)),Nm=yr(xi,"touchend",fn=>ua(xl(),fn)),Rm=yr(xi,"mousedown",sr),Ux=yr(xi,"mouseup",fn=>{fn.raw.button===0&&rs(Ce(),{target:fn.target})}),Kf=fn=>rs(Oa(),{target:ot(fn.target)}),Su=fn=>{fn.button===0&&rs(Ce(),{target:ot(fn.target)})},Yf=()=>{xt(Zt.editorManager.get(),fn=>{Zt!==fn&&fn.dispatch("DismissPopups",{relatedTarget:Zt})})},Xf=fn=>ua(ju(),Nh(fn)),Jf=fn=>{rs(xf(),{}),ua(Ed(),Nh(fn))},cw=bs(ot(Zt.getElement())),Zx=Wg(cw,"scroll",fn=>{requestAnimationFrame(()=>{if(Zt.getContainer()!=null){const eg=Rp(Zt,fs.element).map(ld=>[ld.element,...ld.others]).getOr([]);Yr(eg,ld=>Go(ld,fn.target))&&(Zt.dispatch("ElementScroll",{target:fn.target.dom}),ua(Jn(),fn))}})}),Qf=()=>rs(xf(),{}),Dm=fn=>{fn.state&&rs(Oa(),{target:ot(Zt.getContainer())})},Eu=fn=>{rs(Oa(),{target:ot(fn.relatedTarget.getContainer())})};Zt.on("PostRender",()=>{Zt.on("click",Kf),Zt.on("tap",Kf),Zt.on("mouseup",Su),Zt.on("mousedown",Yf),Zt.on("ScrollWindow",Xf),Zt.on("ResizeWindow",Jf),Zt.on("ResizeEditor",Qf),Zt.on("AfterProgressState",Dm),Zt.on("DismissPopups",Eu)}),Zt.on("remove",()=>{Zt.off("click",Kf),Zt.off("tap",Kf),Zt.off("mouseup",Su),Zt.off("mousedown",Yf),Zt.off("ScrollWindow",Xf),Zt.off("ResizeWindow",Jf),Zt.off("ResizeEditor",Qf),Zt.off("AfterProgressState",Dm),Zt.off("DismissPopups",Eu),Rm.unbind(),eb.unbind(),tb.unbind(),Nm.unbind(),Ux.unbind(),Zx.unbind()}),Zt.on("detach",()=>{xt([fs,...tn],ep),xt([fs,...tn],fn=>fn.destroy())})})(n,Oe.mothership,tt),u.setup(n,L.popup.shared,B),h5(n,L.popup),S5(n,L.popup.shared.getSink,L.popup),(Zt=>{const{sidebars:fs}=Zt.ui.registry.getAll();xt(Ao(fs),tn=>{const ua=fs[tn],rs=()=>Lr(E.from(Zt.queryCommandValue("ToggleSidebar")),tn);Zt.ui.registry.addToggleButton(tn,{icon:ua.icon,tooltip:ua.tooltip,onAction:sr=>{Zt.execCommand("ToggleSidebar",!1,tn),sr.setActive(rs())},onSetup:sr=>{sr.setActive(rs());const xi=()=>sr.setActive(rs());return Zt.on("ToggleSidebar",xi),()=>{Zt.off("ToggleSidebar",xi)}}})})})(n),UM(n,H,L.popup.shared),MB(n,Bt,Ae.sink,{backstage:L.popup}),e7(n,Ae.sink);const ur={targetNode:n.getElement(),height:G(Oe.outerContainer)};return l.render(n,Te,zn,L.popup,ur)})({popupUi:ge,dialogUi:re,mainUi:Q,uiMotherships:m.getUiMotherships()})}}},o7=ue([Ee("lazySink"),zo("dragBlockClass"),ms("getBounds",Xn),fe("useTabstopAt",Pt),fe("firstTabstop",0),fe("eventOrder",{}),zs("modalBehaviours",[vt]),aa("onExecute"),Fb("onEscape")]),Bx={sketch:kt},n7=ue([et({name:"draghandle",overrides:(n,r)=>({behaviours:Ve([jf.config({mode:"mouse",getTarget:i=>Ni(i,'[role="dialog"]').getOr(i),blockerClass:n.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(r,null,2)).message),getBounds:n.getDragBounds})])})}),He({schema:[Ee("dom")],name:"title"}),He({factory:Bx,schema:[Ee("dom")],name:"close"}),He({factory:Bx,schema:[Ee("dom")],name:"body"}),et({factory:Bx,schema:[Ee("dom")],name:"footer"}),Ze({factory:{sketch:(n,r)=>({...n,dom:r.dom,components:r.components})},schema:[fe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),fe("components",[])],name:"blocker"})]),nr=la({name:"ModalDialog",configFields:o7(),partFields:n7(),factory:(n,r,i,l)=>{const u=En(),m=lt("modal-events"),p={...n.eventOrder,[Le()]:[m].concat(n.eventOrder["alloy.system.attached"]||[])};return{uid:n.uid,dom:n.dom,components:r,apis:{show:b=>{u.set(b);const x=n.lazySink(b).getOrDie(),w=l.blocker(),_=x.getSystem().build({...w,components:w.components.concat([Jo(b)]),behaviours:Ve([It.config({}),Qt("dialog-blocker-events",[Ku(Dc(),()=>{rd.isBlocked(b)||vt.focusIn(b)})])])});eu(x,_),vt.focusIn(b)},hide:b=>{u.clear(),Ci(b.element).each(x=>{b.getSystem().getByDom(x).each(w=>{qc(w)})})},getBody:b=>Vs(b,n,"body"),getFooter:b=>Fo(b,n,"footer"),setIdle:b=>{rd.unblock(b)},setBusy:(b,x)=>{rd.block(b,x)}},eventOrder:p,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Qs(n.modalBehaviours,[Rt.config({}),vt.config({mode:"cyclic",onEnter:n.onExecute,onEscape:n.onEscape,useTabstopAt:n.useTabstopAt,firstTabstop:n.firstTabstop}),rd.config({getRoot:u.get}),Qt(m,[cn(b=>{((x,w)=>{const _=qs(x,"id").fold(()=>{const k=lt("dialog-label");return Kt(w,"id",k),k},kt);Kt(x,"aria-labelledby",_)})(b.element,Vs(b,n,"title").element)})])])}},apis:{show:(n,r)=>{n.show(r)},hide:(n,r)=>{n.hide(r)},getBody:(n,r)=>n.getBody(r),getFooter:(n,r)=>n.getFooter(r),setBusy:(n,r,i)=>{n.setBusy(r,i)},setIdle:(n,r)=>{n.setIdle(r)}}}),s7=St([Rs,m_].concat(kp)),H5=Cd,JS=[x_("button"),nl,As("align","end",["start","end"]),v1,dc,uh("buttonType",["primary","secondary"])],X2=[...JS,fu],Px=[wa("type",["submit","cancel","custom"]),...X2],QS=[wa("type",["menu"]),Mf,iy,nl,gr("items",s7),...JS],r7=[...JS,wa("type",["togglebutton"]),us("tooltip"),nl,Mf,Vn("active",!1)],il=ya("type",{submit:Px,cancel:Px,custom:Px,menu:QS,togglebutton:r7}),a7=[Rs,fu,wa("level",["info","warn","error","success"]),OE,fe("url","")],i7=St(a7),z5=[Rs,fu,dc,x_("button"),nl,RE,uh("buttonType",["primary","secondary","toolbar"]),v1],V5=St(z5),J1=[Rs,m_],ad=J1.concat([h_]),l7=J1.concat([f_,dc]),c7=St(l7),d7=Cd,u7=ad.concat([b_("auto")]),m7=St(u7),$5=ch([ay,fu,OE]),f7=ad.concat([Nc("storageKey","default")]),g7=St(f7),p7=Os,U5=St(ad),e4=Os,h7=J1.concat([Nc("tag","textarea"),us("scriptId"),us("scriptUrl"),Ca("settings",void 0,bb)]),t4=J1.concat([Nc("tag","textarea"),oa("init")]),Q1=jl(n=>Bn("customeditor.old",ea(t4),n).orThunk(()=>Bn("customeditor.new",ea(h7),n))),Z5=Os,W5=St(ad),j5=va(gl),b7=n=>[Rs,xb("columns"),n],x7=[Rs,us("html"),As("presets","presentation",["presentation","document"])],J2=St(x7),v7=ad.concat([Vn("border",!1),Vn("sandboxed",!0),Vn("streamContent",!1),Vn("transparent",!0)]),y7=St(v7),q5=Os,G5=St(J1.concat([pr("height")])),o4=St([us("url"),kd("zoom"),kd("cachedWidth"),kd("cachedHeight")]),K5=ad.concat([pr("inputMode"),pr("placeholder"),Vn("maximized",!1),dc]),Xa=St(K5),Y5=Os,w7=n=>[Rs,f_,n,As("align","start",["start","center","end"])],C7=[fu,ay],X5=[fu,gr("items",cv(0,()=>J5))],J5=Wl([St(C7),St(X5)]),_7=ad.concat([gr("items",J5),dc]),k7=St(_7),Q5=Os,ku=ad.concat([bg("items",[fu,ay]),xg("size",1),dc]),n4=St(ku),eN=Os,Q2=ad.concat([Vn("constrain",!0),dc]),s4=St(Q2),tN=St([us("width"),us("height")]),S7=J1.concat([f_,xg("min",0),xg("max",0)]),E7=St(S7),T7=Xm,O7=[Rs,gr("header",Os),gr("cells",va(Os))],A7=St(O7),N7=ad.concat([pr("placeholder"),Vn("maximized",!1),dc]),oN=St(N7),R7=Os,id=[wa("type",["directory","leaf"]),g_,us("id"),ii("menu",dS)],Ix=St(id),D7=id.concat([gr("children",cv(0,()=>_d("type",{directory:nN,leaf:Ix})))]),nN=St(D7),sN=_d("type",{directory:nN,leaf:Ix}),rN=[Rs,gr("items",sN),ql("onLeafAction"),ql("onToggleExpand"),Pn("defaultExpandedIds",[],Os),pr("defaultSelectedId")],r4=St(rN),ew=ad.concat([As("filetype","file",["image","media","file"]),dc,pr("picker_text")]),Lx=St(ew),Fx=St([ay,cy]),tw=n=>ws("items","items",{tag:"required",process:{}},va(jl(r=>Bn(`Checking item of ${n}`,ow,r).fold(i=>mo.error(zu(i)),i=>mo.value(i))))),ow=Ei(()=>{return _d("type",{alertbanner:i7,bar:St((n=tw("bar"),[Rs,n])),button:V5,checkbox:c7,colorinput:g7,colorpicker:U5,dropzone:W5,grid:St(b7(tw("grid"))),iframe:y7,input:Xa,listbox:k7,selectbox:n4,sizeinput:s4,slider:E7,textarea:oN,urlinput:Lx,customeditor:Q1,htmlpanel:J2,imagepreview:G5,collection:m7,label:St(w7(tw("label"))),table:A7,tree:r4,panel:a4});var n}),aN=[Rs,fe("classes",[]),gr("items",ow)],a4=St(aN),M7=[x_("tab"),g_,gr("items",ow)],B7=[Rs,bg("tabs",M7)],P7=St(B7),I7=X2,L7=il,iN=St([us("title"),La("body",_d("type",{panel:a4,tabpanel:P7})),Nc("size","normal"),Pn("buttons",[],L7),fe("initialData",{}),ms("onAction",Xe),ms("onChange",Xe),ms("onSubmit",Xe),ms("onClose",Xe),ms("onCancel",Xe),ms("onTabChange",Xe)]),lN=St([wa("type",["cancel","custom"]),...I7]),F7=St([us("title"),us("url"),kd("height"),kd("width"),Ur("buttons",lN),ms("onAction",Xe),ms("onCancel",Xe),ms("onClose",Xe),ms("onMessage",Xe)]),nw=n=>Pr(n)?[n].concat(qn(Ln(n),nw)):Qa(n)?qn(n,nw):[],H7=n=>Co(n.type)&&Co(n.name),cN={checkbox:d7,colorinput:p7,colorpicker:e4,dropzone:j5,input:Y5,iframe:q5,imagepreview:o4,selectbox:eN,sizeinput:tN,slider:T7,listbox:Q5,size:tN,textarea:R7,urlinput:Fx,customeditor:Z5,collection:$5,togglemenuitem:H5},Hx=n=>{const r=(l=>Jt(nw(l),H7))(n),i=qn(r,l=>(u=>E.from(cN[u.type]))(l).fold(()=>[],u=>[La(l.name,u)]));return St(i)},dN=n=>{var r;return{internalDialog:Xi(Bn("dialog",iN,n)),dataValidator:Hx(n),initialData:(r=n.initialData)!==null&&r!==void 0?r:{}}},Gf={open:(n,r)=>{const i=dN(r);return n(i.internalDialog,i.initialData,i.dataValidator)},openUrl:(n,r)=>n(Xi(Bn("dialog",F7,r))),redial:n=>dN(n)};var z7=Object.freeze({__proto__:null,events:(n,r)=>{const i=(l,u)=>{n.updateState.each(m=>{const p=m(l,u);r.set(p)}),n.renderComponents.each(m=>{const p=m(u,r.get());(n.reuseDom?r1:uC)(l,p)})};return uo([Re(Va(),(l,u)=>{const m=u;if(!m.universal){const p=n.channel;bo(m.channels,p)&&i(l,m.data)}}),cn((l,u)=>{n.initialData.each(m=>{i(l,m)})})])}}),V7=Object.freeze({__proto__:null,getState:(n,r,i)=>i}),$7=[Ee("channel"),zo("renderComponents"),zo("updateState"),zo("initialData"),Vn("reuseDom",!0)];const Wi=Hs({fields:$7,name:"reflecting",active:z7,apis:V7,state:Object.freeze({__proto__:null,init:()=>{const n=Ot(E.none());return{readState:()=>n.get().getOr("none"),get:n.get,set:n.set,clear:()=>n.set(E.none())}}})}),i4=n=>{const r=[],i={};return In(n,(l,u)=>{l.fold(()=>{r.push(u)},m=>{i[u]=m})}),r.length>0?mo.error(r):mo.value(i)},U7=(n,r,i)=>{const l=Zo(P1.sketch(m=>({dom:{tag:"div",classes:["tox-form"].concat(n.classes)},components:Ke(n.items,p=>UO(m,p,r,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[l.asSpec()]}],behaviours:Ve([vt.config({mode:"acyclic",useTabstopAt:yi(Hp)}),(u=l,wo.config({find:u.getOpt})),G6(l,{postprocess:m=>i4(m).fold(p=>(console.error(p),{}),kt)}),Qt("dialog-body-panel",[Re(Dc(),(m,p)=>{m.getSystem().broadcastOn([Jy],{newFocus:E.some(p.event.target)})})])])};var u},uN=Fi({name:"TabButton",configFields:[fe("uid",void 0),Ee("value"),ws("dom","dom",gb(()=>({attributes:{role:"tab",id:lt("aria"),"aria-selected":"false"}})),Mn()),zo("action"),fe("domModification",{}),zs("tabButtonBehaviours",[It,vt,nt]),Ee("view")],factory:(n,r)=>({uid:n.uid,dom:n.dom,components:n.components,events:C0(n.action),behaviours:Qs(n.tabButtonBehaviours,[It.config({}),vt.config({mode:"execution",useSpace:!0,useEnter:!0}),nt.config({store:{mode:"memory",initialValue:n.value}})]),domModification:n.domModification})}),l4=ue([Ee("tabs"),Ee("dom"),fe("clickToDismiss",!1),zs("tabbarBehaviours",[Oo,vt]),tc(["tabClass","selectedClass"])]),Am=At({factory:uN,name:"tabs",unit:"tab",overrides:n=>{const r=(l,u)=>{Oo.dehighlight(l,u),ut(l,Ua(),{tabbar:l,button:u})},i=(l,u)=>{Oo.highlight(l,u),ut(l,ef(),{tabbar:l,button:u})};return{action:l=>{const u=l.getSystem().getByUid(n.uid).getOrDie(),m=Oo.isHighlighted(u,l);(m&&n.clickToDismiss?r:m?Xe:i)(u,l)},domModification:{classes:[n.markers.tabClass]}}}}),c4=ue([Am]),d4=la({name:"Tabbar",configFields:l4(),partFields:c4(),factory:(n,r,i,l)=>({uid:n.uid,dom:n.dom,components:r,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Qs(n.tabbarBehaviours,[Oo.config({highlightClass:n.markers.selectedClass,itemClass:n.markers.tabClass,onHighlight:(u,m)=>{Kt(m.element,"aria-selected","true")},onDehighlight:(u,m)=>{Kt(m.element,"aria-selected","false")}}),vt.config({mode:"flow",getInitial:u=>Oo.getHighlighted(u).map(m=>m.element),selector:"."+n.markers.tabClass,executeOnMove:!0})])})}),mN=Fi({name:"Tabview",configFields:[zs("tabviewBehaviours",[Rt])],factory:(n,r)=>({uid:n.uid,dom:n.dom,behaviours:Qs(n.tabviewBehaviours,[Rt.config({})]),domModification:{attributes:{role:"tabpanel"}}})}),u4=ue([fe("selectFirst",!0),ho("onChangeTab"),ho("onDismissTab"),fe("tabs",[]),zs("tabSectionBehaviours",[])]),fN=He({factory:d4,schema:[Ee("dom"),Fa("markers",[Ee("tabClass"),Ee("selectedClass")])],name:"tabbar",defaults:n=>({tabs:n.tabs})}),sw=He({factory:mN,name:"tabview"}),gN=ue([fN,sw]),Yp=la({name:"TabSection",configFields:u4(),partFields:gN(),factory:(n,r,i,l)=>{const u=(m,p)=>{Fo(m,n,"tabbar").each(b=>{p(b).each(Od)})};return{uid:n.uid,dom:n.dom,components:r,behaviours:wf(n.tabSectionBehaviours),events:uo(hn([n.selectFirst?[cn((m,p)=>{u(m,Oo.getFirst)})]:[],[Re(ef(),(m,p)=>{(b=>{const x=nt.getValue(b);Fo(b,n,"tabview").each(w=>{qo(n.tabs,_=>_.value===x).each(_=>{const k=_.view();qs(b.element,"id").each(T=>{Kt(w.element,"aria-labelledby",T)}),Rt.set(w,k),n.onChangeTab(w,b,k)})})})(p.event.button)}),Re(Ua(),(m,p)=>{const b=p.event.button;n.onDismissTab(m,b)})]])),apis:{getViewItems:m=>Fo(m,n,"tabview").map(p=>Rt.contents(p)).getOr([]),showTab:(m,p)=>{u(m,b=>{const x=Oo.getCandidates(b);return qo(x,w=>nt.getValue(w)===p).filter(w=>!Oo.isHighlighted(b,w))})}}}},apis:{getViewItems:(n,r)=>n.getViewItems(r),showTab:(n,r,i)=>{n.showTab(r,i)}}}),pN=(n,r)=>{Ht(n,"height",r+"px"),Ht(n,"flex-basis",r+"px")},rw=(n,r,i)=>{Ni(n,'[role="dialog"]').each(l=>{Zn(l,'[role="tablist"]').each(u=>{i.get().map(m=>(Ht(r,"height","0"),Ht(r,"flex-basis","0"),Math.min(m,((p,b,x)=>{const w=ig(p).dom,_=Ni(p,".tox-dialog-wrap").getOr(p);let k;k=Gn(_,"position")==="fixed"?Math.max(w.clientHeight,window.innerHeight):Math.max(w.offsetHeight,w.scrollHeight);const T=_e(b),N=b.dom.offsetLeft>=x.dom.offsetLeft+On(x)?Math.max(_e(x),T):T,B=parseInt(Gn(p,"margin-top"),10)||0,V=parseInt(Gn(p,"margin-bottom"),10)||0;return k-(_e(p)+B+V-N)})(l,r,u)))).each(m=>{pN(r,m)})})})},m4=n=>Zn(n,'[role="tabpanel"]'),hN="send-data-to-section",bN="send-data-to-view",xN=(n,r,i)=>{const l=Ot({}),u=w=>{const _=nt.getValue(w),k=i4(_).getOr({}),T=l.get(),N=X(T,k);l.set(N)},m=w=>{const _=l.get();nt.setValue(w,_)},p=Ot(null),b=Ke(n.tabs,w=>({value:w.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Nn(i.shared.providers.translate(w.title))],view:()=>[P1.sketch(_=>({dom:{tag:"div",classes:["tox-form"]},components:Ke(w.items,k=>UO(_,k,r,i)),formBehaviours:Ve([vt.config({mode:"acyclic",useTabstopAt:yi(Hp)}),Qt("TabView.form.events",[cn(m),Xl(u)]),Ea.config({channels:en([{key:hN,value:{onReceive:u}},{key:bN,value:{onReceive:m}}])})])}))]})),x=(w=>{const _=En();return{extraEvents:[cn(T=>{const N=T.element;m4(N).each(B=>{Ht(B,"visibility","hidden"),T.getSystem().getByDom(B).toOptional().each(V=>{const U=((H,L,W)=>Ke(H,(G,Q)=>{Rt.set(W,H[Q].view());const re=L.dom.getBoundingClientRect();return Rt.set(W,[]),re.height}))(w,B,V);(H=>Et(Fm(H,(L,W)=>L>W?-1:L<W?1:0)))(U).fold(_.clear,_.set)}),rw(N,B,_),Mo(B,"visibility"),((V,U)=>{Et(V).each(q=>Yp.showTab(U,q.value))})(w,T),requestAnimationFrame(()=>{rw(N,B,_)})})}),Re(Ed(),T=>{const N=T.element;m4(N).each(B=>{rw(N,B,_)})}),Re(W0,(T,N)=>{const B=T.element;m4(B).each(V=>{const U=Mi(bs(V));Ht(V,"visibility","hidden");const q=vs(V,"height").map(L=>parseInt(L,10));Mo(V,"height"),Mo(V,"flex-basis");const H=V.dom.getBoundingClientRect().height;q.forall(L=>H>L)?(_.set(H),rw(B,V,_)):q.each(L=>{pN(V,L)}),Mo(V,"visibility"),U.each(Ga)})})],selectFirst:!1}})(b);return Yp.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(w,_,k)=>{const T=nt.getValue(_);ut(w,AT,{name:T,oldName:p.get()}),p.set(T)},tabs:b,components:[Yp.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[d4.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Ve([Hn.config({})])}),Yp.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:x.selectFirst,tabSectionBehaviours:Ve([Qt("tabpanel",x.extraEvents),vt.config({mode:"acyclic"}),wo.config({find:w=>Et(Yp.getViewItems(w))}),ym(E.none(),w=>(w.getSystem().broadcastOn([hN],{}),l.get()),(w,_)=>{l.set(_),w.getSystem().broadcastOn([bN],{})})])})},f4=(n,r,i,l,u)=>({dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...i.map(m=>({id:m})).getOr({}),...u?{"aria-live":"polite"}:{}}},components:[],behaviours:Ve([xk(0),Wi.config({channel:`${cO}-${r}`,updateState:(m,p)=>E.some({isTabPanel:()=>p.body.type==="tabpanel"}),renderComponents:m=>{const p=m.body;return p.type==="tabpanel"?[xN(p,m.initialData,l)]:[U7(p,m.initialData,l)]},initialData:n})])}),Z7=hp.deviceType.isTouch(),vN=(n,r)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[n,r]}),yN=(n,r)=>nr.parts.close(Dr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":r.translate("Close")}},action:n,buttonBehaviours:Ve([Hn.config({})])})),zx=()=>nr.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),wN=(n,r)=>nr.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:cm(`<p>${G3(r.translate(n))}</p>`)}]}]}),CN=n=>nr.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:n}),g4=(n,r)=>[Qc.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:n}),Qc.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:r})],aw=n=>{const r="tox-dialog",i=r+"-wrap",l=i+"__backdrop",u=r+"__disable-scroll";return nr.sketch({lazySink:n.lazySink,onEscape:m=>(n.onEscape(m),E.some(!0)),useTabstopAt:m=>!Hp(m),firstTabstop:n.firstTabstop,dom:{tag:"div",classes:[r].concat(n.extraClasses),styles:{position:"relative",...n.extraStyles}},components:[n.header,n.body,...n.footer.toArray()],parts:{blocker:{dom:cm(`<div class="${i}"></div>`),components:[{dom:{tag:"div",classes:Z7?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:i,modalBehaviours:Ve([It.config({}),Qt("dialog-events",n.dialogEvents.concat([Ku(Dc(),(m,p)=>{rd.isBlocked(m)||vt.focusIn(m)}),Re(Bc(),(m,p)=>{m.getSystem().broadcastOn([Jy],{newFocus:p.event.newFocus})})])),Qt("scroll-lock",[cn(()=>{$n(ni(),u)}),Xl(()=>{Un(ni(),u)})]),...n.extraBehaviours]),eventOrder:{[ka()]:["dialog-events"],[Le()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Qm()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...n.eventOrder}})},_N=n=>Dr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close"),title:n.translate("Close")}},buttonBehaviours:Ve([Hn.config({})]),components:[Ol("close",{tag:"span",classes:["tox-icon"]},n.icons)],action:r=>{xo(r,bm)}}),kN=(n,r,i,l)=>({dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...i.map(u=>({id:u})).getOr({})}},components:[],behaviours:Ve([Wi.config({channel:`${lO}-${r}`,initialData:n,renderComponents:u=>[Nn(l.translate(u.title))]})])}),iw=()=>({dom:cm('<div class="tox-dialog__draghandle"></div>')}),SN=(n,r,i)=>((l,u,m)=>{const p=nr.parts.title(kN(l,u,E.none(),m)),b=nr.parts.draghandle(iw()),x=nr.parts.close(_N(m)),w=[p].concat(l.draggable?[b]:[]).concat([x]);return Qc.sketch({dom:cm('<div class="tox-dialog__header"></div>'),components:w})})({title:i.shared.providers.translate(n),draggable:i.dialog.isDraggableModal()},r,i.shared.providers),p4=(n,r,i,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":i.translate(n)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:r,components:[{dom:cm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),EN=(n,r,i)=>({onClose:()=>i.closeWindow(),onBlock:l=>{const u=Zn(n().element,".tox-dialog__header").map(m=>_e(m));nr.setBusy(n(),(m,p)=>p4(l.message,p,r,u))},onUnblock:()=>{nr.setIdle(n())}}),TN="tox-dialog--fullscreen",h4="tox-dialog--width-lg",lw="tox-dialog--width-md",Vx=n=>{switch(n){case"large":return E.some(h4);case"medium":return E.some(lw);default:return E.none()}},ON=(n,r)=>{const i=ot(r.element.dom);ra(i,TN)||(Ai(i,[h4,lw]),Vx(n).each(l=>$n(i,l)))},AN=(n,r)=>{const i=ot(n.element.dom),l=vl(i),u=qo(l,m=>m===h4||m===lw).or(Vx(r));((m,p)=>{xt(p,b=>{((x,w)=>{Ql(x)?x.dom.classList.toggle(w):((_,k)=>bo(Ab(_),k)?Nb(_,k):ui(_,k))(x,w),Rb(x)})(m,b)})})(i,[TN,...u.toArray()])},NN=(n,r,i)=>Ar(aw({...n,firstTabstop:1,lazySink:i.shared.getSink,extraBehaviours:[Gy({}),...n.extraBehaviours],onEscape:l=>{xo(l,bm)},dialogEvents:r,eventOrder:{[Va()]:[Wi.name(),Ea.name()],[Le()]:["scroll-lock",Wi.name(),"messages","dialog-events","alloy.base.behaviour"],[Qm()]:["alloy.base.behaviour","dialog-events","messages",Wi.name(),"scroll-lock"]}})),b4=(n,r={})=>Ke(n,i=>i.type==="menu"?(l=>{const u=Ke(l.items,m=>{const p=mt(r,m.name).getOr(Ot(!1));return{...m,storage:p}});return{...l,items:u}})(i):i),x4=n=>I(n,(r,i)=>i.type==="menu"?I(i.items,(l,u)=>(l[u.name]=u.storage,l),r):r,{}),RN=(n,r)=>[Eb(Dc(),yu),n(A1,(i,l,u,m)=>{Mi(bs(m.element)).fold(Xe,Wb),r.onClose(),l.onClose()}),n(bm,(i,l,u,m)=>{l.onCancel(i),xo(m,A1)}),Re(J_,(i,l)=>r.onUnblock()),Re(X_,(i,l)=>r.onBlock(l.event))],v4=(n,r,i)=>{const l=(m,p)=>Re(m,(b,x)=>{u(b,(w,_)=>{p(n(),w,x.event,b)})}),u=(m,p)=>{Wi.getState(m).get().each(b=>{p(b.internalDialog,m)})};return[...RN(l,r),l(Pp,(m,p)=>p.onSubmit(m)),l(pi,(m,p,b)=>{p.onChange(m,{name:b.name})}),l(bu,(m,p,b,x)=>{const w=()=>x.getSystem().isConnected()?vt.focusIn(x):void 0,_=N=>zl(N,"disabled")||qs(N,"aria-disabled").exists(B=>B==="true"),k=bs(x.element),T=Mi(k);p.onAction(m,{name:b.name,value:b.value}),Mi(k).fold(w,N=>{_(N)||T.exists(B=>Es(N,B)&&_(B))?w():i().toOptional().filter(B=>!Es(B.element,N)).each(w)})}),l(AT,(m,p,b)=>{p.onTabChange(m,{newTabName:b.name,oldTabName:b.oldName})}),Xl(m=>{const p=n();nt.setValue(m,p.getData())})]},W7=(n,r)=>{const i=r.map(m=>m.footerButtons).getOr([]),l=Cc(i,m=>m.align==="start"),u=(m,p)=>Qc.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${m}`]},components:Ke(p,b=>b.memento.asSpec())});return[u("start",l.pass),u("end",l.fail)]},DN=(n,r,i)=>({dom:cm('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Ve([Wi.config({channel:`${dO}-${r}`,initialData:n,updateState:(l,u)=>{const m=Ke(u.buttons,p=>{const b=Zo(((x,w)=>u2(x,x.type,w))(p,i));return{name:p.name,align:p.align,memento:b}});return E.some({lookupByName:p=>((b,x,w)=>qo(x,_=>_.name===w).bind(_=>_.memento.getOpt(b)))(l,m,p),footerButtons:m})},renderComponents:W7})])}),MN=(n,r,i)=>nr.parts.footer(DN(n,r,i)),BN=(n,r)=>{if(n.getRoot().getSystem().isConnected()){const i=wo.getCurrent(n.getFormWrapper()).getOr(n.getFormWrapper());return P1.getField(i,r).orThunk(()=>n.getFooter().bind(u=>Wi.getState(u).get()).bind(u=>u.lookupByName(r)))}return E.none()},PN=(n,r,i)=>{const l=m=>{const p=n.getRoot();p.getSystem().isConnected()&&m(p)},u={getData:()=>{const m=n.getRoot(),p=m.getSystem().isConnected()?n.getFormWrapper():m;return{...nt.getValue(p),...Ho(i,b=>b.get())}},setData:m=>{l(p=>{const b=u.getData(),x=X(b,m),w=((k,T)=>{const N=k.getRoot();return Wi.getState(N).get().map(B=>Xi(Bn("data",B.dataValidator,T))).getOr(T)})(n,x),_=n.getFormWrapper();nt.setValue(_,w),In(i,(k,T)=>{Dt(x,T)&&k.set(x[T])})})},setEnabled:(m,p)=>{BN(n,m).each(p?Mt.enable:Mt.disable)},focus:m=>{BN(n,m).each(It.focus)},block:m=>{if(!Co(m))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(p=>{ut(p,X_,{message:m})})},unblock:()=>{l(m=>{xo(m,J_)})},showTab:m=>{l(p=>{const b=n.getBody();Wi.getState(b).get().exists(x=>x.isTabPanel())&&wo.getCurrent(b).each(x=>{Yp.showTab(x,m)})})},redial:m=>{l(p=>{const b=n.getId(),x=r(m),w=b4(x.internalDialog.buttons,i);p.getSystem().broadcastOn([`${Xy}-${b}`],x),p.getSystem().broadcastOn([`${lO}-${b}`],x.internalDialog),p.getSystem().broadcastOn([`${cO}-${b}`],x.internalDialog),p.getSystem().broadcastOn([`${dO}-${b}`],{...x.internalDialog,buttons:w}),u.setData(x.initialData)})},close:()=>{l(m=>{xo(m,A1)})},toggleFullscreen:n.toggleFullscreen};return u},IN=(n,r,i,l=!1,u)=>{const m=lt("dialog"),p=lt("dialog-label"),b=lt("dialog-content"),x=n.internalDialog,w=Ot(x.size),_=Vx(w.get()).toArray(),k=Zo(((L,W,G,Q)=>Qc.sketch({dom:cm('<div class="tox-dialog__header"></div>'),components:[kN(L,W,E.some(G),Q),iw(),_N(Q)],containerBehaviours:Ve([jf.config({mode:"mouse",blockerClass:"blocker",getTarget:re=>Ri(re,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))({title:x.title,draggable:!0},m,p,i.shared.providers)),T=Zo(((L,W,G,Q,re)=>f4(L,W,E.some(G),Q,re))({body:x.body,initialData:x.initialData},m,b,i,l)),N=b4(x.buttons),B=x4(N),V=Xr(N.length!==0,Zo(((L,W,G)=>DN(L,W,G))({buttons:N},m,i))),U=v4(()=>H,{onBlock:L=>{rd.block(q,(W,G)=>{const Q=k.getOpt(q).map(re=>_e(re.element));return p4(L.message,G,i.shared.providers,Q)})},onUnblock:()=>{rd.unblock(q)},onClose:()=>r.closeWindow()},i.shared.getSink),q=Ar({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",..._],attributes:{role:"dialog","aria-labelledby":p}},eventOrder:{[Va()]:[Wi.name(),Ea.name()],[ka()]:["execute-on-form"],[Le()]:["reflecting","execute-on-form"]},behaviours:Ve([vt.config({mode:"cyclic",onEscape:L=>(xo(L,A1),E.some(!0)),useTabstopAt:L=>!Hp(L)&&(Hr(L)!=="button"||js(L,"disabled")!=="disabled"),firstTabstop:1}),Wi.config({channel:`${Xy}-${m}`,updateState:(L,W)=>(w.set(W.internalDialog.size),ON(W.internalDialog.size,L),u(),E.some(W)),initialData:n}),It.config({}),Qt("execute-on-form",U.concat([Ku(Dc(),(L,W)=>{vt.focusIn(L)}),Re(Bc(),(L,W)=>{L.getSystem().broadcastOn([Jy],{newFocus:W.event.newFocus})})])),rd.config({getRoot:()=>E.some(q)}),Rt.config({}),Gy({})]),components:[k.asSpec(),T.asSpec(),...V.map(L=>L.asSpec()).toArray()]}),H=PN({getId:ue(m),getRoot:ue(q),getFooter:()=>V.map(L=>L.get(q)),getBody:()=>T.get(q),getFormWrapper:()=>{const L=T.get(q);return wo.getCurrent(L).getOr(L)},toggleFullscreen:()=>{AN(q,w.get())}},r.redial,B);return{dialog:q,instanceApi:H}};var y4=tinymce.util.Tools.resolve("tinymce.util.URI");const j7=["insertContent","setContent","execCommand","close","block","unblock"],LN=n=>Pr(n)&&j7.indexOf(n.mceAction)!==-1,w4=(n,r,i,l)=>{const u=lt("dialog"),m=SN(n.title,u,l),p=(q=>{const H={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[sx(E.none(),{dom:{tag:"iframe",attributes:{src:q.url}},behaviours:Ve([Hn.config({}),It.config({})])})]}],behaviours:Ve([vt.config({mode:"acyclic",useTabstopAt:yi(Hp)})])};return nr.parts.body(H)})(n),b=n.buttons.bind(q=>q.length===0?E.none():E.some(MN({buttons:q},u,l))),x=((q,H)=>{const L=(G,Q)=>Re(G,(re,ge)=>{W(re,(Te,Oe)=>{Q(U,Te,ge.event,re)})}),W=(G,Q)=>{Wi.getState(G).get().each(re=>{Q(re,G)})};return[...RN(L,H),L(bu,(G,Q,re)=>{Q.onAction(G,{name:re.name})})]})(0,EN(()=>V,l.shared.providers,r)),w={...n.height.fold(()=>({}),q=>({height:q+"px","max-height":q+"px"})),...n.width.fold(()=>({}),q=>({width:q+"px","max-width":q+"px"}))},_=n.width.isNone()&&n.height.isNone()?["tox-dialog--width-lg"]:[],k=new y4(n.url,{base_uri:new y4(window.location.href)}),T=`${k.protocol}://${k.host}${k.port?":"+k.port:""}`,N=nc(),B=[Wi.config({channel:`${Xy}-${u}`,updateState:(q,H)=>E.some(H),initialData:n}),Qt("messages",[cn(()=>{const q=yr(ot(window),"message",H=>{if(k.isSameOrigin(new y4(H.raw.origin))){const L=H.raw.data;LN(L)?((W,G,Q)=>{switch(Q.mceAction){case"insertContent":W.insertContent(Q.content);break;case"setContent":W.setContent(Q.content);break;case"execCommand":const re=!!Kr(Q.ui)&&Q.ui;W.execCommand(Q.cmd,re,Q.value);break;case"close":G.close();break;case"block":G.block(Q.message);break;case"unblock":G.unblock()}})(i,U,L):(W=>!LN(W)&&Pr(W)&&Dt(W,"mceAction"))(L)&&n.onMessage(U,L)}});N.set(q)}),Xl(N.clear)]),Ea.config({channels:{[I1]:{onReceive:(q,H)=>{Zn(q.element,"iframe").each(L=>{const W=L.dom.contentWindow;_t(W)&&W.postMessage(H,T)})}}}})],V=NN({id:u,header:m,body:p,footer:b,extraClasses:_,extraBehaviours:B,extraStyles:w},x,l),U=(q=>{const H=L=>{q.getSystem().isConnected()&&L(q)};return{block:L=>{if(!Co(L))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");H(W=>{ut(W,X_,{message:L})})},unblock:()=>{H(L=>{xo(L,J_)})},close:()=>{H(L=>{xo(L,A1)})},sendMessage:L=>{H(W=>{W.getSystem().broadcastOn([I1],L)})}}})(V);return{dialog:V,instanceApi:U}},FN=(n,r)=>Xi(Bn("data",r,n)),HN=n=>O1(n,".tox-alert-dialog")||O1(n,".tox-confirm-dialog"),q7=(n,r,i)=>r&&i?[]:[ss.config({contextual:{lazyContext:()=>E.some(Gs(ot(n.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>Rp(n,l.element).map(u=>({bounds:Dp(u),optScrollEnv:E.some({currentScrollTop:u.element.dom.scrollTop,scrollElmTop:ko(u.element).top})})).getOrThunk(()=>({bounds:Xn(),optScrollEnv:E.none()}))})],$x=n=>{const r=n.editor,i=h1(r),l=(x=>{const w=x.shared;return{open:(_,k)=>{const T=()=>{nr.hide(U),k()},N=Zo(u2({name:"close-alert",text:"OK",primary:!0,buttonType:E.some("primary"),align:"end",enabled:!0,icon:E.none()},"cancel",x)),B=zx(),V=yN(T,w.providers),U=Ar(aw({lazySink:()=>w.getSink(),header:vN(B,V),body:wN(_,w.providers),footer:E.some(CN(g4([],[N.asSpec()]))),onEscape:T,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Re(bm,T)],eventOrder:{}}));nr.show(U);const q=N.get(U);It.focus(q)}}})(n.backstages.dialog),u=(x=>{const w=x.shared;return{open:(_,k)=>{const T=L=>{nr.hide(q),k(L)},N=Zo(u2({name:"yes",text:"Yes",primary:!0,buttonType:E.some("primary"),align:"end",enabled:!0,icon:E.none()},"submit",x)),B=u2({name:"no",text:"No",primary:!1,buttonType:E.some("secondary"),align:"end",enabled:!0,icon:E.none()},"cancel",x),V=zx(),U=yN(()=>T(!1),w.providers),q=Ar(aw({lazySink:()=>w.getSink(),header:vN(V,U),body:wN(_,w.providers),footer:E.some(CN(g4([],[B,N.asSpec()]))),onEscape:()=>T(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Re(bm,()=>T(!1)),Re(Pp,()=>T(!0))],eventOrder:{}}));nr.show(q);const H=N.get(q);It.focus(H)}}})(n.backstages.dialog),m=(x,w)=>Gf.open((_,k,T)=>{const N=k,B=((V,U,q)=>{const H=lt("dialog"),L=V.internalDialog,W=SN(L.title,H,q),G=Ot(L.size),Q=Vx(G.get()).toArray(),re=((Lt,lo,sn)=>{const zn=f4(Lt,lo,E.none(),sn,!1);return nr.parts.body(zn)})({body:L.body,initialData:L.initialData},H,q),ge=b4(L.buttons),Te=x4(ge),Oe=Xr(ge.length!==0,MN({buttons:ge},H,q)),Ae=v4(()=>Bt,EN(()=>at,q.shared.providers,U),q.shared.getSink),tt={id:H,header:W,body:re,footer:Oe,extraClasses:Q,extraBehaviours:[Wi.config({channel:`${Xy}-${H}`,updateState:(Lt,lo)=>(G.set(lo.internalDialog.size),ON(lo.internalDialog.size,Lt),E.some(lo)),initialData:V})],extraStyles:{}},at=NN(tt,Ae,q),ht={getId:ue(H),getRoot:ue(at),getBody:()=>nr.getBody(at),getFooter:()=>nr.getFooter(at),getFormWrapper:()=>{const Lt=nr.getBody(at);return wo.getCurrent(Lt).getOr(Lt)},toggleFullscreen:()=>{AN(at,G.get())}},Bt=PN(ht,U.redial,Te);return{dialog:at,instanceApi:Bt}})({dataValidator:T,initialData:N,internalDialog:_},{redial:Gf.redial,closeWindow:()=>{nr.hide(B.dialog),w(B.instanceApi)}},n.backstages.dialog);return nr.show(B.dialog),B.instanceApi.setData(N),B.instanceApi},x),p=(x,w,_,k)=>Gf.open((T,N,B)=>{const V=FN(N,B),U=En(),q=n.backstages.popup.shared.header.isPositionedAtTop(),H=()=>U.on(G=>{jn.reposition(G),i&&q||ss.refresh(G)}),L=IN({dataValidator:B,initialData:V,internalDialog:T},{redial:Gf.redial,closeWindow:()=>{U.on(jn.hide),r.off("ResizeEditor",H),U.clear(),_(L.instanceApi)}},n.backstages.popup,k.ariaAttrs,H),W=Ar(jn.sketch({lazySink:n.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:k.persistent?{event:"doNotDismissYet"}:{},...q?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ve([Qt("window-manager-inline-events",[Re(Td(),(G,Q)=>{xo(L.dialog,bm)})]),...q7(r,i,q)]),isExtraPart:(G,Q)=>HN(Q)}));return U.set(W),jn.showWithinBounds(W,Jo(L.dialog),{anchor:w},()=>{const G=r.inline?ni():ot(r.getContainer()),Q=Gs(G);return E.some(Q)}),i&&q||(ss.refresh(W),r.on("ResizeEditor",H)),L.instanceApi.setData(V),vt.focusIn(L.dialog),L.instanceApi},x),b=(x,w,_,k)=>Gf.open((T,N,B)=>{const V=FN(N,B),U=En(),q=n.backstages.popup.shared.header.isPositionedAtTop(),H=()=>U.on(G=>{jn.reposition(G),ss.refresh(G)}),L=IN({dataValidator:B,initialData:V,internalDialog:T},{redial:Gf.redial,closeWindow:()=>{U.on(jn.hide),r.off("ResizeEditor ScrollWindow ElementScroll",H),U.clear(),_(L.instanceApi)}},n.backstages.popup,k.ariaAttrs,H),W=Ar(jn.sketch({lazySink:n.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:k.persistent?{event:"doNotDismissYet"}:{},...q?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ve([Qt("window-manager-inline-events",[Re(Td(),(G,Q)=>{xo(L.dialog,bm)})]),ss.config({contextual:{lazyContext:()=>E.some(Gs(ot(r.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:G=>Rp(r,G.element).map(Q=>({bounds:Dp(Q),optScrollEnv:E.some({currentScrollTop:Q.element.dom.scrollTop,scrollElmTop:ko(Q.element).top})})).getOrThunk(()=>({bounds:Xn(),optScrollEnv:E.none()}))})]),isExtraPart:(G,Q)=>HN(Q)}));return U.set(W),jn.showWithinBounds(W,Jo(L.dialog),{anchor:w},()=>n.backstages.popup.shared.getSink().toOptional().bind(G=>{const Q=Rp(r,G.element).map(Te=>Dp(Te)).getOr(Xn()),re=Gs(ot(r.getContentAreaContainer())),ge=Ym(re,Q);return E.some(Ts(ge.x,ge.y,ge.width,ge.height-15))})),ss.refresh(W),r.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",H),L.instanceApi.setData(V),vt.focusIn(L.dialog),L.instanceApi},x);return{open:(x,w,_)=>{if(!mr(w)){if(w.inline==="toolbar")return p(x,n.backstages.popup.shared.anchors.inlineDialog(),_,w);if(w.inline==="bottom")return b(x,n.backstages.popup.shared.anchors.inlineBottomDialog(),_,w);if(w.inline==="cursor")return p(x,n.backstages.popup.shared.anchors.cursor(),_,w)}return m(x,_)},openUrl:(x,w)=>((_,k)=>Gf.openUrl(T=>{const N=w4(T,{closeWindow:()=>{nr.hide(N.dialog),k(N.instanceApi)}},r,n.backstages.dialog);return nr.show(N.dialog),N.instanceApi},_))(x,w),alert:(x,w)=>{l.open(x,w)},close:x=>{x.close()},confirm:(x,w)=>{u.open(x,w)}}};fg.add("silver",n=>{(p=>{Rf(p),(b=>{const x=b.options.register,w=k=>wc(k,Co)?{value:iT(k),valid:!0}:{valid:!1,message:"Must be an array of strings."},_=k=>jo(k)&&k>0?{value:k,valid:!0}:{valid:!1,message:"Must be a positive number."};x("color_map",{processor:w,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),x("color_map_background",{processor:w}),x("color_map_foreground",{processor:w}),x("color_cols",{processor:_,default:pu(b)}),x("color_cols_foreground",{processor:_,default:F_(b,I_)}),x("color_cols_background",{processor:_,default:F_(b,L_)}),x("custom_colors",{processor:"boolean",default:!0}),x("color_default_foreground",{processor:"string",default:H0}),x("color_default_background",{processor:"string",default:H0})})(p),(b=>{const x=b.options.register;x("contextmenu_avoid_overlap",{processor:"string",default:""}),x("contextmenu_never_use_native",{processor:"boolean",default:!1}),x("contextmenu",{processor:w=>w===!1?{value:[],valid:!0}:Co(w)||wc(w,Co)?{value:FB(w),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})})(p)})(n);let r=()=>Xn();const{dialogs:i,popups:l,renderUI:u}=Mx(n,{getPopupSinkBounds:()=>r()});G_(n,l.backstage.shared);const m=$x({editor:n,backstages:{popup:l.backstage,dialog:i.backstage}});return{renderUI:()=>{const p=u();return Rp(n,l.getMothership().element).each(b=>{r=()=>Dp(b)}),p},getWindowManagerImpl:ue(m),getNotificationManagerImpl:()=>((p,b,x)=>{const w=b.backstage.shared,_=()=>{const k=Gs(ot(p.getContentAreaContainer())),T=Xn(),N=mi(T.x,k.x,k.right),B=mi(T.y,k.y,k.bottom),V=Math.max(k.right,T.right),U=Math.max(k.bottom,T.bottom);return E.some(Ts(N,B,V-N,U-B))};return{open:(k,T)=>{const N=()=>{T(),jn.hide(V)},B=Ar(FC.sketch({text:k.text,level:bo(["success","error","warning","warn","info"],k.type)?k.type:void 0,progress:k.progressBar===!0,icon:k.icon,closeButton:k.closeButton,onAction:N,iconProvider:w.providers.icons,translationProvider:w.providers.translate})),V=Ar(jn.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:w.getSink,fireDismissalEventInstead:{},...w.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));x.add(V),jo(k.timeout)&&k.timeout>0&&jv.setEditorTimeout(p,()=>{N()},k.timeout);const U={close:N,reposition:()=>{const q=Jo(B),H={maxHeightFunction:nm()},L=p.notificationManager.getNotifications();if(L[0]===U){const W={...w.anchors.banner(),overrides:H};jn.showWithinBounds(V,q,{anchor:W},_)}else Je(L,U).each(W=>{const G=L[W-1].getEl(),Q={type:"node",root:ni(),node:E.some(ot(G)),overrides:H,layouts:{onRtl:()=>[Wn],onLtr:()=>[Wn]}};jn.showWithinBounds(V,q,{anchor:Q},_)})},text:q=>{FC.updateText(B,q)},settings:k,getEl:()=>B.element.dom,progressBar:{value:q=>{FC.updateProgress(B,q)}}};return U},close:k=>{k.close()},getArgs:k=>k.settings}})(n,{backstage:l.backstage},l.getMothership())}})})();(function(){var ib=tinymce.util.Tools.resolve("tinymce.ModelManager");const Du=f=>h=>(y=>{const C=typeof y;return y===null?"null":C==="object"&&Array.isArray(y)?"array":C==="object"&&(O=A=y,(M=String).prototype.isPrototypeOf(O)||((F=A.constructor)===null||F===void 0?void 0:F.name)===M.name)?"string":C;var O,A,M,F})(h)===f,Mu=f=>h=>typeof h===f,ud=f=>h=>f===h,yc=Du("string"),Co=Du("object"),Pr=Du("array"),sg=ud(null),Qa=Mu("boolean"),md=ud(void 0),Kr=f=>!(h=>h==null)(f),mr=Mu("function"),Pl=Mu("number"),_t=()=>{},Ft=f=>()=>f,jo=f=>f,wc=(f,h)=>f===h;function Xe(f,...h){return(...y)=>{const C=h.concat(y);return f.apply(null,C)}}const eo=f=>h=>!f(h),bt=f=>f(),ue=Ft(!1),kt=Ft(!0);class ce{constructor(h,y){this.tag=h,this.value=y}static some(h){return new ce(!0,h)}static none(){return ce.singletonNone}fold(h,y){return this.tag?y(this.value):h()}isSome(){return this.tag}isNone(){return!this.tag}map(h){return this.tag?ce.some(h(this.value)):ce.none()}bind(h){return this.tag?h(this.value):ce.none()}exists(h){return this.tag&&h(this.value)}forall(h){return!this.tag||h(this.value)}filter(h){return!this.tag||h(this.value)?this:ce.none()}getOr(h){return this.tag?this.value:h}or(h){return this.tag?this:h}getOrThunk(h){return this.tag?this.value:h()}orThunk(h){return this.tag?this:h()}getOrDie(h){if(this.tag)return this.value;throw new Error(h??"Called getOrDie on None")}static from(h){return Kr(h)?ce.some(h):ce.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(h){this.tag&&h(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ce.singletonNone=new ce(!1);const Rn=Array.prototype.slice,yi=Array.prototype.indexOf,Bs=Array.prototype.push,_o=(f,h)=>{return y=f,C=h,yi.call(y,C)>-1;var y,C},Ne=(f,h)=>{for(let y=0,C=f.length;y<C;y++)if(h(f[y],y))return!0;return!1},Pt=(f,h)=>{const y=[];for(let C=0;C<f;C++)y.push(h(C));return y},E=(f,h)=>{const y=f.length,C=new Array(y);for(let O=0;O<y;O++){const A=f[O];C[O]=h(A,O)}return C},ao=(f,h)=>{for(let y=0,C=f.length;y<C;y++)h(f[y],y)},oo=(f,h)=>{const y=[],C=[];for(let O=0,A=f.length;O<A;O++){const M=f[O];(h(M,O)?y:C).push(M)}return{pass:y,fail:C}},Uo=(f,h)=>{const y=[];for(let C=0,O=f.length;C<O;C++){const A=f[C];h(A,C)&&y.push(A)}return y},Pa=(f,h,y)=>(((C,O)=>{for(let A=C.length-1;A>=0;A--)O(C[A],A)})(f,(C,O)=>{y=h(y,C,O)}),y),Je=(f,h,y)=>(ao(f,(C,O)=>{y=h(y,C,O)}),y),bo=(f,h)=>((y,C,O)=>{for(let A=0,M=y.length;A<M;A++){const F=y[A];if(C(F,A))return ce.some(F);if(O(F,A))break}return ce.none()})(f,h,ue),Yr=(f,h)=>{for(let y=0,C=f.length;y<C;y++)if(h(f[y],y))return ce.some(y);return ce.none()},it=f=>{const h=[];for(let y=0,C=f.length;y<C;++y){if(!Pr(f[y]))throw new Error("Arr.flatten item "+y+" was not an array, input: "+f);Bs.apply(h,f[y])}return h},hs=(f,h)=>it(E(f,h)),Ke=(f,h)=>{for(let y=0,C=f.length;y<C;++y)if(h(f[y],y)!==!0)return!1;return!0},xt=(f,h)=>{const y={};for(let C=0,O=f.length;C<O;C++){const A=f[C];y[String(A)]=h(A,C)}return y},Cc=(f,h)=>h>=0&&h<f.length?ce.some(f[h]):ce.none(),Jt=f=>Cc(f,0),kn=f=>Cc(f,f.length-1),I=(f,h)=>{for(let y=0;y<f.length;y++){const C=h(f[y],y);if(C.isSome())return C}return ce.none()},qo=Object.keys,dl=Object.hasOwnProperty,hn=(f,h)=>{const y=qo(f);for(let C=0,O=y.length;C<O;C++){const A=y[C];h(f[A],A)}},qn=(f,h)=>_c(f,(y,C)=>({k:C,v:h(y,C)})),_c=(f,h)=>{const y={};return hn(f,(C,O)=>{const A=h(C,O);y[A.k]=A.v}),y},Io=(f,h)=>{const y=[];return hn(f,(C,O)=>{y.push(h(C,O))}),y},bn=f=>Io(f,jo),no=(f,h)=>dl.call(f,h),Ie=typeof window<"u"?window:Function("return this;")(),Fm=(f,h)=>((y,C)=>{let O=C??Ie;for(let A=0;A<y.length&&O!=null;++A)O=O[y[A]];return O})(f.split("."),h),ul=Object.getPrototypeOf,Et=f=>{const h=Fm("ownerDocument.defaultView",f);return Co(f)&&((y=>((C,O)=>{const A=((M,F)=>Fm(M,F))(C,O);if(A==null)throw new Error(C+" not available on this browser");return A})("HTMLElement",y))(h).prototype.isPrototypeOf(f)||/^HTML\w*Element$/.test(ul(f).constructor.name))},xn=f=>f.dom.nodeName.toLowerCase(),Ir=f=>f.dom.nodeType,_r=f=>h=>Ir(h)===f,Ao=f=>Ir(f)===8||xn(f)==="#comment",fd=f=>In(f)&&Et(f.dom),In=_r(1),Ho=_r(3),ei=_r(9),Il=_r(11),fr=f=>h=>In(h)&&xn(h)===f,Ll=(f,h,y)=>{if(!(yc(y)||Qa(y)||Pl(y)))throw console.error("Invalid call to Attribute.set. Key ",h,":: Value ",y,":: Element ",f),new Error("Attribute value was not simple");f.setAttribute(h,y+"")},Dn=(f,h,y)=>{Ll(f.dom,h,y)},qi=(f,h)=>{const y=f.dom;hn(h,(C,O)=>{Ll(y,O,C)})},Ln=(f,h)=>{const y=f.dom.getAttribute(h);return y===null?void 0:y},mt=(f,h)=>ce.from(Ln(f,h)),Dt=(f,h)=>{f.dom.removeAttribute(h)},Zs=f=>Je(f.dom.attributes,(h,y)=>(h[y.name]=y.value,h),{}),Lr=f=>{if(f==null)throw new Error("Node cannot be null or undefined");return{dom:f}},ze={fromHtml:(f,h)=>{const y=(h||document).createElement("div");if(y.innerHTML=f,!y.hasChildNodes()||y.childNodes.length>1){const C="HTML does not have a single root node";throw console.error(C,f),new Error(C)}return Lr(y.childNodes[0])},fromTag:(f,h)=>{const y=(h||document).createElement(f);return Lr(y)},fromText:(f,h)=>{const y=(h||document).createTextNode(f);return Lr(y)},fromDom:Lr,fromPoint:(f,h,y)=>ce.from(f.dom.elementFromPoint(h,y)).map(Lr)},Fr=(f,h)=>{const y=f.dom;if(y.nodeType!==1)return!1;{const C=y;if(C.matches!==void 0)return C.matches(h);if(C.msMatchesSelector!==void 0)return C.msMatchesSelector(h);if(C.webkitMatchesSelector!==void 0)return C.webkitMatchesSelector(h);if(C.mozMatchesSelector!==void 0)return C.mozMatchesSelector(h);throw new Error("Browser lacks native selectors")}},Qo=f=>f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11||f.childElementCount===0,Xr=(f,h)=>{const y=h===void 0?document:h.dom;return Qo(y)?ce.none():ce.from(y.querySelector(f)).map(ze.fromDom)},vn=(f,h)=>f.dom===h.dom,gd=(f,h)=>{const y=f.dom,C=h.dom;return y!==C&&y.contains(C)},kr=Fr,Hm=f=>ze.fromDom(f.dom.ownerDocument),wi=f=>ei(f)?f:Hm(f),ti=f=>ce.from(f.dom.parentNode).map(ze.fromDom),kc=f=>ce.from(f.dom.parentElement).map(ze.fromDom),an=(f,h)=>{const y=mr(h)?h:ue;let C=f.dom;const O=[];for(;C.parentNode!==null&&C.parentNode!==void 0;){const A=C.parentNode,M=ze.fromDom(A);if(O.push(M),y(M)===!0)break;C=A}return O},jt=f=>ce.from(f.dom.previousSibling).map(ze.fromDom),oi=f=>ce.from(f.dom.nextSibling).map(ze.fromDom),ga=f=>E(f.dom.childNodes,ze.fromDom),Ia=(f,h)=>{const y=f.dom.childNodes;return ce.from(y[h]).map(ze.fromDom)},pd=(f,h)=>{ti(f).each(y=>{y.dom.insertBefore(h.dom,f.dom)})},ot=(f,h)=>{oi(f).fold(()=>{ti(f).each(y=>{Tn(y,h)})},y=>{pd(y,h)})},rg=(f,h)=>{(C=>Ia(C,0))(f).fold(()=>{Tn(f,h)},C=>{f.dom.insertBefore(h.dom,C.dom)})},Tn=(f,h)=>{f.dom.appendChild(h.dom)},zm=(f,h)=>{pd(f,h),Tn(h,f)},hd=(f,h)=>{ao(h,(y,C)=>{const O=C===0?f:h[C-1];ot(O,y)})},Hr=(f,h)=>{ao(h,y=>{Tn(f,y)})},ml=f=>{f.dom.textContent="",ao(ga(f),h=>{Sr(h)})},Sr=f=>{const h=f.dom;h.parentNode!==null&&h.parentNode.removeChild(h)},Ws=f=>{const h=ga(f);h.length>0&&hd(f,h),Sr(f)},pa=(f,h)=>ze.fromDom(f.dom.cloneNode(h)),nh=f=>pa(f,!1),Bu=f=>pa(f,!0),ag=(f,h)=>{const y=ze.fromTag(h),C=Zs(f);return qi(y,C),y},sh=["tfoot","thead","tbody","colgroup"],Vm=(f,h,y)=>({element:f,rowspan:h,colspan:y}),Go=(f,h,y)=>({element:f,cells:h,section:y}),Es=(f,h,y)=>({element:f,isNew:h,isLocked:y}),Er=(f,h,y,C)=>({element:f,cells:h,section:y,isNew:C}),Pu=mr(Element.prototype.attachShadow)&&mr(Node.prototype.getRootNode),ig=Ft(Pu),$m=Pu?f=>ze.fromDom(f.dom.getRootNode()):wi,Ci=f=>ze.fromDom(f.dom.host),rr=f=>{const h=Ho(f)?f.dom.parentNode:f.dom;if(h==null||h.ownerDocument===null)return!1;const y=h.ownerDocument;return(A=>{const M=$m(A);return Il(F=M)&&Kr(F.dom.host)?ce.some(M):ce.none();var F})(ze.fromDom(h)).fold(()=>y.body.contains(h),(C=rr,O=Ci,A=>C(O(A))));var C,O},lg=f=>{const h=f.dom.body;if(h==null)throw new Error("Body is not available yet");return ze.fromDom(h)},Fn=(f,h)=>{let y=[];return ao(ga(f),C=>{h(C)&&(y=y.concat([C])),y=y.concat(Fn(C,h))}),y},yn=(f,h,y)=>((C,O,A)=>Uo(an(C,A),M=>Fr(M,h)))(f,0,y),Fl=(f,h)=>((y,C)=>Uo(ga(y),O=>Fr(O,h)))(f),_i=(f,h)=>((y,C)=>{const O=C===void 0?document:C.dom;return Qo(O)?[]:E(O.querySelectorAll(y),ze.fromDom)})(h,f);var Hl=(f,h,y,C,O)=>f(y,C)?ce.some(y):mr(O)&&O(y)?ce.none():h(y,C,O);const Sc=(f,h,y)=>{let C=f.dom;const O=mr(y)?y:ue;for(;C.parentNode;){C=C.parentNode;const A=ze.fromDom(C);if(h(A))return ce.some(A);if(O(A))break}return ce.none()},Iu=(f,h,y)=>Hl((C,O)=>O(C),Sc,f,h,y),zr=(f,h,y)=>Sc(f,C=>Fr(C,h),y),bs=(f,h)=>((y,C)=>bo(y.dom.childNodes,O=>{return A=ze.fromDom(O),Fr(A,h);var A}).map(ze.fromDom))(f),Gi=(f,h)=>Xr(h,f),ls=(f,h,y)=>Hl((C,O)=>Fr(C,O),zr,f,h,y),bd=(f,h,y=wc)=>f.exists(C=>y(C,h)),Ps=f=>{const h=[],y=C=>{h.push(C)};for(let C=0;C<f.length;C++)f[C].each(y);return h},ni=(f,h)=>f?ce.some(h):ce.none(),cg=(f,h,y)=>h===""||f.length>=h.length&&f.substr(y,y+h.length)===h,Tr=(f,h,y=0,C)=>{const O=f.indexOf(h,y);return O!==-1&&(!!md(C)||O+h.length<=C)},Kt=(f,h)=>cg(f,h,0),ki=(f,h)=>cg(f,h,f.length-h.length),js=(f=>h=>h.replace(f,""))(/^\s+|\s+$/g),qs=f=>f.length>0,zl=f=>f.style!==void 0&&mr(f.style.getPropertyValue),Sn=(f,h,y)=>{if(!yc(y))throw console.error("Invalid call to CSS.set. Property ",h,":: Value ",y,":: Element ",f),new Error("CSS value must be a string: "+y);zl(f)&&f.style.setProperty(h,y)},xs=(f,h,y)=>{const C=f.dom;Sn(C,h,y)},Ec=(f,h)=>{const y=f.dom;hn(h,(C,O)=>{Sn(y,O,C)})},Ht=(f,h)=>{const y=f.dom,C=window.getComputedStyle(y).getPropertyValue(h);return C!==""||rr(f)?C:Ki(y,h)},Ki=(f,h)=>zl(f)?f.style.getPropertyValue(h):"",Vl=(f,h)=>{const y=f.dom,C=Ki(y,h);return ce.from(C).filter(O=>O.length>0)},Gn=(f,h)=>{((y,C)=>{zl(y)&&y.style.removeProperty(C)})(f.dom,h),bd(mt(f,"style").map(js),"")&&Dt(f,"style")},Si=(f,h,y=0)=>mt(f,h).map(C=>parseInt(C,10)).getOr(y),vs=(f,h)=>Si(f,h,1),Lu=f=>fr("col")(f)?Si(f,"span",1)>1:vs(f,"colspan")>1,Um=f=>vs(f,"rowspan")>1,Mo=(f,h)=>parseInt(Ht(f,h),10),z=Ft(10),ne=Ft(10),de=(f,h)=>_e(f,h,kt),_e=(f,h,y)=>hs(ga(f),C=>Fr(C,h)?y(C)?[C]:[]:_e(C,h,y)),Ue=(f,h)=>((y,C,O=ue)=>O(C)?ce.none():_o(y,xn(C))?ce.some(C):zr(C,y.join(","),A=>Fr(A,"table")||O(A)))(["td","th"],f,h),Tt=f=>de(f,"th,td"),Xt=f=>Fr(f,"colgroup")?Fl(f,"col"):hs(Kn(f),h=>Fl(h,"col")),To=(f,h)=>ls(f,"table",h),ko=f=>de(f,"tr"),Kn=f=>To(f).fold(Ft([]),h=>Fl(h,"colgroup")),Xo=(f,h)=>E(f,y=>{if(xn(y)==="colgroup"){const C=E(Xt(y),O=>{const A=Si(O,"span",1);return Vm(O,1,A)});return Go(y,C,"colgroup")}{const C=E(Tt(y),O=>{const A=Si(O,"rowspan",1),M=Si(O,"colspan",1);return Vm(O,A,M)});return Go(y,C,h(y))}}),On=f=>ti(f).map(h=>{const y=xn(h);return(C=>_o(sh,C))(y)?y:"tbody"}).getOr("tbody"),ha=f=>{const h=ko(f),y=[...Kn(f),...h];return Xo(y,On)},si=f=>{let h,y=!1;return(...C)=>(y||(y=!0,h=f.apply(null,C)),h)},Do=()=>dg(0,0),dg=(f,h)=>({major:f,minor:h}),$l={nu:dg,detect:(f,h)=>{const y=String(h).toLowerCase();return f.length===0?Do():((C,O)=>{const A=((F,$)=>{for(let J=0;J<F.length;J++){const oe=F[J];if(oe.test($))return oe}})(C,O);if(!A)return{major:0,minor:0};const M=F=>Number(O.replace(A,"$"+F));return dg(M(1),M(2))})(f,y)},unknown:Do},lb=(f,h)=>{const y=String(h).toLowerCase();return bo(f,C=>C.search(y))},ug=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Jr=f=>h=>Tr(h,f),Ew=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:f=>Tr(f,"edge/")&&Tr(f,"chrome")&&Tr(f,"safari")&&Tr(f,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ug],search:f=>Tr(f,"chrome")&&!Tr(f,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:f=>Tr(f,"msie")||Tr(f,"trident")},{name:"Opera",versionRegexes:[ug,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Jr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Jr("firefox")},{name:"Safari",versionRegexes:[ug,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:f=>(Tr(f,"safari")||Tr(f,"mobile/"))&&Tr(f,"applewebkit")}],tv=[{name:"Windows",search:Jr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:f=>Tr(f,"iphone")||Tr(f,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Jr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Jr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Jr("linux"),versionRegexes:[]},{name:"Solaris",search:Jr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Jr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Jr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ov={browsers:Ft(Ew),oses:Ft(tv)},V4="Edge",$4="Chromium",qe="Opera",Zm="Firefox",nv="Safari",cb=f=>{const h=f.current,y=f.version,C=O=>()=>h===O;return{current:h,version:y,isEdge:C(V4),isChromium:C($4),isIE:C("IE"),isOpera:C(qe),isFirefox:C(Zm),isSafari:C(nv)}},Vr=()=>cb({current:void 0,version:$l.unknown()}),Tw=cb,Wm="Windows",Ow="Android",Aw="Linux",sv="macOS",Nw="Solaris",Rw="FreeBSD",Dw="ChromeOS",db=f=>{const h=f.current,y=f.version,C=O=>()=>h===O;return{current:h,version:y,isWindows:C(Wm),isiOS:C("iOS"),isAndroid:C(Ow),isMacOS:C(sv),isLinux:C(Aw),isSolaris:C(Nw),isFreeBSD:C(Rw),isChromeOS:C(Dw)}},Mw=()=>db({current:void 0,version:$l.unknown()}),rv=db,av=f=>window.matchMedia(f).matches;let ub=si(()=>((f,h,y)=>{const C=ov.browsers(),O=ov.oses(),A=h.bind($=>((J,oe)=>I(oe.brands,ee=>{const te=ee.brand.toLowerCase();return bo(J,se=>{var he;return te===((he=se.brand)===null||he===void 0?void 0:he.toLowerCase())}).map(se=>({current:se.name,version:$l.nu(parseInt(ee.version,10),0)}))}))(C,$)).orThunk(()=>(($,J)=>lb($,J).map(oe=>{const ee=$l.detect(oe.versionRegexes,J);return{current:oe.name,version:ee}}))(C,f)).fold(Vr,Tw),M=(($,J)=>lb($,J).map(oe=>{const ee=$l.detect(oe.versionRegexes,J);return{current:oe.name,version:ee}}))(O,f).fold(Mw,rv),F=(($,J,oe,ee)=>{const te=$.isiOS()&&/ipad/i.test(oe)===!0,se=$.isiOS()&&!te,he=$.isiOS()||$.isAndroid(),me=he||ee("(pointer:coarse)"),Se=te||!se&&he&&ee("(min-device-width:768px)"),De=se||he&&!Se,Fe=J.isSafari()&&$.isiOS()&&/safari/i.test(oe)===!1,Me=!De&&!Se&&!Fe;return{isiPad:Ft(te),isiPhone:Ft(se),isTablet:Ft(Se),isPhone:Ft(De),isTouch:Ft(me),isAndroid:$.isAndroid,isiOS:$.isiOS,isWebView:Ft(Fe),isDesktop:Ft(Me)}})(M,A,f,y);return{browser:A,os:M,deviceType:F}})(navigator.userAgent,ce.from(navigator.userAgentData),av));const jm=()=>ub(),fl=(f,h)=>{const y=O=>{const A=h(O);if(A<=0||A===null){const M=Ht(O,f);return parseFloat(M)||0}return A},C=(O,A)=>Je(A,(M,F)=>{const $=Ht(O,F),J=$===void 0?0:parseInt($,10);return isNaN(J)?M:M+J},0);return{set:(O,A)=>{if(!Pl(A)&&!A.match(/^[0-9]+$/))throw new Error(f+".set accepts only positive integer values. Value was "+A);const M=O.dom;zl(M)&&(M.style[f]=A+"px")},get:y,getOuter:y,aggregate:C,max:(O,A,M)=>{const F=C(O,M);return A>F?A-F:0}}},po=(f,h,y)=>((C,O)=>(A=>{const M=parseFloat(A);return isNaN(M)?ce.none():ce.some(M)})(C).getOr(O))(Ht(f,h),y),rh=fl("width",f=>f.dom.offsetWidth),Yi=f=>rh.get(f),Fu=f=>rh.getOuter(f),qm=f=>((h,y)=>{const C=h.dom,O=C.getBoundingClientRect().width||C.offsetWidth;return y==="border-box"?O:((A,M,F,$)=>M-po(A,`padding-${F}`,0)-po(A,`padding-${$}`,0)-po(A,`border-${F}-width`,0)-po(A,`border-${$}-width`,0))(h,O,"left","right")})(f,"content-box"),ba=(f,h,y)=>{const C=f.cells,O=C.slice(0,h),A=C.slice(h),M=O.concat(y).concat(A);return ah(f,M)},ys=(f,h,y)=>ba(f,h,[y]),Gm=(f,h,y)=>{f.cells[h]=y},ah=(f,h)=>Er(f.element,h,f.section,f.isNew),Is=(f,h)=>f.cells[h],cs=(f,h)=>Is(f,h).element,An=f=>f.cells.length,Yn=f=>{const h=oo(f,y=>y.section==="colgroup");return{rows:h.fail,cols:h.pass}},xa=(f,h,y)=>{const C=E(f.cells,y);return Er(h(f.element),C,f.section,!0)},ri="data-snooker-locked-cols",Km=f=>mt(f,ri).bind(h=>ce.from(h.match(/\d+/g))).map(h=>xt(h,kt)),ds=f=>{const h=Je(Yn(f).rows,(C,O)=>(ao(O.cells,(A,M)=>{A.isLocked&&(C[M]=!0)}),C),{}),y=Io(h,(C,O)=>parseInt(O,10));return((C,O)=>{const A=Rn.call(C,0);return A.sort(void 0),A})(y)},mg=(f,h)=>f+","+h,Ts=(f,h)=>{const y=hs(f.all,C=>C.cells);return Uo(y,h)},Gs=f=>{const h={},y=[],C=Jt(f).map(te=>te.element).bind(To).bind(Km).getOr({});let O=0,A=0,M=0;const{pass:F,fail:$}=oo(f,te=>te.section==="colgroup");ao($,te=>{const se=[];ao(te.cells,he=>{let me=0;for(;h[mg(M,me)]!==void 0;)me++;const Se=((Fe,Me)=>no(Fe,Me)&&Fe[Me]!==void 0&&Fe[Me]!==null)(C,me.toString()),De=((Fe,Me,He,Ze,et,At)=>({element:Fe,rowspan:Me,colspan:He,row:Ze,column:et,isLocked:At}))(he.element,he.rowspan,he.colspan,M,me,Se);for(let Fe=0;Fe<he.colspan;Fe++)for(let Me=0;Me<he.rowspan;Me++){const He=me+Fe,Ze=mg(M+Me,He);h[Ze]=De,A=Math.max(A,He+1)}se.push(De)}),O++,y.push(Go(te.element,se,te.section)),M++});const{columns:J,colgroups:oe}=kn(F).map(te=>{const se=(me=>{const Se={};let De=0;return ao(me.cells,Fe=>{const Me=Fe.colspan;Pt(Me,He=>{const Ze=De+He;Se[Ze]=((et,At,Nt)=>({element:et,colspan:At,column:Nt}))(Fe.element,Me,Ze)}),De+=Me}),Se})(te);return{colgroups:[((me,Se)=>({element:me,columns:Se}))(te.element,bn(se))],columns:se}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:((te,se)=>({rows:te,columns:se}))(O,A),access:h,all:y,columns:J,colgroups:oe}},Ls=f=>{const h=ha(f);return Gs(h)},Ym=Gs,Xn=(f,h,y)=>ce.from(f.access[mg(h,y)]),fg=(f,h,y)=>{const C=Ts(f,O=>y(h,O.element));return C.length>0?ce.some(C[0]):ce.none()},ih=Ts,gg=f=>hs(f.all,h=>h.cells),mo=f=>bn(f.columns),Ks=f=>qo(f.columns).length>0,pg=(f,h)=>ce.from(f.columns[h]),xd=(f,h=kt)=>{const y=f.grid,C=Pt(y.columns,jo),O=Pt(y.rows,jo);return E(C,A=>mb(()=>hs(O,M=>Xn(f,M,A).filter(F=>F.column===A).toArray()),M=>M.colspan===1&&h(M.element),()=>Xn(f,0,A)))},mb=(f,h,y)=>{const C=f();return bo(C,h).orThunk(()=>ce.from(C[0]).orThunk(y)).map(O=>O.element)},Ul=f=>{const h=f.grid,y=Pt(h.rows,jo),C=Pt(h.columns,jo);return E(y,O=>mb(()=>hs(C,A=>Xn(f,O,A).filter(M=>M.row===O).fold(Ft([]),M=>[M])),A=>A.rowspan===1,()=>Xn(f,O,0)))},vd=(f,h)=>y=>Bw(y)==="rtl"?h:f,Bw=f=>Ht(f,"direction")==="rtl"?"rtl":"ltr",fb=fl("height",f=>{const h=f.dom;return rr(f)?h.getBoundingClientRect().height:h.offsetHeight}),Tc=f=>fb.get(f),iv=f=>fb.getOuter(f),X=(f,h)=>({left:f,top:h,translate:(y,C)=>X(f+y,h+C)}),Zl=X,Qr=(f,h)=>f!==void 0?f:h!==void 0?h:0,yd=f=>{const h=f.dom.ownerDocument,y=h.body,C=h.defaultView,O=h.documentElement;if(y===f.dom)return Zl(y.offsetLeft,y.offsetTop);const A=Qr(C==null?void 0:C.pageYOffset,O.scrollTop),M=Qr(C==null?void 0:C.pageXOffset,O.scrollLeft),F=Qr(O.clientTop,y.clientTop),$=Qr(O.clientLeft,y.clientLeft);return gb(f).translate(M-$,A-F)},gb=f=>{const h=f.dom,y=h.ownerDocument.body;return y===h?Zl(y.offsetLeft,y.offsetTop):rr(f)?(C=>{const O=C.getBoundingClientRect();return Zl(O.left,O.top)})(h):Zl(0,0)},pb=(f,h)=>({row:f,y:h}),Lo=(f,h)=>({col:f,x:h}),ai=f=>yd(f).left+Fu(f),wd=f=>yd(f).left,gl=(f,h)=>Lo(f,wd(h)),hb=(f,h)=>Lo(f,ai(h)),Hu=f=>yd(f).top,Ei=(f,h)=>pb(f,Hu(h)),lh=(f,h)=>pb(f,Hu(h)+iv(h)),ea=(f,h,y)=>{if(y.length===0)return[];const C=E(y.slice(1),(A,M)=>A.map(F=>f(M,F))),O=y[y.length-1].map(A=>h(y.length-1,A));return C.concat([O])},St={delta:jo,positions:f=>ea(Ei,lh,f),edge:Hu},va=vd({delta:jo,edge:wd,positions:f=>ea(gl,hb,f)},{delta:f=>-f,edge:ai,positions:f=>ea(hb,gl,f)}),Wl={delta:(f,h)=>va(h).delta(f,h),positions:(f,h)=>va(h).positions(f,h),edge:f=>va(f).edge(f)},lv={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},ch=(()=>{const f="[0-9]+",h="[eE][+-]?"+f,y=O=>`(?:${O})?`,C=["Infinity",f+"\\."+y(f)+y(h),"\\."+f+y(h),f+y(h)].join("|");return new RegExp(`^([+-]?(?:${C}))(.*)$`)})(),Mn=/(\d+(\.\d+)?)%/,Oc=/(\d+(\.\d+)?)px|em/,Xm=fr("col"),Os=(f,h,y)=>{const C=kc(f).getOrThunk(()=>lg(Hm(f)));return h(f)/y(C)*100},Cd=(f,h)=>{xs(f,"width",h+"px")},dh=(f,h)=>{xs(f,"width",h+"%")},hg=(f,h)=>{xs(f,"height",h+"px")},bb=f=>{const h=(y=>{return po(C=y,"height",C.dom.offsetHeight)+"px";var C})(f);return h?((y,C,O,A)=>{const M=parseFloat(y);return ki(y,"%")&&xn(C)!=="table"?((F,$,J,oe)=>{const ee=To(F).map(te=>{const se=J(te);return Math.floor($/100*se)}).getOr($);return oe(F,ee),ee})(C,M,O,A):M})(h,f,Tc,hg):Tc(f)},_d=(f,h)=>Vl(f,h).orThunk(()=>mt(f,h).map(y=>y+"px")),jl=f=>_d(f,"width"),Ac=f=>Os(f,Yi,qm),Bn=f=>{return Xm(f)?Yi(f):po(h=f,"width",h.dom.offsetWidth);var h},Xi=f=>((h,y,C)=>C(h)/vs(h,"rowspan"))(f,0,bb),ta=(f,h,y)=>{xs(f,"width",h+y)},zu=f=>Os(f,Yi,qm)+"%",ya=Ft(Mn),cv=fr("col"),ws=f=>jl(f).getOrThunk(()=>Bn(f)+"px"),$r=f=>{return(h=f,_d(h,"height")).getOrThunk(()=>Xi(f)+"px");var h},Ti=(f,h,y,C,O,A)=>f.filter(C).fold(()=>A(((M,F)=>{if(F<0||F>=M.length-1)return ce.none();const $=M[F].fold(()=>{const oe=(ee=>{const te=Rn.call(ee,0);return te.reverse(),te})(M.slice(0,F));return I(oe,(ee,te)=>ee.map(se=>({value:se,delta:te+1})))},oe=>ce.some({value:oe,delta:0})),J=M[F+1].fold(()=>{const oe=M.slice(F+1);return I(oe,(ee,te)=>ee.map(se=>({value:se,delta:te+1})))},oe=>ce.some({value:oe,delta:1}));return $.bind(oe=>J.map(ee=>{const te=ee.delta+oe.delta;return Math.abs(ee.value-oe.value)/te}))})(y,h)),M=>O(M)),Ee=(f,h,y,C)=>{const O=xd(f),A=Ks(f)?($=>E(mo($),J=>ce.from(J.element)))(f):O,M=[ce.some(Wl.edge(h))].concat(E(Wl.positions(O,h),$=>$.map(J=>J.x))),F=eo(Lu);return E(A,($,J)=>Ti($,J,M,F,oe=>{if((te=>{const se=jm().browser,he=se.isChromium()||se.isFirefox();return!cv(te)||he})(oe))return y(oe);{const te=(ee=O[J])!=null?jo(ee):ce.none();return Ti(te,J,M,F,se=>C(ce.some(Yi(se))),C)}var ee},C))},La=f=>f.map(h=>h+"px").getOr(""),xb=(f,h,y)=>Ee(f,h,Bn,C=>C.getOrThunk(y.minCellWidth)),us=(f,h,y,C,O)=>{const A=Ul(f),M=[ce.some(y.edge(h))].concat(E(y.positions(A,h),F=>F.map($=>$.y)));return E(A,(F,$)=>Ti(F,$,M,eo(Um),C,O))},wa=(f,h)=>()=>rr(f)?h(f):parseFloat(Vl(f,"width").getOr("0")),oa=f=>{const h=wa(f,C=>parseFloat(zu(C))),y=wa(f,Yi);return{width:h,pixelWidth:y,getWidths:(C,O)=>((A,M,F)=>Ee(A,M,Ac,$=>$.fold(()=>F.minCellWidth(),J=>J/F.pixelWidth()*100)))(C,f,O),getCellDelta:C=>C/y()*100,singleColumnWidth:(C,O)=>[100-C],minCellWidth:()=>z()/y()*100,setElementWidth:dh,adjustTableWidth:C=>{const O=h();dh(f,O+C/100*O)},isRelative:!0,label:"percent"}},Fa=f=>{const h=wa(f,Yi);return{width:h,pixelWidth:h,getWidths:(y,C)=>xb(y,f,C),getCellDelta:jo,singleColumnWidth:(y,C)=>[Math.max(z(),y+C)-y],minCellWidth:z,setElementWidth:Cd,adjustTableWidth:y=>{const C=h()+y;Cd(f,C)},isRelative:!1,label:"pixel"}},bg=f=>jl(f).fold(()=>(h=>{const y=wa(h,Yi),C=Ft(0);return{width:y,pixelWidth:y,getWidths:(O,A)=>xb(O,h,A),getCellDelta:C,singleColumnWidth:Ft([0]),minCellWidth:C,setElementWidth:_t,adjustTableWidth:_t,isRelative:!0,label:"none"}})(f),h=>((y,C)=>ya().exec(C)!==null?oa(y):Fa(y))(f,h)),gr=Fa,zo=oa,ii=(f,h,y)=>{const C=f[y].element,O=ze.fromTag("td");Tn(O,ze.fromTag("br")),(h?Tn:rg)(C,O)},kd=((f,h)=>{const y=C=>f(C)?ce.from(C.dom.nodeValue):ce.none();return{get:C=>{if(!f(C))throw new Error("Can only get text value of a text node");return y(C).getOr("")},getOption:y,set:(C,O)=>{if(!f(C))throw new Error("Can only set raw text value of a text node");C.dom.nodeValue=O}}})(Ho),pr=f=>kd.get(f),uh=f=>kd.getOption(f),ql=(f,h)=>kd.set(f,h),Ur=f=>xn(f)==="img"?1:uh(f).fold(()=>ga(f).length,h=>h.length),Ha=["img","br"],fe=f=>uh(f).filter(h=>h.trim().length!==0||h.indexOf(" ")>-1).isSome()||_o(Ha,xn(f))||(h=>fd(h)&&Ln(h,"contenteditable")==="false")(f),Ca=f=>((h,y)=>{const C=O=>{for(let A=0;A<O.childNodes.length;A++){const M=ze.fromDom(O.childNodes[A]);if(y(M))return ce.some(M);const F=C(O.childNodes[A]);if(F.isSome())return F}return ce.none()};return C(h.dom)})(f,fe),xg=f=>Nc(f,fe),Nc=(f,h)=>{const y=C=>{const O=ga(C);for(let A=O.length-1;A>=0;A--){const M=O[A];if(h(M))return ce.some(M);const F=y(M);if(F.isSome())return F}return ce.none()};return y(f)},As={scope:["row","col"]},Vn=f=>()=>{const h=ze.fromTag("td",f.dom);return Tn(h,ze.fromTag("br",f.dom)),h},ms=f=>()=>ze.fromTag("col",f.dom),Pn=f=>()=>ze.fromTag("colgroup",f.dom),vg=f=>()=>ze.fromTag("tr",f.dom),Ot=(f,h,y)=>{const C=((O,A)=>{const M=ag(O,A),F=ga(Bu(O));return Hr(M,F),M})(f,h);return hn(y,(O,A)=>{O===null?Dt(C,A):Dn(C,A,O)}),C},Zr=f=>f,li=(f,h,y)=>{const C=(O,A)=>{((M,F)=>{const $=M.dom,J=F.dom;zl($)&&zl(J)&&(J.style.cssText=$.style.cssText)})(O.element,A),Gn(A,"height"),O.colspan!==1&&Gn(A,"width")};return{col:O=>{const A=ze.fromTag(xn(O.element),h.dom);return C(O,A),f(O.element,A),A},colgroup:Pn(h),row:vg(h),cell:O=>{const A=ze.fromTag(xn(O.element),h.dom),M=y.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),F=M.length>0?(($,J,oe)=>Ca($).map(ee=>{const te=oe.join(","),se=yn(ee,te,he=>vn(he,$));return Pa(se,(he,me)=>{const Se=nh(me);return Tn(he,Se),Se},J)}).getOr(J))(O.element,A,M):A;return Tn(F,ze.fromTag("br")),C(O,A),(($,J)=>{hn(As,(oe,ee)=>mt($,ee).filter(te=>_o(oe,te)).each(te=>Dn(J,ee,te)))})(O.element,A),f(O.element,A),A},replace:Ot,colGap:ms(h),gap:Vn(h)}},en=f=>({col:ms(f),colgroup:Pn(f),row:vg(f),cell:Vn(f),replace:Zr,colGap:ms(f),gap:Vn(f)}),_a=f=>h=>h.options.get(f),vb="100%",Vu=f=>{var h;const y=f.dom,C=(h=y.getParent(f.selection.getStart(),y.isBlock))!==null&&h!==void 0?h:f.getBody();return qm(ze.fromDom(C))+"px"},mh=f=>ce.from(f.options.get("table_clone_elements")),yg=_a("table_header_type"),Sd=_a("table_column_resizing"),ar=f=>Sd(f)==="preservetable",Gl=f=>Sd(f)==="resizetable",$u=_a("table_sizing_mode"),Kl=f=>$u(f)==="relative",Uu=f=>$u(f)==="fixed",na=f=>$u(f)==="responsive",wg=_a("table_resize_bars"),Rc=_a("table_style_by_css"),yb=_a("table_merge_content_on_paste"),Ji=f=>{const h=f.options,y=h.get("table_default_attributes");return h.isSet("table_default_attributes")?y:((C,O)=>na(C)||Rc(C)?O:Uu(C)?{...O,width:Vu(C)}:{...O,width:vb})(f,y)},Dc=_a("table_use_colgroups"),Cg=f=>ls(f,"[contenteditable]"),sa=(f,h=!1)=>rr(f)?f.dom.isContentEditable:Cg(f).fold(Ft(h),y=>wb(y)==="true"),wb=f=>f.dom.contentEditable,pl=f=>ze.fromDom(f.getBody()),hl=f=>h=>vn(h,pl(f)),ci=f=>{Dt(f,"data-mce-style");const h=y=>Dt(y,"data-mce-style");ao(Tt(f),h),ao(Xt(f),h),ao(ko(f),h)},_g=f=>ze.fromDom(f.selection.getStart()),Jm=f=>f.getBoundingClientRect().width,Cb=f=>f.getBoundingClientRect().height,hr=f=>Iu(f,fr("table")).exists(sa),os=(f,h)=>{const y=h.column,C=h.column+h.colspan-1,O=h.row,A=h.row+h.rowspan-1;return y<=f.finishCol&&C>=f.startCol&&O<=f.finishRow&&A>=f.startRow},Ys=(f,h)=>h.column>=f.startCol&&h.column+h.colspan-1<=f.finishCol&&h.row>=f.startRow&&h.row+h.rowspan-1<=f.finishRow,za=(f,h,y)=>{const C=fg(f,h,vn),O=fg(f,y,vn);return C.bind(A=>O.map(M=>{return F=A,$=M,{startRow:Math.min(F.row,$.row),startCol:Math.min(F.column,$.column),finishRow:Math.max(F.row+F.rowspan-1,$.row+$.rowspan-1),finishCol:Math.max(F.column+F.colspan-1,$.column+$.colspan-1)};var F,$}))},Zu=(f,h,y)=>za(f,h,y).map(C=>{const O=ih(f,Xe(os,C));return E(O,A=>A.element)}),dt=(f,h)=>fg(f,h,(y,C)=>gd(C,y)).map(y=>y.element),Va=(f,h,y)=>{const C=Qi(f);return Zu(C,h,y)},ka=(f,h,y,C,O)=>{const A=Qi(f),M=vn(f,y)?ce.some(h):dt(A,h),F=vn(f,O)?ce.some(C):dt(A,C);return M.bind($=>F.bind(J=>Zu(A,$,J)))},Qi=Ls;var $a=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Wu=()=>({up:Ft({selector:zr,closest:ls,predicate:Sc,all:an}),down:Ft({selector:_i,predicate:Fn}),styles:Ft({get:Ht,getRaw:Vl,set:xs,remove:Gn}),attrs:Ft({get:Ln,set:Dn,remove:Dt,copyTo:(f,h)=>{const y=Zs(f);qi(h,y)}}),insert:Ft({before:pd,after:ot,afterAll:hd,append:Tn,appendAll:Hr,prepend:rg,wrap:zm}),remove:Ft({unwrap:Ws,remove:Sr}),create:Ft({nu:ze.fromTag,clone:f=>ze.fromDom(f.dom.cloneNode(!1)),text:ze.fromText}),query:Ft({comparePosition:(f,h)=>f.dom.compareDocumentPosition(h.dom),prevSibling:jt,nextSibling:oi}),property:Ft({children:ga,name:xn,parent:ti,document:f=>wi(f).dom,isText:Ho,isComment:Ao,isElement:In,isSpecial:f=>{const h=xn(f);return _o(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],h)},getLanguage:f=>In(f)?mt(f,"lang"):ce.none(),getText:pr,setText:ql,isBoundary:f=>!!In(f)&&(xn(f)==="body"||_o($a,xn(f))),isEmptyTag:f=>!!In(f)&&_o(["br","img","hr","input"],xn(f)),isNonEditable:f=>In(f)&&Ln(f,"contenteditable")==="false"}),eq:vn,is:kr});const kg=(f,h,y,C)=>{const O=h(f,y);return Pa(C,(A,M)=>{const F=h(f,M);return _b(f,A,F)},O)},_b=(f,h,y)=>h.bind(C=>y.filter(Xe(f.eq,C))),bl=Wu(),kb=(f,h)=>((y,C,O)=>O.length>0?((A,M,F,$)=>$(A,M,F[0],F.slice(1)))(y,C,O,kg):ce.none())(bl,(y,C)=>f(C),h),xl=f=>zr(f,"table"),ju=(f,h,y)=>{const C=O=>A=>y!==void 0&&y(A)||vn(A,O);return vn(f,h)?ce.some({boxes:ce.some([f]),start:f,finish:h}):xl(f).bind(O=>xl(h).bind(A=>{if(vn(O,A))return ce.some({boxes:Va(O,f,h),start:f,finish:h});if(gd(O,A)){const M=yn(h,"td,th",C(O)),F=M.length>0?M[M.length-1]:h;return ce.some({boxes:ka(O,f,O,h,A),start:f,finish:F})}if(gd(A,O)){const M=yn(f,"td,th",C(A)),F=M.length>0?M[M.length-1]:f;return ce.some({boxes:ka(A,f,O,h,A),start:f,finish:F})}return((M,F,$)=>((J,oe,ee,te=ue)=>{const se=[oe].concat(J.up().all(oe)),he=[ee].concat(J.up().all(ee)),me=Me=>Yr(Me,te).fold(()=>Me,He=>Me.slice(0,He+1)),Se=me(se),De=me(he),Fe=bo(Se,Me=>Ne(De,((He,Ze)=>Xe(He.eq,Ze))(J,Me)));return{firstpath:Se,secondpath:De,shared:Fe}})(bl,M,F,void 0))(f,h).shared.bind(M=>ls(M,"table",y).bind(F=>{const $=yn(h,"td,th",C(F)),J=$.length>0?$[$.length-1]:h,oe=yn(f,"td,th",C(F)),ee=oe.length>0?oe[oe.length-1]:f;return ce.some({boxes:ka(F,f,O,h,A),start:ee,finish:J})}))}))},Ed=(f,h)=>{const y=_i(f,h);return y.length>0?ce.some(y):ce.none()},Le=(f,h,y)=>Gi(f,h).bind(C=>Gi(f,y).bind(O=>kb(xl,[C,O]).map(A=>({first:C,last:O,table:A})))),Qm=(f,h,y,C,O)=>((A,M)=>bo(A,F=>Fr(F,M)))(f,O).bind(A=>((M,F,$)=>To(M).bind(J=>((oe,ee,te,se)=>fg(oe,ee,vn).bind(he=>{const me=te>0?he.row+he.rowspan-1:he.row,Se=se>0?he.column+he.colspan-1:he.column;return Xn(oe,me+te,Se+se).map(De=>De.element)}))(Qi(J),M,F,$)))(A,h,y).bind(M=>((F,$)=>zr(F,"table").bind(J=>Gi(J,$).bind(oe=>ju(oe,F).bind(ee=>ee.boxes.map(te=>({boxes:te,start:ee.start,finish:ee.finish}))))))(M,C))),Td=(f,h)=>Ed(f,h),Mc=(f,h,y)=>Le(f,h,y).bind(C=>{const O=$=>vn(f,$),A="thead,tfoot,tbody,table",M=zr(C.first,A,O),F=zr(C.last,A,O);return M.bind($=>F.bind(J=>vn($,J)?((oe,ee,te)=>((se,he,me)=>za(se,he,me).bind(Se=>((De,Fe)=>{let Me=!0;const He=Xe(Ys,Fe);for(let Ze=Fe.startRow;Ze<=Fe.finishRow;Ze++)for(let et=Fe.startCol;et<=Fe.finishCol;et++)Me=Me&&Xn(De,Ze,et).exists(He);return Me?ce.some(Fe):ce.none()})(se,Se)))(Qi(oe),ee,te))(C.table,C.first,C.last):ce.none()))}),Bc=jo,Sg=f=>{const h=(y,C)=>mt(y,C).exists(O=>parseInt(O,10)>1);return f.length>0&&Ke(f,y=>h(y,"rowspan")||h(y,"colspan"))?ce.some(f):ce.none()},Jn=(f,h,y)=>h.length<=1?ce.none():Mc(f,y.firstSelectedSelector,y.lastSelectedSelector).map(C=>({bounds:C,cells:h})),ef="data-mce-selected",Ua="data-mce-first-selected",ln="data-mce-last-selected",tf="["+ef+"]",xo={selected:ef,selectedSelector:"td["+ef+"],th["+ef+"]",firstSelected:Ua,firstSelectedSelector:"td["+Ua+"],th["+Ua+"]",lastSelected:ln,lastSelectedSelector:"td["+ln+"],th["+ln+"]"},ut=(f,h,y)=>({element:y,mergable:Jn(h,f,xo),unmergable:Sg(f),selection:Bc(f)}),Od=f=>(h,y)=>{const C=xn(h),O=C==="col"||C==="colgroup"?To(A=h).bind(M=>Td(M,xo.firstSelectedSelector)).fold(Ft(A),M=>M[0]):h;var A;return ls(O,f,y)},Eg=Od("th,td,caption"),Tg=Od("th,td"),Za=f=>{return h=f.model.table.getSelectedCells(),E(h,ze.fromDom);var h},uo=(f,h)=>{f.on("BeforeGetContent",y=>{const C=O=>{y.preventDefault(),(A=>To(A[0]).map(M=>{const F=(($,J)=>{const oe=Me=>Fr(Me.element,J),ee=Bu($),te=ha(ee),se=bg($),he=Ym(te),me=((Me,He)=>{const Ze=Me.grid.columns;let et=Me.grid.rows,At=Ze,Nt=0,No=0;const Vt=[],ro=[];return hn(Me.access,to=>{if(Vt.push(to),He(to)){ro.push(to);const Vo=to.row,je=Vo+to.rowspan-1,er=to.column,ks=er+to.colspan-1;Vo<et?et=Vo:je>Nt&&(Nt=je),er<At?At=er:ks>No&&(No=ks)}}),((to,Vo,je,er,ks,Aa)=>({minRow:to,minCol:Vo,maxRow:je,maxCol:er,allCells:ks,selectedCells:Aa}))(et,At,Nt,No,Vt,ro)})(he,oe),Se="th:not("+J+"),td:not("+J+")",De=_e(ee,"th,td",Me=>Fr(Me,Se));ao(De,Sr),((Me,He,Ze,et)=>{const At=Uo(Me,Vt=>Vt.section!=="colgroup"),Nt=He.grid.columns,No=He.grid.rows;for(let Vt=0;Vt<No;Vt++){let ro=!1;for(let to=0;to<Nt;to++)Vt<Ze.minRow||Vt>Ze.maxRow||to<Ze.minCol||to>Ze.maxCol||(Xn(He,Vt,to).filter(et).isNone()?ii(At,ro,Vt):ro=!0)}})(te,he,me,oe);const Fe=((Me,He,Ze,et)=>{if(et.minCol===0&&He.grid.columns===et.maxCol+1)return 0;const At=xb(He,Me,Ze),Nt=Je(At,(ro,to)=>ro+to,0),No=Je(At.slice(et.minCol,et.maxCol+1),(ro,to)=>ro+to,0),Vt=No/Nt*Ze.pixelWidth()-Ze.pixelWidth();return Ze.getCellDelta(Vt)})($,Ls($),se,me);return((Me,He,Ze,et)=>{hn(Ze.columns,Nt=>{(Nt.column<He.minCol||Nt.column>He.maxCol)&&Sr(Nt.element)});const At=Uo(de(Me,"tr"),Nt=>Nt.dom.childElementCount===0);ao(At,Sr),He.minCol!==He.maxCol&&He.minRow!==He.maxRow||ao(de(Me,"th,td"),Nt=>{Dt(Nt,"rowspan"),Dt(Nt,"colspan")}),Dt(Me,ri),Dt(Me,"data-snooker-col-series"),bg(Me).adjustTableWidth(et)})(ee,me,he,Fe),ee})(M,tf);return ci(F),[F]}))(O).each(A=>{y.content=y.format==="text"?(M=>E(M,F=>F.dom.innerText).join(""))(A):((M,F)=>E(F,$=>M.selection.serializer.serialize($.dom,{})).join(""))(f,A)})};if(y.selection===!0){const O=(A=>Uo(Za(A),M=>Fr(M,xo.selectedSelector)))(f);O.length>=1&&C(O)}}),f.on("BeforeSetContent",y=>{if(y.selection===!0&&y.paste===!0){const C=Za(f);Jt(C).each(O=>{To(O).each(A=>{const M=Uo((($,J)=>{const oe=document.createElement("div");return oe.innerHTML=$,ga(ze.fromDom(oe))})(y.content),$=>xn($)!=="meta"),F=fr("table");if(yb(f)&&M.length===1&&F(M[0])){y.preventDefault();const $=ze.fromDom(f.getDoc()),J=en($),oe=((ee,te,se)=>({element:ee,clipboard:te,generators:se}))(O,M[0],J);h.pasteCells(A,oe).each(()=>{f.focus()})}})})}})},Ad=(f,h)=>({element:f,offset:h}),Sb=(f,h,y)=>f.property().isText(h)&&f.property().getText(h).trim().length===0||f.property().isComment(h)?y(h).bind(C=>Sb(f,C,y).orThunk(()=>ce.some(C))):ce.none(),Re=(f,h)=>f.property().isText(h)?f.property().getText(h).length:f.property().children(h).length,of=(f,h)=>{const y=Sb(f,h,f.query().prevSibling).getOr(h);if(f.property().isText(y))return Ad(y,Re(f,y));const C=f.property().children(y);return C.length>0?of(f,C[C.length-1]):Ad(y,Re(f,y))},qu=of,Gu=Wu(),Eb=(f,h)=>{Lu(f)||(C=>jl(C).bind(O=>{return A=O,M=["fixed","relative","empty"],ce.from(ch.exec(A)).bind(F=>{const $=Number(F[1]),J=F[2];return((oe,ee)=>Ne(ee,te=>Ne(lv[te],se=>oe===se)))(J,M)?ce.some({value:$,unit:J}):ce.none()});var A,M}))(f).each(C=>{const O=C.value/2;ta(f,O,C.unit),ta(h,O,C.unit)})},Yl=f=>E(f,Ft(0)),dv=(f,h,y,C,O)=>O(f.slice(0,h)).concat(C).concat(O(f.slice(y))),Ku=f=>(h,y,C,O)=>{if(f(C)){const A=Math.max(O,h[y]-Math.abs(C)),M=Math.abs(A-h[y]);return C>=0?M:-M}return C},cn=Ku(f=>f<0),Xl=Ku(kt),uv=()=>{const f=(y,C,O,A)=>{const M=(100+O)/100,F=Math.max(A,(y[C]+O)/M);return E(y,($,J)=>(J===C?F:$/M)-$)},h=(y,C,O,A,M,F)=>F?f(y,C,A,M):(($,J,oe,ee,te)=>{const se=cn($,J,ee,te);return dv($,J,oe+1,[se,0],Yl)})(y,C,O,A,M);return{resizeTable:(y,C)=>y(C),clampTableDelta:cn,calcLeftEdgeDeltas:h,calcMiddleDeltas:(y,C,O,A,M,F,$)=>h(y,O,A,M,F,$),calcRightEdgeDeltas:(y,C,O,A,M,F)=>{if(F)return f(y,O,A,M);{const $=cn(y,O,A,M);return Yl(y.slice(0,O)).concat([$])}},calcRedestributedWidths:(y,C,O,A)=>{if(A){const M=(C+O)/C,F=E(y,$=>$/M);return{delta:100*M-100,newSizes:F}}return{delta:O,newSizes:y}}}},Sa=()=>{const f=(h,y,C,O,A)=>{const M=Xl(h,O>=0?C:y,O,A);return dv(h,y,C+1,[M,-M],Yl)};return{resizeTable:(h,y,C)=>{C&&h(y)},clampTableDelta:(h,y,C,O,A)=>{if(A){if(C>=0)return C;{const M=Je(h,(F,$)=>F+$-O,0);return Math.max(-M,C)}}return cn(h,y,C,O)},calcLeftEdgeDeltas:f,calcMiddleDeltas:(h,y,C,O,A,M)=>f(h,C,O,A,M),calcRightEdgeDeltas:(h,y,C,O,A,M)=>{if(M)return Yl(h);{const F=O/h.length;return E(h,Ft(F))}},calcRedestributedWidths:(h,y,C,O)=>({delta:0,newSizes:h})}},Og=f=>Ls(f).grid,Wa=fr("th"),nf=f=>Ke(f,h=>Wa(h.element)),Jl=(f,h)=>f&&h?"sectionCells":f?"section":"cells",sf=f=>{const h=f.section==="thead",y=bd(fh(f.cells),"th");return f.section==="tfoot"?{type:"footer"}:h||y?{type:"header",subType:Jl(h,y)}:{type:"body"}},fh=f=>{const h=Uo(f,y=>Wa(y.element));return h.length===0?ce.some("td"):h.length===f.length?ce.some("th"):ce.none()},Yu=(f,h,y)=>Es(y(f.element,h),!0,f.isLocked),Xu=(f,h)=>f.section!==h?Er(f.element,f.cells,h,f.isNew):f,lt=()=>({transformRow:Xu,transformCell:(f,h,y)=>{const C=y(f.element,h),O=xn(C)!=="td"?((A,M)=>{const F=ag(A,"td");ot(A,F);const $=ga(A);return Hr(F,$),Sr(A),F})(C):C;return Es(O,f.isNew,f.isLocked)}}),mv=()=>({transformRow:Xu,transformCell:Yu}),rf=()=>({transformRow:(f,h)=>Xu(f,h==="thead"?"tbody":h),transformCell:Yu}),Nd=lt,fv=mv,Ns=rf,Rd=()=>({transformRow:jo,transformCell:Yu}),Fs=(f,h,y,C)=>{y===C?Dt(f,h):Dn(f,h,y)},gv=(f,h,y)=>{kn(Fl(f,h)).fold(()=>rg(f,y),C=>ot(C,y))},gh=(f,h)=>{const y=[],C=[],O=te=>E(te,se=>{se.isNew&&y.push(se.element);const he=se.element;return ml(he),ao(se.cells,me=>{me.isNew&&C.push(me.element),Fs(me.element,"colspan",me.colspan,1),Fs(me.element,"rowspan",me.rowspan,1),Tn(he,me.element)}),he}),A=te=>hs(te,se=>E(se.cells,he=>(Fs(he.element,"span",he.colspan,1),he.element))),M=(te,se)=>{const he=((Se,De)=>{const Fe=bs(Se,De).getOrThunk(()=>{const Me=ze.fromTag(De,Hm(Se).dom);return De==="thead"?gv(Se,"caption,colgroup",Me):De==="colgroup"?gv(Se,"caption",Me):Tn(Se,Me),Me});return ml(Fe),Fe})(f,se),me=(se==="colgroup"?A:O)(te);Hr(he,me)},F=(te,se)=>{te.length>0?M(te,se):(he=>{bs(f,he).each(Sr)})(se)},$=[],J=[],oe=[],ee=[];return ao(h,te=>{switch(te.section){case"thead":$.push(te);break;case"tbody":J.push(te);break;case"tfoot":oe.push(te);break;case"colgroup":ee.push(te)}}),F(ee,"colgroup"),F($,"thead"),F(J,"tbody"),F(oe,"tfoot"),{newRows:y,newCells:C}},Ju=(f,h)=>{if(f.length===0)return 0;const y=f[0];return Yr(f,C=>!h(y.element,C.element)).getOr(f.length)},Dd=(f,h)=>{const y=E(f,C=>E(C.cells,ue));return E(f,(C,O)=>{const A=hs(C.cells,(M,F)=>{if(y[O][F]===!1){const te=((se,he,me,Se)=>{const De=((Ze,et)=>Ze[et])(se,he),Fe=De.section==="colgroup",Me=Ju(De.cells.slice(me),Se),He=Fe?1:Ju(((Ze,et)=>E(Ze,At=>Is(At,et)))(se.slice(he),me),Se);return{colspan:Me,rowspan:He}})(f,O,F,h);return((se,he,me,Se)=>{for(let De=se;De<se+me;De++)for(let Fe=he;Fe<he+Se;Fe++)y[De][Fe]=!0})(O,F,te.rowspan,te.colspan),[($=M.element,J=te.rowspan,oe=te.colspan,ee=M.isNew,{element:$,rowspan:J,colspan:oe,isNew:ee})]}return[];var $,J,oe,ee});return((M,F,$,J)=>({element:M,cells:F,section:$,isNew:J}))(C.element,A,C.section,C.isNew)})},di=(f,h,y)=>{const C=[];ao(f.colgroups,O=>{const A=[];for(let M=0;M<f.grid.columns;M++){const F=pg(f,M).map($=>Es($.element,y,!1)).getOrThunk(()=>Es(h.colGap(),!0,!1));A.push(F)}C.push(Er(O.element,A,"colgroup",y))});for(let O=0;O<f.grid.rows;O++){const A=[];for(let $=0;$<f.grid.columns;$++){const J=Xn(f,O,$).map(oe=>Es(oe.element,y,oe.isLocked)).getOrThunk(()=>Es(h.gap(),!0,!1));A.push(J)}const M=f.all[O],F=Er(M.element,A,M.section,y);C.push(F)}return C},Or=f=>Dd(f,vn),Ag=(f,h)=>I(f.all,y=>bo(y.cells,C=>vn(h,C.element))),ph=(f,h,y)=>{const C=E(h.selection,A=>Ue(A).bind(M=>Ag(f,M)).filter(y)),O=Ps(C);return ni(O.length>0,O)},Cs=(f,h,y,C,O)=>(A,M,F,$)=>{const J=Ls(A),oe=ce.from($==null?void 0:$.section).getOrThunk(Rd);return h(J,M).map(ee=>{const te=((me,Se)=>di(me,Se,!1))(J,F),se=f(te,ee,vn,O(F),oe),he=ds(se.grid);return{info:ee,grid:Or(se.grid),cursor:se.cursor,lockedColumns:he}}).bind(ee=>{const te=gh(A,ee.grid),se=ce.from($==null?void 0:$.sizing).getOrThunk(()=>bg(A)),he=ce.from($==null?void 0:$.resize).getOrThunk(Sa);return y(A,ee.grid,ee.info,{sizing:se,resize:he,section:oe}),C(A),Dt(A,ri),ee.lockedColumns.length>0&&Dn(A,ri,ee.lockedColumns.join(",")),ce.some({cursor:ee.cursor,newRows:te.newRows,newCells:te.newCells})})},ja=(f,h)=>ph(f,h,kt).map(y=>({cells:y,generators:h.generators,clipboard:h.clipboard})),Xs=(f,h)=>ph(f,h,kt),Oi=(f,h)=>ph(f,h,y=>!y.isLocked),qa=(f,h)=>Ke(h,y=>((C,O)=>Ag(C,O).exists(A=>!A.isLocked))(f,y)),hh=(f,h,y,C)=>{const O=Yn(f).rows;let A=!0;for(let M=0;M<O.length;M++)for(let F=0;F<An(O[0]);F++){const $=O[M],J=Is($,F),oe=y(J.element,h);oe&&!A?Gm($,F,Es(C(),!0,J.isLocked)):oe&&(A=!1)}return f},bh=f=>{const h=A=>A(f),y=Ft(f),C=()=>O,O={tag:!0,inner:f,fold:(A,M)=>M(f),isValue:kt,isError:ue,map:A=>Ng.value(A(f)),mapError:C,bind:h,exists:h,forall:h,getOr:y,or:C,getOrThunk:y,orThunk:C,getOrDie:y,each:A=>{A(f)},toOptional:()=>ce.some(f)};return O},Tb=f=>{const h=()=>y,y={tag:!1,inner:f,fold:(O,A)=>O(f),isValue:ue,isError:kt,map:h,mapError:O=>Ng.error(O(f)),bind:h,exists:ue,forall:kt,getOr:jo,or:jo,getOrThunk:bt,orThunk:bt,getOrDie:(C=String(f),()=>{throw new Error(C)}),each:_t,toOptional:ce.none};var C;return y},Ng={value:bh,error:Tb,fromOption:(f,h)=>f.fold(()=>Tb(h),bh)},pv=(f,h)=>({rowDelta:0,colDelta:An(f[0])-An(h[0])}),Md=(f,h)=>({rowDelta:f.length-h.length,colDelta:0}),Ob=(f,h,y,C)=>{const O=h.section==="colgroup"?y.col:y.cell;return Pt(f,A=>Es(O(),!0,C(A)))},Pw=(f,h,y,C)=>{const O=f[f.length-1];return f.concat(Pt(h,()=>{const A=O.section==="colgroup"?y.colgroup:y.row,M=xa(O,A,jo),F=Ob(M.cells.length,M,y,$=>no(C,$.toString()));return ah(M,F)}))},xh=(f,h,y,C)=>E(f,O=>{const A=Ob(h,O,y,ue);return ba(O,C,A)}),Ql=(f,h,y)=>{const C=h.colDelta<0?xh:jo,O=h.rowDelta<0?Pw:jo,A=ds(f),M=An(f[0]),F=Ne(A,oe=>oe===M-1),$=C(f,Math.abs(h.colDelta),y,F?M-1:M),J=ds($);return O($,Math.abs(h.rowDelta),y,xt(J,kt))},Ab=(f,h,y,C)=>{const O=Xe(C,Is(f[h],y).element),A=f[h];return f.length>1&&An(A)>1&&(y>0&&O(cs(A,y-1))||y<A.cells.length-1&&O(cs(A,y+1))||h>0&&O(cs(f[h-1],y))||h<f.length-1&&O(cs(f[h+1],y)))},ui=(f,h,y)=>Uo(y,C=>C>=f.column&&C<=An(h[0])+f.column),Nb=(f,h,y,C,O)=>{((J,oe,ee,te)=>{oe>0&&oe<J[0].cells.length&&ao(J,se=>{const he=se.cells[oe-1];let me=0;const Se=te();for(;se.cells.length>oe+me&&ee(he.element,se.cells[oe+me].element);)Gm(se,oe+me,Es(Se,!0,se.cells[oe+me].isLocked)),me++})})(h,f,O,C.cell);const A=Md(y,h),M=Ql(y,A,C),F=Md(h,M),$=Ql(h,F,C);return E($,(J,oe)=>ba(J,f,M[oe].cells))},$n=(f,h,y,C,O)=>{((Fe,Me,He,Ze)=>{const et=Yn(Fe).rows;if(Me>0&&Me<et.length){const At=((Nt,No)=>Je(Nt,(Vt,ro)=>Ne(Vt,to=>No(to.element,ro.element))?Vt:Vt.concat([ro]),[]))(et[Me-1].cells,He);ao(At,Nt=>{let No=ce.none();for(let Vt=Me;Vt<et.length;Vt++)for(let ro=0;ro<An(et[0]);ro++){const to=et[Vt],Vo=Is(to,ro);He(Vo.element,Nt.element)&&(No.isNone()&&(No=ce.some(Ze())),No.each(je=>{Gm(to,ro,Es(je,!0,Vo.isLocked))}))}})}})(h,f,O,C.cell);const A=ds(h),M=pv(h,y),F={...M,colDelta:M.colDelta-A.length},$=Ql(h,F,C),{cols:J,rows:oe}=Yn($),ee=ds($),te=pv(y,h),se={...te,colDelta:te.colDelta+ee.length},he=(Se=C,De=ee,E(y,Fe=>Je(De,(Me,He)=>{const Ze=Ob(1,Fe,Se,kt)[0];return ys(Me,He,Ze)},Fe))),me=Ql(he,se,C);var Se,De;return[...J,...oe.slice(0,f),...me,...oe.slice(f,oe.length)]},Rb=(f,h,y,C,O)=>{const{rows:A,cols:M}=Yn(f),F=A.slice(0,h),$=A.slice(h);return[...M,...F,((J,oe,ee,te)=>xa(J,se=>te(se,ee),oe))(A[y],(J,oe)=>h>0&&h<A.length&&C(cs(A[h-1],oe),cs(A[h],oe))?Is(A[h],oe):Es(O(J.element,C),!0,J.isLocked),C,O),...$]},Un=(f,h,y,C,O)=>E(f,A=>{const M=h>0&&h<An(A)&&C(cs(A,h-1),cs(A,h)),F=(($,J,oe,ee,te,se,he)=>{if(oe!=="colgroup"&&ee)return Is($,J);{const me=Is($,te);return Es(he(me.element,se),!0,!1)}})(A,h,A.section,M,y,C,O);return ys(A,h,F)}),ra=(f,h,y,C)=>((O,A,M,F)=>cs(O[A],M)!==void 0&&A>0&&F(cs(O[A-1],M),cs(O[A],M)))(f,h,y,C)||((O,A,M)=>A>0&&M(cs(O,A-1),cs(O,A)))(f[h],y,C),Pc=(f,h,y,C)=>{const O=A=>(M=>M==="row"?Um(h):Lu(h))(A)?`${A}group`:A;return f?Wa(h)?O(y):null:C&&Wa(h)?O(y==="row"?"col":"row"):null},Ai=(f,h,y)=>Es(y(f.element,h),!0,f.isLocked),vl=(f,h,y,C,O,A,M)=>E(f,(F,$)=>((J,oe)=>{const ee=J.cells,te=E(ee,(se,he)=>{if((me=>Ne(h,Se=>y(me.element,Se.element)))(se)){const me=M(se,$,he)?O(se,y,C):se;return A(me,$,he).each(Se=>{var De,Fe;De=me.element,Fe={scope:ce.from(Se)},hn(Fe,(Me,He)=>{Me.fold(()=>{Dt(De,He)},Ze=>{Ll(De.dom,He,Ze)})})}),me}return se});return Er(J.element,te,J.section,J.isNew)})(F)),ec=(f,h,y)=>hs(f,(C,O)=>ra(f,O,h,y)?[]:[Is(C,h)]),Bd=(f,h,y,C,O)=>{const A=Yn(f).rows,M=hs(h,oe=>ec(A,oe,C)),F=E(A,oe=>nf(oe.cells)),$=((oe,ee)=>Ke(ee,jo)&&nf(oe)?kt:(te,se,he)=>!(xn(te.element)==="th"&&ee[se]))(M,F);return vl(f,M,C,O,Ai,((oe,ee)=>(te,se)=>ce.some(Pc(oe,te.element,"row",ee[se])))(y,F),$)},vh=(f,h,y,C)=>{const O=Yn(f).rows,A=E(h,M=>Is(O[M.row],M.column));return vl(f,A,y,C,Ai,ce.none,kt)},Pd=f=>{if(!Pr(f))throw new Error("cases must be an array");if(f.length===0)throw new Error("there must be at least one case");const h=[],y={};return ao(f,(C,O)=>{const A=qo(C);if(A.length!==1)throw new Error("one and only one name per case");const M=A[0],F=C[M];if(y[M]!==void 0)throw new Error("duplicate key detected:"+M);if(M==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Pr(F))throw new Error("case arguments must be an array");h.push(M),y[M]=(...$)=>{const J=$.length;if(J!==F.length)throw new Error("Wrong number of arguments to case "+M+". Expected "+F.length+" ("+F+"), got "+J);return{fold:(...oe)=>{if(oe.length!==f.length)throw new Error("Wrong number of arguments to fold. Expected "+f.length+", got "+oe.length);return oe[O].apply(null,$)},match:oe=>{const ee=qo(oe);if(h.length!==ee.length)throw new Error("Wrong number of arguments to match. Expected: "+h.join(",")+`
Actual: `+ee.join(","));if(!Ke(h,te=>_o(ee,te)))throw new Error("Not all branches were specified when using match. Specified: "+ee.join(", ")+`
Required: `+h.join(", "));return oe[M].apply(null,$)},log:oe=>{console.log(oe,{constructors:h,constructor:M,params:$})}}}}),y},Id={...Pd([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},Db=(f,h,y)=>{let C=0;for(let O=f;O<h;O++)C+=y[O]!==void 0?y[O]:0;return C},Iw=(f,h)=>{const y=gg(f);return E(y,C=>{const O=Db(C.row,C.row+C.rowspan,h);return{element:C.element,height:O,rowspan:C.rowspan}})},Mb=(f,h,y)=>{const C=((O,A)=>Ks(O)?((M,F)=>{const $=mo(M);return E($,(J,oe)=>({element:J.element,width:F[oe],colspan:J.colspan}))})(O,A):((M,F)=>{const $=gg(M);return E($,J=>{const oe=Db(J.column,J.column+J.colspan,F);return{element:J.element,width:oe,colspan:J.colspan}})})(O,A))(f,h);ao(C,O=>{y.setElementWidth(O.element,O.width)})},Rg=(f,h,y,C,O)=>{const A=Ls(f),M=O.getCellDelta(h),F=O.getWidths(A,O),$=y===A.grid.columns-1,J=C.clampTableDelta(F,y,M,O.minCellWidth(),$),oe=((te,se,he,me,Se)=>{const De=te.slice(0),Fe=((He,Ze)=>He.length===0?Id.none():He.length===1?Id.only(0):Ze===0?Id.left(0,1):Ze===He.length-1?Id.right(Ze-1,Ze):Ze>0&&Ze<He.length-1?Id.middle(Ze-1,Ze,Ze+1):Id.none())(te,se),Me=Ft(E(De,Ft(0)));return Fe.fold(Me,He=>me.singleColumnWidth(De[He],he),(He,Ze)=>Se.calcLeftEdgeDeltas(De,He,Ze,he,me.minCellWidth(),me.isRelative),(He,Ze,et)=>Se.calcMiddleDeltas(De,He,Ze,et,he,me.minCellWidth(),me.isRelative),(He,Ze)=>Se.calcRightEdgeDeltas(De,He,Ze,he,me.minCellWidth(),me.isRelative))})(F,y,J,O,C),ee=E(oe,(te,se)=>te+F[se]);Mb(A,ee,O),C.resizeTable(O.adjustTableWidth,J,$)},Nn=f=>Je(f,(h,y)=>Ne(h,C=>C.column===y.column)?h:h.concat([y]),[]).sort((h,y)=>h.column-y.column),Bb=fr("col"),hv=fr("colgroup"),yh=f=>xn(f)==="tr"||hv(f),Ar=f=>({element:f,colspan:Si(f,"colspan",1),rowspan:Si(f,"rowspan",1)}),Jo=f=>mt(f,"scope").map(h=>h.substr(0,3)),Wr=(f,h=Ar)=>{const y=O=>{if(yh(O))return hv((A={element:O}).element)?f.colgroup(A):f.row(A);{const M=O,F=($=>Bb($.element)?f.col($):f.cell($))(h(M));return C=ce.some({item:M,replacement:F}),F}var A};let C=ce.none();return{getOrInit:(O,A)=>C.fold(()=>y(O),M=>A(O,M.item)?M.replacement:y(O))}},Dg=f=>h=>{const y=[],C=O=>{const A=f==="td"?{scope:null}:{},M=h.replace(O,f,A);return y.push({item:O,sub:M}),M};return{replaceOrInit:(O,A)=>{if(yh(O)||Bb(O))return O;{const M=O;return((F,$)=>bo(y,J=>$(J.item,F)))(M,A).fold(()=>C(M),F=>A(O,F.item)?F.sub:C(M))}}}},wh=f=>({unmerge:h=>{const y=Jo(h);return y.each(C=>Dn(h,"scope",C)),()=>{const C=f.cell({element:h,colspan:1,rowspan:1});return Gn(C,"width"),Gn(h,"width"),y.each(O=>Dn(C,"scope",O)),C}},merge:h=>(Gn(h[0],"width"),(()=>{const y=Ps(E(h,Jo));if(y.length===0)return ce.none();{const C=y[0],O=["row","col"];return Ne(y,A=>A!==C&&_o(O,A))?ce.none():ce.from(C)}})().fold(()=>Dt(h[0],"scope"),y=>Dn(h[0],"scope",y+"group")),Ft(h[0]))}),bv=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ch=Wu(),Ni=f=>((h,y)=>{const C=h.property().name(y);return _o(bv,C)})(Ch,f),Pb=f=>((h,y)=>{const C=h.property().name(y);return _o(["ol","ul"],C)})(Ch,f),Zn=f=>{const h=fr("br"),y=O=>xg(O).bind(A=>{const M=oi(A).map(F=>!!Ni(F)||!!(($,J)=>_o(["br","img","hr","input"],$.property().name(J)))(Ch,F)&&xn(F)!=="img").getOr(!1);return ti(A).map(F=>{return M===!0||xn($=F)==="li"||Sc($,Pb).isSome()||h(A)||Ni(F)&&!vn(O,F)?[]:[ze.fromTag("br")];var $})}).getOr([]),C=(()=>{const O=hs(f,A=>{const M=ga(A);return(F=>Ke(F,$=>h($)||Ho($)&&pr($).trim().length===0))(M)?[]:M.concat(y(A))});return O.length===0?[ze.fromTag("br")]:O})();ml(f[0]),Hr(f[0],C)},Ri=f=>sa(f,!0),Qu=f=>{Tt(f).length===0&&Sr(f)},af=(f,h)=>({grid:f,cursor:h}),Js=(f,h,y)=>{const C=((O,A,M)=>{var F,$;const J=Yn(O).rows;return ce.from(($=(F=J[A])===null||F===void 0?void 0:F.cells[M])===null||$===void 0?void 0:$.element).filter(Ri).orThunk(()=>(oe=>I(oe,ee=>I(ee.cells,te=>{const se=te.element;return ni(Ri(se),se)})))(J))})(f,h,y);return af(f,C)},Ic=f=>Je(f,(h,y)=>Ne(h,C=>C.row===y.row)?h:h.concat([y]),[]).sort((h,y)=>h.row-y.row),Mg=(f,h)=>(y,C,O,A,M)=>{const F=Ic(C),$=E(F,oe=>oe.row),J=((oe,ee,te,se,he,me,Se)=>{const{cols:De,rows:Fe}=Yn(oe),Me=Fe[ee[0]],He=hs(ee,Vt=>((ro,to,Vo)=>{const je=ro[to];return hs(je.cells,(er,ks)=>ra(ro,to,ks,Vo)?[]:[er])})(Fe,Vt,he)),Ze=E(Me.cells,(Vt,ro)=>nf(ec(Fe,ro,he))),et=[...Fe];ao(ee,Vt=>{et[Vt]=Se.transformRow(Fe[Vt],te)});const At=[...De,...et],Nt=((Vt,ro)=>Ke(ro,jo)&&nf(Vt.cells)?kt:(to,Vo,je)=>!(xn(to.element)==="th"&&ro[je]))(Me,Ze),No=((Vt,ro)=>(to,Vo,je)=>ce.some(Pc(Vt,to.element,"col",ro[je])))(se,Ze);return vl(At,He,he,me,Se.transformCell,No,Nt)})(y,$,f,h,O,A.replaceOrInit,M);return Js(J,C[0].row,C[0].column)},Ib=Mg("thead",!0),Lb=Mg("tbody",!1),Lw=Mg("tfoot",!1),em=(f,h,y)=>{const C=((A,M)=>Xo(A,()=>M))(f,y.section),O=Ym(C);return di(O,h,!0)},tm=(f,h,y,C)=>((O,A,M,F)=>{const $=Ym(A),J=F.getWidths($,F);Mb($,J,F)})(0,h,0,C.sizing),Bg=(f,h,y,C)=>((O,A,M,F,$)=>{const J=Ym(A),oe=F.getWidths(J,F),ee=F.pixelWidth(),{newSizes:te,delta:se}=$.calcRedestributedWidths(oe,ee,M.pixelDelta,F.isRelative);Mb(J,te,F),F.adjustTableWidth(se)})(0,h,y,C.sizing,C.resize),Ld=(f,h)=>Ne(h,y=>y.column===0&&y.isLocked),Pg=(f,h)=>Ne(h,y=>y.column+y.colspan>=f.grid.columns&&y.isLocked),tc=(f,h)=>{const y=xd(f),C=Nn(h);return Je(C,(O,A)=>O+y[A.column].map(Fu).getOr(0),0)},Ig=f=>(h,y)=>Xs(h,y).filter(C=>!(f?Ld:Pg)(h,C)).map(C=>({details:C,pixelDelta:tc(h,C)})),ho=f=>(h,y)=>ja(h,y).filter(C=>!(f?Ld:Pg)(h,C.cells)),aa=Dg("th"),yl=Dg("td"),Fb=Cs((f,h,y,C)=>{const O=h[0].row,A=Ic(h),M=Pa(A,(F,$)=>({grid:Rb(F.grid,O,$.row+F.delta,y,C.getOrInit),delta:F.delta+1}),{grid:f,delta:0}).grid;return Js(M,O,h[0].column)},Xs,_t,_t,Wr),wn=Cs((f,h,y,C)=>{const O=Ic(h),A=O[O.length-1],M=A.row+A.rowspan,F=Pa(O,($,J)=>Rb($,M,J.row,y,C.getOrInit),f);return Js(F,M,h[0].column)},Xs,_t,_t,Wr),Fw=Cs((f,h,y,C)=>{const O=h.details,A=Nn(O),M=A[0].column,F=Pa(A,($,J)=>({grid:Un($.grid,M,J.column+$.delta,y,C.getOrInit),delta:$.delta+1}),{grid:f,delta:0}).grid;return Js(F,O[0].row,M)},Ig(!0),Bg,_t,Wr),Hb=Cs((f,h,y,C)=>{const O=h.details,A=O[O.length-1],M=A.column+A.colspan,F=Nn(O),$=Pa(F,(J,oe)=>Un(J,M,oe.column,y,C.getOrInit),f);return Js($,O[0].row,M)},Ig(!1),Bg,_t,Wr),br=Cs((f,h,y,C)=>{const O=Nn(h.details),A=((F,$)=>hs(F,J=>{const oe=J.cells,ee=Pa($,(te,se)=>se>=0&&se<te.length?te.slice(0,se).concat(te.slice(se+1)):te,oe);return ee.length>0?[Er(J.element,ee,J.section,J.isNew)]:[]}))(f,E(O,F=>F.column)),M=A.length>0?A[0].cells.length-1:0;return Js(A,O[0].row,Math.min(O[0].column,M))},(f,h)=>Oi(f,h).map(y=>({details:y,pixelDelta:-tc(f,y)})),Bg,Qu,Wr),Lc=Cs((f,h,y,C)=>{const O=Ic(h),A=((F,$,J)=>{const{rows:oe,cols:ee}=Yn(F);return[...ee,...oe.slice(0,$),...oe.slice(J+1)]})(f,O[0].row,O[O.length-1].row),M=A.length>0?A.length-1:0;return Js(A,Math.min(h[0].row,M),h[0].column)},Xs,_t,Qu,Wr),_h=Cs((f,h,y,C)=>{const O=Nn(h),A=E(O,F=>F.column),M=Bd(f,A,!0,y,C.replaceOrInit);return Js(M,h[0].row,h[0].column)},Oi,_t,_t,aa),kh=Cs((f,h,y,C)=>{const O=Nn(h),A=E(O,F=>F.column),M=Bd(f,A,!1,y,C.replaceOrInit);return Js(M,h[0].row,h[0].column)},Oi,_t,_t,yl),zb=Cs(Ib,Oi,_t,_t,aa),Vb=Cs(Lb,Oi,_t,_t,yl),xv=Cs(Lw,Oi,_t,_t,yl),Sh=Cs((f,h,y,C)=>{const O=vh(f,h,y,C.replaceOrInit);return Js(O,h[0].row,h[0].column)},Oi,_t,_t,aa),vv=Cs((f,h,y,C)=>{const O=vh(f,h,y,C.replaceOrInit);return Js(O,h[0].row,h[0].column)},Oi,_t,_t,yl),Lg=Cs((f,h,y,C)=>{const O=h.cells;Zn(O);const A=((M,F,$,J)=>{const oe=Yn(M).rows;if(oe.length===0)return M;for(let ee=F.startRow;ee<=F.finishRow;ee++)for(let te=F.startCol;te<=F.finishCol;te++){const se=oe[ee],he=Is(se,te).isLocked;Gm(se,te,Es(J(),!1,he))}return M})(f,h.bounds,0,C.merge(O));return af(A,ce.from(O[0]))},(f,h)=>((y,C)=>C.mergable)(0,h).filter(y=>qa(f,y.cells)),tm,_t,wh),Fc=Cs((f,h,y,C)=>{const O=Pa(h,(A,M)=>hh(A,M,y,C.unmerge(M)),f);return af(O,ce.from(h[0]))},(f,h)=>((y,C)=>C.unmergable)(0,h).filter(y=>qa(f,y)),tm,_t,wh),mi=Cs((f,h,y,C)=>{const O=((F,$)=>{const J=Ls(F);return di(J,$,!0)})(h.clipboard,h.generators);var A,M;return((F,$,J,oe,ee)=>{const te=ds($),se=((De,Fe,Me)=>{const He=An(Fe[0]),Ze=Yn(Fe).cols.length+De.row,et=Pt(He-De.column,At=>At+De.column);return{row:Ze,column:bo(et,At=>Ke(Me,Nt=>Nt!==At)).getOr(He-1)}})(F,$,te),he=Yn(J).rows,me=ui(se,he,te);return((De,Fe,Me)=>{if(De.row>=Fe.length||De.column>An(Fe[0]))return Ng.error("invalid start address out of table bounds, row: "+De.row+", column: "+De.column);const He=Fe.slice(De.row),Ze=He[0].cells.slice(De.column),et=An(Me[0]),At=Me.length;return Ng.value({rowDelta:He.length-At,colDelta:Ze.length-et})})(se,$,he).map(De=>{const Fe={...De,colDelta:De.colDelta-me.length},Me=Ql($,Fe,oe),He=ds(Me),Ze=ui(se,he,He);return((et,At,Nt,No,Vt,ro)=>{const to=et.row,Vo=et.column,je=to+Nt.length,er=Vo+An(Nt[0])+ro.length,ks=xt(ro,kt);for(let Aa=to;Aa<je;Aa++){let Fo=0;for(let Vs=Vo;Vs<er;Vs++){if(ks[Vs]){Fo++;continue}Ab(At,Aa,Vs,Vt)&&hh(At,cs(At[Aa],Vs),Vt,No.cell);const Yc=Vs-Vo-Fo,ap=Is(Nt[Aa-to],Yc),ip=ap.element,_f=No.replace(ip);Gm(At[Aa],Vs,Es(_f,!0,ap.isLocked))}}return At})(se,Me,he,oe,ee,Ze)})})((A=h.row,M=h.column,{row:A,column:M}),f,O,h.generators,y).fold(()=>af(f,ce.some(h.element)),F=>Js(F,h.row,h.column))},(f,h)=>Ue(h.element).bind(y=>Ag(f,y).map(C=>({...C,generators:h.generators,clipboard:h.clipboard}))),tm,_t,Wr),xr=Cs((f,h,y,C)=>{const O=Yn(f).rows,A=h.cells[0].column,M=O[h.cells[0].row],F=em(h.clipboard,h.generators,M),$=Nb(A,f,F,h.generators,y);return Js($,h.cells[0].row,h.cells[0].column)},ho(!0),_t,_t,Wr),Fd=Cs((f,h,y,C)=>{const O=Yn(f).rows,A=h.cells[h.cells.length-1].column+h.cells[h.cells.length-1].colspan,M=O[h.cells[0].row],F=em(h.clipboard,h.generators,M),$=Nb(A,f,F,h.generators,y);return Js($,h.cells[0].row,h.cells[0].column)},ho(!1),_t,_t,Wr),Hd=Cs((f,h,y,C)=>{const O=Yn(f).rows,A=h.cells[0].row,M=O[A],F=em(h.clipboard,h.generators,M),$=$n(A,f,F,h.generators,y);return Js($,h.cells[0].row,h.cells[0].column)},ja,_t,_t,Wr),yv=Cs((f,h,y,C)=>{const O=Yn(f).rows,A=h.cells[h.cells.length-1].row+h.cells[h.cells.length-1].rowspan,M=O[h.cells[0].row],F=em(h.clipboard,h.generators,M),$=$n(A,f,F,h.generators,y);return Js($,h.cells[0].row,h.cells[0].column)},ja,_t,_t,Wr),wv=(f,h)=>{const y=Ls(f);return Xs(y,h).bind(C=>{const O=C[C.length-1],A=C[0].column,M=O.column+O.colspan,F=it(E(y.all,$=>Uo($.cells,J=>J.column>=A&&J.column<M)));return fh(F)}).getOr("")},Eh=(f,h)=>{const y=Ls(f);return Xs(y,h).bind(fh).getOr("")},Fg=(f,h)=>{const y=Ls(f);return Xs(y,h).bind(C=>{const O=C[C.length-1],A=C[0].row,M=O.row+O.rowspan;return(F=>{const $=E(F,ee=>sf(ee).type),J=_o($,"header"),oe=_o($,"footer");if(J||oe){const ee=_o($,"body");return!J||ee||oe?J||ee||!oe?ce.none():ce.some("footer"):ce.some("header")}return ce.some("body")})(y.all.slice(A,M))}).getOr("")},Th=(f,h)=>f.dispatch("NewRow",{node:h}),ir=(f,h)=>f.dispatch("NewCell",{node:h}),ns=(f,h,y)=>{f.dispatch("TableModified",{...y,table:h})},lr={structure:!1,style:!0},dn={structure:!0,style:!1},ia={structure:!0,style:!0},Wn=(f,h)=>Kl(f)?zo(h):Uu(f)?gr(h):bg(h),cr=(f,h,y)=>{const C=oe=>xn(pl(oe))==="table",O=mh(f),A=Gl(f)?_t:Eb,M=oe=>{switch(yg(f)){case"section":return Nd();case"sectionCells":return fv();case"cells":return Ns();default:return((ee,te)=>{var se;switch((se=Ls(ee),I(se.all,he=>{const me=sf(he);return me.type==="header"?ce.from(me.subType):ce.none()})).getOr(te)){case"section":return lt();case"sectionCells":return mv();case"cells":return rf()}})(oe,"section")}},F=(oe,ee,te,se)=>(he,me,Se=!1)=>{ci(he);const De=ze.fromDom(f.getDoc()),Fe=li(te,De,O),Me={sizing:Wn(f,he),resize:Gl(f)?uv():Sa(),section:M(he)};return ee(he)?oe(he,me,Fe,Me).bind(He=>{h.refresh(he.dom),ao(He.newRows,et=>{Th(f,et.dom)}),ao(He.newCells,et=>{ir(f,et.dom)});const Ze=((et,At)=>At.cursor.fold(()=>{const Nt=Tt(et);return Jt(Nt).filter(rr).map(No=>{y.clearSelectedCells(et.dom);const Vt=f.dom.createRng();return Vt.selectNode(No.dom),f.selection.setRng(Vt),Dn(No,"data-mce-selected","1"),Vt})},Nt=>{const No=qu(Gu,Nt),Vt=f.dom.createRng();return Vt.setStart(No.element.dom,No.offset),Vt.setEnd(No.element.dom,No.offset),f.selection.setRng(Vt),y.clearSelectedCells(et.dom),ce.some(Vt)}))(he,He);return rr(he)&&(ci(he),Se||ns(f,he.dom,se)),Ze.map(et=>({rng:et,effect:se}))}):ce.none()},$=F(Lc,oe=>!C(f)||Og(oe).rows>1,_t,dn),J=F(br,oe=>!C(f)||Og(oe).columns>1,_t,dn);return{deleteRow:$,deleteColumn:J,insertRowsBefore:F(Fb,kt,_t,dn),insertRowsAfter:F(wn,kt,_t,dn),insertColumnsBefore:F(Fw,kt,A,dn),insertColumnsAfter:F(Hb,kt,A,dn),mergeCells:F(Lg,kt,_t,dn),unmergeCells:F(Fc,kt,_t,dn),pasteColsBefore:F(xr,kt,_t,dn),pasteColsAfter:F(Fd,kt,_t,dn),pasteRowsBefore:F(Hd,kt,_t,dn),pasteRowsAfter:F(yv,kt,_t,dn),pasteCells:F(mi,kt,_t,ia),makeCellsHeader:F(Sh,kt,_t,dn),unmakeCellsHeader:F(vv,kt,_t,dn),makeColumnsHeader:F(_h,kt,_t,dn),unmakeColumnsHeader:F(kh,kt,_t,dn),makeRowsHeader:F(zb,kt,_t,dn),makeRowsBody:F(Vb,kt,_t,dn),makeRowsFooter:F(xv,kt,_t,dn),getTableRowType:Fg,getTableCellType:Eh,getTableColType:wv}},Hg=(f,h,y)=>{const C=Si(f,h,1);y===1||C<=1?Dt(f,h):Dn(f,h,Math.min(y,C))},$b=(f,h)=>y=>{const C=y.column+y.colspan-1,O=y.column;return C>=f&&O<h},lf=Pd([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Ub=(f,h,y)=>{const C=y.substring(0,y.length-f.length),O=parseFloat(C);return C===O.toString()?h(O):lf.invalid(y)},zd={...lf,from:f=>ki(f,"%")?Ub("%",lf.percent,f):ki(f,"px")?Ub("px",lf.pixels,f):lf.invalid(f)},Oh=(f,h,y)=>{const C=zd.from(y),O=Ke(f,A=>A==="0px")?((A,M)=>{const F=A.fold(()=>Ft(""),$=>Ft($/M+"px"),()=>Ft(100/M+"%"));return Pt(M,F)})(C,f.length):((A,M,F)=>A.fold(()=>M,$=>((J,oe,ee)=>{const te=ee/oe;return E(J,se=>zd.from(se).fold(()=>se,he=>he*te+"px",he=>he/100*ee+"px"))})(M,F,$),$=>((J,oe)=>E(J,ee=>zd.from(ee).fold(()=>ee,te=>te/oe*100+"%",te=>te+"%")))(M,F)))(C,f,h);return zw(O)},zg=(f,h)=>f.length===0?h:Pa(f,(y,C)=>zd.from(C).fold(Ft(0),jo,jo)+y,0),Hw=(f,h)=>zd.from(f).fold(Ft(f),y=>y+h+"px",y=>y+h+"%"),zw=f=>{if(f.length===0)return f;const h=Pa(f,(C,O)=>{const A=zd.from(O).fold(()=>({value:O,remainder:0}),M=>((F,$)=>{const J=Math.floor(F);return{value:J+"px",remainder:F-J}})(M),M=>({value:M+"%",remainder:0}));return{output:[A.value].concat(C.output),remainder:C.remainder+A.remainder}},{output:[],remainder:0}),y=h.output;return y.slice(0,y.length-1).concat([Hw(y[y.length-1],Math.round(h.remainder))])},cf=zd.from,df=f=>cf(f).fold(Ft("px"),Ft("px"),Ft("%")),Di=(f,h,y)=>{const C=Ls(f),O=C.all,A=gg(C),M=mo(C);h.each(F=>{const $=df(F),J=Yi(f),oe=((te,se)=>Ee(te,se,ws,La))(C,f),ee=Oh(oe,J,F);Ks(C)?((te,se,he)=>{ao(se,(me,Se)=>{const De=zg([te[Se]],z());xs(me.element,"width",De+he)})})(ee,M,$):((te,se,he)=>{ao(se,me=>{const Se=te.slice(me.column,me.colspan+me.column),De=zg(Se,z());xs(me.element,"width",De+he)})})(ee,A,$),xs(f,"width",F)}),y.each(F=>{const $=df(F),J=Tc(f),oe=((ee,te,se)=>us(ee,te,se,$r,La))(C,f,St);((ee,te,se,he)=>{ao(se,me=>{const Se=ee.slice(me.row,me.rowspan+me.row),De=zg(Se,ne());xs(me.element,"height",De+he)}),ao(te,(me,Se)=>{xs(me.element,"height",ee[Se])})})(Oh(oe,J,F),O,A,$),xs(f,"height",F)})},Ve=f=>jl(f).exists(h=>Mn.test(h)),Zb=f=>jl(f).exists(h=>Oc.test(h)),Hs=f=>jl(f).isNone(),Vg=f=>{Dt(f,"width")},Vd=f=>{const h=zu(f);Di(f,ce.some(h),ce.none()),Vg(f)},oc=f=>{const h=(y=>Yi(y)+"px")(f);Di(f,ce.some(h),ce.none()),Vg(f)},Ea=f=>{Gn(f,"width");const h=Xt(f),y=h.length>0?h:Tt(f);ao(y,C=>{Gn(C,"width"),Vg(C)}),Vg(f)},Vw={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Ga=(f,h,y,C)=>Pt(f,O=>((A,M,F,$)=>{const J=ze.fromTag("tr");for(let oe=0;oe<A;oe++){const ee=ze.fromTag($<M||oe<F?"th":"td");oe<F&&Dn(ee,"scope","row"),$<M&&Dn(ee,"scope","col"),Tn(ee,ze.fromTag("br")),Tn(J,ee)}return J})(h,y,C,O)),Wb=(f,h)=>{f.selection.select(h.dom,!0),f.selection.collapse(!0)},$g=(f,h,y,C,O)=>{const A=(F=>{const $=F.options,J=$.get("table_default_styles");return $.isSet("table_default_styles")?J:((oe,ee)=>na(oe)||!Rc(oe)?ee:Uu(oe)?{...ee,width:Vu(oe)}:{...ee,width:vb})(F,J)})(f),M={styles:A,attributes:Ji(f),colGroups:Dc(f)};return f.undoManager.ignore(()=>{const F=((J,oe,ee,te,se,he=Vw)=>{const me=ze.fromTag("table"),Se=se!=="cells";Ec(me,he.styles),qi(me,he.attributes),he.colGroups&&Tn(me,(He=>{const Ze=ze.fromTag("colgroup");return Pt(He,()=>Tn(Ze,ze.fromTag("col"))),Ze})(oe));const De=Math.min(J,ee);if(Se&&ee>0){const He=ze.fromTag("thead");Tn(me,He);const Ze=Ga(ee,oe,se==="sectionCells"?De:0,te);Hr(He,Ze)}const Fe=ze.fromTag("tbody");Tn(me,Fe);const Me=Ga(Se?J-De:J,oe,Se?0:ee,te);return Hr(Fe,Me),me})(y,h,O,C,yg(f),M);Dn(F,"data-mce-id","__mce");const $=(J=>{const oe=ze.fromTag("div"),ee=ze.fromDom(J.dom.cloneNode(!0));return Tn(oe,ee),(te=>te.dom.innerHTML)(oe)})(F);f.insertContent($),f.addVisual()}),Gi(pl(f),'table[data-mce-id="__mce"]').map(F=>(Uu(f)?oc(F):na(f)?Ea(F):(Kl(f)||($=>yc($)&&$.indexOf("%")!==-1)(A.width))&&Vd(F),ci(F),Dt(F,"data-mce-id"),(($,J)=>{ao(_i(J,"tr"),oe=>{Th($,oe.dom),ao(_i(oe,"th,td"),ee=>{ir($,ee.dom)})})})(f,F),(($,J)=>{Gi(J,"td,th").each(Xe(Wb,$))})(f,F),F.dom)).getOrNull()};var Mi=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Bi="x-tinymce/dom-table-",uf=Bi+"rows",Ka=Bi+"columns",jb=f=>{const h=Mi.FakeClipboardItem(f);Mi.write([h])},Hc=f=>{var h;const y=(h=Mi.read())!==null&&h!==void 0?h:[];return I(y,C=>ce.from(C.getType(f)))},Ug=f=>{Hc(f).isSome()&&Mi.clear()},qb=f=>{f.fold($w,h=>jb({[uf]:h}))},Ah=()=>Hc(uf),$w=()=>Ug(uf),Gb=f=>{f.fold(Yb,h=>jb({[Ka]:h}))},Kb=()=>Hc(Ka),Yb=()=>Ug(Ka),Zg=f=>Eg(_g(f),hl(f)).filter(hr),Cv=(f,h)=>{const y=hl(f),C=ee=>To(ee,y),O=ee=>(te=>Tg(_g(te),hl(te)).filter(hr))(f).bind(te=>C(te).map(se=>ee(se,te))),A=ee=>{f.focus()},M=(ee,te=!1)=>O((se,he)=>{const me=ut(Za(f),se,he);ee(se,me,te).each(A)}),F=()=>O((ee,te)=>((se,he,me)=>{const Se=Ls(se);return Xs(Se,he).bind(De=>{const Fe=di(Se,me,!1),Me=Yn(Fe).rows.slice(De[0].row,De[De.length-1].row+De[De.length-1].rowspan),He=hs(Me,et=>{const At=Uo(et.cells,Nt=>!Nt.isLocked);return At.length>0?[{...et,cells:At}]:[]}),Ze=Or(He);return ni(Ze.length>0,Ze)}).map(De=>E(De,Fe=>{const Me=nh(Fe.element);return ao(Fe.cells,He=>{const Ze=Bu(He.element);Fs(Ze,"colspan",He.colspan,1),Fs(Ze,"rowspan",He.rowspan,1),Tn(Me,Ze)}),Me}))})(ee,ut(Za(f),ee,te),li(_t,ze.fromDom(f.getDoc()),ce.none()))),$=()=>O((ee,te)=>((se,he)=>{const me=Ls(se);return Oi(me,he).map(Se=>{const De=Se[Se.length-1],Fe=Se[0].column,Me=De.column+De.colspan,He=((et,At,Nt)=>{if(Ks(et)){const No=Uo(mo(et),$b(At,Nt)),Vt=E(No,to=>{const Vo=Bu(to.element);return Hg(Vo,"span",Nt-At),Vo}),ro=ze.fromTag("colgroup");return Hr(ro,Vt),[ro]}return[]})(me,Fe,Me),Ze=((et,At,Nt)=>E(et.all,No=>{const Vt=Uo(No.cells,$b(At,Nt)),ro=E(Vt,Vo=>{const je=Bu(Vo.element);return Hg(je,"colspan",Nt-At),je}),to=ze.fromTag("tr");return Hr(to,ro),to}))(me,Fe,Me);return[...He,...Ze]})})(ee,ut(Za(f),ee,te))),J=(ee,te)=>te().each(se=>{const he=E(se,me=>Bu(me));O((me,Se)=>{const De=en(ze.fromDom(f.getDoc())),Fe=((Me,He,Ze,et)=>({selection:Bc(Me),clipboard:Ze,generators:et}))(Za(f),0,he,De);ee(me,Fe).each(A)})}),oe=ee=>(te,se)=>((he,me)=>no(he,me)?ce.from(he[me]):ce.none())(se,"type").each(he=>{M(ee(he),se.no_events)});hn({mceTableSplitCells:()=>M(h.unmergeCells),mceTableMergeCells:()=>M(h.mergeCells),mceTableInsertRowBefore:()=>M(h.insertRowsBefore),mceTableInsertRowAfter:()=>M(h.insertRowsAfter),mceTableInsertColBefore:()=>M(h.insertColumnsBefore),mceTableInsertColAfter:()=>M(h.insertColumnsAfter),mceTableDeleteCol:()=>M(h.deleteColumn),mceTableDeleteRow:()=>M(h.deleteRow),mceTableCutCol:()=>$().each(ee=>{Gb(ee),M(h.deleteColumn)}),mceTableCutRow:()=>F().each(ee=>{qb(ee),M(h.deleteRow)}),mceTableCopyCol:()=>$().each(ee=>Gb(ee)),mceTableCopyRow:()=>F().each(ee=>qb(ee)),mceTablePasteColBefore:()=>J(h.pasteColsBefore,Kb),mceTablePasteColAfter:()=>J(h.pasteColsAfter,Kb),mceTablePasteRowBefore:()=>J(h.pasteRowsBefore,Ah),mceTablePasteRowAfter:()=>J(h.pasteRowsAfter,Ah),mceTableDelete:()=>Zg(f).each(ee=>{To(ee,y).filter(eo(y)).each(te=>{const se=ze.fromText("");if(ot(te,se),Sr(te),f.dom.isEmpty(f.getBody()))f.setContent(""),f.selection.setCursorLocation();else{const he=f.dom.createRng();he.setStart(se.dom,0),he.setEnd(se.dom,0),f.selection.setRng(he),f.nodeChanged()}})}),mceTableCellToggleClass:(ee,te)=>{O(se=>{const he=Za(f),me=Ke(he,De=>f.formatter.match("tablecellclass",{value:te},De.dom)),Se=me?f.formatter.remove:f.formatter.apply;ao(he,De=>Se("tablecellclass",{value:te},De.dom)),ns(f,se.dom,lr)})},mceTableToggleClass:(ee,te)=>{O(se=>{f.formatter.toggle("tableclass",{value:te},se.dom),ns(f,se.dom,lr)})},mceTableToggleCaption:()=>{Zg(f).each(ee=>{To(ee,y).each(te=>{bs(te,"caption").fold(()=>{const se=ze.fromTag("caption");Tn(se,ze.fromText("Caption")),((he,me,Se)=>{Ia(he,0).fold(()=>{Tn(he,me)},De=>{pd(De,me)})})(te,se),f.selection.setCursorLocation(se.dom,0)},se=>{fr("caption")(ee)&&Xr("td",te).each(he=>f.selection.setCursorLocation(he.dom,0)),Sr(se)}),ns(f,te.dom,dn)})})},mceTableSizingMode:(ee,te)=>(se=>Zg(f).each(he=>{na(f)||Uu(f)||Kl(f)||To(he,y).each(me=>{se!=="relative"||Ve(me)?se!=="fixed"||Zb(me)?se!=="responsive"||Hs(me)||Ea(me):oc(me):Vd(me),ci(me),ns(f,me.dom,dn)})}))(te),mceTableCellType:oe(ee=>ee==="th"?h.makeCellsHeader:h.unmakeCellsHeader),mceTableColType:oe(ee=>ee==="th"?h.makeColumnsHeader:h.unmakeColumnsHeader),mceTableRowType:oe(ee=>{switch(ee){case"header":return h.makeRowsHeader;case"footer":return h.makeRowsFooter;default:return h.makeRowsBody}})},(ee,te)=>f.addCommand(te,ee)),f.addCommand("mceInsertTable",(ee,te)=>{((se,he,me,Se={})=>{const De=Fe=>Pl(Fe)&&Fe>0;if(De(he)&&De(me)){const Fe=Se.headerRows||0,Me=Se.headerColumns||0;return $g(se,me,he,Me,Fe)}console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")})(f,te.rows,te.columns,te.options)}),f.addCommand("mceTableApplyCellStyle",(ee,te)=>{const se=Se=>"tablecell"+Se.toLowerCase().replace("-","");if(!Co(te))return;const he=Uo(Za(f),hr);if(he.length===0)return;const me=((Se,De)=>{const Fe={};return((Me,He,Ze,et)=>{hn(Me,(At,Nt)=>{(He(At,Nt)?Ze:et)(At,Nt)})})(Se,De,(Me=>(He,Ze)=>{Me[Ze]=He})(Fe),_t),Fe})(te,(Se,De)=>f.formatter.has(se(De))&&yc(Se));(Se=>{for(const De in Se)if(dl.call(Se,De))return!1;return!0})(me)||(hn(me,(Se,De)=>{const Fe=se(De);ao(he,Me=>{Se===""?f.formatter.remove(Fe,{value:null},Me.dom,!0):f.formatter.apply(Fe,{value:Se},Me.dom)})}),C(he[0]).each(Se=>ns(f,Se.dom,lr)))})},$d=Pd([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),vr={before:$d.before,on:$d.on,after:$d.after,cata:(f,h,y,C)=>f.fold(h,y,C),getStart:f=>f.fold(jo,jo,jo)},Ud=(f,h)=>({selection:f,kill:h}),nc=(f,h)=>{const y=f.document.createRange();return y.selectNode(h.dom),y},En=(f,h)=>{const y=f.document.createRange();return Zd(y,h),y},Zd=(f,h)=>f.selectNodeContents(h.dom),yr=(f,h,y)=>{const C=f.document.createRange();var O;return O=C,h.fold(A=>{O.setStartBefore(A.dom)},(A,M)=>{O.setStart(A.dom,M)},A=>{O.setStartAfter(A.dom)}),((A,M)=>{M.fold(F=>{A.setEndBefore(F.dom)},(F,$)=>{A.setEnd(F.dom,$)},F=>{A.setEndAfter(F.dom)})})(C,y),C},Wg=(f,h,y,C,O)=>{const A=f.document.createRange();return A.setStart(h.dom,y),A.setEnd(C.dom,O),A},Nh=f=>({left:f.left,top:f.top,right:f.right,bottom:f.bottom,width:f.width,height:f.height}),mf=Pd([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),zc=(f,h,y)=>h(ze.fromDom(y.startContainer),y.startOffset,ze.fromDom(y.endContainer),y.endOffset),Xb=(f,h)=>{const y=((C,O)=>O.match({domRange:A=>({ltr:Ft(A),rtl:ce.none}),relative:(A,M)=>({ltr:si(()=>yr(C,A,M)),rtl:si(()=>ce.some(yr(C,M,A)))}),exact:(A,M,F,$)=>({ltr:si(()=>Wg(C,A,M,F,$)),rtl:si(()=>ce.some(Wg(C,F,$,A,M)))})}))(f,h);return((C,O)=>{const A=O.ltr();return A.collapsed?O.rtl().filter(M=>M.collapsed===!1).map(M=>mf.rtl(ze.fromDom(M.endContainer),M.endOffset,ze.fromDom(M.startContainer),M.startOffset)).getOrThunk(()=>zc(0,mf.ltr,A)):zc(0,mf.ltr,A)})(0,y)},Vc=(f,h)=>Xb(f,h).match({ltr:(y,C,O,A)=>{const M=f.document.createRange();return M.setStart(y.dom,C),M.setEnd(O.dom,A),M},rtl:(y,C,O,A)=>{const M=f.document.createRange();return M.setStart(O.dom,A),M.setEnd(y.dom,C),M}});mf.ltr,mf.rtl;const om=(f,h,y,C)=>({start:f,soffset:h,finish:y,foffset:C}),nm=(f,h,y,C)=>({start:vr.on(f,h),finish:vr.on(y,C)}),Rh=(f,h)=>{const y=Vc(f,h);return om(ze.fromDom(y.startContainer),y.startOffset,ze.fromDom(y.endContainer),y.endOffset)},Dh=nm,un=(f,h,y,C,O)=>vn(y,C)?ce.none():ju(y,C,h).bind(A=>{const M=A.boxes.getOr([]);return M.length>1?(O(f,M,A.start,A.finish),ce.some(Ud(ce.some(Dh(y,0,y,Ur(y))),!0))):ce.none()}),wl=(f,h)=>({item:f,mode:h}),jg=(f,h,y,C=$c)=>f.property().parent(h).map(O=>wl(O,C)),$c=(f,h,y,C=sc)=>y.sibling(f,h).map(O=>wl(O,C)),sc=(f,h,y,C=sc)=>{const O=f.property().children(h);return y.first(O).map(A=>wl(A,C))},_v=[{current:jg,next:$c,fallback:ce.none()},{current:$c,next:sc,fallback:ce.some(jg)},{current:sc,next:sc,fallback:ce.some($c)}],jr=(f,h,y,C,O=_v)=>bo(O,A=>A.current===y).bind(A=>A.current(f,h,C,A.next).orThunk(()=>A.fallback.bind(M=>jr(f,h,M,C)))),_s=(f,h,y,C,O,A)=>jr(f,h,C,O).bind(M=>A(M.item)?ce.none():y(M.item)?ce.some(M.item):_s(f,M.item,y,M.mode,O,A)),kv=f=>h=>f.property().children(h).length===0,Uc=(f,h,y,C)=>_s(f,h,y,$c,{sibling:(O,A)=>O.query().prevSibling(A),first:O=>O.length>0?ce.some(O[O.length-1]):ce.none()},C),qg=(f,h,y,C)=>_s(f,h,y,$c,{sibling:(O,A)=>O.query().nextSibling(A),first:O=>O.length>0?ce.some(O[0]):ce.none()},C),Wd=Wu(),Mh=(f,h)=>((y,C,O)=>Uc(y,C,kv(y),O))(Wd,f,h),Bh=(f,h)=>((y,C,O)=>qg(y,C,kv(y),O))(Wd,f,h),Jb=Pd([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),U4=f=>ls(f,"tr"),ff={...Jb,verify:(f,h,y,C,O,A,M)=>ls(C,"td,th",M).bind(F=>ls(h,"td,th",M).map($=>vn(F,$)?vn(C,F)&&Ur(F)===O?A($):Jb.none("in same cell"):kb(U4,[F,$]).fold(()=>((J,oe,ee)=>{const te=J.getRect(oe),se=J.getRect(ee);return se.right>te.left&&se.left<te.right})(f,$,F)?Jb.success():A($),J=>A($)))).getOr(Jb.none("default")),cata:(f,h,y,C,O)=>f.fold(h,y,C,O)},Qb=fr("br"),Sv=(f,h,y)=>h(f,y).bind(C=>Ho(C)&&pr(C).trim().length===0?Sv(C,h,y):ce.some(C)),Z4=(f,h,y,C)=>((O,A)=>Ia(O,A).filter(Qb).orThunk(()=>Ia(O,A-1).filter(Qb)))(h,y).bind(O=>C.traverse(O).fold(()=>Sv(O,C.gather,f).map(C.relative),A=>(M=>ti(M).bind(F=>{const $=ga(F);return((J,oe)=>Yr(J,Xe(vn,oe)))($,M).map(J=>((oe,ee,te,se)=>({parent:oe,children:ee,element:te,index:se}))(F,$,M,J))}))(A).map(M=>vr.on(M.parent,M.index)))),Ph=(f,h)=>({left:f.left,top:f.top+h,right:f.right,bottom:f.bottom+h}),Ta=(f,h)=>({left:f.left,top:f.top-h,right:f.right,bottom:f.bottom-h}),Nr=(f,h,y)=>({left:f.left+h,top:f.top+y,right:f.right+h,bottom:f.bottom+y}),Ih=f=>({left:f.left,top:f.top,right:f.right,bottom:f.bottom}),Lh=(f,h)=>ce.some(f.getRect(h)),Cl=(f,h,y)=>In(h)?Lh(f,h).map(Ih):Ho(h)?((C,O,A)=>A>=0&&A<Ur(O)?C.getRangedRect(O,A,O,A+1):A>0?C.getRangedRect(O,A-1,O,A):ce.none())(f,h,y).map(Ih):ce.none(),Gg=(f,h)=>In(h)?Lh(f,h).map(Ih):Ho(h)?f.getRangedRect(h,0,h,Ur(h)).map(Ih):ce.none(),Pi=Pd([{none:[]},{retry:["caret"]}]),rc=(f,h,y)=>Iu(h,Ni).fold(ue,C=>Gg(f,C).exists(O=>((A,M)=>A.left<M.left||Math.abs(M.right-A.left)<1||A.left>M.right)(y,O))),jd={point:f=>f.bottom,adjuster:(f,h,y,C,O)=>{const A=Ph(O,5);return Math.abs(y.bottom-C.bottom)<1||y.top>O.bottom?Pi.retry(A):y.top===O.bottom?Pi.retry(Ph(O,1)):rc(f,h,O)?Pi.retry(Nr(A,5,0)):Pi.none()},move:Ph,gather:Bh},Zc=(f,h,y,C,O)=>O===0?ce.some(C):((A,M,F)=>A.elementFromPoint(M,F).filter($=>xn($)==="table").isSome())(f,C.left,h.point(C))?((A,M,F,$,J)=>Zc(A,M,F,M.move($,5),J))(f,h,y,C,O-1):f.situsFromPoint(C.left,h.point(C)).bind(A=>A.start.fold(ce.none,M=>Gg(f,M).bind(F=>h.adjuster(f,M,F,y,C).fold(ce.none,$=>Zc(f,h,y,$,O-1))).orThunk(()=>ce.some(C)),ce.none)),sm=(f,h,y)=>{const C=f.move(y,5),O=Zc(h,f,y,C,100).getOr(C);return((A,M,F)=>A.point(M)>F.getInnerHeight()?ce.some(A.point(M)-F.getInnerHeight()):A.point(M)<0?ce.some(-A.point(M)):ce.none())(f,O,h).fold(()=>h.situsFromPoint(O.left,f.point(O)),A=>(h.scrollBy(0,A),h.situsFromPoint(O.left,f.point(O)-A)))},_l={tryUp:Xe(sm,{point:f=>f.top,adjuster:(f,h,y,C,O)=>{const A=Ta(O,5);return Math.abs(y.top-C.top)<1||y.bottom<O.top?Pi.retry(A):y.bottom===O.top?Pi.retry(Ta(O,1)):rc(f,h,O)?Pi.retry(Nr(A,5,0)):Pi.none()},move:Ta,gather:Mh}),tryDown:Xe(sm,jd),getJumpSize:Ft(5)},gf=(f,h,y)=>f.getSelection().bind(C=>((O,A,M,F)=>(Qb(A)?((J,oe,ee)=>ee.traverse(oe).orThunk(()=>Sv(oe,ee.gather,J)).map(ee.relative))(O,A,F):Z4(O,A,M,F)).map(J=>({start:J,finish:J})))(h,C.finish,C.foffset,y).fold(()=>ce.some(Ad(C.finish,C.foffset)),O=>{const A=f.fromSitus(O);return M=ff.verify(f,C.finish,C.foffset,A.finish,A.foffset,y.failure,h),ff.cata(M,F=>ce.none(),()=>ce.none(),F=>ce.some(Ad(F,0)),F=>ce.some(Ad(F,Ur(F))));var M})),Kg=(f,h,y,C,O,A)=>A===0?ce.none():e0(f,h,y,C,O).bind(M=>{const F=f.fromSitus(M),$=ff.verify(f,y,C,F.finish,F.foffset,O.failure,h);return ff.cata($,()=>ce.none(),()=>ce.some(M),J=>vn(y,J)&&C===0?Fh(f,y,C,Ta,O):Kg(f,h,J,0,O,A-1),J=>vn(y,J)&&C===Ur(J)?Fh(f,y,C,Ph,O):Kg(f,h,J,Ur(J),O,A-1))}),Fh=(f,h,y,C,O)=>Cl(f,h,y).bind(A=>qr(f,O,C(A,_l.getJumpSize()))),qr=(f,h,y)=>{const C=jm().browser;return C.isChromium()||C.isSafari()||C.isFirefox()?h.retry(f,y):ce.none()},e0=(f,h,y,C,O)=>Cl(f,y,C).bind(A=>qr(f,O,A)),t0=(f,h,y,C,O)=>ls(C,"td,th",h).bind(A=>ls(A,"table",h).bind(M=>((F,$)=>Sc(F,J=>ti(J).exists(oe=>vn(oe,$)),void 0).isSome())(O,M)?((F,$,J)=>gf(F,$,J).bind(oe=>Kg(F,$,oe.element,oe.offset,J,20).map(F.fromSitus)))(f,h,y).bind(F=>ls(F.finish,"td,th",h).map($=>({start:A,finish:$,range:F}))):ce.none())),Hh=(f,h,y,C,O,A)=>A(C,h).orThunk(()=>t0(f,h,y,C,O).map(M=>{const F=M.range;return Ud(ce.some(Dh(F.start,F.soffset,F.finish,F.foffset)),!0)})),Uw=(f,h)=>ls(f,"tr",h).bind(y=>ls(y,"table",h).bind(C=>{const O=_i(C,"tr");return vn(y,O[0])?((A,M,F)=>Uc(Wd,A,$=>xg($).isSome(),F))(C,0,h).map(A=>{const M=Ur(A);return Ud(ce.some(Dh(A,M,A,M)),!0)}):ce.none()})),zh=(f,h)=>ls(f,"tr",h).bind(y=>ls(y,"table",h).bind(C=>{const O=_i(C,"tr");return vn(y,O[O.length-1])?((A,M,F)=>qg(Wd,A,$=>Ca($).isSome(),F))(C,0,h).map(A=>Ud(ce.some(Dh(A,0,A,0)),!0)):ce.none()})),o0=(f,h,y,C,O,A,M)=>t0(f,y,C,O,A).bind(F=>un(h,y,F.start,F.finish,M)),pf=f=>{let h=f;return{get:()=>h,set:y=>{h=y}}},Wc=()=>{const f=(h=>{const y=pf(ce.none()),C=()=>y.get().each(h);return{clear:()=>{C(),y.set(ce.none())},isSet:()=>y.get().isSome(),get:()=>y.get(),set:O=>{C(),y.set(ce.some(O))}}})(_t);return{...f,on:h=>f.get().each(h)}},Ev=(f,h)=>ls(f,"td,th",h),Vh=f=>kc(f).exists(sa),$h={traverse:oi,gather:Bh,relative:vr.before,retry:_l.tryDown,failure:ff.failedDown},jc={traverse:jt,gather:Mh,relative:vr.before,retry:_l.tryUp,failure:ff.failedUp},qd=f=>h=>h===f,Uh=qd(38),Yg=qd(40),Gd=f=>f>=37&&f<=40,Kd={isBackward:qd(37),isForward:qd(39)},rm={isBackward:qd(39),isForward:qd(37)},kl=Pd([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Yd={domRange:kl.domRange,relative:kl.relative,exact:kl.exact,exactFromRange:f=>kl.exact(f.start,f.soffset,f.finish,f.foffset),getWin:f=>{const h=(y=>y.match({domRange:C=>ze.fromDom(C.startContainer),relative:(C,O)=>vr.getStart(C),exact:(C,O,A,M)=>C}))(f);return ze.fromDom(wi(h).dom.defaultView)},range:om},Zw=document.caretPositionFromPoint?(f,h,y)=>{var C,O;return ce.from((O=(C=f.dom).caretPositionFromPoint)===null||O===void 0?void 0:O.call(C,h,y)).bind(A=>{if(A.offsetNode===null)return ce.none();const M=f.dom.createRange();return M.setStart(A.offsetNode,A.offset),M.collapse(),ce.some(M)})}:document.caretRangeFromPoint?(f,h,y)=>{var C,O;return ce.from((O=(C=f.dom).caretRangeFromPoint)===null||O===void 0?void 0:O.call(C,h,y))}:ce.none,Xg=(f,h)=>{const y=xn(f);return y==="input"?vr.after(f):_o(["br","img"],y)?h===0?vr.before(f):vr.after(f):vr.on(f,h)},Xd=f=>ce.from(f.getSelection()),hf=(f,h)=>{Xd(f).each(y=>{y.removeAllRanges(),y.addRange(h)})},n0=(f,h,y,C,O)=>{const A=Wg(f,h,y,C,O);hf(f,A)},s0=(f,h)=>Xb(f,h).match({ltr:(y,C,O,A)=>{n0(f,y,C,O,A)},rtl:(y,C,O,A)=>{Xd(f).each(M=>{if(M.setBaseAndExtent)M.setBaseAndExtent(y.dom,C,O.dom,A);else if(M.extend)try{((F,$,J,oe,ee,te)=>{$.collapse(J.dom,oe),$.extend(ee.dom,te)})(0,M,y,C,O,A)}catch{n0(f,O,A,y,C)}else n0(f,O,A,y,C)})}}),r0=(f,h,y,C,O)=>{const A=((M,F,$,J)=>{const oe=Xg(M,F),ee=Xg($,J);return Yd.relative(oe,ee)})(h,y,C,O);s0(f,A)},Rr=(f,h,y)=>{const C=((O,A)=>{const M=O.fold(vr.before,Xg,vr.after),F=A.fold(vr.before,Xg,vr.after);return Yd.relative(M,F)})(h,y);s0(f,C)},Zh=f=>{if(f.rangeCount>0){const h=f.getRangeAt(0),y=f.getRangeAt(f.rangeCount-1);return ce.some(om(ze.fromDom(h.startContainer),h.startOffset,ze.fromDom(y.endContainer),y.endOffset))}return ce.none()},Jd=f=>{if(f.anchorNode===null||f.focusNode===null)return Zh(f);{const h=ze.fromDom(f.anchorNode),y=ze.fromDom(f.focusNode);return((C,O,A,M)=>{const F=((J,oe,ee,te)=>{const se=Hm(J).dom.createRange();return se.setStart(J.dom,oe),se.setEnd(ee.dom,te),se})(C,O,A,M),$=vn(C,A)&&O===M;return F.collapsed&&!$})(h,f.anchorOffset,y,f.focusOffset)?ce.some(om(h,f.anchorOffset,y,f.focusOffset)):Zh(f)}},Ii=(f,h,y=!0)=>{const C=(y?En:nc)(f,h);hf(f,C)},a0=f=>(h=>Xd(h).filter(y=>y.rangeCount>0).bind(Jd))(f).map(h=>Yd.exact(h.start,h.soffset,h.finish,h.foffset)),Jg=f=>({elementFromPoint:(h,y)=>ze.fromPoint(ze.fromDom(f.document),h,y),getRect:h=>h.dom.getBoundingClientRect(),getRangedRect:(h,y,C,O)=>{const A=Yd.exact(h,y,C,O);return((M,F)=>($=>{const J=$.getClientRects(),oe=J.length>0?J[0]:$.getBoundingClientRect();return oe.width>0||oe.height>0?ce.some(oe).map(Nh):ce.none()})(Vc(M,F)))(f,A)},getSelection:()=>a0(f).map(h=>Rh(f,h)),fromSitus:h=>{const y=Yd.relative(h.start,h.finish);return Rh(f,y)},situsFromPoint:(h,y)=>((C,O,A)=>((M,F,$)=>{const J=ze.fromDom(M.document);return Zw(J,F,$).map(oe=>om(ze.fromDom(oe.startContainer),oe.startOffset,ze.fromDom(oe.endContainer),oe.endOffset))})(C,O,A))(f,h,y).map(C=>nm(C.start,C.soffset,C.finish,C.foffset)),clearSelection:()=>{(h=>{Xd(h).each(y=>y.removeAllRanges())})(f)},collapseSelection:(h=!1)=>{a0(f).each(y=>y.fold(C=>C.collapse(h),(C,O)=>{const A=h?C:O;Rr(f,A,A)},(C,O,A,M)=>{const F=h?C:A,$=h?O:M;r0(f,F,$,F,$)}))},setSelection:h=>{r0(f,h.start,h.soffset,h.finish,h.foffset)},setRelativeSelection:(h,y)=>{Rr(f,h,y)},selectNode:h=>{Ii(f,h,!1)},selectContents:h=>{Ii(f,h)},getInnerHeight:()=>f.innerHeight,getScrollY:()=>(h=>{const y=h!==void 0?h.dom:document,C=y.body.scrollLeft||y.documentElement.scrollLeft,O=y.body.scrollTop||y.documentElement.scrollTop;return Zl(C,O)})(ze.fromDom(f.document)).top,scrollBy:(h,y)=>{((C,O,A)=>{const M=(A!==void 0?A.dom:document).defaultView;M&&M.scrollBy(C,O)})(h,y,ze.fromDom(f.document))}}),Qd=(f,h)=>({rows:f,cols:h}),eu=f=>Iu(f,fd).exists(sa),Wh=(f,h)=>eu(f)||eu(h),jh=f=>f.dom.classList!==void 0,qc=(f,h)=>((y,C,O)=>{const A=((M,F)=>{const $=Ln(M,F);return $===void 0||$===""?[]:$.split(" ")})(y,C).concat([O]);return Dn(y,C,A.join(" ")),!0})(f,"class",h),tu=(f,h)=>{jh(f)?f.dom.classList.add(h):qc(f,h)},Qg=(f,h)=>jh(f)&&f.dom.classList.contains(h),ou=()=>({tag:"none"}),Tv=f=>({tag:"multiple",elements:f}),ep=f=>({tag:"single",element:f}),tp=f=>{const h=ze.fromDom((F=>{if(ig()&&Kr(F.target)){const $=ze.fromDom(F.target);if(In($)&&Kr($.dom.shadowRoot)&&F.composed&&F.composedPath){const J=F.composedPath();if(J)return Jt(J)}}return ce.from(F.target)})(f).getOr(f.target)),y=()=>f.stopPropagation(),C=()=>f.preventDefault(),O=(A=C,M=y,(...F)=>A(M.apply(null,F)));var A,M;return((F,$,J,oe,ee,te,se)=>({target:F,x:$,y:J,stop:oe,prevent:ee,kill:te,raw:se}))(h,f.clientX,f.clientY,y,C,O,f)},i0=(f,h,y,C)=>{f.dom.removeEventListener(h,y,C)},op=kt,Gc=(f,h,y)=>((C,O,A,M)=>((F,$,J,oe,ee)=>{const te=((se,he)=>me=>{se(me)&&he(tp(me))})(J,oe);return F.dom.addEventListener($,te,ee),{unbind:Xe(i0,F,$,te,ee)}})(C,O,A,M,!1))(f,h,op,y),nu=tp,np=f=>!Qg(ze.fromDom(f.target),"ephox-snooker-resizer-bar"),l0=(f,h)=>{const y=(O=xo.selectedSelector,{get:()=>Td(ze.fromDom(f.getBody()),O).fold(()=>Tg(_g(f),hl(f)).fold(ou,ep),Tv)}),C=((A,M,F)=>{const $=te=>{Dt(te,A.selected),Dt(te,A.firstSelected),Dt(te,A.lastSelected)},J=te=>{Dn(te,A.selected,"1")},oe=te=>{ee(te),F()},ee=te=>{const se=_i(te,`${A.selectedSelector},${A.firstSelectedSelector},${A.lastSelectedSelector}`);ao(se,$)};return{clearBeforeUpdate:ee,clear:oe,selectRange:(te,se,he,me)=>{oe(te),ao(se,J),Dn(he,A.firstSelected,"1"),Dn(me,A.lastSelected,"1"),M(se,he,me)},selectedSelector:A.selectedSelector,firstSelectedSelector:A.firstSelectedSelector,lastSelectedSelector:A.lastSelectedSelector}})(xo,(A,M,F)=>{To(M).each($=>{const J=mh(f),oe=li(_t,ze.fromDom(f.getDoc()),J),ee=((te,se,he)=>{const me=Ls(te);return Xs(me,se).map(Se=>{const De=di(me,he,!1),{rows:Fe}=Yn(De),Me=((Ze,et)=>{const At=Ze.slice(0,et[et.length-1].row+1),Nt=Or(At);return hs(Nt,No=>{const Vt=No.cells.slice(0,et[et.length-1].column+1);return E(Vt,ro=>ro.element)})})(Fe,Se),He=((Ze,et)=>{const At=Ze.slice(et[0].row+et[0].rowspan-1,Ze.length),Nt=Or(At);return hs(Nt,No=>{const Vt=No.cells.slice(et[0].column+et[0].colspan-1,No.cells.length);return E(Vt,ro=>ro.element)})})(Fe,Se);return{upOrLeftCells:Me,downOrRightCells:He}})})($,{selection:Za(f)},oe);((te,se,he,me,Se)=>{te.dispatch("TableSelectionChange",{cells:se,start:he,finish:me,otherCells:Se})})(f,A,M,F,ee)})},()=>(A=>{A.dispatch("TableSelectionClear")})(f));var O;return f.on("init",A=>{const M=f.getWin(),F=pl(f),$=hl(f),J=((me,Se,De,Fe)=>{const Me=((He,Ze,et,At)=>{const Nt=Wc(),No=Nt.clear,Vt=ro=>{Nt.on(to=>{At.clearBeforeUpdate(Ze),Ev(ro.target,et).each(Vo=>{ju(to,Vo,et).each(je=>{const er=je.boxes.getOr([]);if(er.length===1){const ks=er[0],Aa=wb(ks)==="false",Fo=bd(Cg(ro.target),ks,vn);Aa&&Fo&&(At.selectRange(Ze,er,ks,ks),He.selectContents(ks))}else er.length>1&&(At.selectRange(Ze,er,je.start,je.finish),He.selectContents(Vo))})})})};return{clearstate:No,mousedown:ro=>{At.clear(Ze),Ev(ro.target,et).filter(Vh).each(Nt.set)},mouseover:ro=>{Vt(ro)},mouseup:ro=>{Vt(ro),No()}}})(Jg(me),Se,De,Fe);return{clearstate:Me.clearstate,mousedown:Me.mousedown,mouseover:Me.mouseover,mouseup:Me.mouseup}})(M,F,$,C),oe=((me,Se,De,Fe)=>{const Me=Jg(me),He=()=>(Fe.clear(Se),ce.none());return{keydown:(Ze,et,At,Nt,No,Vt)=>{const ro=Ze.raw,to=ro.which,Vo=ro.shiftKey===!0;return Ed(Se,Fe.selectedSelector).fold(()=>(Gd(to)&&!Vo&&Fe.clearBeforeUpdate(Se),Gd(to)&&Vo&&!Wh(et,Nt)?ce.none:Yg(to)&&Vo?Xe(o0,Me,Se,De,$h,Nt,et,Fe.selectRange):Uh(to)&&Vo?Xe(o0,Me,Se,De,jc,Nt,et,Fe.selectRange):Yg(to)?Xe(Hh,Me,De,$h,Nt,et,zh):Uh(to)?Xe(Hh,Me,De,jc,Nt,et,Uw):ce.none),er=>{const ks=Aa=>()=>I(Aa,Vs=>((Yc,ap,ip,_f,lp)=>Qm(_f,Yc,ap,lp.firstSelectedSelector,lp.lastSelectedSelector).map($s=>(lp.clearBeforeUpdate(ip),lp.selectRange(ip,$s.boxes,$s.start,$s.finish),$s.boxes)))(Vs.rows,Vs.cols,Se,er,Fe)).fold(()=>Le(Se,Fe.firstSelectedSelector,Fe.lastSelectedSelector).map(Vs=>{const Yc=Yg(to)||Vt.isForward(to)?vr.after:vr.before;return Me.setRelativeSelection(vr.on(Vs.first,0),Yc(Vs.table)),Fe.clear(Se),Ud(ce.none(),!0)}),Vs=>ce.some(Ud(ce.none(),!0)));return Gd(to)&&Vo&&!Wh(et,Nt)?ce.none:Yg(to)&&Vo?ks([Qd(1,0)]):Uh(to)&&Vo?ks([Qd(-1,0)]):Vt.isBackward(to)&&Vo?ks([Qd(0,-1),Qd(-1,0)]):Vt.isForward(to)&&Vo?ks([Qd(0,1),Qd(1,0)]):Gd(to)&&!Vo?He:ce.none})()},keyup:(Ze,et,At,Nt,No)=>Ed(Se,Fe.selectedSelector).fold(()=>{const Vt=Ze.raw,ro=Vt.which;return Vt.shiftKey===!0&&Gd(ro)&&Wh(et,Nt)?((to,Vo,je,er,ks,Aa,Fo)=>vn(je,ks)&&er===Aa?ce.none():ls(je,"td,th",Vo).bind(Vs=>ls(ks,"td,th",Vo).bind(Yc=>un(to,Vo,Vs,Yc,Fo))))(Se,De,et,At,Nt,No,Fe.selectRange):ce.none()},ce.none)}})(M,F,$,C),ee=((me,Se,De,Fe)=>{const Me=Jg(me);return(He,Ze)=>{Fe.clearBeforeUpdate(Se),ju(He,Ze,De).each(et=>{const At=et.boxes.getOr([]);Fe.selectRange(Se,At,et.start,et.finish),Me.selectContents(Ze),Me.collapseSelection()})}})(M,F,$,C);f.on("TableSelectorChange",me=>ee(me.start,me.finish));const te=(me,Se)=>{(De=>De.raw.shiftKey===!0)(me)&&(Se.kill&&me.kill(),Se.selection.each(De=>{const Fe=Yd.relative(De.start,De.finish),Me=Vc(M,Fe);f.selection.setRng(Me)}))},se=me=>me.button===0,he=(()=>{const me=pf(ze.fromDom(F)),Se=pf(0);return{touchEnd:De=>{const Fe=ze.fromDom(De.target);if(fr("td")(Fe)||fr("th")(Fe)){const Me=me.get(),He=Se.get();vn(Me,Fe)&&De.timeStamp-He<300&&(De.preventDefault(),ee(Fe,Fe))}me.set(Fe),Se.set(De.timeStamp)}}})();f.on("dragstart",me=>{J.clearstate()}),f.on("mousedown",me=>{se(me)&&np(me)&&J.mousedown(nu(me))}),f.on("mouseover",me=>{var Se;(Se=me).buttons!==void 0&&!(1&Se.buttons)||!np(me)||J.mouseover(nu(me))}),f.on("mouseup",me=>{se(me)&&np(me)&&J.mouseup(nu(me))}),f.on("touchend",he.touchEnd),f.on("keyup",me=>{const Se=nu(me);if(Se.raw.shiftKey&&Gd(Se.raw.which)){const De=f.selection.getRng(),Fe=ze.fromDom(De.startContainer),Me=ze.fromDom(De.endContainer);oe.keyup(Se,Fe,De.startOffset,Me,De.endOffset).each(He=>{te(Se,He)})}}),f.on("keydown",me=>{const Se=nu(me);h.hide();const De=f.selection.getRng(),Fe=ze.fromDom(De.startContainer),Me=ze.fromDom(De.endContainer),He=vd(Kd,rm)(ze.fromDom(f.selection.getStart()));oe.keydown(Se,Fe,De.startOffset,Me,De.endOffset,He).each(Ze=>{te(Se,Ze)}),h.show()}),f.on("NodeChange",()=>{const me=f.selection,Se=ze.fromDom(me.getStart()),De=ze.fromDom(me.getEnd());kb(To,[Se,De]).fold(()=>C.clear(F),_t)})}),f.on("PreInit",()=>{f.serializer.addTempAttr(xo.firstSelected),f.serializer.addTempAttr(xo.lastSelected)}),{getSelectedCells:()=>((A,M,F,$)=>{switch(A.tag){case"none":return M();case"single":return(J=>[J.dom])(A.element);case"multiple":return(J=>E(J,oe=>oe.dom))(A.elements)}})(y.get(),Ft([])),clearSelectedCells:A=>C.clear(ze.fromDom(A))}},el=f=>{let h=[];return{bind:y=>{if(y===void 0)throw new Error("Event bind error: undefined handler");h.push(y)},unbind:y=>{h=Uo(h,C=>C!==y)},trigger:(...y)=>{const C={};ao(f,(O,A)=>{C[O]=y[A]}),ao(h,O=>{O(C)})}}},am=f=>({registry:qn(f,h=>({bind:h.bind,unbind:h.unbind})),trigger:qn(f,h=>h.trigger)}),bf=f=>f.slice(0).sort(),io=(f,h)=>{const y=Uo(h,C=>!_o(f,C));y.length>0&&(C=>{throw new Error("Unsupported keys for object: "+bf(C).join(", "))})(y)},Oa=f=>((h,y)=>((C,O,A)=>{if(O.length===0)throw new Error("You must specify at least one required field.");return((M,F)=>{if(!Pr(F))throw new Error("The "+M+" fields must be an array. Was: "+F+".");ao(F,$=>{if(!yc($))throw new Error("The value "+$+" in the "+M+" fields was not a string.")})})("required",O),(M=>{const F=bf(M);bo(F,($,J)=>J<F.length-1&&$===F[J+1]).each($=>{throw new Error("The field: "+$+" occurs more than once in the combined fields: ["+F.join(", ")+"].")})})(O),M=>{const F=qo(M);Ke(O,J=>_o(F,J))||((J,oe)=>{throw new Error("All required keys ("+bf(J).join(", ")+") were not specified. Specified keys were: "+bf(oe).join(", ")+".")})(O,F),C(O,F);const $=Uo(O,J=>!A.validate(M[J],J));return $.length>0&&((J,oe)=>{throw new Error("All values need to be of type: "+oe+". Keys ("+bf(J).join(", ")+") were not.")})($,A.label),M}})(h,y,{validate:mr,label:"function"}))(io,f),xf=Oa(["compare","extract","mutate","sink"]),Ce=Oa(["element","start","stop","destroy"]),qh=Oa(["forceDrop","drop","move","delayDrop"]),c0=()=>{const f=(()=>{const C=am({move:el(["info"])});return{onEvent:_t,reset:_t,events:C.registry}})(),h=(()=>{let C=ce.none();const O=am({move:el(["info"])});return{onEvent:(A,M)=>{M.extract(A).each(F=>{((J,oe)=>{const ee=C.map(te=>J.compare(te,oe));return C=ce.some(oe),ee})(M,F).each(J=>{O.trigger.move(J)})})},reset:()=>{C=ce.none()},events:O.registry}})();let y=f;return{on:()=>{y.reset(),y=h},off:()=>{y.reset(),y=f},isOn:()=>y===h,onEvent:(C,O)=>{y.onEvent(C,O)},events:h.events}},Ov=f=>{const h=f.replace(/\./g,"-");return{resolve:y=>h+"-"+y}},vf=Ov("ephox-dragster").resolve;var Li=xf({compare:(f,h)=>Zl(h.left-f.left,h.top-f.top),extract:f=>ce.some(Zl(f.x,f.y)),sink:(f,h)=>{const y=(F=>{const $={layerClass:vf("blocker"),...F},J=ze.fromTag("div");return Dn(J,"role","presentation"),Ec(J,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),tu(J,vf("blocker")),tu(J,$.layerClass),{element:Ft(J),destroy:()=>{Sr(J)}}})(h),C=Gc(y.element(),"mousedown",f.forceDrop),O=Gc(y.element(),"mouseup",f.drop),A=Gc(y.element(),"mousemove",f.move),M=Gc(y.element(),"mouseout",f.delayDrop);return Ce({element:y.element,start:F=>{Tn(F,y.element())},stop:()=>{Sr(y.element())},destroy:()=>{y.destroy(),O.unbind(),A.unbind(),M.unbind(),C.unbind()}})},mutate:(f,h)=>{f.mutate(h.left,h.top)}});const yf=Ov("ephox-snooker").resolve,Gh=yf("resizer-bar"),d0=yf("resizer-rows"),sp=yf("resizer-cols"),Kh=f=>{const h=_i(f.parent(),"."+Gh);ao(h,Sr)},u0=(f,h,y)=>{const C=f.origin();ao(h,O=>{O.each(A=>{const M=y(C,A);tu(M,Gh),Tn(f.parent(),M)})})},Av=(f,h,y,C,O)=>{const A=yd(y),M=h.isResizable,F=C.length>0?St.positions(C,y):[],$=F.length>0?((ee,te)=>hs(ee.all,(se,he)=>te(se.element)?[he]:[]))(f,M):[];((ee,te,se,he)=>{u0(ee,te,(me,Se)=>{const De=((Fe,Me,He,Ze,et)=>{const At=ze.fromTag("div");return Ec(At,{position:"absolute",left:Me+"px",top:He-3.5+"px",height:"7px",width:Ze+"px"}),qi(At,{"data-row":Fe,role:"presentation"}),At})(Se.row,se.left-me.left,Se.y-me.top,he);return tu(De,d0),De})})(h,Uo(F,(ee,te)=>Ne($,se=>te===se)),A,Fu(y));const J=O.length>0?Wl.positions(O,y):[],oe=J.length>0?((ee,te)=>{const se=[];return Pt(ee.grid.columns,he=>{pg(ee,he).map(me=>me.element).forall(te)&&se.push(he)}),Uo(se,he=>{const me=ih(ee,Se=>Se.column===he);return Ke(me,Se=>te(Se.element))})})(f,M):[];((ee,te,se,he)=>{u0(ee,te,(me,Se)=>{const De=((Fe,Me,He,Ze,et)=>{const At=ze.fromTag("div");return Ec(At,{position:"absolute",left:Me-3.5+"px",top:He+"px",height:et+"px",width:"7px"}),qi(At,{"data-column":Fe,role:"presentation"}),At})(Se.col,Se.x-me.left,se.top-me.top,0,he);return tu(De,sp),De})})(h,Uo(J,(ee,te)=>Ne(oe,se=>te===se)),A,iv(y))},Yh=(f,h)=>{if(Kh(f),f.isResizable(h)){const y=Ls(h),C=Ul(y),O=xd(y);Av(y,f,h,C,O)}},Nv=(f,h)=>{const y=_i(f.parent(),"."+Gh);ao(y,h)},Rv=f=>{Nv(f,h=>{xs(h,"display","none")})},Ww=f=>{Nv(f,h=>{xs(h,"display","block")})},nt=yf("resizer-bar-dragging"),zs=f=>{const h=(()=>{const ee=am({drag:el(["xDelta","yDelta","target"])});let te=ce.none();const se=(()=>{const he=am({drag:el(["xDelta","yDelta"])});return{mutate:(me,Se)=>{he.trigger.drag(me,Se)},events:he.registry}})();return se.events.drag.bind(he=>{te.each(me=>{ee.trigger.drag(he.xDelta,he.yDelta,me)})}),{assign:he=>{te=ce.some(he)},get:()=>te,mutate:se.mutate,events:ee.registry}})(),y=((ee,te={})=>{var se;return((he,me,Se)=>{let De=!1;const Fe=am({start:el([]),stop:el([])}),Me=c0(),He=()=>{At.stop(),Me.isOn()&&(Me.off(),Fe.trigger.stop())},Ze=((Nt,No)=>{let Vt=null;const ro=()=>{sg(Vt)||(clearTimeout(Vt),Vt=null)};return{cancel:ro,throttle:(...to)=>{ro(),Vt=setTimeout(()=>{Vt=null,Nt.apply(null,to)},200)}}})(He);Me.events.move.bind(Nt=>{me.mutate(he,Nt.info)});const et=Nt=>(...No)=>{De&&Nt.apply(null,No)},At=me.sink(qh({forceDrop:He,drop:et(He),move:et(Nt=>{Ze.cancel(),Me.onEvent(Nt,me)}),delayDrop:et(Ze.throttle)}),Se);return{element:At.element,go:Nt=>{At.start(Nt),Me.on(),Fe.trigger.start()},on:()=>{De=!0},off:()=>{De=!1},isActive:()=>De,destroy:()=>{At.destroy()},events:Fe.registry}})(ee,(se=te.mode)!==null&&se!==void 0?se:Li,te)})(h,{});let C=ce.none();const O=(ee,te)=>ce.from(Ln(ee,te));h.events.drag.bind(ee=>{O(ee.target,"data-row").each(te=>{const se=Mo(ee.target,"top");xs(ee.target,"top",se+ee.yDelta+"px")}),O(ee.target,"data-column").each(te=>{const se=Mo(ee.target,"left");xs(ee.target,"left",se+ee.xDelta+"px")})});const A=(ee,te)=>Mo(ee,te)-Si(ee,"data-initial-"+te,0);y.events.stop.bind(()=>{h.get().each(ee=>{C.each(te=>{O(ee,"data-row").each(se=>{const he=A(ee,"top");Dt(ee,"data-initial-top"),oe.trigger.adjustHeight(te,he,parseInt(se,10))}),O(ee,"data-column").each(se=>{const he=A(ee,"left");Dt(ee,"data-initial-left"),oe.trigger.adjustWidth(te,he,parseInt(se,10))}),Yh(f,te)})})});const M=(ee,te)=>{oe.trigger.startAdjust(),h.assign(ee),Dn(ee,"data-initial-"+te,Mo(ee,te)),tu(ee,nt),xs(ee,"opacity","0.2"),y.go(f.parent())},F=Gc(f.parent(),"mousedown",ee=>{var te;te=ee.target,Qg(te,d0)&&M(ee.target,"top"),(se=>Qg(se,sp))(ee.target)&&M(ee.target,"left")}),$=ee=>vn(ee,f.view()),J=Gc(f.view(),"mouseover",ee=>{var te;(te=ee.target,ls(te,"table",$).filter(sa)).fold(()=>{rr(ee.target)&&Kh(f)},se=>{y.isActive()&&(C=ce.some(se),Yh(f,se))})}),oe=am({adjustHeight:el(["table","delta","row"]),adjustWidth:el(["table","delta","column"]),startAdjust:el([])});return{destroy:()=>{F.unbind(),J.unbind(),y.destroy(),Kh(f)},refresh:ee=>{Yh(f,ee)},on:y.on,off:y.off,hideBars:Xe(Rv,f),showBars:Xe(Ww,f),events:oe.registry}},wf=(f,h,y)=>{const C=St,O=Wl,A=zs(f),M=am({beforeResize:el(["table","type"]),afterResize:el(["table","type"]),startDrag:el([])});return A.events.adjustHeight.bind(F=>{const $=F.table;M.trigger.beforeResize($,"row"),((J,oe,ee,te)=>{const se=Ls(J),he=((Me,He,Ze)=>us(Me,He,Ze,Xi,et=>et.getOrThunk(ne)))(se,J,te),me=E(he,(Me,He)=>ee===He?Math.max(oe+Me,ne()):Me),Se=Iw(se,me),De=((Me,He)=>E(Me.all,(Ze,et)=>({element:Ze.element,height:He[et]})))(se,me);ao(De,Me=>{hg(Me.element,Me.height)}),ao(Se,Me=>{hg(Me.element,Me.height)});const Fe=Pa(me,(Me,He)=>Me+He,0);hg(J,Fe)})($,C.delta(F.delta,$),F.row,C),M.trigger.afterResize($,"row")}),A.events.startAdjust.bind(F=>{M.trigger.startDrag()}),A.events.adjustWidth.bind(F=>{const $=F.table;M.trigger.beforeResize($,"col");const J=O.delta(F.delta,$),oe=y($);Rg($,J,F.column,h,oe),M.trigger.afterResize($,"col")}),{on:A.on,off:A.off,refreshBars:A.refresh,hideBars:A.hideBars,showBars:A.showBars,destroy:A.destroy,events:M.registry}},Qs=f=>Kr(f)&&f.nodeName==="TABLE",Kc="bar-",Cf=f=>Ln(f,"data-mce-resize")!=="false",Xh=f=>{const h=Wc(),y=Wc(),C=Wc();let O,A;const M=$=>Wn(f,$),F=()=>ar(f)?Sa():uv();return f.on("init",()=>{const $=((J,oe)=>J.inline?((ee,te,se)=>({parent:Ft(te),view:Ft(ee),origin:Ft(Zl(0,0)),isResizable:se}))(ze.fromDom(J.getBody()),(()=>{const ee=ze.fromTag("div");return Ec(ee,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Tn(lg(ze.fromDom(document)),ee),ee})(),oe):((ee,te)=>{const se=ei(ee)?(he=>ze.fromDom(wi(he).dom.documentElement))(ee):ee;return{parent:Ft(se),view:Ft(ee),origin:Ft(Zl(0,0)),isResizable:te}})(ze.fromDom(J.getDoc()),oe))(f,Cf);if(C.set($),(J=>{const oe=J.options.get("object_resizing");return _o(oe.split(","),"table")})(f)&&wg(f)){const J=F(),oe=wf($,J,M);oe.on(),oe.events.startDrag.bind(ee=>{h.set(f.selection.getRng())}),oe.events.beforeResize.bind(ee=>{const te=ee.table.dom;((se,he,me,Se,De)=>{se.dispatch("ObjectResizeStart",{target:he,width:me,height:Se,origin:De})})(f,te,Jm(te),Cb(te),Kc+ee.type)}),oe.events.afterResize.bind(ee=>{const te=ee.table,se=te.dom;ci(te),h.on(he=>{f.selection.setRng(he),f.focus()}),((he,me,Se,De,Fe)=>{he.dispatch("ObjectResized",{target:me,width:Se,height:De,origin:Fe})})(f,se,Jm(se),Cb(se),Kc+ee.type),f.undoManager.add()}),y.set(oe)}}),f.on("ObjectResizeStart",$=>{const J=$.target;if(Qs(J)){const oe=ze.fromDom(J);ao(f.dom.select(".mce-clonedresizable"),ee=>{f.dom.addClass(ee,"mce-"+Sd(f)+"-columns")}),!Zb(oe)&&Uu(f)?oc(oe):!Ve(oe)&&Kl(f)&&Vd(oe),Hs(oe)&&Kt($.origin,Kc)&&Vd(oe),O=$.width,A=na(f)?"":((ee,te)=>{const se=ee.dom.getStyle(te,"width")||ee.dom.getAttrib(te,"width");return ce.from(se).filter(qs)})(f,J).getOr("")}}),f.on("ObjectResized",$=>{const J=$.target;if(Qs(J)){const oe=ze.fromDom(J),ee=$.origin;Kt(ee,"corner-")&&((te,se,he)=>{const me=ki(se,"e");if(A===""&&Vd(te),he!==O&&A!==""){xs(te,"width",A);const Se=F(),De=M(te),Fe=ar(f)||me?(Me=>Og(Me).columns)(te)-1:0;Rg(te,he-O,Fe,Se,De)}else if((Se=>/^(\d+(\.\d+)?)%$/.test(Se))(A)){const Se=parseFloat(A.replace("%",""));xs(te,"width",he*Se/O+"%")}(Se=>/^(\d+(\.\d+)?)px$/.test(Se))(A)&&(Se=>{const De=Ls(Se);Ks(De)||ao(Tt(Se),Fe=>{const Me=Ht(Fe,"width");xs(Fe,"width",Me),Dt(Fe,"width")})})(te)})(oe,ee,$.width),ci(oe),ns(f,oe.dom,lr)}}),f.on("SwitchMode",()=>{y.on($=>{f.mode.isReadOnly()?$.hideBars():$.showBars()})}),f.on("dragstart dragend",$=>{y.on(J=>{$.type==="dragstart"?(J.hideBars(),J.off()):(J.on(),J.showBars())})}),f.on("remove",()=>{y.on($=>{$.destroy()}),C.on($=>{((J,oe)=>{J.inline&&Sr(oe.parent())})(f,$)})}),{refresh:$=>{y.on(J=>J.refreshBars(ze.fromDom($)))},hide:()=>{y.on($=>$.hideBars())},show:()=>{y.on($=>$.showBars())}}},rp=f=>{(O=>{const A=O.options.register;A("table_clone_elements",{processor:"string[]"}),A("table_use_colgroups",{processor:"boolean",default:!0}),A("table_header_type",{processor:M=>{const F=_o(["section","cells","sectionCells","auto"],M);return F?{value:M,valid:F}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),A("table_sizing_mode",{processor:"string",default:"auto"}),A("table_default_attributes",{processor:"object",default:{border:"1"}}),A("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),A("table_column_resizing",{processor:M=>{const F=_o(["preservetable","resizetable"],M);return F?{value:M,valid:F}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),A("table_resize_bars",{processor:"boolean",default:!0}),A("table_style_by_css",{processor:"boolean",default:!0}),A("table_merge_content_on_paste",{processor:"boolean",default:!0})})(f);const h=Xh(f),y=l0(f,h),C=cr(f,h,y);return Cv(f,C),((O,A)=>{const M=hl(O),F=$=>Tg(_g(O)).bind(J=>To(J,M).map(oe=>{const ee=ut(Za(O),oe,J);return $(oe,ee)})).getOr("");hn({mceTableRowType:()=>F(A.getTableRowType),mceTableCellType:()=>F(A.getTableCellType),mceTableColType:()=>F(A.getTableColType)},($,J)=>O.addQueryValueHandler(J,$))})(f,C),uo(f,C),{getSelectedCells:y.getSelectedCells,clearSelectedCells:y.clearSelectedCells}};ib.add("dom",f=>({table:rp(f)}))})();tinymce.Resource.add("ui/default/skin.css",`.tox{box-shadow:none;box-sizing:content-box;color:#222f3e;cursor:auto;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:16px;font-style:normal;font-weight:400;line-height:normal;-webkit-tap-highlight-color:transparent;text-decoration:none;text-shadow:none;text-transform:none;vertical-align:initial;white-space:normal}.tox :not(svg):not(rect){box-sizing:inherit;color:inherit;cursor:inherit;direction:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;line-height:inherit;-webkit-tap-highlight-color:inherit;text-align:inherit;text-decoration:inherit;text-shadow:inherit;text-transform:inherit;vertical-align:inherit;white-space:inherit}.tox :not(svg):not(rect){background:0 0;border:0;box-shadow:none;float:none;height:auto;margin:0;max-width:none;outline:0;padding:0;position:static;width:auto}.tox:not([dir=rtl]){direction:ltr;text-align:left}.tox[dir=rtl]{direction:rtl;text-align:right}.tox-tinymce{border:2px solid #eee;border-radius:10px;box-shadow:none;box-sizing:border-box;display:flex;flex-direction:column;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;overflow:hidden;position:relative;visibility:inherit!important}.tox.tox-tinymce-inline{border:none;box-shadow:none;overflow:initial}.tox.tox-tinymce-inline .tox-editor-container{overflow:initial}.tox.tox-tinymce-inline .tox-editor-header{background-color:#fff;border:2px solid #eee;border-radius:10px;box-shadow:none;overflow:hidden}.tox-tinymce-aux{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;z-index:1300}.tox-tinymce :focus,.tox-tinymce-aux :focus{outline:0}button::-moz-focus-inner{border:0}.tox[dir=rtl] .tox-icon--flip svg{transform:rotateY(180deg)}.tox .accessibility-issue__header{align-items:center;display:flex;margin-bottom:4px}.tox .accessibility-issue__description{align-items:stretch;border-radius:6px;display:flex;justify-content:space-between}.tox .accessibility-issue__description>div{padding-bottom:4px}.tox .accessibility-issue__description>div>div{align-items:center;display:flex;margin-bottom:4px}.tox .accessibility-issue__description>div>div .tox-icon svg{display:block}.tox .accessibility-issue__repair{margin-top:16px}.tox .tox-dialog__body-content .accessibility-issue--info .accessibility-issue__description{background-color:rgba(0,101,216,.1);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--info .tox-form__group h2{color:#006ce7}.tox .tox-dialog__body-content .accessibility-issue--info .tox-icon svg{fill:#006ce7}.tox .tox-dialog__body-content .accessibility-issue--info a.tox-button--naked.tox-button--icon{background-color:#006ce7;color:#fff}.tox .tox-dialog__body-content .accessibility-issue--info a.tox-button--naked.tox-button--icon:focus,.tox .tox-dialog__body-content .accessibility-issue--info a.tox-button--naked.tox-button--icon:hover{background-color:#0060ce}.tox .tox-dialog__body-content .accessibility-issue--info a.tox-button--naked.tox-button--icon:active{background-color:#0054b4}.tox .tox-dialog__body-content .accessibility-issue--warn .accessibility-issue__description{background-color:rgba(255,165,0,.08);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--warn .tox-form__group h2{color:#8f5d00}.tox .tox-dialog__body-content .accessibility-issue--warn .tox-icon svg{fill:#8f5d00}.tox .tox-dialog__body-content .accessibility-issue--warn a.tox-button--naked.tox-button--icon{background-color:#ffe89d;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--warn a.tox-button--naked.tox-button--icon:focus,.tox .tox-dialog__body-content .accessibility-issue--warn a.tox-button--naked.tox-button--icon:hover{background-color:#f2d574;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--warn a.tox-button--naked.tox-button--icon:active{background-color:#e8c657;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--error .accessibility-issue__description{background-color:rgba(204,0,0,.1);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--error .tox-form__group h2{color:#c00}.tox .tox-dialog__body-content .accessibility-issue--error .tox-icon svg{fill:#c00}.tox .tox-dialog__body-content .accessibility-issue--error a.tox-button--naked.tox-button--icon{background-color:#f2bfbf;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--error a.tox-button--naked.tox-button--icon:focus,.tox .tox-dialog__body-content .accessibility-issue--error a.tox-button--naked.tox-button--icon:hover{background-color:#e9a4a4;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--error a.tox-button--naked.tox-button--icon:active{background-color:#ee9494;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--success .accessibility-issue__description{background-color:rgba(120,171,70,.1);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--success .accessibility-issue__description>:last-child{display:none}.tox .tox-dialog__body-content .accessibility-issue--success .tox-form__group h2{color:#527530}.tox .tox-dialog__body-content .accessibility-issue--success .tox-icon svg{fill:#527530}.tox .tox-dialog__body-content .accessibility-issue__header .tox-form__group h1,.tox .tox-dialog__body-content .tox-form__group .accessibility-issue__description h2{font-size:14px;margin-top:0}.tox:not([dir=rtl]) .tox-dialog__body-content .accessibility-issue__header .tox-button{margin-left:4px}.tox:not([dir=rtl]) .tox-dialog__body-content .accessibility-issue__header>:nth-last-child(2){margin-left:auto}.tox:not([dir=rtl]) .tox-dialog__body-content .accessibility-issue__description{padding:4px 4px 4px 8px}.tox[dir=rtl] .tox-dialog__body-content .accessibility-issue__header .tox-button{margin-right:4px}.tox[dir=rtl] .tox-dialog__body-content .accessibility-issue__header>:nth-last-child(2){margin-right:auto}.tox[dir=rtl] .tox-dialog__body-content .accessibility-issue__description{padding:4px 8px 4px 4px}.tox .tox-advtemplate .tox-form__grid{flex:1}.tox .tox-advtemplate .tox-form__grid>div:first-child{display:flex;flex-direction:column;width:30%}.tox .tox-advtemplate .tox-form__grid>div:first-child>div:nth-child(2){flex-basis:0;flex-grow:1;overflow:auto}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-advtemplate .tox-form__grid>div:first-child{width:100%}}.tox .tox-advtemplate iframe{border-color:#eee;border-radius:10px;border-style:solid;border-width:1px;margin:0 10px}.tox .tox-anchorbar{display:flex;flex:0 0 auto}.tox .tox-bottom-anchorbar{display:flex;flex:0 0 auto}.tox .tox-bar{display:flex;flex:0 0 auto}.tox .tox-button{background-color:#006ce7;background-image:none;background-position:0 0;background-repeat:repeat;border-color:#006ce7;border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:14px;font-style:normal;font-weight:700;letter-spacing:normal;line-height:24px;margin:0;outline:0;padding:4px 16px;position:relative;text-align:center;text-decoration:none;text-transform:none;white-space:nowrap}.tox .tox-button::before{border-radius:6px;bottom:-1px;box-shadow:inset 0 0 0 2px #fff,0 0 0 1px #006ce7,0 0 0 3px rgba(0,108,231,.25);content:'';left:-1px;opacity:0;pointer-events:none;position:absolute;right:-1px;top:-1px}.tox .tox-button[disabled]{background-color:#006ce7;background-image:none;border-color:#006ce7;box-shadow:none;color:rgba(255,255,255,.5);cursor:not-allowed}.tox .tox-button:focus:not(:disabled){background-color:#0060ce;background-image:none;border-color:#0060ce;box-shadow:none;color:#fff}.tox .tox-button:focus-visible:not(:disabled)::before{opacity:1}.tox .tox-button:hover:not(:disabled){background-color:#0060ce;background-image:none;border-color:#0060ce;box-shadow:none;color:#fff}.tox .tox-button:active:not(:disabled){background-color:#0054b4;background-image:none;border-color:#0054b4;box-shadow:none;color:#fff}.tox .tox-button.tox-button--enabled{background-color:#0054b4;background-image:none;border-color:#0054b4;box-shadow:none;color:#fff}.tox .tox-button.tox-button--enabled[disabled]{background-color:#0054b4;background-image:none;border-color:#0054b4;box-shadow:none;color:rgba(255,255,255,.5);cursor:not-allowed}.tox .tox-button.tox-button--enabled:focus:not(:disabled){background-color:#00489b;background-image:none;border-color:#00489b;box-shadow:none;color:#fff}.tox .tox-button.tox-button--enabled:hover:not(:disabled){background-color:#00489b;background-image:none;border-color:#00489b;box-shadow:none;color:#fff}.tox .tox-button.tox-button--enabled:active:not(:disabled){background-color:#003c81;background-image:none;border-color:#003c81;box-shadow:none;color:#fff}.tox .tox-button--icon-and-text,.tox .tox-button.tox-button--icon-and-text,.tox .tox-button.tox-button--secondary.tox-button--icon-and-text{display:flex;padding:5px 4px}.tox .tox-button--icon-and-text .tox-icon svg,.tox .tox-button.tox-button--icon-and-text .tox-icon svg,.tox .tox-button.tox-button--secondary.tox-button--icon-and-text .tox-icon svg{display:block;fill:currentColor}.tox .tox-button--secondary{background-color:#f0f0f0;background-image:none;background-position:0 0;background-repeat:repeat;border-color:#f0f0f0;border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;color:#222f3e;font-size:14px;font-style:normal;font-weight:700;letter-spacing:normal;outline:0;padding:4px 16px;text-decoration:none;text-transform:none}.tox .tox-button--secondary[disabled]{background-color:#f0f0f0;background-image:none;border-color:#f0f0f0;box-shadow:none;color:rgba(34,47,62,.5)}.tox .tox-button--secondary:focus:not(:disabled){background-color:#e3e3e3;background-image:none;border-color:#e3e3e3;box-shadow:none;color:#222f3e}.tox .tox-button--secondary:hover:not(:disabled){background-color:#e3e3e3;background-image:none;border-color:#e3e3e3;box-shadow:none;color:#222f3e}.tox .tox-button--secondary:active:not(:disabled){background-color:#d6d6d6;background-image:none;border-color:#d6d6d6;box-shadow:none;color:#222f3e}.tox .tox-button--secondary.tox-button--enabled{background-color:#a8c8ed;background-image:none;border-color:#a8c8ed;box-shadow:none;color:#222f3e}.tox .tox-button--secondary.tox-button--enabled[disabled]{background-color:#a8c8ed;background-image:none;border-color:#a8c8ed;box-shadow:none;color:rgba(34,47,62,.5)}.tox .tox-button--secondary.tox-button--enabled:focus:not(:disabled){background-color:#93bbe9;background-image:none;border-color:#93bbe9;box-shadow:none;color:#222f3e}.tox .tox-button--secondary.tox-button--enabled:hover:not(:disabled){background-color:#93bbe9;background-image:none;border-color:#93bbe9;box-shadow:none;color:#222f3e}.tox .tox-button--secondary.tox-button--enabled:active:not(:disabled){background-color:#7daee4;background-image:none;border-color:#7daee4;box-shadow:none;color:#222f3e}.tox .tox-button--icon,.tox .tox-button.tox-button--icon,.tox .tox-button.tox-button--secondary.tox-button--icon{padding:4px}.tox .tox-button--icon .tox-icon svg,.tox .tox-button.tox-button--icon .tox-icon svg,.tox .tox-button.tox-button--secondary.tox-button--icon .tox-icon svg{display:block;fill:currentColor}.tox .tox-button-link{background:0;border:none;box-sizing:border-box;cursor:pointer;display:inline-block;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:16px;font-weight:400;line-height:1.3;margin:0;padding:0;white-space:nowrap}.tox .tox-button-link--sm{font-size:14px}.tox .tox-button--naked{background-color:transparent;border-color:transparent;box-shadow:unset;color:#222f3e}.tox .tox-button--naked[disabled]{background-color:rgba(34,47,62,.12);border-color:transparent;box-shadow:unset;color:rgba(34,47,62,.5)}.tox .tox-button--naked:hover:not(:disabled){background-color:rgba(34,47,62,.12);border-color:transparent;box-shadow:unset;color:#222f3e}.tox .tox-button--naked:focus:not(:disabled){background-color:rgba(34,47,62,.12);border-color:transparent;box-shadow:unset;color:#222f3e}.tox .tox-button--naked:active:not(:disabled){background-color:rgba(34,47,62,.18);border-color:transparent;box-shadow:unset;color:#222f3e}.tox .tox-button--naked .tox-icon svg{fill:currentColor}.tox .tox-button--naked.tox-button--icon:hover:not(:disabled){color:#222f3e}.tox .tox-checkbox{align-items:center;border-radius:6px;cursor:pointer;display:flex;height:36px;min-width:36px}.tox .tox-checkbox__input{height:1px;overflow:hidden;position:absolute;top:auto;width:1px}.tox .tox-checkbox__icons{align-items:center;border-radius:6px;box-shadow:0 0 0 2px transparent;box-sizing:content-box;display:flex;height:24px;justify-content:center;padding:calc(4px - 1px);width:24px}.tox .tox-checkbox__icons .tox-checkbox-icon__unchecked svg{display:block;fill:rgba(34,47,62,.3)}.tox .tox-checkbox__icons .tox-checkbox-icon__indeterminate svg{display:none;fill:#006ce7}.tox .tox-checkbox__icons .tox-checkbox-icon__checked svg{display:none;fill:#006ce7}.tox .tox-checkbox--disabled{color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__checked svg{fill:rgba(34,47,62,.5)}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__unchecked svg{fill:rgba(34,47,62,.5)}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__indeterminate svg{fill:rgba(34,47,62,.5)}.tox input.tox-checkbox__input:checked+.tox-checkbox__icons .tox-checkbox-icon__unchecked svg{display:none}.tox input.tox-checkbox__input:checked+.tox-checkbox__icons .tox-checkbox-icon__checked svg{display:block}.tox input.tox-checkbox__input:indeterminate+.tox-checkbox__icons .tox-checkbox-icon__unchecked svg{display:none}.tox input.tox-checkbox__input:indeterminate+.tox-checkbox__icons .tox-checkbox-icon__indeterminate svg{display:block}.tox input.tox-checkbox__input:focus+.tox-checkbox__icons{border-radius:6px;box-shadow:inset 0 0 0 1px #006ce7;padding:calc(4px - 1px)}.tox:not([dir=rtl]) .tox-checkbox__label{margin-left:4px}.tox:not([dir=rtl]) .tox-checkbox__input{left:-10000px}.tox:not([dir=rtl]) .tox-bar .tox-checkbox{margin-left:4px}.tox[dir=rtl] .tox-checkbox__label{margin-right:4px}.tox[dir=rtl] .tox-checkbox__input{right:-10000px}.tox[dir=rtl] .tox-bar .tox-checkbox{margin-right:4px}.tox .tox-collection--toolbar .tox-collection__group{display:flex;padding:0}.tox .tox-collection--grid .tox-collection__group{display:flex;flex-wrap:wrap;max-height:208px;overflow-x:hidden;overflow-y:auto;padding:0}.tox .tox-collection--list .tox-collection__group{border-bottom-width:0;border-color:#e3e3e3;border-left-width:0;border-right-width:0;border-style:solid;border-top-width:1px;padding:4px 0}.tox .tox-collection--list .tox-collection__group:first-child{border-top-width:0}.tox .tox-collection__group-heading{background-color:#fcfcfc;color:rgba(34,47,62,.7);cursor:default;font-size:12px;font-style:normal;font-weight:400;margin-bottom:4px;margin-top:-4px;padding:4px 8px;text-transform:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tox .tox-collection__item{align-items:center;border-radius:3px;color:#222f3e;display:flex;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tox .tox-collection--list .tox-collection__item{padding:4px 8px}.tox .tox-collection--toolbar .tox-collection__item{border-radius:3px;padding:4px}.tox .tox-collection--grid .tox-collection__item{border-radius:3px;padding:4px}.tox .tox-collection--list .tox-collection__item--enabled{background-color:#fff;color:#222f3e}.tox .tox-collection--list .tox-collection__item--active{background-color:#cce2fa}.tox .tox-collection--toolbar .tox-collection__item--enabled{background-color:#a6ccf7;color:#222f3e}.tox .tox-collection--toolbar .tox-collection__item--active{background-color:#cce2fa}.tox .tox-collection--grid .tox-collection__item--enabled{background-color:#a6ccf7;color:#222f3e}.tox .tox-collection--grid .tox-collection__item--active:not(.tox-collection__item--state-disabled){background-color:#cce2fa;color:#222f3e}.tox .tox-collection--list .tox-collection__item--active:not(.tox-collection__item--state-disabled){color:#222f3e}.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled){color:#222f3e}.tox .tox-collection__item-checkmark,.tox .tox-collection__item-icon{align-items:center;display:flex;height:24px;justify-content:center;width:24px}.tox .tox-collection__item-checkmark svg,.tox .tox-collection__item-icon svg{fill:currentColor}.tox .tox-collection--toolbar-lg .tox-collection__item-icon{height:48px;width:48px}.tox .tox-collection__item-label{color:currentColor;display:inline-block;flex:1;font-size:14px;font-style:normal;font-weight:400;line-height:24px;max-width:100%;text-transform:none;word-break:break-all}.tox .tox-collection__item-accessory{color:rgba(34,47,62,.7);display:inline-block;font-size:14px;height:24px;line-height:24px;text-transform:none}.tox .tox-collection__item-caret{align-items:center;display:flex;min-height:24px}.tox .tox-collection__item-caret::after{content:'';font-size:0;min-height:inherit}.tox .tox-collection__item-caret svg{fill:#222f3e}.tox .tox-collection__item--state-disabled{background-color:transparent;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-collection__item--state-disabled .tox-collection__item-caret svg{fill:rgba(34,47,62,.5)}.tox .tox-collection--list .tox-collection__item:not(.tox-collection__item--enabled) .tox-collection__item-checkmark svg{display:none}.tox .tox-collection--list .tox-collection__item:not(.tox-collection__item--enabled) .tox-collection__item-accessory+.tox-collection__item-checkmark{display:none}.tox .tox-collection--horizontal{background-color:#fff;border:1px solid #e3e3e3;border-radius:6px;box-shadow:0 0 2px 0 rgba(34,47,62,.2),0 4px 8px 0 rgba(34,47,62,.15);display:flex;flex:0 0 auto;flex-shrink:0;flex-wrap:nowrap;margin-bottom:0;overflow-x:auto;padding:0}.tox .tox-collection--horizontal .tox-collection__group{align-items:center;display:flex;flex-wrap:nowrap;margin:0;padding:0 4px}.tox .tox-collection--horizontal .tox-collection__item{height:28px;margin:6px 1px 5px 0;padding:0 4px}.tox .tox-collection--horizontal .tox-collection__item-label{white-space:nowrap}.tox .tox-collection--horizontal .tox-collection__item-caret{margin-left:4px}.tox .tox-collection__item-container{display:flex}.tox .tox-collection__item-container--row{align-items:center;flex:1 1 auto;flex-direction:row}.tox .tox-collection__item-container--row.tox-collection__item-container--align-left{margin-right:auto}.tox .tox-collection__item-container--row.tox-collection__item-container--align-right{justify-content:flex-end;margin-left:auto}.tox .tox-collection__item-container--row.tox-collection__item-container--valign-top{align-items:flex-start;margin-bottom:auto}.tox .tox-collection__item-container--row.tox-collection__item-container--valign-middle{align-items:center}.tox .tox-collection__item-container--row.tox-collection__item-container--valign-bottom{align-items:flex-end;margin-top:auto}.tox .tox-collection__item-container--column{align-self:center;flex:1 1 auto;flex-direction:column}.tox .tox-collection__item-container--column.tox-collection__item-container--align-left{align-items:flex-start}.tox .tox-collection__item-container--column.tox-collection__item-container--align-right{align-items:flex-end}.tox .tox-collection__item-container--column.tox-collection__item-container--valign-top{align-self:flex-start}.tox .tox-collection__item-container--column.tox-collection__item-container--valign-middle{align-self:center}.tox .tox-collection__item-container--column.tox-collection__item-container--valign-bottom{align-self:flex-end}.tox:not([dir=rtl]) .tox-collection--horizontal .tox-collection__group:not(:last-of-type){border-right:1px solid transparent}.tox:not([dir=rtl]) .tox-collection--list .tox-collection__item>:not(:first-child){margin-left:8px}.tox:not([dir=rtl]) .tox-collection--list .tox-collection__item>.tox-collection__item-label:first-child{margin-left:4px}.tox:not([dir=rtl]) .tox-collection__item-accessory{margin-left:16px;text-align:right}.tox:not([dir=rtl]) .tox-collection .tox-collection__item-caret{margin-left:16px}.tox[dir=rtl] .tox-collection--horizontal .tox-collection__group:not(:last-of-type){border-left:1px solid transparent}.tox[dir=rtl] .tox-collection--list .tox-collection__item>:not(:first-child){margin-right:8px}.tox[dir=rtl] .tox-collection--list .tox-collection__item>.tox-collection__item-label:first-child{margin-right:4px}.tox[dir=rtl] .tox-collection__item-accessory{margin-right:16px;text-align:left}.tox[dir=rtl] .tox-collection .tox-collection__item-caret{margin-right:16px;transform:rotateY(180deg)}.tox[dir=rtl] .tox-collection--horizontal .tox-collection__item-caret{margin-right:4px}.tox .tox-color-picker-container{display:flex;flex-direction:row;height:225px;margin:0}.tox .tox-sv-palette{box-sizing:border-box;display:flex;height:100%}.tox .tox-sv-palette-spectrum{height:100%}.tox .tox-sv-palette,.tox .tox-sv-palette-spectrum{width:225px}.tox .tox-sv-palette-thumb{background:0 0;border:1px solid #000;border-radius:50%;box-sizing:content-box;height:12px;position:absolute;width:12px}.tox .tox-sv-palette-inner-thumb{border:1px solid #fff;border-radius:50%;height:10px;position:absolute;width:10px}.tox .tox-hue-slider{box-sizing:border-box;height:100%;width:25px}.tox .tox-hue-slider-spectrum{background:linear-gradient(to bottom,red,#ff0080,#f0f,#8000ff,#00f,#0080ff,#0ff,#00ff80,#0f0,#80ff00,#ff0,#ff8000,red);height:100%;width:100%}.tox .tox-hue-slider,.tox .tox-hue-slider-spectrum{width:20px}.tox .tox-hue-slider-spectrum:focus,.tox .tox-sv-palette-spectrum:focus{outline:#08f solid}.tox .tox-hue-slider-thumb{background:#fff;border:1px solid #000;box-sizing:content-box;height:4px;width:100%}.tox .tox-rgb-form{display:flex;flex-direction:column;justify-content:space-between}.tox .tox-rgb-form div{align-items:center;display:flex;justify-content:space-between;margin-bottom:5px;width:inherit}.tox .tox-rgb-form input{width:6em}.tox .tox-rgb-form input.tox-invalid{border:1px solid red!important}.tox .tox-rgb-form .tox-rgba-preview{border:1px solid #000;flex-grow:2;margin-bottom:0}.tox:not([dir=rtl]) .tox-sv-palette{margin-right:15px}.tox:not([dir=rtl]) .tox-hue-slider{margin-right:15px}.tox:not([dir=rtl]) .tox-hue-slider-thumb{margin-left:-1px}.tox:not([dir=rtl]) .tox-rgb-form label{margin-right:.5em}.tox[dir=rtl] .tox-sv-palette{margin-left:15px}.tox[dir=rtl] .tox-hue-slider{margin-left:15px}.tox[dir=rtl] .tox-hue-slider-thumb{margin-right:-1px}.tox[dir=rtl] .tox-rgb-form label{margin-left:.5em}.tox .tox-toolbar .tox-swatches,.tox .tox-toolbar__overflow .tox-swatches,.tox .tox-toolbar__primary .tox-swatches{margin:5px 0 6px 11px}.tox .tox-collection--list .tox-collection__group .tox-swatches-menu{border:0;margin:-4px -4px}.tox .tox-swatches__row{display:flex}.tox .tox-swatch{height:30px;transition:transform .15s,box-shadow .15s;width:30px}.tox .tox-swatch:focus,.tox .tox-swatch:hover{box-shadow:0 0 0 1px rgba(127,127,127,.3) inset;transform:scale(.8)}.tox .tox-swatch--remove{align-items:center;display:flex;justify-content:center}.tox .tox-swatch--remove svg path{stroke:#e74c3c}.tox .tox-swatches__picker-btn{align-items:center;background-color:transparent;border:0;cursor:pointer;display:flex;height:30px;justify-content:center;outline:0;padding:0;width:30px}.tox .tox-swatches__picker-btn svg{fill:#222f3e;height:24px;width:24px}.tox .tox-swatches__picker-btn:hover{background:#cce2fa}.tox div.tox-swatch:not(.tox-swatch--remove) svg{display:none;fill:#222f3e;height:24px;margin:calc((30px - 24px)/ 2) calc((30px - 24px)/ 2);width:24px}.tox div.tox-swatch:not(.tox-swatch--remove) svg path{fill:#fff;paint-order:stroke;stroke:#222f3e;stroke-width:2px}.tox div.tox-swatch:not(.tox-swatch--remove).tox-collection__item--enabled svg{display:block}.tox:not([dir=rtl]) .tox-swatches__picker-btn{margin-left:auto}.tox[dir=rtl] .tox-swatches__picker-btn{margin-right:auto}.tox .tox-comment-thread{background:#fff;position:relative}.tox .tox-comment-thread>:not(:first-child){margin-top:8px}.tox .tox-comment{background:#fff;border:1px solid #eee;border-radius:6px;box-shadow:0 4px 8px 0 rgba(34,47,62,.1);padding:8px 8px 16px 8px;position:relative}.tox .tox-comment__header{align-items:center;color:#222f3e;display:flex;justify-content:space-between}.tox .tox-comment__date{color:#222f3e;font-size:12px;line-height:18px}.tox .tox-comment__body{color:#222f3e;font-size:14px;font-style:normal;font-weight:400;line-height:1.3;margin-top:8px;position:relative;text-transform:initial}.tox .tox-comment__body textarea{resize:none;white-space:normal;width:100%}.tox .tox-comment__expander{padding-top:8px}.tox .tox-comment__expander p{color:rgba(34,47,62,.7);font-size:14px;font-style:normal}.tox .tox-comment__body p{margin:0}.tox .tox-comment__buttonspacing{padding-top:16px;text-align:center}.tox .tox-comment-thread__overlay::after{background:#fff;bottom:0;content:"";display:flex;left:0;opacity:.9;position:absolute;right:0;top:0;z-index:5}.tox .tox-comment__reply{display:flex;flex-shrink:0;flex-wrap:wrap;justify-content:flex-end;margin-top:8px}.tox .tox-comment__reply>:first-child{margin-bottom:8px;width:100%}.tox .tox-comment__edit{display:flex;flex-wrap:wrap;justify-content:flex-end;margin-top:16px}.tox .tox-comment__gradient::after{background:linear-gradient(rgba(255,255,255,0),#fff);bottom:0;content:"";display:block;height:5em;margin-top:-40px;position:absolute;width:100%}.tox .tox-comment__overlay{background:#fff;bottom:0;display:flex;flex-direction:column;flex-grow:1;left:0;opacity:.9;position:absolute;right:0;text-align:center;top:0;z-index:5}.tox .tox-comment__loading-text{align-items:center;color:#222f3e;display:flex;flex-direction:column;position:relative}.tox .tox-comment__loading-text>div{padding-bottom:16px}.tox .tox-comment__overlaytext{bottom:0;flex-direction:column;font-size:14px;left:0;padding:1em;position:absolute;right:0;top:0;z-index:10}.tox .tox-comment__overlaytext p{background-color:#fff;box-shadow:0 0 8px 8px #fff;color:#222f3e;text-align:center}.tox .tox-comment__overlaytext div:nth-of-type(2){font-size:.8em}.tox .tox-comment__busy-spinner{align-items:center;background-color:#fff;bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0;z-index:20}.tox .tox-comment__scroll{display:flex;flex-direction:column;flex-shrink:1;overflow:auto}.tox .tox-conversations{margin:8px}.tox:not([dir=rtl]) .tox-comment__edit{margin-left:8px}.tox:not([dir=rtl]) .tox-comment__buttonspacing>:last-child,.tox:not([dir=rtl]) .tox-comment__edit>:last-child,.tox:not([dir=rtl]) .tox-comment__reply>:last-child{margin-left:8px}.tox[dir=rtl] .tox-comment__edit{margin-right:8px}.tox[dir=rtl] .tox-comment__buttonspacing>:last-child,.tox[dir=rtl] .tox-comment__edit>:last-child,.tox[dir=rtl] .tox-comment__reply>:last-child{margin-right:8px}.tox .tox-user{align-items:center;display:flex}.tox .tox-user__avatar svg{fill:rgba(34,47,62,.7)}.tox .tox-user__avatar img{border-radius:50%;height:36px;object-fit:cover;vertical-align:middle;width:36px}.tox .tox-user__name{color:#222f3e;font-size:14px;font-style:normal;font-weight:700;line-height:18px;text-transform:none}.tox:not([dir=rtl]) .tox-user__avatar img,.tox:not([dir=rtl]) .tox-user__avatar svg{margin-right:8px}.tox:not([dir=rtl]) .tox-user__avatar+.tox-user__name{margin-left:8px}.tox[dir=rtl] .tox-user__avatar img,.tox[dir=rtl] .tox-user__avatar svg{margin-left:8px}.tox[dir=rtl] .tox-user__avatar+.tox-user__name{margin-right:8px}.tox .tox-dialog-wrap{align-items:center;bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1100}.tox .tox-dialog-wrap__backdrop{background-color:rgba(255,255,255,.75);bottom:0;left:0;position:absolute;right:0;top:0;z-index:1}.tox .tox-dialog-wrap__backdrop--opaque{background-color:#fff}.tox .tox-dialog{background-color:#fff;border-color:#eee;border-radius:10px;border-style:solid;border-width:0;box-shadow:0 16px 16px -10px rgba(34,47,62,.15),0 0 40px 1px rgba(34,47,62,.15);display:flex;flex-direction:column;max-height:100%;max-width:480px;overflow:hidden;position:relative;width:95vw;z-index:2}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-dialog{align-self:flex-start;margin:8px auto;max-height:calc(100vh - 8px * 2);width:calc(100vw - 16px)}}.tox .tox-dialog-inline{z-index:1100}.tox .tox-dialog__header{align-items:center;background-color:#fff;border-bottom:none;color:#222f3e;display:flex;font-size:16px;justify-content:space-between;padding:8px 16px 0 16px;position:relative}.tox .tox-dialog__header .tox-button{z-index:1}.tox .tox-dialog__draghandle{cursor:grab;height:100%;left:0;position:absolute;top:0;width:100%}.tox .tox-dialog__draghandle:active{cursor:grabbing}.tox .tox-dialog__dismiss{margin-left:auto}.tox .tox-dialog__title{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:20px;font-style:normal;font-weight:400;line-height:1.3;margin:0;text-transform:none}.tox .tox-dialog__body{color:#222f3e;display:flex;flex:1;font-size:16px;font-style:normal;font-weight:400;line-height:1.3;min-width:0;text-align:left;text-transform:none}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-dialog__body{flex-direction:column}}.tox .tox-dialog__body-nav{align-items:flex-start;display:flex;flex-direction:column;flex-shrink:0;padding:16px 16px}@media only screen and (min-width:768px){.tox .tox-dialog__body-nav{max-width:11em}}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-dialog__body-nav{flex-direction:row;-webkit-overflow-scrolling:touch;overflow-x:auto;padding-bottom:0}}.tox .tox-dialog__body-nav-item{border-bottom:2px solid transparent;color:rgba(34,47,62,.7);display:inline-block;flex-shrink:0;font-size:14px;line-height:1.3;margin-bottom:8px;max-width:13em;text-decoration:none}.tox .tox-dialog__body-nav-item:focus{background-color:rgba(0,108,231,.1)}.tox .tox-dialog__body-nav-item--active{border-bottom:2px solid #006ce7;color:#006ce7}.tox .tox-dialog__body-content{box-sizing:border-box;display:flex;flex:1;flex-direction:column;max-height:min(650px,calc(100vh - 110px));overflow:auto;-webkit-overflow-scrolling:touch;padding:16px 16px}.tox .tox-dialog__body-content>*{margin-bottom:0;margin-top:16px}.tox .tox-dialog__body-content>:first-child{margin-top:0}.tox .tox-dialog__body-content>:last-child{margin-bottom:0}.tox .tox-dialog__body-content>:only-child{margin-bottom:0;margin-top:0}.tox .tox-dialog__body-content a{color:#006ce7;cursor:pointer;text-decoration:underline}.tox .tox-dialog__body-content a:focus,.tox .tox-dialog__body-content a:hover{color:#003c81;text-decoration:underline}.tox .tox-dialog__body-content a:focus-visible{border-radius:1px;outline:2px solid #006ce7;outline-offset:2px}.tox .tox-dialog__body-content a:active{color:#00244e;text-decoration:underline}.tox .tox-dialog__body-content svg{fill:#222f3e}.tox .tox-dialog__body-content strong{font-weight:700}.tox .tox-dialog__body-content ul{list-style-type:disc}.tox .tox-dialog__body-content dd,.tox .tox-dialog__body-content ol,.tox .tox-dialog__body-content ul{padding-inline-start:2.5rem}.tox .tox-dialog__body-content dl,.tox .tox-dialog__body-content ol,.tox .tox-dialog__body-content ul{margin-bottom:16px}.tox .tox-dialog__body-content dd,.tox .tox-dialog__body-content dl,.tox .tox-dialog__body-content dt,.tox .tox-dialog__body-content ol,.tox .tox-dialog__body-content ul{display:block;margin-inline-end:0;margin-inline-start:0}.tox .tox-dialog__body-content .tox-form__group h1{color:#222f3e;font-size:20px;font-style:normal;font-weight:700;letter-spacing:normal;margin-bottom:16px;margin-top:2rem;text-transform:none}.tox .tox-dialog__body-content .tox-form__group h2{color:#222f3e;font-size:16px;font-style:normal;font-weight:700;letter-spacing:normal;margin-bottom:16px;margin-top:2rem;text-transform:none}.tox .tox-dialog__body-content .tox-form__group p{margin-bottom:16px}.tox .tox-dialog__body-content .tox-form__group h1:first-child,.tox .tox-dialog__body-content .tox-form__group h2:first-child,.tox .tox-dialog__body-content .tox-form__group p:first-child{margin-top:0}.tox .tox-dialog__body-content .tox-form__group h1:last-child,.tox .tox-dialog__body-content .tox-form__group h2:last-child,.tox .tox-dialog__body-content .tox-form__group p:last-child{margin-bottom:0}.tox .tox-dialog__body-content .tox-form__group h1:only-child,.tox .tox-dialog__body-content .tox-form__group h2:only-child,.tox .tox-dialog__body-content .tox-form__group p:only-child{margin-bottom:0;margin-top:0}.tox .tox-dialog__body-content .tox-form__group .tox-label.tox-label--center{text-align:center}.tox .tox-dialog__body-content .tox-form__group .tox-label.tox-label--end{text-align:end}.tox .tox-dialog--width-lg{height:650px;max-width:1200px}.tox .tox-dialog--fullscreen{height:100%;max-width:100%}.tox .tox-dialog--fullscreen .tox-dialog__body-content{max-height:100%}.tox .tox-dialog--width-md{max-width:800px}.tox .tox-dialog--width-md .tox-dialog__body-content{overflow:auto}.tox .tox-dialog__body-content--centered{text-align:center}.tox .tox-dialog__footer{align-items:center;background-color:#fff;border-top:none;display:flex;justify-content:space-between;padding:8px 16px}.tox .tox-dialog__footer-end,.tox .tox-dialog__footer-start{display:flex}.tox .tox-dialog__busy-spinner{align-items:center;background-color:rgba(255,255,255,.75);bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0;z-index:3}.tox .tox-dialog__table{border-collapse:collapse;width:100%}.tox .tox-dialog__table thead th{font-weight:700;padding-bottom:8px}.tox .tox-dialog__table thead th:first-child{padding-right:8px}.tox .tox-dialog__table tbody tr{border-bottom:1px solid #626262}.tox .tox-dialog__table tbody tr:last-child{border-bottom:none}.tox .tox-dialog__table td{padding-bottom:8px;padding-top:8px}.tox .tox-dialog__table td:first-child{padding-right:8px}.tox .tox-dialog__iframe{min-height:200px}.tox .tox-dialog__iframe.tox-dialog__iframe--opaque{background:#fff}.tox .tox-navobj-bordered{position:relative}.tox .tox-navobj-bordered::before{border:1px solid #eee;border-radius:6px;content:'';inset:0;opacity:1;pointer-events:none;position:absolute;z-index:1}.tox .tox-navobj-bordered-focus.tox-navobj-bordered::before{border-color:#006ce7;box-shadow:0 0 0 2px rgba(0,108,231,.25);outline:0}.tox .tox-dialog__popups{position:absolute;width:100%;z-index:1100}.tox .tox-dialog__body-iframe{display:flex;flex:1;flex-direction:column}.tox .tox-dialog__body-iframe .tox-navobj{display:flex;flex:1}.tox .tox-dialog__body-iframe .tox-navobj :nth-child(2){flex:1;height:100%}.tox .tox-dialog-dock-fadeout{opacity:0;visibility:hidden}.tox .tox-dialog-dock-fadein{opacity:1;visibility:visible}.tox .tox-dialog-dock-transition{transition:visibility 0s linear .3s,opacity .3s ease}.tox .tox-dialog-dock-transition.tox-dialog-dock-fadein{transition-delay:0s}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox:not([dir=rtl]) .tox-dialog__body-nav{margin-right:0}}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox:not([dir=rtl]) .tox-dialog__body-nav-item:not(:first-child){margin-left:8px}}.tox:not([dir=rtl]) .tox-dialog__footer .tox-dialog__footer-end>*,.tox:not([dir=rtl]) .tox-dialog__footer .tox-dialog__footer-start>*{margin-left:8px}.tox[dir=rtl] .tox-dialog__body{text-align:right}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox[dir=rtl] .tox-dialog__body-nav{margin-left:0}}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox[dir=rtl] .tox-dialog__body-nav-item:not(:first-child){margin-right:8px}}.tox[dir=rtl] .tox-dialog__footer .tox-dialog__footer-end>*,.tox[dir=rtl] .tox-dialog__footer .tox-dialog__footer-start>*{margin-right:8px}body.tox-dialog__disable-scroll{overflow:hidden}.tox .tox-dropzone-container{display:flex;flex:1}.tox .tox-dropzone{align-items:center;background:#fff;border:2px dashed #eee;box-sizing:border-box;display:flex;flex-direction:column;flex-grow:1;justify-content:center;min-height:100px;padding:10px}.tox .tox-dropzone p{color:rgba(34,47,62,.7);margin:0 0 16px 0}.tox .tox-edit-area{display:flex;flex:1;overflow:hidden;position:relative}.tox .tox-edit-area::before{border:2px solid #2d6adf;border-radius:4px;content:'';inset:0;opacity:0;pointer-events:none;position:absolute;transition:opacity .15s;z-index:1}.tox .tox-edit-area__iframe{background-color:#fff;border:0;box-sizing:border-box;flex:1;height:100%;position:absolute;width:100%}.tox.tox-edit-focus .tox-edit-area::before{opacity:1}.tox.tox-inline-edit-area{border:1px dotted #eee}.tox .tox-editor-container{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.tox .tox-editor-header{display:grid;grid-template-columns:1fr min-content;z-index:2}.tox:not(.tox-tinymce-inline) .tox-editor-header{background-color:#fff;border-bottom:none;box-shadow:0 2px 2px -2px rgba(34,47,62,.1),0 8px 8px -4px rgba(34,47,62,.07);padding:4px 0}.tox:not(.tox-tinymce-inline) .tox-editor-header:not(.tox-editor-dock-transition){transition:box-shadow .5s}.tox:not(.tox-tinymce-inline).tox-tinymce--toolbar-bottom .tox-editor-header{border-top:1px solid #e3e3e3;box-shadow:none}.tox:not(.tox-tinymce-inline).tox-tinymce--toolbar-sticky-on .tox-editor-header{background-color:#fff;box-shadow:0 2px 2px -2px rgba(34,47,62,.2),0 8px 8px -4px rgba(34,47,62,.15);padding:4px 0}.tox:not(.tox-tinymce-inline).tox-tinymce--toolbar-sticky-on.tox-tinymce--toolbar-bottom .tox-editor-header{box-shadow:0 2px 2px -2px rgba(34,47,62,.2),0 8px 8px -4px rgba(34,47,62,.15)}.tox.tox:not(.tox-tinymce-inline) .tox-editor-header.tox-editor-header--empty{background:0 0;border:none;box-shadow:none;padding:0}.tox-editor-dock-fadeout{opacity:0;visibility:hidden}.tox-editor-dock-fadein{opacity:1;visibility:visible}.tox-editor-dock-transition{transition:visibility 0s linear .25s,opacity .25s ease}.tox-editor-dock-transition.tox-editor-dock-fadein{transition-delay:0s}.tox .tox-control-wrap{flex:1;position:relative}.tox .tox-control-wrap:not(.tox-control-wrap--status-invalid) .tox-control-wrap__status-icon-invalid,.tox .tox-control-wrap:not(.tox-control-wrap--status-unknown) .tox-control-wrap__status-icon-unknown,.tox .tox-control-wrap:not(.tox-control-wrap--status-valid) .tox-control-wrap__status-icon-valid{display:none}.tox .tox-control-wrap svg{display:block}.tox .tox-control-wrap__status-icon-wrap{position:absolute;top:50%;transform:translateY(-50%)}.tox .tox-control-wrap__status-icon-invalid svg{fill:#c00}.tox .tox-control-wrap__status-icon-unknown svg{fill:orange}.tox .tox-control-wrap__status-icon-valid svg{fill:green}.tox:not([dir=rtl]) .tox-control-wrap--status-invalid .tox-textfield,.tox:not([dir=rtl]) .tox-control-wrap--status-unknown .tox-textfield,.tox:not([dir=rtl]) .tox-control-wrap--status-valid .tox-textfield{padding-right:32px}.tox:not([dir=rtl]) .tox-control-wrap__status-icon-wrap{right:4px}.tox[dir=rtl] .tox-control-wrap--status-invalid .tox-textfield,.tox[dir=rtl] .tox-control-wrap--status-unknown .tox-textfield,.tox[dir=rtl] .tox-control-wrap--status-valid .tox-textfield{padding-left:32px}.tox[dir=rtl] .tox-control-wrap__status-icon-wrap{left:4px}.tox .tox-autocompleter{max-width:25em}.tox .tox-autocompleter .tox-menu{box-sizing:border-box;max-width:25em}.tox .tox-autocompleter .tox-autocompleter-highlight{font-weight:700}.tox .tox-color-input{display:flex;position:relative;z-index:1}.tox .tox-color-input .tox-textfield{z-index:-1}.tox .tox-color-input span{border-color:rgba(34,47,62,.2);border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;height:24px;position:absolute;top:6px;width:24px}.tox .tox-color-input span:focus:not([aria-disabled=true]),.tox .tox-color-input span:hover:not([aria-disabled=true]){border-color:#006ce7;cursor:pointer}.tox .tox-color-input span::before{background-image:linear-gradient(45deg,rgba(0,0,0,.25) 25%,transparent 25%),linear-gradient(-45deg,rgba(0,0,0,.25) 25%,transparent 25%),linear-gradient(45deg,transparent 75%,rgba(0,0,0,.25) 75%),linear-gradient(-45deg,transparent 75%,rgba(0,0,0,.25) 75%);background-position:0 0,0 6px,6px -6px,-6px 0;background-size:12px 12px;border:1px solid #fff;border-radius:6px;box-sizing:border-box;content:'';height:24px;left:-1px;position:absolute;top:-1px;width:24px;z-index:-1}.tox .tox-color-input span[aria-disabled=true]{cursor:not-allowed}.tox:not([dir=rtl]) .tox-color-input .tox-textfield{padding-left:36px}.tox:not([dir=rtl]) .tox-color-input span{left:6px}.tox[dir=rtl] .tox-color-input .tox-textfield{padding-right:36px}.tox[dir=rtl] .tox-color-input span{right:6px}.tox .tox-label,.tox .tox-toolbar-label{color:rgba(34,47,62,.7);display:block;font-size:14px;font-style:normal;font-weight:400;line-height:1.3;padding:0 8px 0 0;text-transform:none;white-space:nowrap}.tox .tox-toolbar-label{padding:0 8px}.tox[dir=rtl] .tox-label{padding:0 0 0 8px}.tox .tox-form{display:flex;flex:1;flex-direction:column}.tox .tox-form__group{box-sizing:border-box;margin-bottom:4px}.tox .tox-form-group--maximize{flex:1}.tox .tox-form__group--error{color:#c00}.tox .tox-form__group--collection{display:flex}.tox .tox-form__grid{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.tox .tox-form__grid--2col>.tox-form__group{width:calc(50% - (8px / 2))}.tox .tox-form__grid--3col>.tox-form__group{width:calc(100% / 3 - (8px / 2))}.tox .tox-form__grid--4col>.tox-form__group{width:calc(25% - (8px / 2))}.tox .tox-form__controls-h-stack{align-items:center;display:flex}.tox .tox-form__group--inline{align-items:center;display:flex}.tox .tox-form__group--stretched{display:flex;flex:1;flex-direction:column}.tox .tox-form__group--stretched .tox-textarea{flex:1}.tox .tox-form__group--stretched .tox-navobj{display:flex;flex:1}.tox .tox-form__group--stretched .tox-navobj :nth-child(2){flex:1;height:100%}.tox:not([dir=rtl]) .tox-form__controls-h-stack>:not(:first-child){margin-left:4px}.tox[dir=rtl] .tox-form__controls-h-stack>:not(:first-child){margin-right:4px}.tox .tox-lock.tox-locked .tox-lock-icon__unlock,.tox .tox-lock:not(.tox-locked) .tox-lock-icon__lock{display:none}.tox .tox-listboxfield .tox-listbox--select,.tox .tox-textarea,.tox .tox-textarea-wrap .tox-textarea:focus,.tox .tox-textfield,.tox .tox-toolbar-textfield{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-color:#eee;border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;color:#222f3e;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:16px;line-height:24px;margin:0;min-height:34px;outline:0;padding:5px 5.5px;resize:none;width:100%}.tox .tox-textarea[disabled],.tox .tox-textfield[disabled]{background-color:#f2f2f2;color:rgba(34,47,62,.85);cursor:not-allowed}.tox .tox-custom-editor:focus-within,.tox .tox-listboxfield .tox-listbox--select:focus,.tox .tox-textarea-wrap:focus-within,.tox .tox-textarea:focus,.tox .tox-textfield:focus{background-color:#fff;border-color:#006ce7;box-shadow:0 0 0 2px rgba(0,108,231,.25);outline:0}.tox .tox-toolbar-textfield{border-width:0;margin-bottom:3px;margin-top:2px;max-width:250px}.tox .tox-naked-btn{background-color:transparent;border:0;border-color:transparent;box-shadow:unset;color:#006ce7;cursor:pointer;display:block;margin:0;padding:0}.tox .tox-naked-btn svg{display:block;fill:#222f3e}.tox:not([dir=rtl]) .tox-toolbar-textfield+*{margin-left:4px}.tox[dir=rtl] .tox-toolbar-textfield+*{margin-right:4px}.tox .tox-listboxfield{cursor:pointer;position:relative}.tox .tox-listboxfield .tox-listbox--select[disabled]{background-color:#f2f2f2;color:rgba(34,47,62,.85);cursor:not-allowed}.tox .tox-listbox__select-label{cursor:default;flex:1;margin:0 4px}.tox .tox-listbox__select-chevron{align-items:center;display:flex;justify-content:center;width:16px}.tox .tox-listbox__select-chevron svg{fill:#222f3e}.tox .tox-listboxfield .tox-listbox--select{align-items:center;display:flex}.tox:not([dir=rtl]) .tox-listboxfield svg{right:8px}.tox[dir=rtl] .tox-listboxfield svg{left:8px}.tox .tox-selectfield{cursor:pointer;position:relative}.tox .tox-selectfield select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-color:#eee;border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;color:#222f3e;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:16px;line-height:24px;margin:0;min-height:34px;outline:0;padding:5px 5.5px;resize:none;width:100%}.tox .tox-selectfield select[disabled]{background-color:#f2f2f2;color:rgba(34,47,62,.85);cursor:not-allowed}.tox .tox-selectfield select::-ms-expand{display:none}.tox .tox-selectfield select:focus{background-color:#fff;border-color:#006ce7;box-shadow:0 0 0 2px rgba(0,108,231,.25);outline:0}.tox .tox-selectfield svg{pointer-events:none;position:absolute;top:50%;transform:translateY(-50%)}.tox:not([dir=rtl]) .tox-selectfield select[size="0"],.tox:not([dir=rtl]) .tox-selectfield select[size="1"]{padding-right:24px}.tox:not([dir=rtl]) .tox-selectfield svg{right:8px}.tox[dir=rtl] .tox-selectfield select[size="0"],.tox[dir=rtl] .tox-selectfield select[size="1"]{padding-left:24px}.tox[dir=rtl] .tox-selectfield svg{left:8px}.tox .tox-textarea-wrap{border-color:#eee;border-radius:6px;border-style:solid;border-width:1px;display:flex;flex:1;overflow:hidden}.tox .tox-textarea{-webkit-appearance:textarea;-moz-appearance:textarea;appearance:textarea;white-space:pre-wrap}.tox .tox-textarea-wrap .tox-textarea{border:none}.tox .tox-textarea-wrap .tox-textarea:focus{border:none}.tox-fullscreen{border:0;height:100%;margin:0;overflow:hidden;overscroll-behavior:none;padding:0;touch-action:pinch-zoom;width:100%}.tox.tox-tinymce.tox-fullscreen .tox-statusbar__resize-handle{display:none}.tox-shadowhost.tox-fullscreen,.tox.tox-tinymce.tox-fullscreen{left:0;position:fixed;top:0;z-index:1200}.tox.tox-tinymce.tox-fullscreen{background-color:transparent}.tox-fullscreen .tox.tox-tinymce-aux,.tox-fullscreen~.tox.tox-tinymce-aux{z-index:1201}.tox .tox-help__more-link{list-style:none;margin-top:1em}.tox .tox-imagepreview{background-color:#666;height:380px;overflow:hidden;position:relative;width:100%}.tox .tox-imagepreview.tox-imagepreview__loaded{overflow:auto}.tox .tox-imagepreview__container{display:flex;left:100vw;position:absolute;top:100vw}.tox .tox-imagepreview__image{background:url(data:image/gif;base64,R0lGODdhDAAMAIABAMzMzP///ywAAAAADAAMAAACFoQfqYeabNyDMkBQb81Uat85nxguUAEAOw==)}.tox .tox-image-tools .tox-spacer{flex:1}.tox .tox-image-tools .tox-bar{align-items:center;display:flex;height:60px;justify-content:center}.tox .tox-image-tools .tox-imagepreview,.tox .tox-image-tools .tox-imagepreview+.tox-bar{margin-top:8px}.tox .tox-image-tools .tox-croprect-block{background:#000;opacity:.5;position:absolute;zoom:1}.tox .tox-image-tools .tox-croprect-handle{border:2px solid #fff;height:20px;left:0;position:absolute;top:0;width:20px}.tox .tox-image-tools .tox-croprect-handle-move{border:0;cursor:move;position:absolute}.tox .tox-image-tools .tox-croprect-handle-nw{border-width:2px 0 0 2px;cursor:nw-resize;left:100px;margin:-2px 0 0 -2px;top:100px}.tox .tox-image-tools .tox-croprect-handle-ne{border-width:2px 2px 0 0;cursor:ne-resize;left:200px;margin:-2px 0 0 -20px;top:100px}.tox .tox-image-tools .tox-croprect-handle-sw{border-width:0 0 2px 2px;cursor:sw-resize;left:100px;margin:-20px 2px 0 -2px;top:200px}.tox .tox-image-tools .tox-croprect-handle-se{border-width:0 2px 2px 0;cursor:se-resize;left:200px;margin:-20px 0 0 -20px;top:200px}.tox .tox-insert-table-picker{display:flex;flex-wrap:wrap;width:170px}.tox .tox-insert-table-picker>div{border-color:#eee;border-style:solid;border-width:0 1px 1px 0;box-sizing:border-box;height:17px;width:17px}.tox .tox-collection--list .tox-collection__group .tox-insert-table-picker{margin:-4px -4px}.tox .tox-insert-table-picker .tox-insert-table-picker__selected{background-color:rgba(0,108,231,.5);border-color:rgba(0,108,231,.5)}.tox .tox-insert-table-picker__label{color:rgba(34,47,62,.7);display:block;font-size:14px;padding:4px;text-align:center;width:100%}.tox:not([dir=rtl]) .tox-insert-table-picker>div:nth-child(10n){border-right:0}.tox[dir=rtl] .tox-insert-table-picker>div:nth-child(10n+1){border-right:0}.tox .tox-menu{background-color:#fff;border:1px solid transparent;border-radius:6px;box-shadow:0 0 2px 0 rgba(34,47,62,.2),0 4px 8px 0 rgba(34,47,62,.15);display:inline-block;overflow:hidden;vertical-align:top;z-index:1150}.tox .tox-menu.tox-collection.tox-collection--list{padding:0 4px}.tox .tox-menu.tox-collection.tox-collection--toolbar{padding:8px}.tox .tox-menu.tox-collection.tox-collection--grid{padding:8px}@media only screen and (min-width:768px){.tox .tox-menu .tox-collection__item-label{overflow-wrap:break-word;word-break:normal}.tox .tox-dialog__popups .tox-menu .tox-collection__item-label{word-break:break-all}}.tox .tox-menu__label blockquote,.tox .tox-menu__label code,.tox .tox-menu__label h1,.tox .tox-menu__label h2,.tox .tox-menu__label h3,.tox .tox-menu__label h4,.tox .tox-menu__label h5,.tox .tox-menu__label h6,.tox .tox-menu__label p{margin:0}.tox .tox-menubar{background:repeating-linear-gradient(transparent 0 1px,transparent 1px 39px) center top 39px/100% calc(100% - 39px) no-repeat;background-color:#fff;display:flex;flex:0 0 auto;flex-shrink:0;flex-wrap:wrap;grid-column:1/-1;grid-row:1;padding:0 11px 0 12px}.tox .tox-promotion+.tox-menubar{grid-column:1}.tox .tox-promotion{background:repeating-linear-gradient(transparent 0 1px,transparent 1px 39px) center top 39px/100% calc(100% - 39px) no-repeat;background-color:#fff;grid-column:2;grid-row:1;padding-inline-end:8px;padding-inline-start:4px;padding-top:5px}.tox .tox-promotion-link{align-items:unsafe center;background-color:#e8f1f8;border-radius:5px;color:#086be6;cursor:pointer;display:flex;font-size:14px;height:26.6px;padding:4px 8px;white-space:nowrap}.tox .tox-promotion-link:hover{background-color:#b4d7ff}.tox .tox-promotion-link:focus{background-color:#d9edf7}.tox .tox-mbtn{align-items:center;background:0 0;border:0;border-radius:3px;box-shadow:none;color:#222f3e;display:flex;flex:0 0 auto;font-size:14px;font-style:normal;font-weight:400;height:28px;justify-content:center;margin:5px 1px 6px 0;outline:0;overflow:hidden;padding:0 4px;text-transform:none;width:auto}.tox .tox-mbtn[disabled]{background-color:transparent;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-mbtn:focus:not(:disabled){background:#cce2fa;border:0;box-shadow:none;color:#222f3e}.tox .tox-mbtn--active{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-mbtn:hover:not(:disabled):not(.tox-mbtn--active){background:#cce2fa;border:0;box-shadow:none;color:#222f3e}.tox .tox-mbtn__select-label{cursor:default;font-weight:400;margin:0 4px}.tox .tox-mbtn[disabled] .tox-mbtn__select-label{cursor:not-allowed}.tox .tox-mbtn__select-chevron{align-items:center;display:flex;justify-content:center;width:16px;display:none}.tox .tox-notification{border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;display:grid;font-size:14px;font-weight:400;grid-template-columns:minmax(40px,1fr) auto minmax(40px,1fr);margin-top:4px;opacity:0;padding:4px;transition:transform .1s ease-in,opacity 150ms ease-in}.tox .tox-notification p{font-size:14px;font-weight:400}.tox .tox-notification a{cursor:pointer;text-decoration:underline}.tox .tox-notification--in{opacity:1}.tox .tox-notification--success{background-color:#e4eeda;border-color:#d7e6c8;color:#222f3e}.tox .tox-notification--success p{color:#222f3e}.tox .tox-notification--success a{color:#517342}.tox .tox-notification--success svg{fill:#222f3e}.tox .tox-notification--error{background-color:#f5cccc;border-color:#f0b3b3;color:#222f3e}.tox .tox-notification--error p{color:#222f3e}.tox .tox-notification--error a{color:#77181f}.tox .tox-notification--error svg{fill:#222f3e}.tox .tox-notification--warn,.tox .tox-notification--warning{background-color:#fff5cc;border-color:#fff0b3;color:#222f3e}.tox .tox-notification--warn p,.tox .tox-notification--warning p{color:#222f3e}.tox .tox-notification--warn a,.tox .tox-notification--warning a{color:#7a6e25}.tox .tox-notification--warn svg,.tox .tox-notification--warning svg{fill:#222f3e}.tox .tox-notification--info{background-color:#d6e7fb;border-color:#c1dbf9;color:#222f3e}.tox .tox-notification--info p{color:#222f3e}.tox .tox-notification--info a{color:#2a64a6}.tox .tox-notification--info svg{fill:#222f3e}.tox .tox-notification__body{align-self:center;color:#222f3e;font-size:14px;grid-column-end:3;grid-column-start:2;grid-row-end:2;grid-row-start:1;text-align:center;white-space:normal;word-break:break-all;word-break:break-word}.tox .tox-notification__body>*{margin:0}.tox .tox-notification__body>*+*{margin-top:1rem}.tox .tox-notification__icon{align-self:center;grid-column-end:2;grid-column-start:1;grid-row-end:2;grid-row-start:1;justify-self:end}.tox .tox-notification__icon svg{display:block}.tox .tox-notification__dismiss{align-self:start;grid-column-end:4;grid-column-start:3;grid-row-end:2;grid-row-start:1;justify-self:end}.tox .tox-notification .tox-progress-bar{grid-column-end:4;grid-column-start:1;grid-row-end:3;grid-row-start:2;justify-self:center}.tox .tox-pop{display:inline-block;position:relative}.tox .tox-pop--resizing{transition:width .1s ease}.tox .tox-pop--resizing .tox-toolbar,.tox .tox-pop--resizing .tox-toolbar__group{flex-wrap:nowrap}.tox .tox-pop--transition{transition:.15s ease;transition-property:left,right,top,bottom}.tox .tox-pop--transition::after,.tox .tox-pop--transition::before{transition:all .15s,visibility 0s,opacity 75ms ease 75ms}.tox .tox-pop__dialog{background-color:#fff;border:1px solid #eee;border-radius:6px;box-shadow:0 0 2px 0 rgba(34,47,62,.2),0 4px 8px 0 rgba(34,47,62,.15);min-width:0;overflow:hidden}.tox .tox-pop__dialog>:not(.tox-toolbar){margin:4px 4px 4px 8px}.tox .tox-pop__dialog .tox-toolbar{background-color:transparent;margin-bottom:-1px}.tox .tox-pop::after,.tox .tox-pop::before{border-style:solid;content:'';display:block;height:0;opacity:1;position:absolute;width:0}.tox .tox-pop.tox-pop--inset::after,.tox .tox-pop.tox-pop--inset::before{opacity:0;transition:all 0s .15s,visibility 0s,opacity 75ms ease}.tox .tox-pop.tox-pop--bottom::after,.tox .tox-pop.tox-pop--bottom::before{left:50%;top:100%}.tox .tox-pop.tox-pop--bottom::after{border-color:#fff transparent transparent transparent;border-width:8px;margin-left:-8px;margin-top:-1px}.tox .tox-pop.tox-pop--bottom::before{border-color:#eee transparent transparent transparent;border-width:9px;margin-left:-9px}.tox .tox-pop.tox-pop--top::after,.tox .tox-pop.tox-pop--top::before{left:50%;top:0;transform:translateY(-100%)}.tox .tox-pop.tox-pop--top::after{border-color:transparent transparent #fff transparent;border-width:8px;margin-left:-8px;margin-top:1px}.tox .tox-pop.tox-pop--top::before{border-color:transparent transparent #eee transparent;border-width:9px;margin-left:-9px}.tox .tox-pop.tox-pop--left::after,.tox .tox-pop.tox-pop--left::before{left:0;top:calc(50% - 1px);transform:translateY(-50%)}.tox .tox-pop.tox-pop--left::after{border-color:transparent #fff transparent transparent;border-width:8px;margin-left:-15px}.tox .tox-pop.tox-pop--left::before{border-color:transparent #eee transparent transparent;border-width:10px;margin-left:-19px}.tox .tox-pop.tox-pop--right::after,.tox .tox-pop.tox-pop--right::before{left:100%;top:calc(50% + 1px);transform:translateY(-50%)}.tox .tox-pop.tox-pop--right::after{border-color:transparent transparent transparent #fff;border-width:8px;margin-left:-1px}.tox .tox-pop.tox-pop--right::before{border-color:transparent transparent transparent #eee;border-width:10px;margin-left:-1px}.tox .tox-pop.tox-pop--align-left::after,.tox .tox-pop.tox-pop--align-left::before{left:20px}.tox .tox-pop.tox-pop--align-right::after,.tox .tox-pop.tox-pop--align-right::before{left:calc(100% - 20px)}.tox .tox-sidebar-wrap{display:flex;flex-direction:row;flex-grow:1;min-height:0}.tox .tox-sidebar{background-color:#fff;display:flex;flex-direction:row;justify-content:flex-end}.tox .tox-sidebar__slider{display:flex;overflow:hidden}.tox .tox-sidebar__pane-container{display:flex}.tox .tox-sidebar__pane{display:flex}.tox .tox-sidebar--sliding-closed{opacity:0}.tox .tox-sidebar--sliding-open{opacity:1}.tox .tox-sidebar--sliding-growing,.tox .tox-sidebar--sliding-shrinking{transition:width .5s ease,opacity .5s ease}.tox .tox-selector{background-color:#4099ff;border-color:#4099ff;border-style:solid;border-width:1px;box-sizing:border-box;display:inline-block;height:10px;position:absolute;width:10px}.tox.tox-platform-touch .tox-selector{height:12px;width:12px}.tox .tox-slider{align-items:center;display:flex;flex:1;height:24px;justify-content:center;position:relative}.tox .tox-slider__rail{background-color:transparent;border:1px solid #eee;border-radius:6px;height:10px;min-width:120px;width:100%}.tox .tox-slider__handle{background-color:#006ce7;border:2px solid #0054b4;border-radius:6px;box-shadow:none;height:24px;left:50%;position:absolute;top:50%;transform:translateX(-50%) translateY(-50%);width:14px}.tox .tox-form__controls-h-stack>.tox-slider:not(:first-of-type){margin-inline-start:8px}.tox .tox-form__controls-h-stack>.tox-form__group+.tox-slider{margin-inline-start:32px}.tox .tox-form__controls-h-stack>.tox-slider+.tox-form__group{margin-inline-start:32px}.tox .tox-source-code{overflow:auto}.tox .tox-spinner{display:flex}.tox .tox-spinner>div{animation:tam-bouncing-dots 1.5s ease-in-out 0s infinite both;background-color:rgba(34,47,62,.7);border-radius:100%;height:8px;width:8px}.tox .tox-spinner>div:nth-child(1){animation-delay:-.32s}.tox .tox-spinner>div:nth-child(2){animation-delay:-.16s}@keyframes tam-bouncing-dots{0%,100%,80%{transform:scale(0)}40%{transform:scale(1)}}.tox:not([dir=rtl]) .tox-spinner>div:not(:first-child){margin-left:4px}.tox[dir=rtl] .tox-spinner>div:not(:first-child){margin-right:4px}.tox .tox-statusbar{align-items:center;background-color:#fff;border-top:1px solid #e3e3e3;color:rgba(34,47,62,.7);display:flex;flex:0 0 auto;font-size:14px;font-weight:400;height:25px;overflow:hidden;padding:0 8px;position:relative;text-transform:none}.tox .tox-statusbar__path{display:flex;flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tox .tox-statusbar__right-container{display:flex;justify-content:flex-end;white-space:nowrap}.tox .tox-statusbar__help-text{text-align:center}.tox .tox-statusbar__text-container{display:flex;flex:1 1 auto;justify-content:space-between;overflow:hidden}@media only screen and (min-width:768px){.tox .tox-statusbar__text-container.tox-statusbar__text-container-3-cols>.tox-statusbar__help-text,.tox .tox-statusbar__text-container.tox-statusbar__text-container-3-cols>.tox-statusbar__path,.tox .tox-statusbar__text-container.tox-statusbar__text-container-3-cols>.tox-statusbar__right-container{flex:0 0 calc(100% / 3)}}.tox .tox-statusbar__text-container.tox-statusbar__text-container--flex-end{justify-content:flex-end}.tox .tox-statusbar__text-container.tox-statusbar__text-container--flex-start{justify-content:flex-start}.tox .tox-statusbar__text-container.tox-statusbar__text-container--space-around{justify-content:space-around}.tox .tox-statusbar__path>*{display:inline;white-space:nowrap}.tox .tox-statusbar__wordcount{flex:0 0 auto;margin-left:1ch}@media only screen and (max-width:767px){.tox .tox-statusbar__text-container .tox-statusbar__help-text{display:none}.tox .tox-statusbar__text-container .tox-statusbar__help-text:only-child{display:block}}.tox .tox-statusbar a,.tox .tox-statusbar__path-item,.tox .tox-statusbar__wordcount{color:rgba(34,47,62,.7);text-decoration:none}.tox .tox-statusbar a:focus:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar a:hover:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__path-item:focus:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__path-item:hover:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__wordcount:focus:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__wordcount:hover:not(:disabled):not([aria-disabled=true]){color:#222f3e;cursor:pointer}.tox .tox-statusbar__branding svg{fill:rgba(34,47,62,.8);height:1.14em;vertical-align:-.28em;width:3.6em}.tox .tox-statusbar__branding a:focus:not(:disabled):not([aria-disabled=true]) svg,.tox .tox-statusbar__branding a:hover:not(:disabled):not([aria-disabled=true]) svg{fill:#222f3e}.tox .tox-statusbar__resize-handle{align-items:flex-end;align-self:stretch;cursor:nwse-resize;display:flex;flex:0 0 auto;justify-content:flex-end;margin-left:auto;margin-right:-8px;padding-bottom:3px;padding-left:1ch;padding-right:3px}.tox .tox-statusbar__resize-handle svg{display:block;fill:rgba(34,47,62,.5)}.tox .tox-statusbar__resize-handle:focus svg{background-color:#dee0e2;border-radius:1px 1px 5px 1px;box-shadow:0 0 0 2px #dee0e2}.tox:not([dir=rtl]) .tox-statusbar__path>*{margin-right:4px}.tox:not([dir=rtl]) .tox-statusbar__branding{margin-left:2ch}.tox[dir=rtl] .tox-statusbar{flex-direction:row-reverse}.tox[dir=rtl] .tox-statusbar__path>*{margin-left:4px}.tox .tox-throbber{z-index:1299}.tox .tox-throbber__busy-spinner{align-items:center;background-color:rgba(255,255,255,.6);bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0}.tox .tox-tbtn{align-items:center;background:0 0;border:0;border-radius:3px;box-shadow:none;color:#222f3e;display:flex;flex:0 0 auto;font-size:14px;font-style:normal;font-weight:400;height:28px;justify-content:center;margin:6px 1px 5px 0;outline:0;overflow:hidden;padding:0;text-transform:none;width:34px}.tox .tox-tbtn svg{display:block;fill:#222f3e}.tox .tox-tbtn.tox-tbtn-more{padding-left:5px;padding-right:5px;width:inherit}.tox .tox-tbtn:focus{background:#cce2fa;border:0;box-shadow:none}.tox .tox-tbtn:hover{background:#cce2fa;border:0;box-shadow:none;color:#222f3e}.tox .tox-tbtn:hover svg{fill:#222f3e}.tox .tox-tbtn:active{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-tbtn:active svg{fill:#222f3e}.tox .tox-tbtn--disabled .tox-tbtn--enabled svg{fill:rgba(34,47,62,.5)}.tox .tox-tbtn--disabled,.tox .tox-tbtn--disabled:hover,.tox .tox-tbtn:disabled,.tox .tox-tbtn:disabled:hover{background:0 0;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-tbtn--disabled svg,.tox .tox-tbtn--disabled:hover svg,.tox .tox-tbtn:disabled svg,.tox .tox-tbtn:disabled:hover svg{fill:rgba(34,47,62,.5)}.tox .tox-tbtn--enabled,.tox .tox-tbtn--enabled:hover{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-tbtn--enabled:hover>*,.tox .tox-tbtn--enabled>*{transform:none}.tox .tox-tbtn--enabled svg,.tox .tox-tbtn--enabled:hover svg{fill:#222f3e}.tox .tox-tbtn--enabled.tox-tbtn--disabled svg,.tox .tox-tbtn--enabled:hover.tox-tbtn--disabled svg{fill:rgba(34,47,62,.5)}.tox .tox-tbtn:focus:not(.tox-tbtn--disabled){color:#222f3e}.tox .tox-tbtn:focus:not(.tox-tbtn--disabled) svg{fill:#222f3e}.tox .tox-tbtn:active>*{transform:none}.tox .tox-tbtn--md{height:42px;width:51px}.tox .tox-tbtn--lg{flex-direction:column;height:56px;width:68px}.tox .tox-tbtn--return{align-self:stretch;height:unset;width:16px}.tox .tox-tbtn--labeled{padding:0 4px;width:unset}.tox .tox-tbtn__vlabel{display:block;font-size:10px;font-weight:400;letter-spacing:-.025em;margin-bottom:4px;white-space:nowrap}.tox .tox-number-input{border-radius:3px;display:flex;margin:6px 1px 5px 0;padding:0 4px;width:auto}.tox .tox-number-input .tox-input-wrapper{background:#f7f7f7;display:flex;pointer-events:none;text-align:center}.tox .tox-number-input .tox-input-wrapper:focus{background:#cce2fa}.tox .tox-number-input input{border-radius:3px;color:#222f3e;font-size:14px;margin:2px 0;pointer-events:all;width:60px}.tox .tox-number-input input:hover{background:#cce2fa;color:#222f3e}.tox .tox-number-input input:focus{background:#fff;color:#222f3e}.tox .tox-number-input input:disabled{background:0 0;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-number-input button{background:#f7f7f7;color:#222f3e;height:28px;text-align:center;width:24px}.tox .tox-number-input button svg{display:block;fill:#222f3e;margin:0 auto;transform:scale(.67)}.tox .tox-number-input button:focus{background:#cce2fa}.tox .tox-number-input button:hover{background:#cce2fa;border:0;box-shadow:none;color:#222f3e}.tox .tox-number-input button:hover svg{fill:#222f3e}.tox .tox-number-input button:active{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-number-input button:active svg{fill:#222f3e}.tox .tox-number-input button:disabled{background:0 0;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-number-input button:disabled svg{fill:rgba(34,47,62,.5)}.tox .tox-number-input button.minus{border-radius:3px 0 0 3px}.tox .tox-number-input button.plus{border-radius:0 3px 3px 0}.tox .tox-number-input:focus:not(:active)>.tox-input-wrapper,.tox .tox-number-input:focus:not(:active)>button{background:#cce2fa}.tox .tox-tbtn--select{margin:6px 1px 5px 0;padding:0 4px;width:auto}.tox .tox-tbtn__select-label{cursor:default;font-weight:400;height:initial;margin:0 4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tox .tox-tbtn__select-chevron{align-items:center;display:flex;justify-content:center;width:16px}.tox .tox-tbtn__select-chevron svg{fill:rgba(34,47,62,.5)}.tox .tox-tbtn--bespoke{background:#f7f7f7}.tox .tox-tbtn--bespoke+.tox-tbtn--bespoke{margin-inline-start:4px}.tox .tox-tbtn--bespoke .tox-tbtn__select-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:7em}.tox .tox-tbtn--disabled .tox-tbtn__select-label,.tox .tox-tbtn--select:disabled .tox-tbtn__select-label{cursor:not-allowed}.tox .tox-split-button{border:0;border-radius:3px;box-sizing:border-box;display:flex;margin:6px 1px 5px 0;overflow:hidden}.tox .tox-split-button:hover{box-shadow:0 0 0 1px #cce2fa inset}.tox .tox-split-button:focus{background:#cce2fa;box-shadow:none;color:#222f3e}.tox .tox-split-button>*{border-radius:0}.tox .tox-split-button__chevron{width:16px}.tox .tox-split-button__chevron svg{fill:rgba(34,47,62,.5)}.tox .tox-split-button .tox-tbtn{margin:0}.tox .tox-split-button.tox-tbtn--disabled .tox-tbtn:focus,.tox .tox-split-button.tox-tbtn--disabled .tox-tbtn:hover,.tox .tox-split-button.tox-tbtn--disabled:focus,.tox .tox-split-button.tox-tbtn--disabled:hover{background:0 0;box-shadow:none;color:rgba(34,47,62,.5)}.tox.tox-platform-touch .tox-split-button .tox-tbtn--select{padding:0 0}.tox.tox-platform-touch .tox-split-button .tox-tbtn:not(.tox-tbtn--select):first-child{width:30px}.tox.tox-platform-touch .tox-split-button__chevron{width:20px}.tox .tox-split-button.tox-tbtn--disabled svg #tox-icon-highlight-bg-color__color,.tox .tox-split-button.tox-tbtn--disabled svg #tox-icon-text-color__color{opacity:.6}.tox .tox-toolbar-overlord{background-color:#fff}.tox .tox-toolbar,.tox .tox-toolbar__overflow,.tox .tox-toolbar__primary{background-attachment:local;background-color:#fff;background-image:repeating-linear-gradient(#e3e3e3 0 1px,transparent 1px 39px);background-position:center top 40px;background-repeat:no-repeat;background-size:calc(100% - 11px * 2) calc(100% - 41px);display:flex;flex:0 0 auto;flex-shrink:0;flex-wrap:wrap;padding:0 0;transform:perspective(1px)}.tox .tox-toolbar-overlord>.tox-toolbar,.tox .tox-toolbar-overlord>.tox-toolbar__overflow,.tox .tox-toolbar-overlord>.tox-toolbar__primary{background-position:center top 0;background-size:calc(100% - 11px * 2) calc(100% - 0px)}.tox .tox-toolbar__overflow.tox-toolbar__overflow--closed{height:0;opacity:0;padding-bottom:0;padding-top:0;visibility:hidden}.tox .tox-toolbar__overflow--growing{transition:height .3s ease,opacity .2s linear .1s}.tox .tox-toolbar__overflow--shrinking{transition:opacity .3s ease,height .2s linear .1s,visibility 0s linear .3s}.tox .tox-anchorbar,.tox .tox-toolbar-overlord{grid-column:1/-1}.tox .tox-menubar+.tox-toolbar,.tox .tox-menubar+.tox-toolbar-overlord{border-top:1px solid transparent;margin-top:-1px;padding-bottom:1px;padding-top:1px}.tox .tox-toolbar--scrolling{flex-wrap:nowrap;overflow-x:auto}.tox .tox-pop .tox-toolbar{border-width:0}.tox .tox-toolbar--no-divider{background-image:none}.tox .tox-toolbar-overlord .tox-toolbar:not(.tox-toolbar--scrolling):first-child,.tox .tox-toolbar-overlord .tox-toolbar__primary{background-position:center top 39px}.tox .tox-editor-header>.tox-toolbar--scrolling,.tox .tox-toolbar-overlord .tox-toolbar--scrolling:first-child{background-image:none}.tox.tox-tinymce-aux .tox-toolbar__overflow{background-color:#fff;background-position:center top 43px;background-size:calc(100% - 8px * 2) calc(100% - 51px);border:none;border-radius:6px;box-shadow:0 0 2px 0 rgba(34,47,62,.2),0 4px 8px 0 rgba(34,47,62,.15);overscroll-behavior:none;padding:4px 0}.tox-pop .tox-pop__dialog .tox-toolbar{background-position:center top 43px;background-size:calc(100% - 11px * 2) calc(100% - 51px);padding:4px 0}.tox .tox-toolbar__group{align-items:center;display:flex;flex-wrap:wrap;margin:0 0;padding:0 11px 0 12px}.tox .tox-toolbar__group--pull-right{margin-left:auto}.tox .tox-toolbar--scrolling .tox-toolbar__group{flex-shrink:0;flex-wrap:nowrap}.tox:not([dir=rtl]) .tox-toolbar__group:not(:last-of-type){border-right:1px solid transparent}.tox[dir=rtl] .tox-toolbar__group:not(:last-of-type){border-left:1px solid transparent}.tox .tox-tooltip{display:inline-block;padding:8px;position:relative}.tox .tox-tooltip__body{background-color:#222f3e;border-radius:6px;box-shadow:0 2px 4px rgba(34,47,62,.3);color:rgba(255,255,255,.75);font-size:14px;font-style:normal;font-weight:400;padding:4px 8px;text-transform:none}.tox .tox-tooltip__arrow{position:absolute}.tox .tox-tooltip--down .tox-tooltip__arrow{border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #222f3e;bottom:0;left:50%;position:absolute;transform:translateX(-50%)}.tox .tox-tooltip--up .tox-tooltip__arrow{border-bottom:8px solid #222f3e;border-left:8px solid transparent;border-right:8px solid transparent;left:50%;position:absolute;top:0;transform:translateX(-50%)}.tox .tox-tooltip--right .tox-tooltip__arrow{border-bottom:8px solid transparent;border-left:8px solid #222f3e;border-top:8px solid transparent;position:absolute;right:0;top:50%;transform:translateY(-50%)}.tox .tox-tooltip--left .tox-tooltip__arrow{border-bottom:8px solid transparent;border-right:8px solid #222f3e;border-top:8px solid transparent;left:0;position:absolute;top:50%;transform:translateY(-50%)}.tox .tox-tree{display:flex;flex-direction:column}.tox .tox-tree .tox-trbtn{align-items:center;background:0 0;border:0;border-radius:4px;box-shadow:none;color:#222f3e;display:flex;flex:0 0 auto;font-size:14px;font-style:normal;font-weight:400;height:28px;margin-bottom:4px;margin-top:4px;outline:0;overflow:hidden;padding:0;padding-left:8px;text-transform:none}.tox .tox-tree .tox-trbtn .tox-tree__label{cursor:default;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tox .tox-tree .tox-trbtn svg{display:block;fill:#222f3e}.tox .tox-tree .tox-trbtn:focus{background:#cce2fa;border:0;box-shadow:none}.tox .tox-tree .tox-trbtn:hover{background:#cce2fa;border:0;box-shadow:none;color:#222f3e}.tox .tox-tree .tox-trbtn:hover svg{fill:#222f3e}.tox .tox-tree .tox-trbtn:active{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-tree .tox-trbtn:active svg{fill:#222f3e}.tox .tox-tree .tox-trbtn--disabled,.tox .tox-tree .tox-trbtn--disabled:hover,.tox .tox-tree .tox-trbtn:disabled,.tox .tox-tree .tox-trbtn:disabled:hover{background:0 0;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-tree .tox-trbtn--disabled svg,.tox .tox-tree .tox-trbtn--disabled:hover svg,.tox .tox-tree .tox-trbtn:disabled svg,.tox .tox-tree .tox-trbtn:disabled:hover svg{fill:rgba(34,47,62,.5)}.tox .tox-tree .tox-trbtn--enabled,.tox .tox-tree .tox-trbtn--enabled:hover{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-tree .tox-trbtn--enabled:hover>*,.tox .tox-tree .tox-trbtn--enabled>*{transform:none}.tox .tox-tree .tox-trbtn--enabled svg,.tox .tox-tree .tox-trbtn--enabled:hover svg{fill:#222f3e}.tox .tox-tree .tox-trbtn:focus:not(.tox-trbtn--disabled){color:#222f3e}.tox .tox-tree .tox-trbtn:focus:not(.tox-trbtn--disabled) svg{fill:#222f3e}.tox .tox-tree .tox-trbtn:active>*{transform:none}.tox .tox-tree .tox-trbtn--return{align-self:stretch;height:unset;width:16px}.tox .tox-tree .tox-trbtn--labeled{padding:0 4px;width:unset}.tox .tox-tree .tox-trbtn__vlabel{display:block;font-size:10px;font-weight:400;letter-spacing:-.025em;margin-bottom:4px;white-space:nowrap}.tox .tox-tree .tox-tree--directory{display:flex;flex-direction:column}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label{font-weight:700}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-mbtn{margin-left:auto}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-mbtn svg{fill:transparent}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-mbtn.tox-mbtn--active svg,.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-mbtn:focus svg{fill:#222f3e}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:focus .tox-mbtn svg,.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:hover .tox-mbtn svg{fill:#222f3e}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:hover:has(.tox-mbtn:hover){background-color:transparent;color:#222f3e}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:hover:has(.tox-mbtn:hover) .tox-chevron svg{fill:#222f3e}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-chevron{margin-right:6px}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:has(+.tox-tree--directory__children--growing) .tox-chevron,.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:has(+.tox-tree--directory__children--shrinking) .tox-chevron{transition:transform .5s ease-in-out}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:has(+.tox-tree--directory__children--growing) .tox-chevron,.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:has(+.tox-tree--directory__children--open) .tox-chevron{transform:rotate(90deg)}.tox .tox-tree .tox-tree--leaf__label{font-weight:400}.tox .tox-tree .tox-tree--leaf__label .tox-mbtn{margin-left:auto}.tox .tox-tree .tox-tree--leaf__label .tox-mbtn svg{fill:transparent}.tox .tox-tree .tox-tree--leaf__label .tox-mbtn.tox-mbtn--active svg,.tox .tox-tree .tox-tree--leaf__label .tox-mbtn:focus svg{fill:#222f3e}.tox .tox-tree .tox-tree--leaf__label:hover .tox-mbtn svg{fill:#222f3e}.tox .tox-tree .tox-tree--leaf__label:hover:has(.tox-mbtn:hover){background-color:transparent;color:#222f3e}.tox .tox-tree .tox-tree--leaf__label:hover:has(.tox-mbtn:hover) .tox-chevron svg{fill:#222f3e}.tox .tox-tree .tox-tree--directory__children{overflow:hidden;padding-left:16px}.tox .tox-tree .tox-tree--directory__children.tox-tree--directory__children--growing,.tox .tox-tree .tox-tree--directory__children.tox-tree--directory__children--shrinking{transition:height .5s ease-in-out}.tox .tox-tree .tox-trbtn.tox-tree--leaf__label{display:flex;justify-content:space-between}.tox .tox-view-wrap,.tox .tox-view-wrap__slot-container{background-color:#fff;display:flex;flex:1;flex-direction:column}.tox .tox-view{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.tox .tox-view__header{align-items:center;display:flex;font-size:16px;justify-content:space-between;padding:8px 8px 0 8px;position:relative}.tox .tox-view--mobile.tox-view__header,.tox .tox-view--mobile.tox-view__toolbar{padding:8px}.tox .tox-view--scrolling{flex-wrap:nowrap;overflow-x:auto}.tox .tox-view__toolbar{display:flex;flex-direction:row;gap:8px;justify-content:space-between;padding:8px 8px 0 8px}.tox .tox-view__toolbar__group{display:flex;flex-direction:row;gap:12px}.tox .tox-view__header-end,.tox .tox-view__header-start{display:flex}.tox .tox-view__pane{height:100%;padding:8px;width:100%}.tox .tox-view__pane_panel{border:1px solid #eee;border-radius:6px}.tox:not([dir=rtl]) .tox-view__header .tox-view__header-end>*,.tox:not([dir=rtl]) .tox-view__header .tox-view__header-start>*{margin-left:8px}.tox[dir=rtl] .tox-view__header .tox-view__header-end>*,.tox[dir=rtl] .tox-view__header .tox-view__header-start>*{margin-right:8px}.tox .tox-well{border:1px solid #eee;border-radius:6px;padding:8px;width:100%}.tox .tox-well>:first-child{margin-top:0}.tox .tox-well>:last-child{margin-bottom:0}.tox .tox-well>:only-child{margin:0}.tox .tox-custom-editor{border:1px solid #eee;border-radius:6px;display:flex;flex:1;overflow:hidden;position:relative}.tox .tox-dialog-loading::before{background-color:rgba(0,0,0,.5);content:"";height:100%;position:absolute;width:100%;z-index:1000}.tox .tox-tab{cursor:pointer}.tox .tox-dialog__content-js{display:flex;flex:1}.tox .tox-dialog__body-content .tox-collection{display:flex;flex:1}`);(function(){var ib=tinymce.util.Tools.resolve("tinymce.PluginManager");const Du=(z,ne,de)=>{var _e;return de(z,ne.prototype)?!0:((_e=z.constructor)===null||_e===void 0?void 0:_e.name)===ne.name},Mu=z=>{const ne=typeof z;return z===null?"null":ne==="object"&&Array.isArray(z)?"array":ne==="object"&&Du(z,String,(de,_e)=>_e.isPrototypeOf(de))?"string":ne},ud=z=>ne=>Mu(ne)===z,yc=z=>ne=>typeof ne===z,Co=z=>ne=>z===ne,Pr=ud("string"),sg=ud("object"),Qa=ud("array"),md=Co(null),Kr=yc("boolean"),mr=z=>z==null,Pl=z=>!mr(z),_t=yc("function"),Ft=(z,ne)=>{if(Qa(z)){for(let de=0,_e=z.length;de<_e;++de)if(!ne(z[de]))return!1;return!0}return!1},jo=()=>{},wc=z=>()=>z,Xe=(z,ne)=>z===ne;class eo{constructor(ne,de){this.tag=ne,this.value=de}static some(ne){return new eo(!0,ne)}static none(){return eo.singletonNone}fold(ne,de){return this.tag?de(this.value):ne()}isSome(){return this.tag}isNone(){return!this.tag}map(ne){return this.tag?eo.some(ne(this.value)):eo.none()}bind(ne){return this.tag?ne(this.value):eo.none()}exists(ne){return this.tag&&ne(this.value)}forall(ne){return!this.tag||ne(this.value)}filter(ne){return!this.tag||ne(this.value)?this:eo.none()}getOr(ne){return this.tag?this.value:ne}or(ne){return this.tag?this:ne}getOrThunk(ne){return this.tag?this.value:ne()}orThunk(ne){return this.tag?this:ne()}getOrDie(ne){if(this.tag)return this.value;throw new Error(ne??"Called getOrDie on None")}static from(ne){return Pl(ne)?eo.some(ne):eo.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ne){this.tag&&ne(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}eo.singletonNone=new eo(!1);const bt=Array.prototype.indexOf,ue=Array.prototype.push,kt=(z,ne)=>bt.call(z,ne),ce=(z,ne)=>kt(z,ne)>-1,Rn=(z,ne)=>{const de=z.length,_e=new Array(de);for(let Ue=0;Ue<de;Ue++){const Tt=z[Ue];_e[Ue]=ne(Tt,Ue)}return _e},yi=(z,ne)=>{for(let de=0,_e=z.length;de<_e;de++){const Ue=z[de];ne(Ue,de)}},Bs=(z,ne,de)=>(yi(z,(_e,Ue)=>{de=ne(de,_e,Ue)}),de),_o=z=>{const ne=[];for(let de=0,_e=z.length;de<_e;++de){if(!Qa(z[de]))throw new Error("Arr.flatten item "+de+" was not an array, input: "+z);ue.apply(ne,z[de])}return ne},Ne=(z,ne)=>_o(Rn(z,ne)),Pt=(z,ne)=>{for(let de=0;de<z.length;de++){const _e=ne(z[de],de);if(_e.isSome())return _e}return eo.none()},E=(z,ne,de=Xe)=>z.exists(_e=>de(_e,ne)),ao=z=>{const ne=[],de=_e=>{ne.push(_e)};for(let _e=0;_e<z.length;_e++)z[_e].each(de);return ne},oo=(z,ne)=>z?eo.some(ne):eo.none(),Uo=z=>ne=>ne.options.get(z),Pa=z=>{const ne=z.options.register;ne("link_assume_external_targets",{processor:de=>{const _e=Pr(de)||Kr(de);return _e?de===!0?{value:1,valid:_e}:de==="http"||de==="https"?{value:de,valid:_e}:{value:0,valid:_e}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),ne("link_context_toolbar",{processor:"boolean",default:!1}),ne("link_list",{processor:de=>Pr(de)||_t(de)||Ft(de,sg)}),ne("link_default_target",{processor:"string"}),ne("link_default_protocol",{processor:"string",default:"https"}),ne("link_target_list",{processor:de=>Kr(de)||Ft(de,sg),default:!0}),ne("link_rel_list",{processor:"object[]",default:[]}),ne("link_class_list",{processor:"object[]",default:[]}),ne("link_title",{processor:"boolean",default:!0}),ne("allow_unsafe_link_target",{processor:"boolean",default:!1}),ne("link_quicklink",{processor:"boolean",default:!1})},Je=Uo("link_assume_external_targets"),bo=Uo("link_context_toolbar"),Yr=Uo("link_list"),it=Uo("link_default_target"),hs=Uo("link_default_protocol"),Ke=Uo("link_target_list"),xt=Uo("link_rel_list"),Cc=Uo("link_class_list"),Jt=Uo("link_title"),kn=Uo("allow_unsafe_link_target"),I=Uo("link_quicklink");var qo=tinymce.util.Tools.resolve("tinymce.util.Tools");const dl=z=>Pr(z.value)?z.value:"",hn=z=>Pr(z.text)?z.text:Pr(z.title)?z.title:"",qn=(z,ne)=>{const de=[];return qo.each(z,_e=>{const Ue=hn(_e);if(_e.menu!==void 0){const Tt=qn(_e.menu,ne);de.push({text:Ue,items:Tt})}else{const Tt=ne(_e);de.push({text:Ue,value:Tt})}}),de},_c=(z=dl)=>ne=>eo.from(ne).map(de=>qn(de,z)),no={sanitize:z=>_c(dl)(z),sanitizeWith:_c,createUi:(z,ne)=>de=>({name:z,type:"listbox",label:ne,items:de}),getValue:dl},Ie=Object.keys,Fm=Object.hasOwnProperty,ul=(z,ne)=>{const de=Ie(z);for(let _e=0,Ue=de.length;_e<Ue;_e++){const Tt=de[_e],Xt=z[Tt];ne(Xt,Tt)}},Et=z=>(ne,de)=>{z[de]=ne},xn=(z,ne,de,_e)=>{ul(z,(Ue,Tt)=>{(ne(Ue,Tt)?de:_e)(Ue,Tt)})},Ir=(z,ne)=>{const de={};return xn(z,ne,Et(de),jo),de},_r=(z,ne)=>Fm.call(z,ne),Ao=(z,ne)=>_r(z,ne)&&z[ne]!==void 0&&z[ne]!==null;var fd=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),In=tinymce.util.Tools.resolve("tinymce.util.URI");const Ho=z=>Pl(z)&&z.nodeName.toLowerCase()==="a",ei=z=>Ho(z)&&!!Ll(z),Il=(z,ne)=>{if(z.collapsed)return[];{const de=z.cloneContents(),_e=de.firstChild,Ue=new fd(_e,de),Tt=[];let Xt=_e;do ne(Xt)&&Tt.push(Xt);while(Xt=Ue.next());return Tt}},fr=z=>/^\w+:/i.test(z),Ll=z=>{var ne,de;return(de=(ne=z.getAttribute("data-mce-href"))!==null&&ne!==void 0?ne:z.getAttribute("href"))!==null&&de!==void 0?de:""},Dn=(z,ne)=>{const de=["noopener"],_e=z?z.split(/\s+/):[],Ue=ko=>qo.trim(ko.sort().join(" ")),Tt=ko=>(ko=Xt(ko),ko.length>0?ko.concat(de):de),Xt=ko=>ko.filter(Kn=>qo.inArray(de,Kn)===-1),To=ne?Tt(_e):Xt(_e);return To.length>0?Ue(To):""},qi=z=>z.replace(/\uFEFF/g,""),Ln=(z,ne)=>(ne=ne||Zs(z.selection.getRng())[0]||z.selection.getNode(),Xr(ne)?eo.from(z.dom.select("a[href]",ne)[0]):eo.from(z.dom.getParent(ne,"a[href]"))),mt=(z,ne)=>Ln(z,ne).isSome(),Dt=(z,ne)=>{const de=ne.fold(()=>z.getContent({format:"text"}),_e=>_e.innerText||_e.textContent||"");return qi(de)},Zs=z=>Il(z,ei),Lr=z=>qo.grep(z,ei),ze=z=>Lr(z).length>0,Fr=z=>Zs(z).length>0,Qo=z=>{const ne=z.schema.getTextInlineElements(),de=Tt=>Tt.nodeType===1&&!Ho(Tt)&&!_r(ne,Tt.nodeName.toLowerCase());if(Ln(z).exists(Tt=>Tt.hasAttribute("data-mce-block")))return!1;const Ue=z.selection.getRng();return Ue.collapsed?!0:Il(Ue,de).length===0},Xr=z=>Pl(z)&&z.nodeName==="FIGURE"&&/\bimage\b/i.test(z.className),vn=z=>Bs(["title","rel","class","target"],(de,_e)=>(z[_e].each(Ue=>{de[_e]=Ue.length>0?Ue:null}),de),{href:z.href}),gd=(z,ne)=>(ne==="http"||ne==="https")&&!fr(z)?ne+"://"+z:z,kr=(z,ne)=>{const de={...ne};if(xt(z).length===0&&!kn(z)){const _e=Dn(de.rel,de.target==="_blank");de.rel=_e||null}return eo.from(de.target).isNone()&&Ke(z)===!1&&(de.target=it(z)),de.href=gd(de.href,Je(z)),de},Hm=(z,ne,de,_e)=>{de.each(Ue=>{_r(ne,"innerText")?ne.innerText=Ue:ne.textContent=Ue}),z.dom.setAttribs(ne,_e),z.selection.select(ne)},wi=(z,ne,de,_e)=>{const Ue=z.dom;Xr(ne)?ot(Ue,ne,_e):de.fold(()=>{z.execCommand("mceInsertLink",!1,_e)},Tt=>{z.insertContent(Ue.createHTML("a",_e,Ue.encode(Tt)))})},ti=(z,ne,de)=>{const _e=z.selection.getNode(),Ue=Ln(z,_e),Tt=kr(z,vn(de));z.undoManager.transact(()=>{de.href===ne.href&&ne.attach(),Ue.fold(()=>{wi(z,_e,de.text,Tt)},Xt=>{z.focus(),Hm(z,Xt,de.text,Tt)})})},kc=z=>{const ne=z.dom,de=z.selection,_e=de.getBookmark(),Ue=de.getRng().cloneRange(),Tt=ne.getParent(Ue.startContainer,"a[href]",z.getBody()),Xt=ne.getParent(Ue.endContainer,"a[href]",z.getBody());Tt&&Ue.setStartBefore(Tt),Xt&&Ue.setEndAfter(Xt),de.setRng(Ue),z.execCommand("unlink"),de.moveToBookmark(_e)},an=z=>{z.undoManager.transact(()=>{const ne=z.selection.getNode();Xr(ne)?pd(z,ne):kc(z),z.focus()})},jt=z=>{const{class:ne,href:de,rel:_e,target:Ue,text:Tt,title:Xt}=z;return Ir({class:ne.getOrNull(),href:de,rel:_e.getOrNull(),target:Ue.getOrNull(),text:Tt.getOrNull(),title:Xt.getOrNull()},(To,ko)=>md(To)===!1)},oi=(z,ne)=>{const de=z.options.get,_e={allow_html_data_urls:de("allow_html_data_urls"),allow_script_urls:de("allow_script_urls"),allow_svg_data_urls:de("allow_svg_data_urls")},Ue=ne.href;return{...ne,href:In.isDomSafe(Ue,"a",_e)?Ue:""}},ga=(z,ne,de)=>{const _e=oi(z,de);z.hasPlugin("rtc",!0)?z.execCommand("createlink",!1,jt(_e)):ti(z,ne,_e)},Ia=z=>{z.hasPlugin("rtc",!0)?z.execCommand("unlink"):an(z)},pd=(z,ne)=>{var de;const _e=z.dom.select("img",ne)[0];if(_e){const Ue=z.dom.getParents(_e,"a[href]",ne)[0];Ue&&((de=Ue.parentNode)===null||de===void 0||de.insertBefore(_e,Ue),z.dom.remove(Ue))}},ot=(z,ne,de)=>{var _e;const Ue=z.select("img",ne)[0];if(Ue){const Tt=z.create("a",de);(_e=Ue.parentNode)===null||_e===void 0||_e.insertBefore(Tt,Ue),Tt.appendChild(Ue)}},rg=z=>Ao(z,"items"),Tn=(z,ne)=>Pt(ne,de=>rg(de)?Tn(z,de.items):oo(de.value===z,de)),zm=(z,ne,de,_e)=>{const Ue=_e[ne],Tt=z.length>0;return Ue!==void 0?Tn(Ue,de).map(Xt=>({url:{value:Xt.value,meta:{text:Tt?z:Xt.text,attach:jo}},text:Tt?z:Xt.text})):eo.none()},hd=(z,ne)=>ne==="link"?z.link:ne==="anchor"?z.anchor:eo.none(),ml={init:(z,ne)=>{const de={text:z.text,title:z.title},_e=ko=>{var Kn;return oo(de.title.length<=0,eo.from((Kn=ko.meta)===null||Kn===void 0?void 0:Kn.title).getOr(""))},Ue=ko=>{var Kn;return oo(de.text.length<=0,eo.from((Kn=ko.meta)===null||Kn===void 0?void 0:Kn.text).getOr(ko.value))},Tt=ko=>{const Kn=Ue(ko.url),Xo=_e(ko.url);return Kn.isSome()||Xo.isSome()?eo.some({...Kn.map(On=>({text:On})).getOr({}),...Xo.map(On=>({title:On})).getOr({})}):eo.none()},Xt=(ko,Kn)=>{const Xo=hd(ne,Kn).getOr([]);return zm(de.text,Kn,Xo,ko)};return{onChange:(ko,Kn)=>{const Xo=Kn.name;return Xo==="url"?Tt(ko()):ce(["anchor","link"],Xo)?Xt(ko(),Xo):((Xo==="text"||Xo==="title")&&(de[Xo]=ko()[Xo]),eo.none())}}},getDelta:zm};var Sr=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ws=(z,ne,de)=>{const _e=z.selection.getRng();Sr.setEditorTimeout(z,()=>{z.windowManager.confirm(ne,Ue=>{z.selection.setRng(_e),de(Ue)})})},pa=z=>{const ne=z.href;return ne.indexOf("@")>0&&ne.indexOf("/")===-1&&ne.indexOf("mailto:")===-1?eo.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:_e=>({..._e,href:"mailto:"+ne})}):eo.none()},nh=(z,ne)=>de=>{const _e=de.href;return z===1&&!fr(_e)||z===0&&/^\s*www(\.|\d\.)/i.test(_e)?eo.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${ne}:// prefix?`,preprocess:Tt=>({...Tt,href:ne+"://"+_e})}):eo.none()},ag={preprocess:(z,ne)=>Pt([pa,nh(Je(z),hs(z))],de=>de(ne)).fold(()=>Promise.resolve(ne),de=>new Promise(_e=>{Ws(z,de.message,Ue=>{_e(Ue?de.preprocess(ne):ne)})}))},Vm={getAnchors:z=>{const ne=z.dom.select("a:not([href])"),de=Ne(ne,_e=>{const Ue=_e.name||_e.id;return Ue?[{text:Ue,value:"#"+Ue}]:[]});return de.length>0?eo.some([{text:"None",value:""}].concat(de)):eo.none()}},Es={getClasses:z=>{const ne=Cc(z);return ne.length>0?no.sanitize(ne):eo.none()}},Er=z=>{try{return eo.some(JSON.parse(z))}catch{return eo.none()}},ig={getLinks:z=>{const ne=_e=>z.convertURL(_e.value||_e.url||"","href"),de=Yr(z);return new Promise(_e=>{Pr(de)?fetch(de).then(Ue=>Ue.ok?Ue.text().then(Er):Promise.reject()).then(_e,()=>_e(eo.none())):_t(de)?de(Ue=>_e(eo.some(Ue))):_e(eo.from(de))}).then(_e=>_e.bind(no.sanitizeWith(ne)).map(Ue=>Ue.length>0?[{text:"None",value:""}].concat(Ue):Ue))}},Ci={getRels:(z,ne)=>{const de=xt(z);if(de.length>0){const _e=E(ne,"_blank"),Ue=kn(z)===!1,Tt=To=>Dn(no.getValue(To),_e);return(Ue?no.sanitizeWith(Tt):no.sanitize)(de)}return eo.none()}},rr=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Fn={getTargets:z=>{const ne=Ke(z);return Qa(ne)?no.sanitize(ne).orThunk(()=>eo.some(rr)):ne===!1?eo.none():eo.some(rr)}},yn=(z,ne,de)=>{const _e=z.getAttrib(ne,de);return _e!==null&&_e.length>0?eo.some(_e):eo.none()},Fl=(z,ne)=>{const de=z.dom,Ue=Qo(z)?eo.some(Dt(z.selection,ne)):eo.none(),Tt=ne.bind(Xo=>eo.from(de.getAttrib(Xo,"href"))),Xt=ne.bind(Xo=>eo.from(de.getAttrib(Xo,"target"))),To=ne.bind(Xo=>yn(de,Xo,"rel")),ko=ne.bind(Xo=>yn(de,Xo,"class")),Kn=ne.bind(Xo=>yn(de,Xo,"title"));return{url:Tt,text:Ue,title:Kn,target:Xt,rel:To,linkClass:ko}},Hl={collect:(z,ne)=>ig.getLinks(z).then(de=>{const _e=Fl(z,ne);return{anchor:_e,catalogs:{targets:Fn.getTargets(z),rels:Ci.getRels(z,_e.target),classes:Es.getClasses(z),anchor:Vm.getAnchors(z),link:de},optNode:ne,flags:{titleEnabled:Jt(z)}}})},Sc=(z,ne)=>de=>{const _e=de.getData();if(!_e.url.value){Ia(z),de.close();return}const Ue=To=>eo.from(_e[To]).filter(ko=>!E(ne.anchor[To],ko)),Tt={href:_e.url.value,text:Ue("text"),target:Ue("target"),rel:Ue("rel"),class:Ue("linkClass"),title:Ue("title")},Xt={href:_e.url.value,attach:_e.url.meta!==void 0&&_e.url.meta.attach?_e.url.meta.attach:jo};ag.preprocess(z,Tt).then(To=>{ga(z,Xt,To)}),de.close()},Iu=z=>{const ne=Ln(z);return Hl.collect(z,ne)},zr=(z,ne)=>{const de=z.anchor,_e=de.url.getOr("");return{url:{value:_e,meta:{original:{value:_e}}},text:de.text.getOr(""),title:de.title.getOr(""),anchor:_e,link:_e,rel:de.rel.getOr(""),target:de.target.or(ne).getOr(""),linkClass:de.linkClass.getOr("")}},bs=(z,ne,de)=>{const _e=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Ue=z.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Tt=z.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Xt=eo.from(it(de)),To=zr(z,Xt),ko=z.catalogs,Kn=ml.init(To,ko);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:_o([_e,Ue,Tt,ao([ko.anchor.map(no.createUi("anchor","Anchors")),ko.rels.map(no.createUi("rel","Rel")),ko.targets.map(no.createUi("target","Open link in...")),ko.link.map(no.createUi("link","Link list")),ko.classes.map(no.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:To,onChange:(On,{name:ha})=>{Kn.onChange(On.getData,{name:ha}).each(si=>{On.setData(si)})},onSubmit:ne}},Gi=z=>{Iu(z).then(de=>{const _e=Sc(z,de);return bs(de,_e,z)}).then(de=>{z.windowManager.open(de)})},ls=z=>{z.addCommand("mceLink",(ne,de)=>{(de==null?void 0:de.dialog)===!0||!I(z)?Gi(z):z.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var bd=tinymce.util.Tools.resolve("tinymce.util.VK");const Ps=(z,ne)=>{document.body.appendChild(z),z.dispatchEvent(ne),document.body.removeChild(z)},ni=z=>{const ne=document.createElement("a");ne.target="_blank",ne.href=z,ne.rel="noreferrer noopener";const de=document.createEvent("MouseEvents");de.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Ps(ne,de)},cg=(z,ne)=>z.dom.getParent(ne,"a[href]"),Tr=z=>cg(z,z.selection.getStart()),Kt=z=>z.altKey===!0&&z.shiftKey===!1&&z.ctrlKey===!1&&z.metaKey===!1,ki=(z,ne)=>{if(ne){const de=Ll(ne);if(/^#/.test(de)){const _e=z.dom.select(de);_e.length&&z.selection.scrollIntoView(_e[0],!0)}else ni(ne.href)}},js=z=>()=>{z.execCommand("mceLink",!1,{dialog:!0})},qs=z=>()=>{ki(z,Tr(z))},zl=z=>{z.on("click",ne=>{const de=cg(z,ne.target);de&&bd.metaKeyPressed(ne)&&(ne.preventDefault(),ki(z,de))}),z.on("keydown",ne=>{if(!ne.isDefaultPrevented()&&ne.keyCode===13&&Kt(ne)){const de=Tr(z);de&&(ne.preventDefault(),ki(z,de))}})},Sn=(z,ne)=>(z.on("NodeChange",ne),()=>z.off("NodeChange",ne)),xs=z=>ne=>{const de=()=>{ne.setActive(!z.mode.isReadOnly()&&mt(z,z.selection.getNode())),ne.setEnabled(z.selection.isEditable())};return de(),Sn(z,de)},Ec=z=>ne=>{const de=()=>{ne.setEnabled(z.selection.isEditable())};return de(),Sn(z,de)},Ht=z=>(z.selection.isCollapsed()?Lr(z.dom.getParents(z.selection.getStart())):Zs(z.selection.getRng())).length===1,Ki=z=>ne=>{const de=()=>ne.setEnabled(Ht(z));return de(),Sn(z,de)},Vl=z=>ne=>{const de=Tt=>ze(Tt)||Fr(z.selection.getRng()),_e=z.dom.getParents(z.selection.getStart()),Ue=Tt=>{ne.setEnabled(de(Tt)&&z.selection.isEditable())};return Ue(_e),Sn(z,Tt=>Ue(Tt.parents))},Gn=z=>{z.addShortcut("Meta+K","",()=>{z.execCommand("mceLink")})},Si=z=>{z.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:js(z),onSetup:xs(z)}),z.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:qs(z),onSetup:Ki(z)}),z.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Ia(z),onSetup:Vl(z)})},vs=z=>{z.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:qs(z),onSetup:Ki(z)}),z.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:Ec(z),onAction:js(z)}),z.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Ia(z),onSetup:Vl(z)})},Lu=z=>{const ne="link unlink openlink",de="link";z.ui.registry.addContextMenu("link",{update:_e=>z.dom.isEditable(_e)?ze(z.dom.getParents(_e,"a"))?ne:de:""})},Um=z=>{const ne=Ue=>{Ue.selection.collapse(!1)},de=Ue=>{const Tt=z.selection.getNode();return Ue.setEnabled(mt(z,Tt)),jo},_e=Ue=>{const Tt=Ln(z),Xt=Qo(z);if(Tt.isNone()&&Xt){const To=Dt(z.selection,Tt);return oo(To.length===0,Ue)}else return eo.none()};z.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:xs(z)},label:"Link",predicate:Ue=>bo(z)&&mt(z,Ue),initValue:()=>Ln(z).fold(wc(""),Ll),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Ue=>{const Tt=z.selection.getNode();return Ue.setActive(mt(z,Tt)),xs(z)(Ue)},onAction:Ue=>{const Tt=Ue.getValue(),Xt=_e(Tt);ga(z,{href:Tt,attach:jo},{href:Tt,text:Xt,title:eo.none(),rel:eo.none(),target:eo.none(),class:eo.none()}),ne(z),Ue.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:de,onAction:Ue=>{Ia(z),Ue.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:de,onAction:Ue=>{qs(z)(),Ue.hide()}}]})};var Mo=()=>{ib.add("link",z=>{Pa(z),Si(z),vs(z),Lu(z),Um(z),zl(z),ls(z),Gn(z)})};Mo()})();tinymce.Resource.add("content/default/content.css",`body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;line-height:1.4;margin:1rem}table{border-collapse:collapse}table:not([cellpadding]) td,table:not([cellpadding]) th{padding:.4rem}table[border]:not([border="0"]):not([style*=border-width]) td,table[border]:not([border="0"]):not([style*=border-width]) th{border-width:1px}table[border]:not([border="0"]):not([style*=border-style]) td,table[border]:not([border="0"]):not([style*=border-style]) th{border-style:solid}table[border]:not([border="0"]):not([style*=border-color]) td,table[border]:not([border="0"]):not([style*=border-color]) th{border-color:#ccc}figure{display:table;margin:1rem auto}figure figcaption{color:#999;display:block;margin-top:.25rem;text-align:center}hr{border-color:#ccc;border-style:solid;border-width:1px 0 0 0}code{background-color:#e8e8e8;border-radius:3px;padding:.1rem .2rem}.mce-content-body:not([dir=rtl]) blockquote{border-left:2px solid #ccc;margin-left:1.5rem;padding-left:1rem}.mce-content-body[dir=rtl] blockquote{border-right:2px solid #ccc;margin-right:1.5rem;padding-right:1rem}`);export{DW as t};
//# sourceMappingURL=content-Bx-gviSK.bundle.js.map
