import{_ as d,j as i}from"./vendor-tTApdY0Y.bundle.js";class s extends BaseViewController{constructor(t={}){d.defaults(t,{el:"#user_contact_view_container",user_api:null,company_api:null,ethnic_group_api:null,status_array:null,type_array:null,sex_array:null,country_array:null,province_array:null,e_province_array:null}),super(t)}init(t){this.edit_view_tpl="UserContactEditView.html",this.permission_id="user_contact",this.viewId="UserContact",this.script_name="UserContactView",this.table_name_key="user_contact",this.context_menu_name=i.i18n._("Employee Contacts"),this.navigation_label=i.i18n._("Employee Contact"),this.api=TTAPI.APIUserContact,this.user_api=TTAPI.APIUser,this.company_api=TTAPI.APICompany,this.ethnic_group_api=TTAPI.APIEthnicGroup,this.document_object_type_id=115,this.render(),this.sub_view_mode?this.buildContextMenu(!0):this.buildContextMenu(),this.sub_view_mode||this.initData()}getCustomContextMenuModel(){var t={exclude:["copy"],include:[{label:i.i18n._("Import"),id:"import_icon",menu_align:"right",action_group:"import_export",group:"other",vue_icon:"tticon tticon-file_download_black_24dp",permission_result:PermissionManager.checkTopLevelPermission("ImportCSVEmployeeContact"),permission:null,sort_order:9010}]};return t}setDefaultMenuImportIcon(t,n,o){PermissionManager.checkTopLevelPermission("ImportCSVEmployeeContact")===!0?ContextMenuManager.hideMenuItem(this.determineContextMenuMountAttributes().id,t.id,!0):ContextMenuManager.hideMenuItem(this.determineContextMenuMountAttributes().id,t.id,!1)}initOptions(){var t=[{option_name:"status",api:this.api},{option_name:"type",api:this.api},{option_name:"sex",api:this.api},{option_name:"country",field_name:"country",api:this.company_api}];this.initDropDownOptions(t)}onFormItemChange(t,n){this.setIsChanged(t),this.setMassEditingFieldsWhenFormChange(t);var o=t.getField();switch(o){case"country":var a=this.edit_view_ui_dic.province;a.setValue(null);break}if(this.current_edit_record[o]=t.getValue(),o==="country"){this.onCountryChange();return}n||this.validate()}onCustomContextClick(t){switch(t){case"import_icon":this.onImportClick();break}}onImportClick(){var t=this;IndexViewController.openWizard("ImportCSVWizard","UserContact",function(){t.search()})}setSelectLayout(){this.sub_view_mode?super.setSelectLayout(["employee_first_name","employee_last_name","title","user_group","default_branch","default_department"]):super.setSelectLayout()}buildEditViewUI(){super.buildEditViewUI();var t=this,n={tab_employee_contact:{label:i.i18n._("Employee Contact"),is_multi_column:!0},tab_attachment:!0,tab_audit:!0};this.setTabModel(n),this.navigation.AComboBox({api_class:TTAPI.APIUserContact,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_user_contact",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var o=this.edit_view_tab.find("#tab_employee_contact"),a=o.find(".first-column"),l=o.find(".second-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(a),this.edit_view_tabs[0].push(l);var e=Global.loadWidgetByName(FormItemType.AWESOME_BOX);e.AComboBox({api_class:TTAPI.APIUser,allow_multiple_selection:!1,layout_name:"global_user",field:"user_id",set_empty:!0,show_search_inputs:!0});var _={};_.permission_section="user_contact",e.setDefaultArgs(_),this.addEditFieldToColumn(i.i18n._("Employee"),e,a,""),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"status_id"}),e.setSourceData(t.status_array),this.addEditFieldToColumn(i.i18n._("Status"),e,a),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"type_id"}),e.setSourceData(t.type_array),this.addEditFieldToColumn(i.i18n._("Type"),e,a),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"first_name",width:200}),this.addEditFieldToColumn(i.i18n._("First Name"),e,a),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"middle_name",width:200}),this.addEditFieldToColumn(i.i18n._("Middle Name"),e,a),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"last_name",width:200}),this.addEditFieldToColumn(i.i18n._("Last Name"),e,a),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"sex_id"}),e.setSourceData(t.sex_array),this.addEditFieldToColumn(i.i18n._("Gender"),e,a),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIEthnicGroup,field:"ethnic_group_id",set_empty:!0,allow_multiple_selection:!1,layout_name:"global_ethnic_group",show_search_inputs:!0}),this.addEditFieldToColumn(i.i18n._("Ethnicity"),e,a),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"address1",width:200}),this.addEditFieldToColumn(i.i18n._("Home Address (Line 1)"),e,a),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"address2",width:200}),this.addEditFieldToColumn(i.i18n._("Home Address (Line 2)"),e,a),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"city",width:200}),this.addEditFieldToColumn(i.i18n._("City"),e,a),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"country"}),e.setSourceData(t.country_array),this.addEditFieldToColumn(i.i18n._("Country"),e,a),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"province"}),e.setSourceData([]),this.addEditFieldToColumn(i.i18n._("Province/State"),e,a),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"postal_code",width:90}),this.addEditFieldToColumn(i.i18n._("Postal/ZIP Code"),e,a,""),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"work_phone",width:200}),this.addEditFieldToColumn(i.i18n._("Work Phone"),e,l,""),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"work_phone_ext",width:90}),this.addEditFieldToColumn(i.i18n._("Work Phone Ext"),e,l),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"home_phone",width:200}),this.addEditFieldToColumn(i.i18n._("Home Phone"),e,l),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"mobile_phone",width:200}),this.addEditFieldToColumn(i.i18n._("Mobile Phone"),e,l),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"fax_phone",width:200}),this.addEditFieldToColumn(i.i18n._("Fax"),e,l),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"work_email",width:200}),this.addEditFieldToColumn(i.i18n._("Work Email"),e,l),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"home_email",width:200}),this.addEditFieldToColumn(i.i18n._("Home Email"),e,l),e=Global.loadWidgetByName(FormItemType.DATE_PICKER),e.TDatePicker({field:"birth_date"}),this.addEditFieldToColumn(i.i18n._("Birth Date"),e,l),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"sin",width:200}),this.addEditFieldToColumn(i.i18n._("SIN / SSN"),e,l),e=Global.loadWidgetByName(FormItemType.TEXT_AREA),e.TTextArea({field:"note"}),this.addEditFieldToColumn(i.i18n._("Note"),e,l,"",null,null,!0),e=Global.loadWidgetByName(FormItemType.TAG_INPUT),e.TTagInput({field:"tag",object_type_id:230}),this.addEditFieldToColumn(i.i18n._("Tags"),e,l,"",null,null,!0)}buildSearchFields(){var t={};t.permission_section="user_contact",this.search_fields=[new SearchField({label:i.i18n._("Employee"),in_column:1,default_args:t,field:"user_id",multiple:!0,basic_search:!0,adv_search:!0,layout_name:"global_user",api_class:TTAPI.APIUser,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:i.i18n._("First Name"),in_column:1,field:"first_name",basic_search:!0,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:i.i18n._("Last Name"),in_column:1,field:"last_name",basic_search:!0,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:i.i18n._("Phone"),in_column:1,field:"any_phone",basic_search:!1,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:i.i18n._("Email"),field:"any_email",basic_search:!1,adv_search:!0,in_column:1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:i.i18n._("Status"),in_column:2,field:"status_id",multiple:!0,basic_search:!0,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:i.i18n._("Type"),in_column:2,field:"type_id",multiple:!0,basic_search:!0,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:i.i18n._("Gender"),in_column:2,field:"sex_id",multiple:!0,basic_search:!1,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:i.i18n._("Tags"),in_column:2,field:"tag",basic_search:!0,adv_search:!0,object_type_id:230,form_item_type:FormItemType.TAG_INPUT}),new SearchField({label:i.i18n._("Country"),in_column:3,field:"country",multiple:!0,basic_search:!1,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.COMBO_BOX}),new SearchField({label:i.i18n._("Province/State"),in_column:3,field:"province",multiple:!0,basic_search:!1,adv_search:!0,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:i.i18n._("City"),in_column:3,field:"city",basic_search:!1,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:i.i18n._("SIN/SSN"),in_column:3,field:"sin",basic_search:!1,adv_search:!0,form_item_type:FormItemType.TEXT_INPUT})]}setProvince(t,n){var o=this;!t||t==="-1"||t==="0"?(o.province_array=[],this.adv_search_field_ui_dic.province.setSourceData([])):this.company_api.getOptions("province",t,{onResult:function(a){a=a.getResult(),a||(a=[]),o.province_array=Global.buildRecordArray(a),o.adv_search_field_ui_dic.province.setSourceData(o.province_array)}})}eSetProvince(t,n){var o=this,a=o.edit_view_ui_dic.province;!t||t==="-1"||t==="0"?(o.e_province_array=[],a.setSourceData([])):this.company_api.getOptions("province",t,{onResult:function(l){l=l.getResult(),l||(l=[]),o.e_province_array=Global.buildRecordArray(l),n&&o.e_province_array.length>0&&(o.current_edit_record.province=o.e_province_array[0].value,a.setValue(o.current_edit_record.province)),a.setSourceData(o.e_province_array)}})}onSetSearchFilterFinished(){if(this.search_panel.getSelectTabIndex()===1){var t=this.adv_search_field_ui_dic.country,n=t.getValue();this.setProvince(n)}}onBuildAdvUIFinished(){this.adv_search_field_ui_dic.country.change(i.proxy(function(){var t=this.adv_search_field_ui_dic.country,n=t.getValue();this.setProvince(n),this.adv_search_field_ui_dic.province.setValue(null)},this))}searchDone(){super.searchDone(),TTPromise.resolve("ContactView","init")}}s.loadSubView=function(r,t,n){Global.loadViewSource("UserContact","SubUserContactView.html",function(o){var a={},l=d.template(o);Global.isSet(t)&&t(),Global.isSet(r)&&(r.html(l(a)),Global.isSet(n)&&n(sub_user_contact_view_controller))})};export{s as UserContactViewController};
//# sourceMappingURL=UserContactViewController-aUruSTJa.bundle.js.map
