import{_ as y,j as t}from"./vendor-tTApdY0Y.bundle.js";class g extends BaseViewController{constructor(_={}){y.defaults(_,{el:"#overtime_policy_view_container",type_array:null,branch_selection_type_array:null,department_selection_type_array:null,job_group_selection_type_array:null,job_selection_type_array:null,job_group_array:null,job_item_group_array:null,punch_tag_group_array:null,job_item_group_selection_type_array:null,job_item_selection_type_array:null,punch_tag_group_selection_type_array:null,punch_tag_selection_type_array:null,job_group_api:null,job_item_group_api:null,punch_tag_group_api:null}),super(_)}init(_){this.edit_view_tpl="OvertimePolicyEditView.html",this.permission_id="over_time_policy",this.viewId="OvertimePolicy",this.script_name="OvertimePolicyView",this.table_name_key="over_time_policy",this.context_menu_name=t.i18n._("Overtime Policy"),this.navigation_label=t.i18n._("Overtime Policy"),this.api=TTAPI.APIOverTimePolicy,Global.getProductEdition()>=20&&(this.job_group_api=TTAPI.APIJobGroup,this.job_item_group_api=TTAPI.APIJobItemGroup,this.punch_tag_group_api=TTAPI.APIPunchTagGroup),this.render(),this.buildContextMenu(),this.initData()}initOptions(){var _=this,r=[{option_name:"type",api:this.api},{option_name:"branch_selection_type",api:this.api},{option_name:"department_selection_type",api:this.api},{option_name:"job_group_selection_type",api:this.api},{option_name:"job_selection_type",api:this.api},{option_name:"job_item_group_selection_type",api:this.api},{option_name:"job_item_selection_type",api:this.api},{option_name:"punch_tag_group_selection_type",api:this.api},{option_name:"punch_tag_selection_type",api:this.api}];this.initDropDownOptions(r),Global.getProductEdition()>=20&&(this.job_group_api.getJobGroup("",!1,!1,{onResult:function(l){l=l.getResult(),l=Global.buildTreeRecord(l),_.job_group_array=l}}),this.job_item_group_api.getJobItemGroup("",!1,!1,{onResult:function(l){l=l.getResult(),l=Global.buildTreeRecord(l),_.job_item_group_array=l}}),this.punch_tag_group_api.getPunchTagGroup("",!1,!1,{onResult:function(l){l=l.getResult(),l=Global.buildTreeRecord(l),_.punch_tag_group_array=l}}))}buildEditViewUI(){super.buildEditViewUI();var _=this,r={tab_overtime_policy:{label:t.i18n._("Overtime Policy")},tab_differential_criteria:{label:t.i18n._("Differential Criteria"),init_callback:"initSubDifferentialCriteriaView",html_template:this.getOvertimePolicyDifferentiTabHtml()},tab_audit:!0};this.setTabModel(r),this.navigation.AComboBox({api_class:TTAPI.APIOverTimePolicy,id:this.script_name+"_navigation",allow_multiple_selection:!1,layout_name:"global_over_time",navigation_mode:!0,show_search_inputs:!0}),this.setNavigation();var l=this.edit_view_tab.find("#tab_overtime_policy"),s=l.find(".first-column");this.edit_view_tabs[0]=[],this.edit_view_tabs[0].push(s);var e,p;e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"name",width:"100%"}),this.addEditFieldToColumn(t.i18n._("Name"),e,s,""),e.parent().width("45%"),e=Global.loadWidgetByName(FormItemType.TEXT_AREA),e.TTextArea({field:"description",width:"100%"}),this.addEditFieldToColumn(t.i18n._("Description"),e,s,"",null,null,!0),e.parent().width("45%"),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIContributingShiftPolicy,allow_multiple_selection:!1,layout_name:"global_contributing_shift_policy",show_search_inputs:!0,set_empty:!0,field:"contributing_shift_policy_id"}),this.addEditFieldToColumn(t.i18n._("Contributing Shift Policy"),e,s),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"type_id",set_empty:!1}),e.setSourceData(_.type_array),this.addEditFieldToColumn(t.i18n._("Type"),e,s),e=Global.loadWidgetByName(FormItemType.TEXT_INPUT),e.TTextInput({field:"trigger_time",mode:"time_unit",need_parser_sec:!0});var u=Global.loadWidgetByName(FormItemType.AWESOME_BOX);u.AComboBox({api_class:TTAPI.APIContributingShiftPolicy,allow_multiple_selection:!1,layout_name:"global_contributing_shift_policy",show_search_inputs:!0,set_empty:!0,field:"trigger_time_adjust_contributing_shift_policy_id"}),p=t("<div class='widget-h-box '></div>");var c=t("<span class='widget-right-label'> "+t.i18n._("Adjusted By")+": </span>");p.append(e),Global.getProductEdition()>=15&&(p.append(c),p.append(u)),this.addEditFieldToColumn(t.i18n._("Active After"),[e,u],s,"",p),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIPayCode,allow_multiple_selection:!1,layout_name:"global_pay_code",show_search_inputs:!0,set_empty:!0,field:"pay_code_id"}),this.addEditFieldToColumn(t.i18n._("Pay Code"),e,s),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIPayFormulaPolicy,allow_multiple_selection:!1,layout_name:"global_pay_formula_policy",show_search_inputs:!0,set_empty:!0,field:"pay_formula_policy_id",custom_first_label:t.i18n._("-- Defined by Pay Code --"),added_items:[{value:TTUUID.zero_id,label:t.i18n._("-- Defined by Pay Code --")}]}),this.addEditFieldToColumn(t.i18n._("Pay Formula Policy"),e,s);var m=this.edit_view_tab.find("#tab_differential_criteria"),d=m.find(".first-column");this.edit_view_tabs[1]=[],this.edit_view_tabs[1].push(d);var i=t("<div class='v-box'></div>");e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"branch_selection_type_id",set_empty:!1}),e.setSourceData(_.branch_selection_type_array),o=this.putInputToInsideFormItem(e,t.i18n._("Selection Type")),i.append(o),i.append("<div class='clear-both-div'></div>");var a=Global.loadWidgetByName(FormItemType.AWESOME_BOX);a.AComboBox({api_class:TTAPI.APIBranch,allow_multiple_selection:!0,layout_name:"global_branch",show_search_inputs:!0,set_empty:!0,field:"branch"});var o=this.putInputToInsideFormItem(a,t.i18n._("Selection"));i.append(o);var n=Global.loadWidgetByName(FormItemType.CHECKBOX);n.TCheckbox({field:"exclude_default_branch"}),o=this.putInputToInsideFormItem(n,t.i18n._("Exclude Default")),i.append(o),this.addEditFieldToColumn(t.i18n._("Branches"),[e,a,n],d,"",i,!1,!0),i=t("<div class='v-box'></div>"),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"department_selection_type_id",set_empty:!1}),e.setSourceData(_.department_selection_type_array),o=this.putInputToInsideFormItem(e,t.i18n._("Selection Type")),i.append(o),i.append("<div class='clear-both-div'></div>"),a=Global.loadWidgetByName(FormItemType.AWESOME_BOX),a.AComboBox({api_class:TTAPI.APIDepartment,allow_multiple_selection:!0,layout_name:"global_department",show_search_inputs:!0,set_empty:!0,field:"department"}),o=this.putInputToInsideFormItem(a,t.i18n._("Selection")),i.append(o),n=Global.loadWidgetByName(FormItemType.CHECKBOX),n.TCheckbox({field:"exclude_default_department"}),o=this.putInputToInsideFormItem(n,t.i18n._("Exclude Default")),i.append(o),this.addEditFieldToColumn(t.i18n._("Departments"),[e,a,n],d,"",i,!1,!0),Global.getProductEdition()>=20&&(i=t("<div class='v-box'></div>"),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"job_group_selection_type_id",set_empty:!1}),e.setSourceData(_.job_group_selection_type_array),o=this.putInputToInsideFormItem(e,t.i18n._("Selection Type")),i.append(o),i.append("<div class='clear-both-div'></div>"),a=Global.loadWidgetByName(FormItemType.AWESOME_BOX),a.AComboBox({tree_mode:!0,allow_multiple_selection:!0,layout_name:"global_tree_column",set_empty:!0,field:"job_group"}),a.setSourceData(_.job_group_array),o=this.putInputToInsideFormItem(a,t.i18n._("Selection")),i.append(o),this.addEditFieldToColumn(t.i18n._("Job Groups"),[e,a],d,"",i,!1,!0),i=t("<div class='v-box'></div>"),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"job_selection_type_id",set_empty:!1}),e.setSourceData(_.job_selection_type_array),o=this.putInputToInsideFormItem(e,t.i18n._("Selection Type")),i.append(o),i.append("<div class='clear-both-div'></div>"),a=Global.loadWidgetByName(FormItemType.AWESOME_BOX),a.AComboBox({api_class:TTAPI.APIJob,allow_multiple_selection:!0,layout_name:"global_job",show_search_inputs:!0,set_empty:!0,field:"job"}),o=this.putInputToInsideFormItem(a,t.i18n._("Selection")),i.append(o),n=Global.loadWidgetByName(FormItemType.CHECKBOX),n.TCheckbox({field:"exclude_default_job"}),o=this.putInputToInsideFormItem(n,t.i18n._("Exclude Default")),i.append(o),this.addEditFieldToColumn(t.i18n._("Jobs"),[e,a,n],d,"",i,!1,!0),i=t("<div class='v-box'></div>"),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"job_item_group_selection_type_id",set_empty:!1}),e.setSourceData(_.job_item_group_selection_type_array),o=this.putInputToInsideFormItem(e,t.i18n._("Selection Type")),i.append(o),i.append("<div class='clear-both-div'></div>"),a=Global.loadWidgetByName(FormItemType.AWESOME_BOX),a.AComboBox({tree_mode:!0,allow_multiple_selection:!0,layout_name:"global_tree_column",set_empty:!0,field:"job_item_group"}),a.setSourceData(_.job_item_group_array),o=this.putInputToInsideFormItem(a,t.i18n._("Selection")),i.append(o),this.addEditFieldToColumn(t.i18n._("Task Groups"),[e,a],d,"",i,!1,!0),i=t("<div class='v-box'></div>"),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"job_item_selection_type_id",set_empty:!1}),e.setSourceData(_.job_item_selection_type_array),o=this.putInputToInsideFormItem(e,t.i18n._("Selection Type")),i.append(o),i.append("<div class='clear-both-div'></div>"),a=Global.loadWidgetByName(FormItemType.AWESOME_BOX),a.AComboBox({api_class:TTAPI.APIJobItem,allow_multiple_selection:!0,layout_name:"global_job_item",show_search_inputs:!0,set_empty:!0,field:"job_item"}),o=this.putInputToInsideFormItem(a,t.i18n._("Selection")),i.append(o),n=Global.loadWidgetByName(FormItemType.CHECKBOX),n.TCheckbox({field:"exclude_default_job_item"}),o=this.putInputToInsideFormItem(n,t.i18n._("Exclude Default")),i.append(o),this.addEditFieldToColumn(t.i18n._("Tasks"),[e,a,n],d,"",i,!1,!0),i=t("<div class='v-box'></div>"),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"punch_tag_group_selection_type_id",set_empty:!1}),e.setSourceData(_.punch_tag_group_selection_type_array),o=this.putInputToInsideFormItem(e,t.i18n._("Selection Type")),i.append(o),i.append("<div class='clear-both-div'></div>"),a=Global.loadWidgetByName(FormItemType.AWESOME_BOX),a.AComboBox({tree_mode:!0,allow_multiple_selection:!0,layout_name:"global_tree_column",set_empty:!0,field:"punch_tag_group"}),a.setSourceData(_.punch_tag_group_array),o=this.putInputToInsideFormItem(a,t.i18n._("Selection")),i.append(o),this.addEditFieldToColumn(t.i18n._("Punch Tag Groups"),[e,a],d,"",i,!1,!0),i=t("<div class='v-box'></div>"),e=Global.loadWidgetByName(FormItemType.COMBO_BOX),e.TComboBox({field:"punch_tag_selection_type_id",set_empty:!1}),e.setSourceData(_.punch_tag_selection_type_array),o=this.putInputToInsideFormItem(e,t.i18n._("Selection Type")),i.append(o),i.append("<div class='clear-both-div'></div>"),a=Global.loadWidgetByName(FormItemType.AWESOME_BOX),a.AComboBox({api_class:TTAPI.APIPunchTag,allow_multiple_selection:!0,layout_name:"global_job_item",show_search_inputs:!0,set_empty:!0,field:"punch_tag"}),o=this.putInputToInsideFormItem(a,t.i18n._("Selection")),i.append(o),n=Global.loadWidgetByName(FormItemType.CHECKBOX),n.TCheckbox({field:"exclude_default_punch_tag"}),o=this.putInputToInsideFormItem(n,t.i18n._("Exclude Default")),i.append(o),this.addEditFieldToColumn(t.i18n._("Punch Tags"),[e,a,n],d,"",i,!1,!0),e=Global.loadWidgetByName(FormItemType.AWESOME_BOX),e.AComboBox({api_class:TTAPI.APIContributingPayCodePolicy,allow_multiple_selection:!1,layout_name:"global_contributing_pay_code_policy",show_search_inputs:!0,set_any:!0,field:"contributing_pay_code_policy_id"}),this.addEditFieldToColumn(t.i18n._("Pay Code Policy"),e,d))}onFormItemChange(_,r){this.setIsChanged(_),this.setMassEditingFieldsWhenFormChange(_);var l=_.getField(),s=_.getValue();this.current_edit_record[l]=s,l==="branch_selection_type_id"&&this.onBranchSelectionTypeChange(),l==="department_selection_type_id"&&this.onDepartmentSelectionTypeChange(),l==="job_group_selection_type_id"&&this.onJobGroupSelectionTypeChange(),l==="job_selection_type_id"&&this.onJobSelectionTypeChange(),l==="job_item_group_selection_type_id"&&this.onJobItemGroupSelectionTypeChange(),l==="job_item_selection_type_id"&&this.onJobItemSelectionTypeChange(),l==="punch_tag_group_selection_type_id"&&this.onPunchTagGroupSelectionTypeChange(),l==="punch_tag_selection_type_id"&&this.onPunchTagSelectionTypeChange(),r||this.validate()}setCurrentEditRecordData(){this.setDefaultData({branch_selection_type_id:10,department_selection_type_id:10,job_group_selection_type_id:10,job_selection_type_id:10,job_item_group_selection_type_id:10,job_item_selection_type_id:10,punch_tag_group_selection_type_id:10,punch_tag_selection_type_id:10});for(var _ in this.current_edit_record){var r=this.edit_view_ui_dic[_];if(Global.isSet(r))switch(_){default:r.setValue(this.current_edit_record[_]);break}}this.onBranchSelectionTypeChange(),this.onDepartmentSelectionTypeChange(),this.onJobGroupSelectionTypeChange(),this.onJobSelectionTypeChange(),this.onJobItemGroupSelectionTypeChange(),this.onJobItemSelectionTypeChange(),this.onPunchTagGroupSelectionTypeChange(),this.onPunchTagSelectionTypeChange(),this.collectUIDataToCurrentEditRecord(),this.setEditViewDataDone()}onBranchSelectionTypeChange(){this.current_edit_record.branch_selection_type_id==10?this.edit_view_ui_dic.branch.setEnabled(!1):this.edit_view_ui_dic.branch.setEnabled(!0)}onDepartmentSelectionTypeChange(){this.current_edit_record.department_selection_type_id==10?this.edit_view_ui_dic.department.setEnabled(!1):this.edit_view_ui_dic.department.setEnabled(!0)}onJobGroupSelectionTypeChange(){Global.getProductEdition()>=20&&(this.current_edit_record.job_group_selection_type_id==10||this.is_viewing?this.edit_view_ui_dic.job_group.setEnabled(!1):this.edit_view_ui_dic.job_group.setEnabled(!0))}onJobSelectionTypeChange(){Global.getProductEdition()>=20&&(this.current_edit_record.job_selection_type_id==10||this.is_viewing?this.edit_view_ui_dic.job.setEnabled(!1):this.edit_view_ui_dic.job.setEnabled(!0))}onJobItemGroupSelectionTypeChange(){Global.getProductEdition()>=20&&(this.current_edit_record.job_item_group_selection_type_id==10||this.is_viewing?this.edit_view_ui_dic.job_item_group.setEnabled(!1):this.edit_view_ui_dic.job_item_group.setEnabled(!0))}onJobItemSelectionTypeChange(){Global.getProductEdition()>=20&&(this.current_edit_record.job_item_selection_type_id==10||this.is_viewing?this.edit_view_ui_dic.job_item.setEnabled(!1):this.edit_view_ui_dic.job_item.setEnabled(!0))}onPunchTagGroupSelectionTypeChange(){Global.getProductEdition()>=20&&(this.current_edit_record.punch_tag_group_selection_type_id==10||this.is_viewing?this.edit_view_ui_dic.punch_tag_group.setEnabled(!1):this.edit_view_ui_dic.punch_tag_group.setEnabled(!0))}onPunchTagSelectionTypeChange(){Global.getProductEdition()>=20&&(this.current_edit_record.punch_tag_selection_type_id==10||this.is_viewing?this.edit_view_ui_dic.punch_tag.setEnabled(!1):this.edit_view_ui_dic.punch_tag.setEnabled(!0))}setEditViewDataDone(){super.setEditViewDataDone()}buildSearchFields(){super.buildSearchFields(),this.search_fields=[new SearchField({label:t.i18n._("Name"),in_column:1,field:"name",multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.TEXT_INPUT}),new SearchField({label:t.i18n._("Type"),in_column:1,field:"type_id",multiple:!0,basic_search:!0,adv_search:!1,layout_name:"global_option_column",form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Pay Code"),in_column:1,field:"pay_code_id",layout_name:"global_pay_code",api_class:TTAPI.APIPayCode,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Pay Formula Policy"),in_column:1,field:"pay_formula_policy_id",layout_name:"global_pay_formula_policy",api_class:TTAPI.APIPayFormulaPolicy,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Contributing Shift Policy"),in_column:2,field:"contributing_shift_policy_id",layout_name:"global_contributing_shift_policy",api_class:TTAPI.APIContributingShiftPolicy,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Created By"),in_column:2,field:"created_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX}),new SearchField({label:t.i18n._("Updated By"),in_column:2,field:"updated_by",layout_name:"global_user",api_class:TTAPI.APIUser,multiple:!0,basic_search:!0,adv_search:!1,form_item_type:FormItemType.AWESOME_BOX})]}initSubDifferentialCriteriaView(){Global.getProductEdition()>=15?(this.edit_view_tab.find("#tab_differential_criteria").find(".first-column").css("display","block"),this.edit_view.find(".permission-defined-div").css("display","none"),this.buildContextMenu(!0),this.setEditMenu()):(this.edit_view_tab.find("#tab_differential_criteria").find(".first-column").css("display","none"),this.edit_view.find(".permission-defined-div").css("display","block"),this.edit_view.find(".permission-message").html(Global.getUpgradeMessage()))}getOvertimePolicyDifferentiTabHtml(){return`<div id="tab_differential_criteria" class="edit-view-tab-outside">
					<div class="edit-view-tab" id="tab_differential_criteria_content_div">
						<div class="first-column full-width-column"></div>
						<div class="save-and-continue-div permission-defined-div">
							<span class="message permission-message"></span>
						</div>
					</div>
				</div>`}}export{g as OvertimePolicyViewController};
//# sourceMappingURL=OvertimePolicyViewController-HTY1EC9M.bundle.js.map
