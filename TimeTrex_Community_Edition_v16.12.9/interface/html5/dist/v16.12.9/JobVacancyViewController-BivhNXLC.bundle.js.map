{"version":3,"file":"JobVacancyViewController-BivhNXLC.bundle.js","sources":["../../views/hr/recruitment/JobVacancyViewController.js"],"sourcesContent":["import tinyMCE from 'tinymce/tinymce';\nimport 'tinymce/icons/default/icons.min.js';\nimport 'tinymce/themes/silver/theme.min.js';\nimport 'tinymce/models/dom/model.min.js';\nimport 'tinymce/skins/ui/oxide/skin.js';\nimport 'tinymce/plugins/link';\nimport 'tinymce/skins/content/default/content.js';\n\nexport class JobVacancyViewController extends BaseViewController {\n\tconstructor( options = {} ) {\n\t\t_.defaults( options, {\n\t\t\tel: '#job_vacancy_view_container',\n\n\t\t\tstatus_array: null,\n\t\t\ttype_array: null,\n\t\t\tlevel_array: null,\n\t\t\temployment_status_array: null,\n\t\t\twage_type_array: null,\n\t\t\tavailability_array: null,\n\n\t\t\tsub_job_vacancy_applicant_view_controller: null,\n\n\t\t\tdocument_object_type_id: null\n\t\t} );\n\n\t\tsuper( options );\n\t}\n\n\tinit( options ) {\n\t\t//this._super('initialize', options );\n\t\tthis.edit_view_tpl = 'JobVacancyEditView.html';\n\t\tthis.permission_id = 'job_vacancy';\n\t\tthis.viewId = 'JobVacancy';\n\t\tthis.script_name = 'JobVacancyView';\n\t\tthis.table_name_key = 'job_vacancy';\n\t\tthis.context_menu_name = $.i18n._( 'Job Vacancies' );\n\t\tthis.navigation_label = $.i18n._( 'Job Vacancy' );\n\t\tthis.api = TTAPI.APIJobVacancy;\n\t\tthis.document_object_type_id = 150;\n\t\tvar $this = this;\n\t\t$this.render();\n\t\t$this.buildContextMenu();\n\n\t\t$this.initData();\n\t}\n\n\tinitOptions() {\n\t\tvar options = [\n\t\t\t{ option_name: 'status', api: this.api },\n\t\t\t{ option_name: 'type', api: this.api },\n\t\t\t{ option_name: 'level', api: this.api },\n\t\t\t{ option_name: 'employment_status', api: this.api },\n\t\t\t{ option_name: 'wage_type', api: this.api },\n\t\t\t{ option_name: 'availability', api: this.api },\n\t\t];\n\n\t\tthis.initDropDownOptions( options );\n\t}\n\n\tgetCustomContextMenuModel() {\n\t\tvar context_menu_model = {\n\t\t\texclude: [],\n\t\t\tinclude: [\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Jump To' ),\n\t\t\t\t\tid: 'jump_to_header',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\taction_group_header: true,\n\t\t\t\t\tpermission_result: false // to hide it in legacy context menu and avoid errors in legacy parsers.\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Job Applications' ),\n\t\t\t\t\tid: 'job_application',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: 'jobapplications-35x35.png',\n\t\t\t\t\tpermission_result: true,\n\t\t\t\t\tpermission: null\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: $.i18n._( 'Portal Preview' ),\n\t\t\t\t\tid: 'portal_preview',\n\t\t\t\t\tmenu_align: 'right',\n\t\t\t\t\taction_group: 'jump_to',\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\ticon: 'reviews-35x35.png',\n\t\t\t\t\tpermission_result: true,\n\t\t\t\t\tpermission: null\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn context_menu_model;\n\t}\n\n\tonCustomContextClick( id ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'download':\n\t\t\t\tthis.onDownloadClick();\n\t\t\t\tbreak;\n\t\t\tcase 'map':\n\t\t\t\tthis.onMapClick();\n\t\t\t\tbreak;\n\t\t\tcase 'job_application':\n\t\t\tcase 'portal_preview':\n\t\t\t\tthis.onNavigationClick( id );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetCustomDefaultMenuIcon( id, context_btn, grid_selected_length ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'portal_preview':\n\t\t\t\tthis.setDefaultMenuPortalViewIcon( context_btn, grid_selected_length );\n\t\t\t\tbreak;\n\t\t\tcase 'job_application':\n\t\t\t\tthis.setDefaultMenuEditIcon( context_btn, grid_selected_length, 'job_application' );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetDefaultMenuPortalViewIcon( context_btn, grid_selected_length, pId ) {\n\t\tthis.setMenuPortalViewIcon( context_btn );\n\t}\n\n\tsetEditMenuPortalViewIcon( context_btn ) {\n\t\tthis.setMenuPortalViewIcon( context_btn );\n\t}\n\n\tsetErrorMenuPortalViewIcon( context_btn ) {\n\t\tthis.setMenuPortalViewIcon( context_btn );\n\t}\n\n\tsetMenuPortalViewIcon( context_btn ) {\n\t\tvar $this = this;\n\t\t// var select_item = this.getSelectedItem();\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tvar select_item = this.getRecordFromGridById( grid_selected_id_array[0] );\n\t\t\tsetIcon( select_item.id );\n\t\t} else if ( ( this.is_viewing || this.is_edit ) && this.current_edit_record && this.current_edit_record.id ) {\n\t\t\tsetIcon( this.current_edit_record.id );\n\t\t} else {\n\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t}\n\n\t\tfunction setIcon( id ) {\n\t\t\tvar filter = {};\n\t\t\tfilter.filter_data = {};\n\t\t\tfilter.filter_data.id = [id];\n\t\t\t$this.api['get' + $this.api.key_name]( filter, {\n\t\t\t\tonResult: function( result ) {\n\t\t\t\t\tvar result_data = result.getResult();\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tresult_data = [];\n\t\t\t\t\t}\n\t\t\t\t\tresult_data = result_data[0];\n\t\t\t\t\tif ( !result_data ) {\n\t\t\t\t\t\tContextMenuManager.disableMenuItem( $this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif ( ( result_data.availability_id == 20 || result_data.availability_id == 30 ) && ( result_data.status_id == 20 || result_data.status_id == 40 ) ) {\n\t\t\t\t\t\tContextMenuManager.disableMenuItem( $this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tContextMenuManager.disableMenuItem( $this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t\t\t\t}\n\t\t\t\t}.bind( $this )\n\t\t\t} );\n\t\t}\n\t}\n\n\tsetErrorMenu() {\n\t\tvar context_menu_array = ContextMenuManager.getMenuModelByMenuId( this.determineContextMenuMountAttributes().id );\n\t\tvar len = context_menu_array.length;\n\n\t\tfor ( var i = 0; i < len; i++ ) {\n\t\t\tlet context_btn = context_menu_array[i];\n\t\t\tlet id = context_menu_array[i].id;\n\t\t\tif ( id !== 'portal_preview' ) {\n\t\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, true );\n\t\t\t}\n\t\t\tswitch ( id ) {\n\t\t\t\tcase 'cancel':\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'portal_preview':\n\t\t\t\t\tthis.setErrorMenuPortalViewIcon( context_btn );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tContextMenuManager.disableMenuItem( this.determineContextMenuMountAttributes().id, context_btn.id, false );\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\t}\n\n\n\tsetCustomEditMenuIcon( id, context_btn ) {\n\t\tswitch ( id ) {\n\t\t\tcase 'portal_preview':\n\t\t\t\tthis.setEditMenuPortalViewIcon( context_btn );\n\t\t\t\tbreak;\n\t\t\tcase 'job_application':\n\t\t\t\tthis.setEditMenuNavEditIcon( context_btn, 'job_application' );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonNavigationClick( iconName ) {\n\t\tvar grid_selected_id_array = this.getGridSelectIdArray();\n\t\tvar grid_selected_length = grid_selected_id_array.length;\n\t\tvar select_item = null;\n\t\tif ( grid_selected_length === 1 ) {\n\t\t\tselect_item = this.getRecordFromGridById( grid_selected_id_array[0] );\n\t\t} else if ( ( this.is_viewing || this.is_edit ) && this.current_edit_record && this.current_edit_record.id ) {\n\t\t\tselect_item = this.current_edit_record;\n\t\t}\n\t\tswitch ( iconName ) {\n\t\t\tcase 'job_application':\n\t\t\t\tvar filter = { filter_data: {} };\n\t\t\t\t// var select_item = this.getSelectedItem();\n\t\t\t\tif ( select_item != null ) {\n\t\t\t\t\tfilter.filter_data.job_vacancy_id = select_item.id;\n\t\t\t\t\tGlobal.addViewTab( this.viewId, $.i18n._( 'Job Vacancies' ), window.location.href );\n\t\t\t\t\tIndexViewController.goToView( 'JobApplication', filter );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'portal_preview':\n\t\t\t\tvar new_url = Global.getBaseURL( false, false );\n\t\t\t\t// var select_item = this.getSelectedItem();\n\t\t\t\tif ( select_item != null ) {\n\t\t\t\t\tnew_url += 'portal/recruitment/#!m=PortalJobVacancyDetail&id=' + select_item.id;\n\t\t\t\t\tnew_url += '&company_id=' + LocalCacheData.getCurrentCompany().short_name;\n\t\t\t\t\twindow.open( new_url );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tbuildEditViewUI() {\n\n\t\tsuper.buildEditViewUI();\n\n\t\tvar $this = this;\n\n\t\tvar tab_model = {\n\t\t\t'tab_vacancy': {\n\t\t\t\t'label': $.i18n._( 'Job Vacancy' ),\n\t\t\t\t'html_template': this.getJobVacancyTabHtml(),\n\t\t\t\t'is_multi_column': true\n\t\t\t},\n\t\t\t'tab_attachment': true,\n\t\t\t'tab_applications': {\n\t\t\t\t'label': $.i18n._( 'Job Applications' ),\n\t\t\t\t'init_callback': 'initSubApplicationView',\n\t\t\t\t'display_on_mass_edit': false\n\t\t\t},\n\t\t\t'tab_audit': true,\n\t\t};\n\t\tthis.setTabModel( tab_model );\n\n\t\tthis.navigation.AComboBox( {\n\t\t\tapi_class: TTAPI.APIJobVacancy,\n\t\t\tid: this.script_name + '_navigation',\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_job_vacancy',\n\t\t\tnavigation_mode: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\n\t\tthis.setNavigation();\n\n\t\t//Tab 0 start\n\n\t\tvar tab_vacancy = this.edit_view_tab.find( '#tab_vacancy' );\n\n\t\tvar tab_vacancy_column1 = tab_vacancy.find( '.first-column' );\n\n\t\tthis.edit_view_tabs[0] = [];\n\n\t\tthis.edit_view_tabs[0].push( tab_vacancy_column1 );\n\n\t\tvar form_item_input;\n\t\tvar widgetContainer;\n\t\tvar label;\n\n\t\t// Status\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'status_id' } );\n\t\tform_item_input.setSourceData( $this.status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Status' ), form_item_input, tab_vacancy_column1, '' );\n\n\t\t// Name\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'name', width: '100%' } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Name' ), form_item_input, tab_vacancy_column1 );\n\n\t\tform_item_input.parent().width( '45%' );\n\n\t\t// Job Title\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user_title',\n\t\t\tfield: 'title_id',\n\t\t\tset_empty: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Title' ), form_item_input, tab_vacancy_column1 );\n\n\t\t// Availability\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'availability_id' } );\n\t\tform_item_input.setSourceData( $this.availability_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Availability' ), form_item_input, tab_vacancy_column1 );\n\n\t\t// Employee Status\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'employment_status_id' } );\n\t\tform_item_input.setSourceData( $this.employment_status_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Employment Status' ), form_item_input, tab_vacancy_column1 );\n\n\t\t// Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'type_id' } );\n\t\tform_item_input.setSourceData( $this.type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Type' ), form_item_input, tab_vacancy_column1 );\n\n\t\t// Level\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'level_id' } );\n\t\tform_item_input.setSourceData( $this.level_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Level' ), form_item_input, tab_vacancy_column1 );\n\n\t\t// Branch\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_branch',\n\t\t\tfield: 'branch_id',\n\t\t\tset_empty: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Branch' ), form_item_input, tab_vacancy_column1 );\n\n\t\t// Department\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_department',\n\t\t\tfield: 'department_id',\n\t\t\tset_empty: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Department' ), form_item_input, tab_vacancy_column1 );\n\n\t\t// Hiring Manager\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.AWESOME_BOX );\n\t\tform_item_input.AComboBox( {\n\t\t\tapi_class: TTAPI.APIUser,\n\t\t\tallow_multiple_selection: false,\n\t\t\tlayout_name: 'global_user',\n\t\t\tfield: 'user_id',\n\t\t\tset_empty: true,\n\t\t\tshow_search_inputs: true\n\t\t} );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Hiring Manager' ), form_item_input, tab_vacancy_column1, '', null, true );\n\n\t\t// Positions Available\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'positions', width: 50 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Positions Available' ), form_item_input, tab_vacancy_column1, '', null, true );\n\n\t\tvar tab_vacancy_column2 = tab_vacancy.find( '.second-column' );\n\n\t\tthis.edit_view_tabs[0].push( tab_vacancy_column2 );\n\n\t\t// Position Open Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'position_open_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Position Open Date' ), form_item_input, tab_vacancy_column2 );\n\n\t\t// Position Expiry Date\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.DATE_PICKER );\n\t\tform_item_input.TDatePicker( { field: 'position_expire_date' } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Position Expire Date' ), form_item_input, tab_vacancy_column2 );\n\n\t\t// Wage Type\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.COMBO_BOX );\n\t\tform_item_input.TComboBox( { field: 'wage_type_id' } );\n\t\tform_item_input.setSourceData( $this.wage_type_array );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Wage Type' ), form_item_input, tab_vacancy_column2 );\n\n\t\t// Minimum Wage\n\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'minimum_wage', width: 150 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Minimum Wage' ), form_item_input, tab_vacancy_column2 );\n\n\t\t// Maximum Wage\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'maximum_wage', width: 150 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Maximum Wage' ), form_item_input, tab_vacancy_column2 );\n\n\t\t// Keywords\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_INPUT );\n\n\t\tform_item_input.TTextInput( { field: 'keywords', width: 200 } );\n\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Keywords' ), form_item_input, tab_vacancy_column2 );\n\n\t\t//Tags\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TAG_INPUT );\n\n\t\tform_item_input.TTagInput( { field: 'tag', object_type_id: 350 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Tags' ), form_item_input, tab_vacancy_column2, '', null, null, true );\n\n\t\tvar tab_vacancy_column4 = tab_vacancy.find( '.fourth-column' );\n\n\t\tthis.edit_view_tabs[0].push( tab_vacancy_column4 );\n\n\t\t// Summarized description\n\t\tform_item_input = Global.loadWidgetByName( FormItemType.TEXT_AREA );\n\t\tform_item_input.TTextArea( { field: 'summary_description', rows: 2 } );\n\t\tthis.addEditFieldToColumn( $.i18n._( 'Summary' ), form_item_input, tab_vacancy_column4, '', null, true );\n\t}\n\n\tbuildSearchFields() {\n\n\t\tsuper.buildSearchFields();\n\t\tthis.search_fields = [\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Name' ),\n\t\t\t\tfield: 'name',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 1,\n\t\t\t\tform_item_type: FormItemType.TEXT_INPUT\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'user_id',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Type' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'type_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Employee Status' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'employee_status_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Availability' ),\n\t\t\t\tin_column: 1,\n\t\t\t\tfield: 'availability_id',\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tlayout_name: 'global_option_column',\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Title' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'title_id',\n\t\t\t\tlayout_name: 'global_user_title',\n\t\t\t\tapi_class: TTAPI.APIUserTitle,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Branch' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'branch_id',\n\t\t\t\tlayout_name: 'global_branch',\n\t\t\t\tapi_class: TTAPI.APIBranch,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Department' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'department_id',\n\t\t\t\tlayout_name: 'global_department',\n\t\t\t\tapi_class: TTAPI.APIDepartment,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Created By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'created_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Updated By' ),\n\t\t\t\tin_column: 2,\n\t\t\t\tfield: 'updated_by',\n\t\t\t\tlayout_name: 'global_user',\n\t\t\t\tapi_class: TTAPI.APIUser,\n\t\t\t\tmultiple: true,\n\t\t\t\tbasic_search: false,\n\t\t\t\tadv_search: true,\n\t\t\t\tform_item_type: FormItemType.AWESOME_BOX\n\t\t\t} ),\n\n\t\t\tnew SearchField( {\n\t\t\t\tlabel: $.i18n._( 'Tags' ),\n\t\t\t\tfield: 'tag',\n\t\t\t\tbasic_search: true,\n\t\t\t\tadv_search: true,\n\t\t\t\tin_column: 2,\n\t\t\t\tobject_type_id: 350,\n\t\t\t\tform_item_type: FormItemType.TAG_INPUT\n\t\t\t} )\n\n\t\t];\n\t}\n\n\tsetCurrentEditRecordData() {\n\t\t//Set current edit record data to all widgets\n\t\tTTPromise.add( 'job_vacancy', 'setCurrentEditRecordData' );\n\t\tfor ( var key in this.current_edit_record ) {\n\n\t\t\tif ( !this.current_edit_record.hasOwnProperty( key ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ( key === 'description' ) {\n\t\t\t\tthis.setDescription();\n\t\t\t}\n\t\t\tvar widget = this.edit_view_ui_dic[key];\n\t\t\tif ( Global.isSet( widget ) ) {\n\t\t\t\tswitch ( key ) {\n\t\t\t\t\tcase 'country': //popular case\n\t\t\t\t\t\tthis.eSetProvince( this.current_edit_record[key] );\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'description':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twidget.setValue( this.current_edit_record[key] );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tthis.collectUIDataToCurrentEditRecord();\n\n\t\tvar $this = this;\n\t\tTTPromise.wait( 'job_vacancy', 'setCurrentEditRecordData', function() {\n\t\t\t$this.setEditViewDataDone();\n\t\t} );\n\t}\n\n\tsetEditViewDataDone() {\n\t\tvar $this = this;\n\t\tthis.moveFields();\n\t\tsuper.setEditViewDataDone();\n\n\t\tthis.resizeSummaryField();\n\t}\n\n\tresizeSummaryField() {\n\t\t//custom sizing for the summary box.\n\t\tvar form_item = this.edit_view_form_item_dic['summary_description'];\n\t\tvar form_item_input = this.edit_view_ui_dic['summary_description'];\n\t\tvar first_column_width = this.edit_view_tab.find( '#tab_vacancy' ).find( '.first-column' ).width();\n\t\tvar second_column_width = this.edit_view_tab.find( '#tab_vacancy' ).find( '.second-column' ).width();\n\t\tvar form_item_label_div = form_item.find( '.edit-view-form-item-label-div' );\n\t\tvar form_item_label_div_width = form_item_label_div.width();\n\n\t\tvar form_item_input_div_width = first_column_width + second_column_width - form_item_label_div_width;\n\n\t\tvar new_width = first_column_width + second_column_width - form_item_label_div_width + 2; // +2 resulted from trial and error. If the +2 gives trouble, remove it alltogether, it'll be a few pixels short, but at least won't get too long for the width. The old -5 no longer needed as we removed the margin-right in CSS.\n\t\tif ( this.is_mass_editing == true ) {\n\t\t\tnew_width -= $( '.mass-edit-checkbox' ).width();\n\t\t}\n\n\t\tform_item_input.width( new_width );\n\t}\n\n\tmoveFields() {\n\t\t// var first_column = this.edit_view_tab.find( '#tab_vacancy' ).find('.first-column');\n\t\tvar second_column = this.edit_view_tab.find( '#tab_vacancy' ).find( '.second-column' );\n\t\tthis.edit_view_form_item_dic['user_id'].appendTo( second_column );\n\t\tthis.edit_view_form_item_dic['positions'].appendTo( second_column );\n\t}\n\n\tsetDescription( el ) {\n\t\tvar $this = this;\n\t\tvar form_item = $( Global.loadWidgetByName( WidgetNamesDic.EDIT_VIEW_FORM_ITEM ) );\n\t\tvar form_item_label_div = form_item.find( '.edit-view-form-item-label-div' );\n\t\tvar form_item_input_div = form_item.find( '.edit-view-form-item-input-div' );\n\t\tvar form_item_label = form_item.find( '.edit-view-form-item-label' );\n\t\tform_item_label.text( $.i18n._( 'Description' ) );\n\t\tform_item_input_div.addClass( 'edit-view-form-item-tinymce-textarea-div' );\n\t\tvar tab_vacancy = this.edit_view_tab.find( '#tab_vacancy' );\n\t\t// var column = tab_vacancy.find( '.third-column' );\n\t\tvar tab_vacancy_column3 = tab_vacancy.find( '.third-column' );\n\t\ttab_vacancy_column3.html( form_item );\n\t\tthis.edit_view_tabs[0].push( tab_vacancy_column3 );\n\t\tthis.editFieldResize( 0 );\n\t\t// var widget = widgets;\n\t\tform_item_label_div.css( 'height', '340px' );\n\t\tform_item_label_div.css( 'width', form_item_label_div.width() + 1 );\n\t\tthis.showDescription();\n\n\t\twindow.onresize = function() {\n\t\t\tif ( this.edit_view ) {\n\t\t\t\t$this.resizeSummaryField();\n\t\t\t\t$this.resizeMCE();\n\t\t\t}\n\t\t};\n\t\treturn form_item;\n\t}\n\n\tresizeMCE() {\n\t\tvar $this = this;\n\t\tvar form_item_input = this.edit_view_ui_dic['summary_description'];\n\n\t\tvar parent_width = form_item_input.width() + 6; // padding 2, border 1 x2 on .job-vacancy-summary-description .t-text-area\n\t\t$this.edit_view_tab.find( '#tab_vacancy' ).find( '.third-column' ).find( '.edit-view-form-item-tinymce-textarea-div' ).width( parent_width );\n\t}\n\n\tshowDescription() {\n\t\tif ( !this.edit_view_tab ) {\n\t\t\treturn;\n\t\t}\n\t\tvar form_item_label_div_width = this.edit_view_tab.find( '#tab_vacancy' ).find( '.third-column' ).find( '.edit-view-form-item-label-div' ).width() + 12;\n\t\tvar el = Global.loadWidgetByName( FormItemType.TINYMCE_TEXT_AREA, true );\n\t\tvar description = this.current_edit_record['description'];\n\n\t\tvar width = $( this.edit_view_tab.find( '.edit-view-tab' )[0] ).width() - form_item_label_div_width;\n\t\tvar options = {\n\t\t\tdescription: description,\n\t\t\twidth: ( width - 3 ) + 'px',\n\t\t\theight: '335px'\n\t\t};\n\n\t\tvar readonly = false;\n\t\tif ( this.is_viewing ) {\n\t\t\treadonly = true;\n\t\t}\n\n\t\tvar tpl = _.template( el )( options );\n\t\ttinyMCE.remove();\n\t\tthis.edit_view_tab.find( '#tab_vacancy' ).find( '.third-column' ).find( '.edit-view-form-item-tinymce-textarea-div' ).html( tpl );\n\n\t\ttinyMCE.editors = [];\n\n\t\t// new tinyMCE.init code here\n\t\ttinyMCE.init( {\n\t\t\theight: '335px',\n\t\t\twidth: '100%',\n\t\t\tautoresize_min_width: ( width - 3 ),\n\t\t\tselector: '.tinymce-text-area',\n\t\t\treadonly: readonly,\n\t\t\tmenubar: false,\n\t\t\tstatusbar: false,\n\t\t\tplugins: 'link',\n\t\t\tcontent_style: 'body { font-size: 14px; margin-top: 0; color: #404042; padding: 0px; margin: 5px; }',\n\t\t\tsetup: ( editor ) => {\n\t\t\t\teditor.on( 'change', () => {\n\t\t\t\t\tthis.is_changed = true; //We need to set this flag so that the view controller knows data is changed.\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\tvar $this = this;\n\t\tvar tinymce_textarea = this.edit_view_tab.find( '#tab_vacancy' ).find( '.third-column' ).find( '.edit-view-form-item-tinymce-textarea-div' );\n\t\ttinymce_textarea.hide();\n\t\tvar search_for_tinymce = setInterval( function() {\n\t\t\tvar body = tinymce_textarea.find( 'iframe' ).contents().find( 'body' );\n\t\t\tif ( !_.isUndefined( body[0] ) ) {\n\t\t\t\tclearInterval( search_for_tinymce );\n\t\t\t\t// body.css({'font-size': '12px', 'background-color': '#fff', 'font-family': 'Lucida Grande, Lucida Sans, Arial, sans-serif'});\n\t\t\t\t$this.resizeSummaryField();\n\t\t\t\t$this.resizeMCE();\n\t\t\t\ttinymce_textarea.show();\n\n\t\t\t\tTTPromise.resolve( 'job_vacancy', 'setCurrentEditRecordData' );\n\t\t\t}\n\t\t}, 50 );\n\t}\n\n\tuniformVariable( records ) {\n\t\tif ( this.is_mass_editing ) {\n\t\t\treturn records;\n\t\t} else {\n\t\t\trecords.description = tinyMCE.activeEditor.getContent();\n\t\t}\n\t\treturn records;\n\t}\n\n\tinitSubApplicationView() {\n\t\tvar $this = this;\n\n\t\tif ( !this.current_edit_record.id ) {\n\t\t\tTTPromise.resolve( 'BaseViewController', 'onTabShow' ); //Since search() isn't called in this case, and we just display the \"Please Save This Record ...\" message, resolve the promise.\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.sub_job_vacancy_applicant_view_controller ) {\n\t\t\tthis.sub_job_vacancy_applicant_view_controller.buildContextMenu( true );\n\t\t\tthis.sub_job_vacancy_applicant_view_controller.setDefaultMenu();\n\t\t\t$this.sub_job_vacancy_applicant_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_job_vacancy_applicant_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_job_vacancy_applicant_view_controller.initData();\n\t\t\treturn;\n\t\t}\n\n\t\tTTPromise.add( 'initSubApplicationView', 'loadscript' );\n\t\tGlobal.loadScript( 'views/hr/recruitment/JobApplicationViewController.js', function() {\n\t\t\tvar tab_applications = $this.edit_view_tab.find( '#tab_applications' );\n\t\t\tvar firstColumn = tab_applications.find( '.first-column-sub-view' );\n\t\t\tGlobal.trackView( 'Sub' + 'JobApplication' + 'View' );\n\t\t\tJobApplicationViewController.loadSubView( firstColumn, beforeLoadView, afterLoadView );\n\n\t\t} );\n\n\t\tfunction beforeLoadView() {\n\n\t\t}\n\n\t\tfunction afterLoadView( subViewController ) {\n\t\t\t$this.sub_job_vacancy_applicant_view_controller = subViewController;\n\t\t\t$this.sub_job_vacancy_applicant_view_controller.parent_key = 'job_vacancy_id';\n\t\t\t$this.sub_job_vacancy_applicant_view_controller.parent_value = $this.current_edit_record.id;\n\t\t\t$this.sub_job_vacancy_applicant_view_controller.parent_edit_record = $this.current_edit_record;\n\t\t\t$this.sub_job_vacancy_applicant_view_controller.parent_view_controller = $this;\n\t\t\t$this.sub_job_vacancy_applicant_view_controller.postInit = function() {\n\t\t\t\tthis.initData();\n\t\t\t\tTTPromise.resolve( 'initSubApplicationView', 'loadscript' );\n\t\t\t};\n\t\t}\n\t}\n\n\tremoveEditView() {\n\t\tsuper.removeEditView();\n\t\tthis.sub_job_vacancy_applicant_view_controller = null;\n\t}\n\n\tonTabIndexChange( e, ui ) {\n\t\tthis.resizeSummaryField();\n\t\tthis.resizeMCE();\n\t\tsuper.onTabIndexChange( e, ui );\n\t}\n\n\tgetJobVacancyTabHtml() {\n\t\treturn `<div id=\"tab_vacancy\" class=\"edit-view-tab-outside\">\n\t\t\t\t\t<div class=\"edit-view-tab\" id=\"tab_vacancy_content_div\">\n\t\t\t\t\t\t<div class=\"first-column\"></div>\n\t\t\t\t\t\t<div class=\"second-column\"></div>\n\t\t\t\t\t\t<div class=\"fourth-column job-vacancy-summary-description\"></div>\n\t\t\t\t\t\t<div class=\"third-column full-width-column\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t}\n}\n"],"names":["JobVacancyViewController","options","_","$","$this","context_menu_model","id","context_btn","grid_selected_length","pId","grid_selected_id_array","select_item","setIcon","filter","result","result_data","context_menu_array","len","i","iconName","new_url","tab_model","tab_vacancy","tab_vacancy_column1","form_item_input","tab_vacancy_column2","tab_vacancy_column4","key","widget","form_item","first_column_width","second_column_width","form_item_label_div","form_item_label_div_width","new_width","second_column","el","form_item_input_div","form_item_label","tab_vacancy_column3","parent_width","description","width","readonly","tpl","tinyMCE","editor","tinymce_textarea","search_for_tinymce","body","records","tab_applications","firstColumn","beforeLoadView","afterLoadView","subViewController","e","ui"],"mappings":"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"}