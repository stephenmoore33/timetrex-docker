import{j as _}from"./vendor-tTApdY0Y.bundle.js";(function(i){i.fn.TImageBrowser=function(b){Global.addCss("global/widgets/filebrowser/TImageBrowser.css");var u=i.extend({},i.fn.TImageBrowser.defaults,b),r=this,m,v="file_browser",g="file_data",a,l="",d=null,o=177,h=42;this.setEnabled=function(e){var t=this.find(".browser-form input");e?(t.removeAttr("disabled"),t.removeClass("disable-element")):(t.attr("disabled",!0),t.removeClass("disable-element").addClass("disable-element"))},this.clearErrorStyle=function(){},this.getFileName=function(){return a.val()},this.getField=function(){return m},this.setEnableDelete=function(e){var t=r.find(".image");if(e)t.attr("enable-delete",1);else{t.removeAttr("enable-delete");return}},this.getValue=function(){if(d)return d;var e;return a&&a.val()?typeof FormData>"u"?e=r.find(".browser-form"):e=new FormData(i(r.find(".browser-form"))[0]):e=null,e},this.setValue=function(e){},this.getImageSrc=function(){var e=r.find(".image");return e.attr("src")},this.setImage=function(e){var t=r.find(".image");if(!e){t.attr("src",""),t.hide();return}var s=new Date;t.hide(),t.attr("src",e+"&t="+s.getTime()),t.css("height","auto"),t.css("width","auto")};var w=function(e){var t=i(e).height()>0?i(e).height():e.naturalHeight,s=i(e).width()>0?i(e).width():e.naturalWidth;t>h&&i(e).css("height",h),s>o&&(i(e).css("width",o),i(e).css("height","auto")),t<5?i(e).hide():i(e).show()};return this.each(function(){var e=i.meta?i.extend({},u,i(this).data()):u;m=e.field,e.default_width>0&&(o=e.default_width),e.default_height>0&&(h=e.default_height),Global.isSet(e.name)&&(g=e.name),Global.isSet(l)&&(l=e.accept_filter),Global.isSet(e.file)&&(d=e.file),a=i(this).find(".browser");var t=i(this).find(".image");t.hide(),t.on("load",function(){w(this)}),l?a.attr("accept",l):(l="image/*",a.attr("accept","image/*")),a.attr("id",v),a.attr("name",g),Global.isSet(e.changeHandler)&&r.bind("imageChange",e.changeHandler),Global.isSet(e.deleteImageHandler)&&this.find(".file-browser").on("deleteClick",function(){e.deleteImageHandler()}),a.bind("change",function(){if(t.hide(),this.files&&this.files[0]||e.file){let f=this.parentNode;if(f.classList.contains("custom-file-browser")){let c=f.querySelector(".file-browser-label");c&&(this.files&&this.files[0]?c.innerText=this.files[0].name:c.innerText="")}}if(typeof FileReader<"u"){var s=this.files?this.files:[];if(!s.length||!window.FileReader)return;if(l==="image/*"){var n=new FileReader;n.readAsDataURL(s[0]),n.onloadend=function(){var f=this.result;t.attr("src",f)}}}r.trigger("imageChange",[r])}),Global.isSet(e.file)&&a.trigger("change"),this.addEventListener("click",function(s){let n=this.querySelector(".custom-file-browser");n&&n.querySelector("input.browser").click()})}),this},i.fn.TImageBrowser.defaults={},i.fn.TImageBrowser.html_template=`
	<div class="file-browser">
		<img class="image">
		<form enctype="multipart/form-data" class="browser-form">
			<input name="file_data" class="browser" type="file"/>
		</form>
	</div>
	`})(_);
//# sourceMappingURL=TImageBrowser-CvdFimWY.bundle.js.map
